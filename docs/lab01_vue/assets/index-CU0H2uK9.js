const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ios.transition-BNsHtXkN.js","assets/animation-RSV60-Hv.js","assets/md.transition-DNIsIVuZ.js","assets/input-shims-DbGT9IDp.js","assets/keyboard2-eVZ91lm2.js","assets/keyboard-gqotNdwe.js"])))=>i.map(i=>d[i]);
function dg(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();/**
* @vue/shared v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xo(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const oe={},Yt=[],et=()=>{},Hr=()=>!1,vs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),So=e=>e.startsWith("onUpdate:"),_e=Object.assign,Ro=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Da=Object.prototype.hasOwnProperty,te=(e,t)=>Da.call(e,t),Y=Array.isArray,_n=e=>bs(e)==="[object Map]",Ba=e=>bs(e)==="[object Set]",K=e=>typeof e=="function",ge=e=>typeof e=="string",ln=e=>typeof e=="symbol",ue=e=>e!==null&&typeof e=="object",Fr=e=>(ue(e)||K(e))&&K(e.then)&&K(e.catch),Ha=Object.prototype.toString,bs=e=>Ha.call(e),Fa=e=>bs(e).slice(8,-1),ja=e=>bs(e)==="[object Object]",Ao=e=>ge(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,$n=xo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ys=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},za=/-\w/g,wt=ys(e=>e.replace(za,t=>t.slice(1).toUpperCase())),Va=/\B([A-Z])/g,Ft=ys(e=>e.replace(Va,"-$1").toLowerCase()),jr=ys(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ls=ys(e=>e?"on".concat(jr(e)):""),$t=(e,t)=>!Object.is(e,t),Ns=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},zr=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Ua=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let hi;const _s=()=>hi||(hi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Co(e){if(Y(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=ge(s)?Ka(s):Co(s);if(o)for(const i in o)t[i]=o[i]}return t}else if(ge(e)||ue(e))return e}const Wa=/;(?![^(]*\))/g,qa=/:([^]+)/,Ga=/\/\*[^]*?\*\//g;function Ka(e){const t={};return e.replace(Ga,"").split(Wa).forEach(n=>{if(n){const s=n.split(qa);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function To(e){let t="";if(ge(e))t=e;else if(Y(e))for(let n=0;n<e.length;n++){const s=To(e[n]);s&&(t+=s+" ")}else if(ue(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Ya="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xa=xo(Ya);function Vr(e){return!!e||e===""}/**
* @vue/reactivity v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pe;class Qa{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Pe,!t&&Pe&&(this.index=(Pe.scopes||(Pe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Pe;try{return Pe=this,t()}finally{Pe=n}}}on(){++this._on===1&&(this.prevScope=Pe,Pe=this)}off(){this._on>0&&--this._on===0&&(Pe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Za(){return Pe}let re;const Ms=new WeakSet;class Ur{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Pe&&Pe.active&&Pe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ms.has(this)&&(Ms.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||qr(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,pi(this),Gr(this);const t=re,n=je;re=this,je=!0;try{return this.fn()}finally{Kr(this),re=t,je=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ko(t);this.deps=this.depsTail=void 0,pi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ms.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ys(this)&&this.run()}get dirty(){return Ys(this)}}let Wr=0,En,wn;function qr(e,t=!1){if(e.flags|=8,t){e.next=wn,wn=e;return}e.next=En,En=e}function Po(){Wr++}function Oo(){if(--Wr>0)return;if(wn){let t=wn;for(wn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;En;){let t=En;for(En=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Gr(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Kr(e){let t,n=e.depsTail,s=n;for(;s;){const o=s.prevDep;s.version===-1?(s===n&&(n=o),ko(s),Ja(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=o}e.deps=t,e.depsTail=n}function Ys(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Yr(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Yr(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Tn)||(e.globalVersion=Tn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ys(e))))return;e.flags|=2;const t=e.dep,n=re,s=je;re=e,je=!0;try{Gr(e);const o=e.fn(e._value);(t.version===0||$t(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{re=n,je=s,Kr(e),e.flags&=-3}}function ko(e,t=!1){const{dep:n,prevSub:s,nextSub:o}=e;if(s&&(s.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)ko(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Ja(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let je=!0;const Xr=[];function ut(){Xr.push(je),je=!1}function ft(){const e=Xr.pop();je=e===void 0?!0:e}function pi(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=re;re=void 0;try{t()}finally{re=n}}}let Tn=0;class ec{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Io{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!re||!je||re===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==re)n=this.activeLink=new ec(re,this),re.deps?(n.prevDep=re.depsTail,re.depsTail.nextDep=n,re.depsTail=n):re.deps=re.depsTail=n,Qr(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=re.depsTail,n.nextDep=void 0,re.depsTail.nextDep=n,re.depsTail=n,re.deps===n&&(re.deps=s)}return n}trigger(t){this.version++,Tn++,this.notify(t)}notify(t){Po();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Oo()}}}function Qr(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Qr(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Xs=new WeakMap,It=Symbol(""),Qs=Symbol(""),Pn=Symbol("");function be(e,t,n){if(je&&re){let s=Xs.get(e);s||Xs.set(e,s=new Map);let o=s.get(n);o||(s.set(n,o=new Io),o.map=s,o.key=n),o.track()}}function at(e,t,n,s,o,i){const r=Xs.get(e);if(!r){Tn++;return}const l=a=>{a&&a.trigger()};if(Po(),t==="clear")r.forEach(l);else{const a=Y(e),c=a&&Ao(n);if(a&&n==="length"){const u=Number(s);r.forEach((f,h)=>{(h==="length"||h===Pn||!ln(h)&&h>=u)&&l(f)})}else switch((n!==void 0||r.has(void 0))&&l(r.get(n)),c&&l(r.get(Pn)),t){case"add":a?c&&l(r.get("length")):(l(r.get(It)),_n(e)&&l(r.get(Qs)));break;case"delete":a||(l(r.get(It)),_n(e)&&l(r.get(Qs)));break;case"set":_n(e)&&l(r.get(It));break}}Oo()}function Vt(e){const t=ee(e);return t===e?t:(be(t,"iterate",Pn),ze(e)?t:t.map(dt))}function Lo(e){return be(e=ee(e),"iterate",Pn),e}function mt(e,t){return xt(e)?Xt(e)?On(dt(t)):On(t):dt(t)}const tc={__proto__:null,[Symbol.iterator](){return Ds(this,Symbol.iterator,e=>mt(this,e))},concat(...e){return Vt(this).concat(...e.map(t=>Y(t)?Vt(t):t))},entries(){return Ds(this,"entries",e=>(e[1]=mt(this,e[1]),e))},every(e,t){return nt(this,"every",e,t,void 0,arguments)},filter(e,t){return nt(this,"filter",e,t,n=>n.map(s=>mt(this,s)),arguments)},find(e,t){return nt(this,"find",e,t,n=>mt(this,n),arguments)},findIndex(e,t){return nt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return nt(this,"findLast",e,t,n=>mt(this,n),arguments)},findLastIndex(e,t){return nt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return nt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Bs(this,"includes",e)},indexOf(...e){return Bs(this,"indexOf",e)},join(e){return Vt(this).join(e)},lastIndexOf(...e){return Bs(this,"lastIndexOf",e)},map(e,t){return nt(this,"map",e,t,void 0,arguments)},pop(){return dn(this,"pop")},push(...e){return dn(this,"push",e)},reduce(e,...t){return gi(this,"reduce",e,t)},reduceRight(e,...t){return gi(this,"reduceRight",e,t)},shift(){return dn(this,"shift")},some(e,t){return nt(this,"some",e,t,void 0,arguments)},splice(...e){return dn(this,"splice",e)},toReversed(){return Vt(this).toReversed()},toSorted(e){return Vt(this).toSorted(e)},toSpliced(...e){return Vt(this).toSpliced(...e)},unshift(...e){return dn(this,"unshift",e)},values(){return Ds(this,"values",e=>mt(this,e))}};function Ds(e,t,n){const s=Lo(e),o=s[t]();return s!==e&&!ze(e)&&(o._next=o.next,o.next=()=>{const i=o._next();return i.done||(i.value=n(i.value)),i}),o}const nc=Array.prototype;function nt(e,t,n,s,o,i){const r=Lo(e),l=r!==e&&!ze(e),a=r[t];if(a!==nc[t]){const f=a.apply(e,i);return l?dt(f):f}let c=n;r!==e&&(l?c=function(f,h){return n.call(this,mt(e,f),h,e)}:n.length>2&&(c=function(f,h){return n.call(this,f,h,e)}));const u=a.call(r,c,s);return l&&o?o(u):u}function gi(e,t,n,s){const o=Lo(e);let i=n;return o!==e&&(ze(e)?n.length>3&&(i=function(r,l,a){return n.call(this,r,l,a,e)}):i=function(r,l,a){return n.call(this,r,mt(e,l),a,e)}),o[t](i,...s)}function Bs(e,t,n){const s=ee(e);be(s,"iterate",Pn);const o=s[t](...n);return(o===-1||o===!1)&&Do(n[0])?(n[0]=ee(n[0]),s[t](...n)):o}function dn(e,t,n=[]){ut(),Po();const s=ee(e)[t].apply(e,n);return Oo(),ft(),s}const sc=xo("__proto__,__v_isRef,__isVue"),Zr=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ln));function oc(e){ln(e)||(e=String(e));const t=ee(this);return be(t,"has",e),t.hasOwnProperty(e)}class Jr{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(o?i?pc:sl:i?nl:tl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const r=Y(t);if(!o){let a;if(r&&(a=tc[n]))return a;if(n==="hasOwnProperty")return oc}const l=Reflect.get(t,n,ye(t)?t:s);if((ln(n)?Zr.has(n):sc(n))||(o||be(t,"get",n),i))return l;if(ye(l)){const a=r&&Ao(n)?l:l.value;return o&&ue(a)?Js(a):a}return ue(l)?o?Js(l):$s(l):l}}class el extends Jr{constructor(t=!1){super(!1,t)}set(t,n,s,o){let i=t[n];const r=Y(t)&&Ao(n);if(!this._isShallow){const c=xt(i);if(!ze(s)&&!xt(s)&&(i=ee(i),s=ee(s)),!r&&ye(i)&&!ye(s))return c||(i.value=s),!0}const l=r?Number(n)<t.length:te(t,n),a=Reflect.set(t,n,s,ye(t)?t:o);return t===ee(o)&&(l?$t(s,i)&&at(t,"set",n,s):at(t,"add",n,s)),a}deleteProperty(t,n){const s=te(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&s&&at(t,"delete",n,void 0),o}has(t,n){const s=Reflect.has(t,n);return(!ln(n)||!Zr.has(n))&&be(t,"has",n),s}ownKeys(t){return be(t,"iterate",Y(t)?"length":It),Reflect.ownKeys(t)}}class ic extends Jr{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const rc=new el,lc=new ic,ac=new el(!0);const Zs=e=>e,zn=e=>Reflect.getPrototypeOf(e);function cc(e,t,n){return function(...s){const o=this.__v_raw,i=ee(o),r=_n(i),l=e==="entries"||e===Symbol.iterator&&r,a=e==="keys"&&r,c=o[e](...s),u=n?Zs:t?On:dt;return!t&&be(i,"iterate",a?Qs:It),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:l?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Vn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function uc(e,t){const n={get(o){const i=this.__v_raw,r=ee(i),l=ee(o);e||($t(o,l)&&be(r,"get",o),be(r,"get",l));const{has:a}=zn(r),c=t?Zs:e?On:dt;if(a.call(r,o))return c(i.get(o));if(a.call(r,l))return c(i.get(l));i!==r&&i.get(o)},get size(){const o=this.__v_raw;return!e&&be(ee(o),"iterate",It),o.size},has(o){const i=this.__v_raw,r=ee(i),l=ee(o);return e||($t(o,l)&&be(r,"has",o),be(r,"has",l)),o===l?i.has(o):i.has(o)||i.has(l)},forEach(o,i){const r=this,l=r.__v_raw,a=ee(l),c=t?Zs:e?On:dt;return!e&&be(a,"iterate",It),l.forEach((u,f)=>o.call(i,c(u),c(f),r))}};return _e(n,e?{add:Vn("add"),set:Vn("set"),delete:Vn("delete"),clear:Vn("clear")}:{add(o){!t&&!ze(o)&&!xt(o)&&(o=ee(o));const i=ee(this);return zn(i).has.call(i,o)||(i.add(o),at(i,"add",o,o)),this},set(o,i){!t&&!ze(i)&&!xt(i)&&(i=ee(i));const r=ee(this),{has:l,get:a}=zn(r);let c=l.call(r,o);c||(o=ee(o),c=l.call(r,o));const u=a.call(r,o);return r.set(o,i),c?$t(i,u)&&at(r,"set",o,i):at(r,"add",o,i),this},delete(o){const i=ee(this),{has:r,get:l}=zn(i);let a=r.call(i,o);a||(o=ee(o),a=r.call(i,o)),l&&l.call(i,o);const c=i.delete(o);return a&&at(i,"delete",o,void 0),c},clear(){const o=ee(this),i=o.size!==0,r=o.clear();return i&&at(o,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=cc(o,e,t)}),n}function No(e,t){const n=uc(e,t);return(s,o,i)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(te(n,o)&&o in s?n:s,o,i)}const fc={get:No(!1,!1)},dc={get:No(!1,!0)},hc={get:No(!0,!1)};const tl=new WeakMap,nl=new WeakMap,sl=new WeakMap,pc=new WeakMap;function gc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mc(e){return e.__v_skip||!Object.isExtensible(e)?0:gc(Fa(e))}function $s(e){return xt(e)?e:Mo(e,!1,rc,fc,tl)}function ol(e){return Mo(e,!1,ac,dc,nl)}function Js(e){return Mo(e,!0,lc,hc,sl)}function Mo(e,t,n,s,o){if(!ue(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=mc(e);if(i===0)return e;const r=o.get(e);if(r)return r;const l=new Proxy(e,i===2?s:n);return o.set(e,l),l}function Xt(e){return xt(e)?Xt(e.__v_raw):!!(e&&e.__v_isReactive)}function xt(e){return!!(e&&e.__v_isReadonly)}function ze(e){return!!(e&&e.__v_isShallow)}function Do(e){return e?!!e.__v_raw:!1}function ee(e){const t=e&&e.__v_raw;return t?ee(t):e}function vc(e){return!te(e,"__v_skip")&&Object.isExtensible(e)&&zr(e,"__v_skip",!0),e}const dt=e=>ue(e)?$s(e):e,On=e=>ue(e)?Js(e):e;function ye(e){return e?e.__v_isRef===!0:!1}function Bo(e){return il(e,!1)}function Es(e){return il(e,!0)}function il(e,t){return ye(e)?e:new bc(e,t)}class bc{constructor(t,n){this.dep=new Io,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ee(t),this._value=n?t:dt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||ze(t)||xt(t);t=s?t:ee(t),$t(t,n)&&(this._rawValue=t,this._value=s?t:dt(t),this.dep.trigger())}}function ve(e){return ye(e)?e.value:e}const yc={get:(e,t,n)=>t==="__v_raw"?e:ve(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return ye(o)&&!ye(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function rl(e){return Xt(e)?e:new Proxy(e,yc)}class _c{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Io(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Tn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&re!==this)return qr(this,!0),!0}get value(){const t=this.dep.track();return Yr(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function $c(e,t,n=!1){let s,o;return K(e)?s=e:(s=e.get,o=e.set),new _c(s,o,n)}const Un={},es=new WeakMap;let Pt;function Ec(e,t=!1,n=Pt){if(n){let s=es.get(n);s||es.set(n,s=[]),s.push(e)}}function wc(e,t,n=oe){const{immediate:s,deep:o,once:i,scheduler:r,augmentJob:l,call:a}=n,c=_=>o?_:ze(_)||o===!1||o===0?ct(_,1):ct(_);let u,f,h,g,y=!1,v=!1;if(ye(e)?(f=()=>e.value,y=ze(e)):Xt(e)?(f=()=>c(e),y=!0):Y(e)?(v=!0,y=e.some(_=>Xt(_)||ze(_)),f=()=>e.map(_=>{if(ye(_))return _.value;if(Xt(_))return c(_);if(K(_))return a?a(_,2):_()})):K(e)?t?f=a?()=>a(e,2):e:f=()=>{if(h){ut();try{h()}finally{ft()}}const _=Pt;Pt=u;try{return a?a(e,3,[g]):e(g)}finally{Pt=_}}:f=et,t&&o){const _=f,A=o===!0?1/0:o;f=()=>ct(_(),A)}const R=Za(),b=()=>{u.stop(),R&&R.active&&Ro(R.effects,u)};if(i&&t){const _=t;t=(...A)=>{_(...A),b()}}let $=v?new Array(e.length).fill(Un):Un;const P=_=>{if(!(!(u.flags&1)||!u.dirty&&!_))if(t){const A=u.run();if(o||y||(v?A.some((N,x)=>$t(N,$[x])):$t(A,$))){h&&h();const N=Pt;Pt=u;try{const x=[A,$===Un?void 0:v&&$[0]===Un?[]:$,g];$=A,a?a(t,3,x):t(...x)}finally{Pt=N}}}else u.run()};return l&&l(P),u=new Ur(f),u.scheduler=r?()=>r(P,!1):P,g=_=>Ec(_,!1,u),h=u.onStop=()=>{const _=es.get(u);if(_){if(a)a(_,4);else for(const A of _)A();es.delete(u)}},t?s?P(!0):$=u.run():r?r(P.bind(null,!0),!0):u.run(),b.pause=u.pause.bind(u),b.resume=u.resume.bind(u),b.stop=b,b}function ct(e,t=1/0,n){if(t<=0||!ue(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,ye(e))ct(e.value,t,n);else if(Y(e))for(let s=0;s<e.length;s++)ct(e[s],t,n);else if(Ba(e)||_n(e))e.forEach(s=>{ct(s,t,n)});else if(ja(e)){for(const s in e)ct(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&ct(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Hn(e,t,n,s){try{return s?e(...s):e()}catch(o){ws(o,t,n)}}function tt(e,t,n,s){if(K(e)){const o=Hn(e,t,n,s);return o&&Fr(o)&&o.catch(i=>{ws(i,t,n)}),o}if(Y(e)){const o=[];for(let i=0;i<e.length;i++)o.push(tt(e[i],t,n,s));return o}}function ws(e,t,n,s=!0){const o=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||oe;if(t){let l=t.parent;const a=t.proxy,c="https://vuejs.org/error-reference/#runtime-".concat(n);for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,a,c)===!1)return}l=l.parent}if(i){ut(),Hn(i,null,10,[e,a,c]),ft();return}}xc(e,n,o,s,r)}function xc(e,t,n,s=!0,o=!1){if(o)throw e;console.error(e)}const xe=[];let Xe=-1;const Qt=[];let vt=null,Ut=0;const ll=Promise.resolve();let ts=null;function al(e){const t=ts||ll;return e?t.then(this?e.bind(this):e):t}function Sc(e){let t=Xe+1,n=xe.length;for(;t<n;){const s=t+n>>>1,o=xe[s],i=kn(o);i<e||i===e&&o.flags&2?t=s+1:n=s}return t}function Ho(e){if(!(e.flags&1)){const t=kn(e),n=xe[xe.length-1];!n||!(e.flags&2)&&t>=kn(n)?xe.push(e):xe.splice(Sc(t),0,e),e.flags|=1,cl()}}function cl(){ts||(ts=ll.then(fl))}function Rc(e){Y(e)?Qt.push(...e):vt&&e.id===-1?vt.splice(Ut+1,0,e):e.flags&1||(Qt.push(e),e.flags|=1),cl()}function mi(e,t,n=Xe+1){for(;n<xe.length;n++){const s=xe[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;xe.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function ul(e){if(Qt.length){const t=[...new Set(Qt)].sort((n,s)=>kn(n)-kn(s));if(Qt.length=0,vt){vt.push(...t);return}for(vt=t,Ut=0;Ut<vt.length;Ut++){const n=vt[Ut];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}vt=null,Ut=0}}const kn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function fl(e){try{for(Xe=0;Xe<xe.length;Xe++){const t=xe[Xe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Hn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Xe<xe.length;Xe++){const t=xe[Xe];t&&(t.flags&=-2)}Xe=-1,xe.length=0,ul(),ts=null,(xe.length||Qt.length)&&fl()}}let Fe=null,dl=null;function ns(e){const t=Fe;return Fe=e,dl=e&&e.type.__scopeId||null,t}function Qe(e,t=Fe,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&is(-1);const i=ns(t);let r;try{r=e(...o)}finally{ns(i),s._d&&is(1)}return r};return s._n=!0,s._c=!0,s._d=!0,s}function Ac(e,t){if(Fe===null)return e;const n=As(Fe),s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[i,r,l,a=oe]=t[o];i&&(K(i)&&(i={mounted:i,updated:i}),i.deep&&ct(r),s.push({dir:i,instance:n,value:r,oldValue:void 0,arg:l,modifiers:a}))}return e}function Ct(e,t,n,s){const o=e.dirs,i=t&&t.dirs;for(let r=0;r<o.length;r++){const l=o[r];i&&(l.oldValue=i[r].value);let a=l.dir[s];a&&(ut(),tt(a,n,8,[e.el,l,e,t]),ft())}}const Cc=Symbol("_vte"),Tc=e=>e.__isTeleport,Pc=Symbol("_leaveCb");function Fo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Fo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Rt(e,t){return K(e)?_e({name:e.name},t,{setup:e}):e}function hl(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const ss=new WeakMap;function xn(e,t,n,s,o=!1){if(Y(e)){e.forEach((y,v)=>xn(y,t&&(Y(t)?t[v]:t),n,s,o));return}if(Sn(s)&&!o){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&xn(e,t,n,s.component.subTree);return}const i=s.shapeFlag&4?As(s.component):s.el,r=o?null:i,{i:l,r:a}=e,c=t&&t.r,u=l.refs===oe?l.refs={}:l.refs,f=l.setupState,h=ee(f),g=f===oe?Hr:y=>te(h,y);if(c!=null&&c!==a){if(vi(t),ge(c))u[c]=null,g(c)&&(f[c]=null);else if(ye(c)){c.value=null;const y=t;y.k&&(u[y.k]=null)}}if(K(a))Hn(a,l,12,[r,u]);else{const y=ge(a),v=ye(a);if(y||v){const R=()=>{if(e.f){const b=y?g(a)?f[a]:u[a]:a.value;if(o)Y(b)&&Ro(b,i);else if(Y(b))b.includes(i)||b.push(i);else if(y)u[a]=[i],g(a)&&(f[a]=u[a]);else{const $=[i];a.value=$,e.k&&(u[e.k]=$)}}else y?(u[a]=r,g(a)&&(f[a]=r)):v&&(a.value=r,e.k&&(u[e.k]=r))};if(r){const b=()=>{R(),ss.delete(e)};b.id=-1,ss.set(e,b),Ne(b,n)}else vi(e),R()}}}function vi(e){const t=ss.get(e);t&&(t.flags|=8,ss.delete(e))}_s().requestIdleCallback;_s().cancelIdleCallback;const Sn=e=>!!e.type.__asyncLoader,pl=e=>e.type.__isKeepAlive;function Oc(e,t){gl(e,"a",t)}function kc(e,t){gl(e,"da",t)}function gl(e,t,n=Se){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(xs(t,s,n),n){let o=n.parent;for(;o&&o.parent;)pl(o.parent.vnode)&&Ic(s,t,n,o),o=o.parent}}function Ic(e,t,n,s){const o=xs(t,e,s,!0);jo(()=>{Ro(s[t],o)},n)}function xs(e,t,n=Se,s=!1){if(n){const o=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...r)=>{ut();const l=Fn(n),a=tt(t,n,e,r);return l(),ft(),a});return s?o.unshift(i):o.push(i),i}}const pt=e=>(t,n=Se)=>{(!Ln||e==="sp")&&xs(e,(...s)=>t(...s),n)},Lc=pt("bm"),ml=pt("m"),Nc=pt("bu"),Mc=pt("u"),Dc=pt("bum"),jo=pt("um"),Bc=pt("sp"),Hc=pt("rtg"),Fc=pt("rtc");function jc(e,t=Se){xs("ec",e,t)}const zc=Symbol.for("v-ndc"),eo=e=>e?Dl(e)?As(e):eo(e.parent):null,Rn=_e(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>eo(e.parent),$root:e=>eo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>bl(e),$forceUpdate:e=>e.f||(e.f=()=>{Ho(e.update)}),$nextTick:e=>e.n||(e.n=al.bind(e.proxy)),$watch:e=>Jc.bind(e)}),Hs=(e,t)=>e!==oe&&!e.__isScriptSetup&&te(e,t),Vc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:o,props:i,accessCache:r,type:l,appContext:a}=e;if(t[0]!=="$"){const h=r[t];if(h!==void 0)switch(h){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return i[t]}else{if(Hs(s,t))return r[t]=1,s[t];if(o!==oe&&te(o,t))return r[t]=2,o[t];if(te(i,t))return r[t]=3,i[t];if(n!==oe&&te(n,t))return r[t]=4,n[t];to&&(r[t]=0)}}const c=Rn[t];let u,f;if(c)return t==="$attrs"&&be(e.attrs,"get",""),c(e);if((u=l.__cssModules)&&(u=u[t]))return u;if(n!==oe&&te(n,t))return r[t]=4,n[t];if(f=a.config.globalProperties,te(f,t))return f[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:i}=e;return Hs(o,t)?(o[t]=n,!0):s!==oe&&te(s,t)?(s[t]=n,!0):te(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,props:i,type:r}},l){let a;return!!(n[l]||e!==oe&&l[0]!=="$"&&te(e,l)||Hs(t,l)||te(i,l)||te(s,l)||te(Rn,l)||te(o.config.globalProperties,l)||(a=r.__cssModules)&&a[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:te(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function bi(e){return Y(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let to=!0;function Uc(e){const t=bl(e),n=e.proxy,s=e.ctx;to=!1,t.beforeCreate&&yi(t.beforeCreate,e,"bc");const{data:o,computed:i,methods:r,watch:l,provide:a,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:g,updated:y,activated:v,deactivated:R,beforeDestroy:b,beforeUnmount:$,destroyed:P,unmounted:_,render:A,renderTracked:N,renderTriggered:x,errorCaptured:I,serverPrefetch:D,expose:W,inheritAttrs:F,components:me,directives:V,filters:ke}=t;if(c&&Wc(c,s,null),r)for(const X in r){const j=r[X];K(j)&&(s[X]=j.bind(n))}if(o){const X=o.call(n,n);ue(X)&&(e.data=$s(X))}if(to=!0,i)for(const X in i){const j=i[X],Ie=K(j)?j.bind(n,n):K(j.get)?j.get.bind(n,n):et,Ue=!K(j)&&K(j.set)?j.set.bind(n):et,We=He({get:Ie,set:Ue});Object.defineProperty(s,X,{enumerable:!0,configurable:!0,get:()=>We.value,set:Ae=>We.value=Ae})}if(l)for(const X in l)vl(l[X],s,n,X);if(a){const X=K(a)?a.call(n):a;Reflect.ownKeys(X).forEach(j=>{Jt(j,X[j])})}u&&yi(u,e,"c");function le(X,j){Y(j)?j.forEach(Ie=>X(Ie.bind(n))):j&&X(j.bind(n))}if(le(Lc,f),le(ml,h),le(Nc,g),le(Mc,y),le(Oc,v),le(kc,R),le(jc,I),le(Fc,N),le(Hc,x),le(Dc,$),le(jo,_),le(Bc,D),Y(W))if(W.length){const X=e.exposed||(e.exposed={});W.forEach(j=>{Object.defineProperty(X,j,{get:()=>n[j],set:Ie=>n[j]=Ie,enumerable:!0})})}else e.exposed||(e.exposed={});A&&e.render===et&&(e.render=A),F!=null&&(e.inheritAttrs=F),me&&(e.components=me),V&&(e.directives=V),D&&hl(e)}function Wc(e,t,n=et){Y(e)&&(e=no(e));for(const s in e){const o=e[s];let i;ue(o)?"default"in o?i=Re(o.from||s,o.default,!0):i=Re(o.from||s):i=Re(o),ye(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:r=>i.value=r}):t[s]=i}}function yi(e,t,n){tt(Y(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function vl(e,t,n,s){let o=s.includes(".")?$l(n,s):()=>n[s];if(ge(e)){const i=t[e];K(i)&&en(o,i)}else if(K(e))en(o,e.bind(n));else if(ue(e))if(Y(e))e.forEach(i=>vl(i,t,n,s));else{const i=K(e.handler)?e.handler.bind(n):t[e.handler];K(i)&&en(o,i,e)}}function bl(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:r}}=e.appContext,l=i.get(t);let a;return l?a=l:!o.length&&!n&&!s?a=t:(a={},o.length&&o.forEach(c=>os(a,c,r,!0)),os(a,t,r)),ue(t)&&i.set(t,a),a}function os(e,t,n,s=!1){const{mixins:o,extends:i}=t;i&&os(e,i,n,!0),o&&o.forEach(r=>os(e,r,n,!0));for(const r in t)if(!(s&&r==="expose")){const l=qc[r]||n&&n[r];e[r]=l?l(e[r],t[r]):t[r]}return e}const qc={data:_i,props:$i,emits:$i,methods:vn,computed:vn,beforeCreate:Ee,created:Ee,beforeMount:Ee,mounted:Ee,beforeUpdate:Ee,updated:Ee,beforeDestroy:Ee,beforeUnmount:Ee,destroyed:Ee,unmounted:Ee,activated:Ee,deactivated:Ee,errorCaptured:Ee,serverPrefetch:Ee,components:vn,directives:vn,watch:Kc,provide:_i,inject:Gc};function _i(e,t){return t?e?function(){return _e(K(e)?e.call(this,this):e,K(t)?t.call(this,this):t)}:t:e}function Gc(e,t){return vn(no(e),no(t))}function no(e){if(Y(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ee(e,t){return e?[...new Set([].concat(e,t))]:t}function vn(e,t){return e?_e(Object.create(null),e,t):t}function $i(e,t){return e?Y(e)&&Y(t)?[...new Set([...e,...t])]:_e(Object.create(null),bi(e),bi(t!=null?t:{})):t}function Kc(e,t){if(!e)return t;if(!t)return e;const n=_e(Object.create(null),e);for(const s in t)n[s]=Ee(e[s],t[s]);return n}function yl(){return{app:null,config:{isNativeTag:Hr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Yc=0;function Xc(e,t){return function(s,o=null){K(s)||(s=_e({},s)),o!=null&&!ue(o)&&(o=null);const i=yl(),r=new WeakSet,l=[];let a=!1;const c=i.app={_uid:Yc++,_component:s,_props:o,_container:null,_context:i,_instance:null,version:Ou,get config(){return i.config},set config(u){},use(u,...f){return r.has(u)||(u&&K(u.install)?(r.add(u),u.install(c,...f)):K(u)&&(r.add(u),u(c,...f))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,f){return f?(i.components[u]=f,c):i.components[u]},directive(u,f){return f?(i.directives[u]=f,c):i.directives[u]},mount(u,f,h){if(!a){const g=c._ceVNode||de(s,o);return g.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),e(g,u,h),a=!0,c._container=u,u.__vue_app__=c,As(g.component)}},onUnmount(u){l.push(u)},unmount(){a&&(tt(l,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,f){return i.provides[u]=f,c},runWithContext(u){const f=Zt;Zt=c;try{return u()}finally{Zt=f}}};return c}}let Zt=null;function Jt(e,t){if(Se){let n=Se.provides;const s=Se.parent&&Se.parent.provides;s===n&&(n=Se.provides=Object.create(s)),n[e]=t}}function Re(e,t,n=!1){const s=Wo();if(s||Zt){let o=Zt?Zt._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&K(t)?t.call(s&&s.proxy):t}}const Qc=Symbol.for("v-scx"),Zc=()=>Re(Qc);function en(e,t,n){return _l(e,t,n)}function _l(e,t,n=oe){const{immediate:s,deep:o,flush:i,once:r}=n,l=_e({},n),a=t&&s||!t&&i!=="post";let c;if(Ln){if(i==="sync"){const g=Zc();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!a){const g=()=>{};return g.stop=et,g.resume=et,g.pause=et,g}}const u=Se;l.call=(g,y,v)=>tt(g,u,y,v);let f=!1;i==="post"?l.scheduler=g=>{Ne(g,u&&u.suspense)}:i!=="sync"&&(f=!0,l.scheduler=(g,y)=>{y?g():Ho(g)}),l.augmentJob=g=>{t&&(g.flags|=4),f&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const h=wc(e,t,l);return Ln&&(c?c.push(h):a&&h()),h}function Jc(e,t,n){const s=this.proxy,o=ge(e)?e.includes(".")?$l(s,e):()=>s[e]:e.bind(s,s);let i;K(t)?i=t:(i=t.handler,n=t);const r=Fn(this),l=_l(o,i.bind(s),n);return r(),l}function $l(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}const eu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e["".concat(t,"Modifiers")]||e["".concat(wt(t),"Modifiers")]||e["".concat(Ft(t),"Modifiers")];function tu(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||oe;let o=n;const i=t.startsWith("update:"),r=i&&eu(s,t.slice(7));r&&(r.trim&&(o=n.map(u=>ge(u)?u.trim():u)),r.number&&(o=n.map(Ua)));let l,a=s[l=Ls(t)]||s[l=Ls(wt(t))];!a&&i&&(a=s[l=Ls(Ft(t))]),a&&tt(a,e,6,o);const c=s[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,tt(c,e,6,o)}}const nu=new WeakMap;function El(e,t,n=!1){const s=n?nu:t.emitsCache,o=s.get(e);if(o!==void 0)return o;const i=e.emits;let r={},l=!1;if(!K(e)){const a=c=>{const u=El(c,t,!0);u&&(l=!0,_e(r,u))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!i&&!l?(ue(e)&&s.set(e,null),null):(Y(i)?i.forEach(a=>r[a]=null):_e(r,i),ue(e)&&s.set(e,r),r)}function Ss(e,t){return!e||!vs(t)?!1:(t=t.slice(2).replace(/Once$/,""),te(e,t[0].toLowerCase()+t.slice(1))||te(e,Ft(t))||te(e,t))}function Ei(e){const{type:t,vnode:n,proxy:s,withProxy:o,propsOptions:[i],slots:r,attrs:l,emit:a,render:c,renderCache:u,props:f,data:h,setupState:g,ctx:y,inheritAttrs:v}=e,R=ns(e);let b,$;try{if(n.shapeFlag&4){const _=o||s,A=_;b=Ze(c.call(A,_,u,f,g,h,y)),$=l}else{const _=t;b=Ze(_.length>1?_(f,{attrs:l,slots:r,emit:a}):_(f,null)),$=t.props?l:su(l)}}catch(_){An.length=0,ws(_,e,1),b=de(nn)}let P=b;if($&&v!==!1){const _=Object.keys($),{shapeFlag:A}=P;_.length&&A&7&&(i&&_.some(So)&&($=ou($,i)),P=sn(P,$,!1,!0))}return n.dirs&&(P=sn(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(n.dirs):n.dirs),n.transition&&Fo(P,n.transition),b=P,ns(R),b}const su=e=>{let t;for(const n in e)(n==="class"||n==="style"||vs(n))&&((t||(t={}))[n]=e[n]);return t},ou=(e,t)=>{const n={};for(const s in e)(!So(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function iu(e,t,n){const{props:s,children:o,component:i}=e,{props:r,children:l,patchFlag:a}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return s?wi(s,r,c):!!r;if(a&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(r[h]!==s[h]&&!Ss(c,h))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:s===r?!1:s?r?wi(s,r,c):!0:!!r;return!1}function wi(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const i=s[o];if(t[i]!==e[i]&&!Ss(n,i))return!0}return!1}function ru({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const wl={},xl=()=>Object.create(wl),Sl=e=>Object.getPrototypeOf(e)===wl;function lu(e,t,n,s=!1){const o={},i=xl();e.propsDefaults=Object.create(null),Rl(e,t,o,i);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);n?e.props=s?o:ol(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function au(e,t,n,s){const{props:o,attrs:i,vnode:{patchFlag:r}}=e,l=ee(o),[a]=e.propsOptions;let c=!1;if((s||r>0)&&!(r&16)){if(r&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Ss(e.emitsOptions,h))continue;const g=t[h];if(a)if(te(i,h))g!==i[h]&&(i[h]=g,c=!0);else{const y=wt(h);o[y]=so(a,l,y,g,e,!1)}else g!==i[h]&&(i[h]=g,c=!0)}}}else{Rl(e,t,o,i)&&(c=!0);let u;for(const f in l)(!t||!te(t,f)&&((u=Ft(f))===f||!te(t,u)))&&(a?n&&(n[f]!==void 0||n[u]!==void 0)&&(o[f]=so(a,l,f,void 0,e,!0)):delete o[f]);if(i!==l)for(const f in i)(!t||!te(t,f))&&(delete i[f],c=!0)}c&&at(e.attrs,"set","")}function Rl(e,t,n,s){const[o,i]=e.propsOptions;let r=!1,l;if(t)for(let a in t){if($n(a))continue;const c=t[a];let u;o&&te(o,u=wt(a))?!i||!i.includes(u)?n[u]=c:(l||(l={}))[u]=c:Ss(e.emitsOptions,a)||(!(a in s)||c!==s[a])&&(s[a]=c,r=!0)}if(i){const a=ee(n),c=l||oe;for(let u=0;u<i.length;u++){const f=i[u];n[f]=so(o,a,f,c[f],e,!te(c,f))}}return r}function so(e,t,n,s,o,i){const r=e[n];if(r!=null){const l=te(r,"default");if(l&&s===void 0){const a=r.default;if(r.type!==Function&&!r.skipFactory&&K(a)){const{propsDefaults:c}=o;if(n in c)s=c[n];else{const u=Fn(o);s=c[n]=a.call(null,t),u()}}else s=a;o.ce&&o.ce._setProp(n,s)}r[0]&&(i&&!l?s=!1:r[1]&&(s===""||s===Ft(n))&&(s=!0))}return s}const cu=new WeakMap;function Al(e,t,n=!1){const s=n?cu:t.propsCache,o=s.get(e);if(o)return o;const i=e.props,r={},l=[];let a=!1;if(!K(e)){const u=f=>{a=!0;const[h,g]=Al(f,t,!0);_e(r,h),g&&l.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!a)return ue(e)&&s.set(e,Yt),Yt;if(Y(i))for(let u=0;u<i.length;u++){const f=wt(i[u]);xi(f)&&(r[f]=oe)}else if(i)for(const u in i){const f=wt(u);if(xi(f)){const h=i[u],g=r[f]=Y(h)||K(h)?{type:h}:_e({},h),y=g.type;let v=!1,R=!0;if(Y(y))for(let b=0;b<y.length;++b){const $=y[b],P=K($)&&$.name;if(P==="Boolean"){v=!0;break}else P==="String"&&(R=!1)}else v=K(y)&&y.name==="Boolean";g[0]=v,g[1]=R,(v||te(g,"default"))&&l.push(f)}}const c=[r,l];return ue(e)&&s.set(e,c),c}function xi(e){return e[0]!=="$"&&!$n(e)}const zo=e=>e==="_"||e==="_ctx"||e==="$stable",Vo=e=>Y(e)?e.map(Ze):[Ze(e)],uu=(e,t,n)=>{if(t._n)return t;const s=Qe((...o)=>Vo(t(...o)),n);return s._c=!1,s},Cl=(e,t,n)=>{const s=e._ctx;for(const o in e){if(zo(o))continue;const i=e[o];if(K(i))t[o]=uu(o,i,s);else if(i!=null){const r=Vo(i);t[o]=()=>r}}},Tl=(e,t)=>{const n=Vo(t);e.slots.default=()=>n},Pl=(e,t,n)=>{for(const s in t)(n||!zo(s))&&(e[s]=t[s])},fu=(e,t,n)=>{const s=e.slots=xl();if(e.vnode.shapeFlag&32){const o=t._;o?(Pl(s,t,n),n&&zr(s,"_",o,!0)):Cl(t,s)}else t&&Tl(e,t)},du=(e,t,n)=>{const{vnode:s,slots:o}=e;let i=!0,r=oe;if(s.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Pl(o,t,n):(i=!t.$stable,Cl(t,o)),r=t}else t&&(Tl(e,t),r={default:1});if(i)for(const l in o)!zo(l)&&r[l]==null&&delete o[l]},Ne=vu;function hu(e){return pu(e)}function pu(e,t){const n=_s();n.__VUE__=!0;const{insert:s,remove:o,patchProp:i,createElement:r,createText:l,createComment:a,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:g=et,insertStaticContent:y}=e,v=(d,p,m,w=null,C=null,E=null,L=void 0,k=null,O=!!p.dynamicChildren)=>{if(d===p)return;d&&!hn(d,p)&&(w=S(d),Ae(d,C,E,!0),d=null),p.patchFlag===-2&&(O=!1,p.dynamicChildren=null);const{type:T,ref:q,shapeFlag:B}=p;switch(T){case Rs:R(d,p,m,w);break;case nn:b(d,p,m,w);break;case js:d==null&&$(p,m,w,L);break;case it:me(d,p,m,w,C,E,L,k,O);break;default:B&1?A(d,p,m,w,C,E,L,k,O):B&6?V(d,p,m,w,C,E,L,k,O):(B&64||B&128)&&T.process(d,p,m,w,C,E,L,k,O,z)}q!=null&&C?xn(q,d&&d.ref,E,p||d,!p):q==null&&d&&d.ref!=null&&xn(d.ref,null,E,d,!0)},R=(d,p,m,w)=>{if(d==null)s(p.el=l(p.children),m,w);else{const C=p.el=d.el;p.children!==d.children&&c(C,p.children)}},b=(d,p,m,w)=>{d==null?s(p.el=a(p.children||""),m,w):p.el=d.el},$=(d,p,m,w)=>{[d.el,d.anchor]=y(d.children,p,m,w,d.el,d.anchor)},P=({el:d,anchor:p},m,w)=>{let C;for(;d&&d!==p;)C=h(d),s(d,m,w),d=C;s(p,m,w)},_=({el:d,anchor:p})=>{let m;for(;d&&d!==p;)m=h(d),o(d),d=m;o(p)},A=(d,p,m,w,C,E,L,k,O)=>{if(p.type==="svg"?L="svg":p.type==="math"&&(L="mathml"),d==null)N(p,m,w,C,E,L,k,O);else{const T=d.el&&d.el._isVueCE?d.el:null;try{T&&T._beginPatch(),D(d,p,C,E,L,k,O)}finally{T&&T._endPatch()}}},N=(d,p,m,w,C,E,L,k)=>{let O,T;const{props:q,shapeFlag:B,transition:U,dirs:G}=d;if(O=d.el=r(d.type,E,q&&q.is,q),B&8?u(O,d.children):B&16&&I(d.children,O,null,w,C,Fs(d,E),L,k),G&&Ct(d,null,w,"created"),x(O,d,d.scopeId,L,w),q){for(const ie in q)ie!=="value"&&!$n(ie)&&i(O,ie,null,q[ie],E,w);"value"in q&&i(O,"value",null,q.value,E),(T=q.onVnodeBeforeMount)&&Ye(T,w,d)}G&&Ct(d,null,w,"beforeMount");const Z=gu(C,U);Z&&U.beforeEnter(O),s(O,p,m),((T=q&&q.onVnodeMounted)||Z||G)&&Ne(()=>{T&&Ye(T,w,d),Z&&U.enter(O),G&&Ct(d,null,w,"mounted")},C)},x=(d,p,m,w,C)=>{if(m&&g(d,m),w)for(let E=0;E<w.length;E++)g(d,w[E]);if(C){let E=C.subTree;if(p===E||Il(E.type)&&(E.ssContent===p||E.ssFallback===p)){const L=C.vnode;x(d,L,L.scopeId,L.slotScopeIds,C.parent)}}},I=(d,p,m,w,C,E,L,k,O=0)=>{for(let T=O;T<d.length;T++){const q=d[T]=k?bt(d[T]):Ze(d[T]);v(null,q,p,m,w,C,E,L,k)}},D=(d,p,m,w,C,E,L)=>{const k=p.el=d.el;let{patchFlag:O,dynamicChildren:T,dirs:q}=p;O|=d.patchFlag&16;const B=d.props||oe,U=p.props||oe;let G;if(m&&Tt(m,!1),(G=U.onVnodeBeforeUpdate)&&Ye(G,m,p,d),q&&Ct(p,d,m,"beforeUpdate"),m&&Tt(m,!0),(B.innerHTML&&U.innerHTML==null||B.textContent&&U.textContent==null)&&u(k,""),T?W(d.dynamicChildren,T,k,m,w,Fs(p,C),E):L||j(d,p,k,null,m,w,Fs(p,C),E,!1),O>0){if(O&16)F(k,B,U,m,C);else if(O&2&&B.class!==U.class&&i(k,"class",null,U.class,C),O&4&&i(k,"style",B.style,U.style,C),O&8){const Z=p.dynamicProps;for(let ie=0;ie<Z.length;ie++){const ne=Z[ie],Ce=B[ne],Te=U[ne];(Te!==Ce||ne==="value")&&i(k,ne,Ce,Te,C,m)}}O&1&&d.children!==p.children&&u(k,p.children)}else!L&&T==null&&F(k,B,U,m,C);((G=U.onVnodeUpdated)||q)&&Ne(()=>{G&&Ye(G,m,p,d),q&&Ct(p,d,m,"updated")},w)},W=(d,p,m,w,C,E,L)=>{for(let k=0;k<p.length;k++){const O=d[k],T=p[k],q=O.el&&(O.type===it||!hn(O,T)||O.shapeFlag&198)?f(O.el):m;v(O,T,q,null,w,C,E,L,!0)}},F=(d,p,m,w,C)=>{if(p!==m){if(p!==oe)for(const E in p)!$n(E)&&!(E in m)&&i(d,E,p[E],null,C,w);for(const E in m){if($n(E))continue;const L=m[E],k=p[E];L!==k&&E!=="value"&&i(d,E,k,L,C,w)}"value"in m&&i(d,"value",p.value,m.value,C)}},me=(d,p,m,w,C,E,L,k,O)=>{const T=p.el=d?d.el:l(""),q=p.anchor=d?d.anchor:l("");let{patchFlag:B,dynamicChildren:U,slotScopeIds:G}=p;G&&(k=k?k.concat(G):G),d==null?(s(T,m,w),s(q,m,w),I(p.children||[],m,q,C,E,L,k,O)):B>0&&B&64&&U&&d.dynamicChildren?(W(d.dynamicChildren,U,m,C,E,L,k),(p.key!=null||C&&p===C.subTree)&&Ol(d,p,!0)):j(d,p,m,q,C,E,L,k,O)},V=(d,p,m,w,C,E,L,k,O)=>{p.slotScopeIds=k,d==null?p.shapeFlag&512?C.ctx.activate(p,m,w,L,O):ke(p,m,w,C,E,L,O):De(d,p,O)},ke=(d,p,m,w,C,E,L)=>{const k=d.component=Su(d,w,C);if(pl(d)&&(k.ctx.renderer=z),Ru(k,!1,L),k.asyncDep){if(C&&C.registerDep(k,le,L),!d.el){const O=k.subTree=de(nn);b(null,O,p,m),d.placeholder=O.el}}else le(k,d,p,m,C,E,L)},De=(d,p,m)=>{const w=p.component=d.component;if(iu(d,p,m))if(w.asyncDep&&!w.asyncResolved){X(w,p,m);return}else w.next=p,w.update();else p.el=d.el,w.vnode=p},le=(d,p,m,w,C,E,L)=>{const k=()=>{if(d.isMounted){let{next:B,bu:U,u:G,parent:Z,vnode:ie}=d;{const Ge=kl(d);if(Ge){B&&(B.el=ie.el,X(d,B,L)),Ge.asyncDep.then(()=>{d.isUnmounted||k()});return}}let ne=B,Ce;Tt(d,!1),B?(B.el=ie.el,X(d,B,L)):B=ie,U&&Ns(U),(Ce=B.props&&B.props.onVnodeBeforeUpdate)&&Ye(Ce,Z,B,ie),Tt(d,!0);const Te=Ei(d),qe=d.subTree;d.subTree=Te,v(qe,Te,f(qe.el),S(qe),d,C,E),B.el=Te.el,ne===null&&ru(d,Te.el),G&&Ne(G,C),(Ce=B.props&&B.props.onVnodeUpdated)&&Ne(()=>Ye(Ce,Z,B,ie),C)}else{let B;const{el:U,props:G}=p,{bm:Z,m:ie,parent:ne,root:Ce,type:Te}=d,qe=Sn(p);Tt(d,!1),Z&&Ns(Z),!qe&&(B=G&&G.onVnodeBeforeMount)&&Ye(B,ne,p),Tt(d,!0);{Ce.ce&&Ce.ce._def.shadowRoot!==!1&&Ce.ce._injectChildStyle(Te);const Ge=d.subTree=Ei(d);v(null,Ge,m,w,d,C,E),p.el=Ge.el}if(ie&&Ne(ie,C),!qe&&(B=G&&G.onVnodeMounted)){const Ge=p;Ne(()=>Ye(B,ne,Ge),C)}(p.shapeFlag&256||ne&&Sn(ne.vnode)&&ne.vnode.shapeFlag&256)&&d.a&&Ne(d.a,C),d.isMounted=!0,p=m=w=null}};d.scope.on();const O=d.effect=new Ur(k);d.scope.off();const T=d.update=O.run.bind(O),q=d.job=O.runIfDirty.bind(O);q.i=d,q.id=d.uid,O.scheduler=()=>Ho(q),Tt(d,!0),T()},X=(d,p,m)=>{p.component=d;const w=d.vnode.props;d.vnode=p,d.next=null,au(d,p.props,w,m),du(d,p.children,m),ut(),mi(d),ft()},j=(d,p,m,w,C,E,L,k,O=!1)=>{const T=d&&d.children,q=d?d.shapeFlag:0,B=p.children,{patchFlag:U,shapeFlag:G}=p;if(U>0){if(U&128){Ue(T,B,m,w,C,E,L,k,O);return}else if(U&256){Ie(T,B,m,w,C,E,L,k,O);return}}G&8?(q&16&&Be(T,C,E),B!==T&&u(m,B)):q&16?G&16?Ue(T,B,m,w,C,E,L,k,O):Be(T,C,E,!0):(q&8&&u(m,""),G&16&&I(B,m,w,C,E,L,k,O))},Ie=(d,p,m,w,C,E,L,k,O)=>{d=d||Yt,p=p||Yt;const T=d.length,q=p.length,B=Math.min(T,q);let U;for(U=0;U<B;U++){const G=p[U]=O?bt(p[U]):Ze(p[U]);v(d[U],G,m,null,C,E,L,k,O)}T>q?Be(d,C,E,!0,!1,B):I(p,m,w,C,E,L,k,O,B)},Ue=(d,p,m,w,C,E,L,k,O)=>{let T=0;const q=p.length;let B=d.length-1,U=q-1;for(;T<=B&&T<=U;){const G=d[T],Z=p[T]=O?bt(p[T]):Ze(p[T]);if(hn(G,Z))v(G,Z,m,null,C,E,L,k,O);else break;T++}for(;T<=B&&T<=U;){const G=d[B],Z=p[U]=O?bt(p[U]):Ze(p[U]);if(hn(G,Z))v(G,Z,m,null,C,E,L,k,O);else break;B--,U--}if(T>B){if(T<=U){const G=U+1,Z=G<q?p[G].el:w;for(;T<=U;)v(null,p[T]=O?bt(p[T]):Ze(p[T]),m,Z,C,E,L,k,O),T++}}else if(T>U)for(;T<=B;)Ae(d[T],C,E,!0),T++;else{const G=T,Z=T,ie=new Map;for(T=Z;T<=U;T++){const Le=p[T]=O?bt(p[T]):Ze(p[T]);Le.key!=null&&ie.set(Le.key,T)}let ne,Ce=0;const Te=U-Z+1;let qe=!1,Ge=0;const fn=new Array(Te);for(T=0;T<Te;T++)fn[T]=0;for(T=G;T<=B;T++){const Le=d[T];if(Ce>=Te){Ae(Le,C,E,!0);continue}let Ke;if(Le.key!=null)Ke=ie.get(Le.key);else for(ne=Z;ne<=U;ne++)if(fn[ne-Z]===0&&hn(Le,p[ne])){Ke=ne;break}Ke===void 0?Ae(Le,C,E,!0):(fn[Ke-Z]=T+1,Ke>=Ge?Ge=Ke:qe=!0,v(Le,p[Ke],m,null,C,E,L,k,O),Ce++)}const ui=qe?mu(fn):Yt;for(ne=ui.length-1,T=Te-1;T>=0;T--){const Le=Z+T,Ke=p[Le],fi=p[Le+1],di=Le+1<q?fi.el||fi.placeholder:w;fn[T]===0?v(null,Ke,m,di,C,E,L,k,O):qe&&(ne<0||T!==ui[ne]?We(Ke,m,di,2):ne--)}}},We=(d,p,m,w,C=null)=>{const{el:E,type:L,transition:k,children:O,shapeFlag:T}=d;if(T&6){We(d.component.subTree,p,m,w);return}if(T&128){d.suspense.move(p,m,w);return}if(T&64){L.move(d,p,m,z);return}if(L===it){s(E,p,m);for(let B=0;B<O.length;B++)We(O[B],p,m,w);s(d.anchor,p,m);return}if(L===js){P(d,p,m);return}if(w!==2&&T&1&&k)if(w===0)k.beforeEnter(E),s(E,p,m),Ne(()=>k.enter(E),C);else{const{leave:B,delayLeave:U,afterLeave:G}=k,Z=()=>{d.ctx.isUnmounted?o(E):s(E,p,m)},ie=()=>{E._isLeaving&&E[Pc](!0),B(E,()=>{Z(),G&&G()})};U?U(E,Z,ie):ie()}else s(E,p,m)},Ae=(d,p,m,w=!1,C=!1)=>{const{type:E,props:L,ref:k,children:O,dynamicChildren:T,shapeFlag:q,patchFlag:B,dirs:U,cacheIndex:G}=d;if(B===-2&&(C=!1),k!=null&&(ut(),xn(k,null,m,d,!0),ft()),G!=null&&(p.renderCache[G]=void 0),q&256){p.ctx.deactivate(d);return}const Z=q&1&&U,ie=!Sn(d);let ne;if(ie&&(ne=L&&L.onVnodeBeforeUnmount)&&Ye(ne,p,d),q&6)At(d.component,m,w);else{if(q&128){d.suspense.unmount(m,w);return}Z&&Ct(d,null,p,"beforeUnmount"),q&64?d.type.remove(d,p,m,z,w):T&&!T.hasOnce&&(E!==it||B>0&&B&64)?Be(T,p,m,!1,!0):(E===it&&B&384||!C&&q&16)&&Be(O,p,m),w&&jt(d)}(ie&&(ne=L&&L.onVnodeUnmounted)||Z)&&Ne(()=>{ne&&Ye(ne,p,d),Z&&Ct(d,null,p,"unmounted")},m)},jt=d=>{const{type:p,el:m,anchor:w,transition:C}=d;if(p===it){zt(m,w);return}if(p===js){_(d);return}const E=()=>{o(m),C&&!C.persisted&&C.afterLeave&&C.afterLeave()};if(d.shapeFlag&1&&C&&!C.persisted){const{leave:L,delayLeave:k}=C,O=()=>L(m,E);k?k(d.el,E,O):O()}else E()},zt=(d,p)=>{let m;for(;d!==p;)m=h(d),o(d),d=m;o(p)},At=(d,p,m)=>{const{bum:w,scope:C,job:E,subTree:L,um:k,m:O,a:T}=d;Si(O),Si(T),w&&Ns(w),C.stop(),E&&(E.flags|=8,Ae(L,d,p,m)),k&&Ne(k,p),Ne(()=>{d.isUnmounted=!0},p)},Be=(d,p,m,w=!1,C=!1,E=0)=>{for(let L=E;L<d.length;L++)Ae(d[L],p,m,w,C)},S=d=>{if(d.shapeFlag&6)return S(d.component.subTree);if(d.shapeFlag&128)return d.suspense.next();const p=h(d.anchor||d.el),m=p&&p[Cc];return m?h(m):p};let H=!1;const M=(d,p,m)=>{d==null?p._vnode&&Ae(p._vnode,null,null,!0):v(p._vnode||null,d,p,null,null,null,m),p._vnode=d,H||(H=!0,mi(),ul(),H=!1)},z={p:v,um:Ae,m:We,r:jt,mt:ke,mc:I,pc:j,pbc:W,n:S,o:e};return{render:M,hydrate:void 0,createApp:Xc(M)}}function Fs({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Tt({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function gu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ol(e,t,n=!1){const s=e.children,o=t.children;if(Y(s)&&Y(o))for(let i=0;i<s.length;i++){const r=s[i];let l=o[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[i]=bt(o[i]),l.el=r.el),!n&&l.patchFlag!==-2&&Ol(r,l)),l.type===Rs&&l.patchFlag!==-1&&(l.el=r.el),l.type===nn&&!l.el&&(l.el=r.el)}}function mu(e){const t=e.slice(),n=[0];let s,o,i,r,l;const a=e.length;for(s=0;s<a;s++){const c=e[s];if(c!==0){if(o=n[n.length-1],e[o]<c){t[s]=o,n.push(s);continue}for(i=0,r=n.length-1;i<r;)l=i+r>>1,e[n[l]]<c?i=l+1:r=l;c<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,r=n[i-1];i-- >0;)n[i]=r,r=t[r];return n}function kl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:kl(t)}function Si(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Il=e=>e.__isSuspense;function vu(e,t){t&&t.pendingBranch?Y(e)?t.effects.push(...e):t.effects.push(e):Rc(e)}const it=Symbol.for("v-fgt"),Rs=Symbol.for("v-txt"),nn=Symbol.for("v-cmt"),js=Symbol.for("v-stc"),An=[];let Me=null;function Ll(e=!1){An.push(Me=e?null:[])}function bu(){An.pop(),Me=An[An.length-1]||null}let In=1;function is(e,t=!1){In+=e,e<0&&Me&&t&&(Me.hasOnce=!0)}function yu(e){return e.dynamicChildren=In>0?Me||Yt:null,bu(),In>0&&Me&&Me.push(e),e}function Nl(e,t,n,s,o){return yu(de(e,t,n,s,o,!0))}function rs(e){return e?e.__v_isVNode===!0:!1}function hn(e,t){return e.type===t.type&&e.key===t.key}const Ml=({key:e})=>e!=null?e:null,Xn=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ge(e)||ye(e)||K(e)?{i:Fe,r:e,k:t,f:!!n}:e:null);function bn(e,t=null,n=null,s=0,o=null,i=e===it?0:1,r=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ml(t),ref:t&&Xn(t),scopeId:dl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Fe};return l?(Uo(a,n),i&128&&e.normalize(a)):n&&(a.shapeFlag|=ge(n)?8:16),In>0&&!r&&Me&&(a.patchFlag>0||i&6)&&a.patchFlag!==32&&Me.push(a),a}const de=_u;function _u(e,t=null,n=null,s=0,o=null,i=!1){if((!e||e===zc)&&(e=nn),rs(e)){const l=sn(e,t,!0);return n&&Uo(l,n),In>0&&!i&&Me&&(l.shapeFlag&6?Me[Me.indexOf(e)]=l:Me.push(l)),l.patchFlag=-2,l}if(Pu(e)&&(e=e.__vccOpts),t){t=$u(t);let{class:l,style:a}=t;l&&!ge(l)&&(t.class=To(l)),ue(a)&&(Do(a)&&!Y(a)&&(a=_e({},a)),t.style=Co(a))}const r=ge(e)?1:Il(e)?128:Tc(e)?64:ue(e)?4:K(e)?2:0;return bn(e,t,n,s,o,r,i,!0)}function $u(e){return e?Do(e)||Sl(e)?_e({},e):e:null}function sn(e,t,n=!1,s=!1){const{props:o,ref:i,patchFlag:r,children:l,transition:a}=e,c=t?Eu(o||{},t):o,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Ml(c),ref:t&&t.ref?n&&i?Y(i)?i.concat(Xn(t)):[i,Xn(t)]:Xn(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==it?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&sn(e.ssContent),ssFallback:e.ssFallback&&sn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&s&&Fo(u,a.clone(u)),u}function Qn(e=" ",t=0){return de(Rs,null,e,t)}function Ze(e){return e==null||typeof e=="boolean"?de(nn):Y(e)?de(it,null,e.slice()):rs(e)?bt(e):de(Rs,null,String(e))}function bt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:sn(e)}function Uo(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Y(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),Uo(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!Sl(t)?t._ctx=Fe:o===3&&Fe&&(Fe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else K(t)?(t={default:t,_ctx:Fe},n=32):(t=String(t),s&64?(n=16,t=[Qn(t)]):n=8);e.children=t,e.shapeFlag|=n}function Eu(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=To([t.class,s.class]));else if(o==="style")t.style=Co([t.style,s.style]);else if(vs(o)){const i=t[o],r=s[o];r&&i!==r&&!(Y(i)&&i.includes(r))&&(t[o]=i?[].concat(i,r):r)}else o!==""&&(t[o]=s[o])}return t}function Ye(e,t,n,s=null){tt(e,t,7,[n,s])}const wu=yl();let xu=0;function Su(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||wu,i={uid:xu++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Qa(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Al(s,o),emitsOptions:El(s,o),emit:null,emitted:null,propsDefaults:oe,inheritAttrs:s.inheritAttrs,ctx:oe,data:oe,props:oe,attrs:oe,slots:oe,refs:oe,setupState:oe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=tu.bind(null,i),e.ce&&e.ce(i),i}let Se=null;const Wo=()=>Se||Fe;let ls,oo;{const e=_s(),t=(n,s)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(s),i=>{o.length>1?o.forEach(r=>r(i)):o[0](i)}};ls=t("__VUE_INSTANCE_SETTERS__",n=>Se=n),oo=t("__VUE_SSR_SETTERS__",n=>Ln=n)}const Fn=e=>{const t=Se;return ls(e),e.scope.on(),()=>{e.scope.off(),ls(t)}},Ri=()=>{Se&&Se.scope.off(),ls(null)};function Dl(e){return e.vnode.shapeFlag&4}let Ln=!1;function Ru(e,t=!1,n=!1){t&&oo(t);const{props:s,children:o}=e.vnode,i=Dl(e);lu(e,s,i,t),fu(e,o,n||t);const r=i?Au(e,t):void 0;return t&&oo(!1),r}function Au(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Vc);const{setup:s}=n;if(s){ut();const o=e.setupContext=s.length>1?Tu(e):null,i=Fn(e),r=Hn(s,e,0,[e.props,o]),l=Fr(r);if(ft(),i(),(l||e.sp)&&!Sn(e)&&hl(e),l){if(r.then(Ri,Ri),t)return r.then(a=>{Ai(e,a)}).catch(a=>{ws(a,e,0)});e.asyncDep=r}else Ai(e,r)}else Bl(e)}function Ai(e,t,n){K(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ue(t)&&(e.setupState=rl(t)),Bl(e)}function Bl(e,t,n){const s=e.type;e.render||(e.render=s.render||et);{const o=Fn(e);ut();try{Uc(e)}finally{ft(),o()}}}const Cu={get(e,t){return be(e,"get",""),e[t]}};function Tu(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Cu),slots:e.slots,emit:e.emit,expose:t}}function As(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(rl(vc(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Rn)return Rn[n](e)},has(t,n){return n in t||n in Rn}})):e.proxy}function Pu(e){return K(e)&&"__vccOpts"in e}const He=(e,t)=>$c(e,t,Ln);function Mt(e,t,n){try{is(-1);const s=arguments.length;return s===2?ue(t)&&!Y(t)?rs(t)?de(e,null,[t]):de(e,t):de(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&rs(n)&&(n=[n]),de(e,t,n))}finally{is(1)}}const Ou="3.5.25";/**
* @vue/runtime-dom v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let io;const Ci=typeof window<"u"&&window.trustedTypes;if(Ci)try{io=Ci.createPolicy("vue",{createHTML:e=>e})}catch(e){}const Hl=io?e=>io.createHTML(e):e=>e,ku="http://www.w3.org/2000/svg",Iu="http://www.w3.org/1998/Math/MathML",ot=typeof document<"u"?document:null,Ti=ot&&ot.createElement("template"),Lu={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t==="svg"?ot.createElementNS(ku,e):t==="mathml"?ot.createElementNS(Iu,e):n?ot.createElement(e,{is:n}):ot.createElement(e);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>ot.createTextNode(e),createComment:e=>ot.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ot.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,o,i){const r=n?n.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===i||!(o=o.nextSibling)););else{Ti.innerHTML=Hl(s==="svg"?"<svg>".concat(e,"</svg>"):s==="mathml"?"<math>".concat(e,"</math>"):e);const l=Ti.content;if(s==="svg"||s==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Nu=Symbol("_vtc");function Mu(e,t,n){const s=e[Nu];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Pi=Symbol("_vod"),Du=Symbol("_vsh"),Bu=Symbol(""),Hu=/(?:^|;)\s*display\s*:/;function Fu(e,t,n){const s=e.style,o=ge(n);let i=!1;if(n&&!o){if(t)if(ge(t))for(const r of t.split(";")){const l=r.slice(0,r.indexOf(":")).trim();n[l]==null&&Zn(s,l,"")}else for(const r in t)n[r]==null&&Zn(s,r,"");for(const r in n)r==="display"&&(i=!0),Zn(s,r,n[r])}else if(o){if(t!==n){const r=s[Bu];r&&(n+=";"+r),s.cssText=n,i=Hu.test(n)}}else t&&e.removeAttribute("style");Pi in e&&(e[Pi]=i?s.display:"",e[Du]&&(s.display="none"))}const Oi=/\s*!important$/;function Zn(e,t,n){if(Y(n))n.forEach(s=>Zn(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=ju(e,t);Oi.test(n)?e.setProperty(Ft(s),n.replace(Oi,""),"important"):e[s]=n}}const ki=["Webkit","Moz","ms"],zs={};function ju(e,t){const n=zs[t];if(n)return n;let s=wt(t);if(s!=="filter"&&s in e)return zs[t]=s;s=jr(s);for(let o=0;o<ki.length;o++){const i=ki[o]+s;if(i in e)return zs[t]=i}return t}const Ii="http://www.w3.org/1999/xlink";function Li(e,t,n,s,o,i=Xa(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ii,t.slice(6,t.length)):e.setAttributeNS(Ii,t,n):n==null||i&&!Vr(n)?e.removeAttribute(t):e.setAttribute(t,i?"":ln(n)?String(n):n)}function Ni(e,t,n,s,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Hl(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,a=n==null?e.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in e))&&(e.value=a),n==null&&e.removeAttribute(t),e._value=n;return}let r=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Vr(n):n==null&&l==="string"?(n="",r=!0):l==="number"&&(n=0,r=!0)}try{e[t]=n}catch(l){}r&&e.removeAttribute(o||t)}function zu(e,t,n,s){e.addEventListener(t,n,s)}function Vu(e,t,n,s){e.removeEventListener(t,n,s)}const Mi=Symbol("_vei");function Uu(e,t,n,s,o=null){const i=e[Mi]||(e[Mi]={}),r=i[t];if(s&&r)r.value=s;else{const[l,a]=Wu(t);if(s){const c=i[t]=Ku(s,o);zu(e,l,c,a)}else r&&(Vu(e,l,r,a),i[t]=void 0)}}const Di=/(?:Once|Passive|Capture)$/;function Wu(e){let t;if(Di.test(e)){t={};let s;for(;s=e.match(Di);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ft(e.slice(2)),t]}let Vs=0;const qu=Promise.resolve(),Gu=()=>Vs||(qu.then(()=>Vs=0),Vs=Date.now());function Ku(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;tt(Yu(s,n.value),t,5,[s])};return n.value=e,n.attached=Gu(),n}function Yu(e,t){if(Y(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const Bi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Xu=(e,t,n,s,o,i)=>{const r=o==="svg";t==="class"?Mu(e,s,r):t==="style"?Fu(e,n,s):vs(t)?So(t)||Uu(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Qu(e,t,s,r))?(Ni(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Li(e,t,s,r,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ge(s))?Ni(e,wt(t),s,i,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Li(e,t,s,r))};function Qu(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Bi(t)&&K(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Bi(t)&&ge(n)?!1:t in e}const Zu=_e({patchProp:Xu},Lu);let Hi;function Ju(){return Hi||(Hi=hu(Zu))}const ef=(...e)=>{const t=Ju().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=nf(s);if(!o)return;const i=t._component;!K(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const r=n(o,!1,tf(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),r},t};function tf(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function nf(e){return ge(e)?document.querySelector(e):e}const sf="modulepreload",of=function(e){return"/"+e},Fi={},rt=function(t,n,s){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),l=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.allSettled(n.map(a=>{if(a=of(a),a in Fi)return;Fi[a]=!0;const c=a.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(a,'"]').concat(u)))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":sf,c||(f.as="script"),f.crossOrigin="",f.href=a,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((h,g)=>{f.addEventListener("load",h),f.addEventListener("error",()=>g(new Error("Unable to preload CSS for ".concat(a))))})}))}function i(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return o.then(r=>{for(const l of r||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};var fe={allRenderFn:!1,element:!0,event:!0,hasRenderFn:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,propChangeCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!0,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},rf="app",lf=Object.defineProperty,af=(e,t)=>{for(var n in t)lf(e,n,{get:t[n],enumerable:!0})},cf={isBrowser:!0},uf="http://www.w3.org/2000/svg",ff="http://www.w3.org/1999/xhtml",df=(e,t)=>{var n;const s=t.$cmpMeta$;Object.entries((n=s.$members$)!=null?n:{}).map(([i,[r]])=>{if(r&31||r&32){const l=e[i],a=hf(Object.getPrototypeOf(e),i)||Object.getOwnPropertyDescriptor(e,i);a&&Object.defineProperty(e,i,{get(){return a.get.call(this)},set(c){a.set.call(this,c)},configurable:!0,enumerable:!0}),e[i]=t.$instanceValues$.has(i)?t.$instanceValues$.get(i):l}})};function hf(e,t){for(;e;){const n=Object.getOwnPropertyDescriptor(e,t);if(n!=null&&n.get)return n;e=Object.getPrototypeOf(e)}}var ht=e=>{if(e.__stencil__getHostRef)return e.__stencil__getHostRef()},pf=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map,$serializerValues$:new Map};n.$onReadyPromise$=new Promise(o=>n.$onReadyResolve$=o),e["s-p"]=[],e["s-rc"]=[];const s=n;return e.__stencil__getHostRef=()=>s,fe.modernPropertyDecls&&fe.state&&df(e,n),s},ji=(e,t)=>t in e,jn=(e,t)=>(0,console.error)(e,t),as=new Map,Fl=[],gf="slot-fb{display:contents}slot-fb[hidden]{display:none}",zi="http://www.w3.org/1999/xlink",he=typeof window<"u"?window:{},an=he.HTMLElement||class{},$e={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,s)=>e.addEventListener(t,n,s),rel:(e,t,n,s)=>e.removeEventListener(t,n,s),ce:(e,t)=>new CustomEvent(e,t)},mf=e=>Promise.resolve(e),qo=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(e){}return!1})(),ro=qo?!!he.document&&Object.getOwnPropertyDescriptor(he.document.adoptedStyleSheets,"length").writable:!1,lo=!1,ao=[],jl=[],zl=(e,t)=>n=>{e.push(n),lo||(lo=!0,t&&$e.$flags$&4?Go(co):$e.raf(co))},Vi=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){jn(n)}e.length=0},co=()=>{Vi(ao),Vi(jl),(lo=ao.length>0)&&$e.raf(co)},Go=e=>mf().then(e),cs=zl(ao,!1),Dt=zl(jl,!0),vf=e=>e!=null&&e!==void 0,Ko=e=>(e=typeof e,e==="object"||e==="function");function bf(e){var t,n,s;return(s=(n=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?s:void 0}var yf=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),_f={};af(_f,{err:()=>Vl,map:()=>$f,ok:()=>uo,unwrap:()=>Ef,unwrapErr:()=>wf});var uo=e=>({isOk:!0,isErr:!1,value:e}),Vl=e=>({isOk:!1,isErr:!0,value:e});function $f(e,t){if(e.isOk){const n=t(e.value);return n instanceof Promise?n.then(s=>uo(s)):uo(n)}if(e.isErr){const n=e.value;return Vl(n)}throw"should never get here"}var Ef=e=>{if(e.isOk)return e.value;throw e.value},wf=e=>{if(e.isErr)return e.value;throw e.value};var pn;function xf(e){var t;const n=this.attachShadow({mode:"open",delegatesFocus:!!(e.$flags$&16)});pn===void 0&&(pn=(t=void 0)!=null?t:null),pn&&(ro?n.adoptedStyleSheets.push(pn):n.adoptedStyleSheets=[...n.adoptedStyleSheets,pn])}var Ul=e=>{const t=Wi(e,"childNodes");e.tagName&&e.tagName.includes("-")&&e["s-cr"]&&e.tagName!=="SLOT-FB"&&Wl(t,e.tagName).forEach(s=>{s.nodeType===1&&s.tagName==="SLOT-FB"&&(Rf(s,Yo(s),!1).length?s.hidden=!0:s.hidden=!1)});let n=0;for(n=0;n<t.length;n++){const s=t[n];s.nodeType===1&&Wi(s,"childNodes").length&&Ul(s)}},Sf=e=>{const t=[];for(let n=0;n<e.length;n++){const s=e[n]["s-nr"]||void 0;s&&s.isConnected&&t.push(s)}return t};function Wl(e,t,n){let s=0,o=[],i;for(;s<e.length;s++)i=e[s],i["s-sr"]&&(!t||i["s-hn"]===t)&&n===void 0&&o.push(i),o=[...o,...Wl(i.childNodes,t,n)];return o}var Rf=(e,t,n=!0)=>{const s=[];(n&&e["s-sr"]||!e["s-sr"])&&s.push(e);let o=e;for(;o=o.nextSibling;)Yo(o)===t&&(n||!o["s-sr"])&&s.push(o);return s},Ui=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",Yo=e=>typeof e["s-sn"]=="string"?e["s-sn"]:e.nodeType===1&&e.getAttribute("slot")||void 0;function Af(e){if(e.assignedElements||e.assignedNodes||!e["s-sr"])return;const t=n=>(function(s){const o=[],i=this["s-sn"];s!=null&&s.flatten&&console.error("\n          Flattening is not supported for Stencil non-shadow slots.\n          You can use `.childNodes` to nested slot fallback content.\n          If you have a particular use case, please open an issue on the Stencil repo.\n        ");const r=this["s-cr"].parentElement;return(r.__childNodes?r.childNodes:Sf(r.childNodes)).forEach(a=>{i===Yo(a)&&o.push(a)}),n?o.filter(a=>a.nodeType===1):o}).bind(e);e.assignedElements=t(!0),e.assignedNodes=t(!1)}function Wi(e,t){if("__"+t in e){const n=e["__"+t];return typeof n!="function"?n:n.bind(e)}else return typeof e[t]!="function"?e[t]:e[t].bind(e)}var Bt=(e,t="")=>()=>{},Kt=new WeakMap,Cf=(e,t,n)=>{let s=as.get(e);qo&&n?(s=s||new CSSStyleSheet,typeof s=="string"?s=t:s.replaceSync(t)):s=t,as.set(e,s)},Tf=(e,t,n)=>{var s;const o=ql(t,n),i=as.get(o);if(!he.document)return o;if(e=e.nodeType===11?e:he.document,i)if(typeof i=="string"){e=e.head||e;let r=Kt.get(e),l;if(r||Kt.set(e,r=new Set),!r.has(o)){{l=he.document.createElement("style"),l.innerHTML=i;const a=(s=$e.$nonce$)!=null?s:bf(he.document);if(a!=null&&l.setAttribute("nonce",a),!(t.$flags$&1))if(e.nodeName==="HEAD"){const c=e.querySelectorAll("link[rel=preconnect]"),u=c.length>0?c[c.length-1].nextSibling:e.querySelector("style");e.insertBefore(l,(u==null?void 0:u.parentNode)===e?u:null)}else if("host"in e)if(qo){const c=new CSSStyleSheet;c.replaceSync(i),ro?e.adoptedStyleSheets.unshift(c):e.adoptedStyleSheets=[c,...e.adoptedStyleSheets]}else{const c=e.querySelector("style");c?c.innerHTML=i+c.innerHTML:e.prepend(l)}else e.append(l);t.$flags$&1&&e.insertBefore(l,null)}t.$flags$&4&&(l.innerHTML+=gf),r&&r.add(o)}}else e.adoptedStyleSheets.includes(i)||(ro?e.adoptedStyleSheets.push(i):e.adoptedStyleSheets=[...e.adoptedStyleSheets,i]);return o},Pf=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,s=t.$flags$,o=Bt("attachStyles",t.$tagName$),i=Tf(n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$);s&10&&(n["s-sc"]=i,n.classList.add(i+"-h")),o()},ql=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),se=(e,t,...n)=>{let s=null,o=null,i=null,r=!1,l=!1;const a=[],c=f=>{for(let h=0;h<f.length;h++)s=f[h],Array.isArray(s)?c(s):s!=null&&typeof s!="boolean"&&((r=typeof e!="function"&&!Ko(s))&&(s=String(s)),r&&l?a[a.length-1].$text$+=s:a.push(r?us(null,s):s),l=r)};if(c(n),t){t.key&&(o=t.key),t.name&&(i=t.name);{const f=t.className||t.class;f&&(t.class=typeof f!="object"?f:Object.keys(f).filter(h=>f[h]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,a,kf);const u=us(e,null);return u.$attrs$=t,a.length>0&&(u.$children$=a),u.$key$=o,u.$name$=i,u},us=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n.$name$=null,n},cn={},Of=e=>e&&e.$tag$===cn,kf={forEach:(e,t)=>e.map(qi).forEach(t),map:(e,t)=>e.map(qi).map(t).map(If)},qi=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),If=e=>{if(typeof e.vtag=="function"){const n={...e.vattrs};return e.vkey&&(n.key=e.vkey),e.vname&&(n.name=e.vname),se(e.vtag,n,...e.vchildren||[])}const t=us(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Xo=e=>{const t=yf(e);return new RegExp("(^|[^@]|@(?!supports\\s+selector\\s*\\([^{]*?".concat(t,"))(").concat(t,"\\b)"),"g")};Xo("::slotted");Xo(":host");Xo(":host-context");var Lf=e=>Fl.map(t=>t(e)).find(t=>!!t),Nf=e=>Fl.push(e),Mf=e=>{var t;return(t=ht(e))==null?void 0:t.$modeName$},Gl=(e,t,n)=>e!=null&&!Ko(e)?t&4?e==="false"?!1:e===""||!!e:t&2?typeof e=="string"?parseFloat(e):typeof e=="number"?e:NaN:t&1?String(e):e:e,Df=e=>e,Lt=(e,t,n)=>{const s=Df(e);return{emit:o=>Kl(s,t,{bubbles:!!(n&4),composed:!!(n&2),cancelable:!!(n&1),detail:o})}},Kl=(e,t,n)=>{const s=$e.ce(t,n);return e.dispatchEvent(s),s},Gi=(e,t,n,s,o,i,r)=>{if(n===s)return;let l=ji(e,t),a=t.toLowerCase();if(t==="class"){const c=e.classList,u=Ki(n);let f=Ki(s);c.remove(...u.filter(h=>h&&!f.includes(h))),c.add(...f.filter(h=>h&&!u.includes(h)))}else if(t==="style"){for(const c in n)(!s||s[c]==null)&&(c.includes("-")?e.style.removeProperty(c):e.style[c]="");for(const c in s)(!n||s[c]!==n[c])&&(c.includes("-")?e.style.setProperty(c,s[c]):e.style[c]=s[c])}else if(t!=="key")if(t==="ref")s&&s(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):ji(he,a)?t=a.slice(2):t=a[2]+t.slice(3),n||s){const c=t.endsWith(Yl);t=t.replace(Hf,""),n&&$e.rel(e,t,n,c),s&&$e.ael(e,t,s,c)}}else{const c=Ko(s);if((l||c&&s!==null)&&!o)try{if(e.tagName.includes("-"))e[t]!==s&&(e[t]=s);else{const f=s==null?"":s;t==="list"?l=!1:(n==null||e[t]!=f)&&(typeof e.__lookupSetter__(t)=="function"?e[t]=f:e.setAttribute(t,f))}}catch(f){}let u=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,u=!0),s==null||s===!1?(s!==!1||e.getAttribute(t)==="")&&(u?e.removeAttributeNS(zi,t):e.removeAttribute(t)):(!l||i&4||o)&&!c&&e.nodeType===1&&(s=s===!0?"":s,u?e.setAttributeNS(zi,t,s):e.setAttribute(t,s))}},Bf=/\s/,Ki=e=>(typeof e=="object"&&e&&"baseVal"in e&&(e=e.baseVal),!e||typeof e!="string"?[]:e.split(Bf)),Yl="Capture",Hf=new RegExp(Yl+"$"),fo=(e,t,n,s)=>{const o=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||{},r=t.$attrs$||{};for(const l of Yi(Object.keys(i)))l in r||Gi(o,l,i[l],void 0,n,t.$flags$);for(const l of Yi(Object.keys(r)))Gi(o,l,i[l],r[l],n,t.$flags$)};function Yi(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var Jn,fs,Nn,ho=!1,ds=!1,Qo=!1,Oe=!1,hs=(e,t,n)=>{var s;const o=t.$children$[n];let i=0,r,l,a;if(ho||(Qo=!0,o.$tag$==="slot"&&(o.$flags$|=o.$children$?2:1)),o.$text$!==null)r=o.$elm$=he.document.createTextNode(o.$text$);else if(o.$flags$&1)r=o.$elm$=he.document.createTextNode(""),fo(null,o,Oe);else{if(Oe||(Oe=o.$tag$==="svg"),!he.document)throw new Error("You are trying to render a Stencil component in an environment that doesn't support the DOM. Make sure to populate the [`window`](https://developer.mozilla.org/en-US/docs/Web/API/Window/window) object before rendering a component.");if(r=o.$elm$=he.document.createElementNS(Oe?uf:ff,!ho&&fe.slotRelocation&&o.$flags$&2?"slot-fb":o.$tag$),Oe&&o.$tag$==="foreignObject"&&(Oe=!1),fo(null,o,Oe),vf(Jn)&&r["s-si"]!==Jn&&r.classList.add(r["s-si"]=Jn),o.$children$)for(i=0;i<o.$children$.length;++i)l=hs(e,o,i),l&&r.appendChild(l);o.$tag$==="svg"?Oe=!1:r.tagName==="foreignObject"&&(Oe=!0)}return r["s-hn"]=Nn,o.$flags$&3&&(r["s-sr"]=!0,r["s-cr"]=fs,r["s-sn"]=o.$name$||"",r["s-rf"]=(s=o.$attrs$)==null?void 0:s.ref,Af(r),a=e&&e.$children$&&e.$children$[n],a&&a.$tag$===o.$tag$&&e.$elm$&&Mn(e.$elm$,!1),ea(fs,r,t.$elm$,e==null?void 0:e.$elm$)),r},Mn=(e,t)=>{$e.$flags$|=1;const n=Array.from(e.__childNodes||e.childNodes);e["s-sr"]&&fe.experimentalSlotFixes;for(let s=n.length-1;s>=0;s--){const o=n[s];o["s-hn"]!==Nn&&o["s-ol"]&&(Et(Dn(o).parentNode,o,Dn(o)),o["s-ol"].remove(),o["s-ol"]=void 0,o["s-sh"]=void 0,Qo=!0),t&&Mn(o,t)}$e.$flags$&=-2},Xl=(e,t,n,s,o,i)=>{let r=e["s-cr"]&&e["s-cr"].parentNode||e,l;for(r.shadowRoot&&r.tagName===Nn&&(r=r.shadowRoot);o<=i;++o)s[o]&&(l=hs(null,n,o),l&&(s[o].$elm$=l,Et(r,l,Dn(t))))},Ql=(e,t,n)=>{for(let s=t;s<=n;++s){const o=e[s];if(o){const i=o.$elm$;Jl(o),i&&(ds=!0,i["s-ol"]?i["s-ol"].remove():Mn(i,!0),i.remove())}}},Ff=(e,t,n,s,o=!1)=>{let i=0,r=0,l=0,a=0,c=t.length-1,u=t[0],f=t[c],h=s.length-1,g=s[0],y=s[h],v,R;for(;i<=c&&r<=h;)if(u==null)u=t[++i];else if(f==null)f=t[--c];else if(g==null)g=s[++r];else if(y==null)y=s[--h];else if(Wn(u,g,o))Wt(u,g,o),u=t[++i],g=s[++r];else if(Wn(f,y,o))Wt(f,y,o),f=t[--c],y=s[--h];else if(Wn(u,y,o))(u.$tag$==="slot"||y.$tag$==="slot")&&Mn(u.$elm$.parentNode,!1),Wt(u,y,o),Et(e,u.$elm$,f.$elm$.nextSibling),u=t[++i],y=s[--h];else if(Wn(f,g,o))(u.$tag$==="slot"||y.$tag$==="slot")&&Mn(f.$elm$.parentNode,!1),Wt(f,g,o),Et(e,f.$elm$,u.$elm$),f=t[--c],g=s[++r];else{for(l=-1,a=i;a<=c;++a)if(t[a]&&t[a].$key$!==null&&t[a].$key$===g.$key$){l=a;break}l>=0?(R=t[l],R.$tag$!==g.$tag$?v=hs(t&&t[r],n,l):(Wt(R,g,o),t[l]=void 0,v=R.$elm$),g=s[++r]):(v=hs(t&&t[r],n,r),g=s[++r]),v&&Et(Dn(u.$elm$).parentNode,v,Dn(u.$elm$))}i>c?Xl(e,s[h+1]==null?null:s[h+1].$elm$,n,s,r,h):r>h&&Ql(t,i,c)},Wn=(e,t,n=!1)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:n?(n&&!e.$key$&&t.$key$&&(e.$key$=t.$key$),!0):e.$key$===t.$key$:!1,Dn=e=>e&&e["s-ol"]||e,Wt=(e,t,n=!1)=>{const s=t.$elm$=e.$elm$,o=e.$children$,i=t.$children$,r=t.$tag$,l=t.$text$;let a;l===null?(Oe=r==="svg"?!0:r==="foreignObject"?!1:Oe,fo(e,t,Oe),o!==null&&i!==null?Ff(s,o,t,i,n):i!==null?(e.$text$!==null&&(s.textContent=""),Xl(s,null,t,i,0,i.length-1)):!n&&fe.updatable&&o!==null&&Ql(o,0,o.length-1),Oe&&r==="svg"&&(Oe=!1)):(a=s["s-cr"])?a.parentNode.textContent=l:e.$text$!==l&&(s.data=l)},lt=[],Zl=e=>{let t,n,s;const o=e.__childNodes||e.childNodes;for(const i of o){if(i["s-sr"]&&(t=i["s-cr"])&&t.parentNode){n=t.parentNode.__childNodes||t.parentNode.childNodes;const r=i["s-sn"];for(s=n.length-1;s>=0;s--)if(t=n[s],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==i["s-hn"])if(Ui(t,r)){let l=lt.find(a=>a.$nodeToRelocate$===t);ds=!0,t["s-sn"]=t["s-sn"]||r,l?(l.$nodeToRelocate$["s-sh"]=i["s-hn"],l.$slotRefNode$=i):(t["s-sh"]=i["s-hn"],lt.push({$slotRefNode$:i,$nodeToRelocate$:t})),t["s-sr"]&&lt.map(a=>{Ui(a.$nodeToRelocate$,t["s-sn"])&&(l=lt.find(c=>c.$nodeToRelocate$===t),l&&!a.$slotRefNode$&&(a.$slotRefNode$=l.$slotRefNode$))})}else lt.some(l=>l.$nodeToRelocate$===t)||lt.push({$nodeToRelocate$:t})}i.nodeType===1&&Zl(i)}},Jl=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Jl)},Et=(e,t,n)=>(typeof t["s-sn"]=="string"&&t["s-sr"]&&t["s-cr"]&&ea(t["s-cr"],t,e,t.parentElement),e==null?void 0:e.insertBefore(t,n));function ea(e,t,n,s){var o,i;let r;if(e&&typeof t["s-sn"]=="string"&&t["s-sr"]&&e.parentNode&&e.parentNode["s-sc"]&&(r=t["s-si"]||e.parentNode["s-sc"])){const l=t["s-sn"],a=t["s-hn"];if((o=n.classList)==null||o.add(r+"-s"),s&&((i=s.classList)!=null&&i.contains(r+"-s"))){let c=(s.__childNodes||s.childNodes)[0],u=!1;for(;c;){if(c["s-sn"]!==l&&c["s-hn"]===a&&c["s-sr"]){u=!0;break}c=c.nextSibling}u||s.classList.remove(r+"-s")}}}var jf=(e,t,n=!1)=>{var s,o,i,r,l;const a=e.$hostElement$,c=e.$cmpMeta$,u=e.$vnode$||us(null,null),h=Of(t)?t:se(null,null,t);if(Nn=a.tagName,c.$attrsToReflect$&&(h.$attrs$=h.$attrs$||{},c.$attrsToReflect$.forEach(([g,y])=>{fe.serializer&&e.$serializerValues$.has(g)?h.$attrs$[y]=e.$serializerValues$.get(g):h.$attrs$[y]=a[g]})),n&&h.$attrs$)for(const g of Object.keys(h.$attrs$))a.hasAttribute(g)&&!["key","ref","style","class"].includes(g)&&(h.$attrs$[g]=a[g]);h.$tag$=null,h.$flags$|=4,e.$vnode$=h,h.$elm$=u.$elm$=a.shadowRoot||a,Jn=a["s-sc"],ho=!!(c.$flags$&1)&&!(c.$flags$&128),fs=a["s-cr"],ds=!1,Wt(u,h,n);{if($e.$flags$|=1,Qo){Zl(h.$elm$);for(const g of lt){const y=g.$nodeToRelocate$;if(!y["s-ol"]&&he.document){const v=he.document.createTextNode("");v["s-nr"]=y,Et(y.parentNode,y["s-ol"]=v,y)}}for(const g of lt){const y=g.$nodeToRelocate$,v=g.$slotRefNode$;if(v){const R=v.parentNode;let b=v.nextSibling;{let _=(s=y["s-ol"])==null?void 0:s.previousSibling;for(;_;){let A=(o=_["s-nr"])!=null?o:null;if(A&&A["s-sn"]===y["s-sn"]&&R===(A.__parentNode||A.parentNode)){for(A=A.nextSibling;A===y||A!=null&&A["s-sr"];)A=A==null?void 0:A.nextSibling;if(!A||!A["s-nr"]){b=A;break}}_=_.previousSibling}}const $=y.__parentNode||y.parentNode,P=y.__nextSibling||y.nextSibling;(!b&&R!==$||P!==b)&&y!==b&&(!y["s-hn"]&&y["s-ol"]&&(y["s-hn"]=y["s-ol"].parentNode.nodeName),Et(R,y,b),y.nodeType===1&&y.tagName!=="SLOT-FB"&&(y.hidden=(i=y["s-ih"])!=null?i:!1)),y&&typeof v["s-rf"]=="function"&&v["s-rf"](v)}else y.nodeType===1&&(n&&(y["s-ih"]=(r=y.hidden)!=null?r:!1),y.hidden=!0)}}ds&&Ul(h.$elm$),$e.$flags$&=-2,lt.length=0}if(fe.experimentalScopedSlotChanges&&c.$flags$&2){const g=h.$elm$.__childNodes||h.$elm$.childNodes;for(const y of g)y["s-hn"]!==Nn&&!y["s-sh"]&&(n&&y["s-ih"]==null&&(y["s-ih"]=(l=y.hidden)!=null?l:!1),y.hidden=!0)}fs=void 0},ta=(e,t)=>{if(t&&!e.$onRenderResolve$&&t["s-p"]){const n=t["s-p"].push(new Promise(s=>e.$onRenderResolve$=()=>{t["s-p"].splice(n-1,1),s()}))}},Cs=(e,t)=>{if(e.$flags$|=16,e.$flags$&4){e.$flags$|=512;return}ta(e,e.$ancestorComponent$);const n=()=>zf(e,t);if(t){queueMicrotask(()=>{n()});return}return Dt(n)},zf=(e,t)=>{const n=e.$hostElement$,s=Bt("scheduleUpdate",e.$cmpMeta$.$tagName$),o=n;if(!o)throw new Error("Can't render component <".concat(n.tagName.toLowerCase()," /> with invalid Stencil runtime! Make sure this imported component is compiled with a `externalRuntime: true` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime"));let i;return t?i=tn(o,"componentWillLoad",void 0,n):i=tn(o,"componentWillUpdate",void 0,n),i=Xi(i,()=>tn(o,"componentWillRender",void 0,n)),s(),Xi(i,()=>Uf(e,o,t))},Xi=(e,t)=>Vf(e)?e.then(t).catch(n=>{console.error(n),t()}):t(),Vf=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",Uf=async(e,t,n)=>{var s;const o=e.$hostElement$,i=Bt("update",e.$cmpMeta$.$tagName$),r=o["s-rc"];n&&Pf(e);const l=Bt("render",e.$cmpMeta$.$tagName$);Wf(e,t,o,n),r&&(r.map(a=>a()),o["s-rc"]=void 0),l(),i();{const a=(s=o["s-p"])!=null?s:[],c=()=>qf(e);a.length===0?c():(Promise.all(a).then(c),e.$flags$|=4,a.length=0)}},Qi=null,Wf=(e,t,n,s)=>{try{Qi=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(fe.hasRenderFn||fe.reflect)&&(fe.vdomRender||fe.reflect)&&(fe.hydrateServerSide||jf(e,t,s))}catch(a){jn(a,e.$hostElement$)}return Qi=null,null},qf=e=>{const t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,s=Bt("postUpdate",t),o=n,i=e.$ancestorComponent$;tn(o,"componentDidRender",void 0,n),e.$flags$&64?(tn(o,"componentDidUpdate",void 0,n),s()):(e.$flags$|=64,Kf(n),tn(o,"componentDidLoad",void 0,n),s(),e.$onReadyResolve$(n),i||Gf()),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),e.$flags$&512&&Go(()=>Cs(e,!1)),e.$flags$&=-517},po=e=>{var t;{const n=ht(e),s=(t=n==null?void 0:n.$hostElement$)==null?void 0:t.isConnected;return s&&(n.$flags$&18)===2&&Cs(n,!1),s}},Gf=e=>{Go(()=>Kl(he,"appload",{detail:{namespace:rf}}))},tn=(e,t,n,s)=>{if(e&&e[t])try{return e[t](n)}catch(o){jn(o,s)}},Kf=e=>{var t;return e.classList.add((t=fe.hydratedSelectorName)!=null?t:"hydrated")},Yf=(e,t)=>ht(e).$instanceValues$.get(t),Zi=(e,t,n,s)=>{const o=ht(e);if(!o||fe.serializer&&o.$serializerValues$.has(t)&&o.$serializerValues$.get(t)===n)return;const i=e,r=o.$instanceValues$.get(t),l=o.$flags$,a=i;n=Gl(n,s.$members$[t][0]);const c=Number.isNaN(r)&&Number.isNaN(n);if(n!==r&&!c){if(o.$instanceValues$.set(t,n),fe.serializer&&fe.reflect&&s.$attrsToReflect$&&a&&s.$serializers$&&s.$serializers$[t]){let f=n;for(const h of s.$serializers$[t])f=a[h](f,t);o.$serializerValues$.set(t,f)}{if(s.$watchers$&&l&128){const f=s.$watchers$[t];f&&f.map(h=>{try{a[h](n,r,t)}catch(g){jn(g,i)}})}if((l&18)===2){if(a.componentShouldUpdate&&a.componentShouldUpdate(n,r,t)===!1)return;Cs(o,!1)}}}},Xf=(e,t,n)=>{var s,o;const i=e.prototype;if(t.$members$||fe.propChangeCallback){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers),e.deserializers&&!t.$deserializers$&&(t.$deserializers$=e.deserializers),e.serializers&&!t.$serializers$&&(t.$serializers$=e.serializers);const r=Object.entries((s=t.$members$)!=null?s:{});r.map(([l,[a]])=>{if(a&31||a&32){const{get:c,set:u}=Object.getOwnPropertyDescriptor(i,l)||{};c&&(t.$members$[l][0]|=2048),u&&(t.$members$[l][0]|=4096),Object.defineProperty(i,l,{get(){return c?c.apply(this):Yf(this,l)},configurable:!0,enumerable:!0}),Object.defineProperty(i,l,{set(f){const h=ht(this);if(h){if(u){typeof(a&32?this[l]:h.$hostElement$[l])>"u"&&h.$instanceValues$.get(l)&&(f=h.$instanceValues$.get(l)),u.apply(this,[Gl(f,a)]),f=a&32?this[l]:h.$hostElement$[l],Zi(this,l,f,t);return}{Zi(this,l,f,t);return}}}})}});{const l=new Map;i.attributeChangedCallback=function(a,c,u){$e.jmp(()=>{var f;const h=l.get(a),g=ht(this);if(fe.serializer&&g.$serializerValues$.has(h)&&g.$serializerValues$.get(h)===u)return;if(this.hasOwnProperty(h)&&fe.lazyLoad,fe.deserializer&&t.$deserializers$&&t.$deserializers$[h]){const v=(R,b)=>{const $=b==null?void 0:b[R](u,h);$!==this[h]&&(this[h]=$)};for(const R of t.$deserializers$[h])v(R,this);return}else{if(i.hasOwnProperty(h)&&typeof this[h]=="number"&&this[h]==u)return;if(h==null){const v=g==null?void 0:g.$flags$;if(g&&v&&!(v&8)&&v&128&&u!==c){const b=this,$=(f=t.$watchers$)==null?void 0:f[a];$==null||$.forEach(P=>{b[P]!=null&&b[P].call(b,u,c,a)})}return}}const y=Object.getOwnPropertyDescriptor(i,h);u=u===null&&typeof this[h]=="boolean"?!1:u,u!=this[h]&&(!y.get||y.set)&&(this[h]=u)})},e.observedAttributes=Array.from(new Set([...Object.keys((o=t.$watchers$)!=null?o:{}),...r.filter(([a,c])=>c[0]&31).map(([a,c])=>{var u;const f=c[1]||a;return l.set(f,a),c[0]&512&&((u=t.$attrsToReflect$)==null||u.push([a,f])),f})]))}}return e},Qf=async(e,t,n,s)=>{let o;if(!(t.$flags$&32)){t.$flags$|=32,n.$lazyBundleId$;{o=e.constructor;const l=e.localName;customElements.whenDefined(l).then(()=>t.$flags$|=128)}if(o&&o.style){let l;typeof o.style=="string"?l=o.style:typeof o.style!="string"&&(t.$modeName$=Lf(e),t.$modeName$&&(l=o.style[t.$modeName$]));const a=ql(n,t.$modeName$);if(!as.has(a)){const c=Bt("registerStyles",n.$tagName$);Cf(a,l,!!(n.$flags$&1)),c()}}}const i=t.$ancestorComponent$,r=()=>Cs(t,!0);i&&i["s-rc"]?i["s-rc"].push(r):r()},Ji=(e,t)=>{},Zf=e=>{if(!($e.$flags$&1)){const t=ht(e);if(!t)return;const n=t.$cmpMeta$,s=Bt("connectedCallback",n.$tagName$);if(t.$flags$&1)na(e,t,n.$listeners$),t!=null&&t.$lazyInstance$?Ji(t.$lazyInstance$):t!=null&&t.$onReadyPromise$&&t.$onReadyPromise$.then(()=>Ji(t.$lazyInstance$));else{t.$flags$|=1,n.$flags$&12&&Jf(e);{let o=e;for(;o=o.parentNode||o.host;)if(o["s-p"]){ta(t,t.$ancestorComponent$=o);break}}n.$members$&&Object.entries(n.$members$).map(([o,[i]])=>{if(i&31&&o in e&&e[o]!==Object.prototype[o]){const r=e[o];delete e[o],e[o]=r}}),Qf(e,t,n)}s()}},Jf=e=>{if(!he.document)return;const t=e["s-cr"]=he.document.createComment("");t["s-cn"]=!0,Et(e,t,e.firstChild)},ed=async e=>{if(!($e.$flags$&1)){const t=ht(e);t!=null&&t.$rmListeners$&&(t.$rmListeners$.map(n=>n()),t.$rmListeners$=void 0)}Kt.has(e)&&Kt.delete(e),e.shadowRoot&&Kt.has(e.shadowRoot)&&Kt.delete(e.shadowRoot)},un=(e,t)=>{const n={$flags$:t[0],$tagName$:t[1]};n.$members$=t[2],n.$listeners$=t[3],n.$watchers$=e.$watchers$,n.$deserializers$=e.$deserializers$,n.$serializers$=e.$serializers$,n.$attrsToReflect$=[],!(n.$flags$&1)&&n.$flags$&256;const s=e.prototype.connectedCallback,o=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__hasHostListenerAttached:!1,__registerHost(){pf(this,n)},connectedCallback(){if(!this.__hasHostListenerAttached){const i=ht(this);if(!i)return;na(this,i,n.$listeners$),this.__hasHostListenerAttached=!0}Zf(this),s&&s.call(this)},disconnectedCallback(){ed(this),o&&o.call(this)},__attachShadow(){if(!this.shadowRoot)xf.call(this,n);else if(this.shadowRoot.mode!=="open")throw new Error("Unable to re-use existing shadow root for ".concat(n.$tagName$,"! Mode is set to ").concat(this.shadowRoot.mode," but Stencil only supports open shadow roots."))}}),e.is=n.$tagName$,Xf(e,n)},na=(e,t,n,s)=>{n&&he.document&&n.map(([o,i,r])=>{const l=nd(he.document,e,o),a=td(t,r),c=sd(o);$e.ael(l,i,a,c),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>$e.rel(l,i,a,c))})},td=(e,t)=>n=>{var s;try{fe.lazyLoad||e.$hostElement$[t](n)}catch(o){jn(o,e.$hostElement$)}},nd=(e,t,n)=>n&4?e:n&8?he:n&16?e.body:t,sd=e=>(e&2)!==0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class od{constructor(){this.m=new Map}reset(t){this.m=new Map(Object.entries(t))}get(t,n){const s=this.m.get(t);return s!==void 0?s:n}getBoolean(t,n=!1){const s=this.m.get(t);return s===void 0?n:typeof s=="string"?s==="true":!!s}getNumber(t,n){const s=parseFloat(this.m.get(t));return isNaN(s)?n!==void 0?n:NaN:s}set(t,n){this.m.set(t,n)}}const ae=new od,id=e=>{try{const t=e.sessionStorage.getItem(sa);return t!==null?JSON.parse(t):{}}catch(t){return{}}},rd=(e,t)=>{try{e.sessionStorage.setItem(sa,JSON.stringify(t))}catch(n){return}},ld=e=>{const t={};return e.location.search.slice(1).split("&").map(n=>n.split("=")).map(([n,s])=>{try{return[decodeURIComponent(n),decodeURIComponent(s)]}catch(o){return["",""]}}).filter(([n])=>ad(n,er)).map(([n,s])=>[n.slice(er.length),s]).forEach(([n,s])=>{t[n]=s}),t},ad=(e,t)=>e.substr(0,t.length)===t,er="ionic:",sa="ionic-persist-config";var Nt;(function(e){e.OFF="OFF",e.ERROR="ERROR",e.WARN="WARN"})(Nt||(Nt={}));const Zo=(e,...t)=>{const n=ae.get("logLevel",Nt.WARN);if([Nt.WARN].includes(n))return console.warn("[Ionic Warning]: ".concat(e),...t)},oa=(e,...t)=>{const n=ae.get("logLevel",Nt.ERROR);if([Nt.ERROR,Nt.WARN].includes(n))return console.error("[Ionic Error]: ".concat(e),...t)},cd=(e,...t)=>console.error("<".concat(e.tagName.toLowerCase(),"> must be used inside ").concat(t.join(" or "),"."));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ps=(e,t)=>{e.componentOnReady?e.componentOnReady().then(n=>t(n)):ra(()=>t(e))},go=e=>e.componentOnReady!==void 0,ud=(e,t=[])=>{const n={};return t.forEach(s=>{e.hasAttribute(s)&&(e.getAttribute(s)!==null&&(n[s]=e.getAttribute(s)),e.removeAttribute(s))}),n},fd=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],ia=(e,t)=>ud(e,fd),hg=(e,t,n,s)=>e.addEventListener(t,n,s),pg=(e,t,n,s)=>e.removeEventListener(t,n,s),ra=e=>typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(e):typeof requestAnimationFrame=="function"?requestAnimationFrame(e):setTimeout(e),la=(e,t,n)=>Math.max(e,Math.min(t,n)),gg=e=>{if(e){const t=e.changedTouches;if(t&&t.length>0){const n=t[0];return{x:n.clientX,y:n.clientY}}if(e.pageX!==void 0)return{x:e.pageX,y:e.pageY}}return{x:0,y:0}},dd=(e,t)=>{if(e!=null||(e={}),t!=null||(t={}),e===t)return!0;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!(s in t)||e[s]!==t[s])return!1;return!0};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const hd=e=>aa(e),_t=(e,t)=>(typeof e=="string"&&(t=e,e=void 0),hd(e).includes(t)),aa=(e=window)=>{if(typeof e>"u")return[];e.Ionic=e.Ionic||{};let t=e.Ionic.platforms;return t==null&&(t=e.Ionic.platforms=pd(e),t.forEach(n=>e.document.documentElement.classList.add("plt-".concat(n)))),t},pd=e=>{const t=ae.get("platform");return Object.keys(tr).filter(n=>{const s=t==null?void 0:t[n];return typeof s=="function"?s(e):tr[n](e)})},gd=e=>Ts(e)&&!ua(e),Jo=e=>!!(Ht(e,/iPad/i)||Ht(e,/Macintosh/i)&&Ts(e)),md=e=>Ht(e,/iPhone/i),vd=e=>Ht(e,/iPhone|iPod/i)||Jo(e),ca=e=>Ht(e,/android|sink/i),bd=e=>ca(e)&&!Ht(e,/mobile/i),yd=e=>{const t=e.innerWidth,n=e.innerHeight,s=Math.min(t,n),o=Math.max(t,n);return s>390&&s<520&&o>620&&o<800},_d=e=>{const t=e.innerWidth,n=e.innerHeight,s=Math.min(t,n),o=Math.max(t,n);return Jo(e)||bd(e)||s>460&&s<820&&o>780&&o<1400},Ts=e=>xd(e,"(any-pointer:coarse)"),$d=e=>!Ts(e),ua=e=>fa(e)||da(e),fa=e=>!!(e.cordova||e.phonegap||e.PhoneGap),da=e=>{const t=e.Capacitor;return!!(t!=null&&t.isNative||t!=null&&t.isNativePlatform&&t.isNativePlatform())},Ed=e=>Ht(e,/electron/i),wd=e=>{var t;return!!(!((t=e.matchMedia)===null||t===void 0)&&t.call(e,"(display-mode: standalone)").matches||e.navigator.standalone)},Ht=(e,t)=>t.test(e.navigator.userAgent),xd=(e,t)=>{var n;return(n=e.matchMedia)===null||n===void 0?void 0:n.call(e,t).matches},tr={ipad:Jo,iphone:md,ios:vd,android:ca,phablet:yd,tablet:_d,cordova:fa,capacitor:da,electron:Ed,pwa:wd,mobile:Ts,mobileweb:gd,desktop:$d,hybrid:ua};let qt;const St=e=>e&&Mf(e)||qt,Sd=(e={})=>{if(typeof window>"u")return;const t=window.document,n=window,s=n.Ionic=n.Ionic||{},o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},id(n)),{persistConfig:!1}),s.config),ld(n)),e);ae.reset(o),ae.getBoolean("persistConfig")&&rd(n,o),aa(n),s.config=ae,s.mode=qt=ae.get("mode",t.documentElement.getAttribute("mode")||(_t(n,"ios")?"ios":"md")),ae.set("mode",qt),t.documentElement.setAttribute("mode",qt),t.documentElement.classList.add(qt),ae.getBoolean("_testing")&&ae.set("animated",!1);const i=l=>{var a;return(a=l.tagName)===null||a===void 0?void 0:a.startsWith("ION-")},r=l=>["ios","md"].includes(l);Nf(l=>{for(;l;){const a=l.mode||l.getAttribute("mode");if(a){if(r(a))return a;i(l)&&Zo('Invalid ionic mode: "'+a+'", expected: "ios" or "md"')}l=l.parentElement}return qt})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ei=(e,t)=>t.closest(e)!==null,ti=(e,t)=>typeof e=="string"&&e.length>0?Object.assign({"ion-color":!0,["ion-color-".concat(e)]:!0},t):t;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const qn=typeof window<"u"?window:void 0;qn&&(qn.CSS&&qn.CSS.supports&&qn.CSS.supports("--a: 0"));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Rd=e=>e&&e.dir!==""?e.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ad=':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}',Cd=un(class extends an{constructor(t){super(),t!==!1&&this.__registerHost(),this.__attachShadow(),this.ionScrollStart=Lt(this,"ionScrollStart",7),this.ionScroll=Lt(this,"ionScroll",7),this.ionScrollEnd=Lt(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.inheritedAttributes={},this.tabsElement=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.fullscreen=!1,this.fixedSlotPlacement="after",this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}componentWillLoad(){this.inheritedAttributes=ia(this.el)}connectedCallback(){if(this.isMainContent=this.el.closest("ion-menu, ion-popover, ion-modal")===null,go(this.el)){const t=this.tabsElement=this.el.closest("ion-tabs");t!==null&&(this.tabsLoadCallback=()=>this.resize(),t.addEventListener("ionTabBarLoaded",this.tabsLoadCallback))}}disconnectedCallback(){if(this.onScrollEnd(),go(this.el)){const{tabsElement:t,tabsLoadCallback:n}=this;t!==null&&n!==void 0&&t.removeEventListener("ionTabBarLoaded",n),this.tabsElement=null,this.tabsLoadCallback=void 0}}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(()=>{this.el.offsetParent!==null&&this.resize()},100)}shouldForceOverscroll(){const{forceOverscroll:t}=this,n=St(this);return t===void 0?n==="ios"&&_t("ios"):t}resize(){this.fullscreen?cs(()=>this.readDimensions()):(this.cTop!==0||this.cBottom!==0)&&(this.cTop=this.cBottom=0,po(this))}readDimensions(){const t=Pd(this.el),n=Math.max(this.el.offsetTop,0),s=Math.max(t.offsetHeight-n-this.el.offsetHeight,0);(n!==this.cTop||s!==this.cBottom)&&(this.cTop=n,this.cBottom=s,po(this))}onScroll(t){const n=Date.now(),s=!this.isScrolling;this.lastScroll=n,s&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,cs(o=>{this.queued=!1,this.detail.event=t,Od(this.detail,this.scrollEl,o,s),this.ionScroll.emit(this.detail)}))}async getScrollElement(){return this.scrollEl||await new Promise(t=>ps(this.el,t)),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise(t=>ps(this.el,t)),Promise.resolve(this.backgroundContentEl)}scrollToTop(t=0){return this.scrollToPoint(void 0,0,t)}async scrollToBottom(t=0){const n=await this.getScrollElement(),s=n.scrollHeight-n.clientHeight;return this.scrollToPoint(void 0,s,t)}async scrollByPoint(t,n,s){const o=await this.getScrollElement();return this.scrollToPoint(t+o.scrollLeft,n+o.scrollTop,s)}async scrollToPoint(t,n,s=0){const o=await this.getScrollElement();if(s<32){n!=null&&(o.scrollTop=n),t!=null&&(o.scrollLeft=t);return}let i,r=0;const l=new Promise(g=>i=g),a=o.scrollTop,c=o.scrollLeft,u=n!=null?n-a:0,f=t!=null?t-c:0,h=g=>{const y=Math.min(1,(g-r)/s)-1,v=Math.pow(y,3)+1;u!==0&&(o.scrollTop=Math.floor(v*u+a)),f!==0&&(o.scrollLeft=Math.floor(v*f+c)),v<1?requestAnimationFrame(h):i()};return requestAnimationFrame(g=>{r=g,h(g)}),l}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{fixedSlotPlacement:t,inheritedAttributes:n,isMainContent:s,scrollX:o,scrollY:i,el:r}=this,l=Rd(r)?"rtl":"ltr",a=St(this),c=this.shouldForceOverscroll(),u=a==="ios";return this.resize(),se(cn,Object.assign({key:"f2a24aa66dbf5c76f9d4b06f708eb73cadc239df",role:s?"main":void 0,class:ti(this.color,{[a]:!0,"content-sizing":ei("ion-popover",this.el),overscroll:c,["content-".concat(l)]:!0}),style:{"--offset-top":"".concat(this.cTop,"px"),"--offset-bottom":"".concat(this.cBottom,"px")}},n),se("div",{key:"6480ca7648b278abb36477b3838bccbcd4995e2a",ref:f=>this.backgroundContentEl=f,id:"background-content",part:"background"}),t==="before"?se("slot",{name:"fixed"}):null,se("div",{key:"29a23b663f5f0215bb000820c01e1814c0d55985",class:{"inner-scroll":!0,"scroll-x":o,"scroll-y":i,overscroll:(o||i)&&c},ref:f=>this.scrollEl=f,onScroll:this.scrollEvents?f=>this.onScroll(f):void 0,part:"scroll"},se("slot",{key:"0fe1bd05609a4b88ae2ce9addf5d5dc5dc1806f0"})),u?se("div",{class:"transition-effect"},se("div",{class:"transition-cover"}),se("div",{class:"transition-shadow"})):null,t==="after"?se("slot",{name:"fixed"}):null)}get el(){return this}static get style(){return Ad}},[257,"ion-content",{color:[513],fullscreen:[4],fixedSlotPlacement:[1,"fixed-slot-placement"],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[9,"resize","onResize"]]]),Td=e=>{var t;return e.parentElement?e.parentElement:!((t=e.parentNode)===null||t===void 0)&&t.host?e.parentNode.host:null},Pd=e=>{const t=e.closest("ion-tabs");if(t)return t;const n=e.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return n||Td(e)},Od=(e,t,n,s)=>{const o=e.currentX,i=e.currentY,r=e.currentTime,l=t.scrollLeft,a=t.scrollTop,c=n-r;if(s&&(e.startTime=n,e.startX=l,e.startY=a,e.velocityX=e.velocityY=0),e.currentTime=n,e.currentX=e.scrollLeft=l,e.currentY=e.scrollTop=a,e.deltaX=l-e.startX,e.deltaY=a-e.startY,c>0&&c<100){const u=(l-o)/c,f=(a-i)/c;e.velocityX=u*.7+e.velocityX*.3,e.velocityY=f*.7+e.velocityY*.3}};function kd(){if(typeof customElements>"u")return;["ion-content"].forEach(t=>{switch(t){case"ion-content":customElements.get(t)||customElements.define(t,Cd);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Id=kd;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const mo=typeof window<"u"?window:void 0,vg=typeof document<"u"?document:void 0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const gs=()=>ae.get("experimentalCloseWatcher",!1)&&mo!==void 0&&"CloseWatcher"in mo,Ld=()=>{document.addEventListener("backbutton",()=>{})},Nd=()=>{const e=document;let t=!1;const n=()=>{if(t)return;let s=0,o=[];const i=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(a,c){o.push({priority:a,handler:c,id:s++})}}});e.dispatchEvent(i);const r=async a=>{try{if(a!=null&&a.handler){const c=a.handler(l);c!=null&&await c}}catch(c){oa("[ion-app] - Exception in startHardwareBackButton:",c)}},l=()=>{if(o.length>0){let a={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};o.forEach(c=>{c.priority>=a.priority&&(a=c)}),t=!0,o=o.filter(c=>c.id!==a.id),r(a).then(()=>t=!1)}};l()};if(gs()){let s;const o=()=>{s==null||s.destroy(),s=new mo.CloseWatcher,s.onclose=()=>{n(),o()}};o()}else e.addEventListener("backbutton",n)},Md=100,Dd=99,Bd=Object.freeze(Object.defineProperty({__proto__:null,MENU_BACK_BUTTON_PRIORITY:Dd,OVERLAY_BACK_BUTTON_PRIORITY:Md,blockHardwareBackButton:Ld,shouldUseCloseWatcher:gs,startHardwareBackButton:Nd},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Hd=async(e,t,n,s,o,i)=>{var r;if(e)return e.attachViewToDom(t,n,o,s);if(typeof n!="string"&&!(n instanceof HTMLElement))throw new Error("framework delegate is missing");const l=typeof n=="string"?(r=t.ownerDocument)===null||r===void 0?void 0:r.createElement(n):n;return s&&s.forEach(a=>l.classList.add(a)),o&&Object.assign(l,o),t.appendChild(l),await new Promise(a=>ps(l,a)),l},Fd=(e,t)=>{if(t){if(e){const n=t.parentElement;return e.removeViewFromDom(n,t)}t.remove()}return Promise.resolve()};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const jd=()=>{let e;return{lock:async()=>{const n=e;let s;return e=new Promise(o=>s=o),n!==void 0&&await n,s}}},ni="ionViewWillEnter",si="ionViewDidEnter",oi="ionViewWillLeave",ii="ionViewDidLeave",gn=e=>{e.tabIndex=-1,e.focus()},Gn=e=>e.offsetParent!==null,zd=()=>({saveViewFocus:n=>{if(ae.get("focusManagerPriority",!1)){const o=document.activeElement;o!==null&&(n!=null&&n.contains(o))&&o.setAttribute(nr,"true")}},setViewFocus:n=>{const s=ae.get("focusManagerPriority",!1);if(Array.isArray(s)&&!n.contains(document.activeElement)){const o=n.querySelector("[".concat(nr,"]"));if(o&&Gn(o)){gn(o);return}for(const i of s)switch(i){case"content":const r=n.querySelector('main, [role="main"]');if(r&&Gn(r)){gn(r);return}break;case"heading":const l=n.querySelector('h1, [role="heading"][aria-level="1"]');if(l&&Gn(l)){gn(l);return}break;case"banner":const a=n.querySelector('header, [role="banner"]');if(a&&Gn(a)){gn(a);return}break;default:Zo("Unrecognized focus manager priority value ".concat(i));break}gn(n)}}}),nr="ion-last-focus",Vd=()=>rt(()=>import("./ios.transition-BNsHtXkN.js"),__vite__mapDeps([0,1])),Ud=()=>rt(()=>import("./md.transition-DNIsIVuZ.js"),__vite__mapDeps([2,1])),ha=zd(),Wd=e=>new Promise((t,n)=>{Dt(()=>{const s=eh(e);qd(e,s),Gd(e).then(o=>{o.animation&&o.animation.destroy(),sr(e),t(o)},o=>{sr(e),n(o)}).finally(()=>{va(s,!1)})})}),qd=(e,t)=>{const n=e.enteringEl,s=e.leavingEl;ha.saveViewFocus(s),Jd(n,s,e.direction),va(t,!0),e.showGoBack?n.classList.add("can-go-back"):n.classList.remove("can-go-back"),or(n),n.style.setProperty("pointer-events","none"),s&&(or(s),s.style.setProperty("pointer-events","none"))},Gd=async e=>{const t=await Kd(e);return t&&cf.isBrowser?Yd(t,e):Xd(e)},sr=e=>{const t=e.enteringEl,n=e.leavingEl;t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events"),n!==void 0&&(n.classList.remove("ion-page-invisible"),n.style.removeProperty("pointer-events")),ha.setViewFocus(t)},Kd=async e=>!e.leavingEl||!e.animated||e.duration===0?void 0:e.animationBuilder?e.animationBuilder:e.mode==="ios"?(await Vd()).iosTransitionAnimation:(await Ud()).mdTransitionAnimation,Yd=async(e,t)=>{await pa(t,!0);const n=e(t.baseEl,t);ga(t.enteringEl,t.leavingEl);const s=await Zd(n,t);return t.progressCallback&&t.progressCallback(void 0),s&&ma(t.enteringEl,t.leavingEl),{hasCompleted:s,animation:n}},Xd=async e=>{const t=e.enteringEl,n=e.leavingEl,s=ae.get("focusManagerPriority",!1);return await pa(e,s),ga(t,n),ma(t,n),{hasCompleted:!0}},pa=async(e,t)=>{(e.deepWait!==void 0?e.deepWait:t)&&await Promise.all([vo(e.enteringEl),vo(e.leavingEl)]),await Qd(e.viewIsReady,e.enteringEl)},Qd=async(e,t)=>{e&&await e(t)},Zd=(e,t)=>{const n=t.progressCallback,s=new Promise(o=>{e.onFinish(i=>o(i===1))});return n?(e.progressStart(!0),n(e)):e.play(),s},ga=(e,t)=>{ms(t,oi),ms(e,ni)},ma=(e,t)=>{ms(e,si),ms(t,ii)},ms=(e,t)=>{if(e){const n=new CustomEvent(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}},vo=async e=>{const t=e;if(t){if(t.componentOnReady!=null){if(await t.componentOnReady()!=null)return}else if(t.__registerHost!=null){await new Promise(s=>ra(s));return}await Promise.all(Array.from(t.children).map(vo))}},or=(e,t)=>{e.hidden=!1,e.removeAttribute("aria-hidden"),e.classList.remove("ion-page-hidden")},Jd=(e,t,n)=>{e!==void 0&&(e.style.zIndex=n==="back"?"99":"101"),t!==void 0&&(t.style.zIndex="100")},va=(e,t)=>{if(!e)return;const n="header-transitioning";t?e.classList.add(n):e.classList.remove(n)},bg=e=>{if(e.classList.contains("ion-page"))return e;const t=e.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return t||e},eh=e=>{const t=e.enteringEl,n=e.leavingEl,s=e.direction;if(e.mode!=="ios")return null;const i=s==="back"?n:t;return i?i.querySelector("ion-header"):null};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const th="ION-CONTENT",ba="ion-content",ya=".ion-content-scroll-host",_a="".concat(ba,", ").concat(ya),ri=e=>e.tagName===th,ir=async e=>ri(e)?(await new Promise(t=>ps(e,t)),e.getScrollElement()):e,rr=e=>{const t=e.querySelector(ya);return t||e.querySelector(_a)},yg=e=>e.closest(_a),_g=(e,t)=>ri(e)?e.scrollToTop(t):Promise.resolve(e.scrollTo({top:0,left:0,behavior:"smooth"})),$g=(e,t,n,s)=>ri(e)?e.scrollByPoint(t,n,s):Promise.resolve(e.scrollBy({top:n,left:t,behavior:s>0?"smooth":"auto"})),lr=e=>cd(e,ba);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const nh="all 0.2s ease-in-out",bo="none",$a="banner",ar=e=>{const t=document.querySelector("".concat(e,".ion-cloned-element"));if(t!==null)return t;const n=document.createElement(e);return n.classList.add("ion-cloned-element"),n.style.setProperty("display","none"),document.body.appendChild(n),n},cr=e=>{if(!e)return;const t=e.querySelectorAll("ion-toolbar");return{el:e,toolbars:Array.from(t).map(n=>{const s=n.querySelector("ion-title");return{el:n,background:n.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:s,innerTitleEl:s?s.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(n.querySelectorAll("ion-buttons"))}})}},sh=(e,t,n)=>{cs(()=>{const s=e.scrollTop,o=la(1,1+-s/500,1.1);n.querySelector("ion-refresher.refresher-native")===null&&Dt(()=>{rh(t.toolbars,o)})})},li=(e,t)=>{e.collapse!=="fade"&&(t===void 0?e.style.removeProperty("--opacity-scale"):e.style.setProperty("--opacity-scale",t.toString()))},oh=(e,t,n)=>{if(!e[0].isIntersecting)return;const s=e[0].intersectionRatio>.9||n<=0?0:(1-e[0].intersectionRatio)*100/75;li(t.el,s===1?void 0:s)},ih=(e,t,n,s)=>{Dt(()=>{const o=s.scrollTop;oh(e,t,o);const i=e[0],r=i.intersectionRect,l=r.width*r.height,a=i.rootBounds.width*i.rootBounds.height,c=l===0&&a===0,u=Math.abs(r.left-i.boundingClientRect.left),f=Math.abs(r.right-i.boundingClientRect.right),h=l>0&&(u>=5||f>=5);c||h||(i.isIntersecting?(yn(t,!1),yn(n)):(r.x===0&&r.y===0||r.width!==0&&r.height!==0)&&o>0&&(yn(t),yn(n,!1),li(t.el)))})},yn=(e,t=!0)=>{const n=e.el,o=e.toolbars.map(i=>i.ionTitleEl);t?(n.setAttribute("role",$a),n.classList.remove("header-collapse-condense-inactive"),o.forEach(i=>{i&&i.removeAttribute("aria-hidden")})):(n.setAttribute("role",bo),n.classList.add("header-collapse-condense-inactive"),o.forEach(i=>{i&&i.setAttribute("aria-hidden","true")}))},rh=(e=[],t=1,n=!1)=>{e.forEach(s=>{const o=s.ionTitleEl,i=s.innerTitleEl;!o||o.size!=="large"||(i.style.transition=n?nh:"",i.style.transform="scale3d(".concat(t,", ").concat(t,", 1)"))})},ur=(e,t,n)=>{cs(()=>{const s=e.scrollTop,o=t.clientHeight,i=n?n.clientHeight:0;if(n!==null&&s<i){t.style.setProperty("--opacity-scale","0"),e.style.setProperty("clip-path","inset(".concat(o,"px 0px 0px 0px)"));return}const r=s-i,a=la(0,r/10,1);Dt(()=>{e.style.removeProperty("clip-path"),t.style.setProperty("--opacity-scale",a.toString())})})},lh=(e,t,n)=>e||t&&n==="md"?bo:$a,ah="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-fade.header-transitioning ion-toolbar{--background:transparent;--border-style:none}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:0px;z-index:1}.header-collapse-condense ion-toolbar{z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense ion-toolbar,.header-collapse-condense-inactive.header-transitioning:not(.header-collapse-condense) ion-toolbar{--background:var(--ion-background-color, #fff)}.header-collapse-condense-inactive.header-transitioning:not(.header-collapse-condense) ion-toolbar{--border-style:none;--opacity-scale:1}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}ion-header.header-ios:not(.header-collapse-main):has(~ion-content ion-header.header-ios[collapse=condense],~ion-content ion-header.header-ios.header-collapse-condense){opacity:0}",ch="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md{-webkit-box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12)}.header-collapse-condense{display:none}.header-md.ion-no-border{-webkit-box-shadow:none;box-shadow:none}",uh=un(class extends an{constructor(t){super(),t!==!1&&this.__registerHost(),this.inheritedAttributes={},this.translucent=!1,this.setupFadeHeader=async(n,s)=>{const o=this.scrollEl=await ir(n);this.contentScrollCallback=()=>{ur(this.scrollEl,this.el,s)},o.addEventListener("scroll",this.contentScrollCallback),ur(this.scrollEl,this.el,s)}}componentWillLoad(){this.inheritedAttributes=ia(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){if(St(this)!=="ios")return;const{collapse:n}=this,s=n==="condense",o=n==="fade";if(this.destroyCollapsibleHeader(),s){const i=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),r=i?rr(i):null;Dt(()=>{const l=ar("ion-title");l.size="large",ar("ion-back-button")}),await this.setupCondenseHeader(r,i)}else if(o){const i=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),r=i?rr(i):null;if(!r){lr(this.el);return}const l=r.querySelector('ion-header[collapse="condense"]');await this.setupFadeHeader(r,l)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCondenseHeader(t,n){if(!t||!n){lr(this.el);return}if(typeof IntersectionObserver>"u")return;this.scrollEl=await ir(t);const s=n.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from(s).find(l=>l.collapse!=="condense"),!this.collapsibleMainHeader)return;const o=cr(this.collapsibleMainHeader),i=cr(this.el);if(!o||!i)return;yn(o,!1),li(o.el,0);const r=l=>{ih(l,o,i,this.scrollEl)};this.intersectionObserver=new IntersectionObserver(r,{root:t,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(i.toolbars[i.toolbars.length-1].el),this.contentScrollCallback=()=>{sh(this.scrollEl,i,t)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),Dt(()=>{this.collapsibleMainHeader!==void 0&&this.collapsibleMainHeader.classList.add("header-collapse-main")})}render(){const{translucent:t,inheritedAttributes:n}=this,s=St(this),o=this.collapse||"none",i=o==="condense",r=lh(ei("ion-menu",this.el),i,s);return se(cn,Object.assign({key:"863c4568cd7b8c0ec55109f193bbbaed68a1346e",role:r,class:{[s]:!0,["header-".concat(s)]:!0,"header-translucent":this.translucent,["header-collapse-".concat(o)]:!0,["header-translucent-".concat(s)]:this.translucent}},n),s==="ios"&&t&&se("div",{key:"25c3bdce328b0b35607d154c8b8374679313d881",class:"header-background"}),se("slot",{key:"b44fab0a9be7920b9650da26117c783e751e1702"}))}get el(){return this}static get style(){return{ios:ah,md:ch}}},[292,"ion-header",{collapse:[1],translucent:[4]}]);function fh(){if(typeof customElements>"u")return;["ion-header"].forEach(t=>{switch(t){case"ion-header":customElements.get(t)||customElements.define(t,uh);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const dh=fh;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const fr=(e,t,n,s,o)=>ph(e[1],t[1],n[1],s[1],o).map(i=>hh(e[0],t[0],n[0],s[0],i)),hh=(e,t,n,s,o)=>{const i=3*t*Math.pow(o-1,2),r=-3*n*o+3*n+s*o,l=e*Math.pow(o-1,3);return o*(i+o*r)-l},ph=(e,t,n,s,o)=>(e-=o,t-=o,n-=o,s-=o,mh(s-3*n+3*t-e,3*n-6*t+3*e,3*t-3*e,e).filter(r=>r>=0&&r<=1)),gh=(e,t,n)=>{const s=t*t-4*e*n;return s<0?[]:[(-t+Math.sqrt(s))/(2*e),(-t-Math.sqrt(s))/(2*e)]},mh=(e,t,n,s)=>{if(e===0)return gh(t,n,s);t/=e,n/=e,s/=e;const o=(3*n-t*t)/3,i=(2*t*t*t-9*t*n+27*s)/27;if(o===0)return[Math.pow(-i,1/3)];if(i===0)return[Math.sqrt(-o),-Math.sqrt(-o)];const r=Math.pow(i/2,2)+Math.pow(o/3,3);if(r===0)return[Math.pow(i/2,1/2)-t/3];if(r>0)return[Math.pow(-(i/2)+Math.sqrt(r),1/3)-Math.pow(i/2+Math.sqrt(r),1/3)-t/3];const l=Math.sqrt(Math.pow(-(o/3),3)),a=Math.acos(-(i/(2*Math.sqrt(Math.pow(-(o/3),3))))),c=2*Math.pow(l,1/3);return[c*Math.cos(a/3)-t/3,c*Math.cos((a+2*Math.PI)/3)-t/3,c*Math.cos((a+4*Math.PI)/3)-t/3]};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const vh=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{top:0;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:min(1.0625rem, 20.4px);font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host{inset-inline-start:0}:host(.title-small){-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:min(0.8125rem, 23.4px);font-weight:normal}:host(.title-large){-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px;padding-top:2px;padding-bottom:4px;-webkit-transform-origin:left center;transform-origin:left center;position:static;-ms-flex-align:end;align-items:flex-end;min-width:100%;font-size:min(2.125rem, 61.2px);font-weight:700;text-align:start}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000);font-family:var(--ion-font-family)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit;width:auto}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}@supports selector(:dir(rtl)){:host(.title-large:dir(rtl)) .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}}",bh=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:0;padding-bottom:0;font-size:1.25rem;font-weight:500;letter-spacing:0.0125em}:host(.title-small){width:100%;height:100%;font-size:0.9375rem;font-weight:normal}",yh=un(class extends an{constructor(t){super(),t!==!1&&this.__registerHost(),this.__attachShadow(),this.ionStyle=Lt(this,"ionStyle",7)}sizeChanged(){this.emitStyle()}connectedCallback(){this.emitStyle()}emitStyle(){const t=this.getSize();this.ionStyle.emit({["title-".concat(t)]:!0})}getSize(){return this.size!==void 0?this.size:"default"}render(){const t=St(this),n=this.getSize();return se(cn,{key:"e599c0bf1b0817df3fa8360bdcd6d787f751c371",class:ti(this.color,{[t]:!0,["title-".concat(n)]:!0,"title-rtl":document.dir==="rtl"})},se("div",{key:"6e7eee9047d6759876bb31d7305b76efc7c4338c",class:"toolbar-title"},se("slot",{key:"bf790eb4c83dd0af4f2fd1f85ab4af5819f46ff4"})))}get el(){return this}static get watchers(){return{size:["sizeChanged"]}}static get style(){return{ios:vh,md:bh}}},[289,"ion-title",{color:[513],size:[1]},void 0,{size:["sizeChanged"]}]);function _h(){if(typeof customElements>"u")return;["ion-title"].forEach(t=>{switch(t){case"ion-title":customElements.get(t)||customElements.define(t,yh);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const $h=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;width:100%;padding-right:var(--ion-safe-area-right);padding-left:var(--ion-safe-area-left);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, var(--ion-background-color-step-50, #f7f7f7)));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.2)))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",Eh=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;width:100%;padding-right:var(--ion-safe-area-right);padding-left:var(--ion-safe-area-left);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, #c1c4cd))));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){-webkit-margin-start:4px;margin-inline-start:4px}::slotted(.buttons-last-slot){-webkit-margin-end:4px;margin-inline-end:4px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}",wh=un(class extends an{constructor(t){super(),t!==!1&&this.__registerHost(),this.__attachShadow(),this.childrenStyles=new Map}componentWillLoad(){const t=Array.from(this.el.querySelectorAll("ion-buttons")),n=t.find(i=>i.slot==="start");n&&n.classList.add("buttons-first-slot");const s=t.reverse(),o=s.find(i=>i.slot==="end")||s.find(i=>i.slot==="primary")||s.find(i=>i.slot==="secondary");o&&o.classList.add("buttons-last-slot")}childrenStyle(t){t.stopPropagation();const n=t.target.tagName,s=t.detail,o={},i=this.childrenStyles.get(n)||{};let r=!1;Object.keys(s).forEach(l=>{const a="toolbar-".concat(l),c=s[l];c!==i[a]&&(r=!0),c&&(o[a]=!0)}),r&&(this.childrenStyles.set(n,o),po(this))}render(){const t=St(this),n={};return this.childrenStyles.forEach(s=>{Object.assign(n,s)}),se(cn,{key:"f6c4f669a6a61c5eac4cbb5ea0aa97c48ae5bd46",class:Object.assign(Object.assign({},n),ti(this.color,{[t]:!0,"in-toolbar":ei("ion-toolbar",this.el)}))},se("div",{key:"9c81742ffa02de9ba7417025b077d05e67305074",class:"toolbar-background",part:"background"}),se("div",{key:"5fc96d166fa47894a062e41541a9beee38078a36",class:"toolbar-container",part:"container"},se("slot",{key:"b62c0d9d59a70176bdbf769aec6090d7a166853b",name:"start"}),se("slot",{key:"d01d3cc2c50e5aaa49c345b209fe8dbdf3d48131",name:"secondary"}),se("div",{key:"3aaa3a2810aedd38c37eb616158ec7b9638528fc",class:"toolbar-content",part:"content"},se("slot",{key:"357246690f8d5e1cc3ca369611d4845a79edf610"})),se("slot",{key:"06ed3cca4f7ebff4a54cd877dad3cc925ccf9f75",name:"primary"}),se("slot",{key:"e453d43d14a26b0d72f41e1b81a554bab8ece811",name:"end"})))}get el(){return this}static get style(){return{ios:$h,md:Eh}}},[289,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]);function xh(){if(typeof customElements>"u")return;["ion-toolbar"].forEach(t=>{switch(t){case"ion-toolbar":customElements.get(t)||customElements.define(t,wh);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Sh=_h;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Rh=xh,Ah=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}",Ch=un(class extends an{constructor(t){super(),t!==!1&&this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Lt(this,"ionNavWillLoad",7),this.ionNavWillChange=Lt(this,"ionNavWillChange",3),this.ionNavDidChange=Lt(this,"ionNavDidChange",3),this.lockController=jd(),this.gestureOrAnimationInProgress=!1,this.mode=St(this),this.animated=!0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(this.swipeHandler!==void 0)}async connectedCallback(){const t=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await rt(async()=>{const{createSwipeBackGesture:n}=await import("./swipe-back-CcDUw_ua.js");return{createSwipeBackGesture:n}},[])).createSwipeBackGesture(this.el,()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart(),()=>t(),n=>{var s;return(s=this.ani)===null||s===void 0?void 0:s.progressStep(n)},(n,s,o)=>{if(this.ani){this.ani.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(n)},{oneTimeCallback:!0});let i=n?-.001:.001;n?i+=fr([0,0],[.32,.72],[0,1],[1,1],s)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),i+=fr([0,0],[1,0],[.68,.28],[1,1],s)[0]),this.ani.progressEnd(n?1:0,i,o)}else this.gestureOrAnimationInProgress=!1}),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(t,n,s){const o=await this.lockController.lock();let i=!1;try{i=await this.transition(t,n,s)}catch(r){oa("[ion-router-outlet] - Exception in commit:",r)}return o(),i}async setRouteId(t,n,s,o){return{changed:await this.setRoot(t,n,{duration:s==="root"?0:void 0,direction:s==="back"?"back":"forward",animationBuilder:o}),element:this.activeEl}}async getRouteId(){const t=this.activeEl;return t?{id:t.tagName,element:t,params:this.activeParams}:void 0}async setRoot(t,n,s){if(this.activeComponent===t&&dd(n,this.activeParams))return!1;const o=this.activeEl,i=await Hd(this.delegate,this.el,t,["ion-page","ion-page-invisible"],n);return this.activeComponent=t,this.activeEl=i,this.activeParams=n,await this.commit(i,o,s),await Fd(this.delegate,o),!0}async transition(t,n,s={}){if(n===t)return!1;this.ionNavWillChange.emit();const{el:o,mode:i}=this,r=this.animated&&ae.getBoolean("animated",!0),l=s.animationBuilder||this.animation||ae.get("navAnimation");return await Wd(Object.assign(Object.assign({mode:i,animated:r,enteringEl:t,leavingEl:n,baseEl:o,deepWait:go(o),progressCallback:s.progressAnimation?a=>{a!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,a.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)},{oneTimeCallback:!0}),a.progressEnd(0,0,0)):this.ani=a}:void 0},s),{animationBuilder:l})),this.ionNavDidChange.emit(),!0}render(){return se("slot",{key:"84b50f1155b0d780dff802ee13223287259fd525"})}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return Ah}},[257,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]},void 0,{swipeHandler:["swipeHandlerChanged"]}]);function Th(){if(typeof customElements>"u")return;["ion-router-outlet"].forEach(t=>{switch(t){case"ion-router-outlet":customElements.get(t)||customElements.define(t,Ch);break}})}const Ph=Th;/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Gt=typeof document<"u";function Ea(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Oh(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Ea(e.default)}const J=Object.assign;function Us(e,t){const n={};for(const s in t){const o=t[s];n[s]=Ve(o)?o.map(e):e(o)}return n}const Cn=()=>{},Ve=Array.isArray;function dr(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}const wa=/#/g,kh=/&/g,Ih=/\//g,Lh=/=/g,Nh=/\?/g,xa=/\+/g,Mh=/%5B/g,Dh=/%5D/g,Sa=/%5E/g,Bh=/%60/g,Ra=/%7B/g,Hh=/%7C/g,Aa=/%7D/g,Fh=/%20/g;function ai(e){return e==null?"":encodeURI(""+e).replace(Hh,"|").replace(Mh,"[").replace(Dh,"]")}function jh(e){return ai(e).replace(Ra,"{").replace(Aa,"}").replace(Sa,"^")}function yo(e){return ai(e).replace(xa,"%2B").replace(Fh,"+").replace(wa,"%23").replace(kh,"%26").replace(Bh,"`").replace(Ra,"{").replace(Aa,"}").replace(Sa,"^")}function zh(e){return yo(e).replace(Lh,"%3D")}function Vh(e){return ai(e).replace(wa,"%23").replace(Nh,"%3F")}function Uh(e){return Vh(e).replace(Ih,"%2F")}function Bn(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch(t){}return""+e}const Wh=/\/$/,qh=e=>e.replace(Wh,"");function Ws(e,t,n="/"){let s,o={},i="",r="";const l=t.indexOf("#");let a=t.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(s=t.slice(0,a),i=t.slice(a,l>0?l:t.length),o=e(i.slice(1))),l>=0&&(s=s||t.slice(0,l),r=t.slice(l,t.length)),s=Xh(s!=null?s:t,n),{fullPath:s+i+r,path:s,query:o,hash:Bn(r)}}function Gh(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function hr(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Kh(e,t,n){const s=t.matched.length-1,o=n.matched.length-1;return s>-1&&s===o&&on(t.matched[s],n.matched[o])&&Ca(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function on(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ca(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Yh(e[n],t[n]))return!1;return!0}function Yh(e,t){return Ve(e)?pr(e,t):Ve(t)?pr(t,e):e===t}function pr(e,t){return Ve(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function Xh(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),o=s[s.length-1];(o===".."||o===".")&&s.push("");let i=n.length-1,r,l;for(r=0;r<s.length;r++)if(l=s[r],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(r).join("/")}const gt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let _o=function(e){return e.pop="pop",e.push="push",e}({}),qs=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function Qh(e){if(!e)if(Gt){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),qh(e)}const Zh=/^[^#]+#/;function Jh(e,t){return e.replace(Zh,"#")+t}function ep(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Ps=()=>({left:window.scrollX,top:window.scrollY});function tp(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=ep(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function gr(e,t){return(history.state?history.state.position-t:-1)+e}const $o=new Map;function np(e,t){$o.set(e,t)}function sp(e){const t=$o.get(e);return $o.delete(e),t}function op(e){return typeof e=="string"||e&&typeof e=="object"}function Ta(e){return typeof e=="string"||typeof e=="symbol"}let ce=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const Pa=Symbol("");ce.MATCHER_NOT_FOUND+"",ce.NAVIGATION_GUARD_REDIRECT+"",ce.NAVIGATION_ABORTED+"",ce.NAVIGATION_CANCELLED+"",ce.NAVIGATION_DUPLICATED+"";function rn(e,t){return J(new Error,{type:e,[Pa]:!0},t)}function st(e,t){return e instanceof Error&&Pa in e&&(t==null||!!(e.type&t))}const ip=["params","query","hash"];function rp(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of ip)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function Eo(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<n.length;++s){const o=n[s].replace(xa," "),i=o.indexOf("="),r=Bn(i<0?o:o.slice(0,i)),l=i<0?null:Bn(o.slice(i+1));if(r in t){let a=t[r];Ve(a)||(a=t[r]=[a]),a.push(l)}else t[r]=l}return t}function mr(e){let t="";for(let n in e){const s=e[n];if(n=zh(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(Ve(s)?s.map(o=>o&&yo(o)):[s&&yo(s)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function lp(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=Ve(s)?s.map(o=>o==null?null:""+o):s==null?s:""+s)}return t}const Oa=Symbol(""),vr=Symbol(""),ci=Symbol(""),Os=Symbol(""),wo=Symbol("");function mn(){let e=[];function t(s){return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function yt(e,t,n,s,o,i=r=>r()){const r=s&&(s.enterCallbacks[o]=s.enterCallbacks[o]||[]);return()=>new Promise((l,a)=>{const c=h=>{h===!1?a(rn(ce.NAVIGATION_ABORTED,{from:n,to:t})):h instanceof Error?a(h):op(h)?a(rn(ce.NAVIGATION_GUARD_REDIRECT,{from:t,to:h})):(r&&s.enterCallbacks[o]===r&&typeof h=="function"&&r.push(h),l())},u=i(()=>e.call(s&&s.instances[o],t,n,c));let f=Promise.resolve(u);e.length<3&&(f=f.then(c)),f.catch(h=>a(h))})}function Gs(e,t,n,s,o=i=>i()){const i=[];for(const r of e)for(const l in r.components){let a=r.components[l];if(!(t!=="beforeRouteEnter"&&!r.instances[l]))if(Ea(a)){const c=(a.__vccOpts||a)[t];c&&i.push(yt(c,n,s,r,l,o))}else{let c=a();i.push(()=>c.then(u=>{if(!u)throw new Error("Couldn't resolve component \"".concat(l,'" at "').concat(r.path,'"'));const f=Oh(u)?u.default:u;r.mods[l]=u,r.components[l]=f;const h=(f.__vccOpts||f)[t];return h&&yt(h,n,s,r,l,o)()}))}}return i}function ap(e,t){const n=[],s=[],o=[],i=Math.max(t.matched.length,e.matched.length);for(let r=0;r<i;r++){const l=t.matched[r];l&&(e.matched.find(c=>on(c,l))?s.push(l):n.push(l));const a=e.matched[r];a&&(t.matched.find(c=>on(c,a))||o.push(a))}return[n,s,o]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let cp=()=>location.protocol+"//"+location.host;function ka(e,t){const{pathname:n,search:s,hash:o}=t,i=e.indexOf("#");if(i>-1){let r=o.includes(e.slice(i))?e.slice(i).length:1,l=o.slice(r);return l[0]!=="/"&&(l="/"+l),hr(l,"")}return hr(n,e)+s+o}function up(e,t,n,s){let o=[],i=[],r=null;const l=({state:h})=>{const g=ka(e,location),y=n.value,v=t.value;let R=0;if(h){if(n.value=g,t.value=h,r&&r===y){r=null;return}R=v?h.position-v.position:0}else s(g);o.forEach(b=>{b(n.value,y,{delta:R,type:_o.pop,direction:R?R>0?qs.forward:qs.back:qs.unknown})})};function a(){r=n.value}function c(h){o.push(h);const g=()=>{const y=o.indexOf(h);y>-1&&o.splice(y,1)};return i.push(g),g}function u(){if(document.visibilityState==="hidden"){const{history:h}=window;if(!h.state)return;h.replaceState(J({},h.state,{scroll:Ps()}),"")}}function f(){for(const h of i)h();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:a,listen:c,destroy:f}}function br(e,t,n,s=!1,o=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:o?Ps():null}}function fp(e){const{history:t,location:n}=window,s={value:ka(e,n)},o={value:t.state};o.value||i(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(a,c,u){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+a:cp()+e+a;try{t[u?"replaceState":"pushState"](c,"",h),o.value=c}catch(g){console.error(g),n[u?"replace":"assign"](h)}}function r(a,c){i(a,J({},t.state,br(o.value.back,a,o.value.forward,!0),c,{position:o.value.position}),!0),s.value=a}function l(a,c){const u=J({},o.value,t.state,{forward:a,scroll:Ps()});i(u.current,u,!0),i(a,J({},br(s.value,a,null),{position:u.position+1},c),!1),s.value=a}return{location:s,state:o,push:l,replace:r}}function dp(e){e=Qh(e);const t=fp(e),n=up(e,t.state,t.location,t.replace);function s(i,r=!0){r||n.pauseListeners(),history.go(i)}const o=J({location:"",base:e,go:s,createHref:Jh.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}let kt=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var pe=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(pe||{});const hp={type:kt.Static,value:""},pp=/[a-zA-Z0-9_]/;function gp(e){if(!e)return[[]];if(e==="/")return[[hp]];if(!e.startsWith("/"))throw new Error('Invalid path "'.concat(e,'"'));function t(g){throw new Error("ERR (".concat(n,')/"').concat(c,'": ').concat(g))}let n=pe.Static,s=n;const o=[];let i;function r(){i&&o.push(i),i=[]}let l=0,a,c="",u="";function f(){c&&(n===pe.Static?i.push({type:kt.Static,value:c}):n===pe.Param||n===pe.ParamRegExp||n===pe.ParamRegExpEnd?(i.length>1&&(a==="*"||a==="+")&&t("A repeatable param (".concat(c,") must be alone in its segment. eg: '/:ids+.")),i.push({type:kt.Param,value:c,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=a}for(;l<e.length;){if(a=e[l++],a==="\\"&&n!==pe.ParamRegExp){s=n,n=pe.EscapeNext;continue}switch(n){case pe.Static:a==="/"?(c&&f(),r()):a===":"?(f(),n=pe.Param):h();break;case pe.EscapeNext:h(),n=s;break;case pe.Param:a==="("?n=pe.ParamRegExp:pp.test(a)?h():(f(),n=pe.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case pe.ParamRegExp:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:n=pe.ParamRegExpEnd:u+=a;break;case pe.ParamRegExpEnd:f(),n=pe.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:t("Unknown state");break}}return n===pe.ParamRegExp&&t('Unfinished custom RegExp for param "'.concat(c,'"')),f(),r(),o}const yr="[^/]+?",mp={sensitive:!1,strict:!1,start:!0,end:!0};var we=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(we||{});const vp=/[.+*?^${}()[\]/\\]/g;function bp(e,t){const n=J({},mp,t),s=[];let o=n.start?"^":"";const i=[];for(const c of e){const u=c.length?[]:[we.Root];n.strict&&!c.length&&(o+="/");for(let f=0;f<c.length;f++){const h=c[f];let g=we.Segment+(n.sensitive?we.BonusCaseSensitive:0);if(h.type===kt.Static)f||(o+="/"),o+=h.value.replace(vp,"\\$&"),g+=we.Static;else if(h.type===kt.Param){const{value:y,repeatable:v,optional:R,regexp:b}=h;i.push({name:y,repeatable:v,optional:R});const $=b||yr;if($!==yr){g+=we.BonusCustomRegExp;try{"".concat($)}catch(_){throw new Error('Invalid custom RegExp for param "'.concat(y,'" (').concat($,"): ")+_.message)}}let P=v?"((?:".concat($,")(?:/(?:").concat($,"))*)"):"(".concat($,")");f||(P=R&&c.length<2?"(?:/".concat(P,")"):"/"+P),R&&(P+="?"),o+=P,g+=we.Dynamic,R&&(g+=we.BonusOptional),v&&(g+=we.BonusRepeatable),$===".*"&&(g+=we.BonusWildcard)}u.push(g)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=we.BonusStrict}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const r=new RegExp(o,n.sensitive?"":"i");function l(c){const u=c.match(r),f={};if(!u)return null;for(let h=1;h<u.length;h++){const g=u[h]||"",y=i[h-1];f[y.name]=g&&y.repeatable?g.split("/"):g}return f}function a(c){let u="",f=!1;for(const h of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const g of h)if(g.type===kt.Static)u+=g.value;else if(g.type===kt.Param){const{value:y,repeatable:v,optional:R}=g,b=y in c?c[y]:"";if(Ve(b)&&!v)throw new Error('Provided param "'.concat(y,'" is an array but it is not repeatable (* or + modifiers)'));const $=Ve(b)?b.join("/"):b;if(!$)if(R)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error('Missing required param "'.concat(y,'"'));u+=$}}return u||"/"}return{re:r,score:s,keys:i,parse:l,stringify:a}}function yp(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===we.Static+we.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===we.Static+we.Segment?1:-1:0}function Ia(e,t){let n=0;const s=e.score,o=t.score;for(;n<s.length&&n<o.length;){const i=yp(s[n],o[n]);if(i)return i;n++}if(Math.abs(o.length-s.length)===1){if(_r(s))return 1;if(_r(o))return-1}return o.length-s.length}function _r(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const _p={strict:!1,end:!0,sensitive:!1};function $p(e,t,n){const s=bp(gp(e.path),n),o=J(s,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Ep(e,t){const n=[],s=new Map;t=dr(_p,t);function o(f){return s.get(f)}function i(f,h,g){const y=!g,v=Er(f);v.aliasOf=g&&g.record;const R=dr(t,f),b=[v];if("alias"in f){const _=typeof f.alias=="string"?[f.alias]:f.alias;for(const A of _)b.push(Er(J({},v,{components:g?g.record.components:v.components,path:A,aliasOf:g?g.record:v})))}let $,P;for(const _ of b){const{path:A}=_;if(h&&A[0]!=="/"){const N=h.record.path,x=N[N.length-1]==="/"?"":"/";_.path=h.record.path+(A&&x+A)}if($=$p(_,h,R),g?g.alias.push($):(P=P||$,P!==$&&P.alias.push($),y&&f.name&&!wr($)&&r(f.name)),La($)&&a($),v.children){const N=v.children;for(let x=0;x<N.length;x++)i(N[x],$,g&&g.children[x])}g=g||$}return P?()=>{r(P)}:Cn}function r(f){if(Ta(f)){const h=s.get(f);h&&(s.delete(f),n.splice(n.indexOf(h),1),h.children.forEach(r),h.alias.forEach(r))}else{const h=n.indexOf(f);h>-1&&(n.splice(h,1),f.record.name&&s.delete(f.record.name),f.children.forEach(r),f.alias.forEach(r))}}function l(){return n}function a(f){const h=Sp(f,n);n.splice(h,0,f),f.record.name&&!wr(f)&&s.set(f.record.name,f)}function c(f,h){let g,y={},v,R;if("name"in f&&f.name){if(g=s.get(f.name),!g)throw rn(ce.MATCHER_NOT_FOUND,{location:f});R=g.record.name,y=J($r(h.params,g.keys.filter(P=>!P.optional).concat(g.parent?g.parent.keys.filter(P=>P.optional):[]).map(P=>P.name)),f.params&&$r(f.params,g.keys.map(P=>P.name))),v=g.stringify(y)}else if(f.path!=null)v=f.path,g=n.find(P=>P.re.test(v)),g&&(y=g.parse(v),R=g.record.name);else{if(g=h.name?s.get(h.name):n.find(P=>P.re.test(h.path)),!g)throw rn(ce.MATCHER_NOT_FOUND,{location:f,currentLocation:h});R=g.record.name,y=J({},h.params,f.params),v=g.stringify(y)}const b=[];let $=g;for(;$;)b.unshift($.record),$=$.parent;return{name:R,path:v,params:y,matched:b,meta:xp(b)}}e.forEach(f=>i(f));function u(){n.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:r,clearRoutes:u,getRoutes:l,getRecordMatcher:o}}function $r(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Er(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:wp(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function wp(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function wr(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function xp(e){return e.reduce((t,n)=>J(t,n.meta),{})}function Sp(e,t){let n=0,s=t.length;for(;n!==s;){const i=n+s>>1;Ia(e,t[i])<0?s=i:n=i+1}const o=Rp(e);return o&&(s=t.lastIndexOf(o,s-1)),s}function Rp(e){let t=e;for(;t=t.parent;)if(La(t)&&Ia(e,t)===0)return t}function La({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function xr(e){const t=Re(ci),n=Re(Os),s=He(()=>{const a=ve(e.to);return t.resolve(a)}),o=He(()=>{const{matched:a}=s.value,{length:c}=a,u=a[c-1],f=n.matched;if(!u||!f.length)return-1;const h=f.findIndex(on.bind(null,u));if(h>-1)return h;const g=Sr(a[c-2]);return c>1&&Sr(u)===g&&f[f.length-1].path!==g?f.findIndex(on.bind(null,a[c-2])):h}),i=He(()=>o.value>-1&&Op(n.params,s.value.params)),r=He(()=>o.value>-1&&o.value===n.matched.length-1&&Ca(n.params,s.value.params));function l(a={}){if(Pp(a)){const c=t[ve(e.replace)?"replace":"push"](ve(e.to)).catch(Cn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:He(()=>s.value.href),isActive:i,isExactActive:r,navigate:l}}function Ap(e){return e.length===1?e[0]:e}const Cp=Rt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:xr,setup(e,{slots:t}){const n=$s(xr(e)),{options:s}=Re(ci),o=He(()=>({[Rr(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Rr(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&Ap(t.default(n));return e.custom?i:Mt("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},i)}}}),Tp=Cp;function Pp(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Op(e,t){for(const n in t){const s=t[n],o=e[n];if(typeof s=="string"){if(s!==o)return!1}else if(!Ve(o)||o.length!==s.length||s.some((i,r)=>i!==o[r]))return!1}return!0}function Sr(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Rr=(e,t,n)=>e!=null?e:t!=null?t:n,kp=Rt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=Re(wo),o=He(()=>e.route||s.value),i=Re(vr,0),r=He(()=>{let c=ve(i);const{matched:u}=o.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),l=He(()=>o.value.matched[r.value]);Jt(vr,He(()=>r.value+1)),Jt(Oa,l),Jt(wo,o);const a=Bo();return en(()=>[a.value,l.value,e.name],([c,u,f],[h,g,y])=>{u&&(u.instances[f]=c,g&&g!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),c&&u&&(!g||!on(u,g)||!h)&&(u.enterCallbacks[f]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=o.value,u=e.name,f=l.value,h=f&&f.components[u];if(!h)return Ar(n.default,{Component:h,route:c});const g=f.props[u],y=g?g===!0?c.params:typeof g=="function"?g(c):g:null,R=Mt(h,J({},y,t,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(f.instances[u]=null)},ref:a}));return Ar(n.default,{Component:R,route:c})||R}}});function Ar(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Ip=kp;function Lp(e){const t=Ep(e.routes,e),n=e.parseQuery||Eo,s=e.stringifyQuery||mr,o=e.history,i=mn(),r=mn(),l=mn(),a=Es(gt);let c=gt;Gt&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Us.bind(null,S=>""+S),f=Us.bind(null,Uh),h=Us.bind(null,Bn);function g(S,H){let M,z;return Ta(S)?(M=t.getRecordMatcher(S),z=H):z=S,t.addRoute(z,M)}function y(S){const H=t.getRecordMatcher(S);H&&t.removeRoute(H)}function v(){return t.getRoutes().map(S=>S.record)}function R(S){return!!t.getRecordMatcher(S)}function b(S,H){if(H=J({},H||a.value),typeof S=="string"){const m=Ws(n,S,H.path),w=t.resolve({path:m.path},H),C=o.createHref(m.fullPath);return J(m,w,{params:h(w.params),hash:Bn(m.hash),redirectedFrom:void 0,href:C})}let M;if(S.path!=null)M=J({},S,{path:Ws(n,S.path,H.path).path});else{const m=J({},S.params);for(const w in m)m[w]==null&&delete m[w];M=J({},S,{params:f(m)}),H.params=f(H.params)}const z=t.resolve(M,H),Q=S.hash||"";z.params=u(h(z.params));const d=Gh(s,J({},S,{hash:jh(Q),path:z.path})),p=o.createHref(d);return J({fullPath:d,hash:Q,query:s===mr?lp(S.query):S.query||{}},z,{redirectedFrom:void 0,href:p})}function $(S){return typeof S=="string"?Ws(n,S,a.value.path):J({},S)}function P(S,H){if(c!==S)return rn(ce.NAVIGATION_CANCELLED,{from:H,to:S})}function _(S){return x(S)}function A(S){return _(J($(S),{replace:!0}))}function N(S,H){const M=S.matched[S.matched.length-1];if(M&&M.redirect){const{redirect:z}=M;let Q=typeof z=="function"?z(S,H):z;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=$(Q):{path:Q},Q.params={}),J({query:S.query,hash:S.hash,params:Q.path!=null?{}:S.params},Q)}}function x(S,H){const M=c=b(S),z=a.value,Q=S.state,d=S.force,p=S.replace===!0,m=N(M,z);if(m)return x(J($(m),{state:typeof m=="object"?J({},Q,m.state):Q,force:d,replace:p}),H||M);const w=M;w.redirectedFrom=H;let C;return!d&&Kh(s,z,M)&&(C=rn(ce.NAVIGATION_DUPLICATED,{to:w,from:z}),We(z,z,!0,!1)),(C?Promise.resolve(C):W(w,z)).catch(E=>st(E)?st(E,ce.NAVIGATION_GUARD_REDIRECT)?E:Ue(E):j(E,w,z)).then(E=>{if(E){if(st(E,ce.NAVIGATION_GUARD_REDIRECT))return x(J({replace:p},$(E.to),{state:typeof E.to=="object"?J({},Q,E.to.state):Q,force:d}),H||w)}else E=me(w,z,!0,p,Q);return F(w,z,E),E})}function I(S,H){const M=P(S,H);return M?Promise.reject(M):Promise.resolve()}function D(S){const H=zt.values().next().value;return H&&typeof H.runWithContext=="function"?H.runWithContext(S):S()}function W(S,H){let M;const[z,Q,d]=ap(S,H);M=Gs(z.reverse(),"beforeRouteLeave",S,H);for(const m of z)m.leaveGuards.forEach(w=>{M.push(yt(w,S,H))});const p=I.bind(null,S,H);return M.push(p),Be(M).then(()=>{M=[];for(const m of i.list())M.push(yt(m,S,H));return M.push(p),Be(M)}).then(()=>{M=Gs(Q,"beforeRouteUpdate",S,H);for(const m of Q)m.updateGuards.forEach(w=>{M.push(yt(w,S,H))});return M.push(p),Be(M)}).then(()=>{M=[];for(const m of d)if(m.beforeEnter)if(Ve(m.beforeEnter))for(const w of m.beforeEnter)M.push(yt(w,S,H));else M.push(yt(m.beforeEnter,S,H));return M.push(p),Be(M)}).then(()=>(S.matched.forEach(m=>m.enterCallbacks={}),M=Gs(d,"beforeRouteEnter",S,H,D),M.push(p),Be(M))).then(()=>{M=[];for(const m of r.list())M.push(yt(m,S,H));return M.push(p),Be(M)}).catch(m=>st(m,ce.NAVIGATION_CANCELLED)?m:Promise.reject(m))}function F(S,H,M){l.list().forEach(z=>D(()=>z(S,H,M)))}function me(S,H,M,z,Q){const d=P(S,H);if(d)return d;const p=H===gt,m=Gt?history.state:{};M&&(z||p?o.replace(S.fullPath,J({scroll:p&&m&&m.scroll},Q)):o.push(S.fullPath,Q)),a.value=S,We(S,H,M,p),Ue()}let V;function ke(){V||(V=o.listen((S,H,M)=>{if(!At.listening)return;const z=b(S),Q=N(z,At.currentRoute.value);if(Q){x(J(Q,{replace:!0,force:!0}),z).catch(Cn);return}c=z;const d=a.value;Gt&&np(gr(d.fullPath,M.delta),Ps()),W(z,d).catch(p=>st(p,ce.NAVIGATION_ABORTED|ce.NAVIGATION_CANCELLED)?p:st(p,ce.NAVIGATION_GUARD_REDIRECT)?(x(J($(p.to),{force:!0}),z).then(m=>{st(m,ce.NAVIGATION_ABORTED|ce.NAVIGATION_DUPLICATED)&&!M.delta&&M.type===_o.pop&&o.go(-1,!1)}).catch(Cn),Promise.reject()):(M.delta&&o.go(-M.delta,!1),j(p,z,d))).then(p=>{p=p||me(z,d,!1),p&&(M.delta&&!st(p,ce.NAVIGATION_CANCELLED)?o.go(-M.delta,!1):M.type===_o.pop&&st(p,ce.NAVIGATION_ABORTED|ce.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),F(z,d,p)}).catch(Cn)}))}let De=mn(),le=mn(),X;function j(S,H,M){Ue(S);const z=le.list();return z.length?z.forEach(Q=>Q(S,H,M)):console.error(S),Promise.reject(S)}function Ie(){return X&&a.value!==gt?Promise.resolve():new Promise((S,H)=>{De.add([S,H])})}function Ue(S){return X||(X=!S,ke(),De.list().forEach(([H,M])=>S?M(S):H()),De.reset()),S}function We(S,H,M,z){const{scrollBehavior:Q}=e;if(!Gt||!Q)return Promise.resolve();const d=!M&&sp(gr(S.fullPath,0))||(z||!M)&&history.state&&history.state.scroll||null;return al().then(()=>Q(S,H,d)).then(p=>p&&tp(p)).catch(p=>j(p,S,H))}const Ae=S=>o.go(S);let jt;const zt=new Set,At={currentRoute:a,listening:!0,addRoute:g,removeRoute:y,clearRoutes:t.clearRoutes,hasRoute:R,getRoutes:v,resolve:b,options:e,push:_,replace:A,go:Ae,back:()=>Ae(-1),forward:()=>Ae(1),beforeEach:i.add,beforeResolve:r.add,afterEach:l.add,onError:le.add,isReady:Ie,install(S){S.component("RouterLink",Tp),S.component("RouterView",Ip),S.config.globalProperties.$router=At,Object.defineProperty(S.config.globalProperties,"$route",{enumerable:!0,get:()=>ve(a)}),Gt&&!jt&&a.value===gt&&(jt=!0,_(o.location).catch(z=>{}));const H={};for(const z in gt)Object.defineProperty(H,z,{get:()=>a.value[z],enumerable:!0});S.provide(ci,At),S.provide(Os,ol(H)),S.provide(wo,a);const M=S.unmount;zt.add(S),S.unmount=function(){zt.delete(S),zt.size<1&&(c=gt,V&&V(),V=null,a.value=gt,jt=!1,X=!1),M()}}};function Be(S){return S.reduce((H,M)=>H.then(()=>D(M)),Promise.resolve())}return At}function Np(e){return Re(Os)}const Mp="html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}",Dp=un(class extends an{constructor(t){super(),t!==!1&&this.__registerHost()}componentDidLoad(){Hp(async()=>{const t=_t(window,"hybrid");if(ae.getBoolean("_testing")||rt(()=>import("./index7-BD9Hrzmr.js"),[]).then(o=>o.startTapClick(ae)),ae.getBoolean("statusTap",t)&&rt(()=>import("./status-tap-Buspfxc1.js"),[]).then(o=>o.startStatusTap()),ae.getBoolean("inputShims",Bp())){const o=_t(window,"ios")?"ios":"android";rt(()=>import("./input-shims-DbGT9IDp.js"),__vite__mapDeps([3,4])).then(i=>i.startInputShims(ae,o))}const n=await rt(()=>Promise.resolve().then(()=>Bd),void 0),s=t||gs();ae.getBoolean("hardwareBackButton",s)?n.startHardwareBackButton():(gs()&&Zo("[ion-app] - experimentalCloseWatcher was set to `true`, but hardwareBackButton was set to `false`. Both config options must be `true` for the Close Watcher API to be used."),n.blockHardwareBackButton()),typeof window<"u"&&rt(()=>import("./keyboard-gqotNdwe.js"),__vite__mapDeps([5,4])).then(o=>o.startKeyboardAssist(window)),rt(()=>import("./focus-visible-supuXXMI.js"),[]).then(o=>this.focusVisible=o.startFocusVisible())})}async setFocus(t){this.focusVisible&&this.focusVisible.setFocus(t)}render(){const t=St(this);return se(cn,{key:"9be440c65819e4fa67c2c3c6477ab40b3ad3eed3",class:{[t]:!0,"ion-page":!0,"force-statusbar-padding":ae.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return Mp}},[256,"ion-app",{setFocus:[64]}]),Bp=()=>!!(_t(window,"ios")&&_t(window,"mobile")||_t(window,"android")&&_t(window,"mobileweb")),Hp=e=>{"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,32)};function Fp(){if(typeof customElements>"u")return;["ion-app"].forEach(t=>{switch(t){case"ion-app":customElements.get(t)||customElements.define(t,Dp);break}})}const jp=Fp,Cr="update:modelValue",Ks="modelValue",Kn="routerLink",Tr="navManager",zp="router",Vp="aria",Ot=Symbol(),Pr={default:Ot},Or=e=>(e==null?void 0:e.split(" "))||[],Up=(e,t,n=[])=>{var s;return[...Array.from(((s=e.value)==null?void 0:s.classList)||[]),...n].filter((o,i,r)=>!t.has(o)&&r.indexOf(o)===i)},ks=(e,t,n=[],s=[],o,i)=>{t!==void 0&&t();const r=s,l=[Kn,...n].reduce((a,c)=>(a[c]=Pr,a),{});return o&&(r.push(Cr),l[Ks]=Pr),Rt((a,{attrs:c,slots:u,emit:f})=>{var _;let h=o?a[o]:void 0;const g=Bo(),y=new Set(Or(c.class));ml(()=>{s.forEach(A=>{var N;(N=g.value)==null||N.addEventListener(A,x=>{f(A,x)})})});const v={created:A=>{(Array.isArray(i)?i:[i]).map(x=>x.replace(/-([a-z])/g,I=>I[1].toUpperCase())).forEach(x=>{A.addEventListener(x,I=>{I.target.tagName===A.tagName&&o&&(h=(I==null?void 0:I.target)[o],f(Cr,h))})})}},R=Wo(),$=((_=R==null?void 0:R.appContext)==null?void 0:_.provides[Tr])?Re(Tr):void 0,P=A=>{const{routerLink:N}=a;if(N!==Ot)if($!==void 0){A.preventDefault();let x={event:A};for(const I in a){const D=a[I];a.hasOwnProperty(I)&&I.startsWith(zp)&&D!==Ot&&(x[I]=D)}$.navigate(x)}else console.warn("Tried to navigate, but no router was found. Make sure you have mounted Vue Router.")};return()=>{h=a[o],Or(c.class).forEach(D=>{y.add(D)});const A=a.onClick,N=D=>{A!==void 0&&A(D),D.defaultPrevented||P(D)},x={ref:g,class:Up(g,y),onClick:N};for(const D in a){const W=a[D];(a.hasOwnProperty(D)&&W!==Ot||D.startsWith(Vp))&&(x[D]=W);const F="on"+D.slice(0,1).toUpperCase()+D.slice(1),me=c[F];g.value&&c.hasOwnProperty(F)&&"addEventListener"in g.value&&g.value.addEventListener(D,me)}o&&(a[Ks]!==Ot?x[o]=a[Ks]:h!==Ot&&(x[o]=h)),Kn in a&&a[Kn]!==Ot&&(x.href=a[Kn]);const I=Mt(e,x,u.default&&u.default());return o===void 0?I:Ac(I,[[v]])}},{name:e,props:l,emits:r})},Wp=ks("ion-content",Id,["color","fullscreen","fixedSlotPlacement","forceOverscroll","scrollX","scrollY","scrollEvents","ionScrollStart","ionScroll","ionScrollEnd"],["ionScrollStart","ionScroll","ionScrollEnd"]),kr=ks("ion-header",dh,["collapse","translucent"]),Ir=ks("ion-title",Sh,["color","size","ionStyle"],["ionStyle"]),Lr=ks("ion-toolbar",Rh,["color"]);var Je;(function(e){e.WillEnter="onIonViewWillEnter",e.DidEnter="onIonViewDidEnter",e.WillLeave="onIonViewWillLeave",e.DidLeave="onIonViewDidLeave"})(Je||(Je={}));const qp={[ni]:Je.WillEnter,[si]:Je.DidEnter,[oi]:Je.WillLeave,[ii]:Je.DidLeave},Nr={main:0},Gp=(e="main")=>{var t;const n=((t=Nr[e])!==null&&t!==void 0?t:0)+1;return Nr[e]=n,n.toString()},Yn=(e,t,n)=>{e!=null&&e[n]&&e[n].bind(t==null?void 0:t.value)();const s=t==null?void 0:t.value;if(s!=null&&s[n]&&s[n](),s){const o=qp[n],i=s[o];i&&i.forEach(r=>r())}},Kp=()=>{if(typeof window<"u"){const e=window.Ionic;if(e&&e.config)return e.config}return null},Yp=(e,t,n)=>{if(n){const s=n,o=s.proxy[e]||(s.proxy[e]=[]);s.exposed&&(s.exposed[e]=o);const i=(...r)=>{if(!s.isUnmounted)return r?t(...r):t()};return o.push(i),i}else console.warn("[@ionic/vue]: Ionic Lifecycle Hooks can only be used during execution of setup().")},Is=e=>(t,n=Wo())=>Yp(e,t,n);Is(Je.WillEnter);Is(Je.DidEnter);Is(Je.WillLeave);Is(Je.DidLeave);const Xp={async install(e,t={}){typeof document<"u"&&document.documentElement.classList.add("ion-ce"),Sd(t)}},Qp=Rt({name:"IonPage",props:{registerIonPage:{type:Function,default:()=>{}}},mounted(){this.$props.registerIonPage(this.$refs.ionPage)},setup(e,{attrs:t,slots:n}){return()=>Mt("div",Object.assign(Object.assign({},t),{class:"ion-page",ref:"ionPage"}),n.default&&n.default())}}),Mr=e=>!e.classList.contains("ion-page-hidden")&&!e.classList.contains("ion-page-invisible"),Dr=Symbol(0),Zp=Rt({name:"IonRouterOutlet",setup(){Ph();const e=Re(Os),t=Np(),n=Re(Dr,0),s=He(()=>t.matched[n]);let o,i;Jt(Dr,n+1),Jt(Oa,s);const r=Bo(),l=Gp("ion-router-outlet"),a=Re("navManager"),c=Re("viewStacks"),u=Es([]);let f=!1,h;en(()=>[t,s.value],([_,A])=>{if(A!==void 0){const N=A!==o,x=_.matched[_.matched.length-1]===A&&_.path!==i;(N||x)&&$(s)}o=A,i=_.path},{deep:!0});const g=()=>{const _=Kp();if(!(_&&_.get("swipeBackEnabled",r.value.mode==="ios")))return!1;const N=c.getViewStack(l);if(!N||N.length<=1)return!1;const x=a.getLeavingRouteInfo();return!!c.findViewItemByRouteInfo({pathname:x.pushedByRoute||""},l)},y=async()=>{const _=a.getLeavingRouteInfo(),{routerAnimation:A}=_,N=c.findViewItemByRouteInfo({pathname:_.pushedByRoute||""},l),x=c.findViewItemByRouteInfo(_,l);if(x){let I=A;const D=N.ionPageElement,W=x.ionPageElement,F=N.routerAnimation;I===void 0&&F!==void 0&&(I=F),x.routerAnimation=I,await R(D,W,"back",a.canGoBack(2),!0,I)}return Promise.resolve()},v=_=>{if(_)f=!0,a.handleNavigateBack();else{const A=a.getCurrentRouteInfo(),N=c.findViewItemByRouteInfo({pathname:A.pushedByRoute||""},l);N.ionPageElement.setAttribute("aria-hidden","true"),N.ionPageElement.classList.add("ion-page-hidden")}};en(r,()=>{r.value.swipeHandler={canStart:g,onStart:y,onEnd:v}});const R=async(_,A,N,x,I,D)=>{if(f)return f=!1,Promise.resolve(!1);if(_===A)return Promise.resolve(!1);_.classList.add("ion-page-invisible");const W=N===void 0||N==="root"||N==="none";return await r.value.commit(_,A,{duration:W&&D===void 0?0:void 0,direction:N,showGoBack:x,progressAnimation:I,animationBuilder:D})},b=async()=>{const _=a.getCurrentRouteInfo(),{routerDirection:A,routerAction:N,routerAnimation:x,prevRouteLastPathname:I,delta:D}=_,W=c.findViewItemByRouteInfo(_,l);let F=c.findLeavingViewItemByRouteInfo(_,l);const me=W.ionPageElement;if(me===void 0&&console.warn("[@ionic/vue Warning]: The view you are trying to render for path ".concat(_.pathname," does not have the required <ion-page> component. Transitions and lifecycle methods may not work as expected.\n\nSee https://ionicframework.com/docs/vue/navigation#ionpage for more information.")),W!==F&&(!F&&I&&(F=c.findViewItemByPathname(I,l)),!(Mr(me)&&(F==null?void 0:F.ionPageElement)!==void 0&&!Mr(F.ionPageElement)))){if(Yn(W.vueComponent,W.vueComponentRef,ni),F!=null&&F.ionPageElement&&W!==F){let V=x;const ke=F.ionPageElement;Yn(F.vueComponent,F.vueComponentRef,oi);const De=W.routerAnimation;V===void 0&&A==="back"&&De!==void 0&&(V=De),F.routerAnimation=V,await R(me,ke,A,!!_.pushedByRoute,!1,V),ke.classList.add("ion-page-hidden"),ke.setAttribute("aria-hidden","true");const le=c.size()===1;N==="replace"?(F.mount=!1,F.ionPageElement=void 0,F.ionRoute=!1):N==="push"&&A==="forward"?le&&c.mountIntermediaryViews(l,F,D):A!=="none"&&F&&W!==F&&(F.mount=!1,F.ionPageElement=void 0,F.ionRoute=!1,le&&c.unmountLeavingViews(l,W,D)),Yn(F.vueComponent,F.vueComponentRef,ii)}else requestAnimationFrame(()=>me.classList.remove("ion-page-invisible"));Yn(W.vueComponent,W.vueComponentRef,si),u.value=c.getChildrenToRender(l)}},$=_=>{const A=t.matched[0];if(h||(h=A.path),!_.value||_.value!==A&&A.path!==h)return;const N=a.getCurrentRouteInfo();let x=c.findViewItemByRouteInfo(N,l);x||(x=c.createViewItem(l,_.value.components.default,_.value,N),c.add(x)),x.mount?b():(x.mount=!0,x.registerCallback=()=>{b(),x.registerCallback=void 0}),u.value=c.getChildrenToRender(l)};return s.value&&$(s),jo(()=>c.clear(l)),{id:l,components:u,injectedRoute:e,ionRouterOutlet:r,registerIonPage:(_,A)=>{const N=_.ionPageElement;c.registerIonPage(_,A),_.registerCallback?(A.classList.add("ion-page-invisible"),_.registerCallback()):N&&!N.classList.contains("ion-page-invisible")&&A.classList.remove("ion-page-invisible")}}},render(){const{components:e,registerIonPage:t,injectedRoute:n}=this;return Mt("ion-router-outlet",{ref:"ionRouterOutlet"},e&&e.map(s=>{var o,i;let r={ref:s.vueComponentRef,key:s.pathname,registerIonPage:u=>t(s,u)};const l=(i=(o=s.matchedRoute)===null||o===void 0?void 0:o.props)===null||i===void 0?void 0:i.default,c=l?l===!0?s.params:typeof l=="function"?(()=>{var u;const f=(u=s.vueComponentData)===null||u===void 0?void 0:u.propsFunctionResult;if(f)return f;{const h=l(n);return s.vueComponentData=Object.assign(Object.assign({},s.vueComponentData),{propsFunctionResult:h}),h}})():l:null;return r=Object.assign(Object.assign({},r),c),Mt(s.vueComponent,r)}))}}),Jp=Es([]),eg=Rt((e,{attrs:t,slots:n})=>(jp(),()=>Mt("ion-app",Object.assign({name:"IonApp"},t),[n.default&&n.default(),...Jp.value])),{name:"IonApp"}),tg=Rt({__name:"App",setup(e){return(t,n)=>(Ll(),Nl(ve(eg),null,{default:Qe(()=>[de(ve(Zp))]),_:1}))}}),ng=()=>{const e=[],t={},n=v=>{switch(v.routerAction){case"pop":o(v);break;default:i(v);break}v.routerDirection==="root"&&(r(),i(v))},s=v=>{const R=e.findIndex($=>$.id===v.id);R>-1&&e.splice(R,1,v);const b=t[v.tab||""];if(b){const $=b.findIndex(P=>P.id===v.id);$>-1?b.splice($,1,v):b.push(v)}else v.tab&&(t[v.tab]=[v])},o=v=>{const R=l(v.tab);let b;if(R){for(b=R[R.length-1];b&&b.id!==v.id;)R.pop(),b=R[R.length-1];R.pop(),R.push(v)}for(b=e[e.length-1];b&&b.id!==v.id;)e.pop(),b=e[e.length-1];e.pop(),e.push(v)},i=v=>{const R=l(v.tab);R&&(R[R.length-1]&&R[R.length-1].id===v.id&&R.pop(),R.push(v)),e.push(v)},r=v=>{if(v){const{position:R,tab:b}=v,$=e.findIndex(A=>A.position===R);if($===-1)return;e.splice($);const P=A=>{const N=t[A].findIndex(x=>x.position===R);N!==-1&&t[A].splice(N)},_=t[b];if(b&&_)P(b);else for(const A in t)P(A)}else{for(const R in t)t[R]=[];e.length=0}},l=v=>{let R;return v&&(R=t[v],R||(R=t[v]=[])),R},a=()=>e.length,c=(v,R)=>{const b=R-v;return e[b]||u()},u=()=>e[e.length-1];return{current:c,size:a,last:u,add:n,canGoBack:(v=1,R,b)=>b-v>=R,update:s,getFirstRouteInfoForTab:v=>{const R=l(v);if(R)return R[0]},getCurrentRouteInfoForTab:v=>{const R=l(v);if(R)return R[R.length-1]},findLastLocation:(v,R=-1)=>{const b=l(v.tab);if(b){if(R<-1)return b[b.length-1+R];for(let $=b.length-2;$>=0;$--){const P=b[$];if(P&&P.pathname===v.pushedByRoute)return P}}for(let $=e.length-2;$>=0;$--){const P=e[$];if(P&&P.pathname===v.pushedByRoute)return e[$+1+R]}},clearHistory:r}},Br={main:0},Na=(e="main")=>{var t;const n=((t=Br[e])!==null&&t!==void 0?t:0)+1;return Br[e]=n,n.toString()},sg=(e,t)=>{let n={direction:void 0,action:void 0,delta:void 0};t.afterEach((x,I,D)=>{if(D)return;const{direction:W,action:F,delta:me}=n;i=e.history.state.position;const V=e.history.state.replaced?"replace":void 0;f(x,F||V,W,me),n={direction:void 0,action:void 0,delta:void 0}});const s=ng();let o=e.history.state.position,i=e.history.state.position,r,l;const a=[];typeof document<"u"&&document.addEventListener("ionBackButton",x=>{x.detail.register(0,I=>{e.history.go(-1),I()})}),e.history.listen((x,I,D)=>{n={delta:D.delta,action:D.type==="pop"&&D.delta>=1?"push":D.type,direction:D.direction===""?"forward":D.direction}});const c=(x,I)=>{const D=s.current(o,i);if(D&&D.pushedByRoute){const W=s.findLastLocation(D);W?(l=Object.assign(Object.assign({},W),{routerAction:"pop",routerDirection:"back",routerAnimation:I||D.routerAnimation}),D.lastPathname===D.pushedByRoute||W.pathname===D.pushedByRoute&&!D.tab&&!W.tab?t.back():t.go(W.position-D.position)):u(x,"pop","back",I)}else u(x,"pop","back",I)},u=(x,I,D,W,F)=>{P(I,D,W,F),I==="push"?t.push(x):t.replace(x)},f=(x,I,D,W)=>{let F;if(l)if(l.routerAction==="replace")F=s.current(o,i);else if(l.routerAction==="pop")F=s.current(o,i+1),I==="replace"&&s.clearHistory();else{const V=l.routerDirection==="root"?i:i-1;F=s.current(o,V)}else F=r;if(F||(F={pathname:"",search:""}),F.pathname+F.search!==x.fullPath){if(!l){if(I==="replace")l={routerAction:"replace",routerDirection:"none"};else if(I==="pop"){const X=s.current(o,i-W);if(X&&X.pushedByRoute){const j=s.findLastLocation(X,W);l=Object.assign(Object.assign({},j),{routerAction:"pop",routerDirection:"back"})}else l={routerAction:"pop",routerDirection:"none"}}l||(l={routerAction:"push",routerDirection:D||"forward"})}let V;if(l!=null&&l.id)V=Object.assign(Object.assign({},l),{lastPathname:F.pathname});else{const X=l.routerAction==="push"&&l.routerDirection==="forward";if(V=Object.assign(Object.assign({id:Na("routeInfo")},l),{lastPathname:F.pathname,pathname:x.path,search:x.fullPath&&x.fullPath.split("?")[1]||"",params:x.params&&x.params,prevRouteLastPathname:F.lastPathname}),X)V.pushedByRoute=F.pathname!==""?F.pathname:void 0;else if(V.routerAction==="pop"){const j=s.findLastLocation(V);V.pushedByRoute=j==null?void 0:j.pushedByRoute}else if(V.routerAction==="push"&&V.tab!==F.tab){const j=s.getCurrentRouteInfoForTab(V.tab);V.pushedByRoute=j==null?void 0:j.pushedByRoute}else if(V.routerAction==="replace"){const j=s.current(o,i),Ie=j==null?void 0:j.pushedByRoute,Ue=Ie!==void 0&&Ie!==V.pathname?Ie:V.pushedByRoute;V.lastPathname=(j==null?void 0:j.pathname)||V.lastPathname,V.pushedByRoute=Ue,V.routerDirection=(j==null?void 0:j.routerDirection)||V.routerDirection,V.routerAnimation=(j==null?void 0:j.routerAnimation)||V.routerAnimation,V.prevRouteLastPathname=j==null?void 0:j.lastPathname}}V.position=i,V.delta=W;const ke=s.size(),De=i-o,le=ke===De&&ke>0&&I==="replace";ke>De||le?(V.routerAction==="push"||V.routerAction==="replace")&&W===void 0&&(s.clearHistory(V),s.add(V)):s.add(V),s.size()===1&&(o=V.position),r=V}l=void 0,a.forEach(V=>V(r))},h=()=>r,g=(x=1)=>s.canGoBack(x,o,i),y=x=>{const{routerAnimation:I,routerDirection:D,routerLink:W}=x;P("push",D,I),t.push(W)},v=x=>{const I=s.getFirstRouteInfoForTab(x);I&&t.go(I.position-i)},R=(x,I)=>{if(!I)return;const D=s.getCurrentRouteInfoForTab(x),[W]=I.split("?");D?(l=Object.assign(Object.assign({},l),{routerAction:"push",routerDirection:"none",tab:x}),D.pathname===W?t.push({path:D.pathname,query:Eo(D.search)}):t.push({path:W,query:Eo(D.search)})):u(W,"push","none",void 0,x)},b=x=>{const I=Object.assign({},s.current(o,i));I.tab!==x&&(I.tab=x,s.update(I));const D=s.findLastLocation(I);I.pushedByRoute!==I.lastPathname&&(D==null?void 0:D.tab)!==x&&(I.pushedByRoute=void 0,s.update(I))},$=x=>{a.push(x)},P=(x="push",I="forward",D,W)=>{l={routerAction:x,routerDirection:I,routerAnimation:D,tab:W}};return{handleNavigate:u,getLeavingRouteInfo:()=>s.current(o,i),handleNavigateBack:c,handleSetCurrentTab:b,getCurrentRouteInfo:h,canGoBack:g,navigate:y,resetTab:v,changeTab:R,registerHistoryChangeListener:$,goBack:x=>{P("pop","back",x),t.back()},goForward:x=>{P("push","forward",x),t.forward()}}},og=e=>{const t={},n=()=>Object.keys(t).length,s=b=>{delete t[b]},o=b=>t[b],i=(b,$)=>{b.ionPageElement=$,b.ionRoute=!0,b.matchedRoute.instances={default:b.vueComponentRef.value}},r=(b,$)=>u(b.pathname,$,!1),l=(b,$,P=!0)=>u(b.lastPathname,$,P),a=(b,$)=>u(b,$,!1),c=(b,$)=>$.find(P=>{if(P.pathname===b)return P}),u=(b,$,P=!1)=>{const _=A=>{if(P&&!A.ionRoute||b==="")return!1;const x=e.resolve(b).matched.find(I=>I===A.matchedRoute);if(x)return x.path.includes(":")&&b!==A.pathname?!1:A};if($){const A=t[$];if(!A)return;const N=e?A.find(_):c(b,A);if(N)return N}else for(const A in t){const N=t[A],x=c(b,N);if(x)return x}};return{unmountLeavingViews:(b,$,P=1)=>{const _=t[b];if(!_)return;const A=_.findIndex(N=>N===$);for(let N=A+1;N<A-P;N++){const x=_[N];x.mount=!1,x.ionPageElement=void 0,x.ionRoute=!1,x.matchedRoute.instances={}}},mountIntermediaryViews:(b,$,P=1)=>{const _=t[b];if(!_)return;const A=_.findIndex(N=>N===$);for(let N=A+1;N<A+P;N++)_[N].mount=!0},clear:s,findViewItemByRouteInfo:r,findLeavingViewItemByRouteInfo:l,findViewItemByPathname:a,createViewItem:(b,$,P,_,A)=>({id:Na("viewItem"),pathname:_.pathname,outletId:b,matchedRoute:P,ionPageElement:A,vueComponent:$,vueComponentRef:Es(),ionRoute:!1,mount:!1,exact:_.pathname===P.path,params:_.params,vueComponentData:{}}),getChildrenToRender:b=>t[b]?t[b].filter(_=>_.mount):[],add:b=>{const{outletId:$}=b;t[$]?t[$].push(b):t[$]=[b]},remove:(b,$)=>{if(!$)throw Error("outletId required");const P=t[$];P&&(t[$]=P.filter(_=>_.id!==b.id))},registerIonPage:i,getViewStack:o,size:n}},ig=e=>{const t=Object.assign({},e);delete t.tabsPrefix;const n=Lp(t),s=sg(e,n),o=og(n),i=n.install.bind(n);n.install=l=>{l.provide("navManager",s),l.provide("viewStacks",o),i(l)};const r=n.isReady.bind(n);return n.isReady=()=>r(),n},rg=e=>dp(e),lg=Rt({__name:"HomePage",setup(e){return(t,n)=>(Ll(),Nl(ve(Qp),null,{default:Qe(()=>[de(ve(kr),{translucent:!0},{default:Qe(()=>[de(ve(Lr),null,{default:Qe(()=>[de(ve(Ir),null,{default:Qe(()=>[...n[0]||(n[0]=[Qn("Blank",-1)])]),_:1})]),_:1})]),_:1}),de(ve(Wp),{fullscreen:!0},{default:Qe(()=>[de(ve(kr),{collapse:"condense"},{default:Qe(()=>[de(ve(Lr),null,{default:Qe(()=>[de(ve(Ir),{size:"large"},{default:Qe(()=>[...n[1]||(n[1]=[Qn("Blank",-1)])]),_:1})]),_:1})]),_:1}),n[2]||(n[2]=bn("div",{id:"container"},[bn("strong",null,"Ready to create an app?"),bn("p",null,[Qn("Start with Ionic "),bn("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ionicframework.com/docs/components"},"UI Components")])],-1))]),_:1})]),_:1}))}}),ag=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n},cg=ag(lg,[["__scopeId","data-v-2ec6cff4"]]),ug=[{path:"/",redirect:"/home"},{path:"/home",name:"Home",component:cg}],Ma=ig({history:rg("/"),routes:ug}),fg=ef(tg).use(Xp).use(Ma);Ma.isReady().then(()=>{fg.mount("#app")});export{dg as __vite_legacy_guard,gg as a,ps as b,la as c,vg as d,Dt as e,yg as f,bg as g,hg as h,Rd as i,pg as j,ra as k,ir as l,$g as m,oa as p,cs as r,_g as s,mo as w};


//# sourceMappingURL=data:application/json;base64,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QWlJLEVBQUEsS0FBQUEsRUFBQSxPQUFMLFFBQUssMENBSWpDQyxHQUdNLE9BSEQsR0FBRyxhQUFXLENBQ2pCQSxHQUF3QyxjQUFoQyx5QkFBdUIsRUFDL0JBLEdBQXdJLGFBQXJJLG1CQUFpQixFQUFBQSxHQUFnSCxLQUE3RyxPQUFPLFNBQVMsSUFBSSxzQkFBc0IsS0FBSyw4Q0FBNkMsZUFBYSxnSkNibEl6VCxHQUFnQyxDQUNwQyxDQUNFLEtBQU0sSUFDTixTQUFVLFNBRVosQ0FDRSxLQUFNLFFBQ04sS0FBTSxPQUNOLFVBQVcwVCxFQUFBLENBRWYsRUFFTXJSLEdBQVN5QyxHQUFhLENBQzFCLFFBQVN0SSxHQUFpQixHQUF3QixFQUNsRCxPQUFBd0QsRUFDRixDQUFDLEVDaUJLOXRDLEdBQU0yWSxHQUFVaStCLEVBQUcsRUFDdEIsSUFBSXNELEVBQVEsRUFDWixJQUFJL0osRUFBTSxFQUViQSxHQUFPLFVBQVUsS0FBSyxJQUFNLENBQzFCbndDLEdBQUksTUFBTSxNQUFNLENBQ2xCLENBQUMiLCJuYW1lcyI6WyJtYWtlTWFwIiwic3RyIiwibWFwIiwia2V5IiwidmFsIiwiRU1QVFlfT0JKIiwiRU1QVFlfQVJSIiwiTk9PUCIsIk5PIiwiaXNPbiIsImlzTW9kZWxMaXN0ZW5lciIsImV4dGVuZCIsInJlbW92ZSIsImFyciIsImVsIiwiaSIsImhhc093blByb3BlcnR5IiwiaGFzT3duIiwiaXNBcnJheSIsImlzTWFwIiwidG9UeXBlU3RyaW5nIiwiaXNTZXQiLCJpc0Z1bmN0aW9uIiwiaXNTdHJpbmciLCJpc1N5bWJvbCIsImlzT2JqZWN0IiwiaXNQcm9taXNlIiwib2JqZWN0VG9TdHJpbmciLCJ2YWx1ZSIsInRvUmF3VHlwZSIsImlzUGxhaW5PYmplY3QiLCJpc0ludGVnZXJLZXkiLCJpc1Jlc2VydmVkUHJvcCIsImNhY2hlU3RyaW5nRnVuY3Rpb24iLCJmbiIsImNhY2hlIiwiY2FtZWxpemVSRSIsImNhbWVsaXplIiwiYyIsImh5cGhlbmF0ZVJFIiwiaHlwaGVuYXRlIiwiY2FwaXRhbGl6ZSIsInRvSGFuZGxlcktleSIsImhhc0NoYW5nZWQiLCJvbGRWYWx1ZSIsImludm9rZUFycmF5Rm5zIiwiZm5zIiwiYXJnIiwiZGVmIiwib2JqIiwid3JpdGFibGUiLCJsb29zZVRvTnVtYmVyIiwibiIsIl9nbG9iYWxUaGlzIiwiZ2V0R2xvYmFsVGhpcyIsIm5vcm1hbGl6ZVN0eWxlIiwicmVzIiwiaXRlbSIsIm5vcm1hbGl6ZWQiLCJwYXJzZVN0cmluZ1N0eWxlIiwibGlzdERlbGltaXRlclJFIiwicHJvcGVydHlEZWxpbWl0ZXJSRSIsInN0eWxlQ29tbWVudFJFIiwiY3NzVGV4dCIsInJldCIsInRtcCIsIm5vcm1hbGl6ZUNsYXNzIiwibmFtZSIsInNwZWNpYWxCb29sZWFuQXR0cnMiLCJpc1NwZWNpYWxCb29sZWFuQXR0ciIsImluY2x1ZGVCb29sZWFuQXR0ciIsImFjdGl2ZUVmZmVjdFNjb3BlIiwiRWZmZWN0U2NvcGUiLCJkZXRhY2hlZCIsImwiLCJjdXJyZW50RWZmZWN0U2NvcGUiLCJmcm9tUGFyZW50IiwibGFzdCIsImdldEN1cnJlbnRTY29wZSIsImFjdGl2ZVN1YiIsInBhdXNlZFF1ZXVlRWZmZWN0cyIsIlJlYWN0aXZlRWZmZWN0IiwiYmF0Y2giLCJjbGVhbnVwRWZmZWN0IiwicHJlcGFyZURlcHMiLCJwcmV2RWZmZWN0IiwicHJldlNob3VsZFRyYWNrIiwic2hvdWxkVHJhY2siLCJjbGVhbnVwRGVwcyIsImxpbmsiLCJyZW1vdmVTdWIiLCJpc0RpcnR5IiwiYmF0Y2hEZXB0aCIsImJhdGNoZWRTdWIiLCJiYXRjaGVkQ29tcHV0ZWQiLCJzdWIiLCJpc0NvbXB1dGVkIiwic3RhcnRCYXRjaCIsImVuZEJhdGNoIiwiZSIsIm5leHQiLCJlcnJvciIsImVyciIsImhlYWQiLCJ0YWlsIiwicHJldiIsInJlbW92ZURlcCIsInJlZnJlc2hDb21wdXRlZCIsImNvbXB1dGVkIiwiZ2xvYmFsVmVyc2lvbiIsImRlcCIsInByZXZTdWIiLCJzb2Z0IiwibmV4dFN1YiIsInByZXZEZXAiLCJuZXh0RGVwIiwidHJhY2tTdGFjayIsInBhdXNlVHJhY2tpbmciLCJyZXNldFRyYWNraW5nIiwiY2xlYW51cCIsIkxpbmsiLCJEZXAiLCJkZWJ1Z0luZm8iLCJhZGRTdWIiLCJjdXJyZW50VGFpbCIsInRhcmdldE1hcCIsIklURVJBVEVfS0VZIiwiTUFQX0tFWV9JVEVSQVRFX0tFWSIsIkFSUkFZX0lURVJBVEVfS0VZIiwidHJhY2siLCJ0YXJnZXQiLCJ0eXBlIiwiZGVwc01hcCIsInRyaWdnZXIiLCJuZXdWYWx1ZSIsIm9sZFRhcmdldCIsInJ1biIsInRhcmdldElzQXJyYXkiLCJpc0FycmF5SW5kZXgiLCJuZXdMZW5ndGgiLCJrZXkyIiwicmVhY3RpdmVSZWFkQXJyYXkiLCJhcnJheSIsInJhdyIsInRvUmF3IiwiaXNTaGFsbG93IiwidG9SZWFjdGl2ZSIsInNoYWxsb3dSZWFkQXJyYXkiLCJ0b1dyYXBwZWQiLCJpc1JlYWRvbmx5IiwiaXNSZWFjdGl2ZSIsInRvUmVhZG9ubHkiLCJhcnJheUluc3RydW1lbnRhdGlvbnMiLCJpdGVyYXRvciIsImFyZ3MiLCJ4IiwidGhpc0FyZyIsImFwcGx5IiwidiIsInNlYXJjaFByb3h5Iiwic2VwYXJhdG9yIiwibm9UcmFja2luZyIsInJlZHVjZSIsImNvbXBhcmVyIiwic2VsZiIsIm1ldGhvZCIsIndyYXBWYWx1ZSIsIml0ZXIiLCJyZXN1bHQiLCJhcnJheVByb3RvIiwid3JhcHBlZFJldEZuIiwibmVlZHNXcmFwIiwibWV0aG9kRm4iLCJyZXN1bHQyIiwid3JhcHBlZEZuIiwiaW5kZXgiLCJhY2MiLCJpc1Byb3h5IiwiaXNOb25UcmFja2FibGVLZXlzIiwiYnVpbHRJblN5bWJvbHMiLCJCYXNlUmVhY3RpdmVIYW5kbGVyIiwiX2lzUmVhZG9ubHkiLCJfaXNTaGFsbG93IiwicmVjZWl2ZXIiLCJpc1JlYWRvbmx5MiIsImlzU2hhbGxvdzIiLCJzaGFsbG93UmVhZG9ubHlNYXAiLCJyZWFkb25seU1hcCIsInNoYWxsb3dSZWFjdGl2ZU1hcCIsInJlYWN0aXZlTWFwIiwiaXNSZWYiLCJyZWFkb25seSIsInJlYWN0aXZlIiwiTXV0YWJsZVJlYWN0aXZlSGFuZGxlciIsImlzQXJyYXlXaXRoSW50ZWdlcktleSIsImlzT2xkVmFsdWVSZWFkb25seSIsImhhZEtleSIsIlJlYWRvbmx5UmVhY3RpdmVIYW5kbGVyIiwibXV0YWJsZUhhbmRsZXJzIiwicmVhZG9ubHlIYW5kbGVycyIsInNoYWxsb3dSZWFjdGl2ZUhhbmRsZXJzIiwidG9TaGFsbG93IiwiZ2V0UHJvdG8iLCJjcmVhdGVJdGVyYWJsZU1ldGhvZCIsInJhd1RhcmdldCIsInRhcmdldElzTWFwIiwiaXNQYWlyIiwiaXNLZXlPbmx5IiwiaW5uZXJJdGVyYXRvciIsIndyYXAiLCJkb25lIiwiY3JlYXRlUmVhZG9ubHlNZXRob2QiLCJjcmVhdGVJbnN0cnVtZW50YXRpb25zIiwic2hhbGxvdyIsImluc3RydW1lbnRhdGlvbnMiLCJyYXdLZXkiLCJoYXMiLCJjYWxsYmFjayIsIm9ic2VydmVkIiwiZ2V0IiwiaGFkSXRlbXMiLCJjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIiLCJtdXRhYmxlQ29sbGVjdGlvbkhhbmRsZXJzIiwic2hhbGxvd0NvbGxlY3Rpb25IYW5kbGVycyIsInJlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzIiwidGFyZ2V0VHlwZU1hcCIsInJhd1R5cGUiLCJnZXRUYXJnZXRUeXBlIiwiY3JlYXRlUmVhY3RpdmVPYmplY3QiLCJzaGFsbG93UmVhY3RpdmUiLCJiYXNlSGFuZGxlcnMiLCJjb2xsZWN0aW9uSGFuZGxlcnMiLCJwcm94eU1hcCIsInRhcmdldFR5cGUiLCJleGlzdGluZ1Byb3h5IiwicHJveHkiLCJtYXJrUmF3IiwiciIsInJlZiIsImNyZWF0ZVJlZiIsInNoYWxsb3dSZWYiLCJyYXdWYWx1ZSIsIlJlZkltcGwiLCJ1c2VEaXJlY3RWYWx1ZSIsInVucmVmIiwicmVmMiIsInNoYWxsb3dVbndyYXBIYW5kbGVycyIsInByb3h5UmVmcyIsIm9iamVjdFdpdGhSZWZzIiwiQ29tcHV0ZWRSZWZJbXBsIiwic2V0dGVyIiwiaXNTU1IiLCJnZXR0ZXJPck9wdGlvbnMiLCJkZWJ1Z09wdGlvbnMiLCJnZXR0ZXIiLCJJTklUSUFMX1dBVENIRVJfVkFMVUUiLCJjbGVhbnVwTWFwIiwiYWN0aXZlV2F0Y2hlciIsIm9uV2F0Y2hlckNsZWFudXAiLCJjbGVhbnVwRm4iLCJmYWlsU2lsZW50bHkiLCJvd25lciIsImNsZWFudXBzIiwid2F0Y2giLCJzb3VyY2UiLCJjYiIsIm9wdGlvbnMiLCJpbW1lZGlhdGUiLCJkZWVwIiwib25jZSIsInNjaGVkdWxlciIsImF1Z21lbnRKb2IiLCJjYWxsIiwicmVhY3RpdmVHZXR0ZXIiLCJzb3VyY2UyIiwidHJhdmVyc2UiLCJlZmZlY3QiLCJib3VuZENsZWFudXAiLCJmb3JjZVRyaWdnZXIiLCJpc011bHRpU291cmNlIiwicyIsImN1cnJlbnRFZmZlY3QiLCJiYXNlR2V0dGVyIiwiZGVwdGgiLCJzY29wZSIsIndhdGNoSGFuZGxlIiwiX2NiIiwiam9iIiwiaW1tZWRpYXRlRmlyc3RSdW4iLCJjdXJyZW50V2F0Y2hlciIsImNsZWFudXAyIiwic2VlbiIsImNhbGxXaXRoRXJyb3JIYW5kbGluZyIsImluc3RhbmNlIiwiaGFuZGxlRXJyb3IiLCJjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyIsInZhbHVlcyIsInRocm93SW5EZXYiLCJjb250ZXh0Vk5vZGUiLCJlcnJvckhhbmRsZXIiLCJ0aHJvd1VuaGFuZGxlZEVycm9ySW5Qcm9kdWN0aW9uIiwiY3VyIiwiZXhwb3NlZEluc3RhbmNlIiwiZXJyb3JJbmZvIiwiZXJyb3JDYXB0dXJlZEhvb2tzIiwibG9nRXJyb3IiLCJ0aHJvd0luUHJvZCIsInF1ZXVlIiwiZmx1c2hJbmRleCIsInBlbmRpbmdQb3N0Rmx1c2hDYnMiLCJhY3RpdmVQb3N0Rmx1c2hDYnMiLCJwb3N0Rmx1c2hJbmRleCIsInJlc29sdmVkUHJvbWlzZSIsImN1cnJlbnRGbHVzaFByb21pc2UiLCJuZXh0VGljayIsInAiLCJmaW5kSW5zZXJ0aW9uSW5kZXgiLCJpZCIsInN0YXJ0IiwiZW5kIiwibWlkZGxlIiwibWlkZGxlSm9iIiwibWlkZGxlSm9iSWQiLCJnZXRJZCIsInF1ZXVlSm9iIiwiam9iSWQiLCJsYXN0Sm9iIiwicXVldWVGbHVzaCIsImZsdXNoSm9icyIsInF1ZXVlUG9zdEZsdXNoQ2IiLCJmbHVzaFByZUZsdXNoQ2JzIiwiZmx1c2hQb3N0Rmx1c2hDYnMiLCJkZWR1cGVkIiwiYSIsImIiLCJjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UiLCJjdXJyZW50U2NvcGVJZCIsInNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSIsIndpdGhDdHgiLCJjdHgiLCJpc05vblNjb3BlZFNsb3QiLCJyZW5kZXJGbldpdGhDb250ZXh0Iiwic2V0QmxvY2tUcmFja2luZyIsInByZXZJbnN0YW5jZSIsIndpdGhEaXJlY3RpdmVzIiwidm5vZGUiLCJkaXJlY3RpdmVzIiwiZ2V0Q29tcG9uZW50UHVibGljSW5zdGFuY2UiLCJiaW5kaW5ncyIsImRpciIsIm1vZGlmaWVycyIsImludm9rZURpcmVjdGl2ZUhvb2siLCJwcmV2Vk5vZGUiLCJvbGRCaW5kaW5ncyIsImJpbmRpbmciLCJob29rIiwiVGVsZXBvcnRFbmRLZXkiLCJpc1RlbGVwb3J0IiwibGVhdmVDYktleSIsInNldFRyYW5zaXRpb25Ib29rcyIsImhvb2tzIiwiZGVmaW5lQ29tcG9uZW50IiwiZXh0cmFPcHRpb25zIiwibWFya0FzeW5jQm91bmRhcnkiLCJwZW5kaW5nU2V0UmVmTWFwIiwic2V0UmVmIiwicmF3UmVmIiwib2xkUmF3UmVmIiwicGFyZW50U3VzcGVuc2UiLCJpc1VubW91bnQiLCJpc0FzeW5jV3JhcHBlciIsInJlZlZhbHVlIiwib2xkUmVmIiwicmVmcyIsInNldHVwU3RhdGUiLCJyYXdTZXR1cFN0YXRlIiwiY2FuU2V0U2V0dXBSZWYiLCJpbnZhbGlkYXRlUGVuZGluZ1NldFJlZiIsIm9sZFJhd1JlZkF0b20iLCJfaXNTdHJpbmciLCJfaXNSZWYiLCJkb1NldCIsImV4aXN0aW5nIiwibmV3VmFsIiwicXVldWVQb3N0UmVuZGVyRWZmZWN0IiwicGVuZGluZ1NldFJlZiIsImlzS2VlcEFsaXZlIiwib25BY3RpdmF0ZWQiLCJyZWdpc3RlcktlZXBBbGl2ZUhvb2siLCJvbkRlYWN0aXZhdGVkIiwiY3VycmVudEluc3RhbmNlIiwid3JhcHBlZEhvb2siLCJjdXJyZW50IiwiaW5qZWN0SG9vayIsImluamVjdFRvS2VlcEFsaXZlUm9vdCIsImtlZXBBbGl2ZVJvb3QiLCJpbmplY3RlZCIsIm9uVW5tb3VudGVkIiwicHJlcGVuZCIsInJlc2V0Iiwic2V0Q3VycmVudEluc3RhbmNlIiwiY3JlYXRlSG9vayIsImxpZmVjeWNsZSIsImlzSW5TU1JDb21wb25lbnRTZXR1cCIsIm9uQmVmb3JlTW91bnQiLCJvbk1vdW50ZWQiLCJvbkJlZm9yZVVwZGF0ZSIsIm9uVXBkYXRlZCIsIm9uQmVmb3JlVW5tb3VudCIsIm9uU2VydmVyUHJlZmV0Y2giLCJvblJlbmRlclRyaWdnZXJlZCIsIm9uUmVuZGVyVHJhY2tlZCIsIm9uRXJyb3JDYXB0dXJlZCIsIk5VTExfRFlOQU1JQ19DT01QT05FTlQiLCJnZXRQdWJsaWNJbnN0YW5jZSIsImlzU3RhdGVmdWxDb21wb25lbnQiLCJwdWJsaWNQcm9wZXJ0aWVzTWFwIiwicmVzb2x2ZU1lcmdlZE9wdGlvbnMiLCJpbnN0YW5jZVdhdGNoIiwiaGFzU2V0dXBCaW5kaW5nIiwic3RhdGUiLCJQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMiLCJkYXRhIiwicHJvcHMiLCJhY2Nlc3NDYWNoZSIsImFwcENvbnRleHQiLCJzaG91bGRDYWNoZUFjY2VzcyIsInB1YmxpY0dldHRlciIsImNzc01vZHVsZSIsImdsb2JhbFByb3BlcnRpZXMiLCJjc3NNb2R1bGVzIiwiZGVzY3JpcHRvciIsIm5vcm1hbGl6ZVByb3BzT3JFbWl0cyIsImFwcGx5T3B0aW9ucyIsInB1YmxpY1RoaXMiLCJjYWxsSG9vayIsImRhdGFPcHRpb25zIiwiY29tcHV0ZWRPcHRpb25zIiwibWV0aG9kcyIsIndhdGNoT3B0aW9ucyIsInByb3ZpZGVPcHRpb25zIiwiaW5qZWN0T3B0aW9ucyIsImNyZWF0ZWQiLCJiZWZvcmVNb3VudCIsIm1vdW50ZWQiLCJiZWZvcmVVcGRhdGUiLCJ1cGRhdGVkIiwiYWN0aXZhdGVkIiwiZGVhY3RpdmF0ZWQiLCJiZWZvcmVEZXN0cm95IiwiYmVmb3JlVW5tb3VudCIsImRlc3Ryb3llZCIsInVubW91bnRlZCIsInJlbmRlciIsInJlbmRlclRyYWNrZWQiLCJyZW5kZXJUcmlnZ2VyZWQiLCJlcnJvckNhcHR1cmVkIiwic2VydmVyUHJlZmV0Y2giLCJleHBvc2UiLCJpbmhlcml0QXR0cnMiLCJjb21wb25lbnRzIiwiZmlsdGVycyIsInJlc29sdmVJbmplY3Rpb25zIiwibWV0aG9kSGFuZGxlciIsIm9wdCIsInNldCIsImNyZWF0ZVdhdGNoZXIiLCJwcm92aWRlcyIsInByb3ZpZGUiLCJyZWdpc3RlckxpZmVjeWNsZUhvb2siLCJyZWdpc3RlciIsIl9ob29rIiwiZXhwb3NlZCIsImNoZWNrRHVwbGljYXRlUHJvcGVydGllcyIsIm5vcm1hbGl6ZUluamVjdCIsImluamVjdCIsImgiLCJjcmVhdGVQYXRoR2V0dGVyIiwiaGFuZGxlciIsImJhc2UiLCJtaXhpbnMiLCJleHRlbmRzT3B0aW9ucyIsImdsb2JhbE1peGlucyIsIm9wdGlvbk1lcmdlU3RyYXRlZ2llcyIsImNhY2hlZCIsInJlc29sdmVkIiwibSIsIm1lcmdlT3B0aW9ucyIsInRvIiwiZnJvbSIsInN0cmF0cyIsImFzTWl4aW4iLCJzdHJhdCIsImludGVybmFsT3B0aW9uTWVyZ2VTdHJhdHMiLCJtZXJnZURhdGFGbiIsIm1lcmdlRW1pdHNPclByb3BzT3B0aW9ucyIsIm1lcmdlT2JqZWN0T3B0aW9ucyIsIm1lcmdlQXNBcnJheSIsIm1lcmdlV2F0Y2hPcHRpb25zIiwibWVyZ2VJbmplY3QiLCJtZXJnZWQiLCJjcmVhdGVBcHBDb250ZXh0IiwidWlkJDEiLCJjcmVhdGVBcHBBUEkiLCJoeWRyYXRlIiwicm9vdENvbXBvbmVudCIsInJvb3RQcm9wcyIsImNvbnRleHQiLCJpbnN0YWxsZWRQbHVnaW5zIiwicGx1Z2luQ2xlYW51cEZucyIsImlzTW91bnRlZCIsImFwcCIsInZlcnNpb24iLCJwbHVnaW4iLCJtaXhpbiIsImNvbXBvbmVudCIsImRpcmVjdGl2ZSIsInJvb3RDb250YWluZXIiLCJpc0h5ZHJhdGUiLCJuYW1lc3BhY2UiLCJjcmVhdGVWTm9kZSIsImxhc3RBcHAiLCJjdXJyZW50QXBwIiwicGFyZW50UHJvdmlkZXMiLCJkZWZhdWx0VmFsdWUiLCJ0cmVhdERlZmF1bHRBc0ZhY3RvcnkiLCJnZXRDdXJyZW50SW5zdGFuY2UiLCJzc3JDb250ZXh0S2V5IiwidXNlU1NSQ29udGV4dCIsImRvV2F0Y2giLCJmbHVzaCIsImJhc2VXYXRjaE9wdGlvbnMiLCJydW5zSW1tZWRpYXRlbHkiLCJzc3JDbGVhbnVwIiwid2F0Y2hTdG9wSGFuZGxlIiwiaXNQcmUiLCJpc0ZpcnN0UnVuIiwid2F0Y2gkMSIsInBhdGgiLCJzZWdtZW50cyIsImdldE1vZGVsTW9kaWZpZXJzIiwibW9kZWxOYW1lIiwiZW1pdCIsImV2ZW50IiwicmF3QXJncyIsImhhbmRsZXJOYW1lIiwib25jZUhhbmRsZXIiLCJtaXhpbkVtaXRzQ2FjaGUiLCJub3JtYWxpemVFbWl0c09wdGlvbnMiLCJjb21wIiwiaGFzRXh0ZW5kcyIsImV4dGVuZEVtaXRzIiwicmF3MiIsIm5vcm1hbGl6ZWRGcm9tRXh0ZW5kIiwiaXNFbWl0TGlzdGVuZXIiLCJyZW5kZXJDb21wb25lbnRSb290IiwiQ29tcG9uZW50Iiwid2l0aFByb3h5IiwicHJvcHNPcHRpb25zIiwic2xvdHMiLCJhdHRycyIsInJlbmRlckNhY2hlIiwiZmFsbHRocm91Z2hBdHRycyIsInByb3h5VG9Vc2UiLCJ0aGlzUHJveHkiLCJub3JtYWxpemVWTm9kZSIsInJlbmRlcjIiLCJnZXRGdW5jdGlvbmFsRmFsbHRocm91Z2giLCJibG9ja1N0YWNrIiwiQ29tbWVudCIsInJvb3QiLCJrZXlzIiwic2hhcGVGbGFnIiwiZmlsdGVyTW9kZWxMaXN0ZW5lcnMiLCJjbG9uZVZOb2RlIiwic2hvdWxkVXBkYXRlQ29tcG9uZW50IiwibmV4dFZOb2RlIiwib3B0aW1pemVkIiwicHJldlByb3BzIiwicHJldkNoaWxkcmVuIiwibmV4dFByb3BzIiwibmV4dENoaWxkcmVuIiwicGF0Y2hGbGFnIiwiZW1pdHMiLCJoYXNQcm9wc0NoYW5nZWQiLCJkeW5hbWljUHJvcHMiLCJlbWl0c09wdGlvbnMiLCJuZXh0S2V5cyIsInVwZGF0ZUhPQ0hvc3RFbCIsInBhcmVudCIsImludGVybmFsT2JqZWN0UHJvdG8iLCJjcmVhdGVJbnRlcm5hbE9iamVjdCIsImlzSW50ZXJuYWxPYmplY3QiLCJpbml0UHJvcHMiLCJyYXdQcm9wcyIsImlzU3RhdGVmdWwiLCJzZXRGdWxsUHJvcHMiLCJ1cGRhdGVQcm9wcyIsInJhd1ByZXZQcm9wcyIsInJhd0N1cnJlbnRQcm9wcyIsImhhc0F0dHJzQ2hhbmdlZCIsInByb3BzVG9VcGRhdGUiLCJjYW1lbGl6ZWRLZXkiLCJyZXNvbHZlUHJvcFZhbHVlIiwia2ViYWJLZXkiLCJuZWVkQ2FzdEtleXMiLCJyYXdDYXN0VmFsdWVzIiwiY2FtZWxLZXkiLCJjYXN0VmFsdWVzIiwiaXNBYnNlbnQiLCJoYXNEZWZhdWx0IiwicHJvcHNEZWZhdWx0cyIsIm1peGluUHJvcHNDYWNoZSIsIm5vcm1hbGl6ZVByb3BzT3B0aW9ucyIsImV4dGVuZFByb3BzIiwibm9ybWFsaXplZEtleSIsInZhbGlkYXRlUHJvcE5hbWUiLCJwcm9wIiwicHJvcFR5cGUiLCJzaG91bGRDYXN0Iiwic2hvdWxkQ2FzdFRydWUiLCJ0eXBlTmFtZSIsImlzSW50ZXJuYWxLZXkiLCJub3JtYWxpemVTbG90VmFsdWUiLCJub3JtYWxpemVTbG90IiwicmF3U2xvdCIsIm5vcm1hbGl6ZU9iamVjdFNsb3RzIiwicmF3U2xvdHMiLCJub3JtYWxpemVWTm9kZVNsb3RzIiwiY2hpbGRyZW4iLCJhc3NpZ25TbG90cyIsImluaXRTbG90cyIsInVwZGF0ZVNsb3RzIiwibmVlZERlbGV0aW9uQ2hlY2siLCJkZWxldGlvbkNvbXBhcmlzb25UYXJnZXQiLCJxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZSIsImNyZWF0ZVJlbmRlcmVyIiwiYmFzZUNyZWF0ZVJlbmRlcmVyIiwiY3JlYXRlSHlkcmF0aW9uRm5zIiwiaG9zdEluc2VydCIsImhvc3RSZW1vdmUiLCJob3N0UGF0Y2hQcm9wIiwiaG9zdENyZWF0ZUVsZW1lbnQiLCJob3N0Q3JlYXRlVGV4dCIsImhvc3RDcmVhdGVDb21tZW50IiwiaG9zdFNldFRleHQiLCJob3N0U2V0RWxlbWVudFRleHQiLCJob3N0UGFyZW50Tm9kZSIsImhvc3ROZXh0U2libGluZyIsImhvc3RTZXRTY29wZUlkIiwiaG9zdEluc2VydFN0YXRpY0NvbnRlbnQiLCJwYXRjaCIsIm4xIiwibjIiLCJjb250YWluZXIiLCJhbmNob3IiLCJwYXJlbnRDb21wb25lbnQiLCJzbG90U2NvcGVJZHMiLCJpc1NhbWVWTm9kZVR5cGUiLCJnZXROZXh0SG9zdE5vZGUiLCJ1bm1vdW50IiwiVGV4dCIsInByb2Nlc3NUZXh0IiwicHJvY2Vzc0NvbW1lbnROb2RlIiwiU3RhdGljIiwibW91bnRTdGF0aWNOb2RlIiwiRnJhZ21lbnQiLCJwcm9jZXNzRnJhZ21lbnQiLCJwcm9jZXNzRWxlbWVudCIsInByb2Nlc3NDb21wb25lbnQiLCJpbnRlcm5hbHMiLCJtb3ZlU3RhdGljTm9kZSIsIm5leHRTaWJsaW5nIiwicmVtb3ZlU3RhdGljTm9kZSIsIm1vdW50RWxlbWVudCIsImN1c3RvbUVsZW1lbnQiLCJwYXRjaEVsZW1lbnQiLCJ2bm9kZUhvb2siLCJ0cmFuc2l0aW9uIiwiZGlycyIsIm1vdW50Q2hpbGRyZW4iLCJyZXNvbHZlQ2hpbGRyZW5OYW1lc3BhY2UiLCJzZXRTY29wZUlkIiwiaW52b2tlVk5vZGVIb29rIiwibmVlZENhbGxUcmFuc2l0aW9uSG9va3MiLCJuZWVkVHJhbnNpdGlvbiIsInNjb3BlSWQiLCJzdWJUcmVlIiwiaXNTdXNwZW5zZSIsInBhcmVudFZOb2RlIiwiY2hpbGQiLCJjbG9uZUlmTW91bnRlZCIsImR5bmFtaWNDaGlsZHJlbiIsIm9sZFByb3BzIiwibmV3UHJvcHMiLCJ0b2dnbGVSZWN1cnNlIiwicGF0Y2hCbG9ja0NoaWxkcmVuIiwicGF0Y2hDaGlsZHJlbiIsInBhdGNoUHJvcHMiLCJvbGRDaGlsZHJlbiIsIm5ld0NoaWxkcmVuIiwiZmFsbGJhY2tDb250YWluZXIiLCJvbGRWTm9kZSIsIm5ld1ZOb2RlIiwiZnJhZ21lbnRTdGFydEFuY2hvciIsImZyYWdtZW50RW5kQW5jaG9yIiwiZnJhZ21lbnRTbG90U2NvcGVJZHMiLCJ0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuIiwibW91bnRDb21wb25lbnQiLCJ1cGRhdGVDb21wb25lbnQiLCJpbml0aWFsVk5vZGUiLCJjcmVhdGVDb21wb25lbnRJbnN0YW5jZSIsInNldHVwQ29tcG9uZW50Iiwic2V0dXBSZW5kZXJFZmZlY3QiLCJwbGFjZWhvbGRlciIsInVwZGF0ZUNvbXBvbmVudFByZVJlbmRlciIsImNvbXBvbmVudFVwZGF0ZUZuIiwiYnUiLCJ1Iiwibm9uSHlkcmF0ZWRBc3luY1Jvb3QiLCJsb2NhdGVOb25IeWRyYXRlZEFzeW5jUm9vdCIsIm9yaWdpbk5leHQiLCJuZXh0VHJlZSIsInByZXZUcmVlIiwiYm0iLCJpc0FzeW5jV3JhcHBlclZOb2RlIiwic2NvcGVkSW5pdGlhbFZOb2RlIiwidXBkYXRlIiwiYzEiLCJwcmV2U2hhcGVGbGFnIiwiYzIiLCJwYXRjaEtleWVkQ2hpbGRyZW4iLCJwYXRjaFVua2V5ZWRDaGlsZHJlbiIsInVubW91bnRDaGlsZHJlbiIsIm9sZExlbmd0aCIsImNvbW1vbkxlbmd0aCIsIm5leHRDaGlsZCIsInBhcmVudEFuY2hvciIsImwyIiwiZTEiLCJlMiIsIm5leHRQb3MiLCJzMSIsInMyIiwia2V5VG9OZXdJbmRleE1hcCIsImoiLCJwYXRjaGVkIiwidG9CZVBhdGNoZWQiLCJtb3ZlZCIsIm1heE5ld0luZGV4U29GYXIiLCJuZXdJbmRleFRvT2xkSW5kZXhNYXAiLCJwcmV2Q2hpbGQiLCJuZXdJbmRleCIsImluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlIiwiZ2V0U2VxdWVuY2UiLCJuZXh0SW5kZXgiLCJhbmNob3JWTm9kZSIsIm1vdmUiLCJtb3ZlVHlwZSIsImxlYXZlIiwiZGVsYXlMZWF2ZSIsImFmdGVyTGVhdmUiLCJyZW1vdmUyIiwicGVyZm9ybUxlYXZlIiwiZG9SZW1vdmUiLCJjYWNoZUluZGV4Iiwic2hvdWxkSW52b2tlRGlycyIsInNob3VsZEludm9rZVZub2RlSG9vayIsInVubW91bnRDb21wb25lbnQiLCJyZW1vdmVGcmFnbWVudCIsInBlcmZvcm1SZW1vdmUiLCJidW0iLCJ1bSIsImludmFsaWRhdGVNb3VudCIsInRlbGVwb3J0RW5kIiwiaXNGbHVzaGluZyIsImN1cnJlbnROYW1lc3BhY2UiLCJhbGxvd2VkIiwiY2gxIiwiY2gyIiwibGVuIiwiYXJySSIsInN1YkNvbXBvbmVudCIsInN1c3BlbnNlIiwiY3VycmVudEJsb2NrIiwib3BlbkJsb2NrIiwiZGlzYWJsZVRyYWNraW5nIiwiY2xvc2VCbG9jayIsImlzQmxvY2tUcmVlRW5hYmxlZCIsImluVk9uY2UiLCJzZXR1cEJsb2NrIiwiY3JlYXRlQmxvY2siLCJpc1ZOb2RlIiwibm9ybWFsaXplS2V5Iiwibm9ybWFsaXplUmVmIiwicmVmX2tleSIsInJlZl9mb3IiLCJjcmVhdGVCYXNlVk5vZGUiLCJpc0Jsb2NrTm9kZSIsIm5lZWRGdWxsQ2hpbGRyZW5Ob3JtYWxpemF0aW9uIiwibm9ybWFsaXplQ2hpbGRyZW4iLCJfY3JlYXRlVk5vZGUiLCJjbG9uZWQiLCJpc0NsYXNzQ29tcG9uZW50IiwiZ3VhcmRSZWFjdGl2ZVByb3BzIiwia2xhc3MiLCJzdHlsZSIsImV4dHJhUHJvcHMiLCJtZXJnZVJlZiIsImNsb25lVHJhbnNpdGlvbiIsIm1lcmdlZFByb3BzIiwibWVyZ2VQcm9wcyIsImNyZWF0ZVRleHRWTm9kZSIsInRleHQiLCJmbGFnIiwic2xvdCIsInNsb3RGbGFnIiwidG9NZXJnZSIsImluY29taW5nIiwiZW1wdHlBcHBDb250ZXh0IiwidWlkIiwiaW50ZXJuYWxTZXRDdXJyZW50SW5zdGFuY2UiLCJzZXRJblNTUlNldHVwU3RhdGUiLCJnIiwicmVnaXN0ZXJHbG9iYWxTZXR0ZXIiLCJzZXR0ZXJzIiwidW5zZXRDdXJyZW50SW5zdGFuY2UiLCJzZXR1cFJlc3VsdCIsInNldHVwU3RhdGVmdWxDb21wb25lbnQiLCJzZXR1cCIsInNldHVwQ29udGV4dCIsImNyZWF0ZVNldHVwQ29udGV4dCIsImlzQXN5bmNTZXR1cCIsInJlc29sdmVkUmVzdWx0IiwiaGFuZGxlU2V0dXBSZXN1bHQiLCJmaW5pc2hDb21wb25lbnRTZXR1cCIsInNraXBPcHRpb25zIiwiYXR0cnNQcm94eUhhbmRsZXJzIiwiY29tcHV0ZWQkMSIsInByb3BzT3JDaGlsZHJlbiIsInBvbGljeSIsInR0IiwidW5zYWZlVG9UcnVzdGVkSFRNTCIsInN2Z05TIiwibWF0aG1sTlMiLCJkb2MiLCJ0ZW1wbGF0ZUNvbnRhaW5lciIsIm5vZGVPcHMiLCJ0YWciLCJpcyIsIm5vZGUiLCJzZWxlY3RvciIsImNvbnRlbnQiLCJiZWZvcmUiLCJ0ZW1wbGF0ZSIsIndyYXBwZXIiLCJ2dGNLZXkiLCJwYXRjaENsYXNzIiwiaXNTVkciLCJ0cmFuc2l0aW9uQ2xhc3NlcyIsInZTaG93T3JpZ2luYWxEaXNwbGF5IiwidlNob3dIaWRkZW4iLCJDU1NfVkFSX1RFWFQiLCJkaXNwbGF5UkUiLCJwYXRjaFN0eWxlIiwiaXNDc3NTdHJpbmciLCJoYXNDb250cm9sbGVkRGlzcGxheSIsInByZXZTdHlsZSIsInNldFN0eWxlIiwiY3NzVmFyVGV4dCIsImltcG9ydGFudFJFIiwicHJlZml4ZWQiLCJhdXRvUHJlZml4IiwicHJlZml4ZXMiLCJwcmVmaXhDYWNoZSIsInJhd05hbWUiLCJ4bGlua05TIiwicGF0Y2hBdHRyIiwiaXNCb29sZWFuIiwicGF0Y2hET01Qcm9wIiwiYXR0ck5hbWUiLCJuZWVkUmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ2ZWlLZXkiLCJwYXRjaEV2ZW50IiwicHJldlZhbHVlIiwibmV4dFZhbHVlIiwiaW52b2tlcnMiLCJleGlzdGluZ0ludm9rZXIiLCJwYXJzZU5hbWUiLCJpbnZva2VyIiwiY3JlYXRlSW52b2tlciIsIm9wdGlvbnNNb2RpZmllclJFIiwiY2FjaGVkTm93IiwiZ2V0Tm93IiwiaW5pdGlhbFZhbHVlIiwicGF0Y2hTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJvcmlnaW5hbFN0b3AiLCJpc05hdGl2ZU9uIiwicGF0Y2hQcm9wIiwic2hvdWxkU2V0QXNQcm9wIiwiY2FtZWxpemUkMSIsInJlbmRlcmVyT3B0aW9ucyIsInJlbmRlcmVyIiwiZW5zdXJlUmVuZGVyZXIiLCJjcmVhdGVBcHAiLCJtb3VudCIsImNvbnRhaW5lck9yU2VsZWN0b3IiLCJub3JtYWxpemVDb250YWluZXIiLCJyZXNvbHZlUm9vdE5hbWVzcGFjZSIsIkJVSUxEIiwiTkFNRVNQQUNFIiwiX19kZWZQcm9wIiwiX19leHBvcnQiLCJhbGwiLCJCdWlsZCIsIlNWR19OUyIsIkhUTUxfTlMiLCJyZVdpcmVHZXR0ZXJTZXR0ZXIiLCJob3N0UmVmIiwiX2EiLCJjbXBNZXRhIiwibWVtYmVyTmFtZSIsIm1lbWJlckZsYWdzIiwib2dWYWx1ZSIsIm9nRGVzY3JpcHRvciIsImdldFByb3BlcnR5RGVzY3JpcHRvciIsImRlc2MiLCJnZXRIb3N0UmVmIiwicmVnaXN0ZXJIb3N0IiwiaG9zdEVsZW1lbnQiLCJCVUlMRDMiLCJpc01lbWJlckluRWxlbWVudCIsImVsbSIsImNvbnNvbGVFcnJvciIsInN0eWxlcyIsIm1vZGVSZXNvbHV0aW9uQ2hhaW4iLCJTTE9UX0ZCX0NTUyIsIlhMSU5LX05TIiwid2luIiwiSCIsInBsdCIsImgyIiwiZXZlbnROYW1lIiwibGlzdGVuZXIiLCJvcHRzIiwicHJvbWlzZVJlc29sdmUiLCJzdXBwb3J0c0NvbnN0cnVjdGFibGVTdHlsZXNoZWV0cyIsInN1cHBvcnRzTXV0YWJsZUFkb3B0ZWRTdHlsZVNoZWV0cyIsInF1ZXVlUGVuZGluZyIsInF1ZXVlRG9tUmVhZHMiLCJxdWV1ZURvbVdyaXRlcyIsInF1ZXVlVGFzayIsIndyaXRlIiwiY29uc3VtZSIsImkyIiwicmVhZFRhc2siLCJ3cml0ZVRhc2siLCJpc0RlZiIsImlzQ29tcGxleFR5cGUiLCJvIiwicXVlcnlOb25jZU1ldGFUYWdDb250ZW50IiwiX2IiLCJfYyIsImVzY2FwZVJlZ0V4cFNwZWNpYWxDaGFyYWN0ZXJzIiwicmVzdWx0X2V4cG9ydHMiLCJvayIsInVud3JhcCIsInVud3JhcEVyciIsImdsb2JhbFN0eWxlU2hlZXQiLCJjcmVhdGVTaGFkb3dSb290Iiwic2hhZG93Um9vdCIsInVwZGF0ZUZhbGxiYWNrU2xvdFZpc2liaWxpdHkiLCJjaGlsZE5vZGVzIiwiaW50ZXJuYWxDYWxsIiwiZ2V0SG9zdFNsb3ROb2RlcyIsInNsb3ROb2RlIiwiZ2V0U2xvdENoaWxkU2libGluZ3MiLCJnZXRTbG90TmFtZSIsImNoaWxkTm9kZSIsImdldFNsb3R0ZWRDaGlsZE5vZGVzIiwic2xvdHRlZE5vZGUiLCJob3N0TmFtZSIsInNsb3ROYW1lIiwic2xvdHRlZE5vZGVzIiwiaW5jbHVkZVNsb3QiLCJpc05vZGVMb2NhdGVkSW5TbG90Iiwibm9kZVRvUmVsb2NhdGUiLCJwYXRjaFNsb3ROb2RlIiwiYXNzaWduZWRGYWN0b3J5IiwiZWxlbWVudHNPbmx5IiwidG9SZXR1cm4iLCJjcmVhdGVUaW1lIiwiZm5OYW1lIiwidGFnTmFtZSIsInJvb3RBcHBsaWVkU3R5bGVzIiwicmVnaXN0ZXJTdHlsZSIsInNjb3BlSWQyIiwiYWxsb3dDUyIsImFkZFN0eWxlIiwic3R5bGVDb250YWluZXJOb2RlIiwibW9kZSIsImdldFNjb3BlSWQiLCJhcHBsaWVkU3R5bGVzIiwic3R5bGVFbG0iLCJub25jZSIsInByZWNvbm5lY3RMaW5rcyIsInJlZmVyZW5jZU5vZGUyIiwic3R5bGVzaGVldCIsImV4aXN0aW5nU3R5bGVDb250YWluZXIiLCJhdHRhY2hTdHlsZXMiLCJmbGFncyIsImVuZEF0dGFjaFN0eWxlcyIsImNtcCIsIm5vZGVOYW1lIiwidm5vZGVEYXRhIiwic2ltcGxlIiwibGFzdFNpbXBsZSIsInZOb2RlQ2hpbGRyZW4iLCJ3YWxrIiwiY2xhc3NEYXRhIiwiayIsInZkb21GblV0aWxzIiwiSG9zdCIsImlzSG9zdCIsImNvbnZlcnRUb1B1YmxpYyIsImNvbnZlcnRUb1ByaXZhdGUiLCJjcmVhdGVTdXBwb3J0c1J1bGVSZSIsInNhZmVTZWxlY3RvcjIiLCJjb21wdXRlTW9kZSIsInNldE1vZGUiLCJnZXRNb2RlIiwicGFyc2VQcm9wZXJ0eVZhbHVlIiwicHJvcFZhbHVlIiwiaXNGb3JtQXNzb2NpYXRlZCIsImdldEVsZW1lbnQiLCJjcmVhdGVFdmVudCIsImRldGFpbCIsImVtaXRFdmVudCIsImV2Iiwic2V0QWNjZXNzb3IiLCJpc1N2ZyIsImluaXRpYWxSZW5kZXIiLCJpc1Byb3AiLCJsbiIsImNsYXNzTGlzdCIsIm9sZENsYXNzZXMiLCJwYXJzZUNsYXNzTGlzdCIsIm5ld0NsYXNzZXMiLCJjYXB0dXJlIiwiQ0FQVFVSRV9FVkVOVF9TVUZGSVgiLCJDQVBUVVJFX0VWRU5UX1JFR0VYIiwiaXNDb21wbGV4IiwieGxpbmsiLCJwYXJzZUNsYXNzTGlzdFJlZ2V4IiwidXBkYXRlRWxlbWVudCIsIm9sZFZub2RlIiwibmV3Vm5vZGUiLCJpc1N2Z01vZGUyIiwiaXNJbml0aWFsUmVuZGVyIiwib2xkVm5vZGVBdHRycyIsIm5ld1Zub2RlQXR0cnMiLCJzb3J0ZWRBdHRyTmFtZXMiLCJhdHRyTmFtZXMiLCJhdHRyIiwiY29udGVudFJlZiIsImhvc3RUYWdOYW1lIiwidXNlTmF0aXZlU2hhZG93RG9tIiwiY2hlY2tTbG90RmFsbGJhY2tWaXNpYmlsaXR5IiwiY2hlY2tTbG90UmVsb2NhdGUiLCJpc1N2Z01vZGUiLCJjcmVhdGVFbG0iLCJvbGRQYXJlbnRWTm9kZSIsIm5ld1BhcmVudFZOb2RlIiwiY2hpbGRJbmRleCIsIm5ld1ZOb2RlMiIsIkJVSUxEMjAiLCJwdXRCYWNrSW5PcmlnaW5hbExvY2F0aW9uIiwiYWRkUmVtb3ZlU2xvdFNjb3BlZENsYXNzIiwicGFyZW50RWxtIiwicmVjdXJzaXZlIiwib2xkU2xvdENoaWxkTm9kZXMiLCJpbnNlcnRCZWZvcmUiLCJyZWZlcmVuY2VOb2RlIiwiYWRkVm5vZGVzIiwidm5vZGVzIiwic3RhcnRJZHgiLCJlbmRJZHgiLCJjb250YWluZXJFbG0iLCJyZW1vdmVWbm9kZXMiLCJudWxsaWZ5Vk5vZGVSZWZzIiwidXBkYXRlQ2hpbGRyZW4iLCJvbGRDaCIsIm5ld0NoIiwib2xkU3RhcnRJZHgiLCJuZXdTdGFydElkeCIsImlkeEluT2xkIiwib2xkRW5kSWR4Iiwib2xkU3RhcnRWbm9kZSIsIm9sZEVuZFZub2RlIiwibmV3RW5kSWR4IiwibmV3U3RhcnRWbm9kZSIsIm5ld0VuZFZub2RlIiwiZWxtVG9Nb3ZlIiwiaXNTYW1lVm5vZGUiLCJsZWZ0Vk5vZGUiLCJyaWdodFZOb2RlIiwiZGVmYXVsdEhvbGRlciIsInJlbG9jYXRlTm9kZXMiLCJtYXJrU2xvdENvbnRlbnRGb3JSZWxvY2F0aW9uIiwiaG9zdENvbnRlbnROb2RlcyIsInJlbG9jYXRlTm9kZURhdGEiLCJyZWxvY2F0ZU5vZGUiLCJ2Tm9kZSIsIm5ld05vZGUiLCJyZWZlcmVuY2UiLCJuZXdQYXJlbnQiLCJvbGRQYXJlbnQiLCJzY29wZU5hbWUiLCJmb3VuZCIsInJlbmRlclZkb20iLCJyZW5kZXJGblJlc3VsdHMiLCJpc0luaXRpYWxMb2FkIiwiX2QiLCJfZSIsImhvc3RFbG0iLCJyb290Vm5vZGUiLCJwcm9wTmFtZSIsImF0dHJpYnV0ZSIsInJlbG9jYXRlRGF0YSIsIm9yZ0xvY2F0aW9uTm9kZSIsInNsb3RSZWZOb2RlIiwicGFyZW50Tm9kZVJlZiIsImluc2VydEJlZm9yZU5vZGUiLCJyZWZOb2RlIiwiYXR0YWNoVG9BbmNlc3RvciIsImFuY2VzdG9yQ29tcG9uZW50Iiwic2NoZWR1bGVVcGRhdGUiLCJkaXNwYXRjaCIsImRpc3BhdGNoSG9va3MiLCJlbmRTY2hlZHVsZSIsIm1heWJlUHJvbWlzZSIsInNhZmVDYWxsIiwiZW5xdWV1ZSIsImlzUHJvbWlzZXkiLCJlcnIyIiwiZW5kVXBkYXRlIiwicmMiLCJlbmRSZW5kZXIiLCJjYWxsUmVuZGVyIiwiY2hpbGRyZW5Qcm9taXNlcyIsInBvc3RVcGRhdGUiLCJwb3N0VXBkYXRlQ29tcG9uZW50IiwicmVuZGVyaW5nUmVmIiwiQlVJTEQyMSIsImVuZFBvc3RVcGRhdGUiLCJhZGRIeWRyYXRlZEZsYWciLCJhcHBEaWRMb2FkIiwiZm9yY2VVcGRhdGUiLCJpc0Nvbm5lY3RlZCIsIndobyIsImdldFZhbHVlIiwic2V0VmFsdWUiLCJCVUlMRDIyIiwib2xkVmFsIiwiYXJlQm90aE5hTiIsImF0dHJWYWwiLCJtZXRob2ROYW1lIiwid2F0Y2hNZXRob2RzIiwid2F0Y2hNZXRob2ROYW1lIiwicHJveHlDb21wb25lbnQiLCJDc3RyIiwicHJvdG90eXBlIiwiQlVJTEQyMyIsIm1lbWJlcnMiLCJvcmlnR2V0dGVyIiwib3JpZ1NldHRlciIsImF0dHJOYW1lVG9Qcm9wTmFtZSIsIl9hMiIsInNldFZhbCIsImRlc2VyaWFsaXplVmFsIiwiZmxhZ3MyIiwiZW50cnkiLCJjYWxsYmFja05hbWUiLCJwcm9wRGVzYyIsIl8iLCJpbml0aWFsaXplQ29tcG9uZW50IiwiaG1yVmVyc2lvbklkIiwiY21wVGFnIiwiZW5kUmVnaXN0ZXJTdHlsZXMiLCJzY2hlZHVsZSIsImZpcmVDb25uZWN0ZWRDYWxsYmFjayIsImNvbm5lY3RlZENhbGxiYWNrIiwiZW5kQ29ubmVjdGVkIiwiYWRkSG9zdEV2ZW50TGlzdGVuZXJzIiwic2V0Q29udGVudFJlZmVyZW5jZSIsImNvbnRlbnRSZWZFbG0iLCJkaXNjb25uZWN0ZWRDYWxsYmFjayIsInJtTGlzdGVuZXIiLCJwcm94eUN1c3RvbUVsZW1lbnQiLCJjb21wYWN0TWV0YSIsIm9yaWdpbmFsQ29ubmVjdGVkQ2FsbGJhY2siLCJvcmlnaW5hbERpc2Nvbm5lY3RlZENhbGxiYWNrIiwibGlzdGVuZXJzIiwiYXR0YWNoUGFyZW50TGlzdGVuZXJzIiwiZ2V0SG9zdExpc3RlbmVyVGFyZ2V0IiwiaG9zdExpc3RlbmVyUHJveHkiLCJob3N0TGlzdGVuZXJPcHRzIiwiQlVJTEQyOSIsIkNvbmZpZyIsImNvbmZpZ09iaiIsImZhbGxiYWNrIiwiY29uZmlnIiwiY29uZmlnRnJvbVNlc3Npb24iLCJjb25maWdTdHIiLCJJT05JQ19TRVNTSU9OX0tFWSIsInNhdmVDb25maWciLCJjb25maWdGcm9tVVJMIiwic3RhcnRzV2l0aCIsIklPTklDX1BSRUZJWCIsImlucHV0Iiwic2VhcmNoIiwiTG9nTGV2ZWwiLCJwcmludElvbldhcm5pbmciLCJtZXNzYWdlIiwicGFyYW1zIiwibG9nTGV2ZWwiLCJwcmludElvbkVycm9yIiwicHJpbnRSZXF1aXJlZEVsZW1lbnRFcnJvciIsInRhcmdldFNlbGVjdG9ycyIsImNvbXBvbmVudE9uUmVhZHkiLCJyZXNvbHZlZEVsIiwicmFmIiwiaGFzTGF6eUJ1aWxkIiwic3RlbmNpbEVsIiwiaW5oZXJpdEF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzIiwiYXR0cmlidXRlT2JqZWN0IiwiYXJpYUF0dHJpYnV0ZXMiLCJpbmhlcml0QXJpYUF0dHJpYnV0ZXMiLCJpZ25vcmVMaXN0IiwiY2xhbXAiLCJtaW4iLCJtYXgiLCJwb2ludGVyQ29vcmQiLCJjaGFuZ2VkVG91Y2hlcyIsInRvdWNoIiwic2hhbGxvd0VxdWFsU3RyaW5nTWFwIiwibWFwMSIsIm1hcDIiLCJrZXlzMSIsImsxIiwiZ2V0UGxhdGZvcm1zIiwic2V0dXBQbGF0Zm9ybXMiLCJpc1BsYXRmb3JtIiwid2luT3JQbGF0Zm9ybSIsInBsYXRmb3JtIiwicGxhdGZvcm1zIiwiZGV0ZWN0UGxhdGZvcm1zIiwiY3VzdG9tUGxhdGZvcm1NZXRob2RzIiwiUExBVEZPUk1TX01BUCIsImN1c3RvbU1ldGhvZCIsImlzTW9iaWxlV2ViIiwiaXNNb2JpbGUiLCJpc0h5YnJpZCIsImlzSXBhZCIsInRlc3RVc2VyQWdlbnQiLCJpc0lwaG9uZSIsImlzSU9TIiwiaXNBbmRyb2lkIiwiaXNBbmRyb2lkVGFibGV0IiwiaXNQaGFibGV0Iiwid2lkdGgiLCJoZWlnaHQiLCJzbWFsbGVzdCIsImxhcmdlc3QiLCJpc1RhYmxldCIsIm1hdGNoTWVkaWEiLCJpc0Rlc2t0b3AiLCJpc0NvcmRvdmEiLCJpc0NhcGFjaXRvck5hdGl2ZSIsImNhcGFjaXRvciIsImlzRWxlY3Ryb24iLCJpc1BXQSIsImV4cHIiLCJxdWVyeSIsImRlZmF1bHRNb2RlIiwiZ2V0SW9uTW9kZSIsImluaXRpYWxpemUiLCJ1c2VyQ29uZmlnIiwiSW9uaWMiLCJpc0lvbmljRWxlbWVudCIsImlzQWxsb3dlZElvbmljTW9kZVZhbHVlIiwiZWxtTW9kZSIsImhvc3RDb250ZXh0IiwiY3JlYXRlQ29sb3JDbGFzc2VzIiwiY29sb3IiLCJjc3NDbGFzc01hcCIsImlzUlRMIiwiaG9zdEVsIiwiY29udGVudENzcyIsIkNvbnRlbnQiLCJIVE1MRWxlbWVudCIsImNsb3Nlc3RUYWJzIiwidGFic0VsZW1lbnQiLCJ0YWJzTG9hZENhbGxiYWNrIiwiZm9yY2VPdmVyc2Nyb2xsIiwicGFnZSIsImdldFBhZ2VFbGVtZW50IiwidG9wIiwiYm90dG9tIiwidGltZVN0YW1wIiwic2hvdWxkU3RhcnQiLCJ0cyIsInVwZGF0ZVNjcm9sbERldGFpbCIsInJlc29sdmUiLCJkdXJhdGlvbiIsInNjcm9sbEVsIiwieSIsInN0YXJ0VGltZSIsInByb21pc2UiLCJmcm9tWSIsImZyb21YIiwiZGVsdGFZIiwiZGVsdGFYIiwic3RlcCIsImxpbmVhclRpbWUiLCJlYXNlZFQiLCJmaXhlZFNsb3RQbGFjZW1lbnQiLCJpbmhlcml0ZWRBdHRyaWJ1dGVzIiwiaXNNYWluQ29udGVudCIsInNjcm9sbFgiLCJzY3JvbGxZIiwicnRsIiwidHJhbnNpdGlvblNoYWRvdyIsImdldFBhcmVudEVsZW1lbnQiLCJ0YWJzIiwidGltZXN0YW1wIiwicHJldlgiLCJwcmV2WSIsInByZXZUIiwiY3VycmVudFgiLCJjdXJyZW50WSIsInRpbWVEZWx0YSIsInZlbG9jaXR5WCIsInZlbG9jaXR5WSIsImRlZmluZUN1c3RvbUVsZW1lbnQiLCJkZWZpbmVDdXN0b21FbGVtZW50JDEiLCJzaG91bGRVc2VDbG9zZVdhdGNoZXIiLCJibG9ja0hhcmR3YXJlQmFja0J1dHRvbiIsInN0YXJ0SGFyZHdhcmVCYWNrQnV0dG9uIiwiYnVzeSIsImJhY2tCdXR0b25DYWxsYmFjayIsImhhbmRsZXJzIiwicHJpb3JpdHkiLCJleGVjdXRlQWN0aW9uIiwiaGFuZGxlclJlZ2lzdGVyIiwicHJvY2Vzc0hhbmRsZXJzIiwic2VsZWN0ZWRIYW5kbGVyIiwid2F0Y2hlciIsImNvbmZpZ3VyZVdhdGNoZXIiLCJPVkVSTEFZX0JBQ0tfQlVUVE9OX1BSSU9SSVRZIiwiTUVOVV9CQUNLX0JVVFRPTl9QUklPUklUWSIsImF0dGFjaENvbXBvbmVudCIsImRlbGVnYXRlIiwiY3NzQ2xhc3NlcyIsImNvbXBvbmVudFByb3BzIiwiaW5saW5lIiwiZGV0YWNoQ29tcG9uZW50IiwiZWxlbWVudCIsImNyZWF0ZUxvY2tDb250cm9sbGVyIiwid2FpdFByb21pc2UiLCJMSUZFQ1lDTEVfV0lMTF9FTlRFUiIsIkxJRkVDWUNMRV9ESURfRU5URVIiLCJMSUZFQ1lDTEVfV0lMTF9MRUFWRSIsIkxJRkVDWUNMRV9ESURfTEVBVkUiLCJtb3ZlRm9jdXMiLCJpc1Zpc2libGUiLCJjcmVhdGVGb2N1c0NvbnRyb2xsZXIiLCJyZWZlcmVuY2VFbCIsImFjdGl2ZUVsIiwiTEFTVF9GT0NVUyIsImZvY3VzTWFuYWdlclByaW9yaXRpZXMiLCJsYXN0Rm9jdXMiLCJoZWFkaW5nT25lIiwiaGVhZGVyIiwiaW9zVHJhbnNpdGlvbkFuaW1hdGlvbiIsIl9fdml0ZVByZWxvYWQiLCJtZFRyYW5zaXRpb25BbmltYXRpb24iLCJmb2N1c0NvbnRyb2xsZXIiLCJyZWplY3QiLCJ0cmFuc2l0aW9uaW5nSW5hY3RpdmVIZWFkZXIiLCJnZXRJb3NJb25IZWFkZXIiLCJiZWZvcmVUcmFuc2l0aW9uIiwicnVuVHJhbnNpdGlvbiIsImFmdGVyVHJhbnNpdGlvbiIsInNldEhlYWRlclRyYW5zaXRpb25DbGFzcyIsImVudGVyaW5nRWwiLCJsZWF2aW5nRWwiLCJzZXRaSW5kZXgiLCJzZXRQYWdlSGlkZGVuIiwiYW5pbWF0aW9uQnVpbGRlciIsImdldEFuaW1hdGlvbkJ1aWxkZXIiLCJhbmltYXRpb24iLCJub0FuaW1hdGlvbiIsIndhaXRGb3JSZWFkeSIsInRyYW5zIiwiZmlyZVdpbGxFdmVudHMiLCJkaWRDb21wbGV0ZSIsInBsYXlUcmFuc2l0aW9uIiwiZmlyZURpZEV2ZW50cyIsImZvY3VzTWFuYWdlckVuYWJsZWQiLCJkZWZhdWx0RGVlcCIsImRlZXBSZWFkeSIsIm5vdGlmeVZpZXdSZWFkeSIsInZpZXdJc1JlYWR5IiwicHJvZ3Jlc3NDYWxsYmFjayIsImN1cnJlbnRTdGVwIiwiaGlkZGVuIiwiZGlyZWN0aW9uIiwiaXNUcmFuc2l0aW9uaW5nIiwidHJhbnNpdGlvbkNsYXNzIiwiZ2V0SW9uUGFnZUVsZW1lbnQiLCJpb25QYWdlIiwiSU9OX0NPTlRFTlRfVEFHX05BTUUiLCJJT05fQ09OVEVOVF9FTEVNRU5UX1NFTEVDVE9SIiwiSU9OX0NPTlRFTlRfQ0xBU1NfU0VMRUNUT1IiLCJJT05fQ09OVEVOVF9TRUxFQ1RPUiIsImlzSW9uQ29udGVudCIsImdldFNjcm9sbEVsZW1lbnQiLCJmaW5kSW9uQ29udGVudCIsImN1c3RvbUNvbnRlbnRIb3N0IiwiZmluZENsb3Nlc3RJb25Db250ZW50Iiwic2Nyb2xsVG9Ub3AiLCJkdXJhdGlvbk1zIiwic2Nyb2xsQnlQb2ludCIsInByaW50SW9uQ29udGVudEVycm9yTXNnIiwiVFJBTlNJVElPTiIsIlJPTEVfTk9ORSIsIlJPTEVfQkFOTkVSIiwiY2xvbmVFbGVtZW50IiwiZ2V0Q2FjaGVkRWwiLCJjbG9uZWRFbCIsImNyZWF0ZUhlYWRlckluZGV4IiwiaGVhZGVyRWwiLCJ0b29sYmFycyIsInRvb2xiYXIiLCJpb25UaXRsZUVsIiwiaGFuZGxlQ29udGVudFNjcm9sbCIsInNjcm9sbEhlYWRlckluZGV4IiwiY29udGVudEVsIiwic2Nyb2xsVG9wIiwic2NhbGUiLCJzY2FsZUxhcmdlVGl0bGVzIiwic2V0VG9vbGJhckJhY2tncm91bmRPcGFjaXR5Iiwib3BhY2l0eSIsImhhbmRsZVRvb2xiYXJCb3JkZXJJbnRlcnNlY3Rpb24iLCJtYWluSGVhZGVySW5kZXgiLCJoYW5kbGVUb29sYmFySW50ZXJzZWN0aW9uIiwiaW50ZXJzZWN0aW9uIiwiaW50ZXJzZWN0aW9uQXJlYSIsInJvb3RBcmVhIiwiaXNQYWdlSGlkZGVuIiwibGVmdERpZmYiLCJyaWdodERpZmYiLCJpc1BhZ2VUcmFuc2l0aW9uaW5nIiwic2V0SGVhZGVyQWN0aXZlIiwiaGVhZGVySW5kZXgiLCJhY3RpdmUiLCJpb25UaXRsZXMiLCJpb25UaXRsZSIsInRpdGxlRGl2IiwiaGFuZGxlSGVhZGVyRmFkZSIsImJhc2VFbCIsImNvbmRlbnNlSGVhZGVyIiwiYmFzZUVsSGVpZ2h0IiwiZmFkZVN0YXJ0IiwiZGlzdGFuY2VUb1N0YXJ0IiwiZ2V0Um9sZVR5cGUiLCJpc0luc2lkZU1lbnUiLCJpc0NvbmRlbnNlZCIsImhlYWRlcklvc0NzcyIsImhlYWRlck1kQ3NzIiwiSGVhZGVyIiwiY29sbGFwc2UiLCJoYXNDb25kZW5zZSIsImhhc0ZhZGUiLCJwYWdlRWwiLCJ0aXRsZSIsImhlYWRlcnMiLCJ0b29sYmFySW50ZXJzZWN0aW9uIiwidHJhbnNsdWNlbnQiLCJyb2xlVHlwZSIsImdldFRpbWVHaXZlblByb2dyZXNzaW9uIiwicDAiLCJwMSIsInAyIiwicDMiLCJwcm9ncmVzc2lvbiIsInNvbHZlQ3ViaWNCZXppZXIiLCJ0VmFsdWUiLCJzb2x2ZUN1YmljUGFyYW1ldHJpY0VxdWF0aW9uIiwidCIsInBhcnRBIiwicGFydEIiLCJwYXJ0QyIsInJlZlBvaW50Iiwic29sdmVDdWJpY0VxdWF0aW9uIiwic29sdmVRdWFkcmF0aWNFcXVhdGlvbiIsImRpc2NyaW1pbmFudCIsImQiLCJxIiwicGhpIiwidGl0bGVJb3NDc3MiLCJ0aXRsZU1kQ3NzIiwiVG9vbGJhclRpdGxlIiwic2l6ZSIsInRvb2xiYXJJb3NDc3MiLCJ0b29sYmFyTWRDc3MiLCJUb29sYmFyIiwiYnV0dG9ucyIsImZpcnN0QnV0dG9ucyIsImJ1dHRvbiIsImJ1dHRvbnNSZXZlcnNlZCIsImxhc3RCdXR0b25zIiwidXBkYXRlZFN0eWxlcyIsIm5ld1N0eWxlcyIsImNoaWxkU3R5bGVzIiwiaGFzU3R5bGVDaGFuZ2UiLCJjaGlsZEtleSIsInJvdXRlck91dGxldENzcyIsIlJvdXRlck91dGxldCIsIm9uU3RhcnQiLCJjcmVhdGVTd2lwZUJhY2tHZXN0dXJlIiwic2hvdWxkQ29tcGxldGUiLCJkdXIiLCJuZXdTdGVwVmFsdWUiLCJ1bmxvY2siLCJjaGFuZ2VkIiwiYW5pbWF0ZWQiLCJhbmkiLCJpc0Jyb3dzZXIiLCJpc1JvdXRlQ29tcG9uZW50IiwiaXNFU01vZHVsZSIsImFzc2lnbiIsImFwcGx5VG9QYXJhbXMiLCJuZXdQYXJhbXMiLCJub29wIiwiZGVmYXVsdHMiLCJwYXJ0aWFsT3B0aW9ucyIsIkhBU0hfUkUiLCJBTVBFUlNBTkRfUkUiLCJTTEFTSF9SRSIsIkVRVUFMX1JFIiwiSU1fUkUiLCJQTFVTX1JFIiwiRU5DX0JSQUNLRVRfT1BFTl9SRSIsIkVOQ19CUkFDS0VUX0NMT1NFX1JFIiwiRU5DX0NBUkVUX1JFIiwiRU5DX0JBQ0tUSUNLX1JFIiwiRU5DX0NVUkxZX09QRU5fUkUiLCJFTkNfUElQRV9SRSIsIkVOQ19DVVJMWV9DTE9TRV9SRSIsIkVOQ19TUEFDRV9SRSIsImNvbW1vbkVuY29kZSIsImVuY29kZUhhc2giLCJlbmNvZGVRdWVyeVZhbHVlIiwiZW5jb2RlUXVlcnlLZXkiLCJlbmNvZGVQYXRoIiwiZW5jb2RlUGFyYW0iLCJkZWNvZGUiLCJUUkFJTElOR19TTEFTSF9SRSIsInJlbW92ZVRyYWlsaW5nU2xhc2giLCJwYXJzZVVSTCIsInBhcnNlUXVlcnkkMSIsImxvY2F0aW9uIiwiY3VycmVudExvY2F0aW9uIiwic2VhcmNoU3RyaW5nIiwiaGFzaCIsImhhc2hQb3MiLCJzZWFyY2hQb3MiLCJyZXNvbHZlUmVsYXRpdmVQYXRoIiwic3RyaW5naWZ5VVJMIiwic3RyaW5naWZ5UXVlcnkkMSIsInN0cmlwQmFzZSIsInBhdGhuYW1lIiwiaXNTYW1lUm91dGVMb2NhdGlvbiIsImFMYXN0SW5kZXgiLCJiTGFzdEluZGV4IiwiaXNTYW1lUm91dGVSZWNvcmQiLCJpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zIiwiaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtc1ZhbHVlIiwiaXNFcXVpdmFsZW50QXJyYXkiLCJmcm9tU2VnbWVudHMiLCJ0b1NlZ21lbnRzIiwibGFzdFRvU2VnbWVudCIsInBvc2l0aW9uIiwidG9Qb3NpdGlvbiIsInNlZ21lbnQiLCJTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEIiwiTmF2aWdhdGlvblR5cGUiLCJOYXZpZ2F0aW9uVHlwZSQxIiwiTmF2aWdhdGlvbkRpcmVjdGlvbiIsIk5hdmlnYXRpb25EaXJlY3Rpb24kMSIsIm5vcm1hbGl6ZUJhc2UiLCJCRUZPUkVfSEFTSF9SRSIsImNyZWF0ZUhyZWYiLCJnZXRFbGVtZW50UG9zaXRpb24iLCJvZmZzZXQiLCJkb2NSZWN0IiwiZWxSZWN0IiwiY29tcHV0ZVNjcm9sbFBvc2l0aW9uIiwic2Nyb2xsVG9Qb3NpdGlvbiIsInNjcm9sbFRvT3B0aW9ucyIsInBvc2l0aW9uRWwiLCJpc0lkU2VsZWN0b3IiLCJnZXRTY3JvbGxLZXkiLCJkZWx0YSIsInNjcm9sbFBvc2l0aW9ucyIsInNhdmVTY3JvbGxQb3NpdGlvbiIsInNjcm9sbFBvc2l0aW9uIiwiZ2V0U2F2ZWRTY3JvbGxQb3NpdGlvbiIsInNjcm9sbCIsImlzUm91dGVMb2NhdGlvbiIsInJvdXRlIiwiaXNSb3V0ZU5hbWUiLCJFcnJvclR5cGVzIiwiRXJyb3JUeXBlcyQxIiwiTmF2aWdhdGlvbkZhaWx1cmVTeW1ib2wiLCJjcmVhdGVSb3V0ZXJFcnJvciIsImlzTmF2aWdhdGlvbkZhaWx1cmUiLCJwcm9wZXJ0aWVzVG9Mb2ciLCJzdHJpbmdpZnlSb3V0ZSIsInBhcnNlUXVlcnkiLCJzZWFyY2hQYXJhbXMiLCJzZWFyY2hQYXJhbSIsImVxUG9zIiwiY3VycmVudFZhbHVlIiwic3RyaW5naWZ5UXVlcnkiLCJ2YWx1ZSQxIiwibm9ybWFsaXplUXVlcnkiLCJub3JtYWxpemVkUXVlcnkiLCJtYXRjaGVkUm91dGVLZXkiLCJ2aWV3RGVwdGhLZXkiLCJyb3V0ZXJLZXkiLCJyb3V0ZUxvY2F0aW9uS2V5Iiwicm91dGVyVmlld0xvY2F0aW9uS2V5IiwidXNlQ2FsbGJhY2tzIiwiYWRkIiwiZ3VhcmRUb1Byb21pc2VGbiIsImd1YXJkIiwicmVjb3JkIiwicnVuV2l0aENvbnRleHQiLCJlbnRlckNhbGxiYWNrQXJyYXkiLCJ2YWxpZCIsImd1YXJkUmV0dXJuIiwiZ3VhcmRDYWxsIiwiZXh0cmFjdENvbXBvbmVudHNHdWFyZHMiLCJtYXRjaGVkIiwiZ3VhcmRUeXBlIiwiZ3VhcmRzIiwicmF3Q29tcG9uZW50IiwiY29tcG9uZW50UHJvbWlzZSIsInJlc29sdmVkQ29tcG9uZW50IiwiZXh0cmFjdENoYW5naW5nUmVjb3JkcyIsImxlYXZpbmdSZWNvcmRzIiwidXBkYXRpbmdSZWNvcmRzIiwiZW50ZXJpbmdSZWNvcmRzIiwicmVjb3JkRnJvbSIsInJlY29yZFRvIiwiY3JlYXRlQmFzZUxvY2F0aW9uIiwiY3JlYXRlQ3VycmVudExvY2F0aW9uIiwibG9jYXRpb24kMSIsInNsaWNlUG9zIiwicGF0aEZyb21IYXNoIiwidXNlSGlzdG9yeUxpc3RlbmVycyIsImhpc3RvcnlTdGF0ZSIsInJlcGxhY2UiLCJ0ZWFyZG93bnMiLCJwYXVzZVN0YXRlIiwicG9wU3RhdGVIYW5kbGVyIiwiZnJvbVN0YXRlIiwicGF1c2VMaXN0ZW5lcnMiLCJsaXN0ZW4iLCJ0ZWFyZG93biIsImJlZm9yZVVubG9hZExpc3RlbmVyIiwiaGlzdG9yeSQxIiwiZGVzdHJveSIsImJ1aWxkU3RhdGUiLCJiYWNrIiwiZm9yd2FyZCIsInJlcGxhY2VkIiwiY29tcHV0ZVNjcm9sbCIsInVzZUhpc3RvcnlTdGF0ZU5hdmlnYXRpb24iLCJjaGFuZ2VMb2NhdGlvbiIsInJlcGxhY2UkMSIsImhhc2hJbmRleCIsInVybCIsInB1c2giLCJjdXJyZW50U3RhdGUiLCJjcmVhdGVXZWJIaXN0b3J5IiwiaGlzdG9yeU5hdmlnYXRpb24iLCJoaXN0b3J5TGlzdGVuZXJzIiwiZ28iLCJ0cmlnZ2VyTGlzdGVuZXJzIiwicm91dGVySGlzdG9yeSIsIlRva2VuVHlwZSIsIlRva2VuVHlwZSQxIiwiVG9rZW5pemVyU3RhdGUiLCJUb2tlbml6ZXJTdGF0ZSQxIiwiUk9PVF9UT0tFTiIsIlZBTElEX1BBUkFNX1JFIiwidG9rZW5pemVQYXRoIiwiY3Jhc2giLCJidWZmZXIiLCJwcmV2aW91c1N0YXRlIiwidG9rZW5zIiwiZmluYWxpemVTZWdtZW50IiwiY2hhciIsImN1c3RvbVJlIiwiY29uc3VtZUJ1ZmZlciIsImFkZENoYXJUb0J1ZmZlciIsIkJBU0VfUEFSQU1fUEFUVEVSTiIsIkJBU0VfUEFUSF9QQVJTRVJfT1BUSU9OUyIsIlBhdGhTY29yZSIsIlBhdGhTY29yZSQxIiwiUkVHRVhfQ0hBUlNfUkUiLCJ0b2tlbnNUb1BhcnNlciIsInNjb3JlIiwicGF0dGVybiIsInNlZ21lbnRTY29yZXMiLCJ0b2tlbkluZGV4IiwidG9rZW4iLCJzdWJTZWdtZW50U2NvcmUiLCJyZXBlYXRhYmxlIiwib3B0aW9uYWwiLCJyZWdleHAiLCJyZSQxIiwic3ViUGF0dGVybiIsInJlIiwicGFyc2UiLCJtYXRjaCIsInN0cmluZ2lmeSIsImF2b2lkRHVwbGljYXRlZFNsYXNoIiwicGFyYW0iLCJjb21wYXJlU2NvcmVBcnJheSIsImRpZmYiLCJjb21wYXJlUGF0aFBhcnNlclNjb3JlIiwiYVNjb3JlIiwiYlNjb3JlIiwiaXNMYXN0U2NvcmVOZWdhdGl2ZSIsIlBBVEhfUEFSU0VSX09QVElPTlNfREVGQVVMVFMiLCJjcmVhdGVSb3V0ZVJlY29yZE1hdGNoZXIiLCJwYXJzZXIiLCJtYXRjaGVyIiwiY3JlYXRlUm91dGVyTWF0Y2hlciIsInJvdXRlcyIsImdsb2JhbE9wdGlvbnMiLCJtYXRjaGVycyIsIm1hdGNoZXJNYXAiLCJnZXRSZWNvcmRNYXRjaGVyIiwiYWRkUm91dGUiLCJvcmlnaW5hbFJlY29yZCIsImlzUm9vdEFkZCIsIm1haW5Ob3JtYWxpemVkUmVjb3JkIiwibm9ybWFsaXplUm91dGVSZWNvcmQiLCJub3JtYWxpemVkUmVjb3JkcyIsImFsaWFzZXMiLCJhbGlhcyIsIm9yaWdpbmFsTWF0Y2hlciIsIm5vcm1hbGl6ZWRSZWNvcmQiLCJwYXJlbnRQYXRoIiwiY29ubmVjdGluZ1NsYXNoIiwiaXNBbGlhc1JlY29yZCIsInJlbW92ZVJvdXRlIiwiaXNNYXRjaGFibGUiLCJpbnNlcnRNYXRjaGVyIiwibWF0Y2hlclJlZiIsImdldFJvdXRlcyIsInBpY2tQYXJhbXMiLCJwYXJlbnRNYXRjaGVyIiwibWVyZ2VNZXRhRmllbGRzIiwiY2xlYXJSb3V0ZXMiLCJub3JtYWxpemVSZWNvcmRQcm9wcyIsInByb3BzT2JqZWN0IiwibWV0YSIsImxvd2VyIiwidXBwZXIiLCJtaWQiLCJpbnNlcnRpb25BbmNlc3RvciIsImdldEluc2VydGlvbkFuY2VzdG9yIiwiYW5jZXN0b3IiLCJ1c2VMaW5rIiwicm91dGVyIiwiY3VycmVudFJvdXRlIiwiYWN0aXZlUmVjb3JkSW5kZXgiLCJsZW5ndGgiLCJyb3V0ZU1hdGNoZWQiLCJjdXJyZW50TWF0Y2hlZCIsInBhcmVudFJlY29yZFBhdGgiLCJnZXRPcmlnaW5hbFBhdGgiLCJpc0FjdGl2ZSIsImluY2x1ZGVzUGFyYW1zIiwiaXNFeGFjdEFjdGl2ZSIsIm5hdmlnYXRlIiwiZ3VhcmRFdmVudCIsInByZWZlclNpbmdsZVZOb2RlIiwiUm91dGVyTGlua0ltcGwiLCJlbENsYXNzIiwiZ2V0TGlua0NsYXNzIiwiUm91dGVyTGluayIsIm91dGVyIiwiaW5uZXIiLCJpbm5lclZhbHVlIiwib3V0ZXJWYWx1ZSIsInByb3BDbGFzcyIsImdsb2JhbENsYXNzIiwiZGVmYXVsdENsYXNzIiwiUm91dGVyVmlld0ltcGwiLCJpbmplY3RlZFJvdXRlIiwicm91dGVUb0Rpc3BsYXkiLCJpbmplY3RlZERlcHRoIiwiaW5pdGlhbERlcHRoIiwibWF0Y2hlZFJvdXRlIiwibWF0Y2hlZFJvdXRlUmVmIiwidmlld1JlZiIsIm9sZEluc3RhbmNlIiwib2xkTmFtZSIsImN1cnJlbnROYW1lIiwiVmlld0NvbXBvbmVudCIsInJvdXRlUHJvcHNPcHRpb24iLCJyb3V0ZVByb3BzIiwic2xvdENvbnRlbnQiLCJSb3V0ZXJWaWV3IiwiY3JlYXRlUm91dGVyIiwiYmVmb3JlR3VhcmRzIiwiYmVmb3JlUmVzb2x2ZUd1YXJkcyIsImFmdGVyR3VhcmRzIiwicGVuZGluZ0xvY2F0aW9uIiwibm9ybWFsaXplUGFyYW1zIiwicGFyYW1WYWx1ZSIsImVuY29kZVBhcmFtcyIsImRlY29kZVBhcmFtcyIsInBhcmVudE9yUm91dGUiLCJyZWNvcmRNYXRjaGVyIiwicm91dGVNYXRjaGVyIiwiaGFzUm91dGUiLCJyYXdMb2NhdGlvbiIsImxvY2F0aW9uTm9ybWFsaXplZCIsIm1hdGNoZWRSb3V0ZSQxIiwiaHJlZiQxIiwibWF0Y2hlckxvY2F0aW9uIiwidGFyZ2V0UGFyYW1zIiwiZnVsbFBhdGgiLCJocmVmIiwibG9jYXRpb25Bc09iamVjdCIsImNoZWNrQ2FuY2VsZWROYXZpZ2F0aW9uIiwicHVzaFdpdGhSZWRpcmVjdCIsImhhbmRsZVJlZGlyZWN0UmVjb3JkIiwibGFzdE1hdGNoZWQiLCJyZWRpcmVjdCIsIm5ld1RhcmdldExvY2F0aW9uIiwicmVkaXJlY3RlZEZyb20iLCJ0YXJnZXRMb2NhdGlvbiIsImZvcmNlIiwic2hvdWxkUmVkaXJlY3QiLCJ0b0xvY2F0aW9uIiwiZmFpbHVyZSIsImhhbmRsZVNjcm9sbCIsIm1hcmtBc1JlYWR5IiwidHJpZ2dlckVycm9yIiwiZmFpbHVyZSQxIiwiZmluYWxpemVOYXZpZ2F0aW9uIiwidHJpZ2dlckFmdGVyRWFjaCIsImNoZWNrQ2FuY2VsZWROYXZpZ2F0aW9uQW5kUmVqZWN0IiwiaW5zdGFsbGVkQXBwcyIsImNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrIiwicnVuR3VhcmRRdWV1ZSIsImJlZm9yZUVudGVyIiwiaXNQdXNoIiwiaXNGaXJzdE5hdmlnYXRpb24iLCJyZW1vdmVIaXN0b3J5TGlzdGVuZXIiLCJzZXR1cExpc3RlbmVycyIsIl9mcm9tIiwiaW5mbyIsInJlYWR5SGFuZGxlcnMiLCJlcnJvckxpc3RlbmVycyIsInJlYWR5IiwibGlzdCIsImlzUmVhZHkiLCJyZXNvbHZlJDEiLCJzY3JvbGxCZWhhdmlvciIsInN0YXJ0ZWQiLCJyZWFjdGl2ZVJvdXRlIiwidW5tb3VudEFwcCIsInVzZVJvdXRlIiwiX25hbWUiLCJhcHBDc3MiLCJBcHAiLCJySUMiLCJtb2R1bGUiLCJuZWVkSW5wdXRTaGltcyIsImhhcmR3YXJlQmFja0J1dHRvbk1vZHVsZSIsImhhcmR3YXJlQmFja0J1dHRvbiIsInN1cHBvcnRzSGFyZHdhcmVCYWNrQnV0dG9uRXZlbnRzIiwiZWxlbWVudHMiLCJVUERBVEVfVkFMVUVfRVZFTlQiLCJNT0RFTF9WQUxVRSIsIlJPVVRFUl9MSU5LX1ZBTFVFIiwiTkFWX01BTkFHRVIiLCJST1VURVJfUFJPUF9QUkVGSVgiLCJBUklBX1BST1BfUFJFRklYIiwiRU1QVFlfUFJPUCQxIiwiREVGQVVMVF9FTVBUWV9QUk9QJDEiLCJnZXRDb21wb25lbnRDbGFzc2VzIiwiY2xhc3NlcyIsImdldEVsZW1lbnRDbGFzc2VzIiwiY29tcG9uZW50Q2xhc3NlcyIsImRlZmF1bHRDbGFzc2VzIiwiZGVmaW5lQ29udGFpbmVyIiwiZW1pdFByb3BzIiwibW9kZWxQcm9wIiwibW9kZWxVcGRhdGVFdmVudCIsIm1vZGVsUHJvcFZhbHVlIiwiY29udGFpbmVyUmVmIiwidk1vZGVsRGlyZWN0aXZlIiwibmF2TWFuYWdlciIsImhhbmRsZVJvdXRlckxpbmsiLCJyb3V0ZXJMaW5rIiwibmF2aWdhdGlvblBheWxvYWQiLCJvbGRDbGljayIsImhhbmRsZUNsaWNrIiwicHJvcHNUb0FkZCIsImV2ZW50SGFuZGxlcktleSIsImV2ZW50SGFuZGxlciIsIklvbkNvbnRlbnQiLCJkZWZpbmVDdXN0b21FbGVtZW50JGgiLCJJb25IZWFkZXIiLCJkZWZpbmVDdXN0b21FbGVtZW50JHAiLCJJb25UaXRsZSIsImRlZmluZUN1c3RvbUVsZW1lbnQkMWEiLCJJb25Ub29sYmFyIiwiZGVmaW5lQ3VzdG9tRWxlbWVudCQxYyIsIkxpZmVjeWNsZUhvb2tzIiwiaG9va05hbWVzIiwiaWRzIiwiZ2VuZXJhdGVJZCIsImZpcmVMaWZlY3ljbGUiLCJ2dWVDb21wb25lbnQiLCJ2dWVJbnN0YW5jZSIsImdldENvbmZpZyIsImxpZmVjeWNsZVR5cGUiLCJJb25pY1Z1ZSIsIklvblBhZ2UiLCJpc1ZpZXdWaXNpYmxlIiwiSW9uUm91dGVyT3V0bGV0IiwiZGVmaW5lQ3VzdG9tRWxlbWVudCQxZSIsInByZXZpb3VzTWF0Y2hlZFJvdXRlUmVmIiwicHJldmlvdXNNYXRjaGVkUGF0aCIsImlvblJvdXRlck91dGxldCIsImlvblJvdXRlciIsInZpZXdTdGFja3MiLCJza2lwVHJhbnNpdGlvbiIsInBhcmVudE91dGxldFBhdGgiLCJjdXJyZW50TWF0Y2hlZFJvdXRlUmVmIiwibWF0Y2hlZERpZmZlcmVudFJvdXRlcyIsIm1hdGNoZWREaWZmZXJlbnRQYXJhbWV0ZXJSb3V0ZXMiLCJzZXR1cFZpZXdJdGVtIiwiY2FuU3RhcnQiLCJzdGFjayIsInJvdXRlSW5mbyIsInJvdXRlckFuaW1hdGlvbiIsImVudGVyaW5nVmlld0l0ZW0iLCJsZWF2aW5nVmlld0l0ZW0iLCJjdXN0b21BbmltYXRpb24iLCJvbkVuZCIsInNob3VsZENvbnRpbnVlIiwic2hvd0dvQmFjayIsInByb2dyZXNzQW5pbWF0aW9uIiwiaGFzUm9vdERpcmVjdGlvbiIsImhhbmRsZVBhZ2VUcmFuc2l0aW9uIiwicm91dGVyRGlyZWN0aW9uIiwicm91dGVyQWN0aW9uIiwicHJldlJvdXRlTGFzdFBhdGhuYW1lIiwidXNpbmdMaW5lYXJOYXZpZ2F0aW9uIiwiZmlyc3RNYXRjaGVkUm91dGUiLCJ2aWV3SXRlbSIsImlvblBhZ2VFbCIsIm9sZElvblBhZ2VFbCIsInJlZ2lzdGVySW9uUGFnZSIsImNhY2hlZFByb3BzUmVzdWx0IiwicHJvcHNGdW5jdGlvblJlc3VsdCIsInVzZXJDb21wb25lbnRzIiwiSW9uQXBwIiwiZGVmaW5lQ3VzdG9tRWxlbWVudCQxaSIsIl9jcmVhdGVCbG9jayIsIl91bnJlZiIsImNyZWF0ZUxvY2F0aW9uSGlzdG9yeSIsImxvY2F0aW9uSGlzdG9yeSIsInRhYnNIaXN0b3J5IiwicG9wIiwiY2xlYXJIaXN0b3J5IiwibG9jYXRpb25JbmRleCIsInRhYkFycmF5IiwidGFiSW5kZXgiLCJ0YWJIaXN0b3J5IiwiZ2V0VGFic0hpc3RvcnkiLCJyaSIsInRhYiIsImV4aXN0aW5nUm91dGVJbmRleCIsImNsZWFyVGFiSGlzdG9yeSIsImV4aXN0aW5nVGFiUm91dGVJbmRleCIsImhpc3RvcnkiLCJpbml0aWFsSGlzdG9yeSIsImN1cnJlbnRIaXN0b3J5Iiwicm91dGVJbmZvcyIsImNyZWF0ZUlvblJvdXRlciIsImN1cnJlbnROYXZpZ2F0aW9uSW5mbyIsImFjdGlvbiIsImN1cnJlbnRIaXN0b3J5UG9zaXRpb24iLCJyZXBsYWNlQWN0aW9uIiwiaGFuZGxlSGlzdG9yeUNoYW5nZSIsImluaXRpYWxIaXN0b3J5UG9zaXRpb24iLCJjdXJyZW50Um91dGVJbmZvIiwiaW5jb21pbmdSb3V0ZVBhcmFtcyIsImhpc3RvcnlDaGFuZ2VMaXN0ZW5lcnMiLCJwcm9jZXNzTmV4dEhhbmRsZXIiLCJfeCIsImhhbmRsZU5hdmlnYXRlQmFjayIsImRlZmF1bHRIcmVmIiwicHJldkluZm8iLCJoYW5kbGVOYXZpZ2F0ZSIsInNldEluY29taW5nUm91dGVQYXJhbXMiLCJsZWF2aW5nTG9jYXRpb25JbmZvIiwicHJldlJvdXRlSW5mbyIsImlzUHVzaGVkIiwibGFzdFJvdXRlIiwiY3VycmVudFB1c2hlZEJ5IiwicHVzaGVkQnlSb3V0ZSIsImhpc3RvcnlTaXplIiwiaGlzdG9yeURpZmYiLCJpc1JlcGxhY2luZyIsImdldEN1cnJlbnRSb3V0ZUluZm8iLCJjYW5Hb0JhY2siLCJuYXZpZ2F0aW9uT3B0aW9ucyIsInJlc2V0VGFiIiwiY2hhbmdlVGFiIiwiaGFuZGxlU2V0Q3VycmVudFRhYiIsInJlZ2lzdGVySGlzdG9yeUNoYW5nZUxpc3RlbmVyIiwiY3JlYXRlVmlld1N0YWNrcyIsImNsZWFyIiwib3V0bGV0SWQiLCJnZXRWaWV3U3RhY2siLCJmaW5kVmlld0l0ZW1CeVJvdXRlSW5mbyIsImZpbmRWaWV3SXRlbUJ5UGF0aCIsImZpbmRMZWF2aW5nVmlld0l0ZW1CeVJvdXRlSW5mbyIsIm11c3RCZUlvblJvdXRlIiwiZmluZFZpZXdJdGVtQnlQYXRobmFtZSIsImZpbmRWaWV3SXRlbUluU3RhY2siLCJtYXRjaFZpZXciLCJmaW5kTWF0Y2hlZFJvdXRlIiwidmlld1N0YWNrIiwic3RhcnRJbmRleCIsInJvdXRlck9wdGlvbnMiLCJjcmVhdGVSb3V0ZXIkMSIsIm9sZEluc3RhbGwiLCJvbGRJc1JlYWR5IiwiY3JlYXRlV2ViSGlzdG9yeSQxIiwiX2NhY2hlIiwiX2NyZWF0ZUVsZW1lbnRWTm9kZSIsIkhvbWVQYWdlIl0sImlnbm9yZUxpc3QiOlswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LDI2LDI3LDI4LDI5LDMwLDMxLDMzXSwic291cmNlcyI6WyIuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHZ1ZStzaGFyZWRAMy41LjI1L25vZGVfbW9kdWxlcy9AdnVlL3NoYXJlZC9kaXN0L3NoYXJlZC5lc20tYnVuZGxlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AdnVlK3JlYWN0aXZpdHlAMy41LjI1L25vZGVfbW9kdWxlcy9AdnVlL3JlYWN0aXZpdHkvZGlzdC9yZWFjdGl2aXR5LmVzbS1idW5kbGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0B2dWUrcnVudGltZS1jb3JlQDMuNS4yNS9ub2RlX21vZHVsZXMvQHZ1ZS9ydW50aW1lLWNvcmUvZGlzdC9ydW50aW1lLWNvcmUuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHZ1ZStydW50aW1lLWRvbUAzLjUuMjUvbm9kZV9tb2R1bGVzL0B2dWUvcnVudGltZS1kb20vZGlzdC9ydW50aW1lLWRvbS5lc20tYnVuZGxlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RlbmNpbCtjb3JlQDQuMzguMC9ub2RlX21vZHVsZXMvQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YS9pbmRleC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RlbmNpbCtjb3JlQDQuMzguMC9ub2RlX21vZHVsZXMvQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9jbGllbnQvaW5kZXguanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQGlvbmljK2NvcmVAOC43LjExL25vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9jb21wb25lbnRzL2luZGV4NC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AaW9uaWMrY29yZUA4LjcuMTEvbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaGVscGVycy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AaW9uaWMrY29yZUA4LjcuMTEvbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uaWMtZ2xvYmFsLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Bpb25pYytjb3JlQDguNy4xMS9ub2RlX21vZHVsZXMvQGlvbmljL2NvcmUvY29tcG9uZW50cy90aGVtZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AaW9uaWMrY29yZUA4LjcuMTEvbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWNvbC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AaW9uaWMrY29yZUA4LjcuMTEvbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvZGlyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Bpb25pYytjb3JlQDguNy4xMS9ub2RlX21vZHVsZXMvQGlvbmljL2NvcmUvY29tcG9uZW50cy9jb250ZW50LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Bpb25pYytjb3JlQDguNy4xMS9ub2RlX21vZHVsZXMvQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tY29udGVudC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AaW9uaWMrY29yZUA4LjcuMTEvbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW5kZXg5LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Bpb25pYytjb3JlQDguNy4xMS9ub2RlX21vZHVsZXMvQGlvbmljL2NvcmUvY29tcG9uZW50cy9oYXJkd2FyZS1iYWNrLWJ1dHRvbi5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AaW9uaWMrY29yZUA4LjcuMTEvbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvZnJhbWV3b3JrLWRlbGVnYXRlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Bpb25pYytjb3JlQDguNy4xMS9ub2RlX21vZHVsZXMvQGlvbmljL2NvcmUvY29tcG9uZW50cy9sb2NrLWNvbnRyb2xsZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQGlvbmljK2NvcmVAOC43LjExL25vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9jb21wb25lbnRzL2luZGV4Mi5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AaW9uaWMrY29yZUA4LjcuMTEvbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW5kZXg4LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Bpb25pYytjb3JlQDguNy4xMS9ub2RlX21vZHVsZXMvQGlvbmljL2NvcmUvY29tcG9uZW50cy9oZWFkZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQGlvbmljK2NvcmVAOC43LjExL25vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1oZWFkZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQGlvbmljK2NvcmVAOC43LjExL25vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9jb21wb25lbnRzL2N1YmljLWJlemllci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AaW9uaWMrY29yZUA4LjcuMTEvbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvdGl0bGUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQGlvbmljK2NvcmVAOC43LjExL25vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9jb21wb25lbnRzL3Rvb2xiYXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQGlvbmljK2NvcmVAOC43LjExL25vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi10aXRsZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AaW9uaWMrY29yZUA4LjcuMTEvbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLXRvb2xiYXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQGlvbmljK2NvcmVAOC43LjExL25vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1yb3V0ZXItb3V0bGV0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3Z1ZS1yb3V0ZXJANC42LjNfdnVlQDMuNS4yNV90eXBlc2NyaXB0QDUuOS4zXy9ub2RlX21vZHVsZXMvdnVlLXJvdXRlci9kaXN0L2RldnRvb2xzLUJMQ3VtVXdMLm1qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS92dWUtcm91dGVyQDQuNi4zX3Z1ZUAzLjUuMjVfdHlwZXNjcmlwdEA1LjkuM18vbm9kZV9tb2R1bGVzL3Z1ZS1yb3V0ZXIvZGlzdC92dWUtcm91dGVyLm1qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AaW9uaWMrY29yZUA4LjcuMTEvbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWFwcC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AaW9uaWMrdnVlQDguNy4xMV9Ac3RlbmNpbCtfYTRlZDRjMzQ3OWY2OWNmZWY1ODBkNWIzMjI4NjE1Nzgvbm9kZV9tb2R1bGVzL0Bpb25pYy92dWUvZGlzdC9pbmRleC5qcyIsIi4uLy4uLy4uL2FwcHMvbGFiMDFfdnVlL3NyYy9BcHAudnVlIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Bpb25pYyt2dWUtcm91dGVyQDguNy4xMV9Ac181YTJmZDg0ZDA1MjUxMjFmZTc5NmU1ZjAwOTU3YTEzZS9ub2RlX21vZHVsZXMvQGlvbmljL3Z1ZS1yb3V0ZXIvZGlzdC9pbmRleC5qcyIsIi4uLy4uLy4uL2FwcHMvbGFiMDFfdnVlL3NyYy92aWV3cy9Ib21lUGFnZS52dWUiLCIuLi8uLi8uLi9hcHBzL2xhYjAxX3Z1ZS9zcmMvcm91dGVyL2luZGV4LnRzIiwiLi4vLi4vLi4vYXBwcy9sYWIwMV92dWUvc3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4qIEB2dWUvc2hhcmVkIHYzLjUuMjVcbiogKGMpIDIwMTgtcHJlc2VudCBZdXhpIChFdmFuKSBZb3UgYW5kIFZ1ZSBjb250cmlidXRvcnNcbiogQGxpY2Vuc2UgTUlUXG4qKi9cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5mdW5jdGlvbiBtYWtlTWFwKHN0cikge1xuICBjb25zdCBtYXAgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgZm9yIChjb25zdCBrZXkgb2Ygc3RyLnNwbGl0KFwiLFwiKSkgbWFwW2tleV0gPSAxO1xuICByZXR1cm4gKHZhbCkgPT4gdmFsIGluIG1hcDtcbn1cblxuY29uc3QgRU1QVFlfT0JKID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IE9iamVjdC5mcmVlemUoe30pIDoge307XG5jb25zdCBFTVBUWV9BUlIgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gT2JqZWN0LmZyZWV6ZShbXSkgOiBbXTtcbmNvbnN0IE5PT1AgPSAoKSA9PiB7XG59O1xuY29uc3QgTk8gPSAoKSA9PiBmYWxzZTtcbmNvbnN0IGlzT24gPSAoa2V5KSA9PiBrZXkuY2hhckNvZGVBdCgwKSA9PT0gMTExICYmIGtleS5jaGFyQ29kZUF0KDEpID09PSAxMTAgJiYgLy8gdXBwZXJjYXNlIGxldHRlclxuKGtleS5jaGFyQ29kZUF0KDIpID4gMTIyIHx8IGtleS5jaGFyQ29kZUF0KDIpIDwgOTcpO1xuY29uc3QgaXNNb2RlbExpc3RlbmVyID0gKGtleSkgPT4ga2V5LnN0YXJ0c1dpdGgoXCJvblVwZGF0ZTpcIik7XG5jb25zdCBleHRlbmQgPSBPYmplY3QuYXNzaWduO1xuY29uc3QgcmVtb3ZlID0gKGFyciwgZWwpID0+IHtcbiAgY29uc3QgaSA9IGFyci5pbmRleE9mKGVsKTtcbiAgaWYgKGkgPiAtMSkge1xuICAgIGFyci5zcGxpY2UoaSwgMSk7XG4gIH1cbn07XG5jb25zdCBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5jb25zdCBoYXNPd24gPSAodmFsLCBrZXkpID0+IGhhc093blByb3BlcnR5LmNhbGwodmFsLCBrZXkpO1xuY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5jb25zdCBpc01hcCA9ICh2YWwpID0+IHRvVHlwZVN0cmluZyh2YWwpID09PSBcIltvYmplY3QgTWFwXVwiO1xuY29uc3QgaXNTZXQgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gXCJbb2JqZWN0IFNldF1cIjtcbmNvbnN0IGlzRGF0ZSA9ICh2YWwpID0+IHRvVHlwZVN0cmluZyh2YWwpID09PSBcIltvYmplY3QgRGF0ZV1cIjtcbmNvbnN0IGlzUmVnRXhwID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09IFwiW29iamVjdCBSZWdFeHBdXCI7XG5jb25zdCBpc0Z1bmN0aW9uID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiO1xuY29uc3QgaXNTdHJpbmcgPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiO1xuY29uc3QgaXNTeW1ib2wgPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcInN5bWJvbFwiO1xuY29uc3QgaXNPYmplY3QgPSAodmFsKSA9PiB2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIjtcbmNvbnN0IGlzUHJvbWlzZSA9ICh2YWwpID0+IHtcbiAgcmV0dXJuIChpc09iamVjdCh2YWwpIHx8IGlzRnVuY3Rpb24odmFsKSkgJiYgaXNGdW5jdGlvbih2YWwudGhlbikgJiYgaXNGdW5jdGlvbih2YWwuY2F0Y2gpO1xufTtcbmNvbnN0IG9iamVjdFRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbmNvbnN0IHRvVHlwZVN0cmluZyA9ICh2YWx1ZSkgPT4gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG5jb25zdCB0b1Jhd1R5cGUgPSAodmFsdWUpID0+IHtcbiAgcmV0dXJuIHRvVHlwZVN0cmluZyh2YWx1ZSkuc2xpY2UoOCwgLTEpO1xufTtcbmNvbnN0IGlzUGxhaW5PYmplY3QgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIjtcbmNvbnN0IGlzSW50ZWdlcktleSA9IChrZXkpID0+IGlzU3RyaW5nKGtleSkgJiYga2V5ICE9PSBcIk5hTlwiICYmIGtleVswXSAhPT0gXCItXCIgJiYgXCJcIiArIHBhcnNlSW50KGtleSwgMTApID09PSBrZXk7XG5jb25zdCBpc1Jlc2VydmVkUHJvcCA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFxuICAvLyB0aGUgbGVhZGluZyBjb21tYSBpcyBpbnRlbnRpb25hbCBzbyBlbXB0eSBzdHJpbmcgXCJcIiBpcyBhbHNvIGluY2x1ZGVkXG4gIFwiLGtleSxyZWYscmVmX2ZvcixyZWZfa2V5LG9uVm5vZGVCZWZvcmVNb3VudCxvblZub2RlTW91bnRlZCxvblZub2RlQmVmb3JlVXBkYXRlLG9uVm5vZGVVcGRhdGVkLG9uVm5vZGVCZWZvcmVVbm1vdW50LG9uVm5vZGVVbm1vdW50ZWRcIlxuKTtcbmNvbnN0IGlzQnVpbHRJbkRpcmVjdGl2ZSA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFxuICBcImJpbmQsY2xvYWssZWxzZS1pZixlbHNlLGZvcixodG1sLGlmLG1vZGVsLG9uLG9uY2UscHJlLHNob3csc2xvdCx0ZXh0LG1lbW9cIlxuKTtcbmNvbnN0IGNhY2hlU3RyaW5nRnVuY3Rpb24gPSAoZm4pID0+IHtcbiAgY29uc3QgY2FjaGUgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgcmV0dXJuICgoc3RyKSA9PiB7XG4gICAgY29uc3QgaGl0ID0gY2FjaGVbc3RyXTtcbiAgICByZXR1cm4gaGl0IHx8IChjYWNoZVtzdHJdID0gZm4oc3RyKSk7XG4gIH0pO1xufTtcbmNvbnN0IGNhbWVsaXplUkUgPSAvLVxcdy9nO1xuY29uc3QgY2FtZWxpemUgPSBjYWNoZVN0cmluZ0Z1bmN0aW9uKFxuICAoc3RyKSA9PiB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIChjKSA9PiBjLnNsaWNlKDEpLnRvVXBwZXJDYXNlKCkpO1xuICB9XG4pO1xuY29uc3QgaHlwaGVuYXRlUkUgPSAvXFxCKFtBLVpdKS9nO1xuY29uc3QgaHlwaGVuYXRlID0gY2FjaGVTdHJpbmdGdW5jdGlvbihcbiAgKHN0cikgPT4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsIFwiLSQxXCIpLnRvTG93ZXJDYXNlKClcbik7XG5jb25zdCBjYXBpdGFsaXplID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59KTtcbmNvbnN0IHRvSGFuZGxlcktleSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oXG4gIChzdHIpID0+IHtcbiAgICBjb25zdCBzID0gc3RyID8gYG9uJHtjYXBpdGFsaXplKHN0cil9YCA6IGBgO1xuICAgIHJldHVybiBzO1xuICB9XG4pO1xuY29uc3QgaGFzQ2hhbmdlZCA9ICh2YWx1ZSwgb2xkVmFsdWUpID0+ICFPYmplY3QuaXModmFsdWUsIG9sZFZhbHVlKTtcbmNvbnN0IGludm9rZUFycmF5Rm5zID0gKGZucywgLi4uYXJnKSA9PiB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgZm5zW2ldKC4uLmFyZyk7XG4gIH1cbn07XG5jb25zdCBkZWYgPSAob2JqLCBrZXksIHZhbHVlLCB3cml0YWJsZSA9IGZhbHNlKSA9PiB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICB3cml0YWJsZSxcbiAgICB2YWx1ZVxuICB9KTtcbn07XG5jb25zdCBsb29zZVRvTnVtYmVyID0gKHZhbCkgPT4ge1xuICBjb25zdCBuID0gcGFyc2VGbG9hdCh2YWwpO1xuICByZXR1cm4gaXNOYU4obikgPyB2YWwgOiBuO1xufTtcbmNvbnN0IHRvTnVtYmVyID0gKHZhbCkgPT4ge1xuICBjb25zdCBuID0gaXNTdHJpbmcodmFsKSA/IE51bWJlcih2YWwpIDogTmFOO1xuICByZXR1cm4gaXNOYU4obikgPyB2YWwgOiBuO1xufTtcbmxldCBfZ2xvYmFsVGhpcztcbmNvbnN0IGdldEdsb2JhbFRoaXMgPSAoKSA9PiB7XG4gIHJldHVybiBfZ2xvYmFsVGhpcyB8fCAoX2dsb2JhbFRoaXMgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcbn07XG5jb25zdCBpZGVudFJFID0gL15bXyRhLXpBLVpcXHhBMC1cXHVGRkZGXVtfJGEtekEtWjAtOVxceEEwLVxcdUZGRkZdKiQvO1xuZnVuY3Rpb24gZ2VuUHJvcHNBY2Nlc3NFeHAobmFtZSkge1xuICByZXR1cm4gaWRlbnRSRS50ZXN0KG5hbWUpID8gYF9fcHJvcHMuJHtuYW1lfWAgOiBgX19wcm9wc1ske0pTT04uc3RyaW5naWZ5KG5hbWUpfV1gO1xufVxuZnVuY3Rpb24gZ2VuQ2FjaGVLZXkoc291cmNlLCBvcHRpb25zKSB7XG4gIHJldHVybiBzb3VyY2UgKyBKU09OLnN0cmluZ2lmeShcbiAgICBvcHRpb25zLFxuICAgIChfLCB2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIiA/IHZhbC50b1N0cmluZygpIDogdmFsXG4gICk7XG59XG5cbmNvbnN0IFBhdGNoRmxhZ3MgPSB7XG4gIFwiVEVYVFwiOiAxLFxuICBcIjFcIjogXCJURVhUXCIsXG4gIFwiQ0xBU1NcIjogMixcbiAgXCIyXCI6IFwiQ0xBU1NcIixcbiAgXCJTVFlMRVwiOiA0LFxuICBcIjRcIjogXCJTVFlMRVwiLFxuICBcIlBST1BTXCI6IDgsXG4gIFwiOFwiOiBcIlBST1BTXCIsXG4gIFwiRlVMTF9QUk9QU1wiOiAxNixcbiAgXCIxNlwiOiBcIkZVTExfUFJPUFNcIixcbiAgXCJORUVEX0hZRFJBVElPTlwiOiAzMixcbiAgXCIzMlwiOiBcIk5FRURfSFlEUkFUSU9OXCIsXG4gIFwiU1RBQkxFX0ZSQUdNRU5UXCI6IDY0LFxuICBcIjY0XCI6IFwiU1RBQkxFX0ZSQUdNRU5UXCIsXG4gIFwiS0VZRURfRlJBR01FTlRcIjogMTI4LFxuICBcIjEyOFwiOiBcIktFWUVEX0ZSQUdNRU5UXCIsXG4gIFwiVU5LRVlFRF9GUkFHTUVOVFwiOiAyNTYsXG4gIFwiMjU2XCI6IFwiVU5LRVlFRF9GUkFHTUVOVFwiLFxuICBcIk5FRURfUEFUQ0hcIjogNTEyLFxuICBcIjUxMlwiOiBcIk5FRURfUEFUQ0hcIixcbiAgXCJEWU5BTUlDX1NMT1RTXCI6IDEwMjQsXG4gIFwiMTAyNFwiOiBcIkRZTkFNSUNfU0xPVFNcIixcbiAgXCJERVZfUk9PVF9GUkFHTUVOVFwiOiAyMDQ4LFxuICBcIjIwNDhcIjogXCJERVZfUk9PVF9GUkFHTUVOVFwiLFxuICBcIkNBQ0hFRFwiOiAtMSxcbiAgXCItMVwiOiBcIkNBQ0hFRFwiLFxuICBcIkJBSUxcIjogLTIsXG4gIFwiLTJcIjogXCJCQUlMXCJcbn07XG5jb25zdCBQYXRjaEZsYWdOYW1lcyA9IHtcbiAgWzFdOiBgVEVYVGAsXG4gIFsyXTogYENMQVNTYCxcbiAgWzRdOiBgU1RZTEVgLFxuICBbOF06IGBQUk9QU2AsXG4gIFsxNl06IGBGVUxMX1BST1BTYCxcbiAgWzMyXTogYE5FRURfSFlEUkFUSU9OYCxcbiAgWzY0XTogYFNUQUJMRV9GUkFHTUVOVGAsXG4gIFsxMjhdOiBgS0VZRURfRlJBR01FTlRgLFxuICBbMjU2XTogYFVOS0VZRURfRlJBR01FTlRgLFxuICBbNTEyXTogYE5FRURfUEFUQ0hgLFxuICBbMTAyNF06IGBEWU5BTUlDX1NMT1RTYCxcbiAgWzIwNDhdOiBgREVWX1JPT1RfRlJBR01FTlRgLFxuICBbLTFdOiBgQ0FDSEVEYCxcbiAgWy0yXTogYEJBSUxgXG59O1xuXG5jb25zdCBTaGFwZUZsYWdzID0ge1xuICBcIkVMRU1FTlRcIjogMSxcbiAgXCIxXCI6IFwiRUxFTUVOVFwiLFxuICBcIkZVTkNUSU9OQUxfQ09NUE9ORU5UXCI6IDIsXG4gIFwiMlwiOiBcIkZVTkNUSU9OQUxfQ09NUE9ORU5UXCIsXG4gIFwiU1RBVEVGVUxfQ09NUE9ORU5UXCI6IDQsXG4gIFwiNFwiOiBcIlNUQVRFRlVMX0NPTVBPTkVOVFwiLFxuICBcIlRFWFRfQ0hJTERSRU5cIjogOCxcbiAgXCI4XCI6IFwiVEVYVF9DSElMRFJFTlwiLFxuICBcIkFSUkFZX0NISUxEUkVOXCI6IDE2LFxuICBcIjE2XCI6IFwiQVJSQVlfQ0hJTERSRU5cIixcbiAgXCJTTE9UU19DSElMRFJFTlwiOiAzMixcbiAgXCIzMlwiOiBcIlNMT1RTX0NISUxEUkVOXCIsXG4gIFwiVEVMRVBPUlRcIjogNjQsXG4gIFwiNjRcIjogXCJURUxFUE9SVFwiLFxuICBcIlNVU1BFTlNFXCI6IDEyOCxcbiAgXCIxMjhcIjogXCJTVVNQRU5TRVwiLFxuICBcIkNPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRVwiOiAyNTYsXG4gIFwiMjU2XCI6IFwiQ09NUE9ORU5UX1NIT1VMRF9LRUVQX0FMSVZFXCIsXG4gIFwiQ09NUE9ORU5UX0tFUFRfQUxJVkVcIjogNTEyLFxuICBcIjUxMlwiOiBcIkNPTVBPTkVOVF9LRVBUX0FMSVZFXCIsXG4gIFwiQ09NUE9ORU5UXCI6IDYsXG4gIFwiNlwiOiBcIkNPTVBPTkVOVFwiXG59O1xuXG5jb25zdCBTbG90RmxhZ3MgPSB7XG4gIFwiU1RBQkxFXCI6IDEsXG4gIFwiMVwiOiBcIlNUQUJMRVwiLFxuICBcIkRZTkFNSUNcIjogMixcbiAgXCIyXCI6IFwiRFlOQU1JQ1wiLFxuICBcIkZPUldBUkRFRFwiOiAzLFxuICBcIjNcIjogXCJGT1JXQVJERURcIlxufTtcbmNvbnN0IHNsb3RGbGFnc1RleHQgPSB7XG4gIFsxXTogXCJTVEFCTEVcIixcbiAgWzJdOiBcIkRZTkFNSUNcIixcbiAgWzNdOiBcIkZPUldBUkRFRFwiXG59O1xuXG5jb25zdCBHTE9CQUxTX0FMTE9XRUQgPSBcIkluZmluaXR5LHVuZGVmaW5lZCxOYU4saXNGaW5pdGUsaXNOYU4scGFyc2VGbG9hdCxwYXJzZUludCxkZWNvZGVVUkksZGVjb2RlVVJJQ29tcG9uZW50LGVuY29kZVVSSSxlbmNvZGVVUklDb21wb25lbnQsTWF0aCxOdW1iZXIsRGF0ZSxBcnJheSxPYmplY3QsQm9vbGVhbixTdHJpbmcsUmVnRXhwLE1hcCxTZXQsSlNPTixJbnRsLEJpZ0ludCxjb25zb2xlLEVycm9yLFN5bWJvbFwiO1xuY29uc3QgaXNHbG9iYWxseUFsbG93ZWQgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChHTE9CQUxTX0FMTE9XRUQpO1xuY29uc3QgaXNHbG9iYWxseVdoaXRlbGlzdGVkID0gaXNHbG9iYWxseUFsbG93ZWQ7XG5cbmNvbnN0IHJhbmdlID0gMjtcbmZ1bmN0aW9uIGdlbmVyYXRlQ29kZUZyYW1lKHNvdXJjZSwgc3RhcnQgPSAwLCBlbmQgPSBzb3VyY2UubGVuZ3RoKSB7XG4gIHN0YXJ0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oc3RhcnQsIHNvdXJjZS5sZW5ndGgpKTtcbiAgZW5kID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oZW5kLCBzb3VyY2UubGVuZ3RoKSk7XG4gIGlmIChzdGFydCA+IGVuZCkgcmV0dXJuIFwiXCI7XG4gIGxldCBsaW5lcyA9IHNvdXJjZS5zcGxpdCgvKFxccj9cXG4pLyk7XG4gIGNvbnN0IG5ld2xpbmVTZXF1ZW5jZXMgPSBsaW5lcy5maWx0ZXIoKF8sIGlkeCkgPT4gaWR4ICUgMiA9PT0gMSk7XG4gIGxpbmVzID0gbGluZXMuZmlsdGVyKChfLCBpZHgpID0+IGlkeCAlIDIgPT09IDApO1xuICBsZXQgY291bnQgPSAwO1xuICBjb25zdCByZXMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIGNvdW50ICs9IGxpbmVzW2ldLmxlbmd0aCArIChuZXdsaW5lU2VxdWVuY2VzW2ldICYmIG5ld2xpbmVTZXF1ZW5jZXNbaV0ubGVuZ3RoIHx8IDApO1xuICAgIGlmIChjb3VudCA+PSBzdGFydCkge1xuICAgICAgZm9yIChsZXQgaiA9IGkgLSByYW5nZTsgaiA8PSBpICsgcmFuZ2UgfHwgZW5kID4gY291bnQ7IGorKykge1xuICAgICAgICBpZiAoaiA8IDAgfHwgaiA+PSBsaW5lcy5sZW5ndGgpIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBsaW5lID0gaiArIDE7XG4gICAgICAgIHJlcy5wdXNoKFxuICAgICAgICAgIGAke2xpbmV9JHtcIiBcIi5yZXBlYXQoTWF0aC5tYXgoMyAtIFN0cmluZyhsaW5lKS5sZW5ndGgsIDApKX18ICAke2xpbmVzW2pdfWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgbGluZUxlbmd0aCA9IGxpbmVzW2pdLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbmV3TGluZVNlcUxlbmd0aCA9IG5ld2xpbmVTZXF1ZW5jZXNbal0gJiYgbmV3bGluZVNlcXVlbmNlc1tqXS5sZW5ndGggfHwgMDtcbiAgICAgICAgaWYgKGogPT09IGkpIHtcbiAgICAgICAgICBjb25zdCBwYWQgPSBzdGFydCAtIChjb3VudCAtIChsaW5lTGVuZ3RoICsgbmV3TGluZVNlcUxlbmd0aCkpO1xuICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE1hdGgubWF4KFxuICAgICAgICAgICAgMSxcbiAgICAgICAgICAgIGVuZCA+IGNvdW50ID8gbGluZUxlbmd0aCAtIHBhZCA6IGVuZCAtIHN0YXJ0XG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXMucHVzaChgICAgfCAgYCArIFwiIFwiLnJlcGVhdChwYWQpICsgXCJeXCIucmVwZWF0KGxlbmd0aCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGogPiBpKSB7XG4gICAgICAgICAgaWYgKGVuZCA+IGNvdW50KSB7XG4gICAgICAgICAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1heChNYXRoLm1pbihlbmQgLSBjb3VudCwgbGluZUxlbmd0aCksIDEpO1xuICAgICAgICAgICAgcmVzLnB1c2goYCAgIHwgIGAgKyBcIl5cIi5yZXBlYXQobGVuZ3RoKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvdW50ICs9IGxpbmVMZW5ndGggKyBuZXdMaW5lU2VxTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcy5qb2luKFwiXFxuXCIpO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVTdHlsZSh2YWx1ZSkge1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBjb25zdCByZXMgPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBpdGVtID0gdmFsdWVbaV07XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gaXNTdHJpbmcoaXRlbSkgPyBwYXJzZVN0cmluZ1N0eWxlKGl0ZW0pIDogbm9ybWFsaXplU3R5bGUoaXRlbSk7XG4gICAgICBpZiAobm9ybWFsaXplZCkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBub3JtYWxpemVkKSB7XG4gICAgICAgICAgcmVzW2tleV0gPSBub3JtYWxpemVkW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfSBlbHNlIGlmIChpc1N0cmluZyh2YWx1ZSkgfHwgaXNPYmplY3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5jb25zdCBsaXN0RGVsaW1pdGVyUkUgPSAvOyg/IVteKF0qXFwpKS9nO1xuY29uc3QgcHJvcGVydHlEZWxpbWl0ZXJSRSA9IC86KFteXSspLztcbmNvbnN0IHN0eWxlQ29tbWVudFJFID0gL1xcL1xcKlteXSo/XFwqXFwvL2c7XG5mdW5jdGlvbiBwYXJzZVN0cmluZ1N0eWxlKGNzc1RleHQpIHtcbiAgY29uc3QgcmV0ID0ge307XG4gIGNzc1RleHQucmVwbGFjZShzdHlsZUNvbW1lbnRSRSwgXCJcIikuc3BsaXQobGlzdERlbGltaXRlclJFKS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGNvbnN0IHRtcCA9IGl0ZW0uc3BsaXQocHJvcGVydHlEZWxpbWl0ZXJSRSk7XG4gICAgICB0bXAubGVuZ3RoID4gMSAmJiAocmV0W3RtcFswXS50cmltKCldID0gdG1wWzFdLnRyaW0oKSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJldDtcbn1cbmZ1bmN0aW9uIHN0cmluZ2lmeVN0eWxlKHN0eWxlcykge1xuICBpZiAoIXN0eWxlcykgcmV0dXJuIFwiXCI7XG4gIGlmIChpc1N0cmluZyhzdHlsZXMpKSByZXR1cm4gc3R5bGVzO1xuICBsZXQgcmV0ID0gXCJcIjtcbiAgZm9yIChjb25zdCBrZXkgaW4gc3R5bGVzKSB7XG4gICAgY29uc3QgdmFsdWUgPSBzdHlsZXNba2V5XTtcbiAgICBpZiAoaXNTdHJpbmcodmFsdWUpIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZEtleSA9IGtleS5zdGFydHNXaXRoKGAtLWApID8ga2V5IDogaHlwaGVuYXRlKGtleSk7XG4gICAgICByZXQgKz0gYCR7bm9ybWFsaXplZEtleX06JHt2YWx1ZX07YDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNsYXNzKHZhbHVlKSB7XG4gIGxldCByZXMgPSBcIlwiO1xuICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgcmVzID0gdmFsdWU7XG4gIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplQ2xhc3ModmFsdWVbaV0pO1xuICAgICAgaWYgKG5vcm1hbGl6ZWQpIHtcbiAgICAgICAgcmVzICs9IG5vcm1hbGl6ZWQgKyBcIiBcIjtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgZm9yIChjb25zdCBuYW1lIGluIHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWVbbmFtZV0pIHtcbiAgICAgICAgcmVzICs9IG5hbWUgKyBcIiBcIjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcy50cmltKCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVQcm9wcyhwcm9wcykge1xuICBpZiAoIXByb3BzKSByZXR1cm4gbnVsbDtcbiAgbGV0IHsgY2xhc3M6IGtsYXNzLCBzdHlsZSB9ID0gcHJvcHM7XG4gIGlmIChrbGFzcyAmJiAhaXNTdHJpbmcoa2xhc3MpKSB7XG4gICAgcHJvcHMuY2xhc3MgPSBub3JtYWxpemVDbGFzcyhrbGFzcyk7XG4gIH1cbiAgaWYgKHN0eWxlKSB7XG4gICAgcHJvcHMuc3R5bGUgPSBub3JtYWxpemVTdHlsZShzdHlsZSk7XG4gIH1cbiAgcmV0dXJuIHByb3BzO1xufVxuXG5jb25zdCBIVE1MX1RBR1MgPSBcImh0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLGFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLGhncm91cCxoMSxoMixoMyxoNCxoNSxoNixuYXYsc2VjdGlvbixkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCxhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSxkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnVieSxzLHNhbXAsc21hbGwsc3BhbixzdHJvbmcsc3ViLHN1cCx0aW1lLHUsdmFyLHdicixhcmVhLGF1ZGlvLG1hcCx0cmFjayx2aWRlbyxlbWJlZCxvYmplY3QscGFyYW0sc291cmNlLGNhbnZhcyxzY3JpcHQsbm9zY3JpcHQsZGVsLGlucyxjYXB0aW9uLGNvbCxjb2xncm91cCx0YWJsZSx0aGVhZCx0Ym9keSx0ZCx0aCx0cixidXR0b24sZGF0YWxpc3QsZmllbGRzZXQsZm9ybSxpbnB1dCxsYWJlbCxsZWdlbmQsbWV0ZXIsb3B0Z3JvdXAsb3B0aW9uLG91dHB1dCxwcm9ncmVzcyxzZWxlY3QsdGV4dGFyZWEsZGV0YWlscyxkaWFsb2csbWVudSxzdW1tYXJ5LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290XCI7XG5jb25zdCBTVkdfVEFHUyA9IFwic3ZnLGFuaW1hdGUsYW5pbWF0ZU1vdGlvbixhbmltYXRlVHJhbnNmb3JtLGNpcmNsZSxjbGlwUGF0aCxjb2xvci1wcm9maWxlLGRlZnMsZGVzYyxkaXNjYXJkLGVsbGlwc2UsZmVCbGVuZCxmZUNvbG9yTWF0cml4LGZlQ29tcG9uZW50VHJhbnNmZXIsZmVDb21wb3NpdGUsZmVDb252b2x2ZU1hdHJpeCxmZURpZmZ1c2VMaWdodGluZyxmZURpc3BsYWNlbWVudE1hcCxmZURpc3RhbnRMaWdodCxmZURyb3BTaGFkb3csZmVGbG9vZCxmZUZ1bmNBLGZlRnVuY0IsZmVGdW5jRyxmZUZ1bmNSLGZlR2F1c3NpYW5CbHVyLGZlSW1hZ2UsZmVNZXJnZSxmZU1lcmdlTm9kZSxmZU1vcnBob2xvZ3ksZmVPZmZzZXQsZmVQb2ludExpZ2h0LGZlU3BlY3VsYXJMaWdodGluZyxmZVNwb3RMaWdodCxmZVRpbGUsZmVUdXJidWxlbmNlLGZpbHRlcixmb3JlaWduT2JqZWN0LGcsaGF0Y2gsaGF0Y2hwYXRoLGltYWdlLGxpbmUsbGluZWFyR3JhZGllbnQsbWFya2VyLG1hc2ssbWVzaCxtZXNoZ3JhZGllbnQsbWVzaHBhdGNoLG1lc2hyb3csbWV0YWRhdGEsbXBhdGgscGF0aCxwYXR0ZXJuLHBvbHlnb24scG9seWxpbmUscmFkaWFsR3JhZGllbnQscmVjdCxzZXQsc29saWRjb2xvcixzdG9wLHN3aXRjaCxzeW1ib2wsdGV4dCx0ZXh0UGF0aCx0aXRsZSx0c3Bhbix1bmtub3duLHVzZSx2aWV3XCI7XG5jb25zdCBNQVRIX1RBR1MgPSBcImFubm90YXRpb24sYW5ub3RhdGlvbi14bWwsbWFjdGlvbixtYWxpZ25ncm91cCxtYWxpZ25tYXJrLG1hdGgsbWVuY2xvc2UsbWVycm9yLG1mZW5jZWQsbWZyYWMsbWZyYWN0aW9uLG1nbHlwaCxtaSxtbGFiZWxlZHRyLG1sb25nZGl2LG1tdWx0aXNjcmlwdHMsbW4sbW8sbW92ZXIsbXBhZGRlZCxtcGhhbnRvbSxtcHJlc2NyaXB0cyxtcm9vdCxtcm93LG1zLG1zY2Fycmllcyxtc2NhcnJ5LG1zZ3JvdXAsbXNsaW5lLG1zcGFjZSxtc3FydCxtc3Jvdyxtc3RhY2ssbXN0eWxlLG1zdWIsbXN1YnN1cCxtc3VwLG10YWJsZSxtdGQsbXRleHQsbXRyLG11bmRlcixtdW5kZXJvdmVyLG5vbmUsc2VtYW50aWNzXCI7XG5jb25zdCBWT0lEX1RBR1MgPSBcImFyZWEsYmFzZSxicixjb2wsZW1iZWQsaHIsaW1nLGlucHV0LGxpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyXCI7XG5jb25zdCBpc0hUTUxUYWcgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChIVE1MX1RBR1MpO1xuY29uc3QgaXNTVkdUYWcgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChTVkdfVEFHUyk7XG5jb25zdCBpc01hdGhNTFRhZyA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKE1BVEhfVEFHUyk7XG5jb25zdCBpc1ZvaWRUYWcgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChWT0lEX1RBR1MpO1xuXG5jb25zdCBzcGVjaWFsQm9vbGVhbkF0dHJzID0gYGl0ZW1zY29wZSxhbGxvd2Z1bGxzY3JlZW4sZm9ybW5vdmFsaWRhdGUsaXNtYXAsbm9tb2R1bGUsbm92YWxpZGF0ZSxyZWFkb25seWA7XG5jb25zdCBpc1NwZWNpYWxCb29sZWFuQXR0ciA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKHNwZWNpYWxCb29sZWFuQXR0cnMpO1xuY29uc3QgaXNCb29sZWFuQXR0ciA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFxuICBzcGVjaWFsQm9vbGVhbkF0dHJzICsgYCxhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY29udHJvbHMsZGVmYXVsdCxkZWZlcixkaXNhYmxlZCxoaWRkZW4saW5lcnQsbG9vcCxvcGVuLHJlcXVpcmVkLHJldmVyc2VkLHNjb3BlZCxzZWFtbGVzcyxjaGVja2VkLG11dGVkLG11bHRpcGxlLHNlbGVjdGVkYFxuKTtcbmZ1bmN0aW9uIGluY2x1ZGVCb29sZWFuQXR0cih2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSB8fCB2YWx1ZSA9PT0gXCJcIjtcbn1cbmNvbnN0IHVuc2FmZUF0dHJDaGFyUkUgPSAvWz4vPVwiJ1xcdTAwMDlcXHUwMDBhXFx1MDAwY1xcdTAwMjBdLztcbmNvbnN0IGF0dHJWYWxpZGF0aW9uQ2FjaGUgPSB7fTtcbmZ1bmN0aW9uIGlzU1NSU2FmZUF0dHJOYW1lKG5hbWUpIHtcbiAgaWYgKGF0dHJWYWxpZGF0aW9uQ2FjaGUuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICByZXR1cm4gYXR0clZhbGlkYXRpb25DYWNoZVtuYW1lXTtcbiAgfVxuICBjb25zdCBpc1Vuc2FmZSA9IHVuc2FmZUF0dHJDaGFyUkUudGVzdChuYW1lKTtcbiAgaWYgKGlzVW5zYWZlKSB7XG4gICAgY29uc29sZS5lcnJvcihgdW5zYWZlIGF0dHJpYnV0ZSBuYW1lOiAke25hbWV9YCk7XG4gIH1cbiAgcmV0dXJuIGF0dHJWYWxpZGF0aW9uQ2FjaGVbbmFtZV0gPSAhaXNVbnNhZmU7XG59XG5jb25zdCBwcm9wc1RvQXR0ck1hcCA9IHtcbiAgYWNjZXB0Q2hhcnNldDogXCJhY2NlcHQtY2hhcnNldFwiLFxuICBjbGFzc05hbWU6IFwiY2xhc3NcIixcbiAgaHRtbEZvcjogXCJmb3JcIixcbiAgaHR0cEVxdWl2OiBcImh0dHAtZXF1aXZcIlxufTtcbmNvbnN0IGlzS25vd25IdG1sQXR0ciA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFxuICBgYWNjZXB0LGFjY2VwdC1jaGFyc2V0LGFjY2Vzc2tleSxhY3Rpb24sYWxpZ24sYWxsb3csYWx0LGFzeW5jLGF1dG9jYXBpdGFsaXplLGF1dG9jb21wbGV0ZSxhdXRvZm9jdXMsYXV0b3BsYXksYmFja2dyb3VuZCxiZ2NvbG9yLGJvcmRlcixidWZmZXJlZCxjYXB0dXJlLGNoYWxsZW5nZSxjaGFyc2V0LGNoZWNrZWQsY2l0ZSxjbGFzcyxjb2RlLGNvZGViYXNlLGNvbG9yLGNvbHMsY29sc3Bhbixjb250ZW50LGNvbnRlbnRlZGl0YWJsZSxjb250ZXh0bWVudSxjb250cm9scyxjb29yZHMsY3Jvc3NvcmlnaW4sY3NwLGRhdGEsZGF0ZXRpbWUsZGVjb2RpbmcsZGVmYXVsdCxkZWZlcixkaXIsZGlybmFtZSxkaXNhYmxlZCxkb3dubG9hZCxkcmFnZ2FibGUsZHJvcHpvbmUsZW5jdHlwZSxlbnRlcmtleWhpbnQsZm9yLGZvcm0sZm9ybWFjdGlvbixmb3JtZW5jdHlwZSxmb3JtbWV0aG9kLGZvcm1ub3ZhbGlkYXRlLGZvcm10YXJnZXQsaGVhZGVycyxoZWlnaHQsaGlkZGVuLGhpZ2gsaHJlZixocmVmbGFuZyxodHRwLWVxdWl2LGljb24saWQsaW1wb3J0YW5jZSxpbmVydCxpbnRlZ3JpdHksaXNtYXAsaXRlbXByb3Asa2V5dHlwZSxraW5kLGxhYmVsLGxhbmcsbGFuZ3VhZ2UsbG9hZGluZyxsaXN0LGxvb3AsbG93LG1hbmlmZXN0LG1heCxtYXhsZW5ndGgsbWlubGVuZ3RoLG1lZGlhLG1pbixtdWx0aXBsZSxtdXRlZCxuYW1lLG5vdmFsaWRhdGUsb3BlbixvcHRpbXVtLHBhdHRlcm4scGluZyxwbGFjZWhvbGRlcixwb3N0ZXIscHJlbG9hZCxyYWRpb2dyb3VwLHJlYWRvbmx5LHJlZmVycmVycG9saWN5LHJlbCxyZXF1aXJlZCxyZXZlcnNlZCxyb3dzLHJvd3NwYW4sc2FuZGJveCxzY29wZSxzY29wZWQsc2VsZWN0ZWQsc2hhcGUsc2l6ZSxzaXplcyxzbG90LHNwYW4sc3BlbGxjaGVjayxzcmMsc3JjZG9jLHNyY2xhbmcsc3Jjc2V0LHN0YXJ0LHN0ZXAsc3R5bGUsc3VtbWFyeSx0YWJpbmRleCx0YXJnZXQsdGl0bGUsdHJhbnNsYXRlLHR5cGUsdXNlbWFwLHZhbHVlLHdpZHRoLHdyYXBgXG4pO1xuY29uc3QgaXNLbm93blN2Z0F0dHIgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChcbiAgYHhtbG5zLGFjY2VudC1oZWlnaHQsYWNjdW11bGF0ZSxhZGRpdGl2ZSxhbGlnbm1lbnQtYmFzZWxpbmUsYWxwaGFiZXRpYyxhbXBsaXR1ZGUsYXJhYmljLWZvcm0sYXNjZW50LGF0dHJpYnV0ZU5hbWUsYXR0cmlidXRlVHlwZSxhemltdXRoLGJhc2VGcmVxdWVuY3ksYmFzZWxpbmUtc2hpZnQsYmFzZVByb2ZpbGUsYmJveCxiZWdpbixiaWFzLGJ5LGNhbGNNb2RlLGNhcC1oZWlnaHQsY2xhc3MsY2xpcCxjbGlwUGF0aFVuaXRzLGNsaXAtcGF0aCxjbGlwLXJ1bGUsY29sb3IsY29sb3ItaW50ZXJwb2xhdGlvbixjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnMsY29sb3ItcHJvZmlsZSxjb2xvci1yZW5kZXJpbmcsY29udGVudFNjcmlwdFR5cGUsY29udGVudFN0eWxlVHlwZSxjcm9zc29yaWdpbixjdXJzb3IsY3gsY3ksZCxkZWNlbGVyYXRlLGRlc2NlbnQsZGlmZnVzZUNvbnN0YW50LGRpcmVjdGlvbixkaXNwbGF5LGRpdmlzb3IsZG9taW5hbnQtYmFzZWxpbmUsZHVyLGR4LGR5LGVkZ2VNb2RlLGVsZXZhdGlvbixlbmFibGUtYmFja2dyb3VuZCxlbmQsZXhwb25lbnQsZmlsbCxmaWxsLW9wYWNpdHksZmlsbC1ydWxlLGZpbHRlcixmaWx0ZXJSZXMsZmlsdGVyVW5pdHMsZmxvb2QtY29sb3IsZmxvb2Qtb3BhY2l0eSxmb250LWZhbWlseSxmb250LXNpemUsZm9udC1zaXplLWFkanVzdCxmb250LXN0cmV0Y2gsZm9udC1zdHlsZSxmb250LXZhcmlhbnQsZm9udC13ZWlnaHQsZm9ybWF0LGZyb20sZnIsZngsZnksZzEsZzIsZ2x5cGgtbmFtZSxnbHlwaC1vcmllbnRhdGlvbi1ob3Jpem9udGFsLGdseXBoLW9yaWVudGF0aW9uLXZlcnRpY2FsLGdseXBoUmVmLGdyYWRpZW50VHJhbnNmb3JtLGdyYWRpZW50VW5pdHMsaGFuZ2luZyxoZWlnaHQsaHJlZixocmVmbGFuZyxob3Jpei1hZHYteCxob3Jpei1vcmlnaW4teCxpZCxpZGVvZ3JhcGhpYyxpbWFnZS1yZW5kZXJpbmcsaW4saW4yLGludGVyY2VwdCxrLGsxLGsyLGszLGs0LGtlcm5lbE1hdHJpeCxrZXJuZWxVbml0TGVuZ3RoLGtlcm5pbmcsa2V5UG9pbnRzLGtleVNwbGluZXMsa2V5VGltZXMsbGFuZyxsZW5ndGhBZGp1c3QsbGV0dGVyLXNwYWNpbmcsbGlnaHRpbmctY29sb3IsbGltaXRpbmdDb25lQW5nbGUsbG9jYWwsbWFya2VyLWVuZCxtYXJrZXItbWlkLG1hcmtlci1zdGFydCxtYXJrZXJIZWlnaHQsbWFya2VyVW5pdHMsbWFya2VyV2lkdGgsbWFzayxtYXNrQ29udGVudFVuaXRzLG1hc2tVbml0cyxtYXRoZW1hdGljYWwsbWF4LG1lZGlhLG1ldGhvZCxtaW4sbW9kZSxuYW1lLG51bU9jdGF2ZXMsb2Zmc2V0LG9wYWNpdHksb3BlcmF0b3Isb3JkZXIsb3JpZW50LG9yaWVudGF0aW9uLG9yaWdpbixvdmVyZmxvdyxvdmVybGluZS1wb3NpdGlvbixvdmVybGluZS10aGlja25lc3MscGFub3NlLTEscGFpbnQtb3JkZXIscGF0aCxwYXRoTGVuZ3RoLHBhdHRlcm5Db250ZW50VW5pdHMscGF0dGVyblRyYW5zZm9ybSxwYXR0ZXJuVW5pdHMscGluZyxwb2ludGVyLWV2ZW50cyxwb2ludHMscG9pbnRzQXRYLHBvaW50c0F0WSxwb2ludHNBdFoscHJlc2VydmVBbHBoYSxwcmVzZXJ2ZUFzcGVjdFJhdGlvLHByaW1pdGl2ZVVuaXRzLHIscmFkaXVzLHJlZmVycmVyUG9saWN5LHJlZlgscmVmWSxyZWwscmVuZGVyaW5nLWludGVudCxyZXBlYXRDb3VudCxyZXBlYXREdXIscmVxdWlyZWRFeHRlbnNpb25zLHJlcXVpcmVkRmVhdHVyZXMscmVzdGFydCxyZXN1bHQscm90YXRlLHJ4LHJ5LHNjYWxlLHNlZWQsc2hhcGUtcmVuZGVyaW5nLHNsb3BlLHNwYWNpbmcsc3BlY3VsYXJDb25zdGFudCxzcGVjdWxhckV4cG9uZW50LHNwZWVkLHNwcmVhZE1ldGhvZCxzdGFydE9mZnNldCxzdGREZXZpYXRpb24sc3RlbWgsc3RlbXYsc3RpdGNoVGlsZXMsc3RvcC1jb2xvcixzdG9wLW9wYWNpdHksc3RyaWtldGhyb3VnaC1wb3NpdGlvbixzdHJpa2V0aHJvdWdoLXRoaWNrbmVzcyxzdHJpbmcsc3Ryb2tlLHN0cm9rZS1kYXNoYXJyYXksc3Ryb2tlLWRhc2hvZmZzZXQsc3Ryb2tlLWxpbmVjYXAsc3Ryb2tlLWxpbmVqb2luLHN0cm9rZS1taXRlcmxpbWl0LHN0cm9rZS1vcGFjaXR5LHN0cm9rZS13aWR0aCxzdHlsZSxzdXJmYWNlU2NhbGUsc3lzdGVtTGFuZ3VhZ2UsdGFiaW5kZXgsdGFibGVWYWx1ZXMsdGFyZ2V0LHRhcmdldFgsdGFyZ2V0WSx0ZXh0LWFuY2hvcix0ZXh0LWRlY29yYXRpb24sdGV4dC1yZW5kZXJpbmcsdGV4dExlbmd0aCx0byx0cmFuc2Zvcm0sdHJhbnNmb3JtLW9yaWdpbix0eXBlLHUxLHUyLHVuZGVybGluZS1wb3NpdGlvbix1bmRlcmxpbmUtdGhpY2tuZXNzLHVuaWNvZGUsdW5pY29kZS1iaWRpLHVuaWNvZGUtcmFuZ2UsdW5pdHMtcGVyLWVtLHYtYWxwaGFiZXRpYyx2LWhhbmdpbmcsdi1pZGVvZ3JhcGhpYyx2LW1hdGhlbWF0aWNhbCx2YWx1ZXMsdmVjdG9yLWVmZmVjdCx2ZXJzaW9uLHZlcnQtYWR2LXksdmVydC1vcmlnaW4teCx2ZXJ0LW9yaWdpbi15LHZpZXdCb3gsdmlld1RhcmdldCx2aXNpYmlsaXR5LHdpZHRoLHdpZHRocyx3b3JkLXNwYWNpbmcsd3JpdGluZy1tb2RlLHgseC1oZWlnaHQseDEseDIseENoYW5uZWxTZWxlY3Rvcix4bGluazphY3R1YXRlLHhsaW5rOmFyY3JvbGUseGxpbms6aHJlZix4bGluazpyb2xlLHhsaW5rOnNob3cseGxpbms6dGl0bGUseGxpbms6dHlwZSx4bWxuczp4bGluayx4bWw6YmFzZSx4bWw6bGFuZyx4bWw6c3BhY2UseSx5MSx5Mix5Q2hhbm5lbFNlbGVjdG9yLHosem9vbUFuZFBhbmBcbik7XG5jb25zdCBpc0tub3duTWF0aE1MQXR0ciA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFxuICBgYWNjZW50LGFjY2VudHVuZGVyLGFjdGlvbnR5cGUsYWxpZ24sYWxpZ25tZW50c2NvcGUsYWx0aW1nLGFsdGltZy1oZWlnaHQsYWx0aW1nLXZhbGlnbixhbHRpbWctd2lkdGgsYWx0dGV4dCxiZXZlbGxlZCxjbG9zZSxjb2x1bW5zYWxpZ24sY29sdW1ubGluZXMsY29sdW1uc3BhbixkZW5vbWFsaWduLGRlcHRoLGRpcixkaXNwbGF5LGRpc3BsYXlzdHlsZSxlbmNvZGluZyxlcXVhbGNvbHVtbnMsZXF1YWxyb3dzLGZlbmNlLGZvbnRzdHlsZSxmb250d2VpZ2h0LGZvcm0sZnJhbWUsZnJhbWVzcGFjaW5nLGdyb3VwYWxpZ24saGVpZ2h0LGhyZWYsaWQsaW5kZW50YWxpZ24saW5kZW50YWxpZ25maXJzdCxpbmRlbnRhbGlnbmxhc3QsaW5kZW50c2hpZnQsaW5kZW50c2hpZnRmaXJzdCxpbmRlbnRzaGlmdGxhc3QsaW5kZXh0eXBlLGp1c3RpZnksbGFyZ2V0b3AsbGFyZ2VvcCxscXVvdGUsbHNwYWNlLG1hdGhiYWNrZ3JvdW5kLG1hdGhjb2xvcixtYXRoc2l6ZSxtYXRodmFyaWFudCxtYXhzaXplLG1pbmxhYmVsc3BhY2luZyxtb2RlLG90aGVyLG92ZXJmbG93LHBvc2l0aW9uLHJvd2FsaWduLHJvd2xpbmVzLHJvd3NwYW4scnF1b3RlLHJzcGFjZSxzY3JpcHRsZXZlbCxzY3JpcHRtaW5zaXplLHNjcmlwdHNpemVtdWx0aXBsaWVyLHNlbGVjdGlvbixzZXBhcmF0b3Isc2VwYXJhdG9ycyxzaGlmdCxzaWRlLHNyYyxzdGFja2FsaWduLHN0cmV0Y2h5LHN1YnNjcmlwdHNoaWZ0LHN1cGVyc2NyaXB0c2hpZnQsc3ltbWV0cmljLHZvZmZzZXQsd2lkdGgsd2lkdGhzLHhsaW5rOmhyZWYseGxpbms6c2hvdyx4bGluazp0eXBlLHhtbG5zYFxuKTtcbmZ1bmN0aW9uIGlzUmVuZGVyYWJsZUF0dHJWYWx1ZSh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gdHlwZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlID09PSBcIm51bWJlclwiIHx8IHR5cGUgPT09IFwiYm9vbGVhblwiO1xufVxuXG5jb25zdCBlc2NhcGVSRSA9IC9bXCInJjw+XS87XG5mdW5jdGlvbiBlc2NhcGVIdG1sKHN0cmluZykge1xuICBjb25zdCBzdHIgPSBcIlwiICsgc3RyaW5nO1xuICBjb25zdCBtYXRjaCA9IGVzY2FwZVJFLmV4ZWMoc3RyKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybiBzdHI7XG4gIH1cbiAgbGV0IGh0bWwgPSBcIlwiO1xuICBsZXQgZXNjYXBlZDtcbiAgbGV0IGluZGV4O1xuICBsZXQgbGFzdEluZGV4ID0gMDtcbiAgZm9yIChpbmRleCA9IG1hdGNoLmluZGV4OyBpbmRleCA8IHN0ci5sZW5ndGg7IGluZGV4KyspIHtcbiAgICBzd2l0Y2ggKHN0ci5jaGFyQ29kZUF0KGluZGV4KSkge1xuICAgICAgY2FzZSAzNDpcbiAgICAgICAgZXNjYXBlZCA9IFwiJnF1b3Q7XCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzODpcbiAgICAgICAgZXNjYXBlZCA9IFwiJmFtcDtcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM5OlxuICAgICAgICBlc2NhcGVkID0gXCImIzM5O1wiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNjA6XG4gICAgICAgIGVzY2FwZWQgPSBcIiZsdDtcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDYyOlxuICAgICAgICBlc2NhcGVkID0gXCImZ3Q7XCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChsYXN0SW5kZXggIT09IGluZGV4KSB7XG4gICAgICBodG1sICs9IHN0ci5zbGljZShsYXN0SW5kZXgsIGluZGV4KTtcbiAgICB9XG4gICAgbGFzdEluZGV4ID0gaW5kZXggKyAxO1xuICAgIGh0bWwgKz0gZXNjYXBlZDtcbiAgfVxuICByZXR1cm4gbGFzdEluZGV4ICE9PSBpbmRleCA/IGh0bWwgKyBzdHIuc2xpY2UobGFzdEluZGV4LCBpbmRleCkgOiBodG1sO1xufVxuY29uc3QgY29tbWVudFN0cmlwUkUgPSAvXi0/Pnw8IS0tfC0tPnwtLSE+fDwhLSQvZztcbmZ1bmN0aW9uIGVzY2FwZUh0bWxDb21tZW50KHNyYykge1xuICByZXR1cm4gc3JjLnJlcGxhY2UoY29tbWVudFN0cmlwUkUsIFwiXCIpO1xufVxuY29uc3QgY3NzVmFyTmFtZUVzY2FwZVN5bWJvbHNSRSA9IC9bICFcIiMkJSYnKCkqKywuLzo7PD0+P0BbXFxcXFxcXV5ge3x9fl0vZztcbmZ1bmN0aW9uIGdldEVzY2FwZWRDc3NWYXJOYW1lKGtleSwgZG91YmxlRXNjYXBlKSB7XG4gIHJldHVybiBrZXkucmVwbGFjZShcbiAgICBjc3NWYXJOYW1lRXNjYXBlU3ltYm9sc1JFLFxuICAgIChzKSA9PiBkb3VibGVFc2NhcGUgPyBzID09PSAnXCInID8gJ1xcXFxcXFxcXFxcXFwiJyA6IGBcXFxcXFxcXCR7c31gIDogYFxcXFwke3N9YFxuICApO1xufVxuXG5mdW5jdGlvbiBsb29zZUNvbXBhcmVBcnJheXMoYSwgYikge1xuICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gIGxldCBlcXVhbCA9IHRydWU7XG4gIGZvciAobGV0IGkgPSAwOyBlcXVhbCAmJiBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgIGVxdWFsID0gbG9vc2VFcXVhbChhW2ldLCBiW2ldKTtcbiAgfVxuICByZXR1cm4gZXF1YWw7XG59XG5mdW5jdGlvbiBsb29zZUVxdWFsKGEsIGIpIHtcbiAgaWYgKGEgPT09IGIpIHJldHVybiB0cnVlO1xuICBsZXQgYVZhbGlkVHlwZSA9IGlzRGF0ZShhKTtcbiAgbGV0IGJWYWxpZFR5cGUgPSBpc0RhdGUoYik7XG4gIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICByZXR1cm4gYVZhbGlkVHlwZSAmJiBiVmFsaWRUeXBlID8gYS5nZXRUaW1lKCkgPT09IGIuZ2V0VGltZSgpIDogZmFsc2U7XG4gIH1cbiAgYVZhbGlkVHlwZSA9IGlzU3ltYm9sKGEpO1xuICBiVmFsaWRUeXBlID0gaXNTeW1ib2woYik7XG4gIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICByZXR1cm4gYSA9PT0gYjtcbiAgfVxuICBhVmFsaWRUeXBlID0gaXNBcnJheShhKTtcbiAgYlZhbGlkVHlwZSA9IGlzQXJyYXkoYik7XG4gIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICByZXR1cm4gYVZhbGlkVHlwZSAmJiBiVmFsaWRUeXBlID8gbG9vc2VDb21wYXJlQXJyYXlzKGEsIGIpIDogZmFsc2U7XG4gIH1cbiAgYVZhbGlkVHlwZSA9IGlzT2JqZWN0KGEpO1xuICBiVmFsaWRUeXBlID0gaXNPYmplY3QoYik7XG4gIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICBpZiAoIWFWYWxpZFR5cGUgfHwgIWJWYWxpZFR5cGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgYUtleXNDb3VudCA9IE9iamVjdC5rZXlzKGEpLmxlbmd0aDtcbiAgICBjb25zdCBiS2V5c0NvdW50ID0gT2JqZWN0LmtleXMoYikubGVuZ3RoO1xuICAgIGlmIChhS2V5c0NvdW50ICE9PSBiS2V5c0NvdW50KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIGEpIHtcbiAgICAgIGNvbnN0IGFIYXNLZXkgPSBhLmhhc093blByb3BlcnR5KGtleSk7XG4gICAgICBjb25zdCBiSGFzS2V5ID0gYi5oYXNPd25Qcm9wZXJ0eShrZXkpO1xuICAgICAgaWYgKGFIYXNLZXkgJiYgIWJIYXNLZXkgfHwgIWFIYXNLZXkgJiYgYkhhc0tleSB8fCAhbG9vc2VFcXVhbChhW2tleV0sIGJba2V5XSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gU3RyaW5nKGEpID09PSBTdHJpbmcoYik7XG59XG5mdW5jdGlvbiBsb29zZUluZGV4T2YoYXJyLCB2YWwpIHtcbiAgcmV0dXJuIGFyci5maW5kSW5kZXgoKGl0ZW0pID0+IGxvb3NlRXF1YWwoaXRlbSwgdmFsKSk7XG59XG5cbmNvbnN0IGlzUmVmID0gKHZhbCkgPT4ge1xuICByZXR1cm4gISEodmFsICYmIHZhbFtcIl9fdl9pc1JlZlwiXSA9PT0gdHJ1ZSk7XG59O1xuY29uc3QgdG9EaXNwbGF5U3RyaW5nID0gKHZhbCkgPT4ge1xuICByZXR1cm4gaXNTdHJpbmcodmFsKSA/IHZhbCA6IHZhbCA9PSBudWxsID8gXCJcIiA6IGlzQXJyYXkodmFsKSB8fCBpc09iamVjdCh2YWwpICYmICh2YWwudG9TdHJpbmcgPT09IG9iamVjdFRvU3RyaW5nIHx8ICFpc0Z1bmN0aW9uKHZhbC50b1N0cmluZykpID8gaXNSZWYodmFsKSA/IHRvRGlzcGxheVN0cmluZyh2YWwudmFsdWUpIDogSlNPTi5zdHJpbmdpZnkodmFsLCByZXBsYWNlciwgMikgOiBTdHJpbmcodmFsKTtcbn07XG5jb25zdCByZXBsYWNlciA9IChfa2V5LCB2YWwpID0+IHtcbiAgaWYgKGlzUmVmKHZhbCkpIHtcbiAgICByZXR1cm4gcmVwbGFjZXIoX2tleSwgdmFsLnZhbHVlKTtcbiAgfSBlbHNlIGlmIChpc01hcCh2YWwpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFtgTWFwKCR7dmFsLnNpemV9KWBdOiBbLi4udmFsLmVudHJpZXMoKV0ucmVkdWNlKFxuICAgICAgICAoZW50cmllcywgW2tleSwgdmFsMl0sIGkpID0+IHtcbiAgICAgICAgICBlbnRyaWVzW3N0cmluZ2lmeVN5bWJvbChrZXksIGkpICsgXCIgPT5cIl0gPSB2YWwyO1xuICAgICAgICAgIHJldHVybiBlbnRyaWVzO1xuICAgICAgICB9LFxuICAgICAgICB7fVxuICAgICAgKVxuICAgIH07XG4gIH0gZWxzZSBpZiAoaXNTZXQodmFsKSkge1xuICAgIHJldHVybiB7XG4gICAgICBbYFNldCgke3ZhbC5zaXplfSlgXTogWy4uLnZhbC52YWx1ZXMoKV0ubWFwKCh2KSA9PiBzdHJpbmdpZnlTeW1ib2wodikpXG4gICAgfTtcbiAgfSBlbHNlIGlmIChpc1N5bWJvbCh2YWwpKSB7XG4gICAgcmV0dXJuIHN0cmluZ2lmeVN5bWJvbCh2YWwpO1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbCkgJiYgIWlzQXJyYXkodmFsKSAmJiAhaXNQbGFpbk9iamVjdCh2YWwpKSB7XG4gICAgcmV0dXJuIFN0cmluZyh2YWwpO1xuICB9XG4gIHJldHVybiB2YWw7XG59O1xuY29uc3Qgc3RyaW5naWZ5U3ltYm9sID0gKHYsIGkgPSBcIlwiKSA9PiB7XG4gIHZhciBfYTtcbiAgcmV0dXJuIChcbiAgICAvLyBTeW1ib2wuZGVzY3JpcHRpb24gaW4gZXMyMDE5KyBzbyB3ZSBuZWVkIHRvIGNhc3QgaGVyZSB0byBwYXNzXG4gICAgLy8gdGhlIGxpYjogZXMyMDE2IGNoZWNrXG4gICAgaXNTeW1ib2wodikgPyBgU3ltYm9sKCR7KF9hID0gdi5kZXNjcmlwdGlvbikgIT0gbnVsbCA/IF9hIDogaX0pYCA6IHZcbiAgKTtcbn07XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNzc1ZhclZhbHVlKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIFwiaW5pdGlhbFwiO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IFwiXCIgPyBcIiBcIiA6IHZhbHVlO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwibnVtYmVyXCIgfHwgIU51bWJlci5pc0Zpbml0ZSh2YWx1ZSkpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIltWdWUgd2Fybl0gSW52YWxpZCB2YWx1ZSB1c2VkIGZvciBDU1MgYmluZGluZy4gRXhwZWN0ZWQgYSBzdHJpbmcgb3IgYSBmaW5pdGUgbnVtYmVyIGJ1dCByZWNlaXZlZDpcIixcbiAgICAgICAgdmFsdWVcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBTdHJpbmcodmFsdWUpO1xufVxuXG5leHBvcnQgeyBFTVBUWV9BUlIsIEVNUFRZX09CSiwgTk8sIE5PT1AsIFBhdGNoRmxhZ05hbWVzLCBQYXRjaEZsYWdzLCBTaGFwZUZsYWdzLCBTbG90RmxhZ3MsIGNhbWVsaXplLCBjYXBpdGFsaXplLCBjc3NWYXJOYW1lRXNjYXBlU3ltYm9sc1JFLCBkZWYsIGVzY2FwZUh0bWwsIGVzY2FwZUh0bWxDb21tZW50LCBleHRlbmQsIGdlbkNhY2hlS2V5LCBnZW5Qcm9wc0FjY2Vzc0V4cCwgZ2VuZXJhdGVDb2RlRnJhbWUsIGdldEVzY2FwZWRDc3NWYXJOYW1lLCBnZXRHbG9iYWxUaGlzLCBoYXNDaGFuZ2VkLCBoYXNPd24sIGh5cGhlbmF0ZSwgaW5jbHVkZUJvb2xlYW5BdHRyLCBpbnZva2VBcnJheUZucywgaXNBcnJheSwgaXNCb29sZWFuQXR0ciwgaXNCdWlsdEluRGlyZWN0aXZlLCBpc0RhdGUsIGlzRnVuY3Rpb24sIGlzR2xvYmFsbHlBbGxvd2VkLCBpc0dsb2JhbGx5V2hpdGVsaXN0ZWQsIGlzSFRNTFRhZywgaXNJbnRlZ2VyS2V5LCBpc0tub3duSHRtbEF0dHIsIGlzS25vd25NYXRoTUxBdHRyLCBpc0tub3duU3ZnQXR0ciwgaXNNYXAsIGlzTWF0aE1MVGFnLCBpc01vZGVsTGlzdGVuZXIsIGlzT2JqZWN0LCBpc09uLCBpc1BsYWluT2JqZWN0LCBpc1Byb21pc2UsIGlzUmVnRXhwLCBpc1JlbmRlcmFibGVBdHRyVmFsdWUsIGlzUmVzZXJ2ZWRQcm9wLCBpc1NTUlNhZmVBdHRyTmFtZSwgaXNTVkdUYWcsIGlzU2V0LCBpc1NwZWNpYWxCb29sZWFuQXR0ciwgaXNTdHJpbmcsIGlzU3ltYm9sLCBpc1ZvaWRUYWcsIGxvb3NlRXF1YWwsIGxvb3NlSW5kZXhPZiwgbG9vc2VUb051bWJlciwgbWFrZU1hcCwgbm9ybWFsaXplQ2xhc3MsIG5vcm1hbGl6ZUNzc1ZhclZhbHVlLCBub3JtYWxpemVQcm9wcywgbm9ybWFsaXplU3R5bGUsIG9iamVjdFRvU3RyaW5nLCBwYXJzZVN0cmluZ1N0eWxlLCBwcm9wc1RvQXR0ck1hcCwgcmVtb3ZlLCBzbG90RmxhZ3NUZXh0LCBzdHJpbmdpZnlTdHlsZSwgdG9EaXNwbGF5U3RyaW5nLCB0b0hhbmRsZXJLZXksIHRvTnVtYmVyLCB0b1Jhd1R5cGUsIHRvVHlwZVN0cmluZyB9O1xuIiwiLyoqXG4qIEB2dWUvcmVhY3Rpdml0eSB2My41LjI1XG4qIChjKSAyMDE4LXByZXNlbnQgWXV4aSAoRXZhbikgWW91IGFuZCBWdWUgY29udHJpYnV0b3JzXG4qIEBsaWNlbnNlIE1JVFxuKiovXG5pbXBvcnQgeyBleHRlbmQsIGhhc0NoYW5nZWQsIGlzQXJyYXksIGlzSW50ZWdlcktleSwgaXNTeW1ib2wsIGlzTWFwLCBoYXNPd24sIG1ha2VNYXAsIGlzT2JqZWN0LCBjYXBpdGFsaXplLCB0b1Jhd1R5cGUsIGRlZiwgaXNGdW5jdGlvbiwgRU1QVFlfT0JKLCBpc1NldCwgaXNQbGFpbk9iamVjdCwgcmVtb3ZlLCBOT09QIH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuXG5mdW5jdGlvbiB3YXJuKG1zZywgLi4uYXJncykge1xuICBjb25zb2xlLndhcm4oYFtWdWUgd2Fybl0gJHttc2d9YCwgLi4uYXJncyk7XG59XG5cbmxldCBhY3RpdmVFZmZlY3RTY29wZTtcbmNsYXNzIEVmZmVjdFNjb3BlIHtcbiAgY29uc3RydWN0b3IoZGV0YWNoZWQgPSBmYWxzZSkge1xuICAgIHRoaXMuZGV0YWNoZWQgPSBkZXRhY2hlZDtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLl9hY3RpdmUgPSB0cnVlO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbCB0cmFjayBgb25gIGNhbGxzLCBhbGxvdyBgb25gIGNhbGwgbXVsdGlwbGUgdGltZXNcbiAgICAgKi9cbiAgICB0aGlzLl9vbiA9IDA7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5lZmZlY3RzID0gW107XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5jbGVhbnVwcyA9IFtdO1xuICAgIHRoaXMuX2lzUGF1c2VkID0gZmFsc2U7XG4gICAgdGhpcy5wYXJlbnQgPSBhY3RpdmVFZmZlY3RTY29wZTtcbiAgICBpZiAoIWRldGFjaGVkICYmIGFjdGl2ZUVmZmVjdFNjb3BlKSB7XG4gICAgICB0aGlzLmluZGV4ID0gKGFjdGl2ZUVmZmVjdFNjb3BlLnNjb3BlcyB8fCAoYWN0aXZlRWZmZWN0U2NvcGUuc2NvcGVzID0gW10pKS5wdXNoKFxuICAgICAgICB0aGlzXG4gICAgICApIC0gMTtcbiAgICB9XG4gIH1cbiAgZ2V0IGFjdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlO1xuICB9XG4gIHBhdXNlKCkge1xuICAgIGlmICh0aGlzLl9hY3RpdmUpIHtcbiAgICAgIHRoaXMuX2lzUGF1c2VkID0gdHJ1ZTtcbiAgICAgIGxldCBpLCBsO1xuICAgICAgaWYgKHRoaXMuc2NvcGVzKSB7XG4gICAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLnNjb3Blcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB0aGlzLnNjb3Blc1tpXS5wYXVzZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5lZmZlY3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzLmVmZmVjdHNbaV0ucGF1c2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJlc3VtZXMgdGhlIGVmZmVjdCBzY29wZSwgaW5jbHVkaW5nIGFsbCBjaGlsZCBzY29wZXMgYW5kIGVmZmVjdHMuXG4gICAqL1xuICByZXN1bWUoKSB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZSkge1xuICAgICAgaWYgKHRoaXMuX2lzUGF1c2VkKSB7XG4gICAgICAgIHRoaXMuX2lzUGF1c2VkID0gZmFsc2U7XG4gICAgICAgIGxldCBpLCBsO1xuICAgICAgICBpZiAodGhpcy5zY29wZXMpIHtcbiAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5zY29wZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnNjb3Blc1tpXS5yZXN1bWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMuZWZmZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB0aGlzLmVmZmVjdHNbaV0ucmVzdW1lKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcnVuKGZuKSB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZSkge1xuICAgICAgY29uc3QgY3VycmVudEVmZmVjdFNjb3BlID0gYWN0aXZlRWZmZWN0U2NvcGU7XG4gICAgICB0cnkge1xuICAgICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgYWN0aXZlRWZmZWN0U2NvcGUgPSBjdXJyZW50RWZmZWN0U2NvcGU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICB3YXJuKGBjYW5ub3QgcnVuIGFuIGluYWN0aXZlIGVmZmVjdCBzY29wZS5gKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uIG5vbi1kZXRhY2hlZCBzY29wZXNcbiAgICogQGludGVybmFsXG4gICAqL1xuICBvbigpIHtcbiAgICBpZiAoKyt0aGlzLl9vbiA9PT0gMSkge1xuICAgICAgdGhpcy5wcmV2U2NvcGUgPSBhY3RpdmVFZmZlY3RTY29wZTtcbiAgICAgIGFjdGl2ZUVmZmVjdFNjb3BlID0gdGhpcztcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uIG5vbi1kZXRhY2hlZCBzY29wZXNcbiAgICogQGludGVybmFsXG4gICAqL1xuICBvZmYoKSB7XG4gICAgaWYgKHRoaXMuX29uID4gMCAmJiAtLXRoaXMuX29uID09PSAwKSB7XG4gICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IHRoaXMucHJldlNjb3BlO1xuICAgICAgdGhpcy5wcmV2U2NvcGUgPSB2b2lkIDA7XG4gICAgfVxuICB9XG4gIHN0b3AoZnJvbVBhcmVudCkge1xuICAgIGlmICh0aGlzLl9hY3RpdmUpIHtcbiAgICAgIHRoaXMuX2FjdGl2ZSA9IGZhbHNlO1xuICAgICAgbGV0IGksIGw7XG4gICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5lZmZlY3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzLmVmZmVjdHNbaV0uc3RvcCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5lZmZlY3RzLmxlbmd0aCA9IDA7XG4gICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jbGVhbnVwcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdGhpcy5jbGVhbnVwc1tpXSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5jbGVhbnVwcy5sZW5ndGggPSAwO1xuICAgICAgaWYgKHRoaXMuc2NvcGVzKSB7XG4gICAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLnNjb3Blcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB0aGlzLnNjb3Blc1tpXS5zdG9wKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2NvcGVzLmxlbmd0aCA9IDA7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuZGV0YWNoZWQgJiYgdGhpcy5wYXJlbnQgJiYgIWZyb21QYXJlbnQpIHtcbiAgICAgICAgY29uc3QgbGFzdCA9IHRoaXMucGFyZW50LnNjb3Blcy5wb3AoKTtcbiAgICAgICAgaWYgKGxhc3QgJiYgbGFzdCAhPT0gdGhpcykge1xuICAgICAgICAgIHRoaXMucGFyZW50LnNjb3Blc1t0aGlzLmluZGV4XSA9IGxhc3Q7XG4gICAgICAgICAgbGFzdC5pbmRleCA9IHRoaXMuaW5kZXg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMucGFyZW50ID0gdm9pZCAwO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZWZmZWN0U2NvcGUoZGV0YWNoZWQpIHtcbiAgcmV0dXJuIG5ldyBFZmZlY3RTY29wZShkZXRhY2hlZCk7XG59XG5mdW5jdGlvbiBnZXRDdXJyZW50U2NvcGUoKSB7XG4gIHJldHVybiBhY3RpdmVFZmZlY3RTY29wZTtcbn1cbmZ1bmN0aW9uIG9uU2NvcGVEaXNwb3NlKGZuLCBmYWlsU2lsZW50bHkgPSBmYWxzZSkge1xuICBpZiAoYWN0aXZlRWZmZWN0U2NvcGUpIHtcbiAgICBhY3RpdmVFZmZlY3RTY29wZS5jbGVhbnVwcy5wdXNoKGZuKTtcbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFmYWlsU2lsZW50bHkpIHtcbiAgICB3YXJuKFxuICAgICAgYG9uU2NvcGVEaXNwb3NlKCkgaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgbm8gYWN0aXZlIGVmZmVjdCBzY29wZSB0byBiZSBhc3NvY2lhdGVkIHdpdGguYFxuICAgICk7XG4gIH1cbn1cblxubGV0IGFjdGl2ZVN1YjtcbmNvbnN0IEVmZmVjdEZsYWdzID0ge1xuICBcIkFDVElWRVwiOiAxLFxuICBcIjFcIjogXCJBQ1RJVkVcIixcbiAgXCJSVU5OSU5HXCI6IDIsXG4gIFwiMlwiOiBcIlJVTk5JTkdcIixcbiAgXCJUUkFDS0lOR1wiOiA0LFxuICBcIjRcIjogXCJUUkFDS0lOR1wiLFxuICBcIk5PVElGSUVEXCI6IDgsXG4gIFwiOFwiOiBcIk5PVElGSUVEXCIsXG4gIFwiRElSVFlcIjogMTYsXG4gIFwiMTZcIjogXCJESVJUWVwiLFxuICBcIkFMTE9XX1JFQ1VSU0VcIjogMzIsXG4gIFwiMzJcIjogXCJBTExPV19SRUNVUlNFXCIsXG4gIFwiUEFVU0VEXCI6IDY0LFxuICBcIjY0XCI6IFwiUEFVU0VEXCIsXG4gIFwiRVZBTFVBVEVEXCI6IDEyOCxcbiAgXCIxMjhcIjogXCJFVkFMVUFURURcIlxufTtcbmNvbnN0IHBhdXNlZFF1ZXVlRWZmZWN0cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpO1xuY2xhc3MgUmVhY3RpdmVFZmZlY3Qge1xuICBjb25zdHJ1Y3Rvcihmbikge1xuICAgIHRoaXMuZm4gPSBmbjtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLmRlcHMgPSB2b2lkIDA7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5kZXBzVGFpbCA9IHZvaWQgMDtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLmZsYWdzID0gMSB8IDQ7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5uZXh0ID0gdm9pZCAwO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuY2xlYW51cCA9IHZvaWQgMDtcbiAgICB0aGlzLnNjaGVkdWxlciA9IHZvaWQgMDtcbiAgICBpZiAoYWN0aXZlRWZmZWN0U2NvcGUgJiYgYWN0aXZlRWZmZWN0U2NvcGUuYWN0aXZlKSB7XG4gICAgICBhY3RpdmVFZmZlY3RTY29wZS5lZmZlY3RzLnB1c2godGhpcyk7XG4gICAgfVxuICB9XG4gIHBhdXNlKCkge1xuICAgIHRoaXMuZmxhZ3MgfD0gNjQ7XG4gIH1cbiAgcmVzdW1lKCkge1xuICAgIGlmICh0aGlzLmZsYWdzICYgNjQpIHtcbiAgICAgIHRoaXMuZmxhZ3MgJj0gLTY1O1xuICAgICAgaWYgKHBhdXNlZFF1ZXVlRWZmZWN0cy5oYXModGhpcykpIHtcbiAgICAgICAgcGF1c2VkUXVldWVFZmZlY3RzLmRlbGV0ZSh0aGlzKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIG5vdGlmeSgpIHtcbiAgICBpZiAodGhpcy5mbGFncyAmIDIgJiYgISh0aGlzLmZsYWdzICYgMzIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghKHRoaXMuZmxhZ3MgJiA4KSkge1xuICAgICAgYmF0Y2godGhpcyk7XG4gICAgfVxuICB9XG4gIHJ1bigpIHtcbiAgICBpZiAoISh0aGlzLmZsYWdzICYgMSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmZuKCk7XG4gICAgfVxuICAgIHRoaXMuZmxhZ3MgfD0gMjtcbiAgICBjbGVhbnVwRWZmZWN0KHRoaXMpO1xuICAgIHByZXBhcmVEZXBzKHRoaXMpO1xuICAgIGNvbnN0IHByZXZFZmZlY3QgPSBhY3RpdmVTdWI7XG4gICAgY29uc3QgcHJldlNob3VsZFRyYWNrID0gc2hvdWxkVHJhY2s7XG4gICAgYWN0aXZlU3ViID0gdGhpcztcbiAgICBzaG91bGRUcmFjayA9IHRydWU7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB0aGlzLmZuKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGFjdGl2ZVN1YiAhPT0gdGhpcykge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIFwiQWN0aXZlIGVmZmVjdCB3YXMgbm90IHJlc3RvcmVkIGNvcnJlY3RseSAtIHRoaXMgaXMgbGlrZWx5IGEgVnVlIGludGVybmFsIGJ1Zy5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY2xlYW51cERlcHModGhpcyk7XG4gICAgICBhY3RpdmVTdWIgPSBwcmV2RWZmZWN0O1xuICAgICAgc2hvdWxkVHJhY2sgPSBwcmV2U2hvdWxkVHJhY2s7XG4gICAgICB0aGlzLmZsYWdzICY9IC0zO1xuICAgIH1cbiAgfVxuICBzdG9wKCkge1xuICAgIGlmICh0aGlzLmZsYWdzICYgMSkge1xuICAgICAgZm9yIChsZXQgbGluayA9IHRoaXMuZGVwczsgbGluazsgbGluayA9IGxpbmsubmV4dERlcCkge1xuICAgICAgICByZW1vdmVTdWIobGluayk7XG4gICAgICB9XG4gICAgICB0aGlzLmRlcHMgPSB0aGlzLmRlcHNUYWlsID0gdm9pZCAwO1xuICAgICAgY2xlYW51cEVmZmVjdCh0aGlzKTtcbiAgICAgIHRoaXMub25TdG9wICYmIHRoaXMub25TdG9wKCk7XG4gICAgICB0aGlzLmZsYWdzICY9IC0yO1xuICAgIH1cbiAgfVxuICB0cmlnZ2VyKCkge1xuICAgIGlmICh0aGlzLmZsYWdzICYgNjQpIHtcbiAgICAgIHBhdXNlZFF1ZXVlRWZmZWN0cy5hZGQodGhpcyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnNjaGVkdWxlcikge1xuICAgICAgdGhpcy5zY2hlZHVsZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ydW5JZkRpcnR5KCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHJ1bklmRGlydHkoKSB7XG4gICAgaWYgKGlzRGlydHkodGhpcykpIHtcbiAgICAgIHRoaXMucnVuKCk7XG4gICAgfVxuICB9XG4gIGdldCBkaXJ0eSgpIHtcbiAgICByZXR1cm4gaXNEaXJ0eSh0aGlzKTtcbiAgfVxufVxubGV0IGJhdGNoRGVwdGggPSAwO1xubGV0IGJhdGNoZWRTdWI7XG5sZXQgYmF0Y2hlZENvbXB1dGVkO1xuZnVuY3Rpb24gYmF0Y2goc3ViLCBpc0NvbXB1dGVkID0gZmFsc2UpIHtcbiAgc3ViLmZsYWdzIHw9IDg7XG4gIGlmIChpc0NvbXB1dGVkKSB7XG4gICAgc3ViLm5leHQgPSBiYXRjaGVkQ29tcHV0ZWQ7XG4gICAgYmF0Y2hlZENvbXB1dGVkID0gc3ViO1xuICAgIHJldHVybjtcbiAgfVxuICBzdWIubmV4dCA9IGJhdGNoZWRTdWI7XG4gIGJhdGNoZWRTdWIgPSBzdWI7XG59XG5mdW5jdGlvbiBzdGFydEJhdGNoKCkge1xuICBiYXRjaERlcHRoKys7XG59XG5mdW5jdGlvbiBlbmRCYXRjaCgpIHtcbiAgaWYgKC0tYmF0Y2hEZXB0aCA+IDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGJhdGNoZWRDb21wdXRlZCkge1xuICAgIGxldCBlID0gYmF0Y2hlZENvbXB1dGVkO1xuICAgIGJhdGNoZWRDb21wdXRlZCA9IHZvaWQgMDtcbiAgICB3aGlsZSAoZSkge1xuICAgICAgY29uc3QgbmV4dCA9IGUubmV4dDtcbiAgICAgIGUubmV4dCA9IHZvaWQgMDtcbiAgICAgIGUuZmxhZ3MgJj0gLTk7XG4gICAgICBlID0gbmV4dDtcbiAgICB9XG4gIH1cbiAgbGV0IGVycm9yO1xuICB3aGlsZSAoYmF0Y2hlZFN1Yikge1xuICAgIGxldCBlID0gYmF0Y2hlZFN1YjtcbiAgICBiYXRjaGVkU3ViID0gdm9pZCAwO1xuICAgIHdoaWxlIChlKSB7XG4gICAgICBjb25zdCBuZXh0ID0gZS5uZXh0O1xuICAgICAgZS5uZXh0ID0gdm9pZCAwO1xuICAgICAgZS5mbGFncyAmPSAtOTtcbiAgICAgIGlmIChlLmZsYWdzICYgMSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIDtcbiAgICAgICAgICBlLnRyaWdnZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKCFlcnJvcikgZXJyb3IgPSBlcnI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGUgPSBuZXh0O1xuICAgIH1cbiAgfVxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xufVxuZnVuY3Rpb24gcHJlcGFyZURlcHMoc3ViKSB7XG4gIGZvciAobGV0IGxpbmsgPSBzdWIuZGVwczsgbGluazsgbGluayA9IGxpbmsubmV4dERlcCkge1xuICAgIGxpbmsudmVyc2lvbiA9IC0xO1xuICAgIGxpbmsucHJldkFjdGl2ZUxpbmsgPSBsaW5rLmRlcC5hY3RpdmVMaW5rO1xuICAgIGxpbmsuZGVwLmFjdGl2ZUxpbmsgPSBsaW5rO1xuICB9XG59XG5mdW5jdGlvbiBjbGVhbnVwRGVwcyhzdWIpIHtcbiAgbGV0IGhlYWQ7XG4gIGxldCB0YWlsID0gc3ViLmRlcHNUYWlsO1xuICBsZXQgbGluayA9IHRhaWw7XG4gIHdoaWxlIChsaW5rKSB7XG4gICAgY29uc3QgcHJldiA9IGxpbmsucHJldkRlcDtcbiAgICBpZiAobGluay52ZXJzaW9uID09PSAtMSkge1xuICAgICAgaWYgKGxpbmsgPT09IHRhaWwpIHRhaWwgPSBwcmV2O1xuICAgICAgcmVtb3ZlU3ViKGxpbmspO1xuICAgICAgcmVtb3ZlRGVwKGxpbmspO1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWFkID0gbGluaztcbiAgICB9XG4gICAgbGluay5kZXAuYWN0aXZlTGluayA9IGxpbmsucHJldkFjdGl2ZUxpbms7XG4gICAgbGluay5wcmV2QWN0aXZlTGluayA9IHZvaWQgMDtcbiAgICBsaW5rID0gcHJldjtcbiAgfVxuICBzdWIuZGVwcyA9IGhlYWQ7XG4gIHN1Yi5kZXBzVGFpbCA9IHRhaWw7XG59XG5mdW5jdGlvbiBpc0RpcnR5KHN1Yikge1xuICBmb3IgKGxldCBsaW5rID0gc3ViLmRlcHM7IGxpbms7IGxpbmsgPSBsaW5rLm5leHREZXApIHtcbiAgICBpZiAobGluay5kZXAudmVyc2lvbiAhPT0gbGluay52ZXJzaW9uIHx8IGxpbmsuZGVwLmNvbXB1dGVkICYmIChyZWZyZXNoQ29tcHV0ZWQobGluay5kZXAuY29tcHV0ZWQpIHx8IGxpbmsuZGVwLnZlcnNpb24gIT09IGxpbmsudmVyc2lvbikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICBpZiAoc3ViLl9kaXJ0eSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHJlZnJlc2hDb21wdXRlZChjb21wdXRlZCkge1xuICBpZiAoY29tcHV0ZWQuZmxhZ3MgJiA0ICYmICEoY29tcHV0ZWQuZmxhZ3MgJiAxNikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29tcHV0ZWQuZmxhZ3MgJj0gLTE3O1xuICBpZiAoY29tcHV0ZWQuZ2xvYmFsVmVyc2lvbiA9PT0gZ2xvYmFsVmVyc2lvbikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb21wdXRlZC5nbG9iYWxWZXJzaW9uID0gZ2xvYmFsVmVyc2lvbjtcbiAgaWYgKCFjb21wdXRlZC5pc1NTUiAmJiBjb21wdXRlZC5mbGFncyAmIDEyOCAmJiAoIWNvbXB1dGVkLmRlcHMgJiYgIWNvbXB1dGVkLl9kaXJ0eSB8fCAhaXNEaXJ0eShjb21wdXRlZCkpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbXB1dGVkLmZsYWdzIHw9IDI7XG4gIGNvbnN0IGRlcCA9IGNvbXB1dGVkLmRlcDtcbiAgY29uc3QgcHJldlN1YiA9IGFjdGl2ZVN1YjtcbiAgY29uc3QgcHJldlNob3VsZFRyYWNrID0gc2hvdWxkVHJhY2s7XG4gIGFjdGl2ZVN1YiA9IGNvbXB1dGVkO1xuICBzaG91bGRUcmFjayA9IHRydWU7XG4gIHRyeSB7XG4gICAgcHJlcGFyZURlcHMoY29tcHV0ZWQpO1xuICAgIGNvbnN0IHZhbHVlID0gY29tcHV0ZWQuZm4oY29tcHV0ZWQuX3ZhbHVlKTtcbiAgICBpZiAoZGVwLnZlcnNpb24gPT09IDAgfHwgaGFzQ2hhbmdlZCh2YWx1ZSwgY29tcHV0ZWQuX3ZhbHVlKSkge1xuICAgICAgY29tcHV0ZWQuZmxhZ3MgfD0gMTI4O1xuICAgICAgY29tcHV0ZWQuX3ZhbHVlID0gdmFsdWU7XG4gICAgICBkZXAudmVyc2lvbisrO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZGVwLnZlcnNpb24rKztcbiAgICB0aHJvdyBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgYWN0aXZlU3ViID0gcHJldlN1YjtcbiAgICBzaG91bGRUcmFjayA9IHByZXZTaG91bGRUcmFjaztcbiAgICBjbGVhbnVwRGVwcyhjb21wdXRlZCk7XG4gICAgY29tcHV0ZWQuZmxhZ3MgJj0gLTM7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlbW92ZVN1YihsaW5rLCBzb2Z0ID0gZmFsc2UpIHtcbiAgY29uc3QgeyBkZXAsIHByZXZTdWIsIG5leHRTdWIgfSA9IGxpbms7XG4gIGlmIChwcmV2U3ViKSB7XG4gICAgcHJldlN1Yi5uZXh0U3ViID0gbmV4dFN1YjtcbiAgICBsaW5rLnByZXZTdWIgPSB2b2lkIDA7XG4gIH1cbiAgaWYgKG5leHRTdWIpIHtcbiAgICBuZXh0U3ViLnByZXZTdWIgPSBwcmV2U3ViO1xuICAgIGxpbmsubmV4dFN1YiA9IHZvaWQgMDtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBkZXAuc3Vic0hlYWQgPT09IGxpbmspIHtcbiAgICBkZXAuc3Vic0hlYWQgPSBuZXh0U3ViO1xuICB9XG4gIGlmIChkZXAuc3VicyA9PT0gbGluaykge1xuICAgIGRlcC5zdWJzID0gcHJldlN1YjtcbiAgICBpZiAoIXByZXZTdWIgJiYgZGVwLmNvbXB1dGVkKSB7XG4gICAgICBkZXAuY29tcHV0ZWQuZmxhZ3MgJj0gLTU7XG4gICAgICBmb3IgKGxldCBsID0gZGVwLmNvbXB1dGVkLmRlcHM7IGw7IGwgPSBsLm5leHREZXApIHtcbiAgICAgICAgcmVtb3ZlU3ViKGwsIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoIXNvZnQgJiYgIS0tZGVwLnNjICYmIGRlcC5tYXApIHtcbiAgICBkZXAubWFwLmRlbGV0ZShkZXAua2V5KTtcbiAgfVxufVxuZnVuY3Rpb24gcmVtb3ZlRGVwKGxpbmspIHtcbiAgY29uc3QgeyBwcmV2RGVwLCBuZXh0RGVwIH0gPSBsaW5rO1xuICBpZiAocHJldkRlcCkge1xuICAgIHByZXZEZXAubmV4dERlcCA9IG5leHREZXA7XG4gICAgbGluay5wcmV2RGVwID0gdm9pZCAwO1xuICB9XG4gIGlmIChuZXh0RGVwKSB7XG4gICAgbmV4dERlcC5wcmV2RGVwID0gcHJldkRlcDtcbiAgICBsaW5rLm5leHREZXAgPSB2b2lkIDA7XG4gIH1cbn1cbmZ1bmN0aW9uIGVmZmVjdChmbiwgb3B0aW9ucykge1xuICBpZiAoZm4uZWZmZWN0IGluc3RhbmNlb2YgUmVhY3RpdmVFZmZlY3QpIHtcbiAgICBmbiA9IGZuLmVmZmVjdC5mbjtcbiAgfVxuICBjb25zdCBlID0gbmV3IFJlYWN0aXZlRWZmZWN0KGZuKTtcbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBleHRlbmQoZSwgb3B0aW9ucyk7XG4gIH1cbiAgdHJ5IHtcbiAgICBlLnJ1bigpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBlLnN0b3AoKTtcbiAgICB0aHJvdyBlcnI7XG4gIH1cbiAgY29uc3QgcnVubmVyID0gZS5ydW4uYmluZChlKTtcbiAgcnVubmVyLmVmZmVjdCA9IGU7XG4gIHJldHVybiBydW5uZXI7XG59XG5mdW5jdGlvbiBzdG9wKHJ1bm5lcikge1xuICBydW5uZXIuZWZmZWN0LnN0b3AoKTtcbn1cbmxldCBzaG91bGRUcmFjayA9IHRydWU7XG5jb25zdCB0cmFja1N0YWNrID0gW107XG5mdW5jdGlvbiBwYXVzZVRyYWNraW5nKCkge1xuICB0cmFja1N0YWNrLnB1c2goc2hvdWxkVHJhY2spO1xuICBzaG91bGRUcmFjayA9IGZhbHNlO1xufVxuZnVuY3Rpb24gZW5hYmxlVHJhY2tpbmcoKSB7XG4gIHRyYWNrU3RhY2sucHVzaChzaG91bGRUcmFjayk7XG4gIHNob3VsZFRyYWNrID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHJlc2V0VHJhY2tpbmcoKSB7XG4gIGNvbnN0IGxhc3QgPSB0cmFja1N0YWNrLnBvcCgpO1xuICBzaG91bGRUcmFjayA9IGxhc3QgPT09IHZvaWQgMCA/IHRydWUgOiBsYXN0O1xufVxuZnVuY3Rpb24gb25FZmZlY3RDbGVhbnVwKGZuLCBmYWlsU2lsZW50bHkgPSBmYWxzZSkge1xuICBpZiAoYWN0aXZlU3ViIGluc3RhbmNlb2YgUmVhY3RpdmVFZmZlY3QpIHtcbiAgICBhY3RpdmVTdWIuY2xlYW51cCA9IGZuO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWZhaWxTaWxlbnRseSkge1xuICAgIHdhcm4oXG4gICAgICBgb25FZmZlY3RDbGVhbnVwKCkgd2FzIGNhbGxlZCB3aGVuIHRoZXJlIHdhcyBubyBhY3RpdmUgZWZmZWN0IHRvIGFzc29jaWF0ZSB3aXRoLmBcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiBjbGVhbnVwRWZmZWN0KGUpIHtcbiAgY29uc3QgeyBjbGVhbnVwIH0gPSBlO1xuICBlLmNsZWFudXAgPSB2b2lkIDA7XG4gIGlmIChjbGVhbnVwKSB7XG4gICAgY29uc3QgcHJldlN1YiA9IGFjdGl2ZVN1YjtcbiAgICBhY3RpdmVTdWIgPSB2b2lkIDA7XG4gICAgdHJ5IHtcbiAgICAgIGNsZWFudXAoKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgYWN0aXZlU3ViID0gcHJldlN1YjtcbiAgICB9XG4gIH1cbn1cblxubGV0IGdsb2JhbFZlcnNpb24gPSAwO1xuY2xhc3MgTGluayB7XG4gIGNvbnN0cnVjdG9yKHN1YiwgZGVwKSB7XG4gICAgdGhpcy5zdWIgPSBzdWI7XG4gICAgdGhpcy5kZXAgPSBkZXA7XG4gICAgdGhpcy52ZXJzaW9uID0gZGVwLnZlcnNpb247XG4gICAgdGhpcy5uZXh0RGVwID0gdGhpcy5wcmV2RGVwID0gdGhpcy5uZXh0U3ViID0gdGhpcy5wcmV2U3ViID0gdGhpcy5wcmV2QWN0aXZlTGluayA9IHZvaWQgMDtcbiAgfVxufVxuY2xhc3MgRGVwIHtcbiAgLy8gVE9ETyBpc29sYXRlZERlY2xhcmF0aW9ucyBcIl9fdl9za2lwXCJcbiAgY29uc3RydWN0b3IoY29tcHV0ZWQpIHtcbiAgICB0aGlzLmNvbXB1dGVkID0gY29tcHV0ZWQ7XG4gICAgdGhpcy52ZXJzaW9uID0gMDtcbiAgICAvKipcbiAgICAgKiBMaW5rIGJldHdlZW4gdGhpcyBkZXAgYW5kIHRoZSBjdXJyZW50IGFjdGl2ZSBlZmZlY3RcbiAgICAgKi9cbiAgICB0aGlzLmFjdGl2ZUxpbmsgPSB2b2lkIDA7XG4gICAgLyoqXG4gICAgICogRG91Ymx5IGxpbmtlZCBsaXN0IHJlcHJlc2VudGluZyB0aGUgc3Vic2NyaWJpbmcgZWZmZWN0cyAodGFpbClcbiAgICAgKi9cbiAgICB0aGlzLnN1YnMgPSB2b2lkIDA7XG4gICAgLyoqXG4gICAgICogRm9yIG9iamVjdCBwcm9wZXJ0eSBkZXBzIGNsZWFudXBcbiAgICAgKi9cbiAgICB0aGlzLm1hcCA9IHZvaWQgMDtcbiAgICB0aGlzLmtleSA9IHZvaWQgMDtcbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmVyIGNvdW50ZXJcbiAgICAgKi9cbiAgICB0aGlzLnNjID0gMDtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLl9fdl9za2lwID0gdHJ1ZTtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgdGhpcy5zdWJzSGVhZCA9IHZvaWQgMDtcbiAgICB9XG4gIH1cbiAgdHJhY2soZGVidWdJbmZvKSB7XG4gICAgaWYgKCFhY3RpdmVTdWIgfHwgIXNob3VsZFRyYWNrIHx8IGFjdGl2ZVN1YiA9PT0gdGhpcy5jb21wdXRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgbGluayA9IHRoaXMuYWN0aXZlTGluaztcbiAgICBpZiAobGluayA9PT0gdm9pZCAwIHx8IGxpbmsuc3ViICE9PSBhY3RpdmVTdWIpIHtcbiAgICAgIGxpbmsgPSB0aGlzLmFjdGl2ZUxpbmsgPSBuZXcgTGluayhhY3RpdmVTdWIsIHRoaXMpO1xuICAgICAgaWYgKCFhY3RpdmVTdWIuZGVwcykge1xuICAgICAgICBhY3RpdmVTdWIuZGVwcyA9IGFjdGl2ZVN1Yi5kZXBzVGFpbCA9IGxpbms7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaW5rLnByZXZEZXAgPSBhY3RpdmVTdWIuZGVwc1RhaWw7XG4gICAgICAgIGFjdGl2ZVN1Yi5kZXBzVGFpbC5uZXh0RGVwID0gbGluaztcbiAgICAgICAgYWN0aXZlU3ViLmRlcHNUYWlsID0gbGluaztcbiAgICAgIH1cbiAgICAgIGFkZFN1YihsaW5rKTtcbiAgICB9IGVsc2UgaWYgKGxpbmsudmVyc2lvbiA9PT0gLTEpIHtcbiAgICAgIGxpbmsudmVyc2lvbiA9IHRoaXMudmVyc2lvbjtcbiAgICAgIGlmIChsaW5rLm5leHREZXApIHtcbiAgICAgICAgY29uc3QgbmV4dCA9IGxpbmsubmV4dERlcDtcbiAgICAgICAgbmV4dC5wcmV2RGVwID0gbGluay5wcmV2RGVwO1xuICAgICAgICBpZiAobGluay5wcmV2RGVwKSB7XG4gICAgICAgICAgbGluay5wcmV2RGVwLm5leHREZXAgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIGxpbmsucHJldkRlcCA9IGFjdGl2ZVN1Yi5kZXBzVGFpbDtcbiAgICAgICAgbGluay5uZXh0RGVwID0gdm9pZCAwO1xuICAgICAgICBhY3RpdmVTdWIuZGVwc1RhaWwubmV4dERlcCA9IGxpbms7XG4gICAgICAgIGFjdGl2ZVN1Yi5kZXBzVGFpbCA9IGxpbms7XG4gICAgICAgIGlmIChhY3RpdmVTdWIuZGVwcyA9PT0gbGluaykge1xuICAgICAgICAgIGFjdGl2ZVN1Yi5kZXBzID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBhY3RpdmVTdWIub25UcmFjaykge1xuICAgICAgYWN0aXZlU3ViLm9uVHJhY2soXG4gICAgICAgIGV4dGVuZChcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlZmZlY3Q6IGFjdGl2ZVN1YlxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVidWdJbmZvXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBsaW5rO1xuICB9XG4gIHRyaWdnZXIoZGVidWdJbmZvKSB7XG4gICAgdGhpcy52ZXJzaW9uKys7XG4gICAgZ2xvYmFsVmVyc2lvbisrO1xuICAgIHRoaXMubm90aWZ5KGRlYnVnSW5mbyk7XG4gIH1cbiAgbm90aWZ5KGRlYnVnSW5mbykge1xuICAgIHN0YXJ0QmF0Y2goKTtcbiAgICB0cnkge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgZm9yIChsZXQgaGVhZCA9IHRoaXMuc3Vic0hlYWQ7IGhlYWQ7IGhlYWQgPSBoZWFkLm5leHRTdWIpIHtcbiAgICAgICAgICBpZiAoaGVhZC5zdWIub25UcmlnZ2VyICYmICEoaGVhZC5zdWIuZmxhZ3MgJiA4KSkge1xuICAgICAgICAgICAgaGVhZC5zdWIub25UcmlnZ2VyKFxuICAgICAgICAgICAgICBleHRlbmQoXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgZWZmZWN0OiBoZWFkLnN1YlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVidWdJbmZvXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBsaW5rID0gdGhpcy5zdWJzOyBsaW5rOyBsaW5rID0gbGluay5wcmV2U3ViKSB7XG4gICAgICAgIGlmIChsaW5rLnN1Yi5ub3RpZnkoKSkge1xuICAgICAgICAgIDtcbiAgICAgICAgICBsaW5rLnN1Yi5kZXAubm90aWZ5KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgZW5kQmF0Y2goKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGFkZFN1YihsaW5rKSB7XG4gIGxpbmsuZGVwLnNjKys7XG4gIGlmIChsaW5rLnN1Yi5mbGFncyAmIDQpIHtcbiAgICBjb25zdCBjb21wdXRlZCA9IGxpbmsuZGVwLmNvbXB1dGVkO1xuICAgIGlmIChjb21wdXRlZCAmJiAhbGluay5kZXAuc3Vicykge1xuICAgICAgY29tcHV0ZWQuZmxhZ3MgfD0gNCB8IDE2O1xuICAgICAgZm9yIChsZXQgbCA9IGNvbXB1dGVkLmRlcHM7IGw7IGwgPSBsLm5leHREZXApIHtcbiAgICAgICAgYWRkU3ViKGwpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjdXJyZW50VGFpbCA9IGxpbmsuZGVwLnN1YnM7XG4gICAgaWYgKGN1cnJlbnRUYWlsICE9PSBsaW5rKSB7XG4gICAgICBsaW5rLnByZXZTdWIgPSBjdXJyZW50VGFpbDtcbiAgICAgIGlmIChjdXJyZW50VGFpbCkgY3VycmVudFRhaWwubmV4dFN1YiA9IGxpbms7XG4gICAgfVxuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGxpbmsuZGVwLnN1YnNIZWFkID09PSB2b2lkIDApIHtcbiAgICAgIGxpbmsuZGVwLnN1YnNIZWFkID0gbGluaztcbiAgICB9XG4gICAgbGluay5kZXAuc3VicyA9IGxpbms7XG4gIH1cbn1cbmNvbnN0IHRhcmdldE1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuY29uc3QgSVRFUkFURV9LRVkgPSBTeW1ib2woXG4gICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBcIk9iamVjdCBpdGVyYXRlXCIgOiBcIlwiXG4pO1xuY29uc3QgTUFQX0tFWV9JVEVSQVRFX0tFWSA9IFN5bWJvbChcbiAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IFwiTWFwIGtleXMgaXRlcmF0ZVwiIDogXCJcIlxuKTtcbmNvbnN0IEFSUkFZX0lURVJBVEVfS0VZID0gU3ltYm9sKFxuICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gXCJBcnJheSBpdGVyYXRlXCIgOiBcIlwiXG4pO1xuZnVuY3Rpb24gdHJhY2sodGFyZ2V0LCB0eXBlLCBrZXkpIHtcbiAgaWYgKHNob3VsZFRyYWNrICYmIGFjdGl2ZVN1Yikge1xuICAgIGxldCBkZXBzTWFwID0gdGFyZ2V0TWFwLmdldCh0YXJnZXQpO1xuICAgIGlmICghZGVwc01hcCkge1xuICAgICAgdGFyZ2V0TWFwLnNldCh0YXJnZXQsIGRlcHNNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKTtcbiAgICB9XG4gICAgbGV0IGRlcCA9IGRlcHNNYXAuZ2V0KGtleSk7XG4gICAgaWYgKCFkZXApIHtcbiAgICAgIGRlcHNNYXAuc2V0KGtleSwgZGVwID0gbmV3IERlcCgpKTtcbiAgICAgIGRlcC5tYXAgPSBkZXBzTWFwO1xuICAgICAgZGVwLmtleSA9IGtleTtcbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIGRlcC50cmFjayh7XG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgdHlwZSxcbiAgICAgICAga2V5XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVwLnRyYWNrKCk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiB0cmlnZ2VyKHRhcmdldCwgdHlwZSwga2V5LCBuZXdWYWx1ZSwgb2xkVmFsdWUsIG9sZFRhcmdldCkge1xuICBjb25zdCBkZXBzTWFwID0gdGFyZ2V0TWFwLmdldCh0YXJnZXQpO1xuICBpZiAoIWRlcHNNYXApIHtcbiAgICBnbG9iYWxWZXJzaW9uKys7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHJ1biA9IChkZXApID0+IHtcbiAgICBpZiAoZGVwKSB7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICBkZXAudHJpZ2dlcih7XG4gICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgIHR5cGUsXG4gICAgICAgICAga2V5LFxuICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgIG9sZFZhbHVlLFxuICAgICAgICAgIG9sZFRhcmdldFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlcC50cmlnZ2VyKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBzdGFydEJhdGNoKCk7XG4gIGlmICh0eXBlID09PSBcImNsZWFyXCIpIHtcbiAgICBkZXBzTWFwLmZvckVhY2gocnVuKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB0YXJnZXRJc0FycmF5ID0gaXNBcnJheSh0YXJnZXQpO1xuICAgIGNvbnN0IGlzQXJyYXlJbmRleCA9IHRhcmdldElzQXJyYXkgJiYgaXNJbnRlZ2VyS2V5KGtleSk7XG4gICAgaWYgKHRhcmdldElzQXJyYXkgJiYga2V5ID09PSBcImxlbmd0aFwiKSB7XG4gICAgICBjb25zdCBuZXdMZW5ndGggPSBOdW1iZXIobmV3VmFsdWUpO1xuICAgICAgZGVwc01hcC5mb3JFYWNoKChkZXAsIGtleTIpID0+IHtcbiAgICAgICAgaWYgKGtleTIgPT09IFwibGVuZ3RoXCIgfHwga2V5MiA9PT0gQVJSQVlfSVRFUkFURV9LRVkgfHwgIWlzU3ltYm9sKGtleTIpICYmIGtleTIgPj0gbmV3TGVuZ3RoKSB7XG4gICAgICAgICAgcnVuKGRlcCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoa2V5ICE9PSB2b2lkIDAgfHwgZGVwc01hcC5oYXModm9pZCAwKSkge1xuICAgICAgICBydW4oZGVwc01hcC5nZXQoa2V5KSk7XG4gICAgICB9XG4gICAgICBpZiAoaXNBcnJheUluZGV4KSB7XG4gICAgICAgIHJ1bihkZXBzTWFwLmdldChBUlJBWV9JVEVSQVRFX0tFWSkpO1xuICAgICAgfVxuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgXCJhZGRcIjpcbiAgICAgICAgICBpZiAoIXRhcmdldElzQXJyYXkpIHtcbiAgICAgICAgICAgIHJ1bihkZXBzTWFwLmdldChJVEVSQVRFX0tFWSkpO1xuICAgICAgICAgICAgaWYgKGlzTWFwKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgcnVuKGRlcHNNYXAuZ2V0KE1BUF9LRVlfSVRFUkFURV9LRVkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXlJbmRleCkge1xuICAgICAgICAgICAgcnVuKGRlcHNNYXAuZ2V0KFwibGVuZ3RoXCIpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJkZWxldGVcIjpcbiAgICAgICAgICBpZiAoIXRhcmdldElzQXJyYXkpIHtcbiAgICAgICAgICAgIHJ1bihkZXBzTWFwLmdldChJVEVSQVRFX0tFWSkpO1xuICAgICAgICAgICAgaWYgKGlzTWFwKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgcnVuKGRlcHNNYXAuZ2V0KE1BUF9LRVlfSVRFUkFURV9LRVkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJzZXRcIjpcbiAgICAgICAgICBpZiAoaXNNYXAodGFyZ2V0KSkge1xuICAgICAgICAgICAgcnVuKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBlbmRCYXRjaCgpO1xufVxuZnVuY3Rpb24gZ2V0RGVwRnJvbVJlYWN0aXZlKG9iamVjdCwga2V5KSB7XG4gIGNvbnN0IGRlcE1hcCA9IHRhcmdldE1hcC5nZXQob2JqZWN0KTtcbiAgcmV0dXJuIGRlcE1hcCAmJiBkZXBNYXAuZ2V0KGtleSk7XG59XG5cbmZ1bmN0aW9uIHJlYWN0aXZlUmVhZEFycmF5KGFycmF5KSB7XG4gIGNvbnN0IHJhdyA9IHRvUmF3KGFycmF5KTtcbiAgaWYgKHJhdyA9PT0gYXJyYXkpIHJldHVybiByYXc7XG4gIHRyYWNrKHJhdywgXCJpdGVyYXRlXCIsIEFSUkFZX0lURVJBVEVfS0VZKTtcbiAgcmV0dXJuIGlzU2hhbGxvdyhhcnJheSkgPyByYXcgOiByYXcubWFwKHRvUmVhY3RpdmUpO1xufVxuZnVuY3Rpb24gc2hhbGxvd1JlYWRBcnJheShhcnIpIHtcbiAgdHJhY2soYXJyID0gdG9SYXcoYXJyKSwgXCJpdGVyYXRlXCIsIEFSUkFZX0lURVJBVEVfS0VZKTtcbiAgcmV0dXJuIGFycjtcbn1cbmZ1bmN0aW9uIHRvV3JhcHBlZCh0YXJnZXQsIGl0ZW0pIHtcbiAgaWYgKGlzUmVhZG9ubHkodGFyZ2V0KSkge1xuICAgIHJldHVybiBpc1JlYWN0aXZlKHRhcmdldCkgPyB0b1JlYWRvbmx5KHRvUmVhY3RpdmUoaXRlbSkpIDogdG9SZWFkb25seShpdGVtKTtcbiAgfVxuICByZXR1cm4gdG9SZWFjdGl2ZShpdGVtKTtcbn1cbmNvbnN0IGFycmF5SW5zdHJ1bWVudGF0aW9ucyA9IHtcbiAgX19wcm90b19fOiBudWxsLFxuICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICByZXR1cm4gaXRlcmF0b3IodGhpcywgU3ltYm9sLml0ZXJhdG9yLCAoaXRlbSkgPT4gdG9XcmFwcGVkKHRoaXMsIGl0ZW0pKTtcbiAgfSxcbiAgY29uY2F0KC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gcmVhY3RpdmVSZWFkQXJyYXkodGhpcykuY29uY2F0KFxuICAgICAgLi4uYXJncy5tYXAoKHgpID0+IGlzQXJyYXkoeCkgPyByZWFjdGl2ZVJlYWRBcnJheSh4KSA6IHgpXG4gICAgKTtcbiAgfSxcbiAgZW50cmllcygpIHtcbiAgICByZXR1cm4gaXRlcmF0b3IodGhpcywgXCJlbnRyaWVzXCIsICh2YWx1ZSkgPT4ge1xuICAgICAgdmFsdWVbMV0gPSB0b1dyYXBwZWQodGhpcywgdmFsdWVbMV0pO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0pO1xuICB9LFxuICBldmVyeShmbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBhcHBseSh0aGlzLCBcImV2ZXJ5XCIsIGZuLCB0aGlzQXJnLCB2b2lkIDAsIGFyZ3VtZW50cyk7XG4gIH0sXG4gIGZpbHRlcihmbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBhcHBseShcbiAgICAgIHRoaXMsXG4gICAgICBcImZpbHRlclwiLFxuICAgICAgZm4sXG4gICAgICB0aGlzQXJnLFxuICAgICAgKHYpID0+IHYubWFwKChpdGVtKSA9PiB0b1dyYXBwZWQodGhpcywgaXRlbSkpLFxuICAgICAgYXJndW1lbnRzXG4gICAgKTtcbiAgfSxcbiAgZmluZChmbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBhcHBseShcbiAgICAgIHRoaXMsXG4gICAgICBcImZpbmRcIixcbiAgICAgIGZuLFxuICAgICAgdGhpc0FyZyxcbiAgICAgIChpdGVtKSA9PiB0b1dyYXBwZWQodGhpcywgaXRlbSksXG4gICAgICBhcmd1bWVudHNcbiAgICApO1xuICB9LFxuICBmaW5kSW5kZXgoZm4sIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gYXBwbHkodGhpcywgXCJmaW5kSW5kZXhcIiwgZm4sIHRoaXNBcmcsIHZvaWQgMCwgYXJndW1lbnRzKTtcbiAgfSxcbiAgZmluZExhc3QoZm4sIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gYXBwbHkoXG4gICAgICB0aGlzLFxuICAgICAgXCJmaW5kTGFzdFwiLFxuICAgICAgZm4sXG4gICAgICB0aGlzQXJnLFxuICAgICAgKGl0ZW0pID0+IHRvV3JhcHBlZCh0aGlzLCBpdGVtKSxcbiAgICAgIGFyZ3VtZW50c1xuICAgICk7XG4gIH0sXG4gIGZpbmRMYXN0SW5kZXgoZm4sIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gYXBwbHkodGhpcywgXCJmaW5kTGFzdEluZGV4XCIsIGZuLCB0aGlzQXJnLCB2b2lkIDAsIGFyZ3VtZW50cyk7XG4gIH0sXG4gIC8vIGZsYXQsIGZsYXRNYXAgY291bGQgYmVuZWZpdCBmcm9tIEFSUkFZX0lURVJBVEUgYnV0IGFyZSBub3Qgc3RyYWlnaHQtZm9yd2FyZCB0byBpbXBsZW1lbnRcbiAgZm9yRWFjaChmbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBhcHBseSh0aGlzLCBcImZvckVhY2hcIiwgZm4sIHRoaXNBcmcsIHZvaWQgMCwgYXJndW1lbnRzKTtcbiAgfSxcbiAgaW5jbHVkZXMoLi4uYXJncykge1xuICAgIHJldHVybiBzZWFyY2hQcm94eSh0aGlzLCBcImluY2x1ZGVzXCIsIGFyZ3MpO1xuICB9LFxuICBpbmRleE9mKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gc2VhcmNoUHJveHkodGhpcywgXCJpbmRleE9mXCIsIGFyZ3MpO1xuICB9LFxuICBqb2luKHNlcGFyYXRvcikge1xuICAgIHJldHVybiByZWFjdGl2ZVJlYWRBcnJheSh0aGlzKS5qb2luKHNlcGFyYXRvcik7XG4gIH0sXG4gIC8vIGtleXMoKSBpdGVyYXRvciBvbmx5IHJlYWRzIGBsZW5ndGhgLCBubyBvcHRpbWl6YXRpb24gcmVxdWlyZWRcbiAgbGFzdEluZGV4T2YoLi4uYXJncykge1xuICAgIHJldHVybiBzZWFyY2hQcm94eSh0aGlzLCBcImxhc3RJbmRleE9mXCIsIGFyZ3MpO1xuICB9LFxuICBtYXAoZm4sIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gYXBwbHkodGhpcywgXCJtYXBcIiwgZm4sIHRoaXNBcmcsIHZvaWQgMCwgYXJndW1lbnRzKTtcbiAgfSxcbiAgcG9wKCkge1xuICAgIHJldHVybiBub1RyYWNraW5nKHRoaXMsIFwicG9wXCIpO1xuICB9LFxuICBwdXNoKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gbm9UcmFja2luZyh0aGlzLCBcInB1c2hcIiwgYXJncyk7XG4gIH0sXG4gIHJlZHVjZShmbiwgLi4uYXJncykge1xuICAgIHJldHVybiByZWR1Y2UodGhpcywgXCJyZWR1Y2VcIiwgZm4sIGFyZ3MpO1xuICB9LFxuICByZWR1Y2VSaWdodChmbiwgLi4uYXJncykge1xuICAgIHJldHVybiByZWR1Y2UodGhpcywgXCJyZWR1Y2VSaWdodFwiLCBmbiwgYXJncyk7XG4gIH0sXG4gIHNoaWZ0KCkge1xuICAgIHJldHVybiBub1RyYWNraW5nKHRoaXMsIFwic2hpZnRcIik7XG4gIH0sXG4gIC8vIHNsaWNlIGNvdWxkIHVzZSBBUlJBWV9JVEVSQVRFIGJ1dCBhbHNvIHNlZW1zIHRvIGJlZyBmb3IgcmFuZ2UgdHJhY2tpbmdcbiAgc29tZShmbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBhcHBseSh0aGlzLCBcInNvbWVcIiwgZm4sIHRoaXNBcmcsIHZvaWQgMCwgYXJndW1lbnRzKTtcbiAgfSxcbiAgc3BsaWNlKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gbm9UcmFja2luZyh0aGlzLCBcInNwbGljZVwiLCBhcmdzKTtcbiAgfSxcbiAgdG9SZXZlcnNlZCgpIHtcbiAgICByZXR1cm4gcmVhY3RpdmVSZWFkQXJyYXkodGhpcykudG9SZXZlcnNlZCgpO1xuICB9LFxuICB0b1NvcnRlZChjb21wYXJlcikge1xuICAgIHJldHVybiByZWFjdGl2ZVJlYWRBcnJheSh0aGlzKS50b1NvcnRlZChjb21wYXJlcik7XG4gIH0sXG4gIHRvU3BsaWNlZCguLi5hcmdzKSB7XG4gICAgcmV0dXJuIHJlYWN0aXZlUmVhZEFycmF5KHRoaXMpLnRvU3BsaWNlZCguLi5hcmdzKTtcbiAgfSxcbiAgdW5zaGlmdCguLi5hcmdzKSB7XG4gICAgcmV0dXJuIG5vVHJhY2tpbmcodGhpcywgXCJ1bnNoaWZ0XCIsIGFyZ3MpO1xuICB9LFxuICB2YWx1ZXMoKSB7XG4gICAgcmV0dXJuIGl0ZXJhdG9yKHRoaXMsIFwidmFsdWVzXCIsIChpdGVtKSA9PiB0b1dyYXBwZWQodGhpcywgaXRlbSkpO1xuICB9XG59O1xuZnVuY3Rpb24gaXRlcmF0b3Ioc2VsZiwgbWV0aG9kLCB3cmFwVmFsdWUpIHtcbiAgY29uc3QgYXJyID0gc2hhbGxvd1JlYWRBcnJheShzZWxmKTtcbiAgY29uc3QgaXRlciA9IGFyclttZXRob2RdKCk7XG4gIGlmIChhcnIgIT09IHNlbGYgJiYgIWlzU2hhbGxvdyhzZWxmKSkge1xuICAgIGl0ZXIuX25leHQgPSBpdGVyLm5leHQ7XG4gICAgaXRlci5uZXh0ID0gKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gaXRlci5fbmV4dCgpO1xuICAgICAgaWYgKCFyZXN1bHQuZG9uZSkge1xuICAgICAgICByZXN1bHQudmFsdWUgPSB3cmFwVmFsdWUocmVzdWx0LnZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gaXRlcjtcbn1cbmNvbnN0IGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG5mdW5jdGlvbiBhcHBseShzZWxmLCBtZXRob2QsIGZuLCB0aGlzQXJnLCB3cmFwcGVkUmV0Rm4sIGFyZ3MpIHtcbiAgY29uc3QgYXJyID0gc2hhbGxvd1JlYWRBcnJheShzZWxmKTtcbiAgY29uc3QgbmVlZHNXcmFwID0gYXJyICE9PSBzZWxmICYmICFpc1NoYWxsb3coc2VsZik7XG4gIGNvbnN0IG1ldGhvZEZuID0gYXJyW21ldGhvZF07XG4gIGlmIChtZXRob2RGbiAhPT0gYXJyYXlQcm90b1ttZXRob2RdKSB7XG4gICAgY29uc3QgcmVzdWx0MiA9IG1ldGhvZEZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgIHJldHVybiBuZWVkc1dyYXAgPyB0b1JlYWN0aXZlKHJlc3VsdDIpIDogcmVzdWx0MjtcbiAgfVxuICBsZXQgd3JhcHBlZEZuID0gZm47XG4gIGlmIChhcnIgIT09IHNlbGYpIHtcbiAgICBpZiAobmVlZHNXcmFwKSB7XG4gICAgICB3cmFwcGVkRm4gPSBmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCB0b1dyYXBwZWQoc2VsZiwgaXRlbSksIGluZGV4LCBzZWxmKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChmbi5sZW5ndGggPiAyKSB7XG4gICAgICB3cmFwcGVkRm4gPSBmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBpdGVtLCBpbmRleCwgc2VsZik7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuICBjb25zdCByZXN1bHQgPSBtZXRob2RGbi5jYWxsKGFyciwgd3JhcHBlZEZuLCB0aGlzQXJnKTtcbiAgcmV0dXJuIG5lZWRzV3JhcCAmJiB3cmFwcGVkUmV0Rm4gPyB3cmFwcGVkUmV0Rm4ocmVzdWx0KSA6IHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHJlZHVjZShzZWxmLCBtZXRob2QsIGZuLCBhcmdzKSB7XG4gIGNvbnN0IGFyciA9IHNoYWxsb3dSZWFkQXJyYXkoc2VsZik7XG4gIGxldCB3cmFwcGVkRm4gPSBmbjtcbiAgaWYgKGFyciAhPT0gc2VsZikge1xuICAgIGlmICghaXNTaGFsbG93KHNlbGYpKSB7XG4gICAgICB3cmFwcGVkRm4gPSBmdW5jdGlvbihhY2MsIGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGFjYywgdG9XcmFwcGVkKHNlbGYsIGl0ZW0pLCBpbmRleCwgc2VsZik7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoZm4ubGVuZ3RoID4gMykge1xuICAgICAgd3JhcHBlZEZuID0gZnVuY3Rpb24oYWNjLCBpdGVtLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBhY2MsIGl0ZW0sIGluZGV4LCBzZWxmKTtcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIHJldHVybiBhcnJbbWV0aG9kXSh3cmFwcGVkRm4sIC4uLmFyZ3MpO1xufVxuZnVuY3Rpb24gc2VhcmNoUHJveHkoc2VsZiwgbWV0aG9kLCBhcmdzKSB7XG4gIGNvbnN0IGFyciA9IHRvUmF3KHNlbGYpO1xuICB0cmFjayhhcnIsIFwiaXRlcmF0ZVwiLCBBUlJBWV9JVEVSQVRFX0tFWSk7XG4gIGNvbnN0IHJlcyA9IGFyclttZXRob2RdKC4uLmFyZ3MpO1xuICBpZiAoKHJlcyA9PT0gLTEgfHwgcmVzID09PSBmYWxzZSkgJiYgaXNQcm94eShhcmdzWzBdKSkge1xuICAgIGFyZ3NbMF0gPSB0b1JhdyhhcmdzWzBdKTtcbiAgICByZXR1cm4gYXJyW21ldGhvZF0oLi4uYXJncyk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIG5vVHJhY2tpbmcoc2VsZiwgbWV0aG9kLCBhcmdzID0gW10pIHtcbiAgcGF1c2VUcmFja2luZygpO1xuICBzdGFydEJhdGNoKCk7XG4gIGNvbnN0IHJlcyA9IHRvUmF3KHNlbGYpW21ldGhvZF0uYXBwbHkoc2VsZiwgYXJncyk7XG4gIGVuZEJhdGNoKCk7XG4gIHJlc2V0VHJhY2tpbmcoKTtcbiAgcmV0dXJuIHJlcztcbn1cblxuY29uc3QgaXNOb25UcmFja2FibGVLZXlzID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoYF9fcHJvdG9fXyxfX3ZfaXNSZWYsX19pc1Z1ZWApO1xuY29uc3QgYnVpbHRJblN5bWJvbHMgPSBuZXcgU2V0KFxuICAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoU3ltYm9sKS5maWx0ZXIoKGtleSkgPT4ga2V5ICE9PSBcImFyZ3VtZW50c1wiICYmIGtleSAhPT0gXCJjYWxsZXJcIikubWFwKChrZXkpID0+IFN5bWJvbFtrZXldKS5maWx0ZXIoaXNTeW1ib2wpXG4pO1xuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkoa2V5KSB7XG4gIGlmICghaXNTeW1ib2woa2V5KSkga2V5ID0gU3RyaW5nKGtleSk7XG4gIGNvbnN0IG9iaiA9IHRvUmF3KHRoaXMpO1xuICB0cmFjayhvYmosIFwiaGFzXCIsIGtleSk7XG4gIHJldHVybiBvYmouaGFzT3duUHJvcGVydHkoa2V5KTtcbn1cbmNsYXNzIEJhc2VSZWFjdGl2ZUhhbmRsZXIge1xuICBjb25zdHJ1Y3RvcihfaXNSZWFkb25seSA9IGZhbHNlLCBfaXNTaGFsbG93ID0gZmFsc2UpIHtcbiAgICB0aGlzLl9pc1JlYWRvbmx5ID0gX2lzUmVhZG9ubHk7XG4gICAgdGhpcy5faXNTaGFsbG93ID0gX2lzU2hhbGxvdztcbiAgfVxuICBnZXQodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSB7XG4gICAgaWYgKGtleSA9PT0gXCJfX3Zfc2tpcFwiKSByZXR1cm4gdGFyZ2V0W1wiX192X3NraXBcIl07XG4gICAgY29uc3QgaXNSZWFkb25seTIgPSB0aGlzLl9pc1JlYWRvbmx5LCBpc1NoYWxsb3cyID0gdGhpcy5faXNTaGFsbG93O1xuICAgIGlmIChrZXkgPT09IFwiX192X2lzUmVhY3RpdmVcIikge1xuICAgICAgcmV0dXJuICFpc1JlYWRvbmx5MjtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFkb25seVwiKSB7XG4gICAgICByZXR1cm4gaXNSZWFkb25seTI7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiX192X2lzU2hhbGxvd1wiKSB7XG4gICAgICByZXR1cm4gaXNTaGFsbG93MjtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfcmF3XCIpIHtcbiAgICAgIGlmIChyZWNlaXZlciA9PT0gKGlzUmVhZG9ubHkyID8gaXNTaGFsbG93MiA/IHNoYWxsb3dSZWFkb25seU1hcCA6IHJlYWRvbmx5TWFwIDogaXNTaGFsbG93MiA/IHNoYWxsb3dSZWFjdGl2ZU1hcCA6IHJlYWN0aXZlTWFwKS5nZXQodGFyZ2V0KSB8fCAvLyByZWNlaXZlciBpcyBub3QgdGhlIHJlYWN0aXZlIHByb3h5LCBidXQgaGFzIHRoZSBzYW1lIHByb3RvdHlwZVxuICAgICAgLy8gdGhpcyBtZWFucyB0aGUgcmVjZWl2ZXIgaXMgYSB1c2VyIHByb3h5IG9mIHRoZSByZWFjdGl2ZSBwcm94eVxuICAgICAgT2JqZWN0LmdldFByb3RvdHlwZU9mKHRhcmdldCkgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZihyZWNlaXZlcikpIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0SXNBcnJheSA9IGlzQXJyYXkodGFyZ2V0KTtcbiAgICBpZiAoIWlzUmVhZG9ubHkyKSB7XG4gICAgICBsZXQgZm47XG4gICAgICBpZiAodGFyZ2V0SXNBcnJheSAmJiAoZm4gPSBhcnJheUluc3RydW1lbnRhdGlvbnNba2V5XSkpIHtcbiAgICAgICAgcmV0dXJuIGZuO1xuICAgICAgfVxuICAgICAgaWYgKGtleSA9PT0gXCJoYXNPd25Qcm9wZXJ0eVwiKSB7XG4gICAgICAgIHJldHVybiBoYXNPd25Qcm9wZXJ0eTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVzID0gUmVmbGVjdC5nZXQoXG4gICAgICB0YXJnZXQsXG4gICAgICBrZXksXG4gICAgICAvLyBpZiB0aGlzIGlzIGEgcHJveHkgd3JhcHBpbmcgYSByZWYsIHJldHVybiBtZXRob2RzIHVzaW5nIHRoZSByYXcgcmVmXG4gICAgICAvLyBhcyByZWNlaXZlciBzbyB0aGF0IHdlIGRvbid0IGhhdmUgdG8gY2FsbCBgdG9SYXdgIG9uIHRoZSByZWYgaW4gYWxsXG4gICAgICAvLyBpdHMgY2xhc3MgbWV0aG9kc1xuICAgICAgaXNSZWYodGFyZ2V0KSA/IHRhcmdldCA6IHJlY2VpdmVyXG4gICAgKTtcbiAgICBpZiAoaXNTeW1ib2woa2V5KSA/IGJ1aWx0SW5TeW1ib2xzLmhhcyhrZXkpIDogaXNOb25UcmFja2FibGVLZXlzKGtleSkpIHtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGlmICghaXNSZWFkb25seTIpIHtcbiAgICAgIHRyYWNrKHRhcmdldCwgXCJnZXRcIiwga2V5KTtcbiAgICB9XG4gICAgaWYgKGlzU2hhbGxvdzIpIHtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGlmIChpc1JlZihyZXMpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHRhcmdldElzQXJyYXkgJiYgaXNJbnRlZ2VyS2V5KGtleSkgPyByZXMgOiByZXMudmFsdWU7XG4gICAgICByZXR1cm4gaXNSZWFkb25seTIgJiYgaXNPYmplY3QodmFsdWUpID8gcmVhZG9ubHkodmFsdWUpIDogdmFsdWU7XG4gICAgfVxuICAgIGlmIChpc09iamVjdChyZXMpKSB7XG4gICAgICByZXR1cm4gaXNSZWFkb25seTIgPyByZWFkb25seShyZXMpIDogcmVhY3RpdmUocmVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxufVxuY2xhc3MgTXV0YWJsZVJlYWN0aXZlSGFuZGxlciBleHRlbmRzIEJhc2VSZWFjdGl2ZUhhbmRsZXIge1xuICBjb25zdHJ1Y3Rvcihpc1NoYWxsb3cyID0gZmFsc2UpIHtcbiAgICBzdXBlcihmYWxzZSwgaXNTaGFsbG93Mik7XG4gIH1cbiAgc2V0KHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICBsZXQgb2xkVmFsdWUgPSB0YXJnZXRba2V5XTtcbiAgICBjb25zdCBpc0FycmF5V2l0aEludGVnZXJLZXkgPSBpc0FycmF5KHRhcmdldCkgJiYgaXNJbnRlZ2VyS2V5KGtleSk7XG4gICAgaWYgKCF0aGlzLl9pc1NoYWxsb3cpIHtcbiAgICAgIGNvbnN0IGlzT2xkVmFsdWVSZWFkb25seSA9IGlzUmVhZG9ubHkob2xkVmFsdWUpO1xuICAgICAgaWYgKCFpc1NoYWxsb3codmFsdWUpICYmICFpc1JlYWRvbmx5KHZhbHVlKSkge1xuICAgICAgICBvbGRWYWx1ZSA9IHRvUmF3KG9sZFZhbHVlKTtcbiAgICAgICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoIWlzQXJyYXlXaXRoSW50ZWdlcktleSAmJiBpc1JlZihvbGRWYWx1ZSkgJiYgIWlzUmVmKHZhbHVlKSkge1xuICAgICAgICBpZiAoaXNPbGRWYWx1ZVJlYWRvbmx5KSB7XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgIHdhcm4oXG4gICAgICAgICAgICAgIGBTZXQgb3BlcmF0aW9uIG9uIGtleSBcIiR7U3RyaW5nKGtleSl9XCIgZmFpbGVkOiB0YXJnZXQgaXMgcmVhZG9ubHkuYCxcbiAgICAgICAgICAgICAgdGFyZ2V0W2tleV1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9sZFZhbHVlLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaGFkS2V5ID0gaXNBcnJheVdpdGhJbnRlZ2VyS2V5ID8gTnVtYmVyKGtleSkgPCB0YXJnZXQubGVuZ3RoIDogaGFzT3duKHRhcmdldCwga2V5KTtcbiAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LnNldChcbiAgICAgIHRhcmdldCxcbiAgICAgIGtleSxcbiAgICAgIHZhbHVlLFxuICAgICAgaXNSZWYodGFyZ2V0KSA/IHRhcmdldCA6IHJlY2VpdmVyXG4gICAgKTtcbiAgICBpZiAodGFyZ2V0ID09PSB0b1JhdyhyZWNlaXZlcikpIHtcbiAgICAgIGlmICghaGFkS2V5KSB7XG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImFkZFwiLCBrZXksIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoaGFzQ2hhbmdlZCh2YWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcInNldFwiLCBrZXksIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBrZXkpIHtcbiAgICBjb25zdCBoYWRLZXkgPSBoYXNPd24odGFyZ2V0LCBrZXkpO1xuICAgIGNvbnN0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSk7XG4gICAgaWYgKHJlc3VsdCAmJiBoYWRLZXkpIHtcbiAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImRlbGV0ZVwiLCBrZXksIHZvaWQgMCwgb2xkVmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGhhcyh0YXJnZXQsIGtleSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3QuaGFzKHRhcmdldCwga2V5KTtcbiAgICBpZiAoIWlzU3ltYm9sKGtleSkgfHwgIWJ1aWx0SW5TeW1ib2xzLmhhcyhrZXkpKSB7XG4gICAgICB0cmFjayh0YXJnZXQsIFwiaGFzXCIsIGtleSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgb3duS2V5cyh0YXJnZXQpIHtcbiAgICB0cmFjayhcbiAgICAgIHRhcmdldCxcbiAgICAgIFwiaXRlcmF0ZVwiLFxuICAgICAgaXNBcnJheSh0YXJnZXQpID8gXCJsZW5ndGhcIiA6IElURVJBVEVfS0VZXG4gICAgKTtcbiAgICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKHRhcmdldCk7XG4gIH1cbn1cbmNsYXNzIFJlYWRvbmx5UmVhY3RpdmVIYW5kbGVyIGV4dGVuZHMgQmFzZVJlYWN0aXZlSGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKGlzU2hhbGxvdzIgPSBmYWxzZSkge1xuICAgIHN1cGVyKHRydWUsIGlzU2hhbGxvdzIpO1xuICB9XG4gIHNldCh0YXJnZXQsIGtleSkge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICB3YXJuKFxuICAgICAgICBgU2V0IG9wZXJhdGlvbiBvbiBrZXkgXCIke1N0cmluZyhrZXkpfVwiIGZhaWxlZDogdGFyZ2V0IGlzIHJlYWRvbmx5LmAsXG4gICAgICAgIHRhcmdldFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBrZXkpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybihcbiAgICAgICAgYERlbGV0ZSBvcGVyYXRpb24gb24ga2V5IFwiJHtTdHJpbmcoa2V5KX1cIiBmYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLFxuICAgICAgICB0YXJnZXRcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5jb25zdCBtdXRhYmxlSGFuZGxlcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE11dGFibGVSZWFjdGl2ZUhhbmRsZXIoKTtcbmNvbnN0IHJlYWRvbmx5SGFuZGxlcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFJlYWRvbmx5UmVhY3RpdmVIYW5kbGVyKCk7XG5jb25zdCBzaGFsbG93UmVhY3RpdmVIYW5kbGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTXV0YWJsZVJlYWN0aXZlSGFuZGxlcih0cnVlKTtcbmNvbnN0IHNoYWxsb3dSZWFkb25seUhhbmRsZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBSZWFkb25seVJlYWN0aXZlSGFuZGxlcih0cnVlKTtcblxuY29uc3QgdG9TaGFsbG93ID0gKHZhbHVlKSA9PiB2YWx1ZTtcbmNvbnN0IGdldFByb3RvID0gKHYpID0+IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2Yodik7XG5mdW5jdGlvbiBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIGlzUmVhZG9ubHkyLCBpc1NoYWxsb3cyKSB7XG4gIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gdGhpc1tcIl9fdl9yYXdcIl07XG4gICAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgICBjb25zdCB0YXJnZXRJc01hcCA9IGlzTWFwKHJhd1RhcmdldCk7XG4gICAgY29uc3QgaXNQYWlyID0gbWV0aG9kID09PSBcImVudHJpZXNcIiB8fCBtZXRob2QgPT09IFN5bWJvbC5pdGVyYXRvciAmJiB0YXJnZXRJc01hcDtcbiAgICBjb25zdCBpc0tleU9ubHkgPSBtZXRob2QgPT09IFwia2V5c1wiICYmIHRhcmdldElzTWFwO1xuICAgIGNvbnN0IGlubmVySXRlcmF0b3IgPSB0YXJnZXRbbWV0aG9kXSguLi5hcmdzKTtcbiAgICBjb25zdCB3cmFwID0gaXNTaGFsbG93MiA/IHRvU2hhbGxvdyA6IGlzUmVhZG9ubHkyID8gdG9SZWFkb25seSA6IHRvUmVhY3RpdmU7XG4gICAgIWlzUmVhZG9ubHkyICYmIHRyYWNrKFxuICAgICAgcmF3VGFyZ2V0LFxuICAgICAgXCJpdGVyYXRlXCIsXG4gICAgICBpc0tleU9ubHkgPyBNQVBfS0VZX0lURVJBVEVfS0VZIDogSVRFUkFURV9LRVlcbiAgICApO1xuICAgIHJldHVybiB7XG4gICAgICAvLyBpdGVyYXRvciBwcm90b2NvbFxuICAgICAgbmV4dCgpIHtcbiAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gaW5uZXJJdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIHJldHVybiBkb25lID8geyB2YWx1ZSwgZG9uZSB9IDoge1xuICAgICAgICAgIHZhbHVlOiBpc1BhaXIgPyBbd3JhcCh2YWx1ZVswXSksIHdyYXAodmFsdWVbMV0pXSA6IHdyYXAodmFsdWUpLFxuICAgICAgICAgIGRvbmVcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICAvLyBpdGVyYWJsZSBwcm90b2NvbFxuICAgICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVSZWFkb25seU1ldGhvZCh0eXBlKSB7XG4gIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIGNvbnN0IGtleSA9IGFyZ3NbMF0gPyBgb24ga2V5IFwiJHthcmdzWzBdfVwiIGAgOiBgYDtcbiAgICAgIHdhcm4oXG4gICAgICAgIGAke2NhcGl0YWxpemUodHlwZSl9IG9wZXJhdGlvbiAke2tleX1mYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLFxuICAgICAgICB0b1Jhdyh0aGlzKVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGUgPT09IFwiZGVsZXRlXCIgPyBmYWxzZSA6IHR5cGUgPT09IFwiY2xlYXJcIiA/IHZvaWQgMCA6IHRoaXM7XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVJbnN0cnVtZW50YXRpb25zKHJlYWRvbmx5LCBzaGFsbG93KSB7XG4gIGNvbnN0IGluc3RydW1lbnRhdGlvbnMgPSB7XG4gICAgZ2V0KGtleSkge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpc1tcIl9fdl9yYXdcIl07XG4gICAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xuICAgICAgY29uc3QgcmF3S2V5ID0gdG9SYXcoa2V5KTtcbiAgICAgIGlmICghcmVhZG9ubHkpIHtcbiAgICAgICAgaWYgKGhhc0NoYW5nZWQoa2V5LCByYXdLZXkpKSB7XG4gICAgICAgICAgdHJhY2socmF3VGFyZ2V0LCBcImdldFwiLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJnZXRcIiwgcmF3S2V5KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgaGFzIH0gPSBnZXRQcm90byhyYXdUYXJnZXQpO1xuICAgICAgY29uc3Qgd3JhcCA9IHNoYWxsb3cgPyB0b1NoYWxsb3cgOiByZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xuICAgICAgaWYgKGhhcy5jYWxsKHJhd1RhcmdldCwga2V5KSkge1xuICAgICAgICByZXR1cm4gd3JhcCh0YXJnZXQuZ2V0KGtleSkpO1xuICAgICAgfSBlbHNlIGlmIChoYXMuY2FsbChyYXdUYXJnZXQsIHJhd0tleSkpIHtcbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0LmdldChyYXdLZXkpKTtcbiAgICAgIH0gZWxzZSBpZiAodGFyZ2V0ICE9PSByYXdUYXJnZXQpIHtcbiAgICAgICAgdGFyZ2V0LmdldChrZXkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSB0aGlzW1wiX192X3Jhd1wiXTtcbiAgICAgICFyZWFkb25seSAmJiB0cmFjayh0b1Jhdyh0YXJnZXQpLCBcIml0ZXJhdGVcIiwgSVRFUkFURV9LRVkpO1xuICAgICAgcmV0dXJuIHRhcmdldC5zaXplO1xuICAgIH0sXG4gICAgaGFzKGtleSkge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpc1tcIl9fdl9yYXdcIl07XG4gICAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xuICAgICAgY29uc3QgcmF3S2V5ID0gdG9SYXcoa2V5KTtcbiAgICAgIGlmICghcmVhZG9ubHkpIHtcbiAgICAgICAgaWYgKGhhc0NoYW5nZWQoa2V5LCByYXdLZXkpKSB7XG4gICAgICAgICAgdHJhY2socmF3VGFyZ2V0LCBcImhhc1wiLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJoYXNcIiwgcmF3S2V5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBrZXkgPT09IHJhd0tleSA/IHRhcmdldC5oYXMoa2V5KSA6IHRhcmdldC5oYXMoa2V5KSB8fCB0YXJnZXQuaGFzKHJhd0tleSk7XG4gICAgfSxcbiAgICBmb3JFYWNoKGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICBjb25zdCBvYnNlcnZlZCA9IHRoaXM7XG4gICAgICBjb25zdCB0YXJnZXQgPSBvYnNlcnZlZFtcIl9fdl9yYXdcIl07XG4gICAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xuICAgICAgY29uc3Qgd3JhcCA9IHNoYWxsb3cgPyB0b1NoYWxsb3cgOiByZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xuICAgICAgIXJlYWRvbmx5ICYmIHRyYWNrKHJhd1RhcmdldCwgXCJpdGVyYXRlXCIsIElURVJBVEVfS0VZKTtcbiAgICAgIHJldHVybiB0YXJnZXQuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB3cmFwKHZhbHVlKSwgd3JhcChrZXkpLCBvYnNlcnZlZCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIGV4dGVuZChcbiAgICBpbnN0cnVtZW50YXRpb25zLFxuICAgIHJlYWRvbmx5ID8ge1xuICAgICAgYWRkOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImFkZFwiKSxcbiAgICAgIHNldDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJzZXRcIiksXG4gICAgICBkZWxldGU6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiZGVsZXRlXCIpLFxuICAgICAgY2xlYXI6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiY2xlYXJcIilcbiAgICB9IDoge1xuICAgICAgYWRkKHZhbHVlKSB7XG4gICAgICAgIGlmICghc2hhbGxvdyAmJiAhaXNTaGFsbG93KHZhbHVlKSAmJiAhaXNSZWFkb25seSh2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgICAgICAgY29uc3QgcHJvdG8gPSBnZXRQcm90byh0YXJnZXQpO1xuICAgICAgICBjb25zdCBoYWRLZXkgPSBwcm90by5oYXMuY2FsbCh0YXJnZXQsIHZhbHVlKTtcbiAgICAgICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAgICB0YXJnZXQuYWRkKHZhbHVlKTtcbiAgICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJhZGRcIiwgdmFsdWUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAoIXNoYWxsb3cgJiYgIWlzU2hhbGxvdyh2YWx1ZSkgJiYgIWlzUmVhZG9ubHkodmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gICAgICAgIGNvbnN0IHsgaGFzLCBnZXQgfSA9IGdldFByb3RvKHRhcmdldCk7XG4gICAgICAgIGxldCBoYWRLZXkgPSBoYXMuY2FsbCh0YXJnZXQsIGtleSk7XG4gICAgICAgIGlmICghaGFkS2V5KSB7XG4gICAgICAgICAga2V5ID0gdG9SYXcoa2V5KTtcbiAgICAgICAgICBoYWRLZXkgPSBoYXMuY2FsbCh0YXJnZXQsIGtleSk7XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIGNoZWNrSWRlbnRpdHlLZXlzKHRhcmdldCwgaGFzLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gZ2V0LmNhbGwodGFyZ2V0LCBrZXkpO1xuICAgICAgICB0YXJnZXQuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICBpZiAoIWhhZEtleSkge1xuICAgICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImFkZFwiLCBrZXksIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChoYXNDaGFuZ2VkKHZhbHVlLCBvbGRWYWx1ZSkpIHtcbiAgICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJzZXRcIiwga2V5LCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIGRlbGV0ZShrZXkpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gICAgICAgIGNvbnN0IHsgaGFzLCBnZXQgfSA9IGdldFByb3RvKHRhcmdldCk7XG4gICAgICAgIGxldCBoYWRLZXkgPSBoYXMuY2FsbCh0YXJnZXQsIGtleSk7XG4gICAgICAgIGlmICghaGFkS2V5KSB7XG4gICAgICAgICAga2V5ID0gdG9SYXcoa2V5KTtcbiAgICAgICAgICBoYWRLZXkgPSBoYXMuY2FsbCh0YXJnZXQsIGtleSk7XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIGNoZWNrSWRlbnRpdHlLZXlzKHRhcmdldCwgaGFzLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gZ2V0ID8gZ2V0LmNhbGwodGFyZ2V0LCBrZXkpIDogdm9pZCAwO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0YXJnZXQuZGVsZXRlKGtleSk7XG4gICAgICAgIGlmIChoYWRLZXkpIHtcbiAgICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJkZWxldGVcIiwga2V5LCB2b2lkIDAsIG9sZFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSxcbiAgICAgIGNsZWFyKCkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgICAgICAgY29uc3QgaGFkSXRlbXMgPSB0YXJnZXQuc2l6ZSAhPT0gMDtcbiAgICAgICAgY29uc3Qgb2xkVGFyZ2V0ID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IGlzTWFwKHRhcmdldCkgPyBuZXcgTWFwKHRhcmdldCkgOiBuZXcgU2V0KHRhcmdldCkgOiB2b2lkIDA7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRhcmdldC5jbGVhcigpO1xuICAgICAgICBpZiAoaGFkSXRlbXMpIHtcbiAgICAgICAgICB0cmlnZ2VyKFxuICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgXCJjbGVhclwiLFxuICAgICAgICAgICAgdm9pZCAwLFxuICAgICAgICAgICAgdm9pZCAwLFxuICAgICAgICAgICAgb2xkVGFyZ2V0XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgY29uc3QgaXRlcmF0b3JNZXRob2RzID0gW1xuICAgIFwia2V5c1wiLFxuICAgIFwidmFsdWVzXCIsXG4gICAgXCJlbnRyaWVzXCIsXG4gICAgU3ltYm9sLml0ZXJhdG9yXG4gIF07XG4gIGl0ZXJhdG9yTWV0aG9kcy5mb3JFYWNoKChtZXRob2QpID0+IHtcbiAgICBpbnN0cnVtZW50YXRpb25zW21ldGhvZF0gPSBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIHJlYWRvbmx5LCBzaGFsbG93KTtcbiAgfSk7XG4gIHJldHVybiBpbnN0cnVtZW50YXRpb25zO1xufVxuZnVuY3Rpb24gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKGlzUmVhZG9ubHkyLCBzaGFsbG93KSB7XG4gIGNvbnN0IGluc3RydW1lbnRhdGlvbnMgPSBjcmVhdGVJbnN0cnVtZW50YXRpb25zKGlzUmVhZG9ubHkyLCBzaGFsbG93KTtcbiAgcmV0dXJuICh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpID0+IHtcbiAgICBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWN0aXZlXCIpIHtcbiAgICAgIHJldHVybiAhaXNSZWFkb25seTI7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiX192X2lzUmVhZG9ubHlcIikge1xuICAgICAgcmV0dXJuIGlzUmVhZG9ubHkyO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9yYXdcIikge1xuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgcmV0dXJuIFJlZmxlY3QuZ2V0KFxuICAgICAgaGFzT3duKGluc3RydW1lbnRhdGlvbnMsIGtleSkgJiYga2V5IGluIHRhcmdldCA/IGluc3RydW1lbnRhdGlvbnMgOiB0YXJnZXQsXG4gICAgICBrZXksXG4gICAgICByZWNlaXZlclxuICAgICk7XG4gIH07XG59XG5jb25zdCBtdXRhYmxlQ29sbGVjdGlvbkhhbmRsZXJzID0ge1xuICBnZXQ6IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIoZmFsc2UsIGZhbHNlKVxufTtcbmNvbnN0IHNoYWxsb3dDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XG4gIGdldDogLyogQF9fUFVSRV9fICovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcihmYWxzZSwgdHJ1ZSlcbn07XG5jb25zdCByZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycyA9IHtcbiAgZ2V0OiAvKiBAX19QVVJFX18gKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKHRydWUsIGZhbHNlKVxufTtcbmNvbnN0IHNoYWxsb3dSZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycyA9IHtcbiAgZ2V0OiAvKiBAX19QVVJFX18gKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKHRydWUsIHRydWUpXG59O1xuZnVuY3Rpb24gY2hlY2tJZGVudGl0eUtleXModGFyZ2V0LCBoYXMsIGtleSkge1xuICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICBpZiAocmF3S2V5ICE9PSBrZXkgJiYgaGFzLmNhbGwodGFyZ2V0LCByYXdLZXkpKSB7XG4gICAgY29uc3QgdHlwZSA9IHRvUmF3VHlwZSh0YXJnZXQpO1xuICAgIHdhcm4oXG4gICAgICBgUmVhY3RpdmUgJHt0eXBlfSBjb250YWlucyBib3RoIHRoZSByYXcgYW5kIHJlYWN0aXZlIHZlcnNpb25zIG9mIHRoZSBzYW1lIG9iamVjdCR7dHlwZSA9PT0gYE1hcGAgPyBgIGFzIGtleXNgIDogYGB9LCB3aGljaCBjYW4gbGVhZCB0byBpbmNvbnNpc3RlbmNpZXMuIEF2b2lkIGRpZmZlcmVudGlhdGluZyBiZXR3ZWVuIHRoZSByYXcgYW5kIHJlYWN0aXZlIHZlcnNpb25zIG9mIGFuIG9iamVjdCBhbmQgb25seSB1c2UgdGhlIHJlYWN0aXZlIHZlcnNpb24gaWYgcG9zc2libGUuYFxuICAgICk7XG4gIH1cbn1cblxuY29uc3QgcmVhY3RpdmVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHNoYWxsb3dSZWFjdGl2ZU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuY29uc3QgcmVhZG9ubHlNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHNoYWxsb3dSZWFkb25seU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gdGFyZ2V0VHlwZU1hcChyYXdUeXBlKSB7XG4gIHN3aXRjaCAocmF3VHlwZSkge1xuICAgIGNhc2UgXCJPYmplY3RcIjpcbiAgICBjYXNlIFwiQXJyYXlcIjpcbiAgICAgIHJldHVybiAxIC8qIENPTU1PTiAqLztcbiAgICBjYXNlIFwiTWFwXCI6XG4gICAgY2FzZSBcIlNldFwiOlxuICAgIGNhc2UgXCJXZWFrTWFwXCI6XG4gICAgY2FzZSBcIldlYWtTZXRcIjpcbiAgICAgIHJldHVybiAyIC8qIENPTExFQ1RJT04gKi87XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAwIC8qIElOVkFMSUQgKi87XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFRhcmdldFR5cGUodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlW1wiX192X3NraXBcIl0gfHwgIU9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpID8gMCAvKiBJTlZBTElEICovIDogdGFyZ2V0VHlwZU1hcCh0b1Jhd1R5cGUodmFsdWUpKTtcbn1cbmZ1bmN0aW9uIHJlYWN0aXZlKHRhcmdldCkge1xuICBpZiAoaXNSZWFkb25seSh0YXJnZXQpKSB7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QoXG4gICAgdGFyZ2V0LFxuICAgIGZhbHNlLFxuICAgIG11dGFibGVIYW5kbGVycyxcbiAgICBtdXRhYmxlQ29sbGVjdGlvbkhhbmRsZXJzLFxuICAgIHJlYWN0aXZlTWFwXG4gICk7XG59XG5mdW5jdGlvbiBzaGFsbG93UmVhY3RpdmUodGFyZ2V0KSB7XG4gIHJldHVybiBjcmVhdGVSZWFjdGl2ZU9iamVjdChcbiAgICB0YXJnZXQsXG4gICAgZmFsc2UsXG4gICAgc2hhbGxvd1JlYWN0aXZlSGFuZGxlcnMsXG4gICAgc2hhbGxvd0NvbGxlY3Rpb25IYW5kbGVycyxcbiAgICBzaGFsbG93UmVhY3RpdmVNYXBcbiAgKTtcbn1cbmZ1bmN0aW9uIHJlYWRvbmx5KHRhcmdldCkge1xuICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QoXG4gICAgdGFyZ2V0LFxuICAgIHRydWUsXG4gICAgcmVhZG9ubHlIYW5kbGVycyxcbiAgICByZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycyxcbiAgICByZWFkb25seU1hcFxuICApO1xufVxuZnVuY3Rpb24gc2hhbGxvd1JlYWRvbmx5KHRhcmdldCkge1xuICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QoXG4gICAgdGFyZ2V0LFxuICAgIHRydWUsXG4gICAgc2hhbGxvd1JlYWRvbmx5SGFuZGxlcnMsXG4gICAgc2hhbGxvd1JlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzLFxuICAgIHNoYWxsb3dSZWFkb25seU1hcFxuICApO1xufVxuZnVuY3Rpb24gY3JlYXRlUmVhY3RpdmVPYmplY3QodGFyZ2V0LCBpc1JlYWRvbmx5MiwgYmFzZUhhbmRsZXJzLCBjb2xsZWN0aW9uSGFuZGxlcnMsIHByb3h5TWFwKSB7XG4gIGlmICghaXNPYmplY3QodGFyZ2V0KSkge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICB3YXJuKFxuICAgICAgICBgdmFsdWUgY2Fubm90IGJlIG1hZGUgJHtpc1JlYWRvbmx5MiA/IFwicmVhZG9ubHlcIiA6IFwicmVhY3RpdmVcIn06ICR7U3RyaW5nKFxuICAgICAgICAgIHRhcmdldFxuICAgICAgICApfWBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgaWYgKHRhcmdldFtcIl9fdl9yYXdcIl0gJiYgIShpc1JlYWRvbmx5MiAmJiB0YXJnZXRbXCJfX3ZfaXNSZWFjdGl2ZVwiXSkpIHtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIGNvbnN0IHRhcmdldFR5cGUgPSBnZXRUYXJnZXRUeXBlKHRhcmdldCk7XG4gIGlmICh0YXJnZXRUeXBlID09PSAwIC8qIElOVkFMSUQgKi8pIHtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIGNvbnN0IGV4aXN0aW5nUHJveHkgPSBwcm94eU1hcC5nZXQodGFyZ2V0KTtcbiAgaWYgKGV4aXN0aW5nUHJveHkpIHtcbiAgICByZXR1cm4gZXhpc3RpbmdQcm94eTtcbiAgfVxuICBjb25zdCBwcm94eSA9IG5ldyBQcm94eShcbiAgICB0YXJnZXQsXG4gICAgdGFyZ2V0VHlwZSA9PT0gMiAvKiBDT0xMRUNUSU9OICovID8gY29sbGVjdGlvbkhhbmRsZXJzIDogYmFzZUhhbmRsZXJzXG4gICk7XG4gIHByb3h5TWFwLnNldCh0YXJnZXQsIHByb3h5KTtcbiAgcmV0dXJuIHByb3h5O1xufVxuZnVuY3Rpb24gaXNSZWFjdGl2ZSh2YWx1ZSkge1xuICBpZiAoaXNSZWFkb25seSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gaXNSZWFjdGl2ZSh2YWx1ZVtcIl9fdl9yYXdcIl0pO1xuICB9XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZVtcIl9fdl9pc1JlYWN0aXZlXCJdKTtcbn1cbmZ1bmN0aW9uIGlzUmVhZG9ubHkodmFsdWUpIHtcbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlW1wiX192X2lzUmVhZG9ubHlcIl0pO1xufVxuZnVuY3Rpb24gaXNTaGFsbG93KHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZVtcIl9fdl9pc1NoYWxsb3dcIl0pO1xufVxuZnVuY3Rpb24gaXNQcm94eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPyAhIXZhbHVlW1wiX192X3Jhd1wiXSA6IGZhbHNlO1xufVxuZnVuY3Rpb24gdG9SYXcob2JzZXJ2ZWQpIHtcbiAgY29uc3QgcmF3ID0gb2JzZXJ2ZWQgJiYgb2JzZXJ2ZWRbXCJfX3ZfcmF3XCJdO1xuICByZXR1cm4gcmF3ID8gdG9SYXcocmF3KSA6IG9ic2VydmVkO1xufVxuZnVuY3Rpb24gbWFya1Jhdyh2YWx1ZSkge1xuICBpZiAoIWhhc093bih2YWx1ZSwgXCJfX3Zfc2tpcFwiKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSkge1xuICAgIGRlZih2YWx1ZSwgXCJfX3Zfc2tpcFwiLCB0cnVlKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5jb25zdCB0b1JlYWN0aXZlID0gKHZhbHVlKSA9PiBpc09iamVjdCh2YWx1ZSkgPyByZWFjdGl2ZSh2YWx1ZSkgOiB2YWx1ZTtcbmNvbnN0IHRvUmVhZG9ubHkgPSAodmFsdWUpID0+IGlzT2JqZWN0KHZhbHVlKSA/IHJlYWRvbmx5KHZhbHVlKSA6IHZhbHVlO1xuXG5mdW5jdGlvbiBpc1JlZihyKSB7XG4gIHJldHVybiByID8gcltcIl9fdl9pc1JlZlwiXSA9PT0gdHJ1ZSA6IGZhbHNlO1xufVxuZnVuY3Rpb24gcmVmKHZhbHVlKSB7XG4gIHJldHVybiBjcmVhdGVSZWYodmFsdWUsIGZhbHNlKTtcbn1cbmZ1bmN0aW9uIHNoYWxsb3dSZWYodmFsdWUpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlZih2YWx1ZSwgdHJ1ZSk7XG59XG5mdW5jdGlvbiBjcmVhdGVSZWYocmF3VmFsdWUsIHNoYWxsb3cpIHtcbiAgaWYgKGlzUmVmKHJhd1ZhbHVlKSkge1xuICAgIHJldHVybiByYXdWYWx1ZTtcbiAgfVxuICByZXR1cm4gbmV3IFJlZkltcGwocmF3VmFsdWUsIHNoYWxsb3cpO1xufVxuY2xhc3MgUmVmSW1wbCB7XG4gIGNvbnN0cnVjdG9yKHZhbHVlLCBpc1NoYWxsb3cyKSB7XG4gICAgdGhpcy5kZXAgPSBuZXcgRGVwKCk7XG4gICAgdGhpc1tcIl9fdl9pc1JlZlwiXSA9IHRydWU7XG4gICAgdGhpc1tcIl9fdl9pc1NoYWxsb3dcIl0gPSBmYWxzZTtcbiAgICB0aGlzLl9yYXdWYWx1ZSA9IGlzU2hhbGxvdzIgPyB2YWx1ZSA6IHRvUmF3KHZhbHVlKTtcbiAgICB0aGlzLl92YWx1ZSA9IGlzU2hhbGxvdzIgPyB2YWx1ZSA6IHRvUmVhY3RpdmUodmFsdWUpO1xuICAgIHRoaXNbXCJfX3ZfaXNTaGFsbG93XCJdID0gaXNTaGFsbG93MjtcbiAgfVxuICBnZXQgdmFsdWUoKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHRoaXMuZGVwLnRyYWNrKHtcbiAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICBrZXk6IFwidmFsdWVcIlxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVwLnRyYWNrKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgfVxuICBzZXQgdmFsdWUobmV3VmFsdWUpIHtcbiAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuX3Jhd1ZhbHVlO1xuICAgIGNvbnN0IHVzZURpcmVjdFZhbHVlID0gdGhpc1tcIl9fdl9pc1NoYWxsb3dcIl0gfHwgaXNTaGFsbG93KG5ld1ZhbHVlKSB8fCBpc1JlYWRvbmx5KG5ld1ZhbHVlKTtcbiAgICBuZXdWYWx1ZSA9IHVzZURpcmVjdFZhbHVlID8gbmV3VmFsdWUgOiB0b1JhdyhuZXdWYWx1ZSk7XG4gICAgaWYgKGhhc0NoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKSkge1xuICAgICAgdGhpcy5fcmF3VmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgIHRoaXMuX3ZhbHVlID0gdXNlRGlyZWN0VmFsdWUgPyBuZXdWYWx1ZSA6IHRvUmVhY3RpdmUobmV3VmFsdWUpO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgdGhpcy5kZXAudHJpZ2dlcih7XG4gICAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAga2V5OiBcInZhbHVlXCIsXG4gICAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgICAgb2xkVmFsdWVcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRlcC50cmlnZ2VyKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiB0cmlnZ2VyUmVmKHJlZjIpIHtcbiAgaWYgKHJlZjIuZGVwKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHJlZjIuZGVwLnRyaWdnZXIoe1xuICAgICAgICB0YXJnZXQ6IHJlZjIsXG4gICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgIGtleTogXCJ2YWx1ZVwiLFxuICAgICAgICBuZXdWYWx1ZTogcmVmMi5fdmFsdWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWYyLmRlcC50cmlnZ2VyKCk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiB1bnJlZihyZWYyKSB7XG4gIHJldHVybiBpc1JlZihyZWYyKSA/IHJlZjIudmFsdWUgOiByZWYyO1xufVxuZnVuY3Rpb24gdG9WYWx1ZShzb3VyY2UpIHtcbiAgcmV0dXJuIGlzRnVuY3Rpb24oc291cmNlKSA/IHNvdXJjZSgpIDogdW5yZWYoc291cmNlKTtcbn1cbmNvbnN0IHNoYWxsb3dVbndyYXBIYW5kbGVycyA9IHtcbiAgZ2V0OiAodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSA9PiBrZXkgPT09IFwiX192X3Jhd1wiID8gdGFyZ2V0IDogdW5yZWYoUmVmbGVjdC5nZXQodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSksXG4gIHNldDogKHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpID0+IHtcbiAgICBjb25zdCBvbGRWYWx1ZSA9IHRhcmdldFtrZXldO1xuICAgIGlmIChpc1JlZihvbGRWYWx1ZSkgJiYgIWlzUmVmKHZhbHVlKSkge1xuICAgICAgb2xkVmFsdWUudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUmVmbGVjdC5zZXQodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcik7XG4gICAgfVxuICB9XG59O1xuZnVuY3Rpb24gcHJveHlSZWZzKG9iamVjdFdpdGhSZWZzKSB7XG4gIHJldHVybiBpc1JlYWN0aXZlKG9iamVjdFdpdGhSZWZzKSA/IG9iamVjdFdpdGhSZWZzIDogbmV3IFByb3h5KG9iamVjdFdpdGhSZWZzLCBzaGFsbG93VW53cmFwSGFuZGxlcnMpO1xufVxuY2xhc3MgQ3VzdG9tUmVmSW1wbCB7XG4gIGNvbnN0cnVjdG9yKGZhY3RvcnkpIHtcbiAgICB0aGlzW1wiX192X2lzUmVmXCJdID0gdHJ1ZTtcbiAgICB0aGlzLl92YWx1ZSA9IHZvaWQgMDtcbiAgICBjb25zdCBkZXAgPSB0aGlzLmRlcCA9IG5ldyBEZXAoKTtcbiAgICBjb25zdCB7IGdldCwgc2V0IH0gPSBmYWN0b3J5KGRlcC50cmFjay5iaW5kKGRlcCksIGRlcC50cmlnZ2VyLmJpbmQoZGVwKSk7XG4gICAgdGhpcy5fZ2V0ID0gZ2V0O1xuICAgIHRoaXMuX3NldCA9IHNldDtcbiAgfVxuICBnZXQgdmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlID0gdGhpcy5fZ2V0KCk7XG4gIH1cbiAgc2V0IHZhbHVlKG5ld1ZhbCkge1xuICAgIHRoaXMuX3NldChuZXdWYWwpO1xuICB9XG59XG5mdW5jdGlvbiBjdXN0b21SZWYoZmFjdG9yeSkge1xuICByZXR1cm4gbmV3IEN1c3RvbVJlZkltcGwoZmFjdG9yeSk7XG59XG5mdW5jdGlvbiB0b1JlZnMob2JqZWN0KSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpc1Byb3h5KG9iamVjdCkpIHtcbiAgICB3YXJuKGB0b1JlZnMoKSBleHBlY3RzIGEgcmVhY3RpdmUgb2JqZWN0IGJ1dCByZWNlaXZlZCBhIHBsYWluIG9uZS5gKTtcbiAgfVxuICBjb25zdCByZXQgPSBpc0FycmF5KG9iamVjdCkgPyBuZXcgQXJyYXkob2JqZWN0Lmxlbmd0aCkgOiB7fTtcbiAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgcmV0W2tleV0gPSBwcm9wZXJ0eVRvUmVmKG9iamVjdCwga2V5KTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuY2xhc3MgT2JqZWN0UmVmSW1wbCB7XG4gIGNvbnN0cnVjdG9yKF9vYmplY3QsIF9rZXksIF9kZWZhdWx0VmFsdWUpIHtcbiAgICB0aGlzLl9vYmplY3QgPSBfb2JqZWN0O1xuICAgIHRoaXMuX2tleSA9IF9rZXk7XG4gICAgdGhpcy5fZGVmYXVsdFZhbHVlID0gX2RlZmF1bHRWYWx1ZTtcbiAgICB0aGlzW1wiX192X2lzUmVmXCJdID0gdHJ1ZTtcbiAgICB0aGlzLl92YWx1ZSA9IHZvaWQgMDtcbiAgICB0aGlzLl9yYXcgPSB0b1Jhdyhfb2JqZWN0KTtcbiAgICBsZXQgc2hhbGxvdyA9IHRydWU7XG4gICAgbGV0IG9iaiA9IF9vYmplY3Q7XG4gICAgaWYgKCFpc0FycmF5KF9vYmplY3QpIHx8ICFpc0ludGVnZXJLZXkoU3RyaW5nKF9rZXkpKSkge1xuICAgICAgZG8ge1xuICAgICAgICBzaGFsbG93ID0gIWlzUHJveHkob2JqKSB8fCBpc1NoYWxsb3cob2JqKTtcbiAgICAgIH0gd2hpbGUgKHNoYWxsb3cgJiYgKG9iaiA9IG9ialtcIl9fdl9yYXdcIl0pKTtcbiAgICB9XG4gICAgdGhpcy5fc2hhbGxvdyA9IHNoYWxsb3c7XG4gIH1cbiAgZ2V0IHZhbHVlKCkge1xuICAgIGxldCB2YWwgPSB0aGlzLl9vYmplY3RbdGhpcy5fa2V5XTtcbiAgICBpZiAodGhpcy5fc2hhbGxvdykge1xuICAgICAgdmFsID0gdW5yZWYodmFsKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlID0gdmFsID09PSB2b2lkIDAgPyB0aGlzLl9kZWZhdWx0VmFsdWUgOiB2YWw7XG4gIH1cbiAgc2V0IHZhbHVlKG5ld1ZhbCkge1xuICAgIGlmICh0aGlzLl9zaGFsbG93ICYmIGlzUmVmKHRoaXMuX3Jhd1t0aGlzLl9rZXldKSkge1xuICAgICAgY29uc3QgbmVzdGVkUmVmID0gdGhpcy5fb2JqZWN0W3RoaXMuX2tleV07XG4gICAgICBpZiAoaXNSZWYobmVzdGVkUmVmKSkge1xuICAgICAgICBuZXN0ZWRSZWYudmFsdWUgPSBuZXdWYWw7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fb2JqZWN0W3RoaXMuX2tleV0gPSBuZXdWYWw7XG4gIH1cbiAgZ2V0IGRlcCgpIHtcbiAgICByZXR1cm4gZ2V0RGVwRnJvbVJlYWN0aXZlKHRoaXMuX3JhdywgdGhpcy5fa2V5KTtcbiAgfVxufVxuY2xhc3MgR2V0dGVyUmVmSW1wbCB7XG4gIGNvbnN0cnVjdG9yKF9nZXR0ZXIpIHtcbiAgICB0aGlzLl9nZXR0ZXIgPSBfZ2V0dGVyO1xuICAgIHRoaXNbXCJfX3ZfaXNSZWZcIl0gPSB0cnVlO1xuICAgIHRoaXNbXCJfX3ZfaXNSZWFkb25seVwiXSA9IHRydWU7XG4gICAgdGhpcy5fdmFsdWUgPSB2b2lkIDA7XG4gIH1cbiAgZ2V0IHZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZSA9IHRoaXMuX2dldHRlcigpO1xuICB9XG59XG5mdW5jdGlvbiB0b1JlZihzb3VyY2UsIGtleSwgZGVmYXVsdFZhbHVlKSB7XG4gIGlmIChpc1JlZihzb3VyY2UpKSB7XG4gICAgcmV0dXJuIHNvdXJjZTtcbiAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHNvdXJjZSkpIHtcbiAgICByZXR1cm4gbmV3IEdldHRlclJlZkltcGwoc291cmNlKTtcbiAgfSBlbHNlIGlmIChpc09iamVjdChzb3VyY2UpICYmIGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgcmV0dXJuIHByb3BlcnR5VG9SZWYoc291cmNlLCBrZXksIGRlZmF1bHRWYWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJlZihzb3VyY2UpO1xuICB9XG59XG5mdW5jdGlvbiBwcm9wZXJ0eVRvUmVmKHNvdXJjZSwga2V5LCBkZWZhdWx0VmFsdWUpIHtcbiAgcmV0dXJuIG5ldyBPYmplY3RSZWZJbXBsKHNvdXJjZSwga2V5LCBkZWZhdWx0VmFsdWUpO1xufVxuXG5jbGFzcyBDb21wdXRlZFJlZkltcGwge1xuICBjb25zdHJ1Y3Rvcihmbiwgc2V0dGVyLCBpc1NTUikge1xuICAgIHRoaXMuZm4gPSBmbjtcbiAgICB0aGlzLnNldHRlciA9IHNldHRlcjtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLl92YWx1ZSA9IHZvaWQgMDtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLmRlcCA9IG5ldyBEZXAodGhpcyk7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xuICAgIC8vIFRPRE8gaXNvbGF0ZWREZWNsYXJhdGlvbnMgXCJfX3ZfaXNSZWFkb25seVwiXG4gICAgLy8gQSBjb21wdXRlZCBpcyBhbHNvIGEgc3Vic2NyaWJlciB0aGF0IHRyYWNrcyBvdGhlciBkZXBzXG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5kZXBzID0gdm9pZCAwO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuZGVwc1RhaWwgPSB2b2lkIDA7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5mbGFncyA9IDE2O1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuZ2xvYmFsVmVyc2lvbiA9IGdsb2JhbFZlcnNpb24gLSAxO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMubmV4dCA9IHZvaWQgMDtcbiAgICAvLyBmb3IgYmFja3dhcmRzIGNvbXBhdFxuICAgIHRoaXMuZWZmZWN0ID0gdGhpcztcbiAgICB0aGlzW1wiX192X2lzUmVhZG9ubHlcIl0gPSAhc2V0dGVyO1xuICAgIHRoaXMuaXNTU1IgPSBpc1NTUjtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBub3RpZnkoKSB7XG4gICAgdGhpcy5mbGFncyB8PSAxNjtcbiAgICBpZiAoISh0aGlzLmZsYWdzICYgOCkgJiYgLy8gYXZvaWQgaW5maW5pdGUgc2VsZiByZWN1cnNpb25cbiAgICBhY3RpdmVTdWIgIT09IHRoaXMpIHtcbiAgICAgIGJhdGNoKHRoaXMsIHRydWUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSA7XG4gIH1cbiAgZ2V0IHZhbHVlKCkge1xuICAgIGNvbnN0IGxpbmsgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gdGhpcy5kZXAudHJhY2soe1xuICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgIGtleTogXCJ2YWx1ZVwiXG4gICAgfSkgOiB0aGlzLmRlcC50cmFjaygpO1xuICAgIHJlZnJlc2hDb21wdXRlZCh0aGlzKTtcbiAgICBpZiAobGluaykge1xuICAgICAgbGluay52ZXJzaW9uID0gdGhpcy5kZXAudmVyc2lvbjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG4gIHNldCB2YWx1ZShuZXdWYWx1ZSkge1xuICAgIGlmICh0aGlzLnNldHRlcikge1xuICAgICAgdGhpcy5zZXR0ZXIobmV3VmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybihcIldyaXRlIG9wZXJhdGlvbiBmYWlsZWQ6IGNvbXB1dGVkIHZhbHVlIGlzIHJlYWRvbmx5XCIpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gY29tcHV0ZWQoZ2V0dGVyT3JPcHRpb25zLCBkZWJ1Z09wdGlvbnMsIGlzU1NSID0gZmFsc2UpIHtcbiAgbGV0IGdldHRlcjtcbiAgbGV0IHNldHRlcjtcbiAgaWYgKGlzRnVuY3Rpb24oZ2V0dGVyT3JPcHRpb25zKSkge1xuICAgIGdldHRlciA9IGdldHRlck9yT3B0aW9ucztcbiAgfSBlbHNlIHtcbiAgICBnZXR0ZXIgPSBnZXR0ZXJPck9wdGlvbnMuZ2V0O1xuICAgIHNldHRlciA9IGdldHRlck9yT3B0aW9ucy5zZXQ7XG4gIH1cbiAgY29uc3QgY1JlZiA9IG5ldyBDb21wdXRlZFJlZkltcGwoZ2V0dGVyLCBzZXR0ZXIsIGlzU1NSKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgZGVidWdPcHRpb25zICYmICFpc1NTUikge1xuICAgIGNSZWYub25UcmFjayA9IGRlYnVnT3B0aW9ucy5vblRyYWNrO1xuICAgIGNSZWYub25UcmlnZ2VyID0gZGVidWdPcHRpb25zLm9uVHJpZ2dlcjtcbiAgfVxuICByZXR1cm4gY1JlZjtcbn1cblxuY29uc3QgVHJhY2tPcFR5cGVzID0ge1xuICBcIkdFVFwiOiBcImdldFwiLFxuICBcIkhBU1wiOiBcImhhc1wiLFxuICBcIklURVJBVEVcIjogXCJpdGVyYXRlXCJcbn07XG5jb25zdCBUcmlnZ2VyT3BUeXBlcyA9IHtcbiAgXCJTRVRcIjogXCJzZXRcIixcbiAgXCJBRERcIjogXCJhZGRcIixcbiAgXCJERUxFVEVcIjogXCJkZWxldGVcIixcbiAgXCJDTEVBUlwiOiBcImNsZWFyXCJcbn07XG5jb25zdCBSZWFjdGl2ZUZsYWdzID0ge1xuICBcIlNLSVBcIjogXCJfX3Zfc2tpcFwiLFxuICBcIklTX1JFQUNUSVZFXCI6IFwiX192X2lzUmVhY3RpdmVcIixcbiAgXCJJU19SRUFET05MWVwiOiBcIl9fdl9pc1JlYWRvbmx5XCIsXG4gIFwiSVNfU0hBTExPV1wiOiBcIl9fdl9pc1NoYWxsb3dcIixcbiAgXCJSQVdcIjogXCJfX3ZfcmF3XCIsXG4gIFwiSVNfUkVGXCI6IFwiX192X2lzUmVmXCJcbn07XG5cbmNvbnN0IFdhdGNoRXJyb3JDb2RlcyA9IHtcbiAgXCJXQVRDSF9HRVRURVJcIjogMixcbiAgXCIyXCI6IFwiV0FUQ0hfR0VUVEVSXCIsXG4gIFwiV0FUQ0hfQ0FMTEJBQ0tcIjogMyxcbiAgXCIzXCI6IFwiV0FUQ0hfQ0FMTEJBQ0tcIixcbiAgXCJXQVRDSF9DTEVBTlVQXCI6IDQsXG4gIFwiNFwiOiBcIldBVENIX0NMRUFOVVBcIlxufTtcbmNvbnN0IElOSVRJQUxfV0FUQ0hFUl9WQUxVRSA9IHt9O1xuY29uc3QgY2xlYW51cE1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xubGV0IGFjdGl2ZVdhdGNoZXIgPSB2b2lkIDA7XG5mdW5jdGlvbiBnZXRDdXJyZW50V2F0Y2hlcigpIHtcbiAgcmV0dXJuIGFjdGl2ZVdhdGNoZXI7XG59XG5mdW5jdGlvbiBvbldhdGNoZXJDbGVhbnVwKGNsZWFudXBGbiwgZmFpbFNpbGVudGx5ID0gZmFsc2UsIG93bmVyID0gYWN0aXZlV2F0Y2hlcikge1xuICBpZiAob3duZXIpIHtcbiAgICBsZXQgY2xlYW51cHMgPSBjbGVhbnVwTWFwLmdldChvd25lcik7XG4gICAgaWYgKCFjbGVhbnVwcykgY2xlYW51cE1hcC5zZXQob3duZXIsIGNsZWFudXBzID0gW10pO1xuICAgIGNsZWFudXBzLnB1c2goY2xlYW51cEZuKTtcbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFmYWlsU2lsZW50bHkpIHtcbiAgICB3YXJuKFxuICAgICAgYG9uV2F0Y2hlckNsZWFudXAoKSB3YXMgY2FsbGVkIHdoZW4gdGhlcmUgd2FzIG5vIGFjdGl2ZSB3YXRjaGVyIHRvIGFzc29jaWF0ZSB3aXRoLmBcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiB3YXRjaChzb3VyY2UsIGNiLCBvcHRpb25zID0gRU1QVFlfT0JKKSB7XG4gIGNvbnN0IHsgaW1tZWRpYXRlLCBkZWVwLCBvbmNlLCBzY2hlZHVsZXIsIGF1Z21lbnRKb2IsIGNhbGwgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHdhcm5JbnZhbGlkU291cmNlID0gKHMpID0+IHtcbiAgICAob3B0aW9ucy5vbldhcm4gfHwgd2FybikoXG4gICAgICBgSW52YWxpZCB3YXRjaCBzb3VyY2U6IGAsXG4gICAgICBzLFxuICAgICAgYEEgd2F0Y2ggc291cmNlIGNhbiBvbmx5IGJlIGEgZ2V0dGVyL2VmZmVjdCBmdW5jdGlvbiwgYSByZWYsIGEgcmVhY3RpdmUgb2JqZWN0LCBvciBhbiBhcnJheSBvZiB0aGVzZSB0eXBlcy5gXG4gICAgKTtcbiAgfTtcbiAgY29uc3QgcmVhY3RpdmVHZXR0ZXIgPSAoc291cmNlMikgPT4ge1xuICAgIGlmIChkZWVwKSByZXR1cm4gc291cmNlMjtcbiAgICBpZiAoaXNTaGFsbG93KHNvdXJjZTIpIHx8IGRlZXAgPT09IGZhbHNlIHx8IGRlZXAgPT09IDApXG4gICAgICByZXR1cm4gdHJhdmVyc2Uoc291cmNlMiwgMSk7XG4gICAgcmV0dXJuIHRyYXZlcnNlKHNvdXJjZTIpO1xuICB9O1xuICBsZXQgZWZmZWN0O1xuICBsZXQgZ2V0dGVyO1xuICBsZXQgY2xlYW51cDtcbiAgbGV0IGJvdW5kQ2xlYW51cDtcbiAgbGV0IGZvcmNlVHJpZ2dlciA9IGZhbHNlO1xuICBsZXQgaXNNdWx0aVNvdXJjZSA9IGZhbHNlO1xuICBpZiAoaXNSZWYoc291cmNlKSkge1xuICAgIGdldHRlciA9ICgpID0+IHNvdXJjZS52YWx1ZTtcbiAgICBmb3JjZVRyaWdnZXIgPSBpc1NoYWxsb3coc291cmNlKTtcbiAgfSBlbHNlIGlmIChpc1JlYWN0aXZlKHNvdXJjZSkpIHtcbiAgICBnZXR0ZXIgPSAoKSA9PiByZWFjdGl2ZUdldHRlcihzb3VyY2UpO1xuICAgIGZvcmNlVHJpZ2dlciA9IHRydWU7XG4gIH0gZWxzZSBpZiAoaXNBcnJheShzb3VyY2UpKSB7XG4gICAgaXNNdWx0aVNvdXJjZSA9IHRydWU7XG4gICAgZm9yY2VUcmlnZ2VyID0gc291cmNlLnNvbWUoKHMpID0+IGlzUmVhY3RpdmUocykgfHwgaXNTaGFsbG93KHMpKTtcbiAgICBnZXR0ZXIgPSAoKSA9PiBzb3VyY2UubWFwKChzKSA9PiB7XG4gICAgICBpZiAoaXNSZWYocykpIHtcbiAgICAgICAgcmV0dXJuIHMudmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKGlzUmVhY3RpdmUocykpIHtcbiAgICAgICAgcmV0dXJuIHJlYWN0aXZlR2V0dGVyKHMpO1xuICAgICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHMpKSB7XG4gICAgICAgIHJldHVybiBjYWxsID8gY2FsbChzLCAyKSA6IHMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybkludmFsaWRTb3VyY2Uocyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihzb3VyY2UpKSB7XG4gICAgaWYgKGNiKSB7XG4gICAgICBnZXR0ZXIgPSBjYWxsID8gKCkgPT4gY2FsbChzb3VyY2UsIDIpIDogc291cmNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZXR0ZXIgPSAoKSA9PiB7XG4gICAgICAgIGlmIChjbGVhbnVwKSB7XG4gICAgICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudEVmZmVjdCA9IGFjdGl2ZVdhdGNoZXI7XG4gICAgICAgIGFjdGl2ZVdhdGNoZXIgPSBlZmZlY3Q7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGwgPyBjYWxsKHNvdXJjZSwgMywgW2JvdW5kQ2xlYW51cF0pIDogc291cmNlKGJvdW5kQ2xlYW51cCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgYWN0aXZlV2F0Y2hlciA9IGN1cnJlbnRFZmZlY3Q7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGdldHRlciA9IE5PT1A7XG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuSW52YWxpZFNvdXJjZShzb3VyY2UpO1xuICB9XG4gIGlmIChjYiAmJiBkZWVwKSB7XG4gICAgY29uc3QgYmFzZUdldHRlciA9IGdldHRlcjtcbiAgICBjb25zdCBkZXB0aCA9IGRlZXAgPT09IHRydWUgPyBJbmZpbml0eSA6IGRlZXA7XG4gICAgZ2V0dGVyID0gKCkgPT4gdHJhdmVyc2UoYmFzZUdldHRlcigpLCBkZXB0aCk7XG4gIH1cbiAgY29uc3Qgc2NvcGUgPSBnZXRDdXJyZW50U2NvcGUoKTtcbiAgY29uc3Qgd2F0Y2hIYW5kbGUgPSAoKSA9PiB7XG4gICAgZWZmZWN0LnN0b3AoKTtcbiAgICBpZiAoc2NvcGUgJiYgc2NvcGUuYWN0aXZlKSB7XG4gICAgICByZW1vdmUoc2NvcGUuZWZmZWN0cywgZWZmZWN0KTtcbiAgICB9XG4gIH07XG4gIGlmIChvbmNlICYmIGNiKSB7XG4gICAgY29uc3QgX2NiID0gY2I7XG4gICAgY2IgPSAoLi4uYXJncykgPT4ge1xuICAgICAgX2NiKC4uLmFyZ3MpO1xuICAgICAgd2F0Y2hIYW5kbGUoKTtcbiAgICB9O1xuICB9XG4gIGxldCBvbGRWYWx1ZSA9IGlzTXVsdGlTb3VyY2UgPyBuZXcgQXJyYXkoc291cmNlLmxlbmd0aCkuZmlsbChJTklUSUFMX1dBVENIRVJfVkFMVUUpIDogSU5JVElBTF9XQVRDSEVSX1ZBTFVFO1xuICBjb25zdCBqb2IgPSAoaW1tZWRpYXRlRmlyc3RSdW4pID0+IHtcbiAgICBpZiAoIShlZmZlY3QuZmxhZ3MgJiAxKSB8fCAhZWZmZWN0LmRpcnR5ICYmICFpbW1lZGlhdGVGaXJzdFJ1bikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2IpIHtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gZWZmZWN0LnJ1bigpO1xuICAgICAgaWYgKGRlZXAgfHwgZm9yY2VUcmlnZ2VyIHx8IChpc011bHRpU291cmNlID8gbmV3VmFsdWUuc29tZSgodiwgaSkgPT4gaGFzQ2hhbmdlZCh2LCBvbGRWYWx1ZVtpXSkpIDogaGFzQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpKSkge1xuICAgICAgICBpZiAoY2xlYW51cCkge1xuICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50V2F0Y2hlciA9IGFjdGl2ZVdhdGNoZXI7XG4gICAgICAgIGFjdGl2ZVdhdGNoZXIgPSBlZmZlY3Q7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgYXJncyA9IFtcbiAgICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgICAgLy8gcGFzcyB1bmRlZmluZWQgYXMgdGhlIG9sZCB2YWx1ZSB3aGVuIGl0J3MgY2hhbmdlZCBmb3IgdGhlIGZpcnN0IHRpbWVcbiAgICAgICAgICAgIG9sZFZhbHVlID09PSBJTklUSUFMX1dBVENIRVJfVkFMVUUgPyB2b2lkIDAgOiBpc011bHRpU291cmNlICYmIG9sZFZhbHVlWzBdID09PSBJTklUSUFMX1dBVENIRVJfVkFMVUUgPyBbXSA6IG9sZFZhbHVlLFxuICAgICAgICAgICAgYm91bmRDbGVhbnVwXG4gICAgICAgICAgXTtcbiAgICAgICAgICBvbGRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgIGNhbGwgPyBjYWxsKGNiLCAzLCBhcmdzKSA6IChcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgIGNiKC4uLmFyZ3MpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBhY3RpdmVXYXRjaGVyID0gY3VycmVudFdhdGNoZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWZmZWN0LnJ1bigpO1xuICAgIH1cbiAgfTtcbiAgaWYgKGF1Z21lbnRKb2IpIHtcbiAgICBhdWdtZW50Sm9iKGpvYik7XG4gIH1cbiAgZWZmZWN0ID0gbmV3IFJlYWN0aXZlRWZmZWN0KGdldHRlcik7XG4gIGVmZmVjdC5zY2hlZHVsZXIgPSBzY2hlZHVsZXIgPyAoKSA9PiBzY2hlZHVsZXIoam9iLCBmYWxzZSkgOiBqb2I7XG4gIGJvdW5kQ2xlYW51cCA9IChmbikgPT4gb25XYXRjaGVyQ2xlYW51cChmbiwgZmFsc2UsIGVmZmVjdCk7XG4gIGNsZWFudXAgPSBlZmZlY3Qub25TdG9wID0gKCkgPT4ge1xuICAgIGNvbnN0IGNsZWFudXBzID0gY2xlYW51cE1hcC5nZXQoZWZmZWN0KTtcbiAgICBpZiAoY2xlYW51cHMpIHtcbiAgICAgIGlmIChjYWxsKSB7XG4gICAgICAgIGNhbGwoY2xlYW51cHMsIDQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBjbGVhbnVwMiBvZiBjbGVhbnVwcykgY2xlYW51cDIoKTtcbiAgICAgIH1cbiAgICAgIGNsZWFudXBNYXAuZGVsZXRlKGVmZmVjdCk7XG4gICAgfVxuICB9O1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGVmZmVjdC5vblRyYWNrID0gb3B0aW9ucy5vblRyYWNrO1xuICAgIGVmZmVjdC5vblRyaWdnZXIgPSBvcHRpb25zLm9uVHJpZ2dlcjtcbiAgfVxuICBpZiAoY2IpIHtcbiAgICBpZiAoaW1tZWRpYXRlKSB7XG4gICAgICBqb2IodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9sZFZhbHVlID0gZWZmZWN0LnJ1bigpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChzY2hlZHVsZXIpIHtcbiAgICBzY2hlZHVsZXIoam9iLmJpbmQobnVsbCwgdHJ1ZSksIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIGVmZmVjdC5ydW4oKTtcbiAgfVxuICB3YXRjaEhhbmRsZS5wYXVzZSA9IGVmZmVjdC5wYXVzZS5iaW5kKGVmZmVjdCk7XG4gIHdhdGNoSGFuZGxlLnJlc3VtZSA9IGVmZmVjdC5yZXN1bWUuYmluZChlZmZlY3QpO1xuICB3YXRjaEhhbmRsZS5zdG9wID0gd2F0Y2hIYW5kbGU7XG4gIHJldHVybiB3YXRjaEhhbmRsZTtcbn1cbmZ1bmN0aW9uIHRyYXZlcnNlKHZhbHVlLCBkZXB0aCA9IEluZmluaXR5LCBzZWVuKSB7XG4gIGlmIChkZXB0aCA8PSAwIHx8ICFpc09iamVjdCh2YWx1ZSkgfHwgdmFsdWVbXCJfX3Zfc2tpcFwiXSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBzZWVuID0gc2VlbiB8fCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBpZiAoKHNlZW4uZ2V0KHZhbHVlKSB8fCAwKSA+PSBkZXB0aCkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBzZWVuLnNldCh2YWx1ZSwgZGVwdGgpO1xuICBkZXB0aC0tO1xuICBpZiAoaXNSZWYodmFsdWUpKSB7XG4gICAgdHJhdmVyc2UodmFsdWUudmFsdWUsIGRlcHRoLCBzZWVuKTtcbiAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRyYXZlcnNlKHZhbHVlW2ldLCBkZXB0aCwgc2Vlbik7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzU2V0KHZhbHVlKSB8fCBpc01hcCh2YWx1ZSkpIHtcbiAgICB2YWx1ZS5mb3JFYWNoKCh2KSA9PiB7XG4gICAgICB0cmF2ZXJzZSh2LCBkZXB0aCwgc2Vlbik7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB2YWx1ZSkge1xuICAgICAgdHJhdmVyc2UodmFsdWVba2V5XSwgZGVwdGgsIHNlZW4pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHZhbHVlKSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwga2V5KSkge1xuICAgICAgICB0cmF2ZXJzZSh2YWx1ZVtrZXldLCBkZXB0aCwgc2Vlbik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZXhwb3J0IHsgQVJSQVlfSVRFUkFURV9LRVksIEVmZmVjdEZsYWdzLCBFZmZlY3RTY29wZSwgSVRFUkFURV9LRVksIE1BUF9LRVlfSVRFUkFURV9LRVksIFJlYWN0aXZlRWZmZWN0LCBSZWFjdGl2ZUZsYWdzLCBUcmFja09wVHlwZXMsIFRyaWdnZXJPcFR5cGVzLCBXYXRjaEVycm9yQ29kZXMsIGNvbXB1dGVkLCBjdXN0b21SZWYsIGVmZmVjdCwgZWZmZWN0U2NvcGUsIGVuYWJsZVRyYWNraW5nLCBnZXRDdXJyZW50U2NvcGUsIGdldEN1cnJlbnRXYXRjaGVyLCBpc1Byb3h5LCBpc1JlYWN0aXZlLCBpc1JlYWRvbmx5LCBpc1JlZiwgaXNTaGFsbG93LCBtYXJrUmF3LCBvbkVmZmVjdENsZWFudXAsIG9uU2NvcGVEaXNwb3NlLCBvbldhdGNoZXJDbGVhbnVwLCBwYXVzZVRyYWNraW5nLCBwcm94eVJlZnMsIHJlYWN0aXZlLCByZWFjdGl2ZVJlYWRBcnJheSwgcmVhZG9ubHksIHJlZiwgcmVzZXRUcmFja2luZywgc2hhbGxvd1JlYWN0aXZlLCBzaGFsbG93UmVhZEFycmF5LCBzaGFsbG93UmVhZG9ubHksIHNoYWxsb3dSZWYsIHN0b3AsIHRvUmF3LCB0b1JlYWN0aXZlLCB0b1JlYWRvbmx5LCB0b1JlZiwgdG9SZWZzLCB0b1ZhbHVlLCB0cmFjaywgdHJhdmVyc2UsIHRyaWdnZXIsIHRyaWdnZXJSZWYsIHVucmVmLCB3YXRjaCB9O1xuIiwiLyoqXG4qIEB2dWUvcnVudGltZS1jb3JlIHYzLjUuMjVcbiogKGMpIDIwMTgtcHJlc2VudCBZdXhpIChFdmFuKSBZb3UgYW5kIFZ1ZSBjb250cmlidXRvcnNcbiogQGxpY2Vuc2UgTUlUXG4qKi9cbmltcG9ydCB7IHBhdXNlVHJhY2tpbmcsIHJlc2V0VHJhY2tpbmcsIGlzUmVmLCB0b1JhdywgdHJhdmVyc2UsIHNoYWxsb3dSZWYsIHJlYWRvbmx5LCBpc1JlYWN0aXZlLCByZWYsIGlzU2hhbGxvdywgaXNSZWFkb25seSwgc2hhbGxvd1JlYWRBcnJheSwgdG9SZWFkb25seSwgdG9SZWFjdGl2ZSwgc2hhbGxvd1JlYWRvbmx5LCB0cmFjaywgcmVhY3RpdmUsIHdhdGNoIGFzIHdhdGNoJDEsIGN1c3RvbVJlZiwgc2hhbGxvd1JlYWN0aXZlLCB0cmlnZ2VyLCBSZWFjdGl2ZUVmZmVjdCwgaXNQcm94eSwgcHJveHlSZWZzLCBtYXJrUmF3LCBFZmZlY3RTY29wZSwgY29tcHV0ZWQgYXMgY29tcHV0ZWQkMSB9IGZyb20gJ0B2dWUvcmVhY3Rpdml0eSc7XG5leHBvcnQgeyBFZmZlY3RTY29wZSwgUmVhY3RpdmVFZmZlY3QsIFRyYWNrT3BUeXBlcywgVHJpZ2dlck9wVHlwZXMsIGN1c3RvbVJlZiwgZWZmZWN0LCBlZmZlY3RTY29wZSwgZ2V0Q3VycmVudFNjb3BlLCBnZXRDdXJyZW50V2F0Y2hlciwgaXNQcm94eSwgaXNSZWFjdGl2ZSwgaXNSZWFkb25seSwgaXNSZWYsIGlzU2hhbGxvdywgbWFya1Jhdywgb25TY29wZURpc3Bvc2UsIG9uV2F0Y2hlckNsZWFudXAsIHByb3h5UmVmcywgcmVhY3RpdmUsIHJlYWRvbmx5LCByZWYsIHNoYWxsb3dSZWFjdGl2ZSwgc2hhbGxvd1JlYWRvbmx5LCBzaGFsbG93UmVmLCBzdG9wLCB0b1JhdywgdG9SZWYsIHRvUmVmcywgdG9WYWx1ZSwgdHJpZ2dlclJlZiwgdW5yZWYgfSBmcm9tICdAdnVlL3JlYWN0aXZpdHknO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzRnVuY3Rpb24sIEVNUFRZX09CSiwgaXNQcm9taXNlLCBpc0FycmF5LCBOT09QLCBnZXRHbG9iYWxUaGlzLCBleHRlbmQsIGlzQnVpbHRJbkRpcmVjdGl2ZSwgTk8sIGhhc093biwgcmVtb3ZlLCBkZWYsIGlzT24sIGlzUmVzZXJ2ZWRQcm9wLCBub3JtYWxpemVDbGFzcywgc3RyaW5naWZ5U3R5bGUsIG5vcm1hbGl6ZVN0eWxlLCBpc0tub3duU3ZnQXR0ciwgaXNCb29sZWFuQXR0ciwgaXNLbm93bkh0bWxBdHRyLCBpbmNsdWRlQm9vbGVhbkF0dHIsIGlzUmVuZGVyYWJsZUF0dHJWYWx1ZSwgbm9ybWFsaXplQ3NzVmFyVmFsdWUsIGdldEVzY2FwZWRDc3NWYXJOYW1lLCBpc09iamVjdCwgaXNSZWdFeHAsIGludm9rZUFycmF5Rm5zLCB0b0hhbmRsZXJLZXksIGNhbWVsaXplLCBjYXBpdGFsaXplLCBpc1N5bWJvbCwgaXNHbG9iYWxseUFsbG93ZWQsIGh5cGhlbmF0ZSwgaGFzQ2hhbmdlZCwgbG9vc2VUb051bWJlciwgaXNNb2RlbExpc3RlbmVyLCBFTVBUWV9BUlIsIG1ha2VNYXAsIHRvUmF3VHlwZSwgdG9OdW1iZXIgfSBmcm9tICdAdnVlL3NoYXJlZCc7XG5leHBvcnQgeyBjYW1lbGl6ZSwgY2FwaXRhbGl6ZSwgbm9ybWFsaXplQ2xhc3MsIG5vcm1hbGl6ZVByb3BzLCBub3JtYWxpemVTdHlsZSwgdG9EaXNwbGF5U3RyaW5nLCB0b0hhbmRsZXJLZXkgfSBmcm9tICdAdnVlL3NoYXJlZCc7XG5cbmNvbnN0IHN0YWNrID0gW107XG5mdW5jdGlvbiBwdXNoV2FybmluZ0NvbnRleHQodm5vZGUpIHtcbiAgc3RhY2sucHVzaCh2bm9kZSk7XG59XG5mdW5jdGlvbiBwb3BXYXJuaW5nQ29udGV4dCgpIHtcbiAgc3RhY2sucG9wKCk7XG59XG5sZXQgaXNXYXJuaW5nID0gZmFsc2U7XG5mdW5jdGlvbiB3YXJuJDEobXNnLCAuLi5hcmdzKSB7XG4gIGlmIChpc1dhcm5pbmcpIHJldHVybjtcbiAgaXNXYXJuaW5nID0gdHJ1ZTtcbiAgcGF1c2VUcmFja2luZygpO1xuICBjb25zdCBpbnN0YW5jZSA9IHN0YWNrLmxlbmd0aCA/IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdLmNvbXBvbmVudCA6IG51bGw7XG4gIGNvbnN0IGFwcFdhcm5IYW5kbGVyID0gaW5zdGFuY2UgJiYgaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcud2FybkhhbmRsZXI7XG4gIGNvbnN0IHRyYWNlID0gZ2V0Q29tcG9uZW50VHJhY2UoKTtcbiAgaWYgKGFwcFdhcm5IYW5kbGVyKSB7XG4gICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKFxuICAgICAgYXBwV2FybkhhbmRsZXIsXG4gICAgICBpbnN0YW5jZSxcbiAgICAgIDExLFxuICAgICAgW1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgbXNnICsgYXJncy5tYXAoKGEpID0+IHtcbiAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSBhLnRvU3RyaW5nKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChhKSkgIT0gbnVsbCA/IF9iIDogSlNPTi5zdHJpbmdpZnkoYSk7XG4gICAgICAgIH0pLmpvaW4oXCJcIiksXG4gICAgICAgIGluc3RhbmNlICYmIGluc3RhbmNlLnByb3h5LFxuICAgICAgICB0cmFjZS5tYXAoXG4gICAgICAgICAgKHsgdm5vZGUgfSkgPT4gYGF0IDwke2Zvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIHZub2RlLnR5cGUpfT5gXG4gICAgICAgICkuam9pbihcIlxcblwiKSxcbiAgICAgICAgdHJhY2VcbiAgICAgIF1cbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHdhcm5BcmdzID0gW2BbVnVlIHdhcm5dOiAke21zZ31gLCAuLi5hcmdzXTtcbiAgICBpZiAodHJhY2UubGVuZ3RoICYmIC8vIGF2b2lkIHNwYW1taW5nIGNvbnNvbGUgZHVyaW5nIHRlc3RzXG4gICAgdHJ1ZSkge1xuICAgICAgd2FybkFyZ3MucHVzaChgXG5gLCAuLi5mb3JtYXRUcmFjZSh0cmFjZSkpO1xuICAgIH1cbiAgICBjb25zb2xlLndhcm4oLi4ud2FybkFyZ3MpO1xuICB9XG4gIHJlc2V0VHJhY2tpbmcoKTtcbiAgaXNXYXJuaW5nID0gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXRDb21wb25lbnRUcmFjZSgpIHtcbiAgbGV0IGN1cnJlbnRWTm9kZSA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICBpZiAoIWN1cnJlbnRWTm9kZSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBjb25zdCBub3JtYWxpemVkU3RhY2sgPSBbXTtcbiAgd2hpbGUgKGN1cnJlbnRWTm9kZSkge1xuICAgIGNvbnN0IGxhc3QgPSBub3JtYWxpemVkU3RhY2tbMF07XG4gICAgaWYgKGxhc3QgJiYgbGFzdC52bm9kZSA9PT0gY3VycmVudFZOb2RlKSB7XG4gICAgICBsYXN0LnJlY3Vyc2VDb3VudCsrO1xuICAgIH0gZWxzZSB7XG4gICAgICBub3JtYWxpemVkU3RhY2sucHVzaCh7XG4gICAgICAgIHZub2RlOiBjdXJyZW50Vk5vZGUsXG4gICAgICAgIHJlY3Vyc2VDb3VudDogMFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudEluc3RhbmNlID0gY3VycmVudFZOb2RlLmNvbXBvbmVudCAmJiBjdXJyZW50Vk5vZGUuY29tcG9uZW50LnBhcmVudDtcbiAgICBjdXJyZW50Vk5vZGUgPSBwYXJlbnRJbnN0YW5jZSAmJiBwYXJlbnRJbnN0YW5jZS52bm9kZTtcbiAgfVxuICByZXR1cm4gbm9ybWFsaXplZFN0YWNrO1xufVxuZnVuY3Rpb24gZm9ybWF0VHJhY2UodHJhY2UpIHtcbiAgY29uc3QgbG9ncyA9IFtdO1xuICB0cmFjZS5mb3JFYWNoKChlbnRyeSwgaSkgPT4ge1xuICAgIGxvZ3MucHVzaCguLi5pID09PSAwID8gW10gOiBbYFxuYF0sIC4uLmZvcm1hdFRyYWNlRW50cnkoZW50cnkpKTtcbiAgfSk7XG4gIHJldHVybiBsb2dzO1xufVxuZnVuY3Rpb24gZm9ybWF0VHJhY2VFbnRyeSh7IHZub2RlLCByZWN1cnNlQ291bnQgfSkge1xuICBjb25zdCBwb3N0Zml4ID0gcmVjdXJzZUNvdW50ID4gMCA/IGAuLi4gKCR7cmVjdXJzZUNvdW50fSByZWN1cnNpdmUgY2FsbHMpYCA6IGBgO1xuICBjb25zdCBpc1Jvb3QgPSB2bm9kZS5jb21wb25lbnQgPyB2bm9kZS5jb21wb25lbnQucGFyZW50ID09IG51bGwgOiBmYWxzZTtcbiAgY29uc3Qgb3BlbiA9IGAgYXQgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZShcbiAgICB2bm9kZS5jb21wb25lbnQsXG4gICAgdm5vZGUudHlwZSxcbiAgICBpc1Jvb3RcbiAgKX1gO1xuICBjb25zdCBjbG9zZSA9IGA+YCArIHBvc3RmaXg7XG4gIHJldHVybiB2bm9kZS5wcm9wcyA/IFtvcGVuLCAuLi5mb3JtYXRQcm9wcyh2bm9kZS5wcm9wcyksIGNsb3NlXSA6IFtvcGVuICsgY2xvc2VdO1xufVxuZnVuY3Rpb24gZm9ybWF0UHJvcHMocHJvcHMpIHtcbiAgY29uc3QgcmVzID0gW107XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcyk7XG4gIGtleXMuc2xpY2UoMCwgMykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgcmVzLnB1c2goLi4uZm9ybWF0UHJvcChrZXksIHByb3BzW2tleV0pKTtcbiAgfSk7XG4gIGlmIChrZXlzLmxlbmd0aCA+IDMpIHtcbiAgICByZXMucHVzaChgIC4uLmApO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBmb3JtYXRQcm9wKGtleSwgdmFsdWUsIHJhdykge1xuICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09JHt2YWx1ZX1gXTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIiB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09JHt2YWx1ZX1gXTtcbiAgfSBlbHNlIGlmIChpc1JlZih2YWx1ZSkpIHtcbiAgICB2YWx1ZSA9IGZvcm1hdFByb3Aoa2V5LCB0b1Jhdyh2YWx1ZS52YWx1ZSksIHRydWUpO1xuICAgIHJldHVybiByYXcgPyB2YWx1ZSA6IFtgJHtrZXl9PVJlZjxgLCB2YWx1ZSwgYD5gXTtcbiAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgIHJldHVybiBbYCR7a2V5fT1mbiR7dmFsdWUubmFtZSA/IGA8JHt2YWx1ZS5uYW1lfT5gIDogYGB9YF07XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09YCwgdmFsdWVdO1xuICB9XG59XG5mdW5jdGlvbiBhc3NlcnROdW1iZXIodmFsLCB0eXBlKSB7XG4gIGlmICghISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkgcmV0dXJuO1xuICBpZiAodmFsID09PSB2b2lkIDApIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCAhPT0gXCJudW1iZXJcIikge1xuICAgIHdhcm4kMShgJHt0eXBlfSBpcyBub3QgYSB2YWxpZCBudW1iZXIgLSBnb3QgJHtKU09OLnN0cmluZ2lmeSh2YWwpfS5gKTtcbiAgfSBlbHNlIGlmIChpc05hTih2YWwpKSB7XG4gICAgd2FybiQxKGAke3R5cGV9IGlzIE5hTiAtIHRoZSBkdXJhdGlvbiBleHByZXNzaW9uIG1pZ2h0IGJlIGluY29ycmVjdC5gKTtcbiAgfVxufVxuXG5jb25zdCBFcnJvckNvZGVzID0ge1xuICBcIlNFVFVQX0ZVTkNUSU9OXCI6IDAsXG4gIFwiMFwiOiBcIlNFVFVQX0ZVTkNUSU9OXCIsXG4gIFwiUkVOREVSX0ZVTkNUSU9OXCI6IDEsXG4gIFwiMVwiOiBcIlJFTkRFUl9GVU5DVElPTlwiLFxuICBcIk5BVElWRV9FVkVOVF9IQU5ETEVSXCI6IDUsXG4gIFwiNVwiOiBcIk5BVElWRV9FVkVOVF9IQU5ETEVSXCIsXG4gIFwiQ09NUE9ORU5UX0VWRU5UX0hBTkRMRVJcIjogNixcbiAgXCI2XCI6IFwiQ09NUE9ORU5UX0VWRU5UX0hBTkRMRVJcIixcbiAgXCJWTk9ERV9IT09LXCI6IDcsXG4gIFwiN1wiOiBcIlZOT0RFX0hPT0tcIixcbiAgXCJESVJFQ1RJVkVfSE9PS1wiOiA4LFxuICBcIjhcIjogXCJESVJFQ1RJVkVfSE9PS1wiLFxuICBcIlRSQU5TSVRJT05fSE9PS1wiOiA5LFxuICBcIjlcIjogXCJUUkFOU0lUSU9OX0hPT0tcIixcbiAgXCJBUFBfRVJST1JfSEFORExFUlwiOiAxMCxcbiAgXCIxMFwiOiBcIkFQUF9FUlJPUl9IQU5ETEVSXCIsXG4gIFwiQVBQX1dBUk5fSEFORExFUlwiOiAxMSxcbiAgXCIxMVwiOiBcIkFQUF9XQVJOX0hBTkRMRVJcIixcbiAgXCJGVU5DVElPTl9SRUZcIjogMTIsXG4gIFwiMTJcIjogXCJGVU5DVElPTl9SRUZcIixcbiAgXCJBU1lOQ19DT01QT05FTlRfTE9BREVSXCI6IDEzLFxuICBcIjEzXCI6IFwiQVNZTkNfQ09NUE9ORU5UX0xPQURFUlwiLFxuICBcIlNDSEVEVUxFUlwiOiAxNCxcbiAgXCIxNFwiOiBcIlNDSEVEVUxFUlwiLFxuICBcIkNPTVBPTkVOVF9VUERBVEVcIjogMTUsXG4gIFwiMTVcIjogXCJDT01QT05FTlRfVVBEQVRFXCIsXG4gIFwiQVBQX1VOTU9VTlRfQ0xFQU5VUFwiOiAxNixcbiAgXCIxNlwiOiBcIkFQUF9VTk1PVU5UX0NMRUFOVVBcIlxufTtcbmNvbnN0IEVycm9yVHlwZVN0cmluZ3MkMSA9IHtcbiAgW1wic3BcIl06IFwic2VydmVyUHJlZmV0Y2ggaG9va1wiLFxuICBbXCJiY1wiXTogXCJiZWZvcmVDcmVhdGUgaG9va1wiLFxuICBbXCJjXCJdOiBcImNyZWF0ZWQgaG9va1wiLFxuICBbXCJibVwiXTogXCJiZWZvcmVNb3VudCBob29rXCIsXG4gIFtcIm1cIl06IFwibW91bnRlZCBob29rXCIsXG4gIFtcImJ1XCJdOiBcImJlZm9yZVVwZGF0ZSBob29rXCIsXG4gIFtcInVcIl06IFwidXBkYXRlZFwiLFxuICBbXCJidW1cIl06IFwiYmVmb3JlVW5tb3VudCBob29rXCIsXG4gIFtcInVtXCJdOiBcInVubW91bnRlZCBob29rXCIsXG4gIFtcImFcIl06IFwiYWN0aXZhdGVkIGhvb2tcIixcbiAgW1wiZGFcIl06IFwiZGVhY3RpdmF0ZWQgaG9va1wiLFxuICBbXCJlY1wiXTogXCJlcnJvckNhcHR1cmVkIGhvb2tcIixcbiAgW1wicnRjXCJdOiBcInJlbmRlclRyYWNrZWQgaG9va1wiLFxuICBbXCJydGdcIl06IFwicmVuZGVyVHJpZ2dlcmVkIGhvb2tcIixcbiAgWzBdOiBcInNldHVwIGZ1bmN0aW9uXCIsXG4gIFsxXTogXCJyZW5kZXIgZnVuY3Rpb25cIixcbiAgWzJdOiBcIndhdGNoZXIgZ2V0dGVyXCIsXG4gIFszXTogXCJ3YXRjaGVyIGNhbGxiYWNrXCIsXG4gIFs0XTogXCJ3YXRjaGVyIGNsZWFudXAgZnVuY3Rpb25cIixcbiAgWzVdOiBcIm5hdGl2ZSBldmVudCBoYW5kbGVyXCIsXG4gIFs2XTogXCJjb21wb25lbnQgZXZlbnQgaGFuZGxlclwiLFxuICBbN106IFwidm5vZGUgaG9va1wiLFxuICBbOF06IFwiZGlyZWN0aXZlIGhvb2tcIixcbiAgWzldOiBcInRyYW5zaXRpb24gaG9va1wiLFxuICBbMTBdOiBcImFwcCBlcnJvckhhbmRsZXJcIixcbiAgWzExXTogXCJhcHAgd2FybkhhbmRsZXJcIixcbiAgWzEyXTogXCJyZWYgZnVuY3Rpb25cIixcbiAgWzEzXTogXCJhc3luYyBjb21wb25lbnQgbG9hZGVyXCIsXG4gIFsxNF06IFwic2NoZWR1bGVyIGZsdXNoXCIsXG4gIFsxNV06IFwiY29tcG9uZW50IHVwZGF0ZVwiLFxuICBbMTZdOiBcImFwcCB1bm1vdW50IGNsZWFudXAgZnVuY3Rpb25cIlxufTtcbmZ1bmN0aW9uIGNhbGxXaXRoRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXJncyA/IGZuKC4uLmFyZ3MpIDogZm4oKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgdHlwZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGZuLCBpbnN0YW5jZSwgdHlwZSwgYXJncykge1xuICBpZiAoaXNGdW5jdGlvbihmbikpIHtcbiAgICBjb25zdCByZXMgPSBjYWxsV2l0aEVycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCB0eXBlLCBhcmdzKTtcbiAgICBpZiAocmVzICYmIGlzUHJvbWlzZShyZXMpKSB7XG4gICAgICByZXMuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCB0eXBlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIGlmIChpc0FycmF5KGZuKSkge1xuICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbHVlcy5wdXNoKGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGZuW2ldLCBpbnN0YW5jZSwgdHlwZSwgYXJncykpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuJDEoXG4gICAgICBgSW52YWxpZCB2YWx1ZSB0eXBlIHBhc3NlZCB0byBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZygpOiAke3R5cGVvZiBmbn1gXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgdHlwZSwgdGhyb3dJbkRldiA9IHRydWUpIHtcbiAgY29uc3QgY29udGV4dFZOb2RlID0gaW5zdGFuY2UgPyBpbnN0YW5jZS52bm9kZSA6IG51bGw7XG4gIGNvbnN0IHsgZXJyb3JIYW5kbGVyLCB0aHJvd1VuaGFuZGxlZEVycm9ySW5Qcm9kdWN0aW9uIH0gPSBpbnN0YW5jZSAmJiBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZyB8fCBFTVBUWV9PQko7XG4gIGlmIChpbnN0YW5jZSkge1xuICAgIGxldCBjdXIgPSBpbnN0YW5jZS5wYXJlbnQ7XG4gICAgY29uc3QgZXhwb3NlZEluc3RhbmNlID0gaW5zdGFuY2UucHJveHk7XG4gICAgY29uc3QgZXJyb3JJbmZvID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IEVycm9yVHlwZVN0cmluZ3MkMVt0eXBlXSA6IGBodHRwczovL3Z1ZWpzLm9yZy9lcnJvci1yZWZlcmVuY2UvI3J1bnRpbWUtJHt0eXBlfWA7XG4gICAgd2hpbGUgKGN1cikge1xuICAgICAgY29uc3QgZXJyb3JDYXB0dXJlZEhvb2tzID0gY3VyLmVjO1xuICAgICAgaWYgKGVycm9yQ2FwdHVyZWRIb29rcykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVycm9yQ2FwdHVyZWRIb29rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChlcnJvckNhcHR1cmVkSG9va3NbaV0oZXJyLCBleHBvc2VkSW5zdGFuY2UsIGVycm9ySW5mbykgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjdXIgPSBjdXIucGFyZW50O1xuICAgIH1cbiAgICBpZiAoZXJyb3JIYW5kbGVyKSB7XG4gICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoZXJyb3JIYW5kbGVyLCBudWxsLCAxMCwgW1xuICAgICAgICBlcnIsXG4gICAgICAgIGV4cG9zZWRJbnN0YW5jZSxcbiAgICAgICAgZXJyb3JJbmZvXG4gICAgICBdKTtcbiAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgbG9nRXJyb3IoZXJyLCB0eXBlLCBjb250ZXh0Vk5vZGUsIHRocm93SW5EZXYsIHRocm93VW5oYW5kbGVkRXJyb3JJblByb2R1Y3Rpb24pO1xufVxuZnVuY3Rpb24gbG9nRXJyb3IoZXJyLCB0eXBlLCBjb250ZXh0Vk5vZGUsIHRocm93SW5EZXYgPSB0cnVlLCB0aHJvd0luUHJvZCA9IGZhbHNlKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgY29uc3QgaW5mbyA9IEVycm9yVHlwZVN0cmluZ3MkMVt0eXBlXTtcbiAgICBpZiAoY29udGV4dFZOb2RlKSB7XG4gICAgICBwdXNoV2FybmluZ0NvbnRleHQoY29udGV4dFZOb2RlKTtcbiAgICB9XG4gICAgd2FybiQxKGBVbmhhbmRsZWQgZXJyb3Ike2luZm8gPyBgIGR1cmluZyBleGVjdXRpb24gb2YgJHtpbmZvfWAgOiBgYH1gKTtcbiAgICBpZiAoY29udGV4dFZOb2RlKSB7XG4gICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgIH1cbiAgICBpZiAodGhyb3dJbkRldikge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfVxuICB9IGVsc2UgaWYgKHRocm93SW5Qcm9kKSB7XG4gICAgdGhyb3cgZXJyO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgfVxufVxuXG5jb25zdCBxdWV1ZSA9IFtdO1xubGV0IGZsdXNoSW5kZXggPSAtMTtcbmNvbnN0IHBlbmRpbmdQb3N0Rmx1c2hDYnMgPSBbXTtcbmxldCBhY3RpdmVQb3N0Rmx1c2hDYnMgPSBudWxsO1xubGV0IHBvc3RGbHVzaEluZGV4ID0gMDtcbmNvbnN0IHJlc29sdmVkUHJvbWlzZSA9IC8qIEBfX1BVUkVfXyAqLyBQcm9taXNlLnJlc29sdmUoKTtcbmxldCBjdXJyZW50Rmx1c2hQcm9taXNlID0gbnVsbDtcbmNvbnN0IFJFQ1VSU0lPTl9MSU1JVCA9IDEwMDtcbmZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XG4gIGNvbnN0IHAgPSBjdXJyZW50Rmx1c2hQcm9taXNlIHx8IHJlc29sdmVkUHJvbWlzZTtcbiAgcmV0dXJuIGZuID8gcC50aGVuKHRoaXMgPyBmbi5iaW5kKHRoaXMpIDogZm4pIDogcDtcbn1cbmZ1bmN0aW9uIGZpbmRJbnNlcnRpb25JbmRleChpZCkge1xuICBsZXQgc3RhcnQgPSBmbHVzaEluZGV4ICsgMTtcbiAgbGV0IGVuZCA9IHF1ZXVlLmxlbmd0aDtcbiAgd2hpbGUgKHN0YXJ0IDwgZW5kKSB7XG4gICAgY29uc3QgbWlkZGxlID0gc3RhcnQgKyBlbmQgPj4+IDE7XG4gICAgY29uc3QgbWlkZGxlSm9iID0gcXVldWVbbWlkZGxlXTtcbiAgICBjb25zdCBtaWRkbGVKb2JJZCA9IGdldElkKG1pZGRsZUpvYik7XG4gICAgaWYgKG1pZGRsZUpvYklkIDwgaWQgfHwgbWlkZGxlSm9iSWQgPT09IGlkICYmIG1pZGRsZUpvYi5mbGFncyAmIDIpIHtcbiAgICAgIHN0YXJ0ID0gbWlkZGxlICsgMTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW5kID0gbWlkZGxlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3RhcnQ7XG59XG5mdW5jdGlvbiBxdWV1ZUpvYihqb2IpIHtcbiAgaWYgKCEoam9iLmZsYWdzICYgMSkpIHtcbiAgICBjb25zdCBqb2JJZCA9IGdldElkKGpvYik7XG4gICAgY29uc3QgbGFzdEpvYiA9IHF1ZXVlW3F1ZXVlLmxlbmd0aCAtIDFdO1xuICAgIGlmICghbGFzdEpvYiB8fCAvLyBmYXN0IHBhdGggd2hlbiB0aGUgam9iIGlkIGlzIGxhcmdlciB0aGFuIHRoZSB0YWlsXG4gICAgIShqb2IuZmxhZ3MgJiAyKSAmJiBqb2JJZCA+PSBnZXRJZChsYXN0Sm9iKSkge1xuICAgICAgcXVldWUucHVzaChqb2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBxdWV1ZS5zcGxpY2UoZmluZEluc2VydGlvbkluZGV4KGpvYklkKSwgMCwgam9iKTtcbiAgICB9XG4gICAgam9iLmZsYWdzIHw9IDE7XG4gICAgcXVldWVGbHVzaCgpO1xuICB9XG59XG5mdW5jdGlvbiBxdWV1ZUZsdXNoKCkge1xuICBpZiAoIWN1cnJlbnRGbHVzaFByb21pc2UpIHtcbiAgICBjdXJyZW50Rmx1c2hQcm9taXNlID0gcmVzb2x2ZWRQcm9taXNlLnRoZW4oZmx1c2hKb2JzKTtcbiAgfVxufVxuZnVuY3Rpb24gcXVldWVQb3N0Rmx1c2hDYihjYikge1xuICBpZiAoIWlzQXJyYXkoY2IpKSB7XG4gICAgaWYgKGFjdGl2ZVBvc3RGbHVzaENicyAmJiBjYi5pZCA9PT0gLTEpIHtcbiAgICAgIGFjdGl2ZVBvc3RGbHVzaENicy5zcGxpY2UocG9zdEZsdXNoSW5kZXggKyAxLCAwLCBjYik7XG4gICAgfSBlbHNlIGlmICghKGNiLmZsYWdzICYgMSkpIHtcbiAgICAgIHBlbmRpbmdQb3N0Rmx1c2hDYnMucHVzaChjYik7XG4gICAgICBjYi5mbGFncyB8PSAxO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwZW5kaW5nUG9zdEZsdXNoQ2JzLnB1c2goLi4uY2IpO1xuICB9XG4gIHF1ZXVlRmx1c2goKTtcbn1cbmZ1bmN0aW9uIGZsdXNoUHJlRmx1c2hDYnMoaW5zdGFuY2UsIHNlZW4sIGkgPSBmbHVzaEluZGV4ICsgMSkge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHNlZW4gPSBzZWVuIHx8IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIH1cbiAgZm9yICg7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNiID0gcXVldWVbaV07XG4gICAgaWYgKGNiICYmIGNiLmZsYWdzICYgMikge1xuICAgICAgaWYgKGluc3RhbmNlICYmIGNiLmlkICE9PSBpbnN0YW5jZS51aWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2VlbiwgY2IpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgcXVldWUuc3BsaWNlKGksIDEpO1xuICAgICAgaS0tO1xuICAgICAgaWYgKGNiLmZsYWdzICYgNCkge1xuICAgICAgICBjYi5mbGFncyAmPSAtMjtcbiAgICAgIH1cbiAgICAgIGNiKCk7XG4gICAgICBpZiAoIShjYi5mbGFncyAmIDQpKSB7XG4gICAgICAgIGNiLmZsYWdzICY9IC0yO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZmx1c2hQb3N0Rmx1c2hDYnMoc2Vlbikge1xuICBpZiAocGVuZGluZ1Bvc3RGbHVzaENicy5sZW5ndGgpIHtcbiAgICBjb25zdCBkZWR1cGVkID0gWy4uLm5ldyBTZXQocGVuZGluZ1Bvc3RGbHVzaENicyldLnNvcnQoXG4gICAgICAoYSwgYikgPT4gZ2V0SWQoYSkgLSBnZXRJZChiKVxuICAgICk7XG4gICAgcGVuZGluZ1Bvc3RGbHVzaENicy5sZW5ndGggPSAwO1xuICAgIGlmIChhY3RpdmVQb3N0Rmx1c2hDYnMpIHtcbiAgICAgIGFjdGl2ZVBvc3RGbHVzaENicy5wdXNoKC4uLmRlZHVwZWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY3RpdmVQb3N0Rmx1c2hDYnMgPSBkZWR1cGVkO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICBzZWVuID0gc2VlbiB8fCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBmb3IgKHBvc3RGbHVzaEluZGV4ID0gMDsgcG9zdEZsdXNoSW5kZXggPCBhY3RpdmVQb3N0Rmx1c2hDYnMubGVuZ3RoOyBwb3N0Rmx1c2hJbmRleCsrKSB7XG4gICAgICBjb25zdCBjYiA9IGFjdGl2ZVBvc3RGbHVzaENic1twb3N0Rmx1c2hJbmRleF07XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2VlbiwgY2IpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGNiLmZsYWdzICYgNCkge1xuICAgICAgICBjYi5mbGFncyAmPSAtMjtcbiAgICAgIH1cbiAgICAgIGlmICghKGNiLmZsYWdzICYgOCkpIGNiKCk7XG4gICAgICBjYi5mbGFncyAmPSAtMjtcbiAgICB9XG4gICAgYWN0aXZlUG9zdEZsdXNoQ2JzID0gbnVsbDtcbiAgICBwb3N0Rmx1c2hJbmRleCA9IDA7XG4gIH1cbn1cbmNvbnN0IGdldElkID0gKGpvYikgPT4gam9iLmlkID09IG51bGwgPyBqb2IuZmxhZ3MgJiAyID8gLTEgOiBJbmZpbml0eSA6IGpvYi5pZDtcbmZ1bmN0aW9uIGZsdXNoSm9icyhzZWVuKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgc2VlbiA9IHNlZW4gfHwgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgfVxuICBjb25zdCBjaGVjayA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyAoam9iKSA9PiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2Vlbiwgam9iKSA6IE5PT1A7XG4gIHRyeSB7XG4gICAgZm9yIChmbHVzaEluZGV4ID0gMDsgZmx1c2hJbmRleCA8IHF1ZXVlLmxlbmd0aDsgZmx1c2hJbmRleCsrKSB7XG4gICAgICBjb25zdCBqb2IgPSBxdWV1ZVtmbHVzaEluZGV4XTtcbiAgICAgIGlmIChqb2IgJiYgIShqb2IuZmxhZ3MgJiA4KSkge1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBjaGVjayhqb2IpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGpvYi5mbGFncyAmIDQpIHtcbiAgICAgICAgICBqb2IuZmxhZ3MgJj0gfjE7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKFxuICAgICAgICAgIGpvYixcbiAgICAgICAgICBqb2IuaSxcbiAgICAgICAgICBqb2IuaSA/IDE1IDogMTRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCEoam9iLmZsYWdzICYgNCkpIHtcbiAgICAgICAgICBqb2IuZmxhZ3MgJj0gfjE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZmluYWxseSB7XG4gICAgZm9yICg7IGZsdXNoSW5kZXggPCBxdWV1ZS5sZW5ndGg7IGZsdXNoSW5kZXgrKykge1xuICAgICAgY29uc3Qgam9iID0gcXVldWVbZmx1c2hJbmRleF07XG4gICAgICBpZiAoam9iKSB7XG4gICAgICAgIGpvYi5mbGFncyAmPSAtMjtcbiAgICAgIH1cbiAgICB9XG4gICAgZmx1c2hJbmRleCA9IC0xO1xuICAgIHF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgZmx1c2hQb3N0Rmx1c2hDYnMoc2Vlbik7XG4gICAgY3VycmVudEZsdXNoUHJvbWlzZSA9IG51bGw7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCB8fCBwZW5kaW5nUG9zdEZsdXNoQ2JzLmxlbmd0aCkge1xuICAgICAgZmx1c2hKb2JzKHNlZW4pO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gY2hlY2tSZWN1cnNpdmVVcGRhdGVzKHNlZW4sIGZuKSB7XG4gIGNvbnN0IGNvdW50ID0gc2Vlbi5nZXQoZm4pIHx8IDA7XG4gIGlmIChjb3VudCA+IFJFQ1VSU0lPTl9MSU1JVCkge1xuICAgIGNvbnN0IGluc3RhbmNlID0gZm4uaTtcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gaW5zdGFuY2UgJiYgZ2V0Q29tcG9uZW50TmFtZShpbnN0YW5jZS50eXBlKTtcbiAgICBoYW5kbGVFcnJvcihcbiAgICAgIGBNYXhpbXVtIHJlY3Vyc2l2ZSB1cGRhdGVzIGV4Y2VlZGVkJHtjb21wb25lbnROYW1lID8gYCBpbiBjb21wb25lbnQgPCR7Y29tcG9uZW50TmFtZX0+YCA6IGBgfS4gVGhpcyBtZWFucyB5b3UgaGF2ZSBhIHJlYWN0aXZlIGVmZmVjdCB0aGF0IGlzIG11dGF0aW5nIGl0cyBvd24gZGVwZW5kZW5jaWVzIGFuZCB0aHVzIHJlY3Vyc2l2ZWx5IHRyaWdnZXJpbmcgaXRzZWxmLiBQb3NzaWJsZSBzb3VyY2VzIGluY2x1ZGUgY29tcG9uZW50IHRlbXBsYXRlLCByZW5kZXIgZnVuY3Rpb24sIHVwZGF0ZWQgaG9vayBvciB3YXRjaGVyIHNvdXJjZSBmdW5jdGlvbi5gLFxuICAgICAgbnVsbCxcbiAgICAgIDEwXG4gICAgKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBzZWVuLnNldChmbiwgY291bnQgKyAxKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5sZXQgaXNIbXJVcGRhdGluZyA9IGZhbHNlO1xuY29uc3QgaG1yRGlydHlDb21wb25lbnRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbmlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gIGdldEdsb2JhbFRoaXMoKS5fX1ZVRV9ITVJfUlVOVElNRV9fID0ge1xuICAgIGNyZWF0ZVJlY29yZDogdHJ5V3JhcChjcmVhdGVSZWNvcmQpLFxuICAgIHJlcmVuZGVyOiB0cnlXcmFwKHJlcmVuZGVyKSxcbiAgICByZWxvYWQ6IHRyeVdyYXAocmVsb2FkKVxuICB9O1xufVxuY29uc3QgbWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbmZ1bmN0aW9uIHJlZ2lzdGVySE1SKGluc3RhbmNlKSB7XG4gIGNvbnN0IGlkID0gaW5zdGFuY2UudHlwZS5fX2htcklkO1xuICBsZXQgcmVjb3JkID0gbWFwLmdldChpZCk7XG4gIGlmICghcmVjb3JkKSB7XG4gICAgY3JlYXRlUmVjb3JkKGlkLCBpbnN0YW5jZS50eXBlKTtcbiAgICByZWNvcmQgPSBtYXAuZ2V0KGlkKTtcbiAgfVxuICByZWNvcmQuaW5zdGFuY2VzLmFkZChpbnN0YW5jZSk7XG59XG5mdW5jdGlvbiB1bnJlZ2lzdGVySE1SKGluc3RhbmNlKSB7XG4gIG1hcC5nZXQoaW5zdGFuY2UudHlwZS5fX2htcklkKS5pbnN0YW5jZXMuZGVsZXRlKGluc3RhbmNlKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlY29yZChpZCwgaW5pdGlhbERlZikge1xuICBpZiAobWFwLmhhcyhpZCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgbWFwLnNldChpZCwge1xuICAgIGluaXRpYWxEZWY6IG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGluaXRpYWxEZWYpLFxuICAgIGluc3RhbmNlczogLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKVxuICB9KTtcbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBub3JtYWxpemVDbGFzc0NvbXBvbmVudChjb21wb25lbnQpIHtcbiAgcmV0dXJuIGlzQ2xhc3NDb21wb25lbnQoY29tcG9uZW50KSA/IGNvbXBvbmVudC5fX3ZjY09wdHMgOiBjb21wb25lbnQ7XG59XG5mdW5jdGlvbiByZXJlbmRlcihpZCwgbmV3UmVuZGVyKSB7XG4gIGNvbnN0IHJlY29yZCA9IG1hcC5nZXQoaWQpO1xuICBpZiAoIXJlY29yZCkge1xuICAgIHJldHVybjtcbiAgfVxuICByZWNvcmQuaW5pdGlhbERlZi5yZW5kZXIgPSBuZXdSZW5kZXI7XG4gIFsuLi5yZWNvcmQuaW5zdGFuY2VzXS5mb3JFYWNoKChpbnN0YW5jZSkgPT4ge1xuICAgIGlmIChuZXdSZW5kZXIpIHtcbiAgICAgIGluc3RhbmNlLnJlbmRlciA9IG5ld1JlbmRlcjtcbiAgICAgIG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGluc3RhbmNlLnR5cGUpLnJlbmRlciA9IG5ld1JlbmRlcjtcbiAgICB9XG4gICAgaW5zdGFuY2UucmVuZGVyQ2FjaGUgPSBbXTtcbiAgICBpc0htclVwZGF0aW5nID0gdHJ1ZTtcbiAgICBpZiAoIShpbnN0YW5jZS5qb2IuZmxhZ3MgJiA4KSkge1xuICAgICAgaW5zdGFuY2UudXBkYXRlKCk7XG4gICAgfVxuICAgIGlzSG1yVXBkYXRpbmcgPSBmYWxzZTtcbiAgfSk7XG59XG5mdW5jdGlvbiByZWxvYWQoaWQsIG5ld0NvbXApIHtcbiAgY29uc3QgcmVjb3JkID0gbWFwLmdldChpZCk7XG4gIGlmICghcmVjb3JkKSByZXR1cm47XG4gIG5ld0NvbXAgPSBub3JtYWxpemVDbGFzc0NvbXBvbmVudChuZXdDb21wKTtcbiAgdXBkYXRlQ29tcG9uZW50RGVmKHJlY29yZC5pbml0aWFsRGVmLCBuZXdDb21wKTtcbiAgY29uc3QgaW5zdGFuY2VzID0gWy4uLnJlY29yZC5pbnN0YW5jZXNdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGluc3RhbmNlcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzW2ldO1xuICAgIGNvbnN0IG9sZENvbXAgPSBub3JtYWxpemVDbGFzc0NvbXBvbmVudChpbnN0YW5jZS50eXBlKTtcbiAgICBsZXQgZGlydHlJbnN0YW5jZXMgPSBobXJEaXJ0eUNvbXBvbmVudHMuZ2V0KG9sZENvbXApO1xuICAgIGlmICghZGlydHlJbnN0YW5jZXMpIHtcbiAgICAgIGlmIChvbGRDb21wICE9PSByZWNvcmQuaW5pdGlhbERlZikge1xuICAgICAgICB1cGRhdGVDb21wb25lbnREZWYob2xkQ29tcCwgbmV3Q29tcCk7XG4gICAgICB9XG4gICAgICBobXJEaXJ0eUNvbXBvbmVudHMuc2V0KG9sZENvbXAsIGRpcnR5SW5zdGFuY2VzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7XG4gICAgfVxuICAgIGRpcnR5SW5zdGFuY2VzLmFkZChpbnN0YW5jZSk7XG4gICAgaW5zdGFuY2UuYXBwQ29udGV4dC5wcm9wc0NhY2hlLmRlbGV0ZShpbnN0YW5jZS50eXBlKTtcbiAgICBpbnN0YW5jZS5hcHBDb250ZXh0LmVtaXRzQ2FjaGUuZGVsZXRlKGluc3RhbmNlLnR5cGUpO1xuICAgIGluc3RhbmNlLmFwcENvbnRleHQub3B0aW9uc0NhY2hlLmRlbGV0ZShpbnN0YW5jZS50eXBlKTtcbiAgICBpZiAoaW5zdGFuY2UuY2VSZWxvYWQpIHtcbiAgICAgIGRpcnR5SW5zdGFuY2VzLmFkZChpbnN0YW5jZSk7XG4gICAgICBpbnN0YW5jZS5jZVJlbG9hZChuZXdDb21wLnN0eWxlcyk7XG4gICAgICBkaXJ0eUluc3RhbmNlcy5kZWxldGUoaW5zdGFuY2UpO1xuICAgIH0gZWxzZSBpZiAoaW5zdGFuY2UucGFyZW50KSB7XG4gICAgICBxdWV1ZUpvYigoKSA9PiB7XG4gICAgICAgIGlmICghKGluc3RhbmNlLmpvYi5mbGFncyAmIDgpKSB7XG4gICAgICAgICAgaXNIbXJVcGRhdGluZyA9IHRydWU7XG4gICAgICAgICAgaW5zdGFuY2UucGFyZW50LnVwZGF0ZSgpO1xuICAgICAgICAgIGlzSG1yVXBkYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICBkaXJ0eUluc3RhbmNlcy5kZWxldGUoaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGluc3RhbmNlLmFwcENvbnRleHQucmVsb2FkKSB7XG4gICAgICBpbnN0YW5jZS5hcHBDb250ZXh0LnJlbG9hZCgpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiW0hNUl0gUm9vdCBvciBtYW51YWxseSBtb3VudGVkIGluc3RhbmNlIG1vZGlmaWVkLiBGdWxsIHJlbG9hZCByZXF1aXJlZC5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGluc3RhbmNlLnJvb3QuY2UgJiYgaW5zdGFuY2UgIT09IGluc3RhbmNlLnJvb3QpIHtcbiAgICAgIGluc3RhbmNlLnJvb3QuY2UuX3JlbW92ZUNoaWxkU3R5bGUob2xkQ29tcCk7XG4gICAgfVxuICB9XG4gIHF1ZXVlUG9zdEZsdXNoQ2IoKCkgPT4ge1xuICAgIGhtckRpcnR5Q29tcG9uZW50cy5jbGVhcigpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZUNvbXBvbmVudERlZihvbGRDb21wLCBuZXdDb21wKSB7XG4gIGV4dGVuZChvbGRDb21wLCBuZXdDb21wKTtcbiAgZm9yIChjb25zdCBrZXkgaW4gb2xkQ29tcCkge1xuICAgIGlmIChrZXkgIT09IFwiX19maWxlXCIgJiYgIShrZXkgaW4gbmV3Q29tcCkpIHtcbiAgICAgIGRlbGV0ZSBvbGRDb21wW2tleV07XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiB0cnlXcmFwKGZuKSB7XG4gIHJldHVybiAoaWQsIGFyZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZm4oaWQsIGFyZyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFtITVJdIFNvbWV0aGluZyB3ZW50IHdyb25nIGR1cmluZyBWdWUgY29tcG9uZW50IGhvdC1yZWxvYWQuIEZ1bGwgcmVsb2FkIHJlcXVpcmVkLmBcbiAgICAgICk7XG4gICAgfVxuICB9O1xufVxuXG5sZXQgZGV2dG9vbHMkMTtcbmxldCBidWZmZXIgPSBbXTtcbmxldCBkZXZ0b29sc05vdEluc3RhbGxlZCA9IGZhbHNlO1xuZnVuY3Rpb24gZW1pdCQxKGV2ZW50LCAuLi5hcmdzKSB7XG4gIGlmIChkZXZ0b29scyQxKSB7XG4gICAgZGV2dG9vbHMkMS5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgfSBlbHNlIGlmICghZGV2dG9vbHNOb3RJbnN0YWxsZWQpIHtcbiAgICBidWZmZXIucHVzaCh7IGV2ZW50LCBhcmdzIH0pO1xuICB9XG59XG5mdW5jdGlvbiBzZXREZXZ0b29sc0hvb2skMShob29rLCB0YXJnZXQpIHtcbiAgdmFyIF9hLCBfYjtcbiAgZGV2dG9vbHMkMSA9IGhvb2s7XG4gIGlmIChkZXZ0b29scyQxKSB7XG4gICAgZGV2dG9vbHMkMS5lbmFibGVkID0gdHJ1ZTtcbiAgICBidWZmZXIuZm9yRWFjaCgoeyBldmVudCwgYXJncyB9KSA9PiBkZXZ0b29scyQxLmVtaXQoZXZlbnQsIC4uLmFyZ3MpKTtcbiAgICBidWZmZXIgPSBbXTtcbiAgfSBlbHNlIGlmIChcbiAgICAvLyBoYW5kbGUgbGF0ZSBkZXZ0b29scyBpbmplY3Rpb24gLSBvbmx5IGRvIHRoaXMgaWYgd2UgYXJlIGluIGFuIGFjdHVhbFxuICAgIC8vIGJyb3dzZXIgZW52aXJvbm1lbnQgdG8gYXZvaWQgdGhlIHRpbWVyIGhhbmRsZSBzdGFsbGluZyB0ZXN0IHJ1bm5lciBleGl0XG4gICAgLy8gKCM0ODE1KVxuICAgIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgLy8gc29tZSBlbnZzIG1vY2sgd2luZG93IGJ1dCBub3QgZnVsbHlcbiAgICB3aW5kb3cuSFRNTEVsZW1lbnQgJiYgLy8gYWxzbyBleGNsdWRlIGpzZG9tXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgISgoX2IgPSAoX2EgPSB3aW5kb3cubmF2aWdhdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2EudXNlckFnZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2IuaW5jbHVkZXMoXCJqc2RvbVwiKSlcbiAgKSB7XG4gICAgY29uc3QgcmVwbGF5ID0gdGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX0hPT0tfUkVQTEFZX18gPSB0YXJnZXQuX19WVUVfREVWVE9PTFNfSE9PS19SRVBMQVlfXyB8fCBbXTtcbiAgICByZXBsYXkucHVzaCgobmV3SG9vaykgPT4ge1xuICAgICAgc2V0RGV2dG9vbHNIb29rJDEobmV3SG9vaywgdGFyZ2V0KTtcbiAgICB9KTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghZGV2dG9vbHMkMSkge1xuICAgICAgICB0YXJnZXQuX19WVUVfREVWVE9PTFNfSE9PS19SRVBMQVlfXyA9IG51bGw7XG4gICAgICAgIGRldnRvb2xzTm90SW5zdGFsbGVkID0gdHJ1ZTtcbiAgICAgICAgYnVmZmVyID0gW107XG4gICAgICB9XG4gICAgfSwgM2UzKTtcbiAgfSBlbHNlIHtcbiAgICBkZXZ0b29sc05vdEluc3RhbGxlZCA9IHRydWU7XG4gICAgYnVmZmVyID0gW107XG4gIH1cbn1cbmZ1bmN0aW9uIGRldnRvb2xzSW5pdEFwcChhcHAsIHZlcnNpb24pIHtcbiAgZW1pdCQxKFwiYXBwOmluaXRcIiAvKiBBUFBfSU5JVCAqLywgYXBwLCB2ZXJzaW9uLCB7XG4gICAgRnJhZ21lbnQsXG4gICAgVGV4dCxcbiAgICBDb21tZW50LFxuICAgIFN0YXRpY1xuICB9KTtcbn1cbmZ1bmN0aW9uIGRldnRvb2xzVW5tb3VudEFwcChhcHApIHtcbiAgZW1pdCQxKFwiYXBwOnVubW91bnRcIiAvKiBBUFBfVU5NT1VOVCAqLywgYXBwKTtcbn1cbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50QWRkZWQgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKFwiY29tcG9uZW50OmFkZGVkXCIgLyogQ09NUE9ORU5UX0FEREVEICovKTtcbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50VXBkYXRlZCA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soXCJjb21wb25lbnQ6dXBkYXRlZFwiIC8qIENPTVBPTkVOVF9VUERBVEVEICovKTtcbmNvbnN0IF9kZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKFxuICBcImNvbXBvbmVudDpyZW1vdmVkXCIgLyogQ09NUE9ORU5UX1JFTU9WRUQgKi9cbik7XG5jb25zdCBkZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQgPSAoY29tcG9uZW50KSA9PiB7XG4gIGlmIChkZXZ0b29scyQxICYmIHR5cGVvZiBkZXZ0b29scyQxLmNsZWFudXBCdWZmZXIgPT09IFwiZnVuY3Rpb25cIiAmJiAvLyByZW1vdmUgdGhlIGNvbXBvbmVudCBpZiBpdCB3YXNuJ3QgYnVmZmVyZWRcbiAgIWRldnRvb2xzJDEuY2xlYW51cEJ1ZmZlcihjb21wb25lbnQpKSB7XG4gICAgX2RldnRvb2xzQ29tcG9uZW50UmVtb3ZlZChjb21wb25lbnQpO1xuICB9XG59O1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIGNyZWF0ZURldnRvb2xzQ29tcG9uZW50SG9vayhob29rKSB7XG4gIHJldHVybiAoY29tcG9uZW50KSA9PiB7XG4gICAgZW1pdCQxKFxuICAgICAgaG9vayxcbiAgICAgIGNvbXBvbmVudC5hcHBDb250ZXh0LmFwcCxcbiAgICAgIGNvbXBvbmVudC51aWQsXG4gICAgICBjb21wb25lbnQucGFyZW50ID8gY29tcG9uZW50LnBhcmVudC51aWQgOiB2b2lkIDAsXG4gICAgICBjb21wb25lbnRcbiAgICApO1xuICB9O1xufVxuY29uc3QgZGV2dG9vbHNQZXJmU3RhcnQgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlRGV2dG9vbHNQZXJmb3JtYW5jZUhvb2soXCJwZXJmOnN0YXJ0XCIgLyogUEVSRk9STUFOQ0VfU1RBUlQgKi8pO1xuY29uc3QgZGV2dG9vbHNQZXJmRW5kID0gLyogQF9fUFVSRV9fICovIGNyZWF0ZURldnRvb2xzUGVyZm9ybWFuY2VIb29rKFwicGVyZjplbmRcIiAvKiBQRVJGT1JNQU5DRV9FTkQgKi8pO1xuZnVuY3Rpb24gY3JlYXRlRGV2dG9vbHNQZXJmb3JtYW5jZUhvb2soaG9vaykge1xuICByZXR1cm4gKGNvbXBvbmVudCwgdHlwZSwgdGltZSkgPT4ge1xuICAgIGVtaXQkMShob29rLCBjb21wb25lbnQuYXBwQ29udGV4dC5hcHAsIGNvbXBvbmVudC51aWQsIGNvbXBvbmVudCwgdHlwZSwgdGltZSk7XG4gIH07XG59XG5mdW5jdGlvbiBkZXZ0b29sc0NvbXBvbmVudEVtaXQoY29tcG9uZW50LCBldmVudCwgcGFyYW1zKSB7XG4gIGVtaXQkMShcbiAgICBcImNvbXBvbmVudDplbWl0XCIgLyogQ09NUE9ORU5UX0VNSVQgKi8sXG4gICAgY29tcG9uZW50LmFwcENvbnRleHQuYXBwLFxuICAgIGNvbXBvbmVudCxcbiAgICBldmVudCxcbiAgICBwYXJhbXNcbiAgKTtcbn1cblxubGV0IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSA9IG51bGw7XG5sZXQgY3VycmVudFNjb3BlSWQgPSBudWxsO1xuZnVuY3Rpb24gc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKGluc3RhbmNlKSB7XG4gIGNvbnN0IHByZXYgPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG4gIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSA9IGluc3RhbmNlO1xuICBjdXJyZW50U2NvcGVJZCA9IGluc3RhbmNlICYmIGluc3RhbmNlLnR5cGUuX19zY29wZUlkIHx8IG51bGw7XG4gIHJldHVybiBwcmV2O1xufVxuZnVuY3Rpb24gcHVzaFNjb3BlSWQoaWQpIHtcbiAgY3VycmVudFNjb3BlSWQgPSBpZDtcbn1cbmZ1bmN0aW9uIHBvcFNjb3BlSWQoKSB7XG4gIGN1cnJlbnRTY29wZUlkID0gbnVsbDtcbn1cbmNvbnN0IHdpdGhTY29wZUlkID0gKF9pZCkgPT4gd2l0aEN0eDtcbmZ1bmN0aW9uIHdpdGhDdHgoZm4sIGN0eCA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSwgaXNOb25TY29wZWRTbG90KSB7XG4gIGlmICghY3R4KSByZXR1cm4gZm47XG4gIGlmIChmbi5fbikge1xuICAgIHJldHVybiBmbjtcbiAgfVxuICBjb25zdCByZW5kZXJGbldpdGhDb250ZXh0ID0gKC4uLmFyZ3MpID0+IHtcbiAgICBpZiAocmVuZGVyRm5XaXRoQ29udGV4dC5fZCkge1xuICAgICAgc2V0QmxvY2tUcmFja2luZygtMSk7XG4gICAgfVxuICAgIGNvbnN0IHByZXZJbnN0YW5jZSA9IHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShjdHgpO1xuICAgIGxldCByZXM7XG4gICAgdHJ5IHtcbiAgICAgIHJlcyA9IGZuKC4uLmFyZ3MpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UocHJldkluc3RhbmNlKTtcbiAgICAgIGlmIChyZW5kZXJGbldpdGhDb250ZXh0Ll9kKSB7XG4gICAgICAgIHNldEJsb2NrVHJhY2tpbmcoMSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgZGV2dG9vbHNDb21wb25lbnRVcGRhdGVkKGN0eCk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH07XG4gIHJlbmRlckZuV2l0aENvbnRleHQuX24gPSB0cnVlO1xuICByZW5kZXJGbldpdGhDb250ZXh0Ll9jID0gdHJ1ZTtcbiAgcmVuZGVyRm5XaXRoQ29udGV4dC5fZCA9IHRydWU7XG4gIHJldHVybiByZW5kZXJGbldpdGhDb250ZXh0O1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZURpcmVjdGl2ZU5hbWUobmFtZSkge1xuICBpZiAoaXNCdWlsdEluRGlyZWN0aXZlKG5hbWUpKSB7XG4gICAgd2FybiQxKFwiRG8gbm90IHVzZSBidWlsdC1pbiBkaXJlY3RpdmUgaWRzIGFzIGN1c3RvbSBkaXJlY3RpdmUgaWQ6IFwiICsgbmFtZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHdpdGhEaXJlY3RpdmVzKHZub2RlLCBkaXJlY3RpdmVzKSB7XG4gIGlmIChjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgPT09IG51bGwpIHtcbiAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4kMShgd2l0aERpcmVjdGl2ZXMgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgcmVuZGVyIGZ1bmN0aW9ucy5gKTtcbiAgICByZXR1cm4gdm5vZGU7XG4gIH1cbiAgY29uc3QgaW5zdGFuY2UgPSBnZXRDb21wb25lbnRQdWJsaWNJbnN0YW5jZShjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UpO1xuICBjb25zdCBiaW5kaW5ncyA9IHZub2RlLmRpcnMgfHwgKHZub2RlLmRpcnMgPSBbXSk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZGlyZWN0aXZlcy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBbZGlyLCB2YWx1ZSwgYXJnLCBtb2RpZmllcnMgPSBFTVBUWV9PQkpdID0gZGlyZWN0aXZlc1tpXTtcbiAgICBpZiAoZGlyKSB7XG4gICAgICBpZiAoaXNGdW5jdGlvbihkaXIpKSB7XG4gICAgICAgIGRpciA9IHtcbiAgICAgICAgICBtb3VudGVkOiBkaXIsXG4gICAgICAgICAgdXBkYXRlZDogZGlyXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAoZGlyLmRlZXApIHtcbiAgICAgICAgdHJhdmVyc2UodmFsdWUpO1xuICAgICAgfVxuICAgICAgYmluZGluZ3MucHVzaCh7XG4gICAgICAgIGRpcixcbiAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBvbGRWYWx1ZTogdm9pZCAwLFxuICAgICAgICBhcmcsXG4gICAgICAgIG1vZGlmaWVyc1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB2bm9kZTtcbn1cbmZ1bmN0aW9uIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIHByZXZWTm9kZSwgaW5zdGFuY2UsIG5hbWUpIHtcbiAgY29uc3QgYmluZGluZ3MgPSB2bm9kZS5kaXJzO1xuICBjb25zdCBvbGRCaW5kaW5ncyA9IHByZXZWTm9kZSAmJiBwcmV2Vk5vZGUuZGlycztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW5kaW5ncy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGJpbmRpbmcgPSBiaW5kaW5nc1tpXTtcbiAgICBpZiAob2xkQmluZGluZ3MpIHtcbiAgICAgIGJpbmRpbmcub2xkVmFsdWUgPSBvbGRCaW5kaW5nc1tpXS52YWx1ZTtcbiAgICB9XG4gICAgbGV0IGhvb2sgPSBiaW5kaW5nLmRpcltuYW1lXTtcbiAgICBpZiAoaG9vaykge1xuICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaG9vaywgaW5zdGFuY2UsIDgsIFtcbiAgICAgICAgdm5vZGUuZWwsXG4gICAgICAgIGJpbmRpbmcsXG4gICAgICAgIHZub2RlLFxuICAgICAgICBwcmV2Vk5vZGVcbiAgICAgIF0pO1xuICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCBUZWxlcG9ydEVuZEtleSA9IFN5bWJvbChcIl92dGVcIik7XG5jb25zdCBpc1RlbGVwb3J0ID0gKHR5cGUpID0+IHR5cGUuX19pc1RlbGVwb3J0O1xuY29uc3QgaXNUZWxlcG9ydERpc2FibGVkID0gKHByb3BzKSA9PiBwcm9wcyAmJiAocHJvcHMuZGlzYWJsZWQgfHwgcHJvcHMuZGlzYWJsZWQgPT09IFwiXCIpO1xuY29uc3QgaXNUZWxlcG9ydERlZmVycmVkID0gKHByb3BzKSA9PiBwcm9wcyAmJiAocHJvcHMuZGVmZXIgfHwgcHJvcHMuZGVmZXIgPT09IFwiXCIpO1xuY29uc3QgaXNUYXJnZXRTVkcgPSAodGFyZ2V0KSA9PiB0eXBlb2YgU1ZHRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0YXJnZXQgaW5zdGFuY2VvZiBTVkdFbGVtZW50O1xuY29uc3QgaXNUYXJnZXRNYXRoTUwgPSAodGFyZ2V0KSA9PiB0eXBlb2YgTWF0aE1MRWxlbWVudCA9PT0gXCJmdW5jdGlvblwiICYmIHRhcmdldCBpbnN0YW5jZW9mIE1hdGhNTEVsZW1lbnQ7XG5jb25zdCByZXNvbHZlVGFyZ2V0ID0gKHByb3BzLCBzZWxlY3QpID0+IHtcbiAgY29uc3QgdGFyZ2V0U2VsZWN0b3IgPSBwcm9wcyAmJiBwcm9wcy50bztcbiAgaWYgKGlzU3RyaW5nKHRhcmdldFNlbGVjdG9yKSkge1xuICAgIGlmICghc2VsZWN0KSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4kMShcbiAgICAgICAgYEN1cnJlbnQgcmVuZGVyZXIgZG9lcyBub3Qgc3VwcG9ydCBzdHJpbmcgdGFyZ2V0IGZvciBUZWxlcG9ydHMuIChtaXNzaW5nIHF1ZXJ5U2VsZWN0b3IgcmVuZGVyZXIgb3B0aW9uKWBcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gc2VsZWN0KHRhcmdldFNlbGVjdG9yKTtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICF0YXJnZXQgJiYgIWlzVGVsZXBvcnREaXNhYmxlZChwcm9wcykpIHtcbiAgICAgICAgd2FybiQxKFxuICAgICAgICAgIGBGYWlsZWQgdG8gbG9jYXRlIFRlbGVwb3J0IHRhcmdldCB3aXRoIHNlbGVjdG9yIFwiJHt0YXJnZXRTZWxlY3Rvcn1cIi4gTm90ZSB0aGUgdGFyZ2V0IGVsZW1lbnQgbXVzdCBleGlzdCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkIC0gaS5lLiB0aGUgdGFyZ2V0IGNhbm5vdCBiZSByZW5kZXJlZCBieSB0aGUgY29tcG9uZW50IGl0c2VsZiwgYW5kIGlkZWFsbHkgc2hvdWxkIGJlIG91dHNpZGUgb2YgdGhlIGVudGlyZSBWdWUgY29tcG9uZW50IHRyZWUuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIXRhcmdldFNlbGVjdG9yICYmICFpc1RlbGVwb3J0RGlzYWJsZWQocHJvcHMpKSB7XG4gICAgICB3YXJuJDEoYEludmFsaWQgVGVsZXBvcnQgdGFyZ2V0OiAke3RhcmdldFNlbGVjdG9yfWApO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0U2VsZWN0b3I7XG4gIH1cbn07XG5jb25zdCBUZWxlcG9ydEltcGwgPSB7XG4gIG5hbWU6IFwiVGVsZXBvcnRcIixcbiAgX19pc1RlbGVwb3J0OiB0cnVlLFxuICBwcm9jZXNzKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIGludGVybmFscykge1xuICAgIGNvbnN0IHtcbiAgICAgIG1jOiBtb3VudENoaWxkcmVuLFxuICAgICAgcGM6IHBhdGNoQ2hpbGRyZW4sXG4gICAgICBwYmM6IHBhdGNoQmxvY2tDaGlsZHJlbixcbiAgICAgIG86IHsgaW5zZXJ0LCBxdWVyeVNlbGVjdG9yLCBjcmVhdGVUZXh0LCBjcmVhdGVDb21tZW50IH1cbiAgICB9ID0gaW50ZXJuYWxzO1xuICAgIGNvbnN0IGRpc2FibGVkID0gaXNUZWxlcG9ydERpc2FibGVkKG4yLnByb3BzKTtcbiAgICBsZXQgeyBzaGFwZUZsYWcsIGNoaWxkcmVuLCBkeW5hbWljQ2hpbGRyZW4gfSA9IG4yO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGlzSG1yVXBkYXRpbmcpIHtcbiAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gbjIuZWwgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gY3JlYXRlQ29tbWVudChcInRlbGVwb3J0IHN0YXJ0XCIpIDogY3JlYXRlVGV4dChcIlwiKTtcbiAgICAgIGNvbnN0IG1haW5BbmNob3IgPSBuMi5hbmNob3IgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gY3JlYXRlQ29tbWVudChcInRlbGVwb3J0IGVuZFwiKSA6IGNyZWF0ZVRleHQoXCJcIik7XG4gICAgICBpbnNlcnQocGxhY2Vob2xkZXIsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIGluc2VydChtYWluQW5jaG9yLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICBjb25zdCBtb3VudCA9IChjb250YWluZXIyLCBhbmNob3IyKSA9PiB7XG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAxNikge1xuICAgICAgICAgIG1vdW50Q2hpbGRyZW4oXG4gICAgICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgICAgIGNvbnRhaW5lcjIsXG4gICAgICAgICAgICBhbmNob3IyLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY29uc3QgbW91bnRUb1RhcmdldCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gbjIudGFyZ2V0ID0gcmVzb2x2ZVRhcmdldChuMi5wcm9wcywgcXVlcnlTZWxlY3Rvcik7XG4gICAgICAgIGNvbnN0IHRhcmdldEFuY2hvciA9IHByZXBhcmVBbmNob3IodGFyZ2V0LCBuMiwgY3JlYXRlVGV4dCwgaW5zZXJ0KTtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgIGlmIChuYW1lc3BhY2UgIT09IFwic3ZnXCIgJiYgaXNUYXJnZXRTVkcodGFyZ2V0KSkge1xuICAgICAgICAgICAgbmFtZXNwYWNlID0gXCJzdmdcIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5hbWVzcGFjZSAhPT0gXCJtYXRobWxcIiAmJiBpc1RhcmdldE1hdGhNTCh0YXJnZXQpKSB7XG4gICAgICAgICAgICBuYW1lc3BhY2UgPSBcIm1hdGhtbFwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocGFyZW50Q29tcG9uZW50ICYmIHBhcmVudENvbXBvbmVudC5pc0NFKSB7XG4gICAgICAgICAgICAocGFyZW50Q29tcG9uZW50LmNlLl90ZWxlcG9ydFRhcmdldHMgfHwgKHBhcmVudENvbXBvbmVudC5jZS5fdGVsZXBvcnRUYXJnZXRzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSkpLmFkZCh0YXJnZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWRpc2FibGVkKSB7XG4gICAgICAgICAgICBtb3VudCh0YXJnZXQsIHRhcmdldEFuY2hvcik7XG4gICAgICAgICAgICB1cGRhdGVDc3NWYXJzKG4yLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWRpc2FibGVkKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgXCJJbnZhbGlkIFRlbGVwb3J0IHRhcmdldCBvbiBtb3VudDpcIixcbiAgICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICAgIGAoJHt0eXBlb2YgdGFyZ2V0fSlgXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICBtb3VudChjb250YWluZXIsIG1haW5BbmNob3IpO1xuICAgICAgICB1cGRhdGVDc3NWYXJzKG4yLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1RlbGVwb3J0RGVmZXJyZWQobjIucHJvcHMpKSB7XG4gICAgICAgIG4yLmVsLl9faXNNb3VudGVkID0gZmFsc2U7XG4gICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgbW91bnRUb1RhcmdldCgpO1xuICAgICAgICAgIGRlbGV0ZSBuMi5lbC5fX2lzTW91bnRlZDtcbiAgICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW91bnRUb1RhcmdldCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXNUZWxlcG9ydERlZmVycmVkKG4yLnByb3BzKSAmJiBuMS5lbC5fX2lzTW91bnRlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBUZWxlcG9ydEltcGwucHJvY2VzcyhcbiAgICAgICAgICAgIG4xLFxuICAgICAgICAgICAgbjIsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZCxcbiAgICAgICAgICAgIGludGVybmFsc1xuICAgICAgICAgICk7XG4gICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbjIuZWwgPSBuMS5lbDtcbiAgICAgIG4yLnRhcmdldFN0YXJ0ID0gbjEudGFyZ2V0U3RhcnQ7XG4gICAgICBjb25zdCBtYWluQW5jaG9yID0gbjIuYW5jaG9yID0gbjEuYW5jaG9yO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbjIudGFyZ2V0ID0gbjEudGFyZ2V0O1xuICAgICAgY29uc3QgdGFyZ2V0QW5jaG9yID0gbjIudGFyZ2V0QW5jaG9yID0gbjEudGFyZ2V0QW5jaG9yO1xuICAgICAgY29uc3Qgd2FzRGlzYWJsZWQgPSBpc1RlbGVwb3J0RGlzYWJsZWQobjEucHJvcHMpO1xuICAgICAgY29uc3QgY3VycmVudENvbnRhaW5lciA9IHdhc0Rpc2FibGVkID8gY29udGFpbmVyIDogdGFyZ2V0O1xuICAgICAgY29uc3QgY3VycmVudEFuY2hvciA9IHdhc0Rpc2FibGVkID8gbWFpbkFuY2hvciA6IHRhcmdldEFuY2hvcjtcbiAgICAgIGlmIChuYW1lc3BhY2UgPT09IFwic3ZnXCIgfHwgaXNUYXJnZXRTVkcodGFyZ2V0KSkge1xuICAgICAgICBuYW1lc3BhY2UgPSBcInN2Z1wiO1xuICAgICAgfSBlbHNlIGlmIChuYW1lc3BhY2UgPT09IFwibWF0aG1sXCIgfHwgaXNUYXJnZXRNYXRoTUwodGFyZ2V0KSkge1xuICAgICAgICBuYW1lc3BhY2UgPSBcIm1hdGhtbFwiO1xuICAgICAgfVxuICAgICAgaWYgKGR5bmFtaWNDaGlsZHJlbikge1xuICAgICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4oXG4gICAgICAgICAgbjEuZHluYW1pY0NoaWxkcmVuLFxuICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbixcbiAgICAgICAgICBjdXJyZW50Q29udGFpbmVyLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzXG4gICAgICAgICk7XG4gICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yLCAhISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSk7XG4gICAgICB9IGVsc2UgaWYgKCFvcHRpbWl6ZWQpIHtcbiAgICAgICAgcGF0Y2hDaGlsZHJlbihcbiAgICAgICAgICBuMSxcbiAgICAgICAgICBuMixcbiAgICAgICAgICBjdXJyZW50Q29udGFpbmVyLFxuICAgICAgICAgIGN1cnJlbnRBbmNob3IsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgZmFsc2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICBpZiAoIXdhc0Rpc2FibGVkKSB7XG4gICAgICAgICAgbW92ZVRlbGVwb3J0KFxuICAgICAgICAgICAgbjIsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBtYWluQW5jaG9yLFxuICAgICAgICAgICAgaW50ZXJuYWxzLFxuICAgICAgICAgICAgMVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG4yLnByb3BzICYmIG4xLnByb3BzICYmIG4yLnByb3BzLnRvICE9PSBuMS5wcm9wcy50bykge1xuICAgICAgICAgICAgbjIucHJvcHMudG8gPSBuMS5wcm9wcy50bztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICgobjIucHJvcHMgJiYgbjIucHJvcHMudG8pICE9PSAobjEucHJvcHMgJiYgbjEucHJvcHMudG8pKSB7XG4gICAgICAgICAgY29uc3QgbmV4dFRhcmdldCA9IG4yLnRhcmdldCA9IHJlc29sdmVUYXJnZXQoXG4gICAgICAgICAgICBuMi5wcm9wcyxcbiAgICAgICAgICAgIHF1ZXJ5U2VsZWN0b3JcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChuZXh0VGFyZ2V0KSB7XG4gICAgICAgICAgICBtb3ZlVGVsZXBvcnQoXG4gICAgICAgICAgICAgIG4yLFxuICAgICAgICAgICAgICBuZXh0VGFyZ2V0LFxuICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICBpbnRlcm5hbHMsXG4gICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICAgIFwiSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQgb24gdXBkYXRlOlwiLFxuICAgICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICAgIGAoJHt0eXBlb2YgdGFyZ2V0fSlgXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh3YXNEaXNhYmxlZCkge1xuICAgICAgICAgIG1vdmVUZWxlcG9ydChcbiAgICAgICAgICAgIG4yLFxuICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgdGFyZ2V0QW5jaG9yLFxuICAgICAgICAgICAgaW50ZXJuYWxzLFxuICAgICAgICAgICAgMVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHVwZGF0ZUNzc1ZhcnMobjIsIGRpc2FibGVkKTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZSh2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgeyB1bTogdW5tb3VudCwgbzogeyByZW1vdmU6IGhvc3RSZW1vdmUgfSB9LCBkb1JlbW92ZSkge1xuICAgIGNvbnN0IHtcbiAgICAgIHNoYXBlRmxhZyxcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgYW5jaG9yLFxuICAgICAgdGFyZ2V0U3RhcnQsXG4gICAgICB0YXJnZXRBbmNob3IsXG4gICAgICB0YXJnZXQsXG4gICAgICBwcm9wc1xuICAgIH0gPSB2bm9kZTtcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICBob3N0UmVtb3ZlKHRhcmdldFN0YXJ0KTtcbiAgICAgIGhvc3RSZW1vdmUodGFyZ2V0QW5jaG9yKTtcbiAgICB9XG4gICAgZG9SZW1vdmUgJiYgaG9zdFJlbW92ZShhbmNob3IpO1xuICAgIGlmIChzaGFwZUZsYWcgJiAxNikge1xuICAgICAgY29uc3Qgc2hvdWxkUmVtb3ZlID0gZG9SZW1vdmUgfHwgIWlzVGVsZXBvcnREaXNhYmxlZChwcm9wcyk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgIHVubW91bnQoXG4gICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIHNob3VsZFJlbW92ZSxcbiAgICAgICAgICAhIWNoaWxkLmR5bmFtaWNDaGlsZHJlblxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgbW92ZTogbW92ZVRlbGVwb3J0LFxuICBoeWRyYXRlOiBoeWRyYXRlVGVsZXBvcnRcbn07XG5mdW5jdGlvbiBtb3ZlVGVsZXBvcnQodm5vZGUsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yLCB7IG86IHsgaW5zZXJ0IH0sIG06IG1vdmUgfSwgbW92ZVR5cGUgPSAyKSB7XG4gIGlmIChtb3ZlVHlwZSA9PT0gMCkge1xuICAgIGluc2VydCh2bm9kZS50YXJnZXRBbmNob3IsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yKTtcbiAgfVxuICBjb25zdCB7IGVsLCBhbmNob3IsIHNoYXBlRmxhZywgY2hpbGRyZW4sIHByb3BzIH0gPSB2bm9kZTtcbiAgY29uc3QgaXNSZW9yZGVyID0gbW92ZVR5cGUgPT09IDI7XG4gIGlmIChpc1Jlb3JkZXIpIHtcbiAgICBpbnNlcnQoZWwsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yKTtcbiAgfVxuICBpZiAoIWlzUmVvcmRlciB8fCBpc1RlbGVwb3J0RGlzYWJsZWQocHJvcHMpKSB7XG4gICAgaWYgKHNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1vdmUoXG4gICAgICAgICAgY2hpbGRyZW5baV0sXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIHBhcmVudEFuY2hvcixcbiAgICAgICAgICAyXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChpc1Jlb3JkZXIpIHtcbiAgICBpbnNlcnQoYW5jaG9yLCBjb250YWluZXIsIHBhcmVudEFuY2hvcik7XG4gIH1cbn1cbmZ1bmN0aW9uIGh5ZHJhdGVUZWxlcG9ydChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHtcbiAgbzogeyBuZXh0U2libGluZywgcGFyZW50Tm9kZSwgcXVlcnlTZWxlY3RvciwgaW5zZXJ0LCBjcmVhdGVUZXh0IH1cbn0sIGh5ZHJhdGVDaGlsZHJlbikge1xuICBmdW5jdGlvbiBoeWRyYXRlRGlzYWJsZWRUZWxlcG9ydChub2RlMiwgdm5vZGUyLCB0YXJnZXRTdGFydCwgdGFyZ2V0QW5jaG9yKSB7XG4gICAgdm5vZGUyLmFuY2hvciA9IGh5ZHJhdGVDaGlsZHJlbihcbiAgICAgIG5leHRTaWJsaW5nKG5vZGUyKSxcbiAgICAgIHZub2RlMixcbiAgICAgIHBhcmVudE5vZGUobm9kZTIpLFxuICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICBzbG90U2NvcGVJZHMsXG4gICAgICBvcHRpbWl6ZWRcbiAgICApO1xuICAgIHZub2RlMi50YXJnZXRTdGFydCA9IHRhcmdldFN0YXJ0O1xuICAgIHZub2RlMi50YXJnZXRBbmNob3IgPSB0YXJnZXRBbmNob3I7XG4gIH1cbiAgY29uc3QgdGFyZ2V0ID0gdm5vZGUudGFyZ2V0ID0gcmVzb2x2ZVRhcmdldChcbiAgICB2bm9kZS5wcm9wcyxcbiAgICBxdWVyeVNlbGVjdG9yXG4gICk7XG4gIGNvbnN0IGRpc2FibGVkID0gaXNUZWxlcG9ydERpc2FibGVkKHZub2RlLnByb3BzKTtcbiAgaWYgKHRhcmdldCkge1xuICAgIGNvbnN0IHRhcmdldE5vZGUgPSB0YXJnZXQuX2xwYSB8fCB0YXJnZXQuZmlyc3RDaGlsZDtcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMTYpIHtcbiAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICBoeWRyYXRlRGlzYWJsZWRUZWxlcG9ydChcbiAgICAgICAgICBub2RlLFxuICAgICAgICAgIHZub2RlLFxuICAgICAgICAgIHRhcmdldE5vZGUsXG4gICAgICAgICAgdGFyZ2V0Tm9kZSAmJiBuZXh0U2libGluZyh0YXJnZXROb2RlKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm5vZGUuYW5jaG9yID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgIGxldCB0YXJnZXRBbmNob3IgPSB0YXJnZXROb2RlO1xuICAgICAgICB3aGlsZSAodGFyZ2V0QW5jaG9yKSB7XG4gICAgICAgICAgaWYgKHRhcmdldEFuY2hvciAmJiB0YXJnZXRBbmNob3Iubm9kZVR5cGUgPT09IDgpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXRBbmNob3IuZGF0YSA9PT0gXCJ0ZWxlcG9ydCBzdGFydCBhbmNob3JcIikge1xuICAgICAgICAgICAgICB2bm9kZS50YXJnZXRTdGFydCA9IHRhcmdldEFuY2hvcjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0QW5jaG9yLmRhdGEgPT09IFwidGVsZXBvcnQgYW5jaG9yXCIpIHtcbiAgICAgICAgICAgICAgdm5vZGUudGFyZ2V0QW5jaG9yID0gdGFyZ2V0QW5jaG9yO1xuICAgICAgICAgICAgICB0YXJnZXQuX2xwYSA9IHZub2RlLnRhcmdldEFuY2hvciAmJiBuZXh0U2libGluZyh2bm9kZS50YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGFyZ2V0QW5jaG9yID0gbmV4dFNpYmxpbmcodGFyZ2V0QW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXZub2RlLnRhcmdldEFuY2hvcikge1xuICAgICAgICAgIHByZXBhcmVBbmNob3IodGFyZ2V0LCB2bm9kZSwgY3JlYXRlVGV4dCwgaW5zZXJ0KTtcbiAgICAgICAgfVxuICAgICAgICBoeWRyYXRlQ2hpbGRyZW4oXG4gICAgICAgICAgdGFyZ2V0Tm9kZSAmJiBuZXh0U2libGluZyh0YXJnZXROb2RlKSxcbiAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlQ3NzVmFycyh2bm9kZSwgZGlzYWJsZWQpO1xuICB9IGVsc2UgaWYgKGRpc2FibGVkKSB7XG4gICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICBoeWRyYXRlRGlzYWJsZWRUZWxlcG9ydChub2RlLCB2bm9kZSwgbm9kZSwgbmV4dFNpYmxpbmcobm9kZSkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdm5vZGUuYW5jaG9yICYmIG5leHRTaWJsaW5nKHZub2RlLmFuY2hvcik7XG59XG5jb25zdCBUZWxlcG9ydCA9IFRlbGVwb3J0SW1wbDtcbmZ1bmN0aW9uIHVwZGF0ZUNzc1ZhcnModm5vZGUsIGlzRGlzYWJsZWQpIHtcbiAgY29uc3QgY3R4ID0gdm5vZGUuY3R4O1xuICBpZiAoY3R4ICYmIGN0eC51dCkge1xuICAgIGxldCBub2RlLCBhbmNob3I7XG4gICAgaWYgKGlzRGlzYWJsZWQpIHtcbiAgICAgIG5vZGUgPSB2bm9kZS5lbDtcbiAgICAgIGFuY2hvciA9IHZub2RlLmFuY2hvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZSA9IHZub2RlLnRhcmdldFN0YXJ0O1xuICAgICAgYW5jaG9yID0gdm5vZGUudGFyZ2V0QW5jaG9yO1xuICAgIH1cbiAgICB3aGlsZSAobm9kZSAmJiBub2RlICE9PSBhbmNob3IpIHtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAxKSBub2RlLnNldEF0dHJpYnV0ZShcImRhdGEtdi1vd25lclwiLCBjdHgudWlkKTtcbiAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICBjdHgudXQoKTtcbiAgfVxufVxuZnVuY3Rpb24gcHJlcGFyZUFuY2hvcih0YXJnZXQsIHZub2RlLCBjcmVhdGVUZXh0LCBpbnNlcnQpIHtcbiAgY29uc3QgdGFyZ2V0U3RhcnQgPSB2bm9kZS50YXJnZXRTdGFydCA9IGNyZWF0ZVRleHQoXCJcIik7XG4gIGNvbnN0IHRhcmdldEFuY2hvciA9IHZub2RlLnRhcmdldEFuY2hvciA9IGNyZWF0ZVRleHQoXCJcIik7XG4gIHRhcmdldFN0YXJ0W1RlbGVwb3J0RW5kS2V5XSA9IHRhcmdldEFuY2hvcjtcbiAgaWYgKHRhcmdldCkge1xuICAgIGluc2VydCh0YXJnZXRTdGFydCwgdGFyZ2V0KTtcbiAgICBpbnNlcnQodGFyZ2V0QW5jaG9yLCB0YXJnZXQpO1xuICB9XG4gIHJldHVybiB0YXJnZXRBbmNob3I7XG59XG5cbmNvbnN0IGxlYXZlQ2JLZXkgPSBTeW1ib2woXCJfbGVhdmVDYlwiKTtcbmNvbnN0IGVudGVyQ2JLZXkgPSBTeW1ib2woXCJfZW50ZXJDYlwiKTtcbmZ1bmN0aW9uIHVzZVRyYW5zaXRpb25TdGF0ZSgpIHtcbiAgY29uc3Qgc3RhdGUgPSB7XG4gICAgaXNNb3VudGVkOiBmYWxzZSxcbiAgICBpc0xlYXZpbmc6IGZhbHNlLFxuICAgIGlzVW5tb3VudGluZzogZmFsc2UsXG4gICAgbGVhdmluZ1ZOb2RlczogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKVxuICB9O1xuICBvbk1vdW50ZWQoKCkgPT4ge1xuICAgIHN0YXRlLmlzTW91bnRlZCA9IHRydWU7XG4gIH0pO1xuICBvbkJlZm9yZVVubW91bnQoKCkgPT4ge1xuICAgIHN0YXRlLmlzVW5tb3VudGluZyA9IHRydWU7XG4gIH0pO1xuICByZXR1cm4gc3RhdGU7XG59XG5jb25zdCBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvciA9IFtGdW5jdGlvbiwgQXJyYXldO1xuY29uc3QgQmFzZVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMgPSB7XG4gIG1vZGU6IFN0cmluZyxcbiAgYXBwZWFyOiBCb29sZWFuLFxuICBwZXJzaXN0ZWQ6IEJvb2xlYW4sXG4gIC8vIGVudGVyXG4gIG9uQmVmb3JlRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkVudGVyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgb25BZnRlckVudGVyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgb25FbnRlckNhbmNlbGxlZDogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gIC8vIGxlYXZlXG4gIG9uQmVmb3JlTGVhdmU6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkxlYXZlOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgb25BZnRlckxlYXZlOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgb25MZWF2ZUNhbmNlbGxlZDogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gIC8vIGFwcGVhclxuICBvbkJlZm9yZUFwcGVhcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gIG9uQXBwZWFyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgb25BZnRlckFwcGVhcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gIG9uQXBwZWFyQ2FuY2VsbGVkOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvclxufTtcbmNvbnN0IHJlY3Vyc2l2ZUdldFN1YnRyZWUgPSAoaW5zdGFuY2UpID0+IHtcbiAgY29uc3Qgc3ViVHJlZSA9IGluc3RhbmNlLnN1YlRyZWU7XG4gIHJldHVybiBzdWJUcmVlLmNvbXBvbmVudCA/IHJlY3Vyc2l2ZUdldFN1YnRyZWUoc3ViVHJlZS5jb21wb25lbnQpIDogc3ViVHJlZTtcbn07XG5jb25zdCBCYXNlVHJhbnNpdGlvbkltcGwgPSB7XG4gIG5hbWU6IGBCYXNlVHJhbnNpdGlvbmAsXG4gIHByb3BzOiBCYXNlVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycyxcbiAgc2V0dXAocHJvcHMsIHsgc2xvdHMgfSkge1xuICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgY29uc3Qgc3RhdGUgPSB1c2VUcmFuc2l0aW9uU3RhdGUoKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ICYmIGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbihzbG90cy5kZWZhdWx0KCksIHRydWUpO1xuICAgICAgaWYgKCFjaGlsZHJlbiB8fCAhY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNoaWxkID0gZmluZE5vbkNvbW1lbnRDaGlsZChjaGlsZHJlbik7XG4gICAgICBjb25zdCByYXdQcm9wcyA9IHRvUmF3KHByb3BzKTtcbiAgICAgIGNvbnN0IHsgbW9kZSB9ID0gcmF3UHJvcHM7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBtb2RlICYmIG1vZGUgIT09IFwiaW4tb3V0XCIgJiYgbW9kZSAhPT0gXCJvdXQtaW5cIiAmJiBtb2RlICE9PSBcImRlZmF1bHRcIikge1xuICAgICAgICB3YXJuJDEoYGludmFsaWQgPHRyYW5zaXRpb24+IG1vZGU6ICR7bW9kZX1gKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5pc0xlYXZpbmcpIHtcbiAgICAgICAgcmV0dXJuIGVtcHR5UGxhY2Vob2xkZXIoY2hpbGQpO1xuICAgICAgfVxuICAgICAgY29uc3QgaW5uZXJDaGlsZCA9IGdldElubmVyQ2hpbGQkMShjaGlsZCk7XG4gICAgICBpZiAoIWlubmVyQ2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIGVtcHR5UGxhY2Vob2xkZXIoY2hpbGQpO1xuICAgICAgfVxuICAgICAgbGV0IGVudGVySG9va3MgPSByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKFxuICAgICAgICBpbm5lckNoaWxkLFxuICAgICAgICByYXdQcm9wcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGluc3RhbmNlLFxuICAgICAgICAvLyAjMTEwNjEsIGVuc3VyZSBlbnRlckhvb2tzIGlzIGZyZXNoIGFmdGVyIGNsb25lXG4gICAgICAgIChob29rcykgPT4gZW50ZXJIb29rcyA9IGhvb2tzXG4gICAgICApO1xuICAgICAgaWYgKGlubmVyQ2hpbGQudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3MoaW5uZXJDaGlsZCwgZW50ZXJIb29rcyk7XG4gICAgICB9XG4gICAgICBsZXQgb2xkSW5uZXJDaGlsZCA9IGluc3RhbmNlLnN1YlRyZWUgJiYgZ2V0SW5uZXJDaGlsZCQxKGluc3RhbmNlLnN1YlRyZWUpO1xuICAgICAgaWYgKG9sZElubmVyQ2hpbGQgJiYgb2xkSW5uZXJDaGlsZC50eXBlICE9PSBDb21tZW50ICYmICFpc1NhbWVWTm9kZVR5cGUob2xkSW5uZXJDaGlsZCwgaW5uZXJDaGlsZCkgJiYgcmVjdXJzaXZlR2V0U3VidHJlZShpbnN0YW5jZSkudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgICBsZXQgbGVhdmluZ0hvb2tzID0gcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhcbiAgICAgICAgICBvbGRJbm5lckNoaWxkLFxuICAgICAgICAgIHJhd1Byb3BzLFxuICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgIGluc3RhbmNlXG4gICAgICAgICk7XG4gICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyhvbGRJbm5lckNoaWxkLCBsZWF2aW5nSG9va3MpO1xuICAgICAgICBpZiAobW9kZSA9PT0gXCJvdXQtaW5cIiAmJiBpbm5lckNoaWxkLnR5cGUgIT09IENvbW1lbnQpIHtcbiAgICAgICAgICBzdGF0ZS5pc0xlYXZpbmcgPSB0cnVlO1xuICAgICAgICAgIGxlYXZpbmdIb29rcy5hZnRlckxlYXZlID0gKCkgPT4ge1xuICAgICAgICAgICAgc3RhdGUuaXNMZWF2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIShpbnN0YW5jZS5qb2IuZmxhZ3MgJiA4KSkge1xuICAgICAgICAgICAgICBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlbGV0ZSBsZWF2aW5nSG9va3MuYWZ0ZXJMZWF2ZTtcbiAgICAgICAgICAgIG9sZElubmVyQ2hpbGQgPSB2b2lkIDA7XG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4gZW1wdHlQbGFjZWhvbGRlcihjaGlsZCk7XG4gICAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gXCJpbi1vdXRcIiAmJiBpbm5lckNoaWxkLnR5cGUgIT09IENvbW1lbnQpIHtcbiAgICAgICAgICBsZWF2aW5nSG9va3MuZGVsYXlMZWF2ZSA9IChlbCwgZWFybHlSZW1vdmUsIGRlbGF5ZWRMZWF2ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGVhdmluZ1ZOb2Rlc0NhY2hlID0gZ2V0TGVhdmluZ05vZGVzRm9yVHlwZShcbiAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgIG9sZElubmVyQ2hpbGRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBsZWF2aW5nVk5vZGVzQ2FjaGVbU3RyaW5nKG9sZElubmVyQ2hpbGQua2V5KV0gPSBvbGRJbm5lckNoaWxkO1xuICAgICAgICAgICAgZWxbbGVhdmVDYktleV0gPSAoKSA9PiB7XG4gICAgICAgICAgICAgIGVhcmx5UmVtb3ZlKCk7XG4gICAgICAgICAgICAgIGVsW2xlYXZlQ2JLZXldID0gdm9pZCAwO1xuICAgICAgICAgICAgICBkZWxldGUgZW50ZXJIb29rcy5kZWxheWVkTGVhdmU7XG4gICAgICAgICAgICAgIG9sZElubmVyQ2hpbGQgPSB2b2lkIDA7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZW50ZXJIb29rcy5kZWxheWVkTGVhdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIGRlbGF5ZWRMZWF2ZSgpO1xuICAgICAgICAgICAgICBkZWxldGUgZW50ZXJIb29rcy5kZWxheWVkTGVhdmU7XG4gICAgICAgICAgICAgIG9sZElubmVyQ2hpbGQgPSB2b2lkIDA7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2xkSW5uZXJDaGlsZCA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChvbGRJbm5lckNoaWxkKSB7XG4gICAgICAgIG9sZElubmVyQ2hpbGQgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfTtcbiAgfVxufTtcbmZ1bmN0aW9uIGZpbmROb25Db21tZW50Q2hpbGQoY2hpbGRyZW4pIHtcbiAgbGV0IGNoaWxkID0gY2hpbGRyZW5bMF07XG4gIGlmIChjaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgbGV0IGhhc0ZvdW5kID0gZmFsc2U7XG4gICAgZm9yIChjb25zdCBjIG9mIGNoaWxkcmVuKSB7XG4gICAgICBpZiAoYy50eXBlICE9PSBDb21tZW50KSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGhhc0ZvdW5kKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgXCI8dHJhbnNpdGlvbj4gY2FuIG9ubHkgYmUgdXNlZCBvbiBhIHNpbmdsZSBlbGVtZW50IG9yIGNvbXBvbmVudC4gVXNlIDx0cmFuc2l0aW9uLWdyb3VwPiBmb3IgbGlzdHMuXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkID0gYztcbiAgICAgICAgaGFzRm91bmQgPSB0cnVlO1xuICAgICAgICBpZiAoISEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gY2hpbGQ7XG59XG5jb25zdCBCYXNlVHJhbnNpdGlvbiA9IEJhc2VUcmFuc2l0aW9uSW1wbDtcbmZ1bmN0aW9uIGdldExlYXZpbmdOb2Rlc0ZvclR5cGUoc3RhdGUsIHZub2RlKSB7XG4gIGNvbnN0IHsgbGVhdmluZ1ZOb2RlcyB9ID0gc3RhdGU7XG4gIGxldCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBsZWF2aW5nVk5vZGVzLmdldCh2bm9kZS50eXBlKTtcbiAgaWYgKCFsZWF2aW5nVk5vZGVzQ2FjaGUpIHtcbiAgICBsZWF2aW5nVk5vZGVzQ2FjaGUgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBsZWF2aW5nVk5vZGVzLnNldCh2bm9kZS50eXBlLCBsZWF2aW5nVk5vZGVzQ2FjaGUpO1xuICB9XG4gIHJldHVybiBsZWF2aW5nVk5vZGVzQ2FjaGU7XG59XG5mdW5jdGlvbiByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKHZub2RlLCBwcm9wcywgc3RhdGUsIGluc3RhbmNlLCBwb3N0Q2xvbmUpIHtcbiAgY29uc3Qge1xuICAgIGFwcGVhcixcbiAgICBtb2RlLFxuICAgIHBlcnNpc3RlZCA9IGZhbHNlLFxuICAgIG9uQmVmb3JlRW50ZXIsXG4gICAgb25FbnRlcixcbiAgICBvbkFmdGVyRW50ZXIsXG4gICAgb25FbnRlckNhbmNlbGxlZCxcbiAgICBvbkJlZm9yZUxlYXZlLFxuICAgIG9uTGVhdmUsXG4gICAgb25BZnRlckxlYXZlLFxuICAgIG9uTGVhdmVDYW5jZWxsZWQsXG4gICAgb25CZWZvcmVBcHBlYXIsXG4gICAgb25BcHBlYXIsXG4gICAgb25BZnRlckFwcGVhcixcbiAgICBvbkFwcGVhckNhbmNlbGxlZFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGtleSA9IFN0cmluZyh2bm9kZS5rZXkpO1xuICBjb25zdCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBnZXRMZWF2aW5nTm9kZXNGb3JUeXBlKHN0YXRlLCB2bm9kZSk7XG4gIGNvbnN0IGNhbGxIb29rID0gKGhvb2ssIGFyZ3MpID0+IHtcbiAgICBob29rICYmIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKFxuICAgICAgaG9vayxcbiAgICAgIGluc3RhbmNlLFxuICAgICAgOSxcbiAgICAgIGFyZ3NcbiAgICApO1xuICB9O1xuICBjb25zdCBjYWxsQXN5bmNIb29rID0gKGhvb2ssIGFyZ3MpID0+IHtcbiAgICBjb25zdCBkb25lID0gYXJnc1sxXTtcbiAgICBjYWxsSG9vayhob29rLCBhcmdzKTtcbiAgICBpZiAoaXNBcnJheShob29rKSkge1xuICAgICAgaWYgKGhvb2suZXZlcnkoKGhvb2syKSA9PiBob29rMi5sZW5ndGggPD0gMSkpIGRvbmUoKTtcbiAgICB9IGVsc2UgaWYgKGhvb2subGVuZ3RoIDw9IDEpIHtcbiAgICAgIGRvbmUoKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhvb2tzID0ge1xuICAgIG1vZGUsXG4gICAgcGVyc2lzdGVkLFxuICAgIGJlZm9yZUVudGVyKGVsKSB7XG4gICAgICBsZXQgaG9vayA9IG9uQmVmb3JlRW50ZXI7XG4gICAgICBpZiAoIXN0YXRlLmlzTW91bnRlZCkge1xuICAgICAgICBpZiAoYXBwZWFyKSB7XG4gICAgICAgICAgaG9vayA9IG9uQmVmb3JlQXBwZWFyIHx8IG9uQmVmb3JlRW50ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZWxbbGVhdmVDYktleV0pIHtcbiAgICAgICAgZWxbbGVhdmVDYktleV0oXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICAgIC8qIGNhbmNlbGxlZCAqL1xuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgbGVhdmluZ1ZOb2RlID0gbGVhdmluZ1ZOb2Rlc0NhY2hlW2tleV07XG4gICAgICBpZiAobGVhdmluZ1ZOb2RlICYmIGlzU2FtZVZOb2RlVHlwZSh2bm9kZSwgbGVhdmluZ1ZOb2RlKSAmJiBsZWF2aW5nVk5vZGUuZWxbbGVhdmVDYktleV0pIHtcbiAgICAgICAgbGVhdmluZ1ZOb2RlLmVsW2xlYXZlQ2JLZXldKCk7XG4gICAgICB9XG4gICAgICBjYWxsSG9vayhob29rLCBbZWxdKTtcbiAgICB9LFxuICAgIGVudGVyKGVsKSB7XG4gICAgICBsZXQgaG9vayA9IG9uRW50ZXI7XG4gICAgICBsZXQgYWZ0ZXJIb29rID0gb25BZnRlckVudGVyO1xuICAgICAgbGV0IGNhbmNlbEhvb2sgPSBvbkVudGVyQ2FuY2VsbGVkO1xuICAgICAgaWYgKCFzdGF0ZS5pc01vdW50ZWQpIHtcbiAgICAgICAgaWYgKGFwcGVhcikge1xuICAgICAgICAgIGhvb2sgPSBvbkFwcGVhciB8fCBvbkVudGVyO1xuICAgICAgICAgIGFmdGVySG9vayA9IG9uQWZ0ZXJBcHBlYXIgfHwgb25BZnRlckVudGVyO1xuICAgICAgICAgIGNhbmNlbEhvb2sgPSBvbkFwcGVhckNhbmNlbGxlZCB8fCBvbkVudGVyQ2FuY2VsbGVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuICAgICAgY29uc3QgZG9uZSA9IGVsW2VudGVyQ2JLZXldID0gKGNhbmNlbGxlZCkgPT4ge1xuICAgICAgICBpZiAoY2FsbGVkKSByZXR1cm47XG4gICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgIGlmIChjYW5jZWxsZWQpIHtcbiAgICAgICAgICBjYWxsSG9vayhjYW5jZWxIb29rLCBbZWxdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsSG9vayhhZnRlckhvb2ssIFtlbF0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChob29rcy5kZWxheWVkTGVhdmUpIHtcbiAgICAgICAgICBob29rcy5kZWxheWVkTGVhdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbFtlbnRlckNiS2V5XSA9IHZvaWQgMDtcbiAgICAgIH07XG4gICAgICBpZiAoaG9vaykge1xuICAgICAgICBjYWxsQXN5bmNIb29rKGhvb2ssIFtlbCwgZG9uZV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgbGVhdmUoZWwsIHJlbW92ZSkge1xuICAgICAgY29uc3Qga2V5MiA9IFN0cmluZyh2bm9kZS5rZXkpO1xuICAgICAgaWYgKGVsW2VudGVyQ2JLZXldKSB7XG4gICAgICAgIGVsW2VudGVyQ2JLZXldKFxuICAgICAgICAgIHRydWVcbiAgICAgICAgICAvKiBjYW5jZWxsZWQgKi9cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5pc1VubW91bnRpbmcpIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZSgpO1xuICAgICAgfVxuICAgICAgY2FsbEhvb2sob25CZWZvcmVMZWF2ZSwgW2VsXSk7XG4gICAgICBsZXQgY2FsbGVkID0gZmFsc2U7XG4gICAgICBjb25zdCBkb25lID0gZWxbbGVhdmVDYktleV0gPSAoY2FuY2VsbGVkKSA9PiB7XG4gICAgICAgIGlmIChjYWxsZWQpIHJldHVybjtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgcmVtb3ZlKCk7XG4gICAgICAgIGlmIChjYW5jZWxsZWQpIHtcbiAgICAgICAgICBjYWxsSG9vayhvbkxlYXZlQ2FuY2VsbGVkLCBbZWxdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsSG9vayhvbkFmdGVyTGVhdmUsIFtlbF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsW2xlYXZlQ2JLZXldID0gdm9pZCAwO1xuICAgICAgICBpZiAobGVhdmluZ1ZOb2Rlc0NhY2hlW2tleTJdID09PSB2bm9kZSkge1xuICAgICAgICAgIGRlbGV0ZSBsZWF2aW5nVk5vZGVzQ2FjaGVba2V5Ml07XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBsZWF2aW5nVk5vZGVzQ2FjaGVba2V5Ml0gPSB2bm9kZTtcbiAgICAgIGlmIChvbkxlYXZlKSB7XG4gICAgICAgIGNhbGxBc3luY0hvb2sob25MZWF2ZSwgW2VsLCBkb25lXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb25lKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBjbG9uZSh2bm9kZTIpIHtcbiAgICAgIGNvbnN0IGhvb2tzMiA9IHJlc29sdmVUcmFuc2l0aW9uSG9va3MoXG4gICAgICAgIHZub2RlMixcbiAgICAgICAgcHJvcHMsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgcG9zdENsb25lXG4gICAgICApO1xuICAgICAgaWYgKHBvc3RDbG9uZSkgcG9zdENsb25lKGhvb2tzMik7XG4gICAgICByZXR1cm4gaG9va3MyO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGhvb2tzO1xufVxuZnVuY3Rpb24gZW1wdHlQbGFjZWhvbGRlcih2bm9kZSkge1xuICBpZiAoaXNLZWVwQWxpdmUodm5vZGUpKSB7XG4gICAgdm5vZGUgPSBjbG9uZVZOb2RlKHZub2RlKTtcbiAgICB2bm9kZS5jaGlsZHJlbiA9IG51bGw7XG4gICAgcmV0dXJuIHZub2RlO1xuICB9XG59XG5mdW5jdGlvbiBnZXRJbm5lckNoaWxkJDEodm5vZGUpIHtcbiAgaWYgKCFpc0tlZXBBbGl2ZSh2bm9kZSkpIHtcbiAgICBpZiAoaXNUZWxlcG9ydCh2bm9kZS50eXBlKSAmJiB2bm9kZS5jaGlsZHJlbikge1xuICAgICAgcmV0dXJuIGZpbmROb25Db21tZW50Q2hpbGQodm5vZGUuY2hpbGRyZW4pO1xuICAgIH1cbiAgICByZXR1cm4gdm5vZGU7XG4gIH1cbiAgaWYgKHZub2RlLmNvbXBvbmVudCkge1xuICAgIHJldHVybiB2bm9kZS5jb21wb25lbnQuc3ViVHJlZTtcbiAgfVxuICBjb25zdCB7IHNoYXBlRmxhZywgY2hpbGRyZW4gfSA9IHZub2RlO1xuICBpZiAoY2hpbGRyZW4pIHtcbiAgICBpZiAoc2hhcGVGbGFnICYgMTYpIHtcbiAgICAgIHJldHVybiBjaGlsZHJlblswXTtcbiAgICB9XG4gICAgaWYgKHNoYXBlRmxhZyAmIDMyICYmIGlzRnVuY3Rpb24oY2hpbGRyZW4uZGVmYXVsdCkpIHtcbiAgICAgIHJldHVybiBjaGlsZHJlbi5kZWZhdWx0KCk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBzZXRUcmFuc2l0aW9uSG9va3Modm5vZGUsIGhvb2tzKSB7XG4gIGlmICh2bm9kZS5zaGFwZUZsYWcgJiA2ICYmIHZub2RlLmNvbXBvbmVudCkge1xuICAgIHZub2RlLnRyYW5zaXRpb24gPSBob29rcztcbiAgICBzZXRUcmFuc2l0aW9uSG9va3Modm5vZGUuY29tcG9uZW50LnN1YlRyZWUsIGhvb2tzKTtcbiAgfSBlbHNlIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxMjgpIHtcbiAgICB2bm9kZS5zc0NvbnRlbnQudHJhbnNpdGlvbiA9IGhvb2tzLmNsb25lKHZub2RlLnNzQ29udGVudCk7XG4gICAgdm5vZGUuc3NGYWxsYmFjay50cmFuc2l0aW9uID0gaG9va3MuY2xvbmUodm5vZGUuc3NGYWxsYmFjayk7XG4gIH0gZWxzZSB7XG4gICAgdm5vZGUudHJhbnNpdGlvbiA9IGhvb2tzO1xuICB9XG59XG5mdW5jdGlvbiBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4oY2hpbGRyZW4sIGtlZXBDb21tZW50ID0gZmFsc2UsIHBhcmVudEtleSkge1xuICBsZXQgcmV0ID0gW107XG4gIGxldCBrZXllZEZyYWdtZW50Q291bnQgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgY29uc3Qga2V5ID0gcGFyZW50S2V5ID09IG51bGwgPyBjaGlsZC5rZXkgOiBTdHJpbmcocGFyZW50S2V5KSArIFN0cmluZyhjaGlsZC5rZXkgIT0gbnVsbCA/IGNoaWxkLmtleSA6IGkpO1xuICAgIGlmIChjaGlsZC50eXBlID09PSBGcmFnbWVudCkge1xuICAgICAgaWYgKGNoaWxkLnBhdGNoRmxhZyAmIDEyOCkga2V5ZWRGcmFnbWVudENvdW50Kys7XG4gICAgICByZXQgPSByZXQuY29uY2F0KFxuICAgICAgICBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4oY2hpbGQuY2hpbGRyZW4sIGtlZXBDb21tZW50LCBrZXkpXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoa2VlcENvbW1lbnQgfHwgY2hpbGQudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgcmV0LnB1c2goa2V5ICE9IG51bGwgPyBjbG9uZVZOb2RlKGNoaWxkLCB7IGtleSB9KSA6IGNoaWxkKTtcbiAgICB9XG4gIH1cbiAgaWYgKGtleWVkRnJhZ21lbnRDb3VudCA+IDEpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJldC5sZW5ndGg7IGkrKykge1xuICAgICAgcmV0W2ldLnBhdGNoRmxhZyA9IC0yO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gZGVmaW5lQ29tcG9uZW50KG9wdGlvbnMsIGV4dHJhT3B0aW9ucykge1xuICByZXR1cm4gaXNGdW5jdGlvbihvcHRpb25zKSA/IChcbiAgICAvLyAjODIzNjogZXh0ZW5kIGNhbGwgYW5kIG9wdGlvbnMubmFtZSBhY2Nlc3MgYXJlIGNvbnNpZGVyZWQgc2lkZS1lZmZlY3RzXG4gICAgLy8gYnkgUm9sbHVwLCBzbyB3ZSBoYXZlIHRvIHdyYXAgaXQgaW4gYSBwdXJlLWFubm90YXRlZCBJSUZFLlxuICAgIC8qIEBfX1BVUkVfXyAqLyAoKCkgPT4gZXh0ZW5kKHsgbmFtZTogb3B0aW9ucy5uYW1lIH0sIGV4dHJhT3B0aW9ucywgeyBzZXR1cDogb3B0aW9ucyB9KSkoKVxuICApIDogb3B0aW9ucztcbn1cblxuZnVuY3Rpb24gdXNlSWQoKSB7XG4gIGNvbnN0IGkgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgaWYgKGkpIHtcbiAgICByZXR1cm4gKGkuYXBwQ29udGV4dC5jb25maWcuaWRQcmVmaXggfHwgXCJ2XCIpICsgXCItXCIgKyBpLmlkc1swXSArIGkuaWRzWzFdKys7XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm4kMShcbiAgICAgIGB1c2VJZCgpIGlzIGNhbGxlZCB3aGVuIHRoZXJlIGlzIG5vIGFjdGl2ZSBjb21wb25lbnQgaW5zdGFuY2UgdG8gYmUgYXNzb2NpYXRlZCB3aXRoLmBcbiAgICApO1xuICB9XG4gIHJldHVybiBcIlwiO1xufVxuZnVuY3Rpb24gbWFya0FzeW5jQm91bmRhcnkoaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UuaWRzID0gW2luc3RhbmNlLmlkc1swXSArIGluc3RhbmNlLmlkc1syXSsrICsgXCItXCIsIDAsIDBdO1xufVxuXG5jb25zdCBrbm93blRlbXBsYXRlUmVmcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpO1xuZnVuY3Rpb24gdXNlVGVtcGxhdGVSZWYoa2V5KSB7XG4gIGNvbnN0IGkgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgY29uc3QgciA9IHNoYWxsb3dSZWYobnVsbCk7XG4gIGlmIChpKSB7XG4gICAgY29uc3QgcmVmcyA9IGkucmVmcyA9PT0gRU1QVFlfT0JKID8gaS5yZWZzID0ge30gOiBpLnJlZnM7XG4gICAgbGV0IGRlc2M7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgKGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHJlZnMsIGtleSkpICYmICFkZXNjLmNvbmZpZ3VyYWJsZSkge1xuICAgICAgd2FybiQxKGB1c2VUZW1wbGF0ZVJlZignJHtrZXl9JykgYWxyZWFkeSBleGlzdHMuYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZWZzLCBrZXksIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiAoKSA9PiByLnZhbHVlLFxuICAgICAgICBzZXQ6ICh2YWwpID0+IHIudmFsdWUgPSB2YWxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FybiQxKFxuICAgICAgYHVzZVRlbXBsYXRlUmVmKCkgaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgbm8gYWN0aXZlIGNvbXBvbmVudCBpbnN0YW5jZSB0byBiZSBhc3NvY2lhdGVkIHdpdGguYFxuICAgICk7XG4gIH1cbiAgY29uc3QgcmV0ID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHJlYWRvbmx5KHIpIDogcjtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBrbm93blRlbXBsYXRlUmVmcy5hZGQocmV0KTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5jb25zdCBwZW5kaW5nU2V0UmVmTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBzZXRSZWYocmF3UmVmLCBvbGRSYXdSZWYsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgaXNVbm1vdW50ID0gZmFsc2UpIHtcbiAgaWYgKGlzQXJyYXkocmF3UmVmKSkge1xuICAgIHJhd1JlZi5mb3JFYWNoKFxuICAgICAgKHIsIGkpID0+IHNldFJlZihcbiAgICAgICAgcixcbiAgICAgICAgb2xkUmF3UmVmICYmIChpc0FycmF5KG9sZFJhd1JlZikgPyBvbGRSYXdSZWZbaV0gOiBvbGRSYXdSZWYpLFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgdm5vZGUsXG4gICAgICAgIGlzVW5tb3VudFxuICAgICAgKVxuICAgICk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpc0FzeW5jV3JhcHBlcih2bm9kZSkgJiYgIWlzVW5tb3VudCkge1xuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiA1MTIgJiYgdm5vZGUudHlwZS5fX2FzeW5jUmVzb2x2ZWQgJiYgdm5vZGUuY29tcG9uZW50LnN1YlRyZWUuY29tcG9uZW50KSB7XG4gICAgICBzZXRSZWYocmF3UmVmLCBvbGRSYXdSZWYsIHBhcmVudFN1c3BlbnNlLCB2bm9kZS5jb21wb25lbnQuc3ViVHJlZSk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCByZWZWYWx1ZSA9IHZub2RlLnNoYXBlRmxhZyAmIDQgPyBnZXRDb21wb25lbnRQdWJsaWNJbnN0YW5jZSh2bm9kZS5jb21wb25lbnQpIDogdm5vZGUuZWw7XG4gIGNvbnN0IHZhbHVlID0gaXNVbm1vdW50ID8gbnVsbCA6IHJlZlZhbHVlO1xuICBjb25zdCB7IGk6IG93bmVyLCByOiByZWYgfSA9IHJhd1JlZjtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIW93bmVyKSB7XG4gICAgd2FybiQxKFxuICAgICAgYE1pc3NpbmcgcmVmIG93bmVyIGNvbnRleHQuIHJlZiBjYW5ub3QgYmUgdXNlZCBvbiBob2lzdGVkIHZub2Rlcy4gQSB2bm9kZSB3aXRoIHJlZiBtdXN0IGJlIGNyZWF0ZWQgaW5zaWRlIHRoZSByZW5kZXIgZnVuY3Rpb24uYFxuICAgICk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG9sZFJlZiA9IG9sZFJhd1JlZiAmJiBvbGRSYXdSZWYucjtcbiAgY29uc3QgcmVmcyA9IG93bmVyLnJlZnMgPT09IEVNUFRZX09CSiA/IG93bmVyLnJlZnMgPSB7fSA6IG93bmVyLnJlZnM7XG4gIGNvbnN0IHNldHVwU3RhdGUgPSBvd25lci5zZXR1cFN0YXRlO1xuICBjb25zdCByYXdTZXR1cFN0YXRlID0gdG9SYXcoc2V0dXBTdGF0ZSk7XG4gIGNvbnN0IGNhblNldFNldHVwUmVmID0gc2V0dXBTdGF0ZSA9PT0gRU1QVFlfT0JKID8gTk8gOiAoa2V5KSA9PiB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIGlmIChoYXNPd24ocmF3U2V0dXBTdGF0ZSwga2V5KSAmJiAhaXNSZWYocmF3U2V0dXBTdGF0ZVtrZXldKSkge1xuICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgYFRlbXBsYXRlIHJlZiBcIiR7a2V5fVwiIHVzZWQgb24gYSBub24tcmVmIHZhbHVlLiBJdCB3aWxsIG5vdCB3b3JrIGluIHRoZSBwcm9kdWN0aW9uIGJ1aWxkLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChrbm93blRlbXBsYXRlUmVmcy5oYXMocmF3U2V0dXBTdGF0ZVtrZXldKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoYXNPd24ocmF3U2V0dXBTdGF0ZSwga2V5KTtcbiAgfTtcbiAgY29uc3QgY2FuU2V0UmVmID0gKHJlZjIpID0+IHtcbiAgICByZXR1cm4gISEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgIWtub3duVGVtcGxhdGVSZWZzLmhhcyhyZWYyKTtcbiAgfTtcbiAgaWYgKG9sZFJlZiAhPSBudWxsICYmIG9sZFJlZiAhPT0gcmVmKSB7XG4gICAgaW52YWxpZGF0ZVBlbmRpbmdTZXRSZWYob2xkUmF3UmVmKTtcbiAgICBpZiAoaXNTdHJpbmcob2xkUmVmKSkge1xuICAgICAgcmVmc1tvbGRSZWZdID0gbnVsbDtcbiAgICAgIGlmIChjYW5TZXRTZXR1cFJlZihvbGRSZWYpKSB7XG4gICAgICAgIHNldHVwU3RhdGVbb2xkUmVmXSA9IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1JlZihvbGRSZWYpKSB7XG4gICAgICBpZiAoY2FuU2V0UmVmKG9sZFJlZikpIHtcbiAgICAgICAgb2xkUmVmLnZhbHVlID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9sZFJhd1JlZkF0b20gPSBvbGRSYXdSZWY7XG4gICAgICBpZiAob2xkUmF3UmVmQXRvbS5rKSByZWZzW29sZFJhd1JlZkF0b20ua10gPSBudWxsO1xuICAgIH1cbiAgfVxuICBpZiAoaXNGdW5jdGlvbihyZWYpKSB7XG4gICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKHJlZiwgb3duZXIsIDEyLCBbdmFsdWUsIHJlZnNdKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBfaXNTdHJpbmcgPSBpc1N0cmluZyhyZWYpO1xuICAgIGNvbnN0IF9pc1JlZiA9IGlzUmVmKHJlZik7XG4gICAgaWYgKF9pc1N0cmluZyB8fCBfaXNSZWYpIHtcbiAgICAgIGNvbnN0IGRvU2V0ID0gKCkgPT4ge1xuICAgICAgICBpZiAocmF3UmVmLmYpIHtcbiAgICAgICAgICBjb25zdCBleGlzdGluZyA9IF9pc1N0cmluZyA/IGNhblNldFNldHVwUmVmKHJlZikgPyBzZXR1cFN0YXRlW3JlZl0gOiByZWZzW3JlZl0gOiBjYW5TZXRSZWYocmVmKSB8fCAhcmF3UmVmLmsgPyByZWYudmFsdWUgOiByZWZzW3Jhd1JlZi5rXTtcbiAgICAgICAgICBpZiAoaXNVbm1vdW50KSB7XG4gICAgICAgICAgICBpc0FycmF5KGV4aXN0aW5nKSAmJiByZW1vdmUoZXhpc3RpbmcsIHJlZlZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFpc0FycmF5KGV4aXN0aW5nKSkge1xuICAgICAgICAgICAgICBpZiAoX2lzU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgcmVmc1tyZWZdID0gW3JlZlZhbHVlXTtcbiAgICAgICAgICAgICAgICBpZiAoY2FuU2V0U2V0dXBSZWYocmVmKSkge1xuICAgICAgICAgICAgICAgICAgc2V0dXBTdGF0ZVtyZWZdID0gcmVmc1tyZWZdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWwgPSBbcmVmVmFsdWVdO1xuICAgICAgICAgICAgICAgIGlmIChjYW5TZXRSZWYocmVmKSkge1xuICAgICAgICAgICAgICAgICAgcmVmLnZhbHVlID0gbmV3VmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmF3UmVmLmspIHJlZnNbcmF3UmVmLmtdID0gbmV3VmFsO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFleGlzdGluZy5pbmNsdWRlcyhyZWZWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgZXhpc3RpbmcucHVzaChyZWZWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKF9pc1N0cmluZykge1xuICAgICAgICAgIHJlZnNbcmVmXSA9IHZhbHVlO1xuICAgICAgICAgIGlmIChjYW5TZXRTZXR1cFJlZihyZWYpKSB7XG4gICAgICAgICAgICBzZXR1cFN0YXRlW3JlZl0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoX2lzUmVmKSB7XG4gICAgICAgICAgaWYgKGNhblNldFJlZihyZWYpKSB7XG4gICAgICAgICAgICByZWYudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJhd1JlZi5rKSByZWZzW3Jhd1JlZi5rXSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICB3YXJuJDEoXCJJbnZhbGlkIHRlbXBsYXRlIHJlZiB0eXBlOlwiLCByZWYsIGAoJHt0eXBlb2YgcmVmfSlgKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBjb25zdCBqb2IgPSAoKSA9PiB7XG4gICAgICAgICAgZG9TZXQoKTtcbiAgICAgICAgICBwZW5kaW5nU2V0UmVmTWFwLmRlbGV0ZShyYXdSZWYpO1xuICAgICAgICB9O1xuICAgICAgICBqb2IuaWQgPSAtMTtcbiAgICAgICAgcGVuZGluZ1NldFJlZk1hcC5zZXQocmF3UmVmLCBqb2IpO1xuICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3Qoam9iLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnZhbGlkYXRlUGVuZGluZ1NldFJlZihyYXdSZWYpO1xuICAgICAgICBkb1NldCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybiQxKFwiSW52YWxpZCB0ZW1wbGF0ZSByZWYgdHlwZTpcIiwgcmVmLCBgKCR7dHlwZW9mIHJlZn0pYCk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBpbnZhbGlkYXRlUGVuZGluZ1NldFJlZihyYXdSZWYpIHtcbiAgY29uc3QgcGVuZGluZ1NldFJlZiA9IHBlbmRpbmdTZXRSZWZNYXAuZ2V0KHJhd1JlZik7XG4gIGlmIChwZW5kaW5nU2V0UmVmKSB7XG4gICAgcGVuZGluZ1NldFJlZi5mbGFncyB8PSA4O1xuICAgIHBlbmRpbmdTZXRSZWZNYXAuZGVsZXRlKHJhd1JlZik7XG4gIH1cbn1cblxubGV0IGhhc0xvZ2dlZE1pc21hdGNoRXJyb3IgPSBmYWxzZTtcbmNvbnN0IGxvZ01pc21hdGNoRXJyb3IgPSAoKSA9PiB7XG4gIGlmIChoYXNMb2dnZWRNaXNtYXRjaEVycm9yKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnNvbGUuZXJyb3IoXCJIeWRyYXRpb24gY29tcGxldGVkIGJ1dCBjb250YWlucyBtaXNtYXRjaGVzLlwiKTtcbiAgaGFzTG9nZ2VkTWlzbWF0Y2hFcnJvciA9IHRydWU7XG59O1xuY29uc3QgaXNTVkdDb250YWluZXIgPSAoY29udGFpbmVyKSA9PiBjb250YWluZXIubmFtZXNwYWNlVVJJLmluY2x1ZGVzKFwic3ZnXCIpICYmIGNvbnRhaW5lci50YWdOYW1lICE9PSBcImZvcmVpZ25PYmplY3RcIjtcbmNvbnN0IGlzTWF0aE1MQ29udGFpbmVyID0gKGNvbnRhaW5lcikgPT4gY29udGFpbmVyLm5hbWVzcGFjZVVSSS5pbmNsdWRlcyhcIk1hdGhNTFwiKTtcbmNvbnN0IGdldENvbnRhaW5lclR5cGUgPSAoY29udGFpbmVyKSA9PiB7XG4gIGlmIChjb250YWluZXIubm9kZVR5cGUgIT09IDEpIHJldHVybiB2b2lkIDA7XG4gIGlmIChpc1NWR0NvbnRhaW5lcihjb250YWluZXIpKSByZXR1cm4gXCJzdmdcIjtcbiAgaWYgKGlzTWF0aE1MQ29udGFpbmVyKGNvbnRhaW5lcikpIHJldHVybiBcIm1hdGhtbFwiO1xuICByZXR1cm4gdm9pZCAwO1xufTtcbmNvbnN0IGlzQ29tbWVudCA9IChub2RlKSA9PiBub2RlLm5vZGVUeXBlID09PSA4O1xuZnVuY3Rpb24gY3JlYXRlSHlkcmF0aW9uRnVuY3Rpb25zKHJlbmRlcmVySW50ZXJuYWxzKSB7XG4gIGNvbnN0IHtcbiAgICBtdDogbW91bnRDb21wb25lbnQsXG4gICAgcDogcGF0Y2gsXG4gICAgbzoge1xuICAgICAgcGF0Y2hQcm9wLFxuICAgICAgY3JlYXRlVGV4dCxcbiAgICAgIG5leHRTaWJsaW5nLFxuICAgICAgcGFyZW50Tm9kZSxcbiAgICAgIHJlbW92ZSxcbiAgICAgIGluc2VydCxcbiAgICAgIGNyZWF0ZUNvbW1lbnRcbiAgICB9XG4gIH0gPSByZW5kZXJlckludGVybmFscztcbiAgY29uc3QgaHlkcmF0ZSA9ICh2bm9kZSwgY29udGFpbmVyKSA9PiB7XG4gICAgaWYgKCFjb250YWluZXIuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0hZRFJBVElPTl9NSVNNQVRDSF9ERVRBSUxTX18pICYmIHdhcm4kMShcbiAgICAgICAgYEF0dGVtcHRpbmcgdG8gaHlkcmF0ZSBleGlzdGluZyBtYXJrdXAgYnV0IGNvbnRhaW5lciBpcyBlbXB0eS4gUGVyZm9ybWluZyBmdWxsIG1vdW50IGluc3RlYWQuYFxuICAgICAgKTtcbiAgICAgIHBhdGNoKG51bGwsIHZub2RlLCBjb250YWluZXIpO1xuICAgICAgZmx1c2hQb3N0Rmx1c2hDYnMoKTtcbiAgICAgIGNvbnRhaW5lci5fdm5vZGUgPSB2bm9kZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaHlkcmF0ZU5vZGUoY29udGFpbmVyLmZpcnN0Q2hpbGQsIHZub2RlLCBudWxsLCBudWxsLCBudWxsKTtcbiAgICBmbHVzaFBvc3RGbHVzaENicygpO1xuICAgIGNvbnRhaW5lci5fdm5vZGUgPSB2bm9kZTtcbiAgfTtcbiAgY29uc3QgaHlkcmF0ZU5vZGUgPSAobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkID0gZmFsc2UpID0+IHtcbiAgICBvcHRpbWl6ZWQgPSBvcHRpbWl6ZWQgfHwgISF2bm9kZS5keW5hbWljQ2hpbGRyZW47XG4gICAgY29uc3QgaXNGcmFnbWVudFN0YXJ0ID0gaXNDb21tZW50KG5vZGUpICYmIG5vZGUuZGF0YSA9PT0gXCJbXCI7XG4gICAgY29uc3Qgb25NaXNtYXRjaCA9ICgpID0+IGhhbmRsZU1pc21hdGNoKFxuICAgICAgbm9kZSxcbiAgICAgIHZub2RlLFxuICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICBzbG90U2NvcGVJZHMsXG4gICAgICBpc0ZyYWdtZW50U3RhcnRcbiAgICApO1xuICAgIGNvbnN0IHsgdHlwZSwgcmVmLCBzaGFwZUZsYWcsIHBhdGNoRmxhZyB9ID0gdm5vZGU7XG4gICAgbGV0IGRvbVR5cGUgPSBub2RlLm5vZGVUeXBlO1xuICAgIHZub2RlLmVsID0gbm9kZTtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgIGRlZihub2RlLCBcIl9fdm5vZGVcIiwgdm5vZGUsIHRydWUpO1xuICAgICAgZGVmKG5vZGUsIFwiX192dWVQYXJlbnRDb21wb25lbnRcIiwgcGFyZW50Q29tcG9uZW50LCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKHBhdGNoRmxhZyA9PT0gLTIpIHtcbiAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgdm5vZGUuZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICB9XG4gICAgbGV0IG5leHROb2RlID0gbnVsbDtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgVGV4dDpcbiAgICAgICAgaWYgKGRvbVR5cGUgIT09IDMpIHtcbiAgICAgICAgICBpZiAodm5vZGUuY2hpbGRyZW4gPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGluc2VydCh2bm9kZS5lbCA9IGNyZWF0ZVRleHQoXCJcIiksIHBhcmVudE5vZGUobm9kZSksIG5vZGUpO1xuICAgICAgICAgICAgbmV4dE5vZGUgPSBub2RlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG5vZGUuZGF0YSAhPT0gdm5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfSFlEUkFUSU9OX01JU01BVENIX0RFVEFJTFNfXykgJiYgd2FybiQxKFxuICAgICAgICAgICAgICBgSHlkcmF0aW9uIHRleHQgbWlzbWF0Y2ggaW5gLFxuICAgICAgICAgICAgICBub2RlLnBhcmVudE5vZGUsXG4gICAgICAgICAgICAgIGBcbiAgLSByZW5kZXJlZCBvbiBzZXJ2ZXI6ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICAgICAgbm9kZS5kYXRhXG4gICAgICAgICAgICAgICl9XG4gIC0gZXhwZWN0ZWQgb24gY2xpZW50OiAke0pTT04uc3RyaW5naWZ5KHZub2RlLmNoaWxkcmVuKX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbG9nTWlzbWF0Y2hFcnJvcigpO1xuICAgICAgICAgICAgbm9kZS5kYXRhID0gdm5vZGUuY2hpbGRyZW47XG4gICAgICAgICAgfVxuICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENvbW1lbnQ6XG4gICAgICAgIGlmIChpc1RlbXBsYXRlTm9kZShub2RlKSkge1xuICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgcmVwbGFjZU5vZGUoXG4gICAgICAgICAgICB2bm9kZS5lbCA9IG5vZGUuY29udGVudC5maXJzdENoaWxkLFxuICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoZG9tVHlwZSAhPT0gOCB8fCBpc0ZyYWdtZW50U3RhcnQpIHtcbiAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0Tm9kZSA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTdGF0aWM6XG4gICAgICAgIGlmIChpc0ZyYWdtZW50U3RhcnQpIHtcbiAgICAgICAgICBub2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgZG9tVHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRvbVR5cGUgPT09IDEgfHwgZG9tVHlwZSA9PT0gMykge1xuICAgICAgICAgIG5leHROb2RlID0gbm9kZTtcbiAgICAgICAgICBjb25zdCBuZWVkVG9BZG9wdENvbnRlbnQgPSAhdm5vZGUuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdm5vZGUuc3RhdGljQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgaWYgKG5lZWRUb0Fkb3B0Q29udGVudClcbiAgICAgICAgICAgICAgdm5vZGUuY2hpbGRyZW4gKz0gbmV4dE5vZGUubm9kZVR5cGUgPT09IDEgPyBuZXh0Tm9kZS5vdXRlckhUTUwgOiBuZXh0Tm9kZS5kYXRhO1xuICAgICAgICAgICAgaWYgKGkgPT09IHZub2RlLnN0YXRpY0NvdW50IC0gMSkge1xuICAgICAgICAgICAgICB2bm9kZS5hbmNob3IgPSBuZXh0Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobmV4dE5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gaXNGcmFnbWVudFN0YXJ0ID8gbmV4dFNpYmxpbmcobmV4dE5vZGUpIDogbmV4dE5vZGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb25NaXNtYXRjaCgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBGcmFnbWVudDpcbiAgICAgICAgaWYgKCFpc0ZyYWdtZW50U3RhcnQpIHtcbiAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0Tm9kZSA9IGh5ZHJhdGVGcmFnbWVudChcbiAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAxKSB7XG4gICAgICAgICAgaWYgKChkb21UeXBlICE9PSAxIHx8IHZub2RlLnR5cGUudG9Mb3dlckNhc2UoKSAhPT0gbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpICYmICFpc1RlbXBsYXRlTm9kZShub2RlKSkge1xuICAgICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5leHROb2RlID0gaHlkcmF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgIHZub2RlLFxuICAgICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoc2hhcGVGbGFnICYgNikge1xuICAgICAgICAgIHZub2RlLnNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkcztcbiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBwYXJlbnROb2RlKG5vZGUpO1xuICAgICAgICAgIGlmIChpc0ZyYWdtZW50U3RhcnQpIHtcbiAgICAgICAgICAgIG5leHROb2RlID0gbG9jYXRlQ2xvc2luZ0FuY2hvcihub2RlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzQ29tbWVudChub2RlKSAmJiBub2RlLmRhdGEgPT09IFwidGVsZXBvcnQgc3RhcnRcIikge1xuICAgICAgICAgICAgbmV4dE5vZGUgPSBsb2NhdGVDbG9zaW5nQW5jaG9yKG5vZGUsIG5vZGUuZGF0YSwgXCJ0ZWxlcG9ydCBlbmRcIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1vdW50Q29tcG9uZW50KFxuICAgICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBnZXRDb250YWluZXJUeXBlKGNvbnRhaW5lciksXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChpc0FzeW5jV3JhcHBlcih2bm9kZSkgJiYgIXZub2RlLnR5cGUuX19hc3luY1Jlc29sdmVkKSB7XG4gICAgICAgICAgICBsZXQgc3ViVHJlZTtcbiAgICAgICAgICAgIGlmIChpc0ZyYWdtZW50U3RhcnQpIHtcbiAgICAgICAgICAgICAgc3ViVHJlZSA9IGNyZWF0ZVZOb2RlKEZyYWdtZW50KTtcbiAgICAgICAgICAgICAgc3ViVHJlZS5hbmNob3IgPSBuZXh0Tm9kZSA/IG5leHROb2RlLnByZXZpb3VzU2libGluZyA6IGNvbnRhaW5lci5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzdWJUcmVlID0gbm9kZS5ub2RlVHlwZSA9PT0gMyA/IGNyZWF0ZVRleHRWTm9kZShcIlwiKSA6IGNyZWF0ZVZOb2RlKFwiZGl2XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3ViVHJlZS5lbCA9IG5vZGU7XG4gICAgICAgICAgICB2bm9kZS5jb21wb25lbnQuc3ViVHJlZSA9IHN1YlRyZWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNoYXBlRmxhZyAmIDY0KSB7XG4gICAgICAgICAgaWYgKGRvbVR5cGUgIT09IDgpIHtcbiAgICAgICAgICAgIG5leHROb2RlID0gb25NaXNtYXRjaCgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXh0Tm9kZSA9IHZub2RlLnR5cGUuaHlkcmF0ZShcbiAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgICAgb3B0aW1pemVkLFxuICAgICAgICAgICAgICByZW5kZXJlckludGVybmFscyxcbiAgICAgICAgICAgICAgaHlkcmF0ZUNoaWxkcmVuXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzaGFwZUZsYWcgJiAxMjgpIHtcbiAgICAgICAgICBuZXh0Tm9kZSA9IHZub2RlLnR5cGUuaHlkcmF0ZShcbiAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgZ2V0Q29udGFpbmVyVHlwZShwYXJlbnROb2RlKG5vZGUpKSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZCxcbiAgICAgICAgICAgIHJlbmRlcmVySW50ZXJuYWxzLFxuICAgICAgICAgICAgaHlkcmF0ZU5vZGVcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fKSB7XG4gICAgICAgICAgd2FybiQxKFwiSW52YWxpZCBIb3N0Vk5vZGUgdHlwZTpcIiwgdHlwZSwgYCgke3R5cGVvZiB0eXBlfSlgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVmICE9IG51bGwpIHtcbiAgICAgIHNldFJlZihyZWYsIG51bGwsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSk7XG4gICAgfVxuICAgIHJldHVybiBuZXh0Tm9kZTtcbiAgfTtcbiAgY29uc3QgaHlkcmF0ZUVsZW1lbnQgPSAoZWwsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgIG9wdGltaXplZCA9IG9wdGltaXplZCB8fCAhIXZub2RlLmR5bmFtaWNDaGlsZHJlbjtcbiAgICBjb25zdCB7IHR5cGUsIHByb3BzLCBwYXRjaEZsYWcsIHNoYXBlRmxhZywgZGlycywgdHJhbnNpdGlvbiB9ID0gdm5vZGU7XG4gICAgY29uc3QgZm9yY2VQYXRjaCA9IHR5cGUgPT09IFwiaW5wdXRcIiB8fCB0eXBlID09PSBcIm9wdGlvblwiO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IGZvcmNlUGF0Y2ggfHwgcGF0Y2hGbGFnICE9PSAtMSkge1xuICAgICAgaWYgKGRpcnMpIHtcbiAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBcImNyZWF0ZWRcIik7XG4gICAgICB9XG4gICAgICBsZXQgbmVlZENhbGxUcmFuc2l0aW9uSG9va3MgPSBmYWxzZTtcbiAgICAgIGlmIChpc1RlbXBsYXRlTm9kZShlbCkpIHtcbiAgICAgICAgbmVlZENhbGxUcmFuc2l0aW9uSG9va3MgPSBuZWVkVHJhbnNpdGlvbihcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIC8vIG5vIG5lZWQgY2hlY2sgcGFyZW50U3VzcGVuc2UgaW4gaHlkcmF0aW9uXG4gICAgICAgICAgdHJhbnNpdGlvblxuICAgICAgICApICYmIHBhcmVudENvbXBvbmVudCAmJiBwYXJlbnRDb21wb25lbnQudm5vZGUucHJvcHMgJiYgcGFyZW50Q29tcG9uZW50LnZub2RlLnByb3BzLmFwcGVhcjtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGVsLmNvbnRlbnQuZmlyc3RDaGlsZDtcbiAgICAgICAgaWYgKG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzKSB7XG4gICAgICAgICAgY29uc3QgY2xzID0gY29udGVudC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICAgICAgICBpZiAoY2xzKSBjb250ZW50LiRjbHMgPSBjbHM7XG4gICAgICAgICAgdHJhbnNpdGlvbi5iZWZvcmVFbnRlcihjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXBsYWNlTm9kZShjb250ZW50LCBlbCwgcGFyZW50Q29tcG9uZW50KTtcbiAgICAgICAgdm5vZGUuZWwgPSBlbCA9IGNvbnRlbnQ7XG4gICAgICB9XG4gICAgICBpZiAoc2hhcGVGbGFnICYgMTYgJiYgLy8gc2tpcCBpZiBlbGVtZW50IGhhcyBpbm5lckhUTUwgLyB0ZXh0Q29udGVudFxuICAgICAgIShwcm9wcyAmJiAocHJvcHMuaW5uZXJIVE1MIHx8IHByb3BzLnRleHRDb250ZW50KSkpIHtcbiAgICAgICAgbGV0IG5leHQgPSBoeWRyYXRlQ2hpbGRyZW4oXG4gICAgICAgICAgZWwuZmlyc3RDaGlsZCxcbiAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICBlbCxcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgICBsZXQgaGFzV2FybmVkID0gZmFsc2U7XG4gICAgICAgIHdoaWxlIChuZXh0KSB7XG4gICAgICAgICAgaWYgKCFpc01pc21hdGNoQWxsb3dlZChlbCwgMSAvKiBDSElMRFJFTiAqLykpIHtcbiAgICAgICAgICAgIGlmICgoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0hZRFJBVElPTl9NSVNNQVRDSF9ERVRBSUxTX18pICYmICFoYXNXYXJuZWQpIHtcbiAgICAgICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgICAgIGBIeWRyYXRpb24gY2hpbGRyZW4gbWlzbWF0Y2ggb25gLFxuICAgICAgICAgICAgICAgIGVsLFxuICAgICAgICAgICAgICAgIGBcblNlcnZlciByZW5kZXJlZCBlbGVtZW50IGNvbnRhaW5zIG1vcmUgY2hpbGQgbm9kZXMgdGhhbiBjbGllbnQgdmRvbS5gXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGhhc1dhcm5lZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2dNaXNtYXRjaEVycm9yKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGN1ciA9IG5leHQ7XG4gICAgICAgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XG4gICAgICAgICAgcmVtb3ZlKGN1cik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc2hhcGVGbGFnICYgOCkge1xuICAgICAgICBsZXQgY2xpZW50VGV4dCA9IHZub2RlLmNoaWxkcmVuO1xuICAgICAgICBpZiAoY2xpZW50VGV4dFswXSA9PT0gXCJcXG5cIiAmJiAoZWwudGFnTmFtZSA9PT0gXCJQUkVcIiB8fCBlbC50YWdOYW1lID09PSBcIlRFWFRBUkVBXCIpKSB7XG4gICAgICAgICAgY2xpZW50VGV4dCA9IGNsaWVudFRleHQuc2xpY2UoMSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB0ZXh0Q29udGVudCB9ID0gZWw7XG4gICAgICAgIGlmICh0ZXh0Q29udGVudCAhPT0gY2xpZW50VGV4dCAmJiAvLyBpbm5lckhUTUwgbm9ybWFsaXplIFxcclxcbiBvciBcXHIgaW50byBhIHNpbmdsZSBcXG4gaW4gdGhlIERPTVxuICAgICAgICB0ZXh0Q29udGVudCAhPT0gY2xpZW50VGV4dC5yZXBsYWNlKC9cXHJcXG58XFxyL2csIFwiXFxuXCIpKSB7XG4gICAgICAgICAgaWYgKCFpc01pc21hdGNoQWxsb3dlZChlbCwgMCAvKiBURVhUICovKSkge1xuICAgICAgICAgICAgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fKSAmJiB3YXJuJDEoXG4gICAgICAgICAgICAgIGBIeWRyYXRpb24gdGV4dCBjb250ZW50IG1pc21hdGNoIG9uYCxcbiAgICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICAgIGBcbiAgLSByZW5kZXJlZCBvbiBzZXJ2ZXI6ICR7dGV4dENvbnRlbnR9XG4gIC0gZXhwZWN0ZWQgb24gY2xpZW50OiAke2NsaWVudFRleHR9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGxvZ01pc21hdGNoRXJyb3IoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWwudGV4dENvbnRlbnQgPSB2bm9kZS5jaGlsZHJlbjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHByb3BzKSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfSFlEUkFUSU9OX01JU01BVENIX0RFVEFJTFNfXyB8fCBmb3JjZVBhdGNoIHx8ICFvcHRpbWl6ZWQgfHwgcGF0Y2hGbGFnICYgKDE2IHwgMzIpKSB7XG4gICAgICAgICAgY29uc3QgaXNDdXN0b21FbGVtZW50ID0gZWwudGFnTmFtZS5pbmNsdWRlcyhcIi1cIik7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgICAgIGlmICgoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0hZRFJBVElPTl9NSVNNQVRDSF9ERVRBSUxTX18pICYmIC8vICMxMTE4OSBza2lwIGlmIHRoaXMgbm9kZSBoYXMgZGlyZWN0aXZlcyB0aGF0IGhhdmUgY3JlYXRlZCBob29rc1xuICAgICAgICAgICAgLy8gYXMgaXQgY291bGQgaGF2ZSBtdXRhdGVkIHRoZSBET00gaW4gYW55IHBvc3NpYmxlIHdheVxuICAgICAgICAgICAgIShkaXJzICYmIGRpcnMuc29tZSgoZCkgPT4gZC5kaXIuY3JlYXRlZCkpICYmIHByb3BIYXNNaXNtYXRjaChlbCwga2V5LCBwcm9wc1trZXldLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50KSkge1xuICAgICAgICAgICAgICBsb2dNaXNtYXRjaEVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm9yY2VQYXRjaCAmJiAoa2V5LmVuZHNXaXRoKFwidmFsdWVcIikgfHwga2V5ID09PSBcImluZGV0ZXJtaW5hdGVcIikgfHwgaXNPbihrZXkpICYmICFpc1Jlc2VydmVkUHJvcChrZXkpIHx8IC8vIGZvcmNlIGh5ZHJhdGUgdi1iaW5kIHdpdGggLnByb3AgbW9kaWZpZXJzXG4gICAgICAgICAgICBrZXlbMF0gPT09IFwiLlwiIHx8IGlzQ3VzdG9tRWxlbWVudCkge1xuICAgICAgICAgICAgICBwYXRjaFByb3AoZWwsIGtleSwgbnVsbCwgcHJvcHNba2V5XSwgdm9pZCAwLCBwYXJlbnRDb21wb25lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwcm9wcy5vbkNsaWNrKSB7XG4gICAgICAgICAgcGF0Y2hQcm9wKFxuICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICBcIm9uQ2xpY2tcIixcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBwcm9wcy5vbkNsaWNrLFxuICAgICAgICAgICAgdm9pZCAwLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChwYXRjaEZsYWcgJiA0ICYmIGlzUmVhY3RpdmUocHJvcHMuc3R5bGUpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMuc3R5bGUpIHByb3BzLnN0eWxlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCB2bm9kZUhvb2tzO1xuICAgICAgaWYgKHZub2RlSG9va3MgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlQmVmb3JlTW91bnQpIHtcbiAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9va3MsIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgfVxuICAgICAgaWYgKGRpcnMpIHtcbiAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBcImJlZm9yZU1vdW50XCIpO1xuICAgICAgfVxuICAgICAgaWYgKCh2bm9kZUhvb2tzID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZU1vdW50ZWQpIHx8IGRpcnMgfHwgbmVlZENhbGxUcmFuc2l0aW9uSG9va3MpIHtcbiAgICAgICAgcXVldWVFZmZlY3RXaXRoU3VzcGVuc2UoKCkgPT4ge1xuICAgICAgICAgIHZub2RlSG9va3MgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9va3MsIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICAgIG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzICYmIHRyYW5zaXRpb24uZW50ZXIoZWwpO1xuICAgICAgICAgIGRpcnMgJiYgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBcIm1vdW50ZWRcIik7XG4gICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVsLm5leHRTaWJsaW5nO1xuICB9O1xuICBjb25zdCBoeWRyYXRlQ2hpbGRyZW4gPSAobm9kZSwgcGFyZW50Vk5vZGUsIGNvbnRhaW5lciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBvcHRpbWl6ZWQgPSBvcHRpbWl6ZWQgfHwgISFwYXJlbnRWTm9kZS5keW5hbWljQ2hpbGRyZW47XG4gICAgY29uc3QgY2hpbGRyZW4gPSBwYXJlbnRWTm9kZS5jaGlsZHJlbjtcbiAgICBjb25zdCBsID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgIGxldCBoYXNXYXJuZWQgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgY29uc3Qgdm5vZGUgPSBvcHRpbWl6ZWQgPyBjaGlsZHJlbltpXSA6IGNoaWxkcmVuW2ldID0gbm9ybWFsaXplVk5vZGUoY2hpbGRyZW5baV0pO1xuICAgICAgY29uc3QgaXNUZXh0ID0gdm5vZGUudHlwZSA9PT0gVGV4dDtcbiAgICAgIGlmIChub2RlKSB7XG4gICAgICAgIGlmIChpc1RleHQgJiYgIW9wdGltaXplZCkge1xuICAgICAgICAgIGlmIChpICsgMSA8IGwgJiYgbm9ybWFsaXplVk5vZGUoY2hpbGRyZW5baSArIDFdKS50eXBlID09PSBUZXh0KSB7XG4gICAgICAgICAgICBpbnNlcnQoXG4gICAgICAgICAgICAgIGNyZWF0ZVRleHQoXG4gICAgICAgICAgICAgICAgbm9kZS5kYXRhLnNsaWNlKHZub2RlLmNoaWxkcmVuLmxlbmd0aClcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgICBuZXh0U2libGluZyhub2RlKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IHZub2RlLmNoaWxkcmVuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBub2RlID0gaHlkcmF0ZU5vZGUoXG4gICAgICAgICAgbm9kZSxcbiAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChpc1RleHQgJiYgIXZub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgIGluc2VydCh2bm9kZS5lbCA9IGNyZWF0ZVRleHQoXCJcIiksIGNvbnRhaW5lcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIWlzTWlzbWF0Y2hBbGxvd2VkKGNvbnRhaW5lciwgMSAvKiBDSElMRFJFTiAqLykpIHtcbiAgICAgICAgICBpZiAoKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fKSAmJiAhaGFzV2FybmVkKSB7XG4gICAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICAgIGBIeWRyYXRpb24gY2hpbGRyZW4gbWlzbWF0Y2ggb25gLFxuICAgICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICAgIGBcblNlcnZlciByZW5kZXJlZCBlbGVtZW50IGNvbnRhaW5zIGZld2VyIGNoaWxkIG5vZGVzIHRoYW4gY2xpZW50IHZkb20uYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGhhc1dhcm5lZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxvZ01pc21hdGNoRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBwYXRjaChcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIHZub2RlLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBnZXRDb250YWluZXJUeXBlKGNvbnRhaW5lciksXG4gICAgICAgICAgc2xvdFNjb3BlSWRzXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xuICB9O1xuICBjb25zdCBoeWRyYXRlRnJhZ21lbnQgPSAobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgY29uc3QgeyBzbG90U2NvcGVJZHM6IGZyYWdtZW50U2xvdFNjb3BlSWRzIH0gPSB2bm9kZTtcbiAgICBpZiAoZnJhZ21lbnRTbG90U2NvcGVJZHMpIHtcbiAgICAgIHNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkcyA/IHNsb3RTY29wZUlkcy5jb25jYXQoZnJhZ21lbnRTbG90U2NvcGVJZHMpIDogZnJhZ21lbnRTbG90U2NvcGVJZHM7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRhaW5lciA9IHBhcmVudE5vZGUobm9kZSk7XG4gICAgY29uc3QgbmV4dCA9IGh5ZHJhdGVDaGlsZHJlbihcbiAgICAgIG5leHRTaWJsaW5nKG5vZGUpLFxuICAgICAgdm5vZGUsXG4gICAgICBjb250YWluZXIsXG4gICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgIG9wdGltaXplZFxuICAgICk7XG4gICAgaWYgKG5leHQgJiYgaXNDb21tZW50KG5leHQpICYmIG5leHQuZGF0YSA9PT0gXCJdXCIpIHtcbiAgICAgIHJldHVybiBuZXh0U2libGluZyh2bm9kZS5hbmNob3IgPSBuZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nTWlzbWF0Y2hFcnJvcigpO1xuICAgICAgaW5zZXJ0KHZub2RlLmFuY2hvciA9IGNyZWF0ZUNvbW1lbnQoYF1gKSwgY29udGFpbmVyLCBuZXh0KTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaGFuZGxlTWlzbWF0Y2ggPSAobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgaXNGcmFnbWVudCkgPT4ge1xuICAgIGlmICghaXNNaXNtYXRjaEFsbG93ZWQobm9kZS5wYXJlbnRFbGVtZW50LCAxIC8qIENISUxEUkVOICovKSkge1xuICAgICAgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fKSAmJiB3YXJuJDEoXG4gICAgICAgIGBIeWRyYXRpb24gbm9kZSBtaXNtYXRjaDpcbi0gcmVuZGVyZWQgb24gc2VydmVyOmAsXG4gICAgICAgIG5vZGUsXG4gICAgICAgIG5vZGUubm9kZVR5cGUgPT09IDMgPyBgKHRleHQpYCA6IGlzQ29tbWVudChub2RlKSAmJiBub2RlLmRhdGEgPT09IFwiW1wiID8gYChzdGFydCBvZiBmcmFnbWVudClgIDogYGAsXG4gICAgICAgIGBcbi0gZXhwZWN0ZWQgb24gY2xpZW50OmAsXG4gICAgICAgIHZub2RlLnR5cGVcbiAgICAgICk7XG4gICAgICBsb2dNaXNtYXRjaEVycm9yKCk7XG4gICAgfVxuICAgIHZub2RlLmVsID0gbnVsbDtcbiAgICBpZiAoaXNGcmFnbWVudCkge1xuICAgICAgY29uc3QgZW5kID0gbG9jYXRlQ2xvc2luZ0FuY2hvcihub2RlKTtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IG5leHQyID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgIGlmIChuZXh0MiAmJiBuZXh0MiAhPT0gZW5kKSB7XG4gICAgICAgICAgcmVtb3ZlKG5leHQyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBuZXh0ID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50Tm9kZShub2RlKTtcbiAgICByZW1vdmUobm9kZSk7XG4gICAgcGF0Y2goXG4gICAgICBudWxsLFxuICAgICAgdm5vZGUsXG4gICAgICBjb250YWluZXIsXG4gICAgICBuZXh0LFxuICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICBnZXRDb250YWluZXJUeXBlKGNvbnRhaW5lciksXG4gICAgICBzbG90U2NvcGVJZHNcbiAgICApO1xuICAgIGlmIChwYXJlbnRDb21wb25lbnQpIHtcbiAgICAgIHBhcmVudENvbXBvbmVudC52bm9kZS5lbCA9IHZub2RlLmVsO1xuICAgICAgdXBkYXRlSE9DSG9zdEVsKHBhcmVudENvbXBvbmVudCwgdm5vZGUuZWwpO1xuICAgIH1cbiAgICByZXR1cm4gbmV4dDtcbiAgfTtcbiAgY29uc3QgbG9jYXRlQ2xvc2luZ0FuY2hvciA9IChub2RlLCBvcGVuID0gXCJbXCIsIGNsb3NlID0gXCJdXCIpID0+IHtcbiAgICBsZXQgbWF0Y2ggPSAwO1xuICAgIHdoaWxlIChub2RlKSB7XG4gICAgICBub2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICBpZiAobm9kZSAmJiBpc0NvbW1lbnQobm9kZSkpIHtcbiAgICAgICAgaWYgKG5vZGUuZGF0YSA9PT0gb3BlbikgbWF0Y2grKztcbiAgICAgICAgaWYgKG5vZGUuZGF0YSA9PT0gY2xvc2UpIHtcbiAgICAgICAgICBpZiAobWF0Y2ggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWF0Y2gtLTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG4gIGNvbnN0IHJlcGxhY2VOb2RlID0gKG5ld05vZGUsIG9sZE5vZGUsIHBhcmVudENvbXBvbmVudCkgPT4ge1xuICAgIGNvbnN0IHBhcmVudE5vZGUyID0gb2xkTm9kZS5wYXJlbnROb2RlO1xuICAgIGlmIChwYXJlbnROb2RlMikge1xuICAgICAgcGFyZW50Tm9kZTIucmVwbGFjZUNoaWxkKG5ld05vZGUsIG9sZE5vZGUpO1xuICAgIH1cbiAgICBsZXQgcGFyZW50ID0gcGFyZW50Q29tcG9uZW50O1xuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgIGlmIChwYXJlbnQudm5vZGUuZWwgPT09IG9sZE5vZGUpIHtcbiAgICAgICAgcGFyZW50LnZub2RlLmVsID0gcGFyZW50LnN1YlRyZWUuZWwgPSBuZXdOb2RlO1xuICAgICAgfVxuICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGlzVGVtcGxhdGVOb2RlID0gKG5vZGUpID0+IHtcbiAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiBub2RlLnRhZ05hbWUgPT09IFwiVEVNUExBVEVcIjtcbiAgfTtcbiAgcmV0dXJuIFtoeWRyYXRlLCBoeWRyYXRlTm9kZV07XG59XG5mdW5jdGlvbiBwcm9wSGFzTWlzbWF0Y2goZWwsIGtleSwgY2xpZW50VmFsdWUsIHZub2RlLCBpbnN0YW5jZSkge1xuICBsZXQgbWlzbWF0Y2hUeXBlO1xuICBsZXQgbWlzbWF0Y2hLZXk7XG4gIGxldCBhY3R1YWw7XG4gIGxldCBleHBlY3RlZDtcbiAgaWYgKGtleSA9PT0gXCJjbGFzc1wiKSB7XG4gICAgaWYgKGVsLiRjbHMpIHtcbiAgICAgIGFjdHVhbCA9IGVsLiRjbHM7XG4gICAgICBkZWxldGUgZWwuJGNscztcbiAgICB9IGVsc2Uge1xuICAgICAgYWN0dWFsID0gZWwuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7XG4gICAgfVxuICAgIGV4cGVjdGVkID0gbm9ybWFsaXplQ2xhc3MoY2xpZW50VmFsdWUpO1xuICAgIGlmICghaXNTZXRFcXVhbCh0b0NsYXNzU2V0KGFjdHVhbCB8fCBcIlwiKSwgdG9DbGFzc1NldChleHBlY3RlZCkpKSB7XG4gICAgICBtaXNtYXRjaFR5cGUgPSAyIC8qIENMQVNTICovO1xuICAgICAgbWlzbWF0Y2hLZXkgPSBgY2xhc3NgO1xuICAgIH1cbiAgfSBlbHNlIGlmIChrZXkgPT09IFwic3R5bGVcIikge1xuICAgIGFjdHVhbCA9IGVsLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpIHx8IFwiXCI7XG4gICAgZXhwZWN0ZWQgPSBpc1N0cmluZyhjbGllbnRWYWx1ZSkgPyBjbGllbnRWYWx1ZSA6IHN0cmluZ2lmeVN0eWxlKG5vcm1hbGl6ZVN0eWxlKGNsaWVudFZhbHVlKSk7XG4gICAgY29uc3QgYWN0dWFsTWFwID0gdG9TdHlsZU1hcChhY3R1YWwpO1xuICAgIGNvbnN0IGV4cGVjdGVkTWFwID0gdG9TdHlsZU1hcChleHBlY3RlZCk7XG4gICAgaWYgKHZub2RlLmRpcnMpIHtcbiAgICAgIGZvciAoY29uc3QgeyBkaXIsIHZhbHVlIH0gb2Ygdm5vZGUuZGlycykge1xuICAgICAgICBpZiAoZGlyLm5hbWUgPT09IFwic2hvd1wiICYmICF2YWx1ZSkge1xuICAgICAgICAgIGV4cGVjdGVkTWFwLnNldChcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgcmVzb2x2ZUNzc1ZhcnMoaW5zdGFuY2UsIHZub2RlLCBleHBlY3RlZE1hcCk7XG4gICAgfVxuICAgIGlmICghaXNNYXBFcXVhbChhY3R1YWxNYXAsIGV4cGVjdGVkTWFwKSkge1xuICAgICAgbWlzbWF0Y2hUeXBlID0gMyAvKiBTVFlMRSAqLztcbiAgICAgIG1pc21hdGNoS2V5ID0gXCJzdHlsZVwiO1xuICAgIH1cbiAgfSBlbHNlIGlmIChlbCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQgJiYgaXNLbm93blN2Z0F0dHIoa2V5KSB8fCBlbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIChpc0Jvb2xlYW5BdHRyKGtleSkgfHwgaXNLbm93bkh0bWxBdHRyKGtleSkpKSB7XG4gICAgaWYgKGlzQm9vbGVhbkF0dHIoa2V5KSkge1xuICAgICAgYWN0dWFsID0gZWwuaGFzQXR0cmlidXRlKGtleSk7XG4gICAgICBleHBlY3RlZCA9IGluY2x1ZGVCb29sZWFuQXR0cihjbGllbnRWYWx1ZSk7XG4gICAgfSBlbHNlIGlmIChjbGllbnRWYWx1ZSA9PSBudWxsKSB7XG4gICAgICBhY3R1YWwgPSBlbC5oYXNBdHRyaWJ1dGUoa2V5KTtcbiAgICAgIGV4cGVjdGVkID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoa2V5KSkge1xuICAgICAgICBhY3R1YWwgPSBlbC5nZXRBdHRyaWJ1dGUoa2V5KTtcbiAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcInZhbHVlXCIgJiYgZWwudGFnTmFtZSA9PT0gXCJURVhUQVJFQVwiKSB7XG4gICAgICAgIGFjdHVhbCA9IGVsLnZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0dWFsID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBleHBlY3RlZCA9IGlzUmVuZGVyYWJsZUF0dHJWYWx1ZShjbGllbnRWYWx1ZSkgPyBTdHJpbmcoY2xpZW50VmFsdWUpIDogZmFsc2U7XG4gICAgfVxuICAgIGlmIChhY3R1YWwgIT09IGV4cGVjdGVkKSB7XG4gICAgICBtaXNtYXRjaFR5cGUgPSA0IC8qIEFUVFJJQlVURSAqLztcbiAgICAgIG1pc21hdGNoS2V5ID0ga2V5O1xuICAgIH1cbiAgfVxuICBpZiAobWlzbWF0Y2hUeXBlICE9IG51bGwgJiYgIWlzTWlzbWF0Y2hBbGxvd2VkKGVsLCBtaXNtYXRjaFR5cGUpKSB7XG4gICAgY29uc3QgZm9ybWF0ID0gKHYpID0+IHYgPT09IGZhbHNlID8gYChub3QgcmVuZGVyZWQpYCA6IGAke21pc21hdGNoS2V5fT1cIiR7dn1cImA7XG4gICAgY29uc3QgcHJlU2VnbWVudCA9IGBIeWRyYXRpb24gJHtNaXNtYXRjaFR5cGVTdHJpbmdbbWlzbWF0Y2hUeXBlXX0gbWlzbWF0Y2ggb25gO1xuICAgIGNvbnN0IHBvc3RTZWdtZW50ID0gYFxuICAtIHJlbmRlcmVkIG9uIHNlcnZlcjogJHtmb3JtYXQoYWN0dWFsKX1cbiAgLSBleHBlY3RlZCBvbiBjbGllbnQ6ICR7Zm9ybWF0KGV4cGVjdGVkKX1cbiAgTm90ZTogdGhpcyBtaXNtYXRjaCBpcyBjaGVjay1vbmx5LiBUaGUgRE9NIHdpbGwgbm90IGJlIHJlY3RpZmllZCBpbiBwcm9kdWN0aW9uIGR1ZSB0byBwZXJmb3JtYW5jZSBvdmVyaGVhZC5cbiAgWW91IHNob3VsZCBmaXggdGhlIHNvdXJjZSBvZiB0aGUgbWlzbWF0Y2guYDtcbiAgICB7XG4gICAgICB3YXJuJDEocHJlU2VnbWVudCwgZWwsIHBvc3RTZWdtZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gdG9DbGFzc1NldChzdHIpIHtcbiAgcmV0dXJuIG5ldyBTZXQoc3RyLnRyaW0oKS5zcGxpdCgvXFxzKy8pKTtcbn1cbmZ1bmN0aW9uIGlzU2V0RXF1YWwoYSwgYikge1xuICBpZiAoYS5zaXplICE9PSBiLnNpemUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yIChjb25zdCBzIG9mIGEpIHtcbiAgICBpZiAoIWIuaGFzKHMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gdG9TdHlsZU1hcChzdHIpIHtcbiAgY29uc3Qgc3R5bGVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc3RyLnNwbGl0KFwiO1wiKSkge1xuICAgIGxldCBba2V5LCB2YWx1ZV0gPSBpdGVtLnNwbGl0KFwiOlwiKTtcbiAgICBrZXkgPSBrZXkudHJpbSgpO1xuICAgIHZhbHVlID0gdmFsdWUgJiYgdmFsdWUudHJpbSgpO1xuICAgIGlmIChrZXkgJiYgdmFsdWUpIHtcbiAgICAgIHN0eWxlTWFwLnNldChrZXksIHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0eWxlTWFwO1xufVxuZnVuY3Rpb24gaXNNYXBFcXVhbChhLCBiKSB7XG4gIGlmIChhLnNpemUgIT09IGIuc2l6ZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBhKSB7XG4gICAgaWYgKHZhbHVlICE9PSBiLmdldChrZXkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gcmVzb2x2ZUNzc1ZhcnMoaW5zdGFuY2UsIHZub2RlLCBleHBlY3RlZE1hcCkge1xuICBjb25zdCByb290ID0gaW5zdGFuY2Uuc3ViVHJlZTtcbiAgaWYgKGluc3RhbmNlLmdldENzc1ZhcnMgJiYgKHZub2RlID09PSByb290IHx8IHJvb3QgJiYgcm9vdC50eXBlID09PSBGcmFnbWVudCAmJiByb290LmNoaWxkcmVuLmluY2x1ZGVzKHZub2RlKSkpIHtcbiAgICBjb25zdCBjc3NWYXJzID0gaW5zdGFuY2UuZ2V0Q3NzVmFycygpO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGNzc1ZhcnMpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gbm9ybWFsaXplQ3NzVmFyVmFsdWUoY3NzVmFyc1trZXldKTtcbiAgICAgIGV4cGVjdGVkTWFwLnNldChgLS0ke2dldEVzY2FwZWRDc3NWYXJOYW1lKGtleSwgZmFsc2UpfWAsIHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgaWYgKHZub2RlID09PSByb290ICYmIGluc3RhbmNlLnBhcmVudCkge1xuICAgIHJlc29sdmVDc3NWYXJzKGluc3RhbmNlLnBhcmVudCwgaW5zdGFuY2Uudm5vZGUsIGV4cGVjdGVkTWFwKTtcbiAgfVxufVxuY29uc3QgYWxsb3dNaXNtYXRjaEF0dHIgPSBcImRhdGEtYWxsb3ctbWlzbWF0Y2hcIjtcbmNvbnN0IE1pc21hdGNoVHlwZVN0cmluZyA9IHtcbiAgWzAgLyogVEVYVCAqL106IFwidGV4dFwiLFxuICBbMSAvKiBDSElMRFJFTiAqL106IFwiY2hpbGRyZW5cIixcbiAgWzIgLyogQ0xBU1MgKi9dOiBcImNsYXNzXCIsXG4gIFszIC8qIFNUWUxFICovXTogXCJzdHlsZVwiLFxuICBbNCAvKiBBVFRSSUJVVEUgKi9dOiBcImF0dHJpYnV0ZVwiXG59O1xuZnVuY3Rpb24gaXNNaXNtYXRjaEFsbG93ZWQoZWwsIGFsbG93ZWRUeXBlKSB7XG4gIGlmIChhbGxvd2VkVHlwZSA9PT0gMCAvKiBURVhUICovIHx8IGFsbG93ZWRUeXBlID09PSAxIC8qIENISUxEUkVOICovKSB7XG4gICAgd2hpbGUgKGVsICYmICFlbC5oYXNBdHRyaWJ1dGUoYWxsb3dNaXNtYXRjaEF0dHIpKSB7XG4gICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7XG4gICAgfVxuICB9XG4gIGNvbnN0IGFsbG93ZWRBdHRyID0gZWwgJiYgZWwuZ2V0QXR0cmlidXRlKGFsbG93TWlzbWF0Y2hBdHRyKTtcbiAgaWYgKGFsbG93ZWRBdHRyID09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSBpZiAoYWxsb3dlZEF0dHIgPT09IFwiXCIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBsaXN0ID0gYWxsb3dlZEF0dHIuc3BsaXQoXCIsXCIpO1xuICAgIGlmIChhbGxvd2VkVHlwZSA9PT0gMCAvKiBURVhUICovICYmIGxpc3QuaW5jbHVkZXMoXCJjaGlsZHJlblwiKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBsaXN0LmluY2x1ZGVzKE1pc21hdGNoVHlwZVN0cmluZ1thbGxvd2VkVHlwZV0pO1xuICB9XG59XG5cbmNvbnN0IHJlcXVlc3RJZGxlQ2FsbGJhY2sgPSBnZXRHbG9iYWxUaGlzKCkucmVxdWVzdElkbGVDYWxsYmFjayB8fCAoKGNiKSA9PiBzZXRUaW1lb3V0KGNiLCAxKSk7XG5jb25zdCBjYW5jZWxJZGxlQ2FsbGJhY2sgPSBnZXRHbG9iYWxUaGlzKCkuY2FuY2VsSWRsZUNhbGxiYWNrIHx8ICgoaWQpID0+IGNsZWFyVGltZW91dChpZCkpO1xuY29uc3QgaHlkcmF0ZU9uSWRsZSA9ICh0aW1lb3V0ID0gMWU0KSA9PiAoaHlkcmF0ZSkgPT4ge1xuICBjb25zdCBpZCA9IHJlcXVlc3RJZGxlQ2FsbGJhY2soaHlkcmF0ZSwgeyB0aW1lb3V0IH0pO1xuICByZXR1cm4gKCkgPT4gY2FuY2VsSWRsZUNhbGxiYWNrKGlkKTtcbn07XG5mdW5jdGlvbiBlbGVtZW50SXNWaXNpYmxlSW5WaWV3cG9ydChlbCkge1xuICBjb25zdCB7IHRvcCwgbGVmdCwgYm90dG9tLCByaWdodCB9ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IHsgaW5uZXJIZWlnaHQsIGlubmVyV2lkdGggfSA9IHdpbmRvdztcbiAgcmV0dXJuICh0b3AgPiAwICYmIHRvcCA8IGlubmVySGVpZ2h0IHx8IGJvdHRvbSA+IDAgJiYgYm90dG9tIDwgaW5uZXJIZWlnaHQpICYmIChsZWZ0ID4gMCAmJiBsZWZ0IDwgaW5uZXJXaWR0aCB8fCByaWdodCA+IDAgJiYgcmlnaHQgPCBpbm5lcldpZHRoKTtcbn1cbmNvbnN0IGh5ZHJhdGVPblZpc2libGUgPSAob3B0cykgPT4gKGh5ZHJhdGUsIGZvckVhY2gpID0+IHtcbiAgY29uc3Qgb2IgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgZW50cmllcykge1xuICAgICAgaWYgKCFlLmlzSW50ZXJzZWN0aW5nKSBjb250aW51ZTtcbiAgICAgIG9iLmRpc2Nvbm5lY3QoKTtcbiAgICAgIGh5ZHJhdGUoKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSwgb3B0cyk7XG4gIGZvckVhY2goKGVsKSA9PiB7XG4gICAgaWYgKCEoZWwgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuO1xuICAgIGlmIChlbGVtZW50SXNWaXNpYmxlSW5WaWV3cG9ydChlbCkpIHtcbiAgICAgIGh5ZHJhdGUoKTtcbiAgICAgIG9iLmRpc2Nvbm5lY3QoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgb2Iub2JzZXJ2ZShlbCk7XG4gIH0pO1xuICByZXR1cm4gKCkgPT4gb2IuZGlzY29ubmVjdCgpO1xufTtcbmNvbnN0IGh5ZHJhdGVPbk1lZGlhUXVlcnkgPSAocXVlcnkpID0+IChoeWRyYXRlKSA9PiB7XG4gIGlmIChxdWVyeSkge1xuICAgIGNvbnN0IG1xbCA9IG1hdGNoTWVkaWEocXVlcnkpO1xuICAgIGlmIChtcWwubWF0Y2hlcykge1xuICAgICAgaHlkcmF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtcWwuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoeWRyYXRlLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICByZXR1cm4gKCkgPT4gbXFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgaHlkcmF0ZSk7XG4gICAgfVxuICB9XG59O1xuY29uc3QgaHlkcmF0ZU9uSW50ZXJhY3Rpb24gPSAoaW50ZXJhY3Rpb25zID0gW10pID0+IChoeWRyYXRlLCBmb3JFYWNoKSA9PiB7XG4gIGlmIChpc1N0cmluZyhpbnRlcmFjdGlvbnMpKSBpbnRlcmFjdGlvbnMgPSBbaW50ZXJhY3Rpb25zXTtcbiAgbGV0IGhhc0h5ZHJhdGVkID0gZmFsc2U7XG4gIGNvbnN0IGRvSHlkcmF0ZSA9IChlKSA9PiB7XG4gICAgaWYgKCFoYXNIeWRyYXRlZCkge1xuICAgICAgaGFzSHlkcmF0ZWQgPSB0cnVlO1xuICAgICAgdGVhcmRvd24oKTtcbiAgICAgIGh5ZHJhdGUoKTtcbiAgICAgIGUudGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IGUuY29uc3RydWN0b3IoZS50eXBlLCBlKSk7XG4gICAgfVxuICB9O1xuICBjb25zdCB0ZWFyZG93biA9ICgpID0+IHtcbiAgICBmb3JFYWNoKChlbCkgPT4ge1xuICAgICAgZm9yIChjb25zdCBpIG9mIGludGVyYWN0aW9ucykge1xuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGksIGRvSHlkcmF0ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIGZvckVhY2goKGVsKSA9PiB7XG4gICAgZm9yIChjb25zdCBpIG9mIGludGVyYWN0aW9ucykge1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihpLCBkb0h5ZHJhdGUsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gdGVhcmRvd247XG59O1xuZnVuY3Rpb24gZm9yRWFjaEVsZW1lbnQobm9kZSwgY2IpIHtcbiAgaWYgKGlzQ29tbWVudChub2RlKSAmJiBub2RlLmRhdGEgPT09IFwiW1wiKSB7XG4gICAgbGV0IGRlcHRoID0gMTtcbiAgICBsZXQgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgd2hpbGUgKG5leHQpIHtcbiAgICAgIGlmIChuZXh0Lm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGNiKG5leHQpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzQ29tbWVudChuZXh0KSkge1xuICAgICAgICBpZiAobmV4dC5kYXRhID09PSBcIl1cIikge1xuICAgICAgICAgIGlmICgtLWRlcHRoID09PSAwKSBicmVhaztcbiAgICAgICAgfSBlbHNlIGlmIChuZXh0LmRhdGEgPT09IFwiW1wiKSB7XG4gICAgICAgICAgZGVwdGgrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNiKG5vZGUpO1xuICB9XG59XG5cbmNvbnN0IGlzQXN5bmNXcmFwcGVyID0gKGkpID0+ICEhaS50eXBlLl9fYXN5bmNMb2FkZXI7XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gZGVmaW5lQXN5bmNDb21wb25lbnQoc291cmNlKSB7XG4gIGlmIChpc0Z1bmN0aW9uKHNvdXJjZSkpIHtcbiAgICBzb3VyY2UgPSB7IGxvYWRlcjogc291cmNlIH07XG4gIH1cbiAgY29uc3Qge1xuICAgIGxvYWRlcixcbiAgICBsb2FkaW5nQ29tcG9uZW50LFxuICAgIGVycm9yQ29tcG9uZW50LFxuICAgIGRlbGF5ID0gMjAwLFxuICAgIGh5ZHJhdGU6IGh5ZHJhdGVTdHJhdGVneSxcbiAgICB0aW1lb3V0LFxuICAgIC8vIHVuZGVmaW5lZCA9IG5ldmVyIHRpbWVzIG91dFxuICAgIHN1c3BlbnNpYmxlID0gdHJ1ZSxcbiAgICBvbkVycm9yOiB1c2VyT25FcnJvclxuICB9ID0gc291cmNlO1xuICBsZXQgcGVuZGluZ1JlcXVlc3QgPSBudWxsO1xuICBsZXQgcmVzb2x2ZWRDb21wO1xuICBsZXQgcmV0cmllcyA9IDA7XG4gIGNvbnN0IHJldHJ5ID0gKCkgPT4ge1xuICAgIHJldHJpZXMrKztcbiAgICBwZW5kaW5nUmVxdWVzdCA9IG51bGw7XG4gICAgcmV0dXJuIGxvYWQoKTtcbiAgfTtcbiAgY29uc3QgbG9hZCA9ICgpID0+IHtcbiAgICBsZXQgdGhpc1JlcXVlc3Q7XG4gICAgcmV0dXJuIHBlbmRpbmdSZXF1ZXN0IHx8ICh0aGlzUmVxdWVzdCA9IHBlbmRpbmdSZXF1ZXN0ID0gbG9hZGVyKCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgZXJyID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIgOiBuZXcgRXJyb3IoU3RyaW5nKGVycikpO1xuICAgICAgaWYgKHVzZXJPbkVycm9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgY29uc3QgdXNlclJldHJ5ID0gKCkgPT4gcmVzb2x2ZShyZXRyeSgpKTtcbiAgICAgICAgICBjb25zdCB1c2VyRmFpbCA9ICgpID0+IHJlamVjdChlcnIpO1xuICAgICAgICAgIHVzZXJPbkVycm9yKGVyciwgdXNlclJldHJ5LCB1c2VyRmFpbCwgcmV0cmllcyArIDEpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9KS50aGVuKChjb21wKSA9PiB7XG4gICAgICBpZiAodGhpc1JlcXVlc3QgIT09IHBlbmRpbmdSZXF1ZXN0ICYmIHBlbmRpbmdSZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybiBwZW5kaW5nUmVxdWVzdDtcbiAgICAgIH1cbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFjb21wKSB7XG4gICAgICAgIHdhcm4kMShcbiAgICAgICAgICBgQXN5bmMgY29tcG9uZW50IGxvYWRlciByZXNvbHZlZCB0byB1bmRlZmluZWQuIElmIHlvdSBhcmUgdXNpbmcgcmV0cnkoKSwgbWFrZSBzdXJlIHRvIHJldHVybiBpdHMgcmV0dXJuIHZhbHVlLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChjb21wICYmIChjb21wLl9fZXNNb2R1bGUgfHwgY29tcFtTeW1ib2wudG9TdHJpbmdUYWddID09PSBcIk1vZHVsZVwiKSkge1xuICAgICAgICBjb21wID0gY29tcC5kZWZhdWx0O1xuICAgICAgfVxuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY29tcCAmJiAhaXNPYmplY3QoY29tcCkgJiYgIWlzRnVuY3Rpb24oY29tcCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFzeW5jIGNvbXBvbmVudCBsb2FkIHJlc3VsdDogJHtjb21wfWApO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZWRDb21wID0gY29tcDtcbiAgICAgIHJldHVybiBjb21wO1xuICAgIH0pKTtcbiAgfTtcbiAgcmV0dXJuIGRlZmluZUNvbXBvbmVudCh7XG4gICAgbmFtZTogXCJBc3luY0NvbXBvbmVudFdyYXBwZXJcIixcbiAgICBfX2FzeW5jTG9hZGVyOiBsb2FkLFxuICAgIF9fYXN5bmNIeWRyYXRlKGVsLCBpbnN0YW5jZSwgaHlkcmF0ZSkge1xuICAgICAgbGV0IHBhdGNoZWQgPSBmYWxzZTtcbiAgICAgIChpbnN0YW5jZS5idSB8fCAoaW5zdGFuY2UuYnUgPSBbXSkpLnB1c2goKCkgPT4gcGF0Y2hlZCA9IHRydWUpO1xuICAgICAgY29uc3QgcGVyZm9ybUh5ZHJhdGUgPSAoKSA9PiB7XG4gICAgICAgIGlmIChwYXRjaGVkKSB7XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgICAgYFNraXBwaW5nIGxhenkgaHlkcmF0aW9uIGZvciBjb21wb25lbnQgJyR7Z2V0Q29tcG9uZW50TmFtZShyZXNvbHZlZENvbXApIHx8IHJlc29sdmVkQ29tcC5fX2ZpbGV9JzogaXQgd2FzIHVwZGF0ZWQgYmVmb3JlIGxhenkgaHlkcmF0aW9uIHBlcmZvcm1lZC5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaHlkcmF0ZSgpO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IGRvSHlkcmF0ZSA9IGh5ZHJhdGVTdHJhdGVneSA/ICgpID0+IHtcbiAgICAgICAgY29uc3QgdGVhcmRvd24gPSBoeWRyYXRlU3RyYXRlZ3koXG4gICAgICAgICAgcGVyZm9ybUh5ZHJhdGUsXG4gICAgICAgICAgKGNiKSA9PiBmb3JFYWNoRWxlbWVudChlbCwgY2IpXG4gICAgICAgICk7XG4gICAgICAgIGlmICh0ZWFyZG93bikge1xuICAgICAgICAgIChpbnN0YW5jZS5idW0gfHwgKGluc3RhbmNlLmJ1bSA9IFtdKSkucHVzaCh0ZWFyZG93bik7XG4gICAgICAgIH1cbiAgICAgIH0gOiBwZXJmb3JtSHlkcmF0ZTtcbiAgICAgIGlmIChyZXNvbHZlZENvbXApIHtcbiAgICAgICAgZG9IeWRyYXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2FkKCkudGhlbigoKSA9PiAhaW5zdGFuY2UuaXNVbm1vdW50ZWQgJiYgZG9IeWRyYXRlKCkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0IF9fYXN5bmNSZXNvbHZlZCgpIHtcbiAgICAgIHJldHVybiByZXNvbHZlZENvbXA7XG4gICAgfSxcbiAgICBzZXR1cCgpIHtcbiAgICAgIGNvbnN0IGluc3RhbmNlID0gY3VycmVudEluc3RhbmNlO1xuICAgICAgbWFya0FzeW5jQm91bmRhcnkoaW5zdGFuY2UpO1xuICAgICAgaWYgKHJlc29sdmVkQ29tcCkge1xuICAgICAgICByZXR1cm4gKCkgPT4gY3JlYXRlSW5uZXJDb21wKHJlc29sdmVkQ29tcCwgaW5zdGFuY2UpO1xuICAgICAgfVxuICAgICAgY29uc3Qgb25FcnJvciA9IChlcnIpID0+IHtcbiAgICAgICAgcGVuZGluZ1JlcXVlc3QgPSBudWxsO1xuICAgICAgICBoYW5kbGVFcnJvcihcbiAgICAgICAgICBlcnIsXG4gICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgMTMsXG4gICAgICAgICAgIWVycm9yQ29tcG9uZW50XG4gICAgICAgICk7XG4gICAgICB9O1xuICAgICAgaWYgKHN1c3BlbnNpYmxlICYmIGluc3RhbmNlLnN1c3BlbnNlIHx8IGlzSW5TU1JDb21wb25lbnRTZXR1cCkge1xuICAgICAgICByZXR1cm4gbG9hZCgpLnRoZW4oKGNvbXApID0+IHtcbiAgICAgICAgICByZXR1cm4gKCkgPT4gY3JlYXRlSW5uZXJDb21wKGNvbXAsIGluc3RhbmNlKTtcbiAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgICByZXR1cm4gKCkgPT4gZXJyb3JDb21wb25lbnQgPyBjcmVhdGVWTm9kZShlcnJvckNvbXBvbmVudCwge1xuICAgICAgICAgICAgZXJyb3I6IGVyclxuICAgICAgICAgIH0pIDogbnVsbDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBsb2FkZWQgPSByZWYoZmFsc2UpO1xuICAgICAgY29uc3QgZXJyb3IgPSByZWYoKTtcbiAgICAgIGNvbnN0IGRlbGF5ZWQgPSByZWYoISFkZWxheSk7XG4gICAgICBpZiAoZGVsYXkpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgZGVsYXllZC52YWx1ZSA9IGZhbHNlO1xuICAgICAgICB9LCBkZWxheSk7XG4gICAgICB9XG4gICAgICBpZiAodGltZW91dCAhPSBudWxsKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmICghbG9hZGVkLnZhbHVlICYmICFlcnJvci52YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgQXN5bmMgY29tcG9uZW50IHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXR9bXMuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIGVycm9yLnZhbHVlID0gZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICB9XG4gICAgICBsb2FkKCkudGhlbigoKSA9PiB7XG4gICAgICAgIGxvYWRlZC52YWx1ZSA9IHRydWU7XG4gICAgICAgIGlmIChpbnN0YW5jZS5wYXJlbnQgJiYgaXNLZWVwQWxpdmUoaW5zdGFuY2UucGFyZW50LnZub2RlKSkge1xuICAgICAgICAgIGluc3RhbmNlLnBhcmVudC51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgIGVycm9yLnZhbHVlID0gZXJyO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAobG9hZGVkLnZhbHVlICYmIHJlc29sdmVkQ29tcCkge1xuICAgICAgICAgIHJldHVybiBjcmVhdGVJbm5lckNvbXAocmVzb2x2ZWRDb21wLCBpbnN0YW5jZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IudmFsdWUgJiYgZXJyb3JDb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUoZXJyb3JDb21wb25lbnQsIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvci52YWx1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGxvYWRpbmdDb21wb25lbnQgJiYgIWRlbGF5ZWQudmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gY3JlYXRlSW5uZXJDb21wKFxuICAgICAgICAgICAgbG9hZGluZ0NvbXBvbmVudCxcbiAgICAgICAgICAgIGluc3RhbmNlXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlSW5uZXJDb21wKGNvbXAsIHBhcmVudCkge1xuICBjb25zdCB7IHJlZjogcmVmMiwgcHJvcHMsIGNoaWxkcmVuLCBjZSB9ID0gcGFyZW50LnZub2RlO1xuICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKGNvbXAsIHByb3BzLCBjaGlsZHJlbik7XG4gIHZub2RlLnJlZiA9IHJlZjI7XG4gIHZub2RlLmNlID0gY2U7XG4gIGRlbGV0ZSBwYXJlbnQudm5vZGUuY2U7XG4gIHJldHVybiB2bm9kZTtcbn1cblxuY29uc3QgaXNLZWVwQWxpdmUgPSAodm5vZGUpID0+IHZub2RlLnR5cGUuX19pc0tlZXBBbGl2ZTtcbmNvbnN0IEtlZXBBbGl2ZUltcGwgPSB7XG4gIG5hbWU6IGBLZWVwQWxpdmVgLFxuICAvLyBNYXJrZXIgZm9yIHNwZWNpYWwgaGFuZGxpbmcgaW5zaWRlIHRoZSByZW5kZXJlci4gV2UgYXJlIG5vdCB1c2luZyBhID09PVxuICAvLyBjaGVjayBkaXJlY3RseSBvbiBLZWVwQWxpdmUgaW4gdGhlIHJlbmRlcmVyLCBiZWNhdXNlIGltcG9ydGluZyBpdCBkaXJlY3RseVxuICAvLyB3b3VsZCBwcmV2ZW50IGl0IGZyb20gYmVpbmcgdHJlZS1zaGFrZW4uXG4gIF9faXNLZWVwQWxpdmU6IHRydWUsXG4gIHByb3BzOiB7XG4gICAgaW5jbHVkZTogW1N0cmluZywgUmVnRXhwLCBBcnJheV0sXG4gICAgZXhjbHVkZTogW1N0cmluZywgUmVnRXhwLCBBcnJheV0sXG4gICAgbWF4OiBbU3RyaW5nLCBOdW1iZXJdXG4gIH0sXG4gIHNldHVwKHByb3BzLCB7IHNsb3RzIH0pIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIGNvbnN0IHNoYXJlZENvbnRleHQgPSBpbnN0YW5jZS5jdHg7XG4gICAgaWYgKCFzaGFyZWRDb250ZXh0LnJlbmRlcmVyKSB7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHNsb3RzLmRlZmF1bHQgJiYgc2xvdHMuZGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gY2hpbGRyZW4gJiYgY2hpbGRyZW4ubGVuZ3RoID09PSAxID8gY2hpbGRyZW5bMF0gOiBjaGlsZHJlbjtcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICBjb25zdCBrZXlzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICBsZXQgY3VycmVudCA9IG51bGw7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICBpbnN0YW5jZS5fX3ZfY2FjaGUgPSBjYWNoZTtcbiAgICB9XG4gICAgY29uc3QgcGFyZW50U3VzcGVuc2UgPSBpbnN0YW5jZS5zdXNwZW5zZTtcbiAgICBjb25zdCB7XG4gICAgICByZW5kZXJlcjoge1xuICAgICAgICBwOiBwYXRjaCxcbiAgICAgICAgbTogbW92ZSxcbiAgICAgICAgdW06IF91bm1vdW50LFxuICAgICAgICBvOiB7IGNyZWF0ZUVsZW1lbnQgfVxuICAgICAgfVxuICAgIH0gPSBzaGFyZWRDb250ZXh0O1xuICAgIGNvbnN0IHN0b3JhZ2VDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHNoYXJlZENvbnRleHQuYWN0aXZhdGUgPSAodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBuYW1lc3BhY2UsIG9wdGltaXplZCkgPT4ge1xuICAgICAgY29uc3QgaW5zdGFuY2UyID0gdm5vZGUuY29tcG9uZW50O1xuICAgICAgbW92ZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIDAsIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgIHBhdGNoKFxuICAgICAgICBpbnN0YW5jZTIudm5vZGUsXG4gICAgICAgIHZub2RlLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgaW5zdGFuY2UyLFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICB2bm9kZS5zbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGluc3RhbmNlMi5pc0RlYWN0aXZhdGVkID0gZmFsc2U7XG4gICAgICAgIGlmIChpbnN0YW5jZTIuYSkge1xuICAgICAgICAgIGludm9rZUFycmF5Rm5zKGluc3RhbmNlMi5hKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2bm9kZUhvb2sgPSB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy5vblZub2RlTW91bnRlZDtcbiAgICAgICAgaWYgKHZub2RlSG9vaykge1xuICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIGluc3RhbmNlMi5wYXJlbnQsIHZub2RlKTtcbiAgICAgICAgfVxuICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgIGRldnRvb2xzQ29tcG9uZW50QWRkZWQoaW5zdGFuY2UyKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHNoYXJlZENvbnRleHQuZGVhY3RpdmF0ZSA9ICh2bm9kZSkgPT4ge1xuICAgICAgY29uc3QgaW5zdGFuY2UyID0gdm5vZGUuY29tcG9uZW50O1xuICAgICAgaW52YWxpZGF0ZU1vdW50KGluc3RhbmNlMi5tKTtcbiAgICAgIGludmFsaWRhdGVNb3VudChpbnN0YW5jZTIuYSk7XG4gICAgICBtb3ZlKHZub2RlLCBzdG9yYWdlQ29udGFpbmVyLCBudWxsLCAxLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoaW5zdGFuY2UyLmRhKSB7XG4gICAgICAgICAgaW52b2tlQXJyYXlGbnMoaW5zdGFuY2UyLmRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2bm9kZUhvb2sgPSB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy5vblZub2RlVW5tb3VudGVkO1xuICAgICAgICBpZiAodm5vZGVIb29rKSB7XG4gICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgaW5zdGFuY2UyLnBhcmVudCwgdm5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGluc3RhbmNlMi5pc0RlYWN0aXZhdGVkID0gdHJ1ZTtcbiAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICBkZXZ0b29sc0NvbXBvbmVudEFkZGVkKGluc3RhbmNlMik7XG4gICAgICB9XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB0cnVlKSB7XG4gICAgICAgIGluc3RhbmNlMi5fX2tlZXBBbGl2ZVN0b3JhZ2VDb250YWluZXIgPSBzdG9yYWdlQ29udGFpbmVyO1xuICAgICAgfVxuICAgIH07XG4gICAgZnVuY3Rpb24gdW5tb3VudCh2bm9kZSkge1xuICAgICAgcmVzZXRTaGFwZUZsYWcodm5vZGUpO1xuICAgICAgX3VubW91bnQodm5vZGUsIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBydW5lQ2FjaGUoZmlsdGVyKSB7XG4gICAgICBjYWNoZS5mb3JFYWNoKCh2bm9kZSwga2V5KSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBnZXRDb21wb25lbnROYW1lKHZub2RlLnR5cGUpO1xuICAgICAgICBpZiAobmFtZSAmJiAhZmlsdGVyKG5hbWUpKSB7XG4gICAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KGtleSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwcnVuZUNhY2hlRW50cnkoa2V5KSB7XG4gICAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoa2V5KTtcbiAgICAgIGlmIChjYWNoZWQgJiYgKCFjdXJyZW50IHx8ICFpc1NhbWVWTm9kZVR5cGUoY2FjaGVkLCBjdXJyZW50KSkpIHtcbiAgICAgICAgdW5tb3VudChjYWNoZWQpO1xuICAgICAgfSBlbHNlIGlmIChjdXJyZW50KSB7XG4gICAgICAgIHJlc2V0U2hhcGVGbGFnKGN1cnJlbnQpO1xuICAgICAgfVxuICAgICAgY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICBrZXlzLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgICB3YXRjaChcbiAgICAgICgpID0+IFtwcm9wcy5pbmNsdWRlLCBwcm9wcy5leGNsdWRlXSxcbiAgICAgIChbaW5jbHVkZSwgZXhjbHVkZV0pID0+IHtcbiAgICAgICAgaW5jbHVkZSAmJiBwcnVuZUNhY2hlKChuYW1lKSA9PiBtYXRjaGVzKGluY2x1ZGUsIG5hbWUpKTtcbiAgICAgICAgZXhjbHVkZSAmJiBwcnVuZUNhY2hlKChuYW1lKSA9PiAhbWF0Y2hlcyhleGNsdWRlLCBuYW1lKSk7XG4gICAgICB9LFxuICAgICAgLy8gcHJ1bmUgcG9zdC1yZW5kZXIgYWZ0ZXIgYGN1cnJlbnRgIGhhcyBiZWVuIHVwZGF0ZWRcbiAgICAgIHsgZmx1c2g6IFwicG9zdFwiLCBkZWVwOiB0cnVlIH1cbiAgICApO1xuICAgIGxldCBwZW5kaW5nQ2FjaGVLZXkgPSBudWxsO1xuICAgIGNvbnN0IGNhY2hlU3VidHJlZSA9ICgpID0+IHtcbiAgICAgIGlmIChwZW5kaW5nQ2FjaGVLZXkgIT0gbnVsbCkge1xuICAgICAgICBpZiAoaXNTdXNwZW5zZShpbnN0YW5jZS5zdWJUcmVlLnR5cGUpKSB7XG4gICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICAgIGNhY2hlLnNldChwZW5kaW5nQ2FjaGVLZXksIGdldElubmVyQ2hpbGQoaW5zdGFuY2Uuc3ViVHJlZSkpO1xuICAgICAgICAgIH0sIGluc3RhbmNlLnN1YlRyZWUuc3VzcGVuc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhY2hlLnNldChwZW5kaW5nQ2FjaGVLZXksIGdldElubmVyQ2hpbGQoaW5zdGFuY2Uuc3ViVHJlZSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBvbk1vdW50ZWQoY2FjaGVTdWJ0cmVlKTtcbiAgICBvblVwZGF0ZWQoY2FjaGVTdWJ0cmVlKTtcbiAgICBvbkJlZm9yZVVubW91bnQoKCkgPT4ge1xuICAgICAgY2FjaGUuZm9yRWFjaCgoY2FjaGVkKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgc3ViVHJlZSwgc3VzcGVuc2UgfSA9IGluc3RhbmNlO1xuICAgICAgICBjb25zdCB2bm9kZSA9IGdldElubmVyQ2hpbGQoc3ViVHJlZSk7XG4gICAgICAgIGlmIChjYWNoZWQudHlwZSA9PT0gdm5vZGUudHlwZSAmJiBjYWNoZWQua2V5ID09PSB2bm9kZS5rZXkpIHtcbiAgICAgICAgICByZXNldFNoYXBlRmxhZyh2bm9kZSk7XG4gICAgICAgICAgY29uc3QgZGEgPSB2bm9kZS5jb21wb25lbnQuZGE7XG4gICAgICAgICAgZGEgJiYgcXVldWVQb3N0UmVuZGVyRWZmZWN0KGRhLCBzdXNwZW5zZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHVubW91bnQoY2FjaGVkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBwZW5kaW5nQ2FjaGVLZXkgPSBudWxsO1xuICAgICAgaWYgKCFzbG90cy5kZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gc2xvdHMuZGVmYXVsdCgpO1xuICAgICAgY29uc3QgcmF3Vk5vZGUgPSBjaGlsZHJlblswXTtcbiAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgd2FybiQxKGBLZWVwQWxpdmUgc2hvdWxkIGNvbnRhaW4gZXhhY3RseSBvbmUgY29tcG9uZW50IGNoaWxkLmApO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnQgPSBudWxsO1xuICAgICAgICByZXR1cm4gY2hpbGRyZW47XG4gICAgICB9IGVsc2UgaWYgKCFpc1ZOb2RlKHJhd1ZOb2RlKSB8fCAhKHJhd1ZOb2RlLnNoYXBlRmxhZyAmIDQpICYmICEocmF3Vk5vZGUuc2hhcGVGbGFnICYgMTI4KSkge1xuICAgICAgICBjdXJyZW50ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJhd1ZOb2RlO1xuICAgICAgfVxuICAgICAgbGV0IHZub2RlID0gZ2V0SW5uZXJDaGlsZChyYXdWTm9kZSk7XG4gICAgICBpZiAodm5vZGUudHlwZSA9PT0gQ29tbWVudCkge1xuICAgICAgICBjdXJyZW50ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHZub2RlO1xuICAgICAgfVxuICAgICAgY29uc3QgY29tcCA9IHZub2RlLnR5cGU7XG4gICAgICBjb25zdCBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShcbiAgICAgICAgaXNBc3luY1dyYXBwZXIodm5vZGUpID8gdm5vZGUudHlwZS5fX2FzeW5jUmVzb2x2ZWQgfHwge30gOiBjb21wXG4gICAgICApO1xuICAgICAgY29uc3QgeyBpbmNsdWRlLCBleGNsdWRlLCBtYXggfSA9IHByb3BzO1xuICAgICAgaWYgKGluY2x1ZGUgJiYgKCFuYW1lIHx8ICFtYXRjaGVzKGluY2x1ZGUsIG5hbWUpKSB8fCBleGNsdWRlICYmIG5hbWUgJiYgbWF0Y2hlcyhleGNsdWRlLCBuYW1lKSkge1xuICAgICAgICB2bm9kZS5zaGFwZUZsYWcgJj0gLTI1NztcbiAgICAgICAgY3VycmVudCA9IHZub2RlO1xuICAgICAgICByZXR1cm4gcmF3Vk5vZGU7XG4gICAgICB9XG4gICAgICBjb25zdCBrZXkgPSB2bm9kZS5rZXkgPT0gbnVsbCA/IGNvbXAgOiB2bm9kZS5rZXk7XG4gICAgICBjb25zdCBjYWNoZWRWTm9kZSA9IGNhY2hlLmdldChrZXkpO1xuICAgICAgaWYgKHZub2RlLmVsKSB7XG4gICAgICAgIHZub2RlID0gY2xvbmVWTm9kZSh2bm9kZSk7XG4gICAgICAgIGlmIChyYXdWTm9kZS5zaGFwZUZsYWcgJiAxMjgpIHtcbiAgICAgICAgICByYXdWTm9kZS5zc0NvbnRlbnQgPSB2bm9kZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcGVuZGluZ0NhY2hlS2V5ID0ga2V5O1xuICAgICAgaWYgKGNhY2hlZFZOb2RlKSB7XG4gICAgICAgIHZub2RlLmVsID0gY2FjaGVkVk5vZGUuZWw7XG4gICAgICAgIHZub2RlLmNvbXBvbmVudCA9IGNhY2hlZFZOb2RlLmNvbXBvbmVudDtcbiAgICAgICAgaWYgKHZub2RlLnRyYW5zaXRpb24pIHtcbiAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3Modm5vZGUsIHZub2RlLnRyYW5zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHZub2RlLnNoYXBlRmxhZyB8PSA1MTI7XG4gICAgICAgIGtleXMuZGVsZXRlKGtleSk7XG4gICAgICAgIGtleXMuYWRkKGtleSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBrZXlzLmFkZChrZXkpO1xuICAgICAgICBpZiAobWF4ICYmIGtleXMuc2l6ZSA+IHBhcnNlSW50KG1heCwgMTApKSB7XG4gICAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KGtleXMudmFsdWVzKCkubmV4dCgpLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdm5vZGUuc2hhcGVGbGFnIHw9IDI1NjtcbiAgICAgIGN1cnJlbnQgPSB2bm9kZTtcbiAgICAgIHJldHVybiBpc1N1c3BlbnNlKHJhd1ZOb2RlLnR5cGUpID8gcmF3Vk5vZGUgOiB2bm9kZTtcbiAgICB9O1xuICB9XG59O1xuY29uc3QgS2VlcEFsaXZlID0gS2VlcEFsaXZlSW1wbDtcbmZ1bmN0aW9uIG1hdGNoZXMocGF0dGVybiwgbmFtZSkge1xuICBpZiAoaXNBcnJheShwYXR0ZXJuKSkge1xuICAgIHJldHVybiBwYXR0ZXJuLnNvbWUoKHApID0+IG1hdGNoZXMocCwgbmFtZSkpO1xuICB9IGVsc2UgaWYgKGlzU3RyaW5nKHBhdHRlcm4pKSB7XG4gICAgcmV0dXJuIHBhdHRlcm4uc3BsaXQoXCIsXCIpLmluY2x1ZGVzKG5hbWUpO1xuICB9IGVsc2UgaWYgKGlzUmVnRXhwKHBhdHRlcm4pKSB7XG4gICAgcGF0dGVybi5sYXN0SW5kZXggPSAwO1xuICAgIHJldHVybiBwYXR0ZXJuLnRlc3QobmFtZSk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gb25BY3RpdmF0ZWQoaG9vaywgdGFyZ2V0KSB7XG4gIHJlZ2lzdGVyS2VlcEFsaXZlSG9vayhob29rLCBcImFcIiwgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIG9uRGVhY3RpdmF0ZWQoaG9vaywgdGFyZ2V0KSB7XG4gIHJlZ2lzdGVyS2VlcEFsaXZlSG9vayhob29rLCBcImRhXCIsIHRhcmdldCk7XG59XG5mdW5jdGlvbiByZWdpc3RlcktlZXBBbGl2ZUhvb2soaG9vaywgdHlwZSwgdGFyZ2V0ID0gY3VycmVudEluc3RhbmNlKSB7XG4gIGNvbnN0IHdyYXBwZWRIb29rID0gaG9vay5fX3dkYyB8fCAoaG9vay5fX3dkYyA9ICgpID0+IHtcbiAgICBsZXQgY3VycmVudCA9IHRhcmdldDtcbiAgICB3aGlsZSAoY3VycmVudCkge1xuICAgICAgaWYgKGN1cnJlbnQuaXNEZWFjdGl2YXRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQ7XG4gICAgfVxuICAgIHJldHVybiBob29rKCk7XG4gIH0pO1xuICBpbmplY3RIb29rKHR5cGUsIHdyYXBwZWRIb29rLCB0YXJnZXQpO1xuICBpZiAodGFyZ2V0KSB7XG4gICAgbGV0IGN1cnJlbnQgPSB0YXJnZXQucGFyZW50O1xuICAgIHdoaWxlIChjdXJyZW50ICYmIGN1cnJlbnQucGFyZW50KSB7XG4gICAgICBpZiAoaXNLZWVwQWxpdmUoY3VycmVudC5wYXJlbnQudm5vZGUpKSB7XG4gICAgICAgIGluamVjdFRvS2VlcEFsaXZlUm9vdCh3cmFwcGVkSG9vaywgdHlwZSwgdGFyZ2V0LCBjdXJyZW50KTtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGluamVjdFRvS2VlcEFsaXZlUm9vdChob29rLCB0eXBlLCB0YXJnZXQsIGtlZXBBbGl2ZVJvb3QpIHtcbiAgY29uc3QgaW5qZWN0ZWQgPSBpbmplY3RIb29rKFxuICAgIHR5cGUsXG4gICAgaG9vayxcbiAgICBrZWVwQWxpdmVSb290LFxuICAgIHRydWVcbiAgICAvKiBwcmVwZW5kICovXG4gICk7XG4gIG9uVW5tb3VudGVkKCgpID0+IHtcbiAgICByZW1vdmUoa2VlcEFsaXZlUm9vdFt0eXBlXSwgaW5qZWN0ZWQpO1xuICB9LCB0YXJnZXQpO1xufVxuZnVuY3Rpb24gcmVzZXRTaGFwZUZsYWcodm5vZGUpIHtcbiAgdm5vZGUuc2hhcGVGbGFnICY9IC0yNTc7XG4gIHZub2RlLnNoYXBlRmxhZyAmPSAtNTEzO1xufVxuZnVuY3Rpb24gZ2V0SW5uZXJDaGlsZCh2bm9kZSkge1xuICByZXR1cm4gdm5vZGUuc2hhcGVGbGFnICYgMTI4ID8gdm5vZGUuc3NDb250ZW50IDogdm5vZGU7XG59XG5cbmZ1bmN0aW9uIGluamVjdEhvb2sodHlwZSwgaG9vaywgdGFyZ2V0ID0gY3VycmVudEluc3RhbmNlLCBwcmVwZW5kID0gZmFsc2UpIHtcbiAgaWYgKHRhcmdldCkge1xuICAgIGNvbnN0IGhvb2tzID0gdGFyZ2V0W3R5cGVdIHx8ICh0YXJnZXRbdHlwZV0gPSBbXSk7XG4gICAgY29uc3Qgd3JhcHBlZEhvb2sgPSBob29rLl9fd2VoIHx8IChob29rLl9fd2VoID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgIGNvbnN0IHJlc2V0ID0gc2V0Q3VycmVudEluc3RhbmNlKHRhcmdldCk7XG4gICAgICBjb25zdCByZXMgPSBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhob29rLCB0YXJnZXQsIHR5cGUsIGFyZ3MpO1xuICAgICAgcmVzZXQoKTtcbiAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfSk7XG4gICAgaWYgKHByZXBlbmQpIHtcbiAgICAgIGhvb2tzLnVuc2hpZnQod3JhcHBlZEhvb2spO1xuICAgIH0gZWxzZSB7XG4gICAgICBob29rcy5wdXNoKHdyYXBwZWRIb29rKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyYXBwZWRIb29rO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBjb25zdCBhcGlOYW1lID0gdG9IYW5kbGVyS2V5KEVycm9yVHlwZVN0cmluZ3MkMVt0eXBlXS5yZXBsYWNlKC8gaG9vayQvLCBcIlwiKSk7XG4gICAgd2FybiQxKFxuICAgICAgYCR7YXBpTmFtZX0gaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgbm8gYWN0aXZlIGNvbXBvbmVudCBpbnN0YW5jZSB0byBiZSBhc3NvY2lhdGVkIHdpdGguIExpZmVjeWNsZSBpbmplY3Rpb24gQVBJcyBjYW4gb25seSBiZSB1c2VkIGR1cmluZyBleGVjdXRpb24gb2Ygc2V0dXAoKS5gICsgKGAgSWYgeW91IGFyZSB1c2luZyBhc3luYyBzZXR1cCgpLCBtYWtlIHN1cmUgdG8gcmVnaXN0ZXIgbGlmZWN5Y2xlIGhvb2tzIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQgc3RhdGVtZW50LmAgKVxuICAgICk7XG4gIH1cbn1cbmNvbnN0IGNyZWF0ZUhvb2sgPSAobGlmZWN5Y2xlKSA9PiAoaG9vaywgdGFyZ2V0ID0gY3VycmVudEluc3RhbmNlKSA9PiB7XG4gIGlmICghaXNJblNTUkNvbXBvbmVudFNldHVwIHx8IGxpZmVjeWNsZSA9PT0gXCJzcFwiKSB7XG4gICAgaW5qZWN0SG9vayhsaWZlY3ljbGUsICguLi5hcmdzKSA9PiBob29rKC4uLmFyZ3MpLCB0YXJnZXQpO1xuICB9XG59O1xuY29uc3Qgb25CZWZvcmVNb3VudCA9IGNyZWF0ZUhvb2soXCJibVwiKTtcbmNvbnN0IG9uTW91bnRlZCA9IGNyZWF0ZUhvb2soXCJtXCIpO1xuY29uc3Qgb25CZWZvcmVVcGRhdGUgPSBjcmVhdGVIb29rKFxuICBcImJ1XCJcbik7XG5jb25zdCBvblVwZGF0ZWQgPSBjcmVhdGVIb29rKFwidVwiKTtcbmNvbnN0IG9uQmVmb3JlVW5tb3VudCA9IGNyZWF0ZUhvb2soXG4gIFwiYnVtXCJcbik7XG5jb25zdCBvblVubW91bnRlZCA9IGNyZWF0ZUhvb2soXCJ1bVwiKTtcbmNvbnN0IG9uU2VydmVyUHJlZmV0Y2ggPSBjcmVhdGVIb29rKFxuICBcInNwXCJcbik7XG5jb25zdCBvblJlbmRlclRyaWdnZXJlZCA9IGNyZWF0ZUhvb2soXCJydGdcIik7XG5jb25zdCBvblJlbmRlclRyYWNrZWQgPSBjcmVhdGVIb29rKFwicnRjXCIpO1xuZnVuY3Rpb24gb25FcnJvckNhcHR1cmVkKGhvb2ssIHRhcmdldCA9IGN1cnJlbnRJbnN0YW5jZSkge1xuICBpbmplY3RIb29rKFwiZWNcIiwgaG9vaywgdGFyZ2V0KTtcbn1cblxuY29uc3QgQ09NUE9ORU5UUyA9IFwiY29tcG9uZW50c1wiO1xuY29uc3QgRElSRUNUSVZFUyA9IFwiZGlyZWN0aXZlc1wiO1xuZnVuY3Rpb24gcmVzb2x2ZUNvbXBvbmVudChuYW1lLCBtYXliZVNlbGZSZWZlcmVuY2UpIHtcbiAgcmV0dXJuIHJlc29sdmVBc3NldChDT01QT05FTlRTLCBuYW1lLCB0cnVlLCBtYXliZVNlbGZSZWZlcmVuY2UpIHx8IG5hbWU7XG59XG5jb25zdCBOVUxMX0RZTkFNSUNfQ09NUE9ORU5UID0gU3ltYm9sLmZvcihcInYtbmRjXCIpO1xuZnVuY3Rpb24gcmVzb2x2ZUR5bmFtaWNDb21wb25lbnQoY29tcG9uZW50KSB7XG4gIGlmIChpc1N0cmluZyhjb21wb25lbnQpKSB7XG4gICAgcmV0dXJuIHJlc29sdmVBc3NldChDT01QT05FTlRTLCBjb21wb25lbnQsIGZhbHNlKSB8fCBjb21wb25lbnQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNvbXBvbmVudCB8fCBOVUxMX0RZTkFNSUNfQ09NUE9ORU5UO1xuICB9XG59XG5mdW5jdGlvbiByZXNvbHZlRGlyZWN0aXZlKG5hbWUpIHtcbiAgcmV0dXJuIHJlc29sdmVBc3NldChESVJFQ1RJVkVTLCBuYW1lKTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVBc3NldCh0eXBlLCBuYW1lLCB3YXJuTWlzc2luZyA9IHRydWUsIG1heWJlU2VsZlJlZmVyZW5jZSA9IGZhbHNlKSB7XG4gIGNvbnN0IGluc3RhbmNlID0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlIHx8IGN1cnJlbnRJbnN0YW5jZTtcbiAgaWYgKGluc3RhbmNlKSB7XG4gICAgY29uc3QgQ29tcG9uZW50ID0gaW5zdGFuY2UudHlwZTtcbiAgICBpZiAodHlwZSA9PT0gQ09NUE9ORU5UUykge1xuICAgICAgY29uc3Qgc2VsZk5hbWUgPSBnZXRDb21wb25lbnROYW1lKFxuICAgICAgICBDb21wb25lbnQsXG4gICAgICAgIGZhbHNlXG4gICAgICApO1xuICAgICAgaWYgKHNlbGZOYW1lICYmIChzZWxmTmFtZSA9PT0gbmFtZSB8fCBzZWxmTmFtZSA9PT0gY2FtZWxpemUobmFtZSkgfHwgc2VsZk5hbWUgPT09IGNhcGl0YWxpemUoY2FtZWxpemUobmFtZSkpKSkge1xuICAgICAgICByZXR1cm4gQ29tcG9uZW50O1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXMgPSAoXG4gICAgICAvLyBsb2NhbCByZWdpc3RyYXRpb25cbiAgICAgIC8vIGNoZWNrIGluc3RhbmNlW3R5cGVdIGZpcnN0IHdoaWNoIGlzIHJlc29sdmVkIGZvciBvcHRpb25zIEFQSVxuICAgICAgcmVzb2x2ZShpbnN0YW5jZVt0eXBlXSB8fCBDb21wb25lbnRbdHlwZV0sIG5hbWUpIHx8IC8vIGdsb2JhbCByZWdpc3RyYXRpb25cbiAgICAgIHJlc29sdmUoaW5zdGFuY2UuYXBwQ29udGV4dFt0eXBlXSwgbmFtZSlcbiAgICApO1xuICAgIGlmICghcmVzICYmIG1heWJlU2VsZlJlZmVyZW5jZSkge1xuICAgICAgcmV0dXJuIENvbXBvbmVudDtcbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2Fybk1pc3NpbmcgJiYgIXJlcykge1xuICAgICAgY29uc3QgZXh0cmEgPSB0eXBlID09PSBDT01QT05FTlRTID8gYFxuSWYgdGhpcyBpcyBhIG5hdGl2ZSBjdXN0b20gZWxlbWVudCwgbWFrZSBzdXJlIHRvIGV4Y2x1ZGUgaXQgZnJvbSBjb21wb25lbnQgcmVzb2x1dGlvbiB2aWEgY29tcGlsZXJPcHRpb25zLmlzQ3VzdG9tRWxlbWVudC5gIDogYGA7XG4gICAgICB3YXJuJDEoYEZhaWxlZCB0byByZXNvbHZlICR7dHlwZS5zbGljZSgwLCAtMSl9OiAke25hbWV9JHtleHRyYX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FybiQxKFxuICAgICAgYHJlc29sdmUke2NhcGl0YWxpemUodHlwZS5zbGljZSgwLCAtMSkpfSBjYW4gb25seSBiZSB1c2VkIGluIHJlbmRlcigpIG9yIHNldHVwKCkuYFxuICAgICk7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlc29sdmUocmVnaXN0cnksIG5hbWUpIHtcbiAgcmV0dXJuIHJlZ2lzdHJ5ICYmIChyZWdpc3RyeVtuYW1lXSB8fCByZWdpc3RyeVtjYW1lbGl6ZShuYW1lKV0gfHwgcmVnaXN0cnlbY2FwaXRhbGl6ZShjYW1lbGl6ZShuYW1lKSldKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyTGlzdChzb3VyY2UsIHJlbmRlckl0ZW0sIGNhY2hlLCBpbmRleCkge1xuICBsZXQgcmV0O1xuICBjb25zdCBjYWNoZWQgPSBjYWNoZSAmJiBjYWNoZVtpbmRleF07XG4gIGNvbnN0IHNvdXJjZUlzQXJyYXkgPSBpc0FycmF5KHNvdXJjZSk7XG4gIGlmIChzb3VyY2VJc0FycmF5IHx8IGlzU3RyaW5nKHNvdXJjZSkpIHtcbiAgICBjb25zdCBzb3VyY2VJc1JlYWN0aXZlQXJyYXkgPSBzb3VyY2VJc0FycmF5ICYmIGlzUmVhY3RpdmUoc291cmNlKTtcbiAgICBsZXQgbmVlZHNXcmFwID0gZmFsc2U7XG4gICAgbGV0IGlzUmVhZG9ubHlTb3VyY2UgPSBmYWxzZTtcbiAgICBpZiAoc291cmNlSXNSZWFjdGl2ZUFycmF5KSB7XG4gICAgICBuZWVkc1dyYXAgPSAhaXNTaGFsbG93KHNvdXJjZSk7XG4gICAgICBpc1JlYWRvbmx5U291cmNlID0gaXNSZWFkb25seShzb3VyY2UpO1xuICAgICAgc291cmNlID0gc2hhbGxvd1JlYWRBcnJheShzb3VyY2UpO1xuICAgIH1cbiAgICByZXQgPSBuZXcgQXJyYXkoc291cmNlLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBzb3VyY2UubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICByZXRbaV0gPSByZW5kZXJJdGVtKFxuICAgICAgICBuZWVkc1dyYXAgPyBpc1JlYWRvbmx5U291cmNlID8gdG9SZWFkb25seSh0b1JlYWN0aXZlKHNvdXJjZVtpXSkpIDogdG9SZWFjdGl2ZShzb3VyY2VbaV0pIDogc291cmNlW2ldLFxuICAgICAgICBpLFxuICAgICAgICB2b2lkIDAsXG4gICAgICAgIGNhY2hlZCAmJiBjYWNoZWRbaV1cbiAgICAgICk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBzb3VyY2UgPT09IFwibnVtYmVyXCIpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhTnVtYmVyLmlzSW50ZWdlcihzb3VyY2UpKSB7XG4gICAgICB3YXJuJDEoYFRoZSB2LWZvciByYW5nZSBleHBlY3QgYW4gaW50ZWdlciB2YWx1ZSBidXQgZ290ICR7c291cmNlfS5gKTtcbiAgICB9XG4gICAgcmV0ID0gbmV3IEFycmF5KHNvdXJjZSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2U7IGkrKykge1xuICAgICAgcmV0W2ldID0gcmVuZGVySXRlbShpICsgMSwgaSwgdm9pZCAwLCBjYWNoZWQgJiYgY2FjaGVkW2ldKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qoc291cmNlKSkge1xuICAgIGlmIChzb3VyY2VbU3ltYm9sLml0ZXJhdG9yXSkge1xuICAgICAgcmV0ID0gQXJyYXkuZnJvbShcbiAgICAgICAgc291cmNlLFxuICAgICAgICAoaXRlbSwgaSkgPT4gcmVuZGVySXRlbShpdGVtLCBpLCB2b2lkIDAsIGNhY2hlZCAmJiBjYWNoZWRbaV0pXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgICAgIHJldCA9IG5ldyBBcnJheShrZXlzLmxlbmd0aCk7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGtleXNbaV07XG4gICAgICAgIHJldFtpXSA9IHJlbmRlckl0ZW0oc291cmNlW2tleV0sIGtleSwgaSwgY2FjaGVkICYmIGNhY2hlZFtpXSk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldCA9IFtdO1xuICB9XG4gIGlmIChjYWNoZSkge1xuICAgIGNhY2hlW2luZGV4XSA9IHJldDtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTbG90cyhzbG90cywgZHluYW1pY1Nsb3RzKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZHluYW1pY1Nsb3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgc2xvdCA9IGR5bmFtaWNTbG90c1tpXTtcbiAgICBpZiAoaXNBcnJheShzbG90KSkge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzbG90Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHNsb3RzW3Nsb3Rbal0ubmFtZV0gPSBzbG90W2pdLmZuO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc2xvdCkge1xuICAgICAgc2xvdHNbc2xvdC5uYW1lXSA9IHNsb3Qua2V5ID8gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgY29uc3QgcmVzID0gc2xvdC5mbiguLi5hcmdzKTtcbiAgICAgICAgaWYgKHJlcykgcmVzLmtleSA9IHNsb3Qua2V5O1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfSA6IHNsb3QuZm47XG4gICAgfVxuICB9XG4gIHJldHVybiBzbG90cztcbn1cblxuZnVuY3Rpb24gcmVuZGVyU2xvdChzbG90cywgbmFtZSwgcHJvcHMgPSB7fSwgZmFsbGJhY2ssIG5vU2xvdHRlZCkge1xuICBpZiAoY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLmNlIHx8IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5wYXJlbnQgJiYgaXNBc3luY1dyYXBwZXIoY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLnBhcmVudCkgJiYgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLnBhcmVudC5jZSkge1xuICAgIGNvbnN0IGhhc1Byb3BzID0gT2JqZWN0LmtleXMocHJvcHMpLmxlbmd0aCA+IDA7XG4gICAgaWYgKG5hbWUgIT09IFwiZGVmYXVsdFwiKSBwcm9wcy5uYW1lID0gbmFtZTtcbiAgICByZXR1cm4gb3BlbkJsb2NrKCksIGNyZWF0ZUJsb2NrKFxuICAgICAgRnJhZ21lbnQsXG4gICAgICBudWxsLFxuICAgICAgW2NyZWF0ZVZOb2RlKFwic2xvdFwiLCBwcm9wcywgZmFsbGJhY2sgJiYgZmFsbGJhY2soKSldLFxuICAgICAgaGFzUHJvcHMgPyAtMiA6IDY0XG4gICAgKTtcbiAgfVxuICBsZXQgc2xvdCA9IHNsb3RzW25hbWVdO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBzbG90ICYmIHNsb3QubGVuZ3RoID4gMSkge1xuICAgIHdhcm4kMShcbiAgICAgIGBTU1Itb3B0aW1pemVkIHNsb3QgZnVuY3Rpb24gZGV0ZWN0ZWQgaW4gYSBub24tU1NSLW9wdGltaXplZCByZW5kZXIgZnVuY3Rpb24uIFlvdSBuZWVkIHRvIG1hcmsgdGhpcyBjb21wb25lbnQgd2l0aCAkZHluYW1pYy1zbG90cyBpbiB0aGUgcGFyZW50IHRlbXBsYXRlLmBcbiAgICApO1xuICAgIHNsb3QgPSAoKSA9PiBbXTtcbiAgfVxuICBpZiAoc2xvdCAmJiBzbG90Ll9jKSB7XG4gICAgc2xvdC5fZCA9IGZhbHNlO1xuICB9XG4gIG9wZW5CbG9jaygpO1xuICBjb25zdCB2YWxpZFNsb3RDb250ZW50ID0gc2xvdCAmJiBlbnN1cmVWYWxpZFZOb2RlKHNsb3QocHJvcHMpKTtcbiAgY29uc3Qgc2xvdEtleSA9IHByb3BzLmtleSB8fCAvLyBzbG90IGNvbnRlbnQgYXJyYXkgb2YgYSBkeW5hbWljIGNvbmRpdGlvbmFsIHNsb3QgbWF5IGhhdmUgYSBicmFuY2hcbiAgLy8ga2V5IGF0dGFjaGVkIGluIHRoZSBgY3JlYXRlU2xvdHNgIGhlbHBlciwgcmVzcGVjdCB0aGF0XG4gIHZhbGlkU2xvdENvbnRlbnQgJiYgdmFsaWRTbG90Q29udGVudC5rZXk7XG4gIGNvbnN0IHJlbmRlcmVkID0gY3JlYXRlQmxvY2soXG4gICAgRnJhZ21lbnQsXG4gICAge1xuICAgICAga2V5OiAoc2xvdEtleSAmJiAhaXNTeW1ib2woc2xvdEtleSkgPyBzbG90S2V5IDogYF8ke25hbWV9YCkgKyAvLyAjNzI1NiBmb3JjZSBkaWZmZXJlbnRpYXRlIGZhbGxiYWNrIGNvbnRlbnQgZnJvbSBhY3R1YWwgY29udGVudFxuICAgICAgKCF2YWxpZFNsb3RDb250ZW50ICYmIGZhbGxiYWNrID8gXCJfZmJcIiA6IFwiXCIpXG4gICAgfSxcbiAgICB2YWxpZFNsb3RDb250ZW50IHx8IChmYWxsYmFjayA/IGZhbGxiYWNrKCkgOiBbXSksXG4gICAgdmFsaWRTbG90Q29udGVudCAmJiBzbG90cy5fID09PSAxID8gNjQgOiAtMlxuICApO1xuICBpZiAoIW5vU2xvdHRlZCAmJiByZW5kZXJlZC5zY29wZUlkKSB7XG4gICAgcmVuZGVyZWQuc2xvdFNjb3BlSWRzID0gW3JlbmRlcmVkLnNjb3BlSWQgKyBcIi1zXCJdO1xuICB9XG4gIGlmIChzbG90ICYmIHNsb3QuX2MpIHtcbiAgICBzbG90Ll9kID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gcmVuZGVyZWQ7XG59XG5mdW5jdGlvbiBlbnN1cmVWYWxpZFZOb2RlKHZub2Rlcykge1xuICByZXR1cm4gdm5vZGVzLnNvbWUoKGNoaWxkKSA9PiB7XG4gICAgaWYgKCFpc1ZOb2RlKGNoaWxkKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09IENvbW1lbnQpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gRnJhZ21lbnQgJiYgIWVuc3VyZVZhbGlkVk5vZGUoY2hpbGQuY2hpbGRyZW4pKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9KSA/IHZub2RlcyA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHRvSGFuZGxlcnMob2JqLCBwcmVzZXJ2ZUNhc2VJZk5lY2Vzc2FyeSkge1xuICBjb25zdCByZXQgPSB7fTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWlzT2JqZWN0KG9iaikpIHtcbiAgICB3YXJuJDEoYHYtb24gd2l0aCBubyBhcmd1bWVudCBleHBlY3RzIGFuIG9iamVjdCB2YWx1ZS5gKTtcbiAgICByZXR1cm4gcmV0O1xuICB9XG4gIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgIHJldFtwcmVzZXJ2ZUNhc2VJZk5lY2Vzc2FyeSAmJiAvW0EtWl0vLnRlc3Qoa2V5KSA/IGBvbjoke2tleX1gIDogdG9IYW5kbGVyS2V5KGtleSldID0gb2JqW2tleV07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuY29uc3QgZ2V0UHVibGljSW5zdGFuY2UgPSAoaSkgPT4ge1xuICBpZiAoIWkpIHJldHVybiBudWxsO1xuICBpZiAoaXNTdGF0ZWZ1bENvbXBvbmVudChpKSkgcmV0dXJuIGdldENvbXBvbmVudFB1YmxpY0luc3RhbmNlKGkpO1xuICByZXR1cm4gZ2V0UHVibGljSW5zdGFuY2UoaS5wYXJlbnQpO1xufTtcbmNvbnN0IHB1YmxpY1Byb3BlcnRpZXNNYXAgPSAoXG4gIC8vIE1vdmUgUFVSRSBtYXJrZXIgdG8gbmV3IGxpbmUgdG8gd29ya2Fyb3VuZCBjb21waWxlciBkaXNjYXJkaW5nIGl0XG4gIC8vIGR1ZSB0byB0eXBlIGFubm90YXRpb25cbiAgLyogQF9fUFVSRV9fICovIGV4dGVuZCgvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKSwge1xuICAgICQ6IChpKSA9PiBpLFxuICAgICRlbDogKGkpID0+IGkudm5vZGUuZWwsXG4gICAgJGRhdGE6IChpKSA9PiBpLmRhdGEsXG4gICAgJHByb3BzOiAoaSkgPT4gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHNoYWxsb3dSZWFkb25seShpLnByb3BzKSA6IGkucHJvcHMsXG4gICAgJGF0dHJzOiAoaSkgPT4gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHNoYWxsb3dSZWFkb25seShpLmF0dHJzKSA6IGkuYXR0cnMsXG4gICAgJHNsb3RzOiAoaSkgPT4gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHNoYWxsb3dSZWFkb25seShpLnNsb3RzKSA6IGkuc2xvdHMsXG4gICAgJHJlZnM6IChpKSA9PiAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gc2hhbGxvd1JlYWRvbmx5KGkucmVmcykgOiBpLnJlZnMsXG4gICAgJHBhcmVudDogKGkpID0+IGdldFB1YmxpY0luc3RhbmNlKGkucGFyZW50KSxcbiAgICAkcm9vdDogKGkpID0+IGdldFB1YmxpY0luc3RhbmNlKGkucm9vdCksXG4gICAgJGhvc3Q6IChpKSA9PiBpLmNlLFxuICAgICRlbWl0OiAoaSkgPT4gaS5lbWl0LFxuICAgICRvcHRpb25zOiAoaSkgPT4gX19WVUVfT1BUSU9OU19BUElfXyA/IHJlc29sdmVNZXJnZWRPcHRpb25zKGkpIDogaS50eXBlLFxuICAgICRmb3JjZVVwZGF0ZTogKGkpID0+IGkuZiB8fCAoaS5mID0gKCkgPT4ge1xuICAgICAgcXVldWVKb2IoaS51cGRhdGUpO1xuICAgIH0pLFxuICAgICRuZXh0VGljazogKGkpID0+IGkubiB8fCAoaS5uID0gbmV4dFRpY2suYmluZChpLnByb3h5KSksXG4gICAgJHdhdGNoOiAoaSkgPT4gX19WVUVfT1BUSU9OU19BUElfXyA/IGluc3RhbmNlV2F0Y2guYmluZChpKSA6IE5PT1BcbiAgfSlcbik7XG5jb25zdCBpc1Jlc2VydmVkUHJlZml4ID0gKGtleSkgPT4ga2V5ID09PSBcIl9cIiB8fCBrZXkgPT09IFwiJFwiO1xuY29uc3QgaGFzU2V0dXBCaW5kaW5nID0gKHN0YXRlLCBrZXkpID0+IHN0YXRlICE9PSBFTVBUWV9PQkogJiYgIXN0YXRlLl9faXNTY3JpcHRTZXR1cCAmJiBoYXNPd24oc3RhdGUsIGtleSk7XG5jb25zdCBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMgPSB7XG4gIGdldCh7IF86IGluc3RhbmNlIH0sIGtleSkge1xuICAgIGlmIChrZXkgPT09IFwiX192X3NraXBcIikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHsgY3R4LCBzZXR1cFN0YXRlLCBkYXRhLCBwcm9wcywgYWNjZXNzQ2FjaGUsIHR5cGUsIGFwcENvbnRleHQgfSA9IGluc3RhbmNlO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGtleSA9PT0gXCJfX2lzVnVlXCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoa2V5WzBdICE9PSBcIiRcIikge1xuICAgICAgY29uc3QgbiA9IGFjY2Vzc0NhY2hlW2tleV07XG4gICAgICBpZiAobiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHN3aXRjaCAobikge1xuICAgICAgICAgIGNhc2UgMSAvKiBTRVRVUCAqLzpcbiAgICAgICAgICAgIHJldHVybiBzZXR1cFN0YXRlW2tleV07XG4gICAgICAgICAgY2FzZSAyIC8qIERBVEEgKi86XG4gICAgICAgICAgICByZXR1cm4gZGF0YVtrZXldO1xuICAgICAgICAgIGNhc2UgNCAvKiBDT05URVhUICovOlxuICAgICAgICAgICAgcmV0dXJuIGN0eFtrZXldO1xuICAgICAgICAgIGNhc2UgMyAvKiBQUk9QUyAqLzpcbiAgICAgICAgICAgIHJldHVybiBwcm9wc1trZXldO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGhhc1NldHVwQmluZGluZyhzZXR1cFN0YXRlLCBrZXkpKSB7XG4gICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSAxIC8qIFNFVFVQICovO1xuICAgICAgICByZXR1cm4gc2V0dXBTdGF0ZVtrZXldO1xuICAgICAgfSBlbHNlIGlmIChfX1ZVRV9PUFRJT05TX0FQSV9fICYmIGRhdGEgIT09IEVNUFRZX09CSiAmJiBoYXNPd24oZGF0YSwga2V5KSkge1xuICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMiAvKiBEQVRBICovO1xuICAgICAgICByZXR1cm4gZGF0YVtrZXldO1xuICAgICAgfSBlbHNlIGlmIChoYXNPd24ocHJvcHMsIGtleSkpIHtcbiAgICAgICAgYWNjZXNzQ2FjaGVba2V5XSA9IDMgLyogUFJPUFMgKi87XG4gICAgICAgIHJldHVybiBwcm9wc1trZXldO1xuICAgICAgfSBlbHNlIGlmIChjdHggIT09IEVNUFRZX09CSiAmJiBoYXNPd24oY3R4LCBrZXkpKSB7XG4gICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSA0IC8qIENPTlRFWFQgKi87XG4gICAgICAgIHJldHVybiBjdHhba2V5XTtcbiAgICAgIH0gZWxzZSBpZiAoIV9fVlVFX09QVElPTlNfQVBJX18gfHwgc2hvdWxkQ2FjaGVBY2Nlc3MpIHtcbiAgICAgICAgYWNjZXNzQ2FjaGVba2V5XSA9IDAgLyogT1RIRVIgKi87XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHB1YmxpY0dldHRlciA9IHB1YmxpY1Byb3BlcnRpZXNNYXBba2V5XTtcbiAgICBsZXQgY3NzTW9kdWxlLCBnbG9iYWxQcm9wZXJ0aWVzO1xuICAgIGlmIChwdWJsaWNHZXR0ZXIpIHtcbiAgICAgIGlmIChrZXkgPT09IFwiJGF0dHJzXCIpIHtcbiAgICAgICAgdHJhY2soaW5zdGFuY2UuYXR0cnMsIFwiZ2V0XCIsIFwiXCIpO1xuICAgICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XG4gICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYga2V5ID09PSBcIiRzbG90c1wiKSB7XG4gICAgICAgIHRyYWNrKGluc3RhbmNlLCBcImdldFwiLCBrZXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHB1YmxpY0dldHRlcihpbnN0YW5jZSk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIC8vIGNzcyBtb2R1bGUgKGluamVjdGVkIGJ5IHZ1ZS1sb2FkZXIpXG4gICAgICAoY3NzTW9kdWxlID0gdHlwZS5fX2Nzc01vZHVsZXMpICYmIChjc3NNb2R1bGUgPSBjc3NNb2R1bGVba2V5XSlcbiAgICApIHtcbiAgICAgIHJldHVybiBjc3NNb2R1bGU7XG4gICAgfSBlbHNlIGlmIChjdHggIT09IEVNUFRZX09CSiAmJiBoYXNPd24oY3R4LCBrZXkpKSB7XG4gICAgICBhY2Nlc3NDYWNoZVtrZXldID0gNCAvKiBDT05URVhUICovO1xuICAgICAgcmV0dXJuIGN0eFtrZXldO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAvLyBnbG9iYWwgcHJvcGVydGllc1xuICAgICAgZ2xvYmFsUHJvcGVydGllcyA9IGFwcENvbnRleHQuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMsIGhhc093bihnbG9iYWxQcm9wZXJ0aWVzLCBrZXkpXG4gICAgKSB7XG4gICAgICB7XG4gICAgICAgIHJldHVybiBnbG9iYWxQcm9wZXJ0aWVzW2tleV07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSAmJiAoIWlzU3RyaW5nKGtleSkgfHwgLy8gIzEwOTEgYXZvaWQgaW50ZXJuYWwgaXNSZWYvaXNWTm9kZSBjaGVja3Mgb24gY29tcG9uZW50IGluc3RhbmNlIGxlYWRpbmdcbiAgICAvLyB0byBpbmZpbml0ZSB3YXJuaW5nIGxvb3BcbiAgICBrZXkuaW5kZXhPZihcIl9fdlwiKSAhPT0gMCkpIHtcbiAgICAgIGlmIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaXNSZXNlcnZlZFByZWZpeChrZXlbMF0pICYmIGhhc093bihkYXRhLCBrZXkpKSB7XG4gICAgICAgIHdhcm4kMShcbiAgICAgICAgICBgUHJvcGVydHkgJHtKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICAgIGtleVxuICAgICAgICAgICl9IG11c3QgYmUgYWNjZXNzZWQgdmlhICRkYXRhIGJlY2F1c2UgaXQgc3RhcnRzIHdpdGggYSByZXNlcnZlZCBjaGFyYWN0ZXIgKFwiJFwiIG9yIFwiX1wiKSBhbmQgaXMgbm90IHByb3hpZWQgb24gdGhlIHJlbmRlciBjb250ZXh0LmBcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoaW5zdGFuY2UgPT09IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSkge1xuICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgYFByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoa2V5KX0gd2FzIGFjY2Vzc2VkIGR1cmluZyByZW5kZXIgYnV0IGlzIG5vdCBkZWZpbmVkIG9uIGluc3RhbmNlLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHNldCh7IF86IGluc3RhbmNlIH0sIGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCB7IGRhdGEsIHNldHVwU3RhdGUsIGN0eCB9ID0gaW5zdGFuY2U7XG4gICAgaWYgKGhhc1NldHVwQmluZGluZyhzZXR1cFN0YXRlLCBrZXkpKSB7XG4gICAgICBzZXR1cFN0YXRlW2tleV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBzZXR1cFN0YXRlLl9faXNTY3JpcHRTZXR1cCAmJiBoYXNPd24oc2V0dXBTdGF0ZSwga2V5KSkge1xuICAgICAgd2FybiQxKGBDYW5ub3QgbXV0YXRlIDxzY3JpcHQgc2V0dXA+IGJpbmRpbmcgXCIke2tleX1cIiBmcm9tIE9wdGlvbnMgQVBJLmApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoX19WVUVfT1BUSU9OU19BUElfXyAmJiBkYXRhICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcbiAgICAgIGRhdGFba2V5XSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChoYXNPd24oaW5zdGFuY2UucHJvcHMsIGtleSkpIHtcbiAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybiQxKGBBdHRlbXB0aW5nIHRvIG11dGF0ZSBwcm9wIFwiJHtrZXl9XCIuIFByb3BzIGFyZSByZWFkb25seS5gKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGtleVswXSA9PT0gXCIkXCIgJiYga2V5LnNsaWNlKDEpIGluIGluc3RhbmNlKSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4kMShcbiAgICAgICAgYEF0dGVtcHRpbmcgdG8gbXV0YXRlIHB1YmxpYyBwcm9wZXJ0eSBcIiR7a2V5fVwiLiBQcm9wZXJ0aWVzIHN0YXJ0aW5nIHdpdGggJCBhcmUgcmVzZXJ2ZWQgYW5kIHJlYWRvbmx5LmBcbiAgICAgICk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGtleSBpbiBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3R4W2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIGhhcyh7XG4gICAgXzogeyBkYXRhLCBzZXR1cFN0YXRlLCBhY2Nlc3NDYWNoZSwgY3R4LCBhcHBDb250ZXh0LCBwcm9wcywgdHlwZSB9XG4gIH0sIGtleSkge1xuICAgIGxldCBjc3NNb2R1bGVzO1xuICAgIHJldHVybiAhIShhY2Nlc3NDYWNoZVtrZXldIHx8IF9fVlVFX09QVElPTlNfQVBJX18gJiYgZGF0YSAhPT0gRU1QVFlfT0JKICYmIGtleVswXSAhPT0gXCIkXCIgJiYgaGFzT3duKGRhdGEsIGtleSkgfHwgaGFzU2V0dXBCaW5kaW5nKHNldHVwU3RhdGUsIGtleSkgfHwgaGFzT3duKHByb3BzLCBrZXkpIHx8IGhhc093bihjdHgsIGtleSkgfHwgaGFzT3duKHB1YmxpY1Byb3BlcnRpZXNNYXAsIGtleSkgfHwgaGFzT3duKGFwcENvbnRleHQuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMsIGtleSkgfHwgKGNzc01vZHVsZXMgPSB0eXBlLl9fY3NzTW9kdWxlcykgJiYgY3NzTW9kdWxlc1trZXldKTtcbiAgfSxcbiAgZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IpIHtcbiAgICBpZiAoZGVzY3JpcHRvci5nZXQgIT0gbnVsbCkge1xuICAgICAgdGFyZ2V0Ll8uYWNjZXNzQ2FjaGVba2V5XSA9IDA7XG4gICAgfSBlbHNlIGlmIChoYXNPd24oZGVzY3JpcHRvciwgXCJ2YWx1ZVwiKSkge1xuICAgICAgdGhpcy5zZXQodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IudmFsdWUsIG51bGwpO1xuICAgIH1cbiAgICByZXR1cm4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn07XG5pZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB0cnVlKSB7XG4gIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycy5vd25LZXlzID0gKHRhcmdldCkgPT4ge1xuICAgIHdhcm4kMShcbiAgICAgIGBBdm9pZCBhcHAgbG9naWMgdGhhdCByZWxpZXMgb24gZW51bWVyYXRpbmcga2V5cyBvbiBhIGNvbXBvbmVudCBpbnN0YW5jZS4gVGhlIGtleXMgd2lsbCBiZSBlbXB0eSBpbiBwcm9kdWN0aW9uIG1vZGUgdG8gYXZvaWQgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQuYFxuICAgICk7XG4gICAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyh0YXJnZXQpO1xuICB9O1xufVxuY29uc3QgUnVudGltZUNvbXBpbGVkUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzID0gLyogQF9fUFVSRV9fICovIGV4dGVuZCh7fSwgUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzLCB7XG4gIGdldCh0YXJnZXQsIGtleSkge1xuICAgIGlmIChrZXkgPT09IFN5bWJvbC51bnNjb3BhYmxlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzLmdldCh0YXJnZXQsIGtleSwgdGFyZ2V0KTtcbiAgfSxcbiAgaGFzKF8sIGtleSkge1xuICAgIGNvbnN0IGhhcyA9IGtleVswXSAhPT0gXCJfXCIgJiYgIWlzR2xvYmFsbHlBbGxvd2VkKGtleSk7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWhhcyAmJiBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMuaGFzKF8sIGtleSkpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYFByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAga2V5XG4gICAgICAgICl9IHNob3VsZCBub3Qgc3RhcnQgd2l0aCBfIHdoaWNoIGlzIGEgcmVzZXJ2ZWQgcHJlZml4IGZvciBWdWUgaW50ZXJuYWxzLmBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBoYXM7XG4gIH1cbn0pO1xuZnVuY3Rpb24gY3JlYXRlRGV2UmVuZGVyQ29udGV4dChpbnN0YW5jZSkge1xuICBjb25zdCB0YXJnZXQgPSB7fTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgYF9gLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGdldDogKCkgPT4gaW5zdGFuY2VcbiAgfSk7XG4gIE9iamVjdC5rZXlzKHB1YmxpY1Byb3BlcnRpZXNNYXApLmZvckVhY2goKGtleSkgPT4ge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBnZXQ6ICgpID0+IHB1YmxpY1Byb3BlcnRpZXNNYXBba2V5XShpbnN0YW5jZSksXG4gICAgICAvLyBpbnRlcmNlcHRlZCBieSB0aGUgcHJveHkgc28gbm8gbmVlZCBmb3IgaW1wbGVtZW50YXRpb24sXG4gICAgICAvLyBidXQgbmVlZGVkIHRvIHByZXZlbnQgc2V0IGVycm9yc1xuICAgICAgc2V0OiBOT09QXG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gZXhwb3NlUHJvcHNPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgY29uc3Qge1xuICAgIGN0eCxcbiAgICBwcm9wc09wdGlvbnM6IFtwcm9wc09wdGlvbnNdXG4gIH0gPSBpbnN0YW5jZTtcbiAgaWYgKHByb3BzT3B0aW9ucykge1xuICAgIE9iamVjdC5rZXlzKHByb3BzT3B0aW9ucykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IGluc3RhbmNlLnByb3BzW2tleV0sXG4gICAgICAgIHNldDogTk9PUFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGV4cG9zZVNldHVwU3RhdGVPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgY29uc3QgeyBjdHgsIHNldHVwU3RhdGUgfSA9IGluc3RhbmNlO1xuICBPYmplY3Qua2V5cyh0b1JhdyhzZXR1cFN0YXRlKSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgaWYgKCFzZXR1cFN0YXRlLl9faXNTY3JpcHRTZXR1cCkge1xuICAgICAgaWYgKGlzUmVzZXJ2ZWRQcmVmaXgoa2V5WzBdKSkge1xuICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgYHNldHVwKCkgcmV0dXJuIHByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgICApfSBzaG91bGQgbm90IHN0YXJ0IHdpdGggXCIkXCIgb3IgXCJfXCIgd2hpY2ggYXJlIHJlc2VydmVkIHByZWZpeGVzIGZvciBWdWUgaW50ZXJuYWxzLmBcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiAoKSA9PiBzZXR1cFN0YXRlW2tleV0sXG4gICAgICAgIHNldDogTk9PUFxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuY29uc3Qgd2FyblJ1bnRpbWVVc2FnZSA9IChtZXRob2QpID0+IHdhcm4kMShcbiAgYCR7bWV0aG9kfSgpIGlzIGEgY29tcGlsZXItaGludCBoZWxwZXIgdGhhdCBpcyBvbmx5IHVzYWJsZSBpbnNpZGUgPHNjcmlwdCBzZXR1cD4gb2YgYSBzaW5nbGUgZmlsZSBjb21wb25lbnQuIEl0cyBhcmd1bWVudHMgc2hvdWxkIGJlIGNvbXBpbGVkIGF3YXkgYW5kIHBhc3NpbmcgaXQgYXQgcnVudGltZSBoYXMgbm8gZWZmZWN0LmBcbik7XG5mdW5jdGlvbiBkZWZpbmVQcm9wcygpIHtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuUnVudGltZVVzYWdlKGBkZWZpbmVQcm9wc2ApO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZGVmaW5lRW1pdHMoKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lRW1pdHNgKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGRlZmluZUV4cG9zZShleHBvc2VkKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lRXhwb3NlYCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlZmluZU9wdGlvbnMob3B0aW9ucykge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm5SdW50aW1lVXNhZ2UoYGRlZmluZU9wdGlvbnNgKTtcbiAgfVxufVxuZnVuY3Rpb24gZGVmaW5lU2xvdHMoKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lU2xvdHNgKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGRlZmluZU1vZGVsKCkge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm5SdW50aW1lVXNhZ2UoXCJkZWZpbmVNb2RlbFwiKTtcbiAgfVxufVxuZnVuY3Rpb24gd2l0aERlZmF1bHRzKHByb3BzLCBkZWZhdWx0cykge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm5SdW50aW1lVXNhZ2UoYHdpdGhEZWZhdWx0c2ApO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gdXNlU2xvdHMoKSB7XG4gIHJldHVybiBnZXRDb250ZXh0KFwidXNlU2xvdHNcIikuc2xvdHM7XG59XG5mdW5jdGlvbiB1c2VBdHRycygpIHtcbiAgcmV0dXJuIGdldENvbnRleHQoXCJ1c2VBdHRyc1wiKS5hdHRycztcbn1cbmZ1bmN0aW9uIGdldENvbnRleHQoY2FsbGVkRnVuY3Rpb25OYW1lKSB7XG4gIGNvbnN0IGkgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWkpIHtcbiAgICB3YXJuJDEoYCR7Y2FsbGVkRnVuY3Rpb25OYW1lfSgpIGNhbGxlZCB3aXRob3V0IGFjdGl2ZSBpbnN0YW5jZS5gKTtcbiAgfVxuICByZXR1cm4gaS5zZXR1cENvbnRleHQgfHwgKGkuc2V0dXBDb250ZXh0ID0gY3JlYXRlU2V0dXBDb250ZXh0KGkpKTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZVByb3BzT3JFbWl0cyhwcm9wcykge1xuICByZXR1cm4gaXNBcnJheShwcm9wcykgPyBwcm9wcy5yZWR1Y2UoXG4gICAgKG5vcm1hbGl6ZWQsIHApID0+IChub3JtYWxpemVkW3BdID0gbnVsbCwgbm9ybWFsaXplZCksXG4gICAge31cbiAgKSA6IHByb3BzO1xufVxuZnVuY3Rpb24gbWVyZ2VEZWZhdWx0cyhyYXcsIGRlZmF1bHRzKSB7XG4gIGNvbnN0IHByb3BzID0gbm9ybWFsaXplUHJvcHNPckVtaXRzKHJhdyk7XG4gIGZvciAoY29uc3Qga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgaWYgKGtleS5zdGFydHNXaXRoKFwiX19za2lwXCIpKSBjb250aW51ZTtcbiAgICBsZXQgb3B0ID0gcHJvcHNba2V5XTtcbiAgICBpZiAob3B0KSB7XG4gICAgICBpZiAoaXNBcnJheShvcHQpIHx8IGlzRnVuY3Rpb24ob3B0KSkge1xuICAgICAgICBvcHQgPSBwcm9wc1trZXldID0geyB0eXBlOiBvcHQsIGRlZmF1bHQ6IGRlZmF1bHRzW2tleV0gfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdC5kZWZhdWx0ID0gZGVmYXVsdHNba2V5XTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9wdCA9PT0gbnVsbCkge1xuICAgICAgb3B0ID0gcHJvcHNba2V5XSA9IHsgZGVmYXVsdDogZGVmYXVsdHNba2V5XSB9O1xuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybiQxKGBwcm9wcyBkZWZhdWx0IGtleSBcIiR7a2V5fVwiIGhhcyBubyBjb3JyZXNwb25kaW5nIGRlY2xhcmF0aW9uLmApO1xuICAgIH1cbiAgICBpZiAob3B0ICYmIGRlZmF1bHRzW2BfX3NraXBfJHtrZXl9YF0pIHtcbiAgICAgIG9wdC5za2lwRmFjdG9yeSA9IHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBwcm9wcztcbn1cbmZ1bmN0aW9uIG1lcmdlTW9kZWxzKGEsIGIpIHtcbiAgaWYgKCFhIHx8ICFiKSByZXR1cm4gYSB8fCBiO1xuICBpZiAoaXNBcnJheShhKSAmJiBpc0FycmF5KGIpKSByZXR1cm4gYS5jb25jYXQoYik7XG4gIHJldHVybiBleHRlbmQoe30sIG5vcm1hbGl6ZVByb3BzT3JFbWl0cyhhKSwgbm9ybWFsaXplUHJvcHNPckVtaXRzKGIpKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVByb3BzUmVzdFByb3h5KHByb3BzLCBleGNsdWRlZEtleXMpIHtcbiAgY29uc3QgcmV0ID0ge307XG4gIGZvciAoY29uc3Qga2V5IGluIHByb3BzKSB7XG4gICAgaWYgKCFleGNsdWRlZEtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJldCwga2V5LCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogKCkgPT4gcHJvcHNba2V5XVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXQ7XG59XG5mdW5jdGlvbiB3aXRoQXN5bmNDb250ZXh0KGdldEF3YWl0YWJsZSkge1xuICBjb25zdCBjdHggPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWN0eCkge1xuICAgIHdhcm4kMShcbiAgICAgIGB3aXRoQXN5bmNDb250ZXh0IGNhbGxlZCB3aXRob3V0IGFjdGl2ZSBjdXJyZW50IGluc3RhbmNlLiBUaGlzIGlzIGxpa2VseSBhIGJ1Zy5gXG4gICAgKTtcbiAgfVxuICBsZXQgYXdhaXRhYmxlID0gZ2V0QXdhaXRhYmxlKCk7XG4gIHVuc2V0Q3VycmVudEluc3RhbmNlKCk7XG4gIGlmIChpc1Byb21pc2UoYXdhaXRhYmxlKSkge1xuICAgIGF3YWl0YWJsZSA9IGF3YWl0YWJsZS5jYXRjaCgoZSkgPT4ge1xuICAgICAgc2V0Q3VycmVudEluc3RhbmNlKGN0eCk7XG4gICAgICB0aHJvdyBlO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBbYXdhaXRhYmxlLCAoKSA9PiBzZXRDdXJyZW50SW5zdGFuY2UoY3R4KV07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUR1cGxpY2F0ZUNoZWNrZXIoKSB7XG4gIGNvbnN0IGNhY2hlID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHJldHVybiAodHlwZSwga2V5KSA9PiB7XG4gICAgaWYgKGNhY2hlW2tleV0pIHtcbiAgICAgIHdhcm4kMShgJHt0eXBlfSBwcm9wZXJ0eSBcIiR7a2V5fVwiIGlzIGFscmVhZHkgZGVmaW5lZCBpbiAke2NhY2hlW2tleV19LmApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWNoZVtrZXldID0gdHlwZTtcbiAgICB9XG4gIH07XG59XG5sZXQgc2hvdWxkQ2FjaGVBY2Nlc3MgPSB0cnVlO1xuZnVuY3Rpb24gYXBwbHlPcHRpb25zKGluc3RhbmNlKSB7XG4gIGNvbnN0IG9wdGlvbnMgPSByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpbnN0YW5jZSk7XG4gIGNvbnN0IHB1YmxpY1RoaXMgPSBpbnN0YW5jZS5wcm94eTtcbiAgY29uc3QgY3R4ID0gaW5zdGFuY2UuY3R4O1xuICBzaG91bGRDYWNoZUFjY2VzcyA9IGZhbHNlO1xuICBpZiAob3B0aW9ucy5iZWZvcmVDcmVhdGUpIHtcbiAgICBjYWxsSG9vayhvcHRpb25zLmJlZm9yZUNyZWF0ZSwgaW5zdGFuY2UsIFwiYmNcIik7XG4gIH1cbiAgY29uc3Qge1xuICAgIC8vIHN0YXRlXG4gICAgZGF0YTogZGF0YU9wdGlvbnMsXG4gICAgY29tcHV0ZWQ6IGNvbXB1dGVkT3B0aW9ucyxcbiAgICBtZXRob2RzLFxuICAgIHdhdGNoOiB3YXRjaE9wdGlvbnMsXG4gICAgcHJvdmlkZTogcHJvdmlkZU9wdGlvbnMsXG4gICAgaW5qZWN0OiBpbmplY3RPcHRpb25zLFxuICAgIC8vIGxpZmVjeWNsZVxuICAgIGNyZWF0ZWQsXG4gICAgYmVmb3JlTW91bnQsXG4gICAgbW91bnRlZCxcbiAgICBiZWZvcmVVcGRhdGUsXG4gICAgdXBkYXRlZCxcbiAgICBhY3RpdmF0ZWQsXG4gICAgZGVhY3RpdmF0ZWQsXG4gICAgYmVmb3JlRGVzdHJveSxcbiAgICBiZWZvcmVVbm1vdW50LFxuICAgIGRlc3Ryb3llZCxcbiAgICB1bm1vdW50ZWQsXG4gICAgcmVuZGVyLFxuICAgIHJlbmRlclRyYWNrZWQsXG4gICAgcmVuZGVyVHJpZ2dlcmVkLFxuICAgIGVycm9yQ2FwdHVyZWQsXG4gICAgc2VydmVyUHJlZmV0Y2gsXG4gICAgLy8gcHVibGljIEFQSVxuICAgIGV4cG9zZSxcbiAgICBpbmhlcml0QXR0cnMsXG4gICAgLy8gYXNzZXRzXG4gICAgY29tcG9uZW50cyxcbiAgICBkaXJlY3RpdmVzLFxuICAgIGZpbHRlcnNcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBjcmVhdGVEdXBsaWNhdGVDaGVja2VyKCkgOiBudWxsO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGNvbnN0IFtwcm9wc09wdGlvbnNdID0gaW5zdGFuY2UucHJvcHNPcHRpb25zO1xuICAgIGlmIChwcm9wc09wdGlvbnMpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzT3B0aW9ucykge1xuICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJQcm9wc1wiIC8qIFBST1BTICovLCBrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoaW5qZWN0T3B0aW9ucykge1xuICAgIHJlc29sdmVJbmplY3Rpb25zKGluamVjdE9wdGlvbnMsIGN0eCwgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKTtcbiAgfVxuICBpZiAobWV0aG9kcykge1xuICAgIGZvciAoY29uc3Qga2V5IGluIG1ldGhvZHMpIHtcbiAgICAgIGNvbnN0IG1ldGhvZEhhbmRsZXIgPSBtZXRob2RzW2tleV07XG4gICAgICBpZiAoaXNGdW5jdGlvbihtZXRob2RIYW5kbGVyKSkge1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICAgICAgdmFsdWU6IG1ldGhvZEhhbmRsZXIuYmluZChwdWJsaWNUaGlzKSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN0eFtrZXldID0gbWV0aG9kSGFuZGxlci5iaW5kKHB1YmxpY1RoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiTWV0aG9kc1wiIC8qIE1FVEhPRFMgKi8sIGtleSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgYE1ldGhvZCBcIiR7a2V5fVwiIGhhcyB0eXBlIFwiJHt0eXBlb2YgbWV0aG9kSGFuZGxlcn1cIiBpbiB0aGUgY29tcG9uZW50IGRlZmluaXRpb24uIERpZCB5b3UgcmVmZXJlbmNlIHRoZSBmdW5jdGlvbiBjb3JyZWN0bHk/YFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoZGF0YU9wdGlvbnMpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaXNGdW5jdGlvbihkYXRhT3B0aW9ucykpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYFRoZSBkYXRhIG9wdGlvbiBtdXN0IGJlIGEgZnVuY3Rpb24uIFBsYWluIG9iamVjdCB1c2FnZSBpcyBubyBsb25nZXIgc3VwcG9ydGVkLmBcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBkYXRhT3B0aW9ucy5jYWxsKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGlzUHJvbWlzZShkYXRhKSkge1xuICAgICAgd2FybiQxKFxuICAgICAgICBgZGF0YSgpIHJldHVybmVkIGEgUHJvbWlzZSAtIG5vdGUgZGF0YSgpIGNhbm5vdCBiZSBhc3luYzsgSWYgeW91IGludGVuZCB0byBwZXJmb3JtIGRhdGEgZmV0Y2hpbmcgYmVmb3JlIGNvbXBvbmVudCByZW5kZXJzLCB1c2UgYXN5bmMgc2V0dXAoKSArIDxTdXNwZW5zZT4uYFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCFpc09iamVjdChkYXRhKSkge1xuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuJDEoYGRhdGEoKSBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC5gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zdGFuY2UuZGF0YSA9IHJlYWN0aXZlKGRhdGEpO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyhcIkRhdGFcIiAvKiBEQVRBICovLCBrZXkpO1xuICAgICAgICAgIGlmICghaXNSZXNlcnZlZFByZWZpeChrZXlbMF0pKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICBnZXQ6ICgpID0+IGRhdGFba2V5XSxcbiAgICAgICAgICAgICAgc2V0OiBOT09QXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgc2hvdWxkQ2FjaGVBY2Nlc3MgPSB0cnVlO1xuICBpZiAoY29tcHV0ZWRPcHRpb25zKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gY29tcHV0ZWRPcHRpb25zKSB7XG4gICAgICBjb25zdCBvcHQgPSBjb21wdXRlZE9wdGlvbnNba2V5XTtcbiAgICAgIGNvbnN0IGdldCA9IGlzRnVuY3Rpb24ob3B0KSA/IG9wdC5iaW5kKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpIDogaXNGdW5jdGlvbihvcHQuZ2V0KSA/IG9wdC5nZXQuYmluZChwdWJsaWNUaGlzLCBwdWJsaWNUaGlzKSA6IE5PT1A7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBnZXQgPT09IE5PT1ApIHtcbiAgICAgICAgd2FybiQxKGBDb21wdXRlZCBwcm9wZXJ0eSBcIiR7a2V5fVwiIGhhcyBubyBnZXR0ZXIuYCk7XG4gICAgICB9XG4gICAgICBjb25zdCBzZXQgPSAhaXNGdW5jdGlvbihvcHQpICYmIGlzRnVuY3Rpb24ob3B0LnNldCkgPyBvcHQuc2V0LmJpbmQocHVibGljVGhpcykgOiAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gKCkgPT4ge1xuICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgYFdyaXRlIG9wZXJhdGlvbiBmYWlsZWQ6IGNvbXB1dGVkIHByb3BlcnR5IFwiJHtrZXl9XCIgaXMgcmVhZG9ubHkuYFxuICAgICAgICApO1xuICAgICAgfSA6IE5PT1A7XG4gICAgICBjb25zdCBjID0gY29tcHV0ZWQoe1xuICAgICAgICBnZXQsXG4gICAgICAgIHNldFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IGMudmFsdWUsXG4gICAgICAgIHNldDogKHYpID0+IGMudmFsdWUgPSB2XG4gICAgICB9KTtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyhcIkNvbXB1dGVkXCIgLyogQ09NUFVURUQgKi8sIGtleSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmICh3YXRjaE9wdGlvbnMpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB3YXRjaE9wdGlvbnMpIHtcbiAgICAgIGNyZWF0ZVdhdGNoZXIod2F0Y2hPcHRpb25zW2tleV0sIGN0eCwgcHVibGljVGhpcywga2V5KTtcbiAgICB9XG4gIH1cbiAgaWYgKHByb3ZpZGVPcHRpb25zKSB7XG4gICAgY29uc3QgcHJvdmlkZXMgPSBpc0Z1bmN0aW9uKHByb3ZpZGVPcHRpb25zKSA/IHByb3ZpZGVPcHRpb25zLmNhbGwocHVibGljVGhpcykgOiBwcm92aWRlT3B0aW9ucztcbiAgICBSZWZsZWN0Lm93bktleXMocHJvdmlkZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgcHJvdmlkZShrZXksIHByb3ZpZGVzW2tleV0pO1xuICAgIH0pO1xuICB9XG4gIGlmIChjcmVhdGVkKSB7XG4gICAgY2FsbEhvb2soY3JlYXRlZCwgaW5zdGFuY2UsIFwiY1wiKTtcbiAgfVxuICBmdW5jdGlvbiByZWdpc3RlckxpZmVjeWNsZUhvb2socmVnaXN0ZXIsIGhvb2spIHtcbiAgICBpZiAoaXNBcnJheShob29rKSkge1xuICAgICAgaG9vay5mb3JFYWNoKChfaG9vaykgPT4gcmVnaXN0ZXIoX2hvb2suYmluZChwdWJsaWNUaGlzKSkpO1xuICAgIH0gZWxzZSBpZiAoaG9vaykge1xuICAgICAgcmVnaXN0ZXIoaG9vay5iaW5kKHB1YmxpY1RoaXMpKTtcbiAgICB9XG4gIH1cbiAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uQmVmb3JlTW91bnQsIGJlZm9yZU1vdW50KTtcbiAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uTW91bnRlZCwgbW91bnRlZCk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkJlZm9yZVVwZGF0ZSwgYmVmb3JlVXBkYXRlKTtcbiAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uVXBkYXRlZCwgdXBkYXRlZCk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkFjdGl2YXRlZCwgYWN0aXZhdGVkKTtcbiAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uRGVhY3RpdmF0ZWQsIGRlYWN0aXZhdGVkKTtcbiAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uRXJyb3JDYXB0dXJlZCwgZXJyb3JDYXB0dXJlZCk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvblJlbmRlclRyYWNrZWQsIHJlbmRlclRyYWNrZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25SZW5kZXJUcmlnZ2VyZWQsIHJlbmRlclRyaWdnZXJlZCk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkJlZm9yZVVubW91bnQsIGJlZm9yZVVubW91bnQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25Vbm1vdW50ZWQsIHVubW91bnRlZCk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvblNlcnZlclByZWZldGNoLCBzZXJ2ZXJQcmVmZXRjaCk7XG4gIGlmIChpc0FycmF5KGV4cG9zZSkpIHtcbiAgICBpZiAoZXhwb3NlLmxlbmd0aCkge1xuICAgICAgY29uc3QgZXhwb3NlZCA9IGluc3RhbmNlLmV4cG9zZWQgfHwgKGluc3RhbmNlLmV4cG9zZWQgPSB7fSk7XG4gICAgICBleHBvc2UuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvc2VkLCBrZXksIHtcbiAgICAgICAgICBnZXQ6ICgpID0+IHB1YmxpY1RoaXNba2V5XSxcbiAgICAgICAgICBzZXQ6ICh2YWwpID0+IHB1YmxpY1RoaXNba2V5XSA9IHZhbCxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICghaW5zdGFuY2UuZXhwb3NlZCkge1xuICAgICAgaW5zdGFuY2UuZXhwb3NlZCA9IHt9O1xuICAgIH1cbiAgfVxuICBpZiAocmVuZGVyICYmIGluc3RhbmNlLnJlbmRlciA9PT0gTk9PUCkge1xuICAgIGluc3RhbmNlLnJlbmRlciA9IHJlbmRlcjtcbiAgfVxuICBpZiAoaW5oZXJpdEF0dHJzICE9IG51bGwpIHtcbiAgICBpbnN0YW5jZS5pbmhlcml0QXR0cnMgPSBpbmhlcml0QXR0cnM7XG4gIH1cbiAgaWYgKGNvbXBvbmVudHMpIGluc3RhbmNlLmNvbXBvbmVudHMgPSBjb21wb25lbnRzO1xuICBpZiAoZGlyZWN0aXZlcykgaW5zdGFuY2UuZGlyZWN0aXZlcyA9IGRpcmVjdGl2ZXM7XG4gIGlmIChzZXJ2ZXJQcmVmZXRjaCkge1xuICAgIG1hcmtBc3luY0JvdW5kYXJ5KGluc3RhbmNlKTtcbiAgfVxufVxuZnVuY3Rpb24gcmVzb2x2ZUluamVjdGlvbnMoaW5qZWN0T3B0aW9ucywgY3R4LCBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMgPSBOT09QKSB7XG4gIGlmIChpc0FycmF5KGluamVjdE9wdGlvbnMpKSB7XG4gICAgaW5qZWN0T3B0aW9ucyA9IG5vcm1hbGl6ZUluamVjdChpbmplY3RPcHRpb25zKTtcbiAgfVxuICBmb3IgKGNvbnN0IGtleSBpbiBpbmplY3RPcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0ID0gaW5qZWN0T3B0aW9uc1trZXldO1xuICAgIGxldCBpbmplY3RlZDtcbiAgICBpZiAoaXNPYmplY3Qob3B0KSkge1xuICAgICAgaWYgKFwiZGVmYXVsdFwiIGluIG9wdCkge1xuICAgICAgICBpbmplY3RlZCA9IGluamVjdChcbiAgICAgICAgICBvcHQuZnJvbSB8fCBrZXksXG4gICAgICAgICAgb3B0LmRlZmF1bHQsXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5qZWN0ZWQgPSBpbmplY3Qob3B0LmZyb20gfHwga2V5KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaW5qZWN0ZWQgPSBpbmplY3Qob3B0KTtcbiAgICB9XG4gICAgaWYgKGlzUmVmKGluamVjdGVkKSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiAoKSA9PiBpbmplY3RlZC52YWx1ZSxcbiAgICAgICAgc2V0OiAodikgPT4gaW5qZWN0ZWQudmFsdWUgPSB2XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4W2tleV0gPSBpbmplY3RlZDtcbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyhcIkluamVjdFwiIC8qIElOSkVDVCAqLywga2V5KTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGNhbGxIb29rKGhvb2ssIGluc3RhbmNlLCB0eXBlKSB7XG4gIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKFxuICAgIGlzQXJyYXkoaG9vaykgPyBob29rLm1hcCgoaCkgPT4gaC5iaW5kKGluc3RhbmNlLnByb3h5KSkgOiBob29rLmJpbmQoaW5zdGFuY2UucHJveHkpLFxuICAgIGluc3RhbmNlLFxuICAgIHR5cGVcbiAgKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVdhdGNoZXIocmF3LCBjdHgsIHB1YmxpY1RoaXMsIGtleSkge1xuICBsZXQgZ2V0dGVyID0ga2V5LmluY2x1ZGVzKFwiLlwiKSA/IGNyZWF0ZVBhdGhHZXR0ZXIocHVibGljVGhpcywga2V5KSA6ICgpID0+IHB1YmxpY1RoaXNba2V5XTtcbiAgaWYgKGlzU3RyaW5nKHJhdykpIHtcbiAgICBjb25zdCBoYW5kbGVyID0gY3R4W3Jhd107XG4gICAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgIHtcbiAgICAgICAgd2F0Y2goZ2V0dGVyLCBoYW5kbGVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHdhcm4kMShgSW52YWxpZCB3YXRjaCBoYW5kbGVyIHNwZWNpZmllZCBieSBrZXkgXCIke3Jhd31cImAsIGhhbmRsZXIpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHJhdykpIHtcbiAgICB7XG4gICAgICB3YXRjaChnZXR0ZXIsIHJhdy5iaW5kKHB1YmxpY1RoaXMpKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QocmF3KSkge1xuICAgIGlmIChpc0FycmF5KHJhdykpIHtcbiAgICAgIHJhdy5mb3JFYWNoKChyKSA9PiBjcmVhdGVXYXRjaGVyKHIsIGN0eCwgcHVibGljVGhpcywga2V5KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGhhbmRsZXIgPSBpc0Z1bmN0aW9uKHJhdy5oYW5kbGVyKSA/IHJhdy5oYW5kbGVyLmJpbmQocHVibGljVGhpcykgOiBjdHhbcmF3LmhhbmRsZXJdO1xuICAgICAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgICAgd2F0Y2goZ2V0dGVyLCBoYW5kbGVyLCByYXcpO1xuICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgIHdhcm4kMShgSW52YWxpZCB3YXRjaCBoYW5kbGVyIHNwZWNpZmllZCBieSBrZXkgXCIke3Jhdy5oYW5kbGVyfVwiYCwgaGFuZGxlcik7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuJDEoYEludmFsaWQgd2F0Y2ggb3B0aW9uOiBcIiR7a2V5fVwiYCwgcmF3KTtcbiAgfVxufVxuZnVuY3Rpb24gcmVzb2x2ZU1lcmdlZE9wdGlvbnMoaW5zdGFuY2UpIHtcbiAgY29uc3QgYmFzZSA9IGluc3RhbmNlLnR5cGU7XG4gIGNvbnN0IHsgbWl4aW5zLCBleHRlbmRzOiBleHRlbmRzT3B0aW9ucyB9ID0gYmFzZTtcbiAgY29uc3Qge1xuICAgIG1peGluczogZ2xvYmFsTWl4aW5zLFxuICAgIG9wdGlvbnNDYWNoZTogY2FjaGUsXG4gICAgY29uZmlnOiB7IG9wdGlvbk1lcmdlU3RyYXRlZ2llcyB9XG4gIH0gPSBpbnN0YW5jZS5hcHBDb250ZXh0O1xuICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoYmFzZSk7XG4gIGxldCByZXNvbHZlZDtcbiAgaWYgKGNhY2hlZCkge1xuICAgIHJlc29sdmVkID0gY2FjaGVkO1xuICB9IGVsc2UgaWYgKCFnbG9iYWxNaXhpbnMubGVuZ3RoICYmICFtaXhpbnMgJiYgIWV4dGVuZHNPcHRpb25zKSB7XG4gICAge1xuICAgICAgcmVzb2x2ZWQgPSBiYXNlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXNvbHZlZCA9IHt9O1xuICAgIGlmIChnbG9iYWxNaXhpbnMubGVuZ3RoKSB7XG4gICAgICBnbG9iYWxNaXhpbnMuZm9yRWFjaChcbiAgICAgICAgKG0pID0+IG1lcmdlT3B0aW9ucyhyZXNvbHZlZCwgbSwgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzLCB0cnVlKVxuICAgICAgKTtcbiAgICB9XG4gICAgbWVyZ2VPcHRpb25zKHJlc29sdmVkLCBiYXNlLCBvcHRpb25NZXJnZVN0cmF0ZWdpZXMpO1xuICB9XG4gIGlmIChpc09iamVjdChiYXNlKSkge1xuICAgIGNhY2hlLnNldChiYXNlLCByZXNvbHZlZCk7XG4gIH1cbiAgcmV0dXJuIHJlc29sdmVkO1xufVxuZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHRvLCBmcm9tLCBzdHJhdHMsIGFzTWl4aW4gPSBmYWxzZSkge1xuICBjb25zdCB7IG1peGlucywgZXh0ZW5kczogZXh0ZW5kc09wdGlvbnMgfSA9IGZyb207XG4gIGlmIChleHRlbmRzT3B0aW9ucykge1xuICAgIG1lcmdlT3B0aW9ucyh0bywgZXh0ZW5kc09wdGlvbnMsIHN0cmF0cywgdHJ1ZSk7XG4gIH1cbiAgaWYgKG1peGlucykge1xuICAgIG1peGlucy5mb3JFYWNoKFxuICAgICAgKG0pID0+IG1lcmdlT3B0aW9ucyh0bywgbSwgc3RyYXRzLCB0cnVlKVxuICAgICk7XG4gIH1cbiAgZm9yIChjb25zdCBrZXkgaW4gZnJvbSkge1xuICAgIGlmIChhc01peGluICYmIGtleSA9PT0gXCJleHBvc2VcIikge1xuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuJDEoXG4gICAgICAgIGBcImV4cG9zZVwiIG9wdGlvbiBpcyBpZ25vcmVkIHdoZW4gZGVjbGFyZWQgaW4gbWl4aW5zIG9yIGV4dGVuZHMuIEl0IHNob3VsZCBvbmx5IGJlIGRlY2xhcmVkIGluIHRoZSBiYXNlIGNvbXBvbmVudCBpdHNlbGYuYFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3RyYXQgPSBpbnRlcm5hbE9wdGlvbk1lcmdlU3RyYXRzW2tleV0gfHwgc3RyYXRzICYmIHN0cmF0c1trZXldO1xuICAgICAgdG9ba2V5XSA9IHN0cmF0ID8gc3RyYXQodG9ba2V5XSwgZnJvbVtrZXldKSA6IGZyb21ba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRvO1xufVxuY29uc3QgaW50ZXJuYWxPcHRpb25NZXJnZVN0cmF0cyA9IHtcbiAgZGF0YTogbWVyZ2VEYXRhRm4sXG4gIHByb3BzOiBtZXJnZUVtaXRzT3JQcm9wc09wdGlvbnMsXG4gIGVtaXRzOiBtZXJnZUVtaXRzT3JQcm9wc09wdGlvbnMsXG4gIC8vIG9iamVjdHNcbiAgbWV0aG9kczogbWVyZ2VPYmplY3RPcHRpb25zLFxuICBjb21wdXRlZDogbWVyZ2VPYmplY3RPcHRpb25zLFxuICAvLyBsaWZlY3ljbGVcbiAgYmVmb3JlQ3JlYXRlOiBtZXJnZUFzQXJyYXksXG4gIGNyZWF0ZWQ6IG1lcmdlQXNBcnJheSxcbiAgYmVmb3JlTW91bnQ6IG1lcmdlQXNBcnJheSxcbiAgbW91bnRlZDogbWVyZ2VBc0FycmF5LFxuICBiZWZvcmVVcGRhdGU6IG1lcmdlQXNBcnJheSxcbiAgdXBkYXRlZDogbWVyZ2VBc0FycmF5LFxuICBiZWZvcmVEZXN0cm95OiBtZXJnZUFzQXJyYXksXG4gIGJlZm9yZVVubW91bnQ6IG1lcmdlQXNBcnJheSxcbiAgZGVzdHJveWVkOiBtZXJnZUFzQXJyYXksXG4gIHVubW91bnRlZDogbWVyZ2VBc0FycmF5LFxuICBhY3RpdmF0ZWQ6IG1lcmdlQXNBcnJheSxcbiAgZGVhY3RpdmF0ZWQ6IG1lcmdlQXNBcnJheSxcbiAgZXJyb3JDYXB0dXJlZDogbWVyZ2VBc0FycmF5LFxuICBzZXJ2ZXJQcmVmZXRjaDogbWVyZ2VBc0FycmF5LFxuICAvLyBhc3NldHNcbiAgY29tcG9uZW50czogbWVyZ2VPYmplY3RPcHRpb25zLFxuICBkaXJlY3RpdmVzOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gIC8vIHdhdGNoXG4gIHdhdGNoOiBtZXJnZVdhdGNoT3B0aW9ucyxcbiAgLy8gcHJvdmlkZSAvIGluamVjdFxuICBwcm92aWRlOiBtZXJnZURhdGFGbixcbiAgaW5qZWN0OiBtZXJnZUluamVjdFxufTtcbmZ1bmN0aW9uIG1lcmdlRGF0YUZuKHRvLCBmcm9tKSB7XG4gIGlmICghZnJvbSkge1xuICAgIHJldHVybiB0bztcbiAgfVxuICBpZiAoIXRvKSB7XG4gICAgcmV0dXJuIGZyb207XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbigpIHtcbiAgICByZXR1cm4gKGV4dGVuZCkoXG4gICAgICBpc0Z1bmN0aW9uKHRvKSA/IHRvLmNhbGwodGhpcywgdGhpcykgOiB0byxcbiAgICAgIGlzRnVuY3Rpb24oZnJvbSkgPyBmcm9tLmNhbGwodGhpcywgdGhpcykgOiBmcm9tXG4gICAgKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIG1lcmdlSW5qZWN0KHRvLCBmcm9tKSB7XG4gIHJldHVybiBtZXJnZU9iamVjdE9wdGlvbnMobm9ybWFsaXplSW5qZWN0KHRvKSwgbm9ybWFsaXplSW5qZWN0KGZyb20pKTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUluamVjdChyYXcpIHtcbiAgaWYgKGlzQXJyYXkocmF3KSkge1xuICAgIGNvbnN0IHJlcyA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmF3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICByZXNbcmF3W2ldXSA9IHJhd1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuICByZXR1cm4gcmF3O1xufVxuZnVuY3Rpb24gbWVyZ2VBc0FycmF5KHRvLCBmcm9tKSB7XG4gIHJldHVybiB0byA/IFsuLi5uZXcgU2V0KFtdLmNvbmNhdCh0bywgZnJvbSkpXSA6IGZyb207XG59XG5mdW5jdGlvbiBtZXJnZU9iamVjdE9wdGlvbnModG8sIGZyb20pIHtcbiAgcmV0dXJuIHRvID8gZXh0ZW5kKC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLCB0bywgZnJvbSkgOiBmcm9tO1xufVxuZnVuY3Rpb24gbWVyZ2VFbWl0c09yUHJvcHNPcHRpb25zKHRvLCBmcm9tKSB7XG4gIGlmICh0bykge1xuICAgIGlmIChpc0FycmF5KHRvKSAmJiBpc0FycmF5KGZyb20pKSB7XG4gICAgICByZXR1cm4gWy4uLi8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFsuLi50bywgLi4uZnJvbV0pXTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVuZChcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAgbm9ybWFsaXplUHJvcHNPckVtaXRzKHRvKSxcbiAgICAgIG5vcm1hbGl6ZVByb3BzT3JFbWl0cyhmcm9tICE9IG51bGwgPyBmcm9tIDoge30pXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZnJvbTtcbiAgfVxufVxuZnVuY3Rpb24gbWVyZ2VXYXRjaE9wdGlvbnModG8sIGZyb20pIHtcbiAgaWYgKCF0bykgcmV0dXJuIGZyb207XG4gIGlmICghZnJvbSkgcmV0dXJuIHRvO1xuICBjb25zdCBtZXJnZWQgPSBleHRlbmQoLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCksIHRvKTtcbiAgZm9yIChjb25zdCBrZXkgaW4gZnJvbSkge1xuICAgIG1lcmdlZFtrZXldID0gbWVyZ2VBc0FycmF5KHRvW2tleV0sIGZyb21ba2V5XSk7XG4gIH1cbiAgcmV0dXJuIG1lcmdlZDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQXBwQ29udGV4dCgpIHtcbiAgcmV0dXJuIHtcbiAgICBhcHA6IG51bGwsXG4gICAgY29uZmlnOiB7XG4gICAgICBpc05hdGl2ZVRhZzogTk8sXG4gICAgICBwZXJmb3JtYW5jZTogZmFsc2UsXG4gICAgICBnbG9iYWxQcm9wZXJ0aWVzOiB7fSxcbiAgICAgIG9wdGlvbk1lcmdlU3RyYXRlZ2llczoge30sXG4gICAgICBlcnJvckhhbmRsZXI6IHZvaWQgMCxcbiAgICAgIHdhcm5IYW5kbGVyOiB2b2lkIDAsXG4gICAgICBjb21waWxlck9wdGlvbnM6IHt9XG4gICAgfSxcbiAgICBtaXhpbnM6IFtdLFxuICAgIGNvbXBvbmVudHM6IHt9LFxuICAgIGRpcmVjdGl2ZXM6IHt9LFxuICAgIHByb3ZpZGVzOiAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICBvcHRpb25zQ2FjaGU6IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLFxuICAgIHByb3BzQ2FjaGU6IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLFxuICAgIGVtaXRzQ2FjaGU6IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpXG4gIH07XG59XG5sZXQgdWlkJDEgPSAwO1xuZnVuY3Rpb24gY3JlYXRlQXBwQVBJKHJlbmRlciwgaHlkcmF0ZSkge1xuICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlQXBwKHJvb3RDb21wb25lbnQsIHJvb3RQcm9wcyA9IG51bGwpIHtcbiAgICBpZiAoIWlzRnVuY3Rpb24ocm9vdENvbXBvbmVudCkpIHtcbiAgICAgIHJvb3RDb21wb25lbnQgPSBleHRlbmQoe30sIHJvb3RDb21wb25lbnQpO1xuICAgIH1cbiAgICBpZiAocm9vdFByb3BzICE9IG51bGwgJiYgIWlzT2JqZWN0KHJvb3RQcm9wcykpIHtcbiAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybiQxKGByb290IHByb3BzIHBhc3NlZCB0byBhcHAubW91bnQoKSBtdXN0IGJlIGFuIG9iamVjdC5gKTtcbiAgICAgIHJvb3RQcm9wcyA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVBcHBDb250ZXh0KCk7XG4gICAgY29uc3QgaW5zdGFsbGVkUGx1Z2lucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpO1xuICAgIGNvbnN0IHBsdWdpbkNsZWFudXBGbnMgPSBbXTtcbiAgICBsZXQgaXNNb3VudGVkID0gZmFsc2U7XG4gICAgY29uc3QgYXBwID0gY29udGV4dC5hcHAgPSB7XG4gICAgICBfdWlkOiB1aWQkMSsrLFxuICAgICAgX2NvbXBvbmVudDogcm9vdENvbXBvbmVudCxcbiAgICAgIF9wcm9wczogcm9vdFByb3BzLFxuICAgICAgX2NvbnRhaW5lcjogbnVsbCxcbiAgICAgIF9jb250ZXh0OiBjb250ZXh0LFxuICAgICAgX2luc3RhbmNlOiBudWxsLFxuICAgICAgdmVyc2lvbixcbiAgICAgIGdldCBjb25maWcoKSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0LmNvbmZpZztcbiAgICAgIH0sXG4gICAgICBzZXQgY29uZmlnKHYpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBgYXBwLmNvbmZpZyBjYW5ub3QgYmUgcmVwbGFjZWQuIE1vZGlmeSBpbmRpdmlkdWFsIG9wdGlvbnMgaW5zdGVhZC5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHVzZShwbHVnaW4sIC4uLm9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGluc3RhbGxlZFBsdWdpbnMuaGFzKHBsdWdpbikpIHtcbiAgICAgICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4kMShgUGx1Z2luIGhhcyBhbHJlYWR5IGJlZW4gYXBwbGllZCB0byB0YXJnZXQgYXBwLmApO1xuICAgICAgICB9IGVsc2UgaWYgKHBsdWdpbiAmJiBpc0Z1bmN0aW9uKHBsdWdpbi5pbnN0YWxsKSkge1xuICAgICAgICAgIGluc3RhbGxlZFBsdWdpbnMuYWRkKHBsdWdpbik7XG4gICAgICAgICAgcGx1Z2luLmluc3RhbGwoYXBwLCAuLi5vcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHBsdWdpbikpIHtcbiAgICAgICAgICBpbnN0YWxsZWRQbHVnaW5zLmFkZChwbHVnaW4pO1xuICAgICAgICAgIHBsdWdpbihhcHAsIC4uLm9wdGlvbnMpO1xuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBgQSBwbHVnaW4gbXVzdCBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhbiBvYmplY3Qgd2l0aCBhbiBcImluc3RhbGxcIiBmdW5jdGlvbi5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXBwO1xuICAgICAgfSxcbiAgICAgIG1peGluKG1peGluKSB7XG4gICAgICAgIGlmIChfX1ZVRV9PUFRJT05TX0FQSV9fKSB7XG4gICAgICAgICAgaWYgKCFjb250ZXh0Lm1peGlucy5pbmNsdWRlcyhtaXhpbikpIHtcbiAgICAgICAgICAgIGNvbnRleHQubWl4aW5zLnB1c2gobWl4aW4pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgICBcIk1peGluIGhhcyBhbHJlYWR5IGJlZW4gYXBwbGllZCB0byB0YXJnZXQgYXBwXCIgKyAobWl4aW4ubmFtZSA/IGA6ICR7bWl4aW4ubmFtZX1gIDogXCJcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICB3YXJuJDEoXCJNaXhpbnMgYXJlIG9ubHkgYXZhaWxhYmxlIGluIGJ1aWxkcyBzdXBwb3J0aW5nIE9wdGlvbnMgQVBJXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcHA7XG4gICAgICB9LFxuICAgICAgY29tcG9uZW50KG5hbWUsIGNvbXBvbmVudCkge1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShuYW1lLCBjb250ZXh0LmNvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm4gY29udGV4dC5jb21wb25lbnRzW25hbWVdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGNvbnRleHQuY29tcG9uZW50c1tuYW1lXSkge1xuICAgICAgICAgIHdhcm4kMShgQ29tcG9uZW50IFwiJHtuYW1lfVwiIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCBpbiB0YXJnZXQgYXBwLmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQuY29tcG9uZW50c1tuYW1lXSA9IGNvbXBvbmVudDtcbiAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgIH0sXG4gICAgICBkaXJlY3RpdmUobmFtZSwgZGlyZWN0aXZlKSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgdmFsaWRhdGVEaXJlY3RpdmVOYW1lKG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGlyZWN0aXZlKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlyZWN0aXZlc1tuYW1lXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBjb250ZXh0LmRpcmVjdGl2ZXNbbmFtZV0pIHtcbiAgICAgICAgICB3YXJuJDEoYERpcmVjdGl2ZSBcIiR7bmFtZX1cIiBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgaW4gdGFyZ2V0IGFwcC5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LmRpcmVjdGl2ZXNbbmFtZV0gPSBkaXJlY3RpdmU7XG4gICAgICAgIHJldHVybiBhcHA7XG4gICAgICB9LFxuICAgICAgbW91bnQocm9vdENvbnRhaW5lciwgaXNIeWRyYXRlLCBuYW1lc3BhY2UpIHtcbiAgICAgICAgaWYgKCFpc01vdW50ZWQpIHtcbiAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiByb290Q29udGFpbmVyLl9fdnVlX2FwcF9fKSB7XG4gICAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICAgIGBUaGVyZSBpcyBhbHJlYWR5IGFuIGFwcCBpbnN0YW5jZSBtb3VudGVkIG9uIHRoZSBob3N0IGNvbnRhaW5lci5cbiBJZiB5b3Ugd2FudCB0byBtb3VudCBhbm90aGVyIGFwcCBvbiB0aGUgc2FtZSBob3N0IGNvbnRhaW5lciwgeW91IG5lZWQgdG8gdW5tb3VudCB0aGUgcHJldmlvdXMgYXBwIGJ5IGNhbGxpbmcgXFxgYXBwLnVubW91bnQoKVxcYCBmaXJzdC5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB2bm9kZSA9IGFwcC5fY2VWTm9kZSB8fCBjcmVhdGVWTm9kZShyb290Q29tcG9uZW50LCByb290UHJvcHMpO1xuICAgICAgICAgIHZub2RlLmFwcENvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgIGlmIChuYW1lc3BhY2UgPT09IHRydWUpIHtcbiAgICAgICAgICAgIG5hbWVzcGFjZSA9IFwic3ZnXCI7XG4gICAgICAgICAgfSBlbHNlIGlmIChuYW1lc3BhY2UgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBuYW1lc3BhY2UgPSB2b2lkIDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBjb250ZXh0LnJlbG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgY2xvbmVkID0gY2xvbmVWTm9kZSh2bm9kZSk7XG4gICAgICAgICAgICAgIGNsb25lZC5lbCA9IG51bGw7XG4gICAgICAgICAgICAgIHJlbmRlcihjbG9uZWQsIHJvb3RDb250YWluZXIsIG5hbWVzcGFjZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNIeWRyYXRlICYmIGh5ZHJhdGUpIHtcbiAgICAgICAgICAgIGh5ZHJhdGUodm5vZGUsIHJvb3RDb250YWluZXIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW5kZXIodm5vZGUsIHJvb3RDb250YWluZXIsIG5hbWVzcGFjZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzTW91bnRlZCA9IHRydWU7XG4gICAgICAgICAgYXBwLl9jb250YWluZXIgPSByb290Q29udGFpbmVyO1xuICAgICAgICAgIHJvb3RDb250YWluZXIuX192dWVfYXBwX18gPSBhcHA7XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICBhcHAuX2luc3RhbmNlID0gdm5vZGUuY29tcG9uZW50O1xuICAgICAgICAgICAgZGV2dG9vbHNJbml0QXBwKGFwcCwgdmVyc2lvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBnZXRDb21wb25lbnRQdWJsaWNJbnN0YW5jZSh2bm9kZS5jb21wb25lbnQpO1xuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBgQXBwIGhhcyBhbHJlYWR5IGJlZW4gbW91bnRlZC5cbklmIHlvdSB3YW50IHRvIHJlbW91bnQgdGhlIHNhbWUgYXBwLCBtb3ZlIHlvdXIgYXBwIGNyZWF0aW9uIGxvZ2ljIGludG8gYSBmYWN0b3J5IGZ1bmN0aW9uIGFuZCBjcmVhdGUgZnJlc2ggYXBwIGluc3RhbmNlcyBmb3IgZWFjaCBtb3VudCAtIGUuZy4gXFxgY29uc3QgY3JlYXRlTXlBcHAgPSAoKSA9PiBjcmVhdGVBcHAoQXBwKVxcYGBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25Vbm1vdW50KGNsZWFudXBGbikge1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB0eXBlb2YgY2xlYW51cEZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBgRXhwZWN0ZWQgZnVuY3Rpb24gYXMgZmlyc3QgYXJndW1lbnQgdG8gYXBwLm9uVW5tb3VudCgpLCBidXQgZ290ICR7dHlwZW9mIGNsZWFudXBGbn1gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW5DbGVhbnVwRm5zLnB1c2goY2xlYW51cEZuKTtcbiAgICAgIH0sXG4gICAgICB1bm1vdW50KCkge1xuICAgICAgICBpZiAoaXNNb3VudGVkKSB7XG4gICAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoXG4gICAgICAgICAgICBwbHVnaW5DbGVhbnVwRm5zLFxuICAgICAgICAgICAgYXBwLl9pbnN0YW5jZSxcbiAgICAgICAgICAgIDE2XG4gICAgICAgICAgKTtcbiAgICAgICAgICByZW5kZXIobnVsbCwgYXBwLl9jb250YWluZXIpO1xuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgYXBwLl9pbnN0YW5jZSA9IG51bGw7XG4gICAgICAgICAgICBkZXZ0b29sc1VubW91bnRBcHAoYXBwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVsZXRlIGFwcC5fY29udGFpbmVyLl9fdnVlX2FwcF9fO1xuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICB3YXJuJDEoYENhbm5vdCB1bm1vdW50IGFuIGFwcCB0aGF0IGlzIG5vdCBtb3VudGVkLmApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcHJvdmlkZShrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGtleSBpbiBjb250ZXh0LnByb3ZpZGVzKSB7XG4gICAgICAgICAgaWYgKGhhc093bihjb250ZXh0LnByb3ZpZGVzLCBrZXkpKSB7XG4gICAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICAgIGBBcHAgYWxyZWFkeSBwcm92aWRlcyBwcm9wZXJ0eSB3aXRoIGtleSBcIiR7U3RyaW5nKGtleSl9XCIuIEl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCB0aGUgbmV3IHZhbHVlLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgICAgYEFwcCBhbHJlYWR5IHByb3ZpZGVzIHByb3BlcnR5IHdpdGgga2V5IFwiJHtTdHJpbmcoa2V5KX1cIiBpbmhlcml0ZWQgZnJvbSBpdHMgcGFyZW50IGVsZW1lbnQuIEl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCB0aGUgbmV3IHZhbHVlLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQucHJvdmlkZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gYXBwO1xuICAgICAgfSxcbiAgICAgIHJ1bldpdGhDb250ZXh0KGZuKSB7XG4gICAgICAgIGNvbnN0IGxhc3RBcHAgPSBjdXJyZW50QXBwO1xuICAgICAgICBjdXJyZW50QXBwID0gYXBwO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBmbigpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGN1cnJlbnRBcHAgPSBsYXN0QXBwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gYXBwO1xuICB9O1xufVxubGV0IGN1cnJlbnRBcHAgPSBudWxsO1xuXG5mdW5jdGlvbiBwcm92aWRlKGtleSwgdmFsdWUpIHtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBpZiAoIWN1cnJlbnRJbnN0YW5jZSB8fCBjdXJyZW50SW5zdGFuY2UuaXNNb3VudGVkKSB7XG4gICAgICB3YXJuJDEoYHByb3ZpZGUoKSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSBzZXR1cCgpLmApO1xuICAgIH1cbiAgfVxuICBpZiAoY3VycmVudEluc3RhbmNlKSB7XG4gICAgbGV0IHByb3ZpZGVzID0gY3VycmVudEluc3RhbmNlLnByb3ZpZGVzO1xuICAgIGNvbnN0IHBhcmVudFByb3ZpZGVzID0gY3VycmVudEluc3RhbmNlLnBhcmVudCAmJiBjdXJyZW50SW5zdGFuY2UucGFyZW50LnByb3ZpZGVzO1xuICAgIGlmIChwYXJlbnRQcm92aWRlcyA9PT0gcHJvdmlkZXMpIHtcbiAgICAgIHByb3ZpZGVzID0gY3VycmVudEluc3RhbmNlLnByb3ZpZGVzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRQcm92aWRlcyk7XG4gICAgfVxuICAgIHByb3ZpZGVzW2tleV0gPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gaW5qZWN0KGtleSwgZGVmYXVsdFZhbHVlLCB0cmVhdERlZmF1bHRBc0ZhY3RvcnkgPSBmYWxzZSkge1xuICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICBpZiAoaW5zdGFuY2UgfHwgY3VycmVudEFwcCkge1xuICAgIGxldCBwcm92aWRlcyA9IGN1cnJlbnRBcHAgPyBjdXJyZW50QXBwLl9jb250ZXh0LnByb3ZpZGVzIDogaW5zdGFuY2UgPyBpbnN0YW5jZS5wYXJlbnQgPT0gbnVsbCB8fCBpbnN0YW5jZS5jZSA/IGluc3RhbmNlLnZub2RlLmFwcENvbnRleHQgJiYgaW5zdGFuY2Uudm5vZGUuYXBwQ29udGV4dC5wcm92aWRlcyA6IGluc3RhbmNlLnBhcmVudC5wcm92aWRlcyA6IHZvaWQgMDtcbiAgICBpZiAocHJvdmlkZXMgJiYga2V5IGluIHByb3ZpZGVzKSB7XG4gICAgICByZXR1cm4gcHJvdmlkZXNba2V5XTtcbiAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm4gdHJlYXREZWZhdWx0QXNGYWN0b3J5ICYmIGlzRnVuY3Rpb24oZGVmYXVsdFZhbHVlKSA/IGRlZmF1bHRWYWx1ZS5jYWxsKGluc3RhbmNlICYmIGluc3RhbmNlLnByb3h5KSA6IGRlZmF1bHRWYWx1ZTtcbiAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHdhcm4kMShgaW5qZWN0aW9uIFwiJHtTdHJpbmcoa2V5KX1cIiBub3QgZm91bmQuYCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuJDEoYGluamVjdCgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHNldHVwKCkgb3IgZnVuY3Rpb25hbCBjb21wb25lbnRzLmApO1xuICB9XG59XG5mdW5jdGlvbiBoYXNJbmplY3Rpb25Db250ZXh0KCkge1xuICByZXR1cm4gISEoZ2V0Q3VycmVudEluc3RhbmNlKCkgfHwgY3VycmVudEFwcCk7XG59XG5cbmNvbnN0IHNzckNvbnRleHRLZXkgPSBTeW1ib2wuZm9yKFwidi1zY3hcIik7XG5jb25zdCB1c2VTU1JDb250ZXh0ID0gKCkgPT4ge1xuICB7XG4gICAgY29uc3QgY3R4ID0gaW5qZWN0KHNzckNvbnRleHRLZXkpO1xuICAgIGlmICghY3R4KSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4kMShcbiAgICAgICAgYFNlcnZlciByZW5kZXJpbmcgY29udGV4dCBub3QgcHJvdmlkZWQuIE1ha2Ugc3VyZSB0byBvbmx5IGNhbGwgdXNlU1NSQ29udGV4dCgpIGNvbmRpdGlvbmFsbHkgaW4gdGhlIHNlcnZlciBidWlsZC5gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gY3R4O1xuICB9XG59O1xuXG5mdW5jdGlvbiB3YXRjaEVmZmVjdChlZmZlY3QsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIGRvV2F0Y2goZWZmZWN0LCBudWxsLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHdhdGNoUG9zdEVmZmVjdChlZmZlY3QsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIGRvV2F0Y2goXG4gICAgZWZmZWN0LFxuICAgIG51bGwsXG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IGV4dGVuZCh7fSwgb3B0aW9ucywgeyBmbHVzaDogXCJwb3N0XCIgfSkgOiB7IGZsdXNoOiBcInBvc3RcIiB9XG4gICk7XG59XG5mdW5jdGlvbiB3YXRjaFN5bmNFZmZlY3QoZWZmZWN0LCBvcHRpb25zKSB7XG4gIHJldHVybiBkb1dhdGNoKFxuICAgIGVmZmVjdCxcbiAgICBudWxsLFxuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBleHRlbmQoe30sIG9wdGlvbnMsIHsgZmx1c2g6IFwic3luY1wiIH0pIDogeyBmbHVzaDogXCJzeW5jXCIgfVxuICApO1xufVxuZnVuY3Rpb24gd2F0Y2goc291cmNlLCBjYiwgb3B0aW9ucykge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaXNGdW5jdGlvbihjYikpIHtcbiAgICB3YXJuJDEoXG4gICAgICBgXFxgd2F0Y2goZm4sIG9wdGlvbnM/KVxcYCBzaWduYXR1cmUgaGFzIGJlZW4gbW92ZWQgdG8gYSBzZXBhcmF0ZSBBUEkuIFVzZSBcXGB3YXRjaEVmZmVjdChmbiwgb3B0aW9ucz8pXFxgIGluc3RlYWQuIFxcYHdhdGNoXFxgIG5vdyBvbmx5IHN1cHBvcnRzIFxcYHdhdGNoKHNvdXJjZSwgY2IsIG9wdGlvbnM/KSBzaWduYXR1cmUuYFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIGRvV2F0Y2goc291cmNlLCBjYiwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBkb1dhdGNoKHNvdXJjZSwgY2IsIG9wdGlvbnMgPSBFTVBUWV9PQkopIHtcbiAgY29uc3QgeyBpbW1lZGlhdGUsIGRlZXAsIGZsdXNoLCBvbmNlIH0gPSBvcHRpb25zO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhY2IpIHtcbiAgICBpZiAoaW1tZWRpYXRlICE9PSB2b2lkIDApIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYHdhdGNoKCkgXCJpbW1lZGlhdGVcIiBvcHRpb24gaXMgb25seSByZXNwZWN0ZWQgd2hlbiB1c2luZyB0aGUgd2F0Y2goc291cmNlLCBjYWxsYmFjaywgb3B0aW9ucz8pIHNpZ25hdHVyZS5gXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoZGVlcCAhPT0gdm9pZCAwKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGB3YXRjaCgpIFwiZGVlcFwiIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIHRoZSB3YXRjaChzb3VyY2UsIGNhbGxiYWNrLCBvcHRpb25zPykgc2lnbmF0dXJlLmBcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChvbmNlICE9PSB2b2lkIDApIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYHdhdGNoKCkgXCJvbmNlXCIgb3B0aW9uIGlzIG9ubHkgcmVzcGVjdGVkIHdoZW4gdXNpbmcgdGhlIHdhdGNoKHNvdXJjZSwgY2FsbGJhY2ssIG9wdGlvbnM/KSBzaWduYXR1cmUuYFxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgY29uc3QgYmFzZVdhdGNoT3B0aW9ucyA9IGV4dGVuZCh7fSwgb3B0aW9ucyk7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSBiYXNlV2F0Y2hPcHRpb25zLm9uV2FybiA9IHdhcm4kMTtcbiAgY29uc3QgcnVuc0ltbWVkaWF0ZWx5ID0gY2IgJiYgaW1tZWRpYXRlIHx8ICFjYiAmJiBmbHVzaCAhPT0gXCJwb3N0XCI7XG4gIGxldCBzc3JDbGVhbnVwO1xuICBpZiAoaXNJblNTUkNvbXBvbmVudFNldHVwKSB7XG4gICAgaWYgKGZsdXNoID09PSBcInN5bmNcIikge1xuICAgICAgY29uc3QgY3R4ID0gdXNlU1NSQ29udGV4dCgpO1xuICAgICAgc3NyQ2xlYW51cCA9IGN0eC5fX3dhdGNoZXJIYW5kbGVzIHx8IChjdHguX193YXRjaGVySGFuZGxlcyA9IFtdKTtcbiAgICB9IGVsc2UgaWYgKCFydW5zSW1tZWRpYXRlbHkpIHtcbiAgICAgIGNvbnN0IHdhdGNoU3RvcEhhbmRsZSA9ICgpID0+IHtcbiAgICAgIH07XG4gICAgICB3YXRjaFN0b3BIYW5kbGUuc3RvcCA9IE5PT1A7XG4gICAgICB3YXRjaFN0b3BIYW5kbGUucmVzdW1lID0gTk9PUDtcbiAgICAgIHdhdGNoU3RvcEhhbmRsZS5wYXVzZSA9IE5PT1A7XG4gICAgICByZXR1cm4gd2F0Y2hTdG9wSGFuZGxlO1xuICAgIH1cbiAgfVxuICBjb25zdCBpbnN0YW5jZSA9IGN1cnJlbnRJbnN0YW5jZTtcbiAgYmFzZVdhdGNoT3B0aW9ucy5jYWxsID0gKGZuLCB0eXBlLCBhcmdzKSA9PiBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpO1xuICBsZXQgaXNQcmUgPSBmYWxzZTtcbiAgaWYgKGZsdXNoID09PSBcInBvc3RcIikge1xuICAgIGJhc2VXYXRjaE9wdGlvbnMuc2NoZWR1bGVyID0gKGpvYikgPT4ge1xuICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KGpvYiwgaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc3VzcGVuc2UpO1xuICAgIH07XG4gIH0gZWxzZSBpZiAoZmx1c2ggIT09IFwic3luY1wiKSB7XG4gICAgaXNQcmUgPSB0cnVlO1xuICAgIGJhc2VXYXRjaE9wdGlvbnMuc2NoZWR1bGVyID0gKGpvYiwgaXNGaXJzdFJ1bikgPT4ge1xuICAgICAgaWYgKGlzRmlyc3RSdW4pIHtcbiAgICAgICAgam9iKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUpvYihqb2IpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgYmFzZVdhdGNoT3B0aW9ucy5hdWdtZW50Sm9iID0gKGpvYikgPT4ge1xuICAgIGlmIChjYikge1xuICAgICAgam9iLmZsYWdzIHw9IDQ7XG4gICAgfVxuICAgIGlmIChpc1ByZSkge1xuICAgICAgam9iLmZsYWdzIHw9IDI7XG4gICAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgam9iLmlkID0gaW5zdGFuY2UudWlkO1xuICAgICAgICBqb2IuaSA9IGluc3RhbmNlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3Qgd2F0Y2hIYW5kbGUgPSB3YXRjaCQxKHNvdXJjZSwgY2IsIGJhc2VXYXRjaE9wdGlvbnMpO1xuICBpZiAoaXNJblNTUkNvbXBvbmVudFNldHVwKSB7XG4gICAgaWYgKHNzckNsZWFudXApIHtcbiAgICAgIHNzckNsZWFudXAucHVzaCh3YXRjaEhhbmRsZSk7XG4gICAgfSBlbHNlIGlmIChydW5zSW1tZWRpYXRlbHkpIHtcbiAgICAgIHdhdGNoSGFuZGxlKCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB3YXRjaEhhbmRsZTtcbn1cbmZ1bmN0aW9uIGluc3RhbmNlV2F0Y2goc291cmNlLCB2YWx1ZSwgb3B0aW9ucykge1xuICBjb25zdCBwdWJsaWNUaGlzID0gdGhpcy5wcm94eTtcbiAgY29uc3QgZ2V0dGVyID0gaXNTdHJpbmcoc291cmNlKSA/IHNvdXJjZS5pbmNsdWRlcyhcIi5cIikgPyBjcmVhdGVQYXRoR2V0dGVyKHB1YmxpY1RoaXMsIHNvdXJjZSkgOiAoKSA9PiBwdWJsaWNUaGlzW3NvdXJjZV0gOiBzb3VyY2UuYmluZChwdWJsaWNUaGlzLCBwdWJsaWNUaGlzKTtcbiAgbGV0IGNiO1xuICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICBjYiA9IHZhbHVlO1xuICB9IGVsc2Uge1xuICAgIGNiID0gdmFsdWUuaGFuZGxlcjtcbiAgICBvcHRpb25zID0gdmFsdWU7XG4gIH1cbiAgY29uc3QgcmVzZXQgPSBzZXRDdXJyZW50SW5zdGFuY2UodGhpcyk7XG4gIGNvbnN0IHJlcyA9IGRvV2F0Y2goZ2V0dGVyLCBjYi5iaW5kKHB1YmxpY1RoaXMpLCBvcHRpb25zKTtcbiAgcmVzZXQoKTtcbiAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIGNyZWF0ZVBhdGhHZXR0ZXIoY3R4LCBwYXRoKSB7XG4gIGNvbnN0IHNlZ21lbnRzID0gcGF0aC5zcGxpdChcIi5cIik7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgbGV0IGN1ciA9IGN0eDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aCAmJiBjdXI7IGkrKykge1xuICAgICAgY3VyID0gY3VyW3NlZ21lbnRzW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIGN1cjtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXNlTW9kZWwocHJvcHMsIG5hbWUsIG9wdGlvbnMgPSBFTVBUWV9PQkopIHtcbiAgY29uc3QgaSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaSkge1xuICAgIHdhcm4kMShgdXNlTW9kZWwoKSBjYWxsZWQgd2l0aG91dCBhY3RpdmUgaW5zdGFuY2UuYCk7XG4gICAgcmV0dXJuIHJlZigpO1xuICB9XG4gIGNvbnN0IGNhbWVsaXplZE5hbWUgPSBjYW1lbGl6ZShuYW1lKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWkucHJvcHNPcHRpb25zWzBdW2NhbWVsaXplZE5hbWVdKSB7XG4gICAgd2FybiQxKGB1c2VNb2RlbCgpIGNhbGxlZCB3aXRoIHByb3AgXCIke25hbWV9XCIgd2hpY2ggaXMgbm90IGRlY2xhcmVkLmApO1xuICAgIHJldHVybiByZWYoKTtcbiAgfVxuICBjb25zdCBoeXBoZW5hdGVkTmFtZSA9IGh5cGhlbmF0ZShuYW1lKTtcbiAgY29uc3QgbW9kaWZpZXJzID0gZ2V0TW9kZWxNb2RpZmllcnMocHJvcHMsIGNhbWVsaXplZE5hbWUpO1xuICBjb25zdCByZXMgPSBjdXN0b21SZWYoKHRyYWNrLCB0cmlnZ2VyKSA9PiB7XG4gICAgbGV0IGxvY2FsVmFsdWU7XG4gICAgbGV0IHByZXZTZXRWYWx1ZSA9IEVNUFRZX09CSjtcbiAgICBsZXQgcHJldkVtaXR0ZWRWYWx1ZTtcbiAgICB3YXRjaFN5bmNFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcFZhbHVlID0gcHJvcHNbY2FtZWxpemVkTmFtZV07XG4gICAgICBpZiAoaGFzQ2hhbmdlZChsb2NhbFZhbHVlLCBwcm9wVmFsdWUpKSB7XG4gICAgICAgIGxvY2FsVmFsdWUgPSBwcm9wVmFsdWU7XG4gICAgICAgIHRyaWdnZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0KCkge1xuICAgICAgICB0cmFjaygpO1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXQgPyBvcHRpb25zLmdldChsb2NhbFZhbHVlKSA6IGxvY2FsVmFsdWU7XG4gICAgICB9LFxuICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGVtaXR0ZWRWYWx1ZSA9IG9wdGlvbnMuc2V0ID8gb3B0aW9ucy5zZXQodmFsdWUpIDogdmFsdWU7XG4gICAgICAgIGlmICghaGFzQ2hhbmdlZChlbWl0dGVkVmFsdWUsIGxvY2FsVmFsdWUpICYmICEocHJldlNldFZhbHVlICE9PSBFTVBUWV9PQkogJiYgaGFzQ2hhbmdlZCh2YWx1ZSwgcHJldlNldFZhbHVlKSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmF3UHJvcHMgPSBpLnZub2RlLnByb3BzO1xuICAgICAgICBpZiAoIShyYXdQcm9wcyAmJiAvLyBjaGVjayBpZiBwYXJlbnQgaGFzIHBhc3NlZCB2LW1vZGVsXG4gICAgICAgIChuYW1lIGluIHJhd1Byb3BzIHx8IGNhbWVsaXplZE5hbWUgaW4gcmF3UHJvcHMgfHwgaHlwaGVuYXRlZE5hbWUgaW4gcmF3UHJvcHMpICYmIChgb25VcGRhdGU6JHtuYW1lfWAgaW4gcmF3UHJvcHMgfHwgYG9uVXBkYXRlOiR7Y2FtZWxpemVkTmFtZX1gIGluIHJhd1Byb3BzIHx8IGBvblVwZGF0ZToke2h5cGhlbmF0ZWROYW1lfWAgaW4gcmF3UHJvcHMpKSkge1xuICAgICAgICAgIGxvY2FsVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICB0cmlnZ2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaS5lbWl0KGB1cGRhdGU6JHtuYW1lfWAsIGVtaXR0ZWRWYWx1ZSk7XG4gICAgICAgIGlmIChoYXNDaGFuZ2VkKHZhbHVlLCBlbWl0dGVkVmFsdWUpICYmIGhhc0NoYW5nZWQodmFsdWUsIHByZXZTZXRWYWx1ZSkgJiYgIWhhc0NoYW5nZWQoZW1pdHRlZFZhbHVlLCBwcmV2RW1pdHRlZFZhbHVlKSkge1xuICAgICAgICAgIHRyaWdnZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2U2V0VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgcHJldkVtaXR0ZWRWYWx1ZSA9IGVtaXR0ZWRWYWx1ZTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbiAgcmVzW1N5bWJvbC5pdGVyYXRvcl0gPSAoKSA9PiB7XG4gICAgbGV0IGkyID0gMDtcbiAgICByZXR1cm4ge1xuICAgICAgbmV4dCgpIHtcbiAgICAgICAgaWYgKGkyIDwgMikge1xuICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBpMisrID8gbW9kaWZpZXJzIHx8IEVNUFRZX09CSiA6IHJlcywgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4geyBkb25lOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9O1xuICByZXR1cm4gcmVzO1xufVxuY29uc3QgZ2V0TW9kZWxNb2RpZmllcnMgPSAocHJvcHMsIG1vZGVsTmFtZSkgPT4ge1xuICByZXR1cm4gbW9kZWxOYW1lID09PSBcIm1vZGVsVmFsdWVcIiB8fCBtb2RlbE5hbWUgPT09IFwibW9kZWwtdmFsdWVcIiA/IHByb3BzLm1vZGVsTW9kaWZpZXJzIDogcHJvcHNbYCR7bW9kZWxOYW1lfU1vZGlmaWVyc2BdIHx8IHByb3BzW2Ake2NhbWVsaXplKG1vZGVsTmFtZSl9TW9kaWZpZXJzYF0gfHwgcHJvcHNbYCR7aHlwaGVuYXRlKG1vZGVsTmFtZSl9TW9kaWZpZXJzYF07XG59O1xuXG5mdW5jdGlvbiBlbWl0KGluc3RhbmNlLCBldmVudCwgLi4ucmF3QXJncykge1xuICBpZiAoaW5zdGFuY2UuaXNVbm1vdW50ZWQpIHJldHVybjtcbiAgY29uc3QgcHJvcHMgPSBpbnN0YW5jZS52bm9kZS5wcm9wcyB8fCBFTVBUWV9PQko7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgY29uc3Qge1xuICAgICAgZW1pdHNPcHRpb25zLFxuICAgICAgcHJvcHNPcHRpb25zOiBbcHJvcHNPcHRpb25zXVxuICAgIH0gPSBpbnN0YW5jZTtcbiAgICBpZiAoZW1pdHNPcHRpb25zKSB7XG4gICAgICBpZiAoIShldmVudCBpbiBlbWl0c09wdGlvbnMpICYmIHRydWUpIHtcbiAgICAgICAgaWYgKCFwcm9wc09wdGlvbnMgfHwgISh0b0hhbmRsZXJLZXkoY2FtZWxpemUoZXZlbnQpKSBpbiBwcm9wc09wdGlvbnMpKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYENvbXBvbmVudCBlbWl0dGVkIGV2ZW50IFwiJHtldmVudH1cIiBidXQgaXQgaXMgbmVpdGhlciBkZWNsYXJlZCBpbiB0aGUgZW1pdHMgb3B0aW9uIG5vciBhcyBhbiBcIiR7dG9IYW5kbGVyS2V5KGNhbWVsaXplKGV2ZW50KSl9XCIgcHJvcC5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yID0gZW1pdHNPcHRpb25zW2V2ZW50XTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsaWRhdG9yKSkge1xuICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSB2YWxpZGF0b3IoLi4ucmF3QXJncyk7XG4gICAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICAgIGBJbnZhbGlkIGV2ZW50IGFyZ3VtZW50czogZXZlbnQgdmFsaWRhdGlvbiBmYWlsZWQgZm9yIGV2ZW50IFwiJHtldmVudH1cIi5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBsZXQgYXJncyA9IHJhd0FyZ3M7XG4gIGNvbnN0IGlzTW9kZWxMaXN0ZW5lciA9IGV2ZW50LnN0YXJ0c1dpdGgoXCJ1cGRhdGU6XCIpO1xuICBjb25zdCBtb2RpZmllcnMgPSBpc01vZGVsTGlzdGVuZXIgJiYgZ2V0TW9kZWxNb2RpZmllcnMocHJvcHMsIGV2ZW50LnNsaWNlKDcpKTtcbiAgaWYgKG1vZGlmaWVycykge1xuICAgIGlmIChtb2RpZmllcnMudHJpbSkge1xuICAgICAgYXJncyA9IHJhd0FyZ3MubWFwKChhKSA9PiBpc1N0cmluZyhhKSA/IGEudHJpbSgpIDogYSk7XG4gICAgfVxuICAgIGlmIChtb2RpZmllcnMubnVtYmVyKSB7XG4gICAgICBhcmdzID0gcmF3QXJncy5tYXAobG9vc2VUb051bWJlcik7XG4gICAgfVxuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgIGRldnRvb2xzQ29tcG9uZW50RW1pdChpbnN0YW5jZSwgZXZlbnQsIGFyZ3MpO1xuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgY29uc3QgbG93ZXJDYXNlRXZlbnQgPSBldmVudC50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlckNhc2VFdmVudCAhPT0gZXZlbnQgJiYgcHJvcHNbdG9IYW5kbGVyS2V5KGxvd2VyQ2FzZUV2ZW50KV0pIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYEV2ZW50IFwiJHtsb3dlckNhc2VFdmVudH1cIiBpcyBlbWl0dGVkIGluIGNvbXBvbmVudCAke2Zvcm1hdENvbXBvbmVudE5hbWUoXG4gICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgaW5zdGFuY2UudHlwZVxuICAgICAgICApfSBidXQgdGhlIGhhbmRsZXIgaXMgcmVnaXN0ZXJlZCBmb3IgXCIke2V2ZW50fVwiLiBOb3RlIHRoYXQgSFRNTCBhdHRyaWJ1dGVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlIGFuZCB5b3UgY2Fubm90IHVzZSB2LW9uIHRvIGxpc3RlbiB0byBjYW1lbENhc2UgZXZlbnRzIHdoZW4gdXNpbmcgaW4tRE9NIHRlbXBsYXRlcy4gWW91IHNob3VsZCBwcm9iYWJseSB1c2UgXCIke2h5cGhlbmF0ZShcbiAgICAgICAgICBldmVudFxuICAgICAgICApfVwiIGluc3RlYWQgb2YgXCIke2V2ZW50fVwiLmBcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGxldCBoYW5kbGVyTmFtZTtcbiAgbGV0IGhhbmRsZXIgPSBwcm9wc1toYW5kbGVyTmFtZSA9IHRvSGFuZGxlcktleShldmVudCldIHx8IC8vIGFsc28gdHJ5IGNhbWVsQ2FzZSBldmVudCBoYW5kbGVyICgjMjI0OSlcbiAgcHJvcHNbaGFuZGxlck5hbWUgPSB0b0hhbmRsZXJLZXkoY2FtZWxpemUoZXZlbnQpKV07XG4gIGlmICghaGFuZGxlciAmJiBpc01vZGVsTGlzdGVuZXIpIHtcbiAgICBoYW5kbGVyID0gcHJvcHNbaGFuZGxlck5hbWUgPSB0b0hhbmRsZXJLZXkoaHlwaGVuYXRlKGV2ZW50KSldO1xuICB9XG4gIGlmIChoYW5kbGVyKSB7XG4gICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoXG4gICAgICBoYW5kbGVyLFxuICAgICAgaW5zdGFuY2UsXG4gICAgICA2LFxuICAgICAgYXJnc1xuICAgICk7XG4gIH1cbiAgY29uc3Qgb25jZUhhbmRsZXIgPSBwcm9wc1toYW5kbGVyTmFtZSArIGBPbmNlYF07XG4gIGlmIChvbmNlSGFuZGxlcikge1xuICAgIGlmICghaW5zdGFuY2UuZW1pdHRlZCkge1xuICAgICAgaW5zdGFuY2UuZW1pdHRlZCA9IHt9O1xuICAgIH0gZWxzZSBpZiAoaW5zdGFuY2UuZW1pdHRlZFtoYW5kbGVyTmFtZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaW5zdGFuY2UuZW1pdHRlZFtoYW5kbGVyTmFtZV0gPSB0cnVlO1xuICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKFxuICAgICAgb25jZUhhbmRsZXIsXG4gICAgICBpbnN0YW5jZSxcbiAgICAgIDYsXG4gICAgICBhcmdzXG4gICAgKTtcbiAgfVxufVxuY29uc3QgbWl4aW5FbWl0c0NhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBub3JtYWxpemVFbWl0c09wdGlvbnMoY29tcCwgYXBwQ29udGV4dCwgYXNNaXhpbiA9IGZhbHNlKSB7XG4gIGNvbnN0IGNhY2hlID0gX19WVUVfT1BUSU9OU19BUElfXyAmJiBhc01peGluID8gbWl4aW5FbWl0c0NhY2hlIDogYXBwQ29udGV4dC5lbWl0c0NhY2hlO1xuICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoY29tcCk7XG4gIGlmIChjYWNoZWQgIT09IHZvaWQgMCkge1xuICAgIHJldHVybiBjYWNoZWQ7XG4gIH1cbiAgY29uc3QgcmF3ID0gY29tcC5lbWl0cztcbiAgbGV0IG5vcm1hbGl6ZWQgPSB7fTtcbiAgbGV0IGhhc0V4dGVuZHMgPSBmYWxzZTtcbiAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18gJiYgIWlzRnVuY3Rpb24oY29tcCkpIHtcbiAgICBjb25zdCBleHRlbmRFbWl0cyA9IChyYXcyKSA9PiB7XG4gICAgICBjb25zdCBub3JtYWxpemVkRnJvbUV4dGVuZCA9IG5vcm1hbGl6ZUVtaXRzT3B0aW9ucyhyYXcyLCBhcHBDb250ZXh0LCB0cnVlKTtcbiAgICAgIGlmIChub3JtYWxpemVkRnJvbUV4dGVuZCkge1xuICAgICAgICBoYXNFeHRlbmRzID0gdHJ1ZTtcbiAgICAgICAgZXh0ZW5kKG5vcm1hbGl6ZWQsIG5vcm1hbGl6ZWRGcm9tRXh0ZW5kKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmICghYXNNaXhpbiAmJiBhcHBDb250ZXh0Lm1peGlucy5sZW5ndGgpIHtcbiAgICAgIGFwcENvbnRleHQubWl4aW5zLmZvckVhY2goZXh0ZW5kRW1pdHMpO1xuICAgIH1cbiAgICBpZiAoY29tcC5leHRlbmRzKSB7XG4gICAgICBleHRlbmRFbWl0cyhjb21wLmV4dGVuZHMpO1xuICAgIH1cbiAgICBpZiAoY29tcC5taXhpbnMpIHtcbiAgICAgIGNvbXAubWl4aW5zLmZvckVhY2goZXh0ZW5kRW1pdHMpO1xuICAgIH1cbiAgfVxuICBpZiAoIXJhdyAmJiAhaGFzRXh0ZW5kcykge1xuICAgIGlmIChpc09iamVjdChjb21wKSkge1xuICAgICAgY2FjaGUuc2V0KGNvbXAsIG51bGwpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoaXNBcnJheShyYXcpKSB7XG4gICAgcmF3LmZvckVhY2goKGtleSkgPT4gbm9ybWFsaXplZFtrZXldID0gbnVsbCk7XG4gIH0gZWxzZSB7XG4gICAgZXh0ZW5kKG5vcm1hbGl6ZWQsIHJhdyk7XG4gIH1cbiAgaWYgKGlzT2JqZWN0KGNvbXApKSB7XG4gICAgY2FjaGUuc2V0KGNvbXAsIG5vcm1hbGl6ZWQpO1xuICB9XG4gIHJldHVybiBub3JtYWxpemVkO1xufVxuZnVuY3Rpb24gaXNFbWl0TGlzdGVuZXIob3B0aW9ucywga2V5KSB7XG4gIGlmICghb3B0aW9ucyB8fCAhaXNPbihrZXkpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGtleSA9IGtleS5zbGljZSgyKS5yZXBsYWNlKC9PbmNlJC8sIFwiXCIpO1xuICByZXR1cm4gaGFzT3duKG9wdGlvbnMsIGtleVswXS50b0xvd2VyQ2FzZSgpICsga2V5LnNsaWNlKDEpKSB8fCBoYXNPd24ob3B0aW9ucywgaHlwaGVuYXRlKGtleSkpIHx8IGhhc093bihvcHRpb25zLCBrZXkpO1xufVxuXG5sZXQgYWNjZXNzZWRBdHRycyA9IGZhbHNlO1xuZnVuY3Rpb24gbWFya0F0dHJzQWNjZXNzZWQoKSB7XG4gIGFjY2Vzc2VkQXR0cnMgPSB0cnVlO1xufVxuZnVuY3Rpb24gcmVuZGVyQ29tcG9uZW50Um9vdChpbnN0YW5jZSkge1xuICBjb25zdCB7XG4gICAgdHlwZTogQ29tcG9uZW50LFxuICAgIHZub2RlLFxuICAgIHByb3h5LFxuICAgIHdpdGhQcm94eSxcbiAgICBwcm9wc09wdGlvbnM6IFtwcm9wc09wdGlvbnNdLFxuICAgIHNsb3RzLFxuICAgIGF0dHJzLFxuICAgIGVtaXQsXG4gICAgcmVuZGVyLFxuICAgIHJlbmRlckNhY2hlLFxuICAgIHByb3BzLFxuICAgIGRhdGEsXG4gICAgc2V0dXBTdGF0ZSxcbiAgICBjdHgsXG4gICAgaW5oZXJpdEF0dHJzXG4gIH0gPSBpbnN0YW5jZTtcbiAgY29uc3QgcHJldiA9IHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShpbnN0YW5jZSk7XG4gIGxldCByZXN1bHQ7XG4gIGxldCBmYWxsdGhyb3VnaEF0dHJzO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGFjY2Vzc2VkQXR0cnMgPSBmYWxzZTtcbiAgfVxuICB0cnkge1xuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiA0KSB7XG4gICAgICBjb25zdCBwcm94eVRvVXNlID0gd2l0aFByb3h5IHx8IHByb3h5O1xuICAgICAgY29uc3QgdGhpc1Byb3h5ID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBzZXR1cFN0YXRlLl9faXNTY3JpcHRTZXR1cCA/IG5ldyBQcm94eShwcm94eVRvVXNlLCB7XG4gICAgICAgIGdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBgUHJvcGVydHkgJyR7U3RyaW5nKFxuICAgICAgICAgICAgICBrZXlcbiAgICAgICAgICAgICl9JyB3YXMgYWNjZXNzZWQgdmlhICd0aGlzJy4gQXZvaWQgdXNpbmcgJ3RoaXMnIGluIHRlbXBsYXRlcy5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBrZXksIHJlY2VpdmVyKTtcbiAgICAgICAgfVxuICAgICAgfSkgOiBwcm94eVRvVXNlO1xuICAgICAgcmVzdWx0ID0gbm9ybWFsaXplVk5vZGUoXG4gICAgICAgIHJlbmRlci5jYWxsKFxuICAgICAgICAgIHRoaXNQcm94eSxcbiAgICAgICAgICBwcm94eVRvVXNlLFxuICAgICAgICAgIHJlbmRlckNhY2hlLFxuICAgICAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzaGFsbG93UmVhZG9ubHkocHJvcHMpIDogcHJvcHMsXG4gICAgICAgICAgc2V0dXBTdGF0ZSxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIGN0eFxuICAgICAgICApXG4gICAgICApO1xuICAgICAgZmFsbHRocm91Z2hBdHRycyA9IGF0dHJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZW5kZXIyID0gQ29tcG9uZW50O1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgYXR0cnMgPT09IHByb3BzKSB7XG4gICAgICAgIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XG4gICAgICB9XG4gICAgICByZXN1bHQgPSBub3JtYWxpemVWTm9kZShcbiAgICAgICAgcmVuZGVyMi5sZW5ndGggPiAxID8gcmVuZGVyMihcbiAgICAgICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gc2hhbGxvd1JlYWRvbmx5KHByb3BzKSA6IHByb3BzLFxuICAgICAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyB7XG4gICAgICAgICAgICBnZXQgYXR0cnMoKSB7XG4gICAgICAgICAgICAgIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XG4gICAgICAgICAgICAgIHJldHVybiBzaGFsbG93UmVhZG9ubHkoYXR0cnMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNsb3RzLFxuICAgICAgICAgICAgZW1pdFxuICAgICAgICAgIH0gOiB7IGF0dHJzLCBzbG90cywgZW1pdCB9XG4gICAgICAgICkgOiByZW5kZXIyKFxuICAgICAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzaGFsbG93UmVhZG9ubHkocHJvcHMpIDogcHJvcHMsXG4gICAgICAgICAgbnVsbFxuICAgICAgICApXG4gICAgICApO1xuICAgICAgZmFsbHRocm91Z2hBdHRycyA9IENvbXBvbmVudC5wcm9wcyA/IGF0dHJzIDogZ2V0RnVuY3Rpb25hbEZhbGx0aHJvdWdoKGF0dHJzKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGJsb2NrU3RhY2subGVuZ3RoID0gMDtcbiAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCAxKTtcbiAgICByZXN1bHQgPSBjcmVhdGVWTm9kZShDb21tZW50KTtcbiAgfVxuICBsZXQgcm9vdCA9IHJlc3VsdDtcbiAgbGV0IHNldFJvb3QgPSB2b2lkIDA7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHJlc3VsdC5wYXRjaEZsYWcgPiAwICYmIHJlc3VsdC5wYXRjaEZsYWcgJiAyMDQ4KSB7XG4gICAgW3Jvb3QsIHNldFJvb3RdID0gZ2V0Q2hpbGRSb290KHJlc3VsdCk7XG4gIH1cbiAgaWYgKGZhbGx0aHJvdWdoQXR0cnMgJiYgaW5oZXJpdEF0dHJzICE9PSBmYWxzZSkge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhmYWxsdGhyb3VnaEF0dHJzKTtcbiAgICBjb25zdCB7IHNoYXBlRmxhZyB9ID0gcm9vdDtcbiAgICBpZiAoa2V5cy5sZW5ndGgpIHtcbiAgICAgIGlmIChzaGFwZUZsYWcgJiAoMSB8IDYpKSB7XG4gICAgICAgIGlmIChwcm9wc09wdGlvbnMgJiYga2V5cy5zb21lKGlzTW9kZWxMaXN0ZW5lcikpIHtcbiAgICAgICAgICBmYWxsdGhyb3VnaEF0dHJzID0gZmlsdGVyTW9kZWxMaXN0ZW5lcnMoXG4gICAgICAgICAgICBmYWxsdGhyb3VnaEF0dHJzLFxuICAgICAgICAgICAgcHJvcHNPcHRpb25zXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByb290ID0gY2xvbmVWTm9kZShyb290LCBmYWxsdGhyb3VnaEF0dHJzLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWFjY2Vzc2VkQXR0cnMgJiYgcm9vdC50eXBlICE9PSBDb21tZW50KSB7XG4gICAgICAgIGNvbnN0IGFsbEF0dHJzID0gT2JqZWN0LmtleXMoYXR0cnMpO1xuICAgICAgICBjb25zdCBldmVudEF0dHJzID0gW107XG4gICAgICAgIGNvbnN0IGV4dHJhQXR0cnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhbGxBdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBrZXkgPSBhbGxBdHRyc1tpXTtcbiAgICAgICAgICBpZiAoaXNPbihrZXkpKSB7XG4gICAgICAgICAgICBpZiAoIWlzTW9kZWxMaXN0ZW5lcihrZXkpKSB7XG4gICAgICAgICAgICAgIGV2ZW50QXR0cnMucHVzaChrZXlbMl0udG9Mb3dlckNhc2UoKSArIGtleS5zbGljZSgzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV4dHJhQXR0cnMucHVzaChrZXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZXh0cmFBdHRycy5sZW5ndGgpIHtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBgRXh0cmFuZW91cyBub24tcHJvcHMgYXR0cmlidXRlcyAoJHtleHRyYUF0dHJzLmpvaW4oXCIsIFwiKX0pIHdlcmUgcGFzc2VkIHRvIGNvbXBvbmVudCBidXQgY291bGQgbm90IGJlIGF1dG9tYXRpY2FsbHkgaW5oZXJpdGVkIGJlY2F1c2UgY29tcG9uZW50IHJlbmRlcnMgZnJhZ21lbnQgb3IgdGV4dCBvciB0ZWxlcG9ydCByb290IG5vZGVzLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudEF0dHJzLmxlbmd0aCkge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBFeHRyYW5lb3VzIG5vbi1lbWl0cyBldmVudCBsaXN0ZW5lcnMgKCR7ZXZlbnRBdHRycy5qb2luKFwiLCBcIil9KSB3ZXJlIHBhc3NlZCB0byBjb21wb25lbnQgYnV0IGNvdWxkIG5vdCBiZSBhdXRvbWF0aWNhbGx5IGluaGVyaXRlZCBiZWNhdXNlIGNvbXBvbmVudCByZW5kZXJzIGZyYWdtZW50IG9yIHRleHQgcm9vdCBub2Rlcy4gSWYgdGhlIGxpc3RlbmVyIGlzIGludGVuZGVkIHRvIGJlIGEgY29tcG9uZW50IGN1c3RvbSBldmVudCBsaXN0ZW5lciBvbmx5LCBkZWNsYXJlIGl0IHVzaW5nIHRoZSBcImVtaXRzXCIgb3B0aW9uLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmICh2bm9kZS5kaXJzKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWlzRWxlbWVudFJvb3Qocm9vdCkpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYFJ1bnRpbWUgZGlyZWN0aXZlIHVzZWQgb24gY29tcG9uZW50IHdpdGggbm9uLWVsZW1lbnQgcm9vdCBub2RlLiBUaGUgZGlyZWN0aXZlcyB3aWxsIG5vdCBmdW5jdGlvbiBhcyBpbnRlbmRlZC5gXG4gICAgICApO1xuICAgIH1cbiAgICByb290ID0gY2xvbmVWTm9kZShyb290LCBudWxsLCBmYWxzZSwgdHJ1ZSk7XG4gICAgcm9vdC5kaXJzID0gcm9vdC5kaXJzID8gcm9vdC5kaXJzLmNvbmNhdCh2bm9kZS5kaXJzKSA6IHZub2RlLmRpcnM7XG4gIH1cbiAgaWYgKHZub2RlLnRyYW5zaXRpb24pIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaXNFbGVtZW50Um9vdChyb290KSkge1xuICAgICAgd2FybiQxKFxuICAgICAgICBgQ29tcG9uZW50IGluc2lkZSA8VHJhbnNpdGlvbj4gcmVuZGVycyBub24tZWxlbWVudCByb290IG5vZGUgdGhhdCBjYW5ub3QgYmUgYW5pbWF0ZWQuYFxuICAgICAgKTtcbiAgICB9XG4gICAgc2V0VHJhbnNpdGlvbkhvb2tzKHJvb3QsIHZub2RlLnRyYW5zaXRpb24pO1xuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHNldFJvb3QpIHtcbiAgICBzZXRSb290KHJvb3QpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9IHJvb3Q7XG4gIH1cbiAgc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKHByZXYpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuY29uc3QgZ2V0Q2hpbGRSb290ID0gKHZub2RlKSA9PiB7XG4gIGNvbnN0IHJhd0NoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XG4gIGNvbnN0IGR5bmFtaWNDaGlsZHJlbiA9IHZub2RlLmR5bmFtaWNDaGlsZHJlbjtcbiAgY29uc3QgY2hpbGRSb290ID0gZmlsdGVyU2luZ2xlUm9vdChyYXdDaGlsZHJlbiwgZmFsc2UpO1xuICBpZiAoIWNoaWxkUm9vdCkge1xuICAgIHJldHVybiBbdm5vZGUsIHZvaWQgMF07XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBjaGlsZFJvb3QucGF0Y2hGbGFnID4gMCAmJiBjaGlsZFJvb3QucGF0Y2hGbGFnICYgMjA0OCkge1xuICAgIHJldHVybiBnZXRDaGlsZFJvb3QoY2hpbGRSb290KTtcbiAgfVxuICBjb25zdCBpbmRleCA9IHJhd0NoaWxkcmVuLmluZGV4T2YoY2hpbGRSb290KTtcbiAgY29uc3QgZHluYW1pY0luZGV4ID0gZHluYW1pY0NoaWxkcmVuID8gZHluYW1pY0NoaWxkcmVuLmluZGV4T2YoY2hpbGRSb290KSA6IC0xO1xuICBjb25zdCBzZXRSb290ID0gKHVwZGF0ZWRSb290KSA9PiB7XG4gICAgcmF3Q2hpbGRyZW5baW5kZXhdID0gdXBkYXRlZFJvb3Q7XG4gICAgaWYgKGR5bmFtaWNDaGlsZHJlbikge1xuICAgICAgaWYgKGR5bmFtaWNJbmRleCA+IC0xKSB7XG4gICAgICAgIGR5bmFtaWNDaGlsZHJlbltkeW5hbWljSW5kZXhdID0gdXBkYXRlZFJvb3Q7XG4gICAgICB9IGVsc2UgaWYgKHVwZGF0ZWRSb290LnBhdGNoRmxhZyA+IDApIHtcbiAgICAgICAgdm5vZGUuZHluYW1pY0NoaWxkcmVuID0gWy4uLmR5bmFtaWNDaGlsZHJlbiwgdXBkYXRlZFJvb3RdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgcmV0dXJuIFtub3JtYWxpemVWTm9kZShjaGlsZFJvb3QpLCBzZXRSb290XTtcbn07XG5mdW5jdGlvbiBmaWx0ZXJTaW5nbGVSb290KGNoaWxkcmVuLCByZWN1cnNlID0gdHJ1ZSkge1xuICBsZXQgc2luZ2xlUm9vdDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgaWYgKGlzVk5vZGUoY2hpbGQpKSB7XG4gICAgICBpZiAoY2hpbGQudHlwZSAhPT0gQ29tbWVudCB8fCBjaGlsZC5jaGlsZHJlbiA9PT0gXCJ2LWlmXCIpIHtcbiAgICAgICAgaWYgKHNpbmdsZVJvb3QpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2luZ2xlUm9vdCA9IGNoaWxkO1xuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHJlY3Vyc2UgJiYgc2luZ2xlUm9vdC5wYXRjaEZsYWcgPiAwICYmIHNpbmdsZVJvb3QucGF0Y2hGbGFnICYgMjA0OCkge1xuICAgICAgICAgICAgcmV0dXJuIGZpbHRlclNpbmdsZVJvb3Qoc2luZ2xlUm9vdC5jaGlsZHJlbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNpbmdsZVJvb3Q7XG59XG5jb25zdCBnZXRGdW5jdGlvbmFsRmFsbHRocm91Z2ggPSAoYXR0cnMpID0+IHtcbiAgbGV0IHJlcztcbiAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcbiAgICBpZiAoa2V5ID09PSBcImNsYXNzXCIgfHwga2V5ID09PSBcInN0eWxlXCIgfHwgaXNPbihrZXkpKSB7XG4gICAgICAocmVzIHx8IChyZXMgPSB7fSkpW2tleV0gPSBhdHRyc1trZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufTtcbmNvbnN0IGZpbHRlck1vZGVsTGlzdGVuZXJzID0gKGF0dHJzLCBwcm9wcykgPT4ge1xuICBjb25zdCByZXMgPSB7fTtcbiAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcbiAgICBpZiAoIWlzTW9kZWxMaXN0ZW5lcihrZXkpIHx8ICEoa2V5LnNsaWNlKDkpIGluIHByb3BzKSkge1xuICAgICAgcmVzW2tleV0gPSBhdHRyc1trZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufTtcbmNvbnN0IGlzRWxlbWVudFJvb3QgPSAodm5vZGUpID0+IHtcbiAgcmV0dXJuIHZub2RlLnNoYXBlRmxhZyAmICg2IHwgMSkgfHwgdm5vZGUudHlwZSA9PT0gQ29tbWVudDtcbn07XG5mdW5jdGlvbiBzaG91bGRVcGRhdGVDb21wb25lbnQocHJldlZOb2RlLCBuZXh0Vk5vZGUsIG9wdGltaXplZCkge1xuICBjb25zdCB7IHByb3BzOiBwcmV2UHJvcHMsIGNoaWxkcmVuOiBwcmV2Q2hpbGRyZW4sIGNvbXBvbmVudCB9ID0gcHJldlZOb2RlO1xuICBjb25zdCB7IHByb3BzOiBuZXh0UHJvcHMsIGNoaWxkcmVuOiBuZXh0Q2hpbGRyZW4sIHBhdGNoRmxhZyB9ID0gbmV4dFZOb2RlO1xuICBjb25zdCBlbWl0cyA9IGNvbXBvbmVudC5lbWl0c09wdGlvbnM7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIChwcmV2Q2hpbGRyZW4gfHwgbmV4dENoaWxkcmVuKSAmJiBpc0htclVwZGF0aW5nKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKG5leHRWTm9kZS5kaXJzIHx8IG5leHRWTm9kZS50cmFuc2l0aW9uKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKG9wdGltaXplZCAmJiBwYXRjaEZsYWcgPj0gMCkge1xuICAgIGlmIChwYXRjaEZsYWcgJiAxMDI0KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHBhdGNoRmxhZyAmIDE2KSB7XG4gICAgICBpZiAoIXByZXZQcm9wcykge1xuICAgICAgICByZXR1cm4gISFuZXh0UHJvcHM7XG4gICAgICB9XG4gICAgICByZXR1cm4gaGFzUHJvcHNDaGFuZ2VkKHByZXZQcm9wcywgbmV4dFByb3BzLCBlbWl0cyk7XG4gICAgfSBlbHNlIGlmIChwYXRjaEZsYWcgJiA4KSB7XG4gICAgICBjb25zdCBkeW5hbWljUHJvcHMgPSBuZXh0Vk5vZGUuZHluYW1pY1Byb3BzO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkeW5hbWljUHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qga2V5ID0gZHluYW1pY1Byb3BzW2ldO1xuICAgICAgICBpZiAobmV4dFByb3BzW2tleV0gIT09IHByZXZQcm9wc1trZXldICYmICFpc0VtaXRMaXN0ZW5lcihlbWl0cywga2V5KSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChwcmV2Q2hpbGRyZW4gfHwgbmV4dENoaWxkcmVuKSB7XG4gICAgICBpZiAoIW5leHRDaGlsZHJlbiB8fCAhbmV4dENoaWxkcmVuLiRzdGFibGUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcmV2UHJvcHMgPT09IG5leHRQcm9wcykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoIXByZXZQcm9wcykge1xuICAgICAgcmV0dXJuICEhbmV4dFByb3BzO1xuICAgIH1cbiAgICBpZiAoIW5leHRQcm9wcykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBoYXNQcm9wc0NoYW5nZWQocHJldlByb3BzLCBuZXh0UHJvcHMsIGVtaXRzKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBoYXNQcm9wc0NoYW5nZWQocHJldlByb3BzLCBuZXh0UHJvcHMsIGVtaXRzT3B0aW9ucykge1xuICBjb25zdCBuZXh0S2V5cyA9IE9iamVjdC5rZXlzKG5leHRQcm9wcyk7XG4gIGlmIChuZXh0S2V5cy5sZW5ndGggIT09IE9iamVjdC5rZXlzKHByZXZQcm9wcykubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXh0S2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGtleSA9IG5leHRLZXlzW2ldO1xuICAgIGlmIChuZXh0UHJvcHNba2V5XSAhPT0gcHJldlByb3BzW2tleV0gJiYgIWlzRW1pdExpc3RlbmVyKGVtaXRzT3B0aW9ucywga2V5KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZUhPQ0hvc3RFbCh7IHZub2RlLCBwYXJlbnQgfSwgZWwpIHtcbiAgd2hpbGUgKHBhcmVudCkge1xuICAgIGNvbnN0IHJvb3QgPSBwYXJlbnQuc3ViVHJlZTtcbiAgICBpZiAocm9vdC5zdXNwZW5zZSAmJiByb290LnN1c3BlbnNlLmFjdGl2ZUJyYW5jaCA9PT0gdm5vZGUpIHtcbiAgICAgIHJvb3QuZWwgPSB2bm9kZS5lbDtcbiAgICB9XG4gICAgaWYgKHJvb3QgPT09IHZub2RlKSB7XG4gICAgICAodm5vZGUgPSBwYXJlbnQudm5vZGUpLmVsID0gZWw7XG4gICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgaW50ZXJuYWxPYmplY3RQcm90byA9IHt9O1xuY29uc3QgY3JlYXRlSW50ZXJuYWxPYmplY3QgPSAoKSA9PiBPYmplY3QuY3JlYXRlKGludGVybmFsT2JqZWN0UHJvdG8pO1xuY29uc3QgaXNJbnRlcm5hbE9iamVjdCA9IChvYmopID0+IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopID09PSBpbnRlcm5hbE9iamVjdFByb3RvO1xuXG5mdW5jdGlvbiBpbml0UHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBpc1N0YXRlZnVsLCBpc1NTUiA9IGZhbHNlKSB7XG4gIGNvbnN0IHByb3BzID0ge307XG4gIGNvbnN0IGF0dHJzID0gY3JlYXRlSW50ZXJuYWxPYmplY3QoKTtcbiAgaW5zdGFuY2UucHJvcHNEZWZhdWx0cyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBzZXRGdWxsUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBwcm9wcywgYXR0cnMpO1xuICBmb3IgKGNvbnN0IGtleSBpbiBpbnN0YW5jZS5wcm9wc09wdGlvbnNbMF0pIHtcbiAgICBpZiAoIShrZXkgaW4gcHJvcHMpKSB7XG4gICAgICBwcm9wc1trZXldID0gdm9pZCAwO1xuICAgIH1cbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHZhbGlkYXRlUHJvcHMocmF3UHJvcHMgfHwge30sIHByb3BzLCBpbnN0YW5jZSk7XG4gIH1cbiAgaWYgKGlzU3RhdGVmdWwpIHtcbiAgICBpbnN0YW5jZS5wcm9wcyA9IGlzU1NSID8gcHJvcHMgOiBzaGFsbG93UmVhY3RpdmUocHJvcHMpO1xuICB9IGVsc2Uge1xuICAgIGlmICghaW5zdGFuY2UudHlwZS5wcm9wcykge1xuICAgICAgaW5zdGFuY2UucHJvcHMgPSBhdHRycztcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zdGFuY2UucHJvcHMgPSBwcm9wcztcbiAgICB9XG4gIH1cbiAgaW5zdGFuY2UuYXR0cnMgPSBhdHRycztcbn1cbmZ1bmN0aW9uIGlzSW5IbXJDb250ZXh0KGluc3RhbmNlKSB7XG4gIHdoaWxlIChpbnN0YW5jZSkge1xuICAgIGlmIChpbnN0YW5jZS50eXBlLl9faG1ySWQpIHJldHVybiB0cnVlO1xuICAgIGluc3RhbmNlID0gaW5zdGFuY2UucGFyZW50O1xuICB9XG59XG5mdW5jdGlvbiB1cGRhdGVQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIHJhd1ByZXZQcm9wcywgb3B0aW1pemVkKSB7XG4gIGNvbnN0IHtcbiAgICBwcm9wcyxcbiAgICBhdHRycyxcbiAgICB2bm9kZTogeyBwYXRjaEZsYWcgfVxuICB9ID0gaW5zdGFuY2U7XG4gIGNvbnN0IHJhd0N1cnJlbnRQcm9wcyA9IHRvUmF3KHByb3BzKTtcbiAgY29uc3QgW29wdGlvbnNdID0gaW5zdGFuY2UucHJvcHNPcHRpb25zO1xuICBsZXQgaGFzQXR0cnNDaGFuZ2VkID0gZmFsc2U7XG4gIGlmIChcbiAgICAvLyBhbHdheXMgZm9yY2UgZnVsbCBkaWZmIGluIGRldlxuICAgIC8vIC0gIzE5NDIgaWYgaG1yIGlzIGVuYWJsZWQgd2l0aCBzZmMgY29tcG9uZW50XG4gICAgLy8gLSB2aXRlIzg3MiBub24tc2ZjIGNvbXBvbmVudCB1c2VkIGJ5IHNmYyBjb21wb25lbnRcbiAgICAhKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaXNJbkhtckNvbnRleHQoaW5zdGFuY2UpKSAmJiAob3B0aW1pemVkIHx8IHBhdGNoRmxhZyA+IDApICYmICEocGF0Y2hGbGFnICYgMTYpXG4gICkge1xuICAgIGlmIChwYXRjaEZsYWcgJiA4KSB7XG4gICAgICBjb25zdCBwcm9wc1RvVXBkYXRlID0gaW5zdGFuY2Uudm5vZGUuZHluYW1pY1Byb3BzO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wc1RvVXBkYXRlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBrZXkgPSBwcm9wc1RvVXBkYXRlW2ldO1xuICAgICAgICBpZiAoaXNFbWl0TGlzdGVuZXIoaW5zdGFuY2UuZW1pdHNPcHRpb25zLCBrZXkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWUgPSByYXdQcm9wc1trZXldO1xuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgIGlmIChoYXNPd24oYXR0cnMsIGtleSkpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gYXR0cnNba2V5XSkge1xuICAgICAgICAgICAgICBhdHRyc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgIGhhc0F0dHJzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbWVsaXplZEtleSA9IGNhbWVsaXplKGtleSk7XG4gICAgICAgICAgICBwcm9wc1tjYW1lbGl6ZWRLZXldID0gcmVzb2x2ZVByb3BWYWx1ZShcbiAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgcmF3Q3VycmVudFByb3BzLFxuICAgICAgICAgICAgICBjYW1lbGl6ZWRLZXksXG4gICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh2YWx1ZSAhPT0gYXR0cnNba2V5XSkge1xuICAgICAgICAgICAgYXR0cnNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKHNldEZ1bGxQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIHByb3BzLCBhdHRycykpIHtcbiAgICAgIGhhc0F0dHJzQ2hhbmdlZCA9IHRydWU7XG4gICAgfVxuICAgIGxldCBrZWJhYktleTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiByYXdDdXJyZW50UHJvcHMpIHtcbiAgICAgIGlmICghcmF3UHJvcHMgfHwgLy8gZm9yIGNhbWVsQ2FzZVxuICAgICAgIWhhc093bihyYXdQcm9wcywga2V5KSAmJiAvLyBpdCdzIHBvc3NpYmxlIHRoZSBvcmlnaW5hbCBwcm9wcyB3YXMgcGFzc2VkIGluIGFzIGtlYmFiLWNhc2VcbiAgICAgIC8vIGFuZCBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlICgjOTU1KVxuICAgICAgKChrZWJhYktleSA9IGh5cGhlbmF0ZShrZXkpKSA9PT0ga2V5IHx8ICFoYXNPd24ocmF3UHJvcHMsIGtlYmFiS2V5KSkpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICBpZiAocmF3UHJldlByb3BzICYmIC8vIGZvciBjYW1lbENhc2VcbiAgICAgICAgICAocmF3UHJldlByb3BzW2tleV0gIT09IHZvaWQgMCB8fCAvLyBmb3Iga2ViYWItY2FzZVxuICAgICAgICAgIHJhd1ByZXZQcm9wc1trZWJhYktleV0gIT09IHZvaWQgMCkpIHtcbiAgICAgICAgICAgIHByb3BzW2tleV0gPSByZXNvbHZlUHJvcFZhbHVlKFxuICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICByYXdDdXJyZW50UHJvcHMsXG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgdm9pZCAwLFxuICAgICAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIHByb3BzW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGF0dHJzICE9PSByYXdDdXJyZW50UHJvcHMpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJzKSB7XG4gICAgICAgIGlmICghcmF3UHJvcHMgfHwgIWhhc093bihyYXdQcm9wcywga2V5KSAmJiB0cnVlKSB7XG4gICAgICAgICAgZGVsZXRlIGF0dHJzW2tleV07XG4gICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoaGFzQXR0cnNDaGFuZ2VkKSB7XG4gICAgdHJpZ2dlcihpbnN0YW5jZS5hdHRycywgXCJzZXRcIiwgXCJcIik7XG4gIH1cbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB2YWxpZGF0ZVByb3BzKHJhd1Byb3BzIHx8IHt9LCBwcm9wcywgaW5zdGFuY2UpO1xuICB9XG59XG5mdW5jdGlvbiBzZXRGdWxsUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBwcm9wcywgYXR0cnMpIHtcbiAgY29uc3QgW29wdGlvbnMsIG5lZWRDYXN0S2V5c10gPSBpbnN0YW5jZS5wcm9wc09wdGlvbnM7XG4gIGxldCBoYXNBdHRyc0NoYW5nZWQgPSBmYWxzZTtcbiAgbGV0IHJhd0Nhc3RWYWx1ZXM7XG4gIGlmIChyYXdQcm9wcykge1xuICAgIGZvciAobGV0IGtleSBpbiByYXdQcm9wcykge1xuICAgICAgaWYgKGlzUmVzZXJ2ZWRQcm9wKGtleSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCB2YWx1ZSA9IHJhd1Byb3BzW2tleV07XG4gICAgICBsZXQgY2FtZWxLZXk7XG4gICAgICBpZiAob3B0aW9ucyAmJiBoYXNPd24ob3B0aW9ucywgY2FtZWxLZXkgPSBjYW1lbGl6ZShrZXkpKSkge1xuICAgICAgICBpZiAoIW5lZWRDYXN0S2V5cyB8fCAhbmVlZENhc3RLZXlzLmluY2x1ZGVzKGNhbWVsS2V5KSkge1xuICAgICAgICAgIHByb3BzW2NhbWVsS2V5XSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIChyYXdDYXN0VmFsdWVzIHx8IChyYXdDYXN0VmFsdWVzID0ge30pKVtjYW1lbEtleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghaXNFbWl0TGlzdGVuZXIoaW5zdGFuY2UuZW1pdHNPcHRpb25zLCBrZXkpKSB7XG4gICAgICAgIGlmICghKGtleSBpbiBhdHRycykgfHwgdmFsdWUgIT09IGF0dHJzW2tleV0pIHtcbiAgICAgICAgICBhdHRyc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAobmVlZENhc3RLZXlzKSB7XG4gICAgY29uc3QgcmF3Q3VycmVudFByb3BzID0gdG9SYXcocHJvcHMpO1xuICAgIGNvbnN0IGNhc3RWYWx1ZXMgPSByYXdDYXN0VmFsdWVzIHx8IEVNUFRZX09CSjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5lZWRDYXN0S2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qga2V5ID0gbmVlZENhc3RLZXlzW2ldO1xuICAgICAgcHJvcHNba2V5XSA9IHJlc29sdmVQcm9wVmFsdWUoXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHJhd0N1cnJlbnRQcm9wcyxcbiAgICAgICAga2V5LFxuICAgICAgICBjYXN0VmFsdWVzW2tleV0sXG4gICAgICAgIGluc3RhbmNlLFxuICAgICAgICAhaGFzT3duKGNhc3RWYWx1ZXMsIGtleSlcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBoYXNBdHRyc0NoYW5nZWQ7XG59XG5mdW5jdGlvbiByZXNvbHZlUHJvcFZhbHVlKG9wdGlvbnMsIHByb3BzLCBrZXksIHZhbHVlLCBpbnN0YW5jZSwgaXNBYnNlbnQpIHtcbiAgY29uc3Qgb3B0ID0gb3B0aW9uc1trZXldO1xuICBpZiAob3B0ICE9IG51bGwpIHtcbiAgICBjb25zdCBoYXNEZWZhdWx0ID0gaGFzT3duKG9wdCwgXCJkZWZhdWx0XCIpO1xuICAgIGlmIChoYXNEZWZhdWx0ICYmIHZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IG9wdC5kZWZhdWx0O1xuICAgICAgaWYgKG9wdC50eXBlICE9PSBGdW5jdGlvbiAmJiAhb3B0LnNraXBGYWN0b3J5ICYmIGlzRnVuY3Rpb24oZGVmYXVsdFZhbHVlKSkge1xuICAgICAgICBjb25zdCB7IHByb3BzRGVmYXVsdHMgfSA9IGluc3RhbmNlO1xuICAgICAgICBpZiAoa2V5IGluIHByb3BzRGVmYXVsdHMpIHtcbiAgICAgICAgICB2YWx1ZSA9IHByb3BzRGVmYXVsdHNba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCByZXNldCA9IHNldEN1cnJlbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgICAgICAgdmFsdWUgPSBwcm9wc0RlZmF1bHRzW2tleV0gPSBkZWZhdWx0VmFsdWUuY2FsbChcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBwcm9wc1xuICAgICAgICAgICk7XG4gICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoaW5zdGFuY2UuY2UpIHtcbiAgICAgICAgaW5zdGFuY2UuY2UuX3NldFByb3Aoa2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvcHRbMCAvKiBzaG91bGRDYXN0ICovXSkge1xuICAgICAgaWYgKGlzQWJzZW50ICYmICFoYXNEZWZhdWx0KSB7XG4gICAgICAgIHZhbHVlID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKG9wdFsxIC8qIHNob3VsZENhc3RUcnVlICovXSAmJiAodmFsdWUgPT09IFwiXCIgfHwgdmFsdWUgPT09IGh5cGhlbmF0ZShrZXkpKSkge1xuICAgICAgICB2YWx1ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmNvbnN0IG1peGluUHJvcHNDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gbm9ybWFsaXplUHJvcHNPcHRpb25zKGNvbXAsIGFwcENvbnRleHQsIGFzTWl4aW4gPSBmYWxzZSkge1xuICBjb25zdCBjYWNoZSA9IF9fVlVFX09QVElPTlNfQVBJX18gJiYgYXNNaXhpbiA/IG1peGluUHJvcHNDYWNoZSA6IGFwcENvbnRleHQucHJvcHNDYWNoZTtcbiAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGNvbXApO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgcmV0dXJuIGNhY2hlZDtcbiAgfVxuICBjb25zdCByYXcgPSBjb21wLnByb3BzO1xuICBjb25zdCBub3JtYWxpemVkID0ge307XG4gIGNvbnN0IG5lZWRDYXN0S2V5cyA9IFtdO1xuICBsZXQgaGFzRXh0ZW5kcyA9IGZhbHNlO1xuICBpZiAoX19WVUVfT1BUSU9OU19BUElfXyAmJiAhaXNGdW5jdGlvbihjb21wKSkge1xuICAgIGNvbnN0IGV4dGVuZFByb3BzID0gKHJhdzIpID0+IHtcbiAgICAgIGhhc0V4dGVuZHMgPSB0cnVlO1xuICAgICAgY29uc3QgW3Byb3BzLCBrZXlzXSA9IG5vcm1hbGl6ZVByb3BzT3B0aW9ucyhyYXcyLCBhcHBDb250ZXh0LCB0cnVlKTtcbiAgICAgIGV4dGVuZChub3JtYWxpemVkLCBwcm9wcyk7XG4gICAgICBpZiAoa2V5cykgbmVlZENhc3RLZXlzLnB1c2goLi4ua2V5cyk7XG4gICAgfTtcbiAgICBpZiAoIWFzTWl4aW4gJiYgYXBwQ29udGV4dC5taXhpbnMubGVuZ3RoKSB7XG4gICAgICBhcHBDb250ZXh0Lm1peGlucy5mb3JFYWNoKGV4dGVuZFByb3BzKTtcbiAgICB9XG4gICAgaWYgKGNvbXAuZXh0ZW5kcykge1xuICAgICAgZXh0ZW5kUHJvcHMoY29tcC5leHRlbmRzKTtcbiAgICB9XG4gICAgaWYgKGNvbXAubWl4aW5zKSB7XG4gICAgICBjb21wLm1peGlucy5mb3JFYWNoKGV4dGVuZFByb3BzKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFyYXcgJiYgIWhhc0V4dGVuZHMpIHtcbiAgICBpZiAoaXNPYmplY3QoY29tcCkpIHtcbiAgICAgIGNhY2hlLnNldChjb21wLCBFTVBUWV9BUlIpO1xuICAgIH1cbiAgICByZXR1cm4gRU1QVFlfQVJSO1xuICB9XG4gIGlmIChpc0FycmF5KHJhdykpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhdy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWlzU3RyaW5nKHJhd1tpXSkpIHtcbiAgICAgICAgd2FybiQxKGBwcm9wcyBtdXN0IGJlIHN0cmluZ3Mgd2hlbiB1c2luZyBhcnJheSBzeW50YXguYCwgcmF3W2ldKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBjYW1lbGl6ZShyYXdbaV0pO1xuICAgICAgaWYgKHZhbGlkYXRlUHJvcE5hbWUobm9ybWFsaXplZEtleSkpIHtcbiAgICAgICAgbm9ybWFsaXplZFtub3JtYWxpemVkS2V5XSA9IEVNUFRZX09CSjtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAocmF3KSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWlzT2JqZWN0KHJhdykpIHtcbiAgICAgIHdhcm4kMShgaW52YWxpZCBwcm9wcyBvcHRpb25zYCwgcmF3KTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcmF3KSB7XG4gICAgICBjb25zdCBub3JtYWxpemVkS2V5ID0gY2FtZWxpemUoa2V5KTtcbiAgICAgIGlmICh2YWxpZGF0ZVByb3BOYW1lKG5vcm1hbGl6ZWRLZXkpKSB7XG4gICAgICAgIGNvbnN0IG9wdCA9IHJhd1trZXldO1xuICAgICAgICBjb25zdCBwcm9wID0gbm9ybWFsaXplZFtub3JtYWxpemVkS2V5XSA9IGlzQXJyYXkob3B0KSB8fCBpc0Z1bmN0aW9uKG9wdCkgPyB7IHR5cGU6IG9wdCB9IDogZXh0ZW5kKHt9LCBvcHQpO1xuICAgICAgICBjb25zdCBwcm9wVHlwZSA9IHByb3AudHlwZTtcbiAgICAgICAgbGV0IHNob3VsZENhc3QgPSBmYWxzZTtcbiAgICAgICAgbGV0IHNob3VsZENhc3RUcnVlID0gdHJ1ZTtcbiAgICAgICAgaWYgKGlzQXJyYXkocHJvcFR5cGUpKSB7XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHByb3BUeXBlLmxlbmd0aDsgKytpbmRleCkge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHByb3BUeXBlW2luZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVOYW1lID0gaXNGdW5jdGlvbih0eXBlKSAmJiB0eXBlLm5hbWU7XG4gICAgICAgICAgICBpZiAodHlwZU5hbWUgPT09IFwiQm9vbGVhblwiKSB7XG4gICAgICAgICAgICAgIHNob3VsZENhc3QgPSB0cnVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZU5hbWUgPT09IFwiU3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgc2hvdWxkQ2FzdFRydWUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hvdWxkQ2FzdCA9IGlzRnVuY3Rpb24ocHJvcFR5cGUpICYmIHByb3BUeXBlLm5hbWUgPT09IFwiQm9vbGVhblwiO1xuICAgICAgICB9XG4gICAgICAgIHByb3BbMCAvKiBzaG91bGRDYXN0ICovXSA9IHNob3VsZENhc3Q7XG4gICAgICAgIHByb3BbMSAvKiBzaG91bGRDYXN0VHJ1ZSAqL10gPSBzaG91bGRDYXN0VHJ1ZTtcbiAgICAgICAgaWYgKHNob3VsZENhc3QgfHwgaGFzT3duKHByb3AsIFwiZGVmYXVsdFwiKSkge1xuICAgICAgICAgIG5lZWRDYXN0S2V5cy5wdXNoKG5vcm1hbGl6ZWRLZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNvbnN0IHJlcyA9IFtub3JtYWxpemVkLCBuZWVkQ2FzdEtleXNdO1xuICBpZiAoaXNPYmplY3QoY29tcCkpIHtcbiAgICBjYWNoZS5zZXQoY29tcCwgcmVzKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVQcm9wTmFtZShrZXkpIHtcbiAgaWYgKGtleVswXSAhPT0gXCIkXCIgJiYgIWlzUmVzZXJ2ZWRQcm9wKGtleSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FybiQxKGBJbnZhbGlkIHByb3AgbmFtZTogXCIke2tleX1cIiBpcyBhIHJlc2VydmVkIHByb3BlcnR5LmApO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGdldFR5cGUoY3Rvcikge1xuICBpZiAoY3RvciA9PT0gbnVsbCkge1xuICAgIHJldHVybiBcIm51bGxcIjtcbiAgfVxuICBpZiAodHlwZW9mIGN0b3IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiBjdG9yLm5hbWUgfHwgXCJcIjtcbiAgfSBlbHNlIGlmICh0eXBlb2YgY3RvciA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IG5hbWUgPSBjdG9yLmNvbnN0cnVjdG9yICYmIGN0b3IuY29uc3RydWN0b3IubmFtZTtcbiAgICByZXR1cm4gbmFtZSB8fCBcIlwiO1xuICB9XG4gIHJldHVybiBcIlwiO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVQcm9wcyhyYXdQcm9wcywgcHJvcHMsIGluc3RhbmNlKSB7XG4gIGNvbnN0IHJlc29sdmVkVmFsdWVzID0gdG9SYXcocHJvcHMpO1xuICBjb25zdCBvcHRpb25zID0gaW5zdGFuY2UucHJvcHNPcHRpb25zWzBdO1xuICBjb25zdCBjYW1lbGl6ZVByb3BzS2V5ID0gT2JqZWN0LmtleXMocmF3UHJvcHMpLm1hcCgoa2V5KSA9PiBjYW1lbGl6ZShrZXkpKTtcbiAgZm9yIChjb25zdCBrZXkgaW4gb3B0aW9ucykge1xuICAgIGxldCBvcHQgPSBvcHRpb25zW2tleV07XG4gICAgaWYgKG9wdCA9PSBudWxsKSBjb250aW51ZTtcbiAgICB2YWxpZGF0ZVByb3AoXG4gICAgICBrZXksXG4gICAgICByZXNvbHZlZFZhbHVlc1trZXldLFxuICAgICAgb3B0LFxuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHNoYWxsb3dSZWFkb25seShyZXNvbHZlZFZhbHVlcykgOiByZXNvbHZlZFZhbHVlcyxcbiAgICAgICFjYW1lbGl6ZVByb3BzS2V5LmluY2x1ZGVzKGtleSlcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3AobmFtZSwgdmFsdWUsIHByb3AsIHByb3BzLCBpc0Fic2VudCkge1xuICBjb25zdCB7IHR5cGUsIHJlcXVpcmVkLCB2YWxpZGF0b3IsIHNraXBDaGVjayB9ID0gcHJvcDtcbiAgaWYgKHJlcXVpcmVkICYmIGlzQWJzZW50KSB7XG4gICAgd2FybiQxKCdNaXNzaW5nIHJlcXVpcmVkIHByb3A6IFwiJyArIG5hbWUgKyAnXCInKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHZhbHVlID09IG51bGwgJiYgIXJlcXVpcmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh0eXBlICE9IG51bGwgJiYgdHlwZSAhPT0gdHJ1ZSAmJiAhc2tpcENoZWNrKSB7XG4gICAgbGV0IGlzVmFsaWQgPSBmYWxzZTtcbiAgICBjb25zdCB0eXBlcyA9IGlzQXJyYXkodHlwZSkgPyB0eXBlIDogW3R5cGVdO1xuICAgIGNvbnN0IGV4cGVjdGVkVHlwZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aCAmJiAhaXNWYWxpZDsgaSsrKSB7XG4gICAgICBjb25zdCB7IHZhbGlkLCBleHBlY3RlZFR5cGUgfSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVzW2ldKTtcbiAgICAgIGV4cGVjdGVkVHlwZXMucHVzaChleHBlY3RlZFR5cGUgfHwgXCJcIik7XG4gICAgICBpc1ZhbGlkID0gdmFsaWQ7XG4gICAgfVxuICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgd2FybiQxKGdldEludmFsaWRUeXBlTWVzc2FnZShuYW1lLCB2YWx1ZSwgZXhwZWN0ZWRUeXBlcykpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBpZiAodmFsaWRhdG9yICYmICF2YWxpZGF0b3IodmFsdWUsIHByb3BzKSkge1xuICAgIHdhcm4kMSgnSW52YWxpZCBwcm9wOiBjdXN0b20gdmFsaWRhdG9yIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBuYW1lICsgJ1wiLicpO1xuICB9XG59XG5jb25zdCBpc1NpbXBsZVR5cGUgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChcbiAgXCJTdHJpbmcsTnVtYmVyLEJvb2xlYW4sRnVuY3Rpb24sU3ltYm9sLEJpZ0ludFwiXG4pO1xuZnVuY3Rpb24gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZSkge1xuICBsZXQgdmFsaWQ7XG4gIGNvbnN0IGV4cGVjdGVkVHlwZSA9IGdldFR5cGUodHlwZSk7XG4gIGlmIChleHBlY3RlZFR5cGUgPT09IFwibnVsbFwiKSB7XG4gICAgdmFsaWQgPSB2YWx1ZSA9PT0gbnVsbDtcbiAgfSBlbHNlIGlmIChpc1NpbXBsZVR5cGUoZXhwZWN0ZWRUeXBlKSkge1xuICAgIGNvbnN0IHQgPSB0eXBlb2YgdmFsdWU7XG4gICAgdmFsaWQgPSB0ID09PSBleHBlY3RlZFR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoIXZhbGlkICYmIHQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlO1xuICAgIH1cbiAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09IFwiT2JqZWN0XCIpIHtcbiAgICB2YWxpZCA9IGlzT2JqZWN0KHZhbHVlKTtcbiAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09IFwiQXJyYXlcIikge1xuICAgIHZhbGlkID0gaXNBcnJheSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB2YWxpZCxcbiAgICBleHBlY3RlZFR5cGVcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldEludmFsaWRUeXBlTWVzc2FnZShuYW1lLCB2YWx1ZSwgZXhwZWN0ZWRUeXBlcykge1xuICBpZiAoZXhwZWN0ZWRUeXBlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gYFByb3AgdHlwZSBbXSBmb3IgcHJvcCBcIiR7bmFtZX1cIiB3b24ndCBtYXRjaCBhbnl0aGluZy4gRGlkIHlvdSBtZWFuIHRvIHVzZSB0eXBlIEFycmF5IGluc3RlYWQ/YDtcbiAgfVxuICBsZXQgbWVzc2FnZSA9IGBJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJHtuYW1lfVwiLiBFeHBlY3RlZCAke2V4cGVjdGVkVHlwZXMubWFwKGNhcGl0YWxpemUpLmpvaW4oXCIgfCBcIil9YDtcbiAgY29uc3QgZXhwZWN0ZWRUeXBlID0gZXhwZWN0ZWRUeXBlc1swXTtcbiAgY29uc3QgcmVjZWl2ZWRUeXBlID0gdG9SYXdUeXBlKHZhbHVlKTtcbiAgY29uc3QgZXhwZWN0ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIGV4cGVjdGVkVHlwZSk7XG4gIGNvbnN0IHJlY2VpdmVkVmFsdWUgPSBzdHlsZVZhbHVlKHZhbHVlLCByZWNlaXZlZFR5cGUpO1xuICBpZiAoZXhwZWN0ZWRUeXBlcy5sZW5ndGggPT09IDEgJiYgaXNFeHBsaWNhYmxlKGV4cGVjdGVkVHlwZSkgJiYgIWlzQm9vbGVhbihleHBlY3RlZFR5cGUsIHJlY2VpdmVkVHlwZSkpIHtcbiAgICBtZXNzYWdlICs9IGAgd2l0aCB2YWx1ZSAke2V4cGVjdGVkVmFsdWV9YDtcbiAgfVxuICBtZXNzYWdlICs9IGAsIGdvdCAke3JlY2VpdmVkVHlwZX0gYDtcbiAgaWYgKGlzRXhwbGljYWJsZShyZWNlaXZlZFR5cGUpKSB7XG4gICAgbWVzc2FnZSArPSBgd2l0aCB2YWx1ZSAke3JlY2VpdmVkVmFsdWV9LmA7XG4gIH1cbiAgcmV0dXJuIG1lc3NhZ2U7XG59XG5mdW5jdGlvbiBzdHlsZVZhbHVlKHZhbHVlLCB0eXBlKSB7XG4gIGlmICh0eXBlID09PSBcIlN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGBcIiR7dmFsdWV9XCJgO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiTnVtYmVyXCIpIHtcbiAgICByZXR1cm4gYCR7TnVtYmVyKHZhbHVlKX1gO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBgJHt2YWx1ZX1gO1xuICB9XG59XG5mdW5jdGlvbiBpc0V4cGxpY2FibGUodHlwZSkge1xuICBjb25zdCBleHBsaWNpdFR5cGVzID0gW1wic3RyaW5nXCIsIFwibnVtYmVyXCIsIFwiYm9vbGVhblwiXTtcbiAgcmV0dXJuIGV4cGxpY2l0VHlwZXMuc29tZSgoZWxlbSkgPT4gdHlwZS50b0xvd2VyQ2FzZSgpID09PSBlbGVtKTtcbn1cbmZ1bmN0aW9uIGlzQm9vbGVhbiguLi5hcmdzKSB7XG4gIHJldHVybiBhcmdzLnNvbWUoKGVsZW0pID0+IGVsZW0udG9Mb3dlckNhc2UoKSA9PT0gXCJib29sZWFuXCIpO1xufVxuXG5jb25zdCBpc0ludGVybmFsS2V5ID0gKGtleSkgPT4ga2V5ID09PSBcIl9cIiB8fCBrZXkgPT09IFwiX2N0eFwiIHx8IGtleSA9PT0gXCIkc3RhYmxlXCI7XG5jb25zdCBub3JtYWxpemVTbG90VmFsdWUgPSAodmFsdWUpID0+IGlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKG5vcm1hbGl6ZVZOb2RlKSA6IFtub3JtYWxpemVWTm9kZSh2YWx1ZSldO1xuY29uc3Qgbm9ybWFsaXplU2xvdCA9IChrZXksIHJhd1Nsb3QsIGN0eCkgPT4ge1xuICBpZiAocmF3U2xvdC5fbikge1xuICAgIHJldHVybiByYXdTbG90O1xuICB9XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB3aXRoQ3R4KCguLi5hcmdzKSA9PiB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY3VycmVudEluc3RhbmNlICYmICEoY3R4ID09PSBudWxsICYmIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSkgJiYgIShjdHggJiYgY3R4LnJvb3QgIT09IGN1cnJlbnRJbnN0YW5jZS5yb290KSkge1xuICAgICAgd2FybiQxKFxuICAgICAgICBgU2xvdCBcIiR7a2V5fVwiIGludm9rZWQgb3V0c2lkZSBvZiB0aGUgcmVuZGVyIGZ1bmN0aW9uOiB0aGlzIHdpbGwgbm90IHRyYWNrIGRlcGVuZGVuY2llcyB1c2VkIGluIHRoZSBzbG90LiBJbnZva2UgdGhlIHNsb3QgZnVuY3Rpb24gaW5zaWRlIHRoZSByZW5kZXIgZnVuY3Rpb24gaW5zdGVhZC5gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gbm9ybWFsaXplU2xvdFZhbHVlKHJhd1Nsb3QoLi4uYXJncykpO1xuICB9LCBjdHgpO1xuICBub3JtYWxpemVkLl9jID0gZmFsc2U7XG4gIHJldHVybiBub3JtYWxpemVkO1xufTtcbmNvbnN0IG5vcm1hbGl6ZU9iamVjdFNsb3RzID0gKHJhd1Nsb3RzLCBzbG90cywgaW5zdGFuY2UpID0+IHtcbiAgY29uc3QgY3R4ID0gcmF3U2xvdHMuX2N0eDtcbiAgZm9yIChjb25zdCBrZXkgaW4gcmF3U2xvdHMpIHtcbiAgICBpZiAoaXNJbnRlcm5hbEtleShrZXkpKSBjb250aW51ZTtcbiAgICBjb25zdCB2YWx1ZSA9IHJhd1Nsb3RzW2tleV07XG4gICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICBzbG90c1trZXldID0gbm9ybWFsaXplU2xvdChrZXksIHZhbHVlLCBjdHgpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdHJ1ZSkge1xuICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgYE5vbi1mdW5jdGlvbiB2YWx1ZSBlbmNvdW50ZXJlZCBmb3Igc2xvdCBcIiR7a2V5fVwiLiBQcmVmZXIgZnVuY3Rpb24gc2xvdHMgZm9yIGJldHRlciBwZXJmb3JtYW5jZS5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplU2xvdFZhbHVlKHZhbHVlKTtcbiAgICAgIHNsb3RzW2tleV0gPSAoKSA9PiBub3JtYWxpemVkO1xuICAgIH1cbiAgfVxufTtcbmNvbnN0IG5vcm1hbGl6ZVZOb2RlU2xvdHMgPSAoaW5zdGFuY2UsIGNoaWxkcmVuKSA9PiB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpc0tlZXBBbGl2ZShpbnN0YW5jZS52bm9kZSkgJiYgdHJ1ZSkge1xuICAgIHdhcm4kMShcbiAgICAgIGBOb24tZnVuY3Rpb24gdmFsdWUgZW5jb3VudGVyZWQgZm9yIGRlZmF1bHQgc2xvdC4gUHJlZmVyIGZ1bmN0aW9uIHNsb3RzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuYFxuICAgICk7XG4gIH1cbiAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVNsb3RWYWx1ZShjaGlsZHJlbik7XG4gIGluc3RhbmNlLnNsb3RzLmRlZmF1bHQgPSAoKSA9PiBub3JtYWxpemVkO1xufTtcbmNvbnN0IGFzc2lnblNsb3RzID0gKHNsb3RzLCBjaGlsZHJlbiwgb3B0aW1pemVkKSA9PiB7XG4gIGZvciAoY29uc3Qga2V5IGluIGNoaWxkcmVuKSB7XG4gICAgaWYgKG9wdGltaXplZCB8fCAhaXNJbnRlcm5hbEtleShrZXkpKSB7XG4gICAgICBzbG90c1trZXldID0gY2hpbGRyZW5ba2V5XTtcbiAgICB9XG4gIH1cbn07XG5jb25zdCBpbml0U2xvdHMgPSAoaW5zdGFuY2UsIGNoaWxkcmVuLCBvcHRpbWl6ZWQpID0+IHtcbiAgY29uc3Qgc2xvdHMgPSBpbnN0YW5jZS5zbG90cyA9IGNyZWF0ZUludGVybmFsT2JqZWN0KCk7XG4gIGlmIChpbnN0YW5jZS52bm9kZS5zaGFwZUZsYWcgJiAzMikge1xuICAgIGNvbnN0IHR5cGUgPSBjaGlsZHJlbi5fO1xuICAgIGlmICh0eXBlKSB7XG4gICAgICBhc3NpZ25TbG90cyhzbG90cywgY2hpbGRyZW4sIG9wdGltaXplZCk7XG4gICAgICBpZiAob3B0aW1pemVkKSB7XG4gICAgICAgIGRlZihzbG90cywgXCJfXCIsIHR5cGUsIHRydWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBub3JtYWxpemVPYmplY3RTbG90cyhjaGlsZHJlbiwgc2xvdHMpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjaGlsZHJlbikge1xuICAgIG5vcm1hbGl6ZVZOb2RlU2xvdHMoaW5zdGFuY2UsIGNoaWxkcmVuKTtcbiAgfVxufTtcbmNvbnN0IHVwZGF0ZVNsb3RzID0gKGluc3RhbmNlLCBjaGlsZHJlbiwgb3B0aW1pemVkKSA9PiB7XG4gIGNvbnN0IHsgdm5vZGUsIHNsb3RzIH0gPSBpbnN0YW5jZTtcbiAgbGV0IG5lZWREZWxldGlvbkNoZWNrID0gdHJ1ZTtcbiAgbGV0IGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IEVNUFRZX09CSjtcbiAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDMyKSB7XG4gICAgY29uc3QgdHlwZSA9IGNoaWxkcmVuLl87XG4gICAgaWYgKHR5cGUpIHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGlzSG1yVXBkYXRpbmcpIHtcbiAgICAgICAgYXNzaWduU2xvdHMoc2xvdHMsIGNoaWxkcmVuLCBvcHRpbWl6ZWQpO1xuICAgICAgICB0cmlnZ2VyKGluc3RhbmNlLCBcInNldFwiLCBcIiRzbG90c1wiKTtcbiAgICAgIH0gZWxzZSBpZiAob3B0aW1pemVkICYmIHR5cGUgPT09IDEpIHtcbiAgICAgICAgbmVlZERlbGV0aW9uQ2hlY2sgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFzc2lnblNsb3RzKHNsb3RzLCBjaGlsZHJlbiwgb3B0aW1pemVkKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbmVlZERlbGV0aW9uQ2hlY2sgPSAhY2hpbGRyZW4uJHN0YWJsZTtcbiAgICAgIG5vcm1hbGl6ZU9iamVjdFNsb3RzKGNoaWxkcmVuLCBzbG90cyk7XG4gICAgfVxuICAgIGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IGNoaWxkcmVuO1xuICB9IGVsc2UgaWYgKGNoaWxkcmVuKSB7XG4gICAgbm9ybWFsaXplVk5vZGVTbG90cyhpbnN0YW5jZSwgY2hpbGRyZW4pO1xuICAgIGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IHsgZGVmYXVsdDogMSB9O1xuICB9XG4gIGlmIChuZWVkRGVsZXRpb25DaGVjaykge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHNsb3RzKSB7XG4gICAgICBpZiAoIWlzSW50ZXJuYWxLZXkoa2V5KSAmJiBkZWxldGlvbkNvbXBhcmlzb25UYXJnZXRba2V5XSA9PSBudWxsKSB7XG4gICAgICAgIGRlbGV0ZSBzbG90c1trZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxubGV0IHN1cHBvcnRlZDtcbmxldCBwZXJmO1xuZnVuY3Rpb24gc3RhcnRNZWFzdXJlKGluc3RhbmNlLCB0eXBlKSB7XG4gIGlmIChpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy5wZXJmb3JtYW5jZSAmJiBpc1N1cHBvcnRlZCgpKSB7XG4gICAgcGVyZi5tYXJrKGB2dWUtJHt0eXBlfS0ke2luc3RhbmNlLnVpZH1gKTtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICBkZXZ0b29sc1BlcmZTdGFydChpbnN0YW5jZSwgdHlwZSwgaXNTdXBwb3J0ZWQoKSA/IHBlcmYubm93KCkgOiBEYXRlLm5vdygpKTtcbiAgfVxufVxuZnVuY3Rpb24gZW5kTWVhc3VyZShpbnN0YW5jZSwgdHlwZSkge1xuICBpZiAoaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcucGVyZm9ybWFuY2UgJiYgaXNTdXBwb3J0ZWQoKSkge1xuICAgIGNvbnN0IHN0YXJ0VGFnID0gYHZ1ZS0ke3R5cGV9LSR7aW5zdGFuY2UudWlkfWA7XG4gICAgY29uc3QgZW5kVGFnID0gc3RhcnRUYWcgKyBgOmVuZGA7XG4gICAgY29uc3QgbWVhc3VyZU5hbWUgPSBgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZShpbnN0YW5jZSwgaW5zdGFuY2UudHlwZSl9PiAke3R5cGV9YDtcbiAgICBwZXJmLm1hcmsoZW5kVGFnKTtcbiAgICBwZXJmLm1lYXN1cmUobWVhc3VyZU5hbWUsIHN0YXJ0VGFnLCBlbmRUYWcpO1xuICAgIHBlcmYuY2xlYXJNZWFzdXJlcyhtZWFzdXJlTmFtZSk7XG4gICAgcGVyZi5jbGVhck1hcmtzKHN0YXJ0VGFnKTtcbiAgICBwZXJmLmNsZWFyTWFya3MoZW5kVGFnKTtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICBkZXZ0b29sc1BlcmZFbmQoaW5zdGFuY2UsIHR5cGUsIGlzU3VwcG9ydGVkKCkgPyBwZXJmLm5vdygpIDogRGF0ZS5ub3coKSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzU3VwcG9ydGVkKCkge1xuICBpZiAoc3VwcG9ydGVkICE9PSB2b2lkIDApIHtcbiAgICByZXR1cm4gc3VwcG9ydGVkO1xuICB9XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5wZXJmb3JtYW5jZSkge1xuICAgIHN1cHBvcnRlZCA9IHRydWU7XG4gICAgcGVyZiA9IHdpbmRvdy5wZXJmb3JtYW5jZTtcbiAgfSBlbHNlIHtcbiAgICBzdXBwb3J0ZWQgPSBmYWxzZTtcbiAgfVxuICByZXR1cm4gc3VwcG9ydGVkO1xufVxuXG5mdW5jdGlvbiBpbml0RmVhdHVyZUZsYWdzKCkge1xuICBjb25zdCBuZWVkV2FybiA9IFtdO1xuICBpZiAodHlwZW9mIF9fVlVFX09QVElPTlNfQVBJX18gIT09IFwiYm9vbGVhblwiKSB7XG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBuZWVkV2Fybi5wdXNoKGBfX1ZVRV9PUFRJT05TX0FQSV9fYCk7XG4gICAgZ2V0R2xvYmFsVGhpcygpLl9fVlVFX09QVElPTlNfQVBJX18gPSB0cnVlO1xuICB9XG4gIGlmICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSBcImJvb2xlYW5cIikge1xuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgbmVlZFdhcm4ucHVzaChgX19WVUVfUFJPRF9ERVZUT09MU19fYCk7XG4gICAgZ2V0R2xvYmFsVGhpcygpLl9fVlVFX1BST0RfREVWVE9PTFNfXyA9IGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fICE9PSBcImJvb2xlYW5cIikge1xuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgbmVlZFdhcm4ucHVzaChgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fYCk7XG4gICAgZ2V0R2xvYmFsVGhpcygpLl9fVlVFX1BST0RfSFlEUkFUSU9OX01JU01BVENIX0RFVEFJTFNfXyA9IGZhbHNlO1xuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIG5lZWRXYXJuLmxlbmd0aCkge1xuICAgIGNvbnN0IG11bHRpID0gbmVlZFdhcm4ubGVuZ3RoID4gMTtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBgRmVhdHVyZSBmbGFnJHttdWx0aSA/IGBzYCA6IGBgfSAke25lZWRXYXJuLmpvaW4oXCIsIFwiKX0gJHttdWx0aSA/IGBhcmVgIDogYGlzYH0gbm90IGV4cGxpY2l0bHkgZGVmaW5lZC4gWW91IGFyZSBydW5uaW5nIHRoZSBlc20tYnVuZGxlciBidWlsZCBvZiBWdWUsIHdoaWNoIGV4cGVjdHMgdGhlc2UgY29tcGlsZS10aW1lIGZlYXR1cmUgZmxhZ3MgdG8gYmUgZ2xvYmFsbHkgaW5qZWN0ZWQgdmlhIHRoZSBidW5kbGVyIGNvbmZpZyBpbiBvcmRlciB0byBnZXQgYmV0dGVyIHRyZWUtc2hha2luZyBpbiB0aGUgcHJvZHVjdGlvbiBidW5kbGUuXG5cbkZvciBtb3JlIGRldGFpbHMsIHNlZSBodHRwczovL2xpbmsudnVlanMub3JnL2ZlYXR1cmUtZmxhZ3MuYFxuICAgICk7XG4gIH1cbn1cblxuY29uc3QgcXVldWVQb3N0UmVuZGVyRWZmZWN0ID0gcXVldWVFZmZlY3RXaXRoU3VzcGVuc2UgO1xuZnVuY3Rpb24gY3JlYXRlUmVuZGVyZXIob3B0aW9ucykge1xuICByZXR1cm4gYmFzZUNyZWF0ZVJlbmRlcmVyKG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gY3JlYXRlSHlkcmF0aW9uUmVuZGVyZXIob3B0aW9ucykge1xuICByZXR1cm4gYmFzZUNyZWF0ZVJlbmRlcmVyKG9wdGlvbnMsIGNyZWF0ZUh5ZHJhdGlvbkZ1bmN0aW9ucyk7XG59XG5mdW5jdGlvbiBiYXNlQ3JlYXRlUmVuZGVyZXIob3B0aW9ucywgY3JlYXRlSHlkcmF0aW9uRm5zKSB7XG4gIHtcbiAgICBpbml0RmVhdHVyZUZsYWdzKCk7XG4gIH1cbiAgY29uc3QgdGFyZ2V0ID0gZ2V0R2xvYmFsVGhpcygpO1xuICB0YXJnZXQuX19WVUVfXyA9IHRydWU7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgIHNldERldnRvb2xzSG9vayQxKHRhcmdldC5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fLCB0YXJnZXQpO1xuICB9XG4gIGNvbnN0IHtcbiAgICBpbnNlcnQ6IGhvc3RJbnNlcnQsXG4gICAgcmVtb3ZlOiBob3N0UmVtb3ZlLFxuICAgIHBhdGNoUHJvcDogaG9zdFBhdGNoUHJvcCxcbiAgICBjcmVhdGVFbGVtZW50OiBob3N0Q3JlYXRlRWxlbWVudCxcbiAgICBjcmVhdGVUZXh0OiBob3N0Q3JlYXRlVGV4dCxcbiAgICBjcmVhdGVDb21tZW50OiBob3N0Q3JlYXRlQ29tbWVudCxcbiAgICBzZXRUZXh0OiBob3N0U2V0VGV4dCxcbiAgICBzZXRFbGVtZW50VGV4dDogaG9zdFNldEVsZW1lbnRUZXh0LFxuICAgIHBhcmVudE5vZGU6IGhvc3RQYXJlbnROb2RlLFxuICAgIG5leHRTaWJsaW5nOiBob3N0TmV4dFNpYmxpbmcsXG4gICAgc2V0U2NvcGVJZDogaG9zdFNldFNjb3BlSWQgPSBOT09QLFxuICAgIGluc2VydFN0YXRpY0NvbnRlbnQ6IGhvc3RJbnNlcnRTdGF0aWNDb250ZW50XG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBwYXRjaCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yID0gbnVsbCwgcGFyZW50Q29tcG9uZW50ID0gbnVsbCwgcGFyZW50U3VzcGVuc2UgPSBudWxsLCBuYW1lc3BhY2UgPSB2b2lkIDAsIHNsb3RTY29wZUlkcyA9IG51bGwsIG9wdGltaXplZCA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaXNIbXJVcGRhdGluZyA/IGZhbHNlIDogISFuMi5keW5hbWljQ2hpbGRyZW4pID0+IHtcbiAgICBpZiAobjEgPT09IG4yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChuMSAmJiAhaXNTYW1lVk5vZGVUeXBlKG4xLCBuMikpIHtcbiAgICAgIGFuY2hvciA9IGdldE5leHRIb3N0Tm9kZShuMSk7XG4gICAgICB1bm1vdW50KG4xLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgIG4xID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKG4yLnBhdGNoRmxhZyA9PT0gLTIpIHtcbiAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgbjIuZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyB0eXBlLCByZWYsIHNoYXBlRmxhZyB9ID0gbjI7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIFRleHQ6XG4gICAgICAgIHByb2Nlc3NUZXh0KG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29tbWVudDpcbiAgICAgICAgcHJvY2Vzc0NvbW1lbnROb2RlKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgU3RhdGljOlxuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgICAgIG1vdW50U3RhdGljTm9kZShuMiwgY29udGFpbmVyLCBhbmNob3IsIG5hbWVzcGFjZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHBhdGNoU3RhdGljTm9kZShuMSwgbjIsIGNvbnRhaW5lciwgbmFtZXNwYWNlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRnJhZ21lbnQ6XG4gICAgICAgIHByb2Nlc3NGcmFnbWVudChcbiAgICAgICAgICBuMSxcbiAgICAgICAgICBuMixcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAxKSB7XG4gICAgICAgICAgcHJvY2Vzc0VsZW1lbnQoXG4gICAgICAgICAgICBuMSxcbiAgICAgICAgICAgIG4yLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHNoYXBlRmxhZyAmIDYpIHtcbiAgICAgICAgICBwcm9jZXNzQ29tcG9uZW50KFxuICAgICAgICAgICAgbjEsXG4gICAgICAgICAgICBuMixcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChzaGFwZUZsYWcgJiA2NCkge1xuICAgICAgICAgIHR5cGUucHJvY2VzcyhcbiAgICAgICAgICAgIG4xLFxuICAgICAgICAgICAgbjIsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZCxcbiAgICAgICAgICAgIGludGVybmFsc1xuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgICAgICAgdHlwZS5wcm9jZXNzKFxuICAgICAgICAgICAgbjEsXG4gICAgICAgICAgICBuMixcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkLFxuICAgICAgICAgICAgaW50ZXJuYWxzXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgd2FybiQxKFwiSW52YWxpZCBWTm9kZSB0eXBlOlwiLCB0eXBlLCBgKCR7dHlwZW9mIHR5cGV9KWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChyZWYgIT0gbnVsbCAmJiBwYXJlbnRDb21wb25lbnQpIHtcbiAgICAgIHNldFJlZihyZWYsIG4xICYmIG4xLnJlZiwgcGFyZW50U3VzcGVuc2UsIG4yIHx8IG4xLCAhbjIpO1xuICAgIH0gZWxzZSBpZiAocmVmID09IG51bGwgJiYgbjEgJiYgbjEucmVmICE9IG51bGwpIHtcbiAgICAgIHNldFJlZihuMS5yZWYsIG51bGwsIHBhcmVudFN1c3BlbnNlLCBuMSwgdHJ1ZSk7XG4gICAgfVxuICB9O1xuICBjb25zdCBwcm9jZXNzVGV4dCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yKSA9PiB7XG4gICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgIGhvc3RJbnNlcnQoXG4gICAgICAgIG4yLmVsID0gaG9zdENyZWF0ZVRleHQobjIuY2hpbGRyZW4pLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvclxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZWwgPSBuMi5lbCA9IG4xLmVsO1xuICAgICAgaWYgKG4yLmNoaWxkcmVuICE9PSBuMS5jaGlsZHJlbikge1xuICAgICAgICBob3N0U2V0VGV4dChlbCwgbjIuY2hpbGRyZW4pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgcHJvY2Vzc0NvbW1lbnROb2RlID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpID0+IHtcbiAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgaG9zdEluc2VydChcbiAgICAgICAgbjIuZWwgPSBob3N0Q3JlYXRlQ29tbWVudChuMi5jaGlsZHJlbiB8fCBcIlwiKSxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3JcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG4yLmVsID0gbjEuZWw7XG4gICAgfVxuICB9O1xuICBjb25zdCBtb3VudFN0YXRpY05vZGUgPSAobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBuYW1lc3BhY2UpID0+IHtcbiAgICBbbjIuZWwsIG4yLmFuY2hvcl0gPSBob3N0SW5zZXJ0U3RhdGljQ29udGVudChcbiAgICAgIG4yLmNoaWxkcmVuLFxuICAgICAgY29udGFpbmVyLFxuICAgICAgYW5jaG9yLFxuICAgICAgbmFtZXNwYWNlLFxuICAgICAgbjIuZWwsXG4gICAgICBuMi5hbmNob3JcbiAgICApO1xuICB9O1xuICBjb25zdCBwYXRjaFN0YXRpY05vZGUgPSAobjEsIG4yLCBjb250YWluZXIsIG5hbWVzcGFjZSkgPT4ge1xuICAgIGlmIChuMi5jaGlsZHJlbiAhPT0gbjEuY2hpbGRyZW4pIHtcbiAgICAgIGNvbnN0IGFuY2hvciA9IGhvc3ROZXh0U2libGluZyhuMS5hbmNob3IpO1xuICAgICAgcmVtb3ZlU3RhdGljTm9kZShuMSk7XG4gICAgICBbbjIuZWwsIG4yLmFuY2hvcl0gPSBob3N0SW5zZXJ0U3RhdGljQ29udGVudChcbiAgICAgICAgbjIuY2hpbGRyZW4sXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBuYW1lc3BhY2VcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG4yLmVsID0gbjEuZWw7XG4gICAgICBuMi5hbmNob3IgPSBuMS5hbmNob3I7XG4gICAgfVxuICB9O1xuICBjb25zdCBtb3ZlU3RhdGljTm9kZSA9ICh7IGVsLCBhbmNob3IgfSwgY29udGFpbmVyLCBuZXh0U2libGluZykgPT4ge1xuICAgIGxldCBuZXh0O1xuICAgIHdoaWxlIChlbCAmJiBlbCAhPT0gYW5jaG9yKSB7XG4gICAgICBuZXh0ID0gaG9zdE5leHRTaWJsaW5nKGVsKTtcbiAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgbmV4dFNpYmxpbmcpO1xuICAgICAgZWwgPSBuZXh0O1xuICAgIH1cbiAgICBob3N0SW5zZXJ0KGFuY2hvciwgY29udGFpbmVyLCBuZXh0U2libGluZyk7XG4gIH07XG4gIGNvbnN0IHJlbW92ZVN0YXRpY05vZGUgPSAoeyBlbCwgYW5jaG9yIH0pID0+IHtcbiAgICBsZXQgbmV4dDtcbiAgICB3aGlsZSAoZWwgJiYgZWwgIT09IGFuY2hvcikge1xuICAgICAgbmV4dCA9IGhvc3ROZXh0U2libGluZyhlbCk7XG4gICAgICBob3N0UmVtb3ZlKGVsKTtcbiAgICAgIGVsID0gbmV4dDtcbiAgICB9XG4gICAgaG9zdFJlbW92ZShhbmNob3IpO1xuICB9O1xuICBjb25zdCBwcm9jZXNzRWxlbWVudCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgaWYgKG4yLnR5cGUgPT09IFwic3ZnXCIpIHtcbiAgICAgIG5hbWVzcGFjZSA9IFwic3ZnXCI7XG4gICAgfSBlbHNlIGlmIChuMi50eXBlID09PSBcIm1hdGhcIikge1xuICAgICAgbmFtZXNwYWNlID0gXCJtYXRobWxcIjtcbiAgICB9XG4gICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgIG1vdW50RWxlbWVudChcbiAgICAgICAgbjIsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjdXN0b21FbGVtZW50ID0gISEobjEuZWwgJiYgbjEuZWwuX2lzVnVlQ0UpID8gbjEuZWwgOiBudWxsO1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGN1c3RvbUVsZW1lbnQpIHtcbiAgICAgICAgICBjdXN0b21FbGVtZW50Ll9iZWdpblBhdGNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgcGF0Y2hFbGVtZW50KFxuICAgICAgICAgIG4xLFxuICAgICAgICAgIG4yLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKGN1c3RvbUVsZW1lbnQpIHtcbiAgICAgICAgICBjdXN0b21FbGVtZW50Ll9lbmRQYXRjaCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCBtb3VudEVsZW1lbnQgPSAodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgbGV0IGVsO1xuICAgIGxldCB2bm9kZUhvb2s7XG4gICAgY29uc3QgeyBwcm9wcywgc2hhcGVGbGFnLCB0cmFuc2l0aW9uLCBkaXJzIH0gPSB2bm9kZTtcbiAgICBlbCA9IHZub2RlLmVsID0gaG9zdENyZWF0ZUVsZW1lbnQoXG4gICAgICB2bm9kZS50eXBlLFxuICAgICAgbmFtZXNwYWNlLFxuICAgICAgcHJvcHMgJiYgcHJvcHMuaXMsXG4gICAgICBwcm9wc1xuICAgICk7XG4gICAgaWYgKHNoYXBlRmxhZyAmIDgpIHtcbiAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChlbCwgdm5vZGUuY2hpbGRyZW4pO1xuICAgIH0gZWxzZSBpZiAoc2hhcGVGbGFnICYgMTYpIHtcbiAgICAgIG1vdW50Q2hpbGRyZW4oXG4gICAgICAgIHZub2RlLmNoaWxkcmVuLFxuICAgICAgICBlbCxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgcmVzb2x2ZUNoaWxkcmVuTmFtZXNwYWNlKHZub2RlLCBuYW1lc3BhY2UpLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGRpcnMpIHtcbiAgICAgIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgXCJjcmVhdGVkXCIpO1xuICAgIH1cbiAgICBzZXRTY29wZUlkKGVsLCB2bm9kZSwgdm5vZGUuc2NvcGVJZCwgc2xvdFNjb3BlSWRzLCBwYXJlbnRDb21wb25lbnQpO1xuICAgIGlmIChwcm9wcykge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgaWYgKGtleSAhPT0gXCJ2YWx1ZVwiICYmICFpc1Jlc2VydmVkUHJvcChrZXkpKSB7XG4gICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwga2V5LCBudWxsLCBwcm9wc1trZXldLCBuYW1lc3BhY2UsIHBhcmVudENvbXBvbmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChcInZhbHVlXCIgaW4gcHJvcHMpIHtcbiAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgXCJ2YWx1ZVwiLCBudWxsLCBwcm9wcy52YWx1ZSwgbmFtZXNwYWNlKTtcbiAgICAgIH1cbiAgICAgIGlmICh2bm9kZUhvb2sgPSBwcm9wcy5vblZub2RlQmVmb3JlTW91bnQpIHtcbiAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgZGVmKGVsLCBcIl9fdm5vZGVcIiwgdm5vZGUsIHRydWUpO1xuICAgICAgZGVmKGVsLCBcIl9fdnVlUGFyZW50Q29tcG9uZW50XCIsIHBhcmVudENvbXBvbmVudCwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmIChkaXJzKSB7XG4gICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIFwiYmVmb3JlTW91bnRcIik7XG4gICAgfVxuICAgIGNvbnN0IG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzID0gbmVlZFRyYW5zaXRpb24ocGFyZW50U3VzcGVuc2UsIHRyYW5zaXRpb24pO1xuICAgIGlmIChuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcykge1xuICAgICAgdHJhbnNpdGlvbi5iZWZvcmVFbnRlcihlbCk7XG4gICAgfVxuICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICBpZiAoKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVNb3VudGVkKSB8fCBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyB8fCBkaXJzKSB7XG4gICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICB2bm9kZUhvb2sgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XG4gICAgICAgIG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzICYmIHRyYW5zaXRpb24uZW50ZXIoZWwpO1xuICAgICAgICBkaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgXCJtb3VudGVkXCIpO1xuICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgc2V0U2NvcGVJZCA9IChlbCwgdm5vZGUsIHNjb3BlSWQsIHNsb3RTY29wZUlkcywgcGFyZW50Q29tcG9uZW50KSA9PiB7XG4gICAgaWYgKHNjb3BlSWQpIHtcbiAgICAgIGhvc3RTZXRTY29wZUlkKGVsLCBzY29wZUlkKTtcbiAgICB9XG4gICAgaWYgKHNsb3RTY29wZUlkcykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbG90U2NvcGVJZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaG9zdFNldFNjb3BlSWQoZWwsIHNsb3RTY29wZUlkc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwYXJlbnRDb21wb25lbnQpIHtcbiAgICAgIGxldCBzdWJUcmVlID0gcGFyZW50Q29tcG9uZW50LnN1YlRyZWU7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBzdWJUcmVlLnBhdGNoRmxhZyA+IDAgJiYgc3ViVHJlZS5wYXRjaEZsYWcgJiAyMDQ4KSB7XG4gICAgICAgIHN1YlRyZWUgPSBmaWx0ZXJTaW5nbGVSb290KHN1YlRyZWUuY2hpbGRyZW4pIHx8IHN1YlRyZWU7XG4gICAgICB9XG4gICAgICBpZiAodm5vZGUgPT09IHN1YlRyZWUgfHwgaXNTdXNwZW5zZShzdWJUcmVlLnR5cGUpICYmIChzdWJUcmVlLnNzQ29udGVudCA9PT0gdm5vZGUgfHwgc3ViVHJlZS5zc0ZhbGxiYWNrID09PSB2bm9kZSkpIHtcbiAgICAgICAgY29uc3QgcGFyZW50Vk5vZGUgPSBwYXJlbnRDb21wb25lbnQudm5vZGU7XG4gICAgICAgIHNldFNjb3BlSWQoXG4gICAgICAgICAgZWwsXG4gICAgICAgICAgcGFyZW50Vk5vZGUsXG4gICAgICAgICAgcGFyZW50Vk5vZGUuc2NvcGVJZCxcbiAgICAgICAgICBwYXJlbnRWTm9kZS5zbG90U2NvcGVJZHMsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LnBhcmVudFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgbW91bnRDaGlsZHJlbiA9IChjaGlsZHJlbiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHN0YXJ0ID0gMCkgPT4ge1xuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldID0gb3B0aW1pemVkID8gY2xvbmVJZk1vdW50ZWQoY2hpbGRyZW5baV0pIDogbm9ybWFsaXplVk5vZGUoY2hpbGRyZW5baV0pO1xuICAgICAgcGF0Y2goXG4gICAgICAgIG51bGwsXG4gICAgICAgIGNoaWxkLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHBhdGNoRWxlbWVudCA9IChuMSwgbjIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBjb25zdCBlbCA9IG4yLmVsID0gbjEuZWw7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICBlbC5fX3Zub2RlID0gbjI7XG4gICAgfVxuICAgIGxldCB7IHBhdGNoRmxhZywgZHluYW1pY0NoaWxkcmVuLCBkaXJzIH0gPSBuMjtcbiAgICBwYXRjaEZsYWcgfD0gbjEucGF0Y2hGbGFnICYgMTY7XG4gICAgY29uc3Qgb2xkUHJvcHMgPSBuMS5wcm9wcyB8fCBFTVBUWV9PQko7XG4gICAgY29uc3QgbmV3UHJvcHMgPSBuMi5wcm9wcyB8fCBFTVBUWV9PQko7XG4gICAgbGV0IHZub2RlSG9vaztcbiAgICBwYXJlbnRDb21wb25lbnQgJiYgdG9nZ2xlUmVjdXJzZShwYXJlbnRDb21wb25lbnQsIGZhbHNlKTtcbiAgICBpZiAodm5vZGVIb29rID0gbmV3UHJvcHMub25Wbm9kZUJlZm9yZVVwZGF0ZSkge1xuICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCBuMiwgbjEpO1xuICAgIH1cbiAgICBpZiAoZGlycykge1xuICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayhuMiwgbjEsIHBhcmVudENvbXBvbmVudCwgXCJiZWZvcmVVcGRhdGVcIik7XG4gICAgfVxuICAgIHBhcmVudENvbXBvbmVudCAmJiB0b2dnbGVSZWN1cnNlKHBhcmVudENvbXBvbmVudCwgdHJ1ZSk7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaXNIbXJVcGRhdGluZykge1xuICAgICAgcGF0Y2hGbGFnID0gMDtcbiAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKG9sZFByb3BzLmlubmVySFRNTCAmJiBuZXdQcm9wcy5pbm5lckhUTUwgPT0gbnVsbCB8fCBvbGRQcm9wcy50ZXh0Q29udGVudCAmJiBuZXdQcm9wcy50ZXh0Q29udGVudCA9PSBudWxsKSB7XG4gICAgICBob3N0U2V0RWxlbWVudFRleHQoZWwsIFwiXCIpO1xuICAgIH1cbiAgICBpZiAoZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4oXG4gICAgICAgIG4xLmR5bmFtaWNDaGlsZHJlbixcbiAgICAgICAgZHluYW1pY0NoaWxkcmVuLFxuICAgICAgICBlbCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgcmVzb2x2ZUNoaWxkcmVuTmFtZXNwYWNlKG4yLCBuYW1lc3BhY2UpLFxuICAgICAgICBzbG90U2NvcGVJZHNcbiAgICAgICk7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKG4xLCBuMik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghb3B0aW1pemVkKSB7XG4gICAgICBwYXRjaENoaWxkcmVuKFxuICAgICAgICBuMSxcbiAgICAgICAgbjIsXG4gICAgICAgIGVsLFxuICAgICAgICBudWxsLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICByZXNvbHZlQ2hpbGRyZW5OYW1lc3BhY2UobjIsIG5hbWVzcGFjZSksXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChwYXRjaEZsYWcgPiAwKSB7XG4gICAgICBpZiAocGF0Y2hGbGFnICYgMTYpIHtcbiAgICAgICAgcGF0Y2hQcm9wcyhlbCwgb2xkUHJvcHMsIG5ld1Byb3BzLCBwYXJlbnRDb21wb25lbnQsIG5hbWVzcGFjZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocGF0Y2hGbGFnICYgMikge1xuICAgICAgICAgIGlmIChvbGRQcm9wcy5jbGFzcyAhPT0gbmV3UHJvcHMuY2xhc3MpIHtcbiAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIFwiY2xhc3NcIiwgbnVsbCwgbmV3UHJvcHMuY2xhc3MsIG5hbWVzcGFjZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXRjaEZsYWcgJiA0KSB7XG4gICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgXCJzdHlsZVwiLCBvbGRQcm9wcy5zdHlsZSwgbmV3UHJvcHMuc3R5bGUsIG5hbWVzcGFjZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDgpIHtcbiAgICAgICAgICBjb25zdCBwcm9wc1RvVXBkYXRlID0gbjIuZHluYW1pY1Byb3BzO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcHNUb1VwZGF0ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gcHJvcHNUb1VwZGF0ZVtpXTtcbiAgICAgICAgICAgIGNvbnN0IHByZXYgPSBvbGRQcm9wc1trZXldO1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IG5ld1Byb3BzW2tleV07XG4gICAgICAgICAgICBpZiAobmV4dCAhPT0gcHJldiB8fCBrZXkgPT09IFwidmFsdWVcIikge1xuICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCBrZXksIHByZXYsIG5leHQsIG5hbWVzcGFjZSwgcGFyZW50Q29tcG9uZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwYXRjaEZsYWcgJiAxKSB7XG4gICAgICAgIGlmIChuMS5jaGlsZHJlbiAhPT0gbjIuY2hpbGRyZW4pIHtcbiAgICAgICAgICBob3N0U2V0RWxlbWVudFRleHQoZWwsIG4yLmNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIW9wdGltaXplZCAmJiBkeW5hbWljQ2hpbGRyZW4gPT0gbnVsbCkge1xuICAgICAgcGF0Y2hQcm9wcyhlbCwgb2xkUHJvcHMsIG5ld1Byb3BzLCBwYXJlbnRDb21wb25lbnQsIG5hbWVzcGFjZSk7XG4gICAgfVxuICAgIGlmICgodm5vZGVIb29rID0gbmV3UHJvcHMub25Wbm9kZVVwZGF0ZWQpIHx8IGRpcnMpIHtcbiAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHZub2RlSG9vayAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIG4yLCBuMSk7XG4gICAgICAgIGRpcnMgJiYgaW52b2tlRGlyZWN0aXZlSG9vayhuMiwgbjEsIHBhcmVudENvbXBvbmVudCwgXCJ1cGRhdGVkXCIpO1xuICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcGF0Y2hCbG9ja0NoaWxkcmVuID0gKG9sZENoaWxkcmVuLCBuZXdDaGlsZHJlbiwgZmFsbGJhY2tDb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgb2xkVk5vZGUgPSBvbGRDaGlsZHJlbltpXTtcbiAgICAgIGNvbnN0IG5ld1ZOb2RlID0gbmV3Q2hpbGRyZW5baV07XG4gICAgICBjb25zdCBjb250YWluZXIgPSAoXG4gICAgICAgIC8vIG9sZFZOb2RlIG1heSBiZSBhbiBlcnJvcmVkIGFzeW5jIHNldHVwKCkgY29tcG9uZW50IGluc2lkZSBTdXNwZW5zZVxuICAgICAgICAvLyB3aGljaCB3aWxsIG5vdCBoYXZlIGEgbW91bnRlZCBlbGVtZW50XG4gICAgICAgIG9sZFZOb2RlLmVsICYmIC8vIC0gSW4gdGhlIGNhc2Ugb2YgYSBGcmFnbWVudCwgd2UgbmVlZCB0byBwcm92aWRlIHRoZSBhY3R1YWwgcGFyZW50XG4gICAgICAgIC8vIG9mIHRoZSBGcmFnbWVudCBpdHNlbGYgc28gaXQgY2FuIG1vdmUgaXRzIGNoaWxkcmVuLlxuICAgICAgICAob2xkVk5vZGUudHlwZSA9PT0gRnJhZ21lbnQgfHwgLy8gLSBJbiB0aGUgY2FzZSBvZiBkaWZmZXJlbnQgbm9kZXMsIHRoZXJlIGlzIGdvaW5nIHRvIGJlIGEgcmVwbGFjZW1lbnRcbiAgICAgICAgLy8gd2hpY2ggYWxzbyByZXF1aXJlcyB0aGUgY29ycmVjdCBwYXJlbnQgY29udGFpbmVyXG4gICAgICAgICFpc1NhbWVWTm9kZVR5cGUob2xkVk5vZGUsIG5ld1ZOb2RlKSB8fCAvLyAtIEluIHRoZSBjYXNlIG9mIGEgY29tcG9uZW50LCBpdCBjb3VsZCBjb250YWluIGFueXRoaW5nLlxuICAgICAgICBvbGRWTm9kZS5zaGFwZUZsYWcgJiAoNiB8IDY0IHwgMTI4KSkgPyBob3N0UGFyZW50Tm9kZShvbGRWTm9kZS5lbCkgOiAoXG4gICAgICAgICAgLy8gSW4gb3RoZXIgY2FzZXMsIHRoZSBwYXJlbnQgY29udGFpbmVyIGlzIG5vdCBhY3R1YWxseSB1c2VkIHNvIHdlXG4gICAgICAgICAgLy8ganVzdCBwYXNzIHRoZSBibG9jayBlbGVtZW50IGhlcmUgdG8gYXZvaWQgYSBET00gcGFyZW50Tm9kZSBjYWxsLlxuICAgICAgICAgIGZhbGxiYWNrQ29udGFpbmVyXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBwYXRjaChcbiAgICAgICAgb2xkVk5vZGUsXG4gICAgICAgIG5ld1ZOb2RlLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICB0cnVlXG4gICAgICApO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcGF0Y2hQcm9wcyA9IChlbCwgb2xkUHJvcHMsIG5ld1Byb3BzLCBwYXJlbnRDb21wb25lbnQsIG5hbWVzcGFjZSkgPT4ge1xuICAgIGlmIChvbGRQcm9wcyAhPT0gbmV3UHJvcHMpIHtcbiAgICAgIGlmIChvbGRQcm9wcyAhPT0gRU1QVFlfT0JKKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9sZFByb3BzKSB7XG4gICAgICAgICAgaWYgKCFpc1Jlc2VydmVkUHJvcChrZXkpICYmICEoa2V5IGluIG5ld1Byb3BzKSkge1xuICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChcbiAgICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgb2xkUHJvcHNba2V5XSxcbiAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgICBwYXJlbnRDb21wb25lbnRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBuZXdQcm9wcykge1xuICAgICAgICBpZiAoaXNSZXNlcnZlZFByb3Aoa2V5KSkgY29udGludWU7XG4gICAgICAgIGNvbnN0IG5leHQgPSBuZXdQcm9wc1trZXldO1xuICAgICAgICBjb25zdCBwcmV2ID0gb2xkUHJvcHNba2V5XTtcbiAgICAgICAgaWYgKG5leHQgIT09IHByZXYgJiYga2V5ICE9PSBcInZhbHVlXCIpIHtcbiAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCBrZXksIHByZXYsIG5leHQsIG5hbWVzcGFjZSwgcGFyZW50Q29tcG9uZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKFwidmFsdWVcIiBpbiBuZXdQcm9wcykge1xuICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCBcInZhbHVlXCIsIG9sZFByb3BzLnZhbHVlLCBuZXdQcm9wcy52YWx1ZSwgbmFtZXNwYWNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHByb2Nlc3NGcmFnbWVudCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgY29uc3QgZnJhZ21lbnRTdGFydEFuY2hvciA9IG4yLmVsID0gbjEgPyBuMS5lbCA6IGhvc3RDcmVhdGVUZXh0KFwiXCIpO1xuICAgIGNvbnN0IGZyYWdtZW50RW5kQW5jaG9yID0gbjIuYW5jaG9yID0gbjEgPyBuMS5hbmNob3IgOiBob3N0Q3JlYXRlVGV4dChcIlwiKTtcbiAgICBsZXQgeyBwYXRjaEZsYWcsIGR5bmFtaWNDaGlsZHJlbiwgc2xvdFNjb3BlSWRzOiBmcmFnbWVudFNsb3RTY29wZUlkcyB9ID0gbjI7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgLy8gIzU1MjMgZGV2IHJvb3QgZnJhZ21lbnQgbWF5IGluaGVyaXQgZGlyZWN0aXZlc1xuICAgIChpc0htclVwZGF0aW5nIHx8IHBhdGNoRmxhZyAmIDIwNDgpKSB7XG4gICAgICBwYXRjaEZsYWcgPSAwO1xuICAgICAgb3B0aW1pemVkID0gZmFsc2U7XG4gICAgICBkeW5hbWljQ2hpbGRyZW4gPSBudWxsO1xuICAgIH1cbiAgICBpZiAoZnJhZ21lbnRTbG90U2NvcGVJZHMpIHtcbiAgICAgIHNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkcyA/IHNsb3RTY29wZUlkcy5jb25jYXQoZnJhZ21lbnRTbG90U2NvcGVJZHMpIDogZnJhZ21lbnRTbG90U2NvcGVJZHM7XG4gICAgfVxuICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICBob3N0SW5zZXJ0KGZyYWdtZW50U3RhcnRBbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIGhvc3RJbnNlcnQoZnJhZ21lbnRFbmRBbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIG1vdW50Q2hpbGRyZW4oXG4gICAgICAgIC8vICMxMDAwN1xuICAgICAgICAvLyBzdWNoIGZyYWdtZW50IGxpa2UgYDw+PC8+YCB3aWxsIGJlIGNvbXBpbGVkIGludG9cbiAgICAgICAgLy8gYSBmcmFnbWVudCB3aGljaCBkb2Vzbid0IGhhdmUgYSBjaGlsZHJlbi5cbiAgICAgICAgLy8gSW4gdGhpcyBjYXNlIGZhbGxiYWNrIHRvIGFuIGVtcHR5IGFycmF5XG4gICAgICAgIG4yLmNoaWxkcmVuIHx8IFtdLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGZyYWdtZW50RW5kQW5jaG9yLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocGF0Y2hGbGFnID4gMCAmJiBwYXRjaEZsYWcgJiA2NCAmJiBkeW5hbWljQ2hpbGRyZW4gJiYgLy8gIzI3MTUgdGhlIHByZXZpb3VzIGZyYWdtZW50IGNvdWxkJ3ZlIGJlZW4gYSBCQUlMZWQgb25lIGFzIGEgcmVzdWx0XG4gICAgICAvLyBvZiByZW5kZXJTbG90KCkgd2l0aCBubyB2YWxpZCBjaGlsZHJlblxuICAgICAgbjEuZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgIHBhdGNoQmxvY2tDaGlsZHJlbihcbiAgICAgICAgICBuMS5keW5hbWljQ2hpbGRyZW4sXG4gICAgICAgICAgZHluYW1pY0NoaWxkcmVuLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkc1xuICAgICAgICApO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yKTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAvLyAjMjA4MCBpZiB0aGUgc3RhYmxlIGZyYWdtZW50IGhhcyBhIGtleSwgaXQncyBhIDx0ZW1wbGF0ZSB2LWZvcj4gdGhhdCBtYXlcbiAgICAgICAgICAvLyAgZ2V0IG1vdmVkIGFyb3VuZC4gTWFrZSBzdXJlIGFsbCByb290IGxldmVsIHZub2RlcyBpbmhlcml0IGVsLlxuICAgICAgICAgIC8vICMyMTM0IG9yIGlmIGl0J3MgYSBjb21wb25lbnQgcm9vdCwgaXQgbWF5IGFsc28gZ2V0IG1vdmVkIGFyb3VuZFxuICAgICAgICAgIC8vIGFzIHRoZSBjb21wb25lbnQgaXMgYmVpbmcgbW92ZWQuXG4gICAgICAgICAgbjIua2V5ICE9IG51bGwgfHwgcGFyZW50Q29tcG9uZW50ICYmIG4yID09PSBwYXJlbnRDb21wb25lbnQuc3ViVHJlZVxuICAgICAgICApIHtcbiAgICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKFxuICAgICAgICAgICAgbjEsXG4gICAgICAgICAgICBuMixcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgIC8qIHNoYWxsb3cgKi9cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXRjaENoaWxkcmVuKFxuICAgICAgICAgIG4xLFxuICAgICAgICAgIG4yLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBmcmFnbWVudEVuZEFuY2hvcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHByb2Nlc3NDb21wb25lbnQgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgIG4yLnNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkcztcbiAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgaWYgKG4yLnNoYXBlRmxhZyAmIDUxMikge1xuICAgICAgICBwYXJlbnRDb21wb25lbnQuY3R4LmFjdGl2YXRlKFxuICAgICAgICAgIG4yLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW91bnRDb21wb25lbnQoXG4gICAgICAgICAgbjIsXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB1cGRhdGVDb21wb25lbnQobjEsIG4yLCBvcHRpbWl6ZWQpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgbW91bnRDb21wb25lbnQgPSAoaW5pdGlhbFZOb2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IChpbml0aWFsVk5vZGUuY29tcG9uZW50ID0gY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UoXG4gICAgICBpbml0aWFsVk5vZGUsXG4gICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICBwYXJlbnRTdXNwZW5zZVxuICAgICkpO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGluc3RhbmNlLnR5cGUuX19obXJJZCkge1xuICAgICAgcmVnaXN0ZXJITVIoaW5zdGFuY2UpO1xuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KGluaXRpYWxWTm9kZSk7XG4gICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBtb3VudGApO1xuICAgIH1cbiAgICBpZiAoaXNLZWVwQWxpdmUoaW5pdGlhbFZOb2RlKSkge1xuICAgICAgaW5zdGFuY2UuY3R4LnJlbmRlcmVyID0gaW50ZXJuYWxzO1xuICAgIH1cbiAgICB7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBpbml0YCk7XG4gICAgICB9XG4gICAgICBzZXR1cENvbXBvbmVudChpbnN0YW5jZSwgZmFsc2UsIG9wdGltaXplZCk7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgaW5pdGApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpc0htclVwZGF0aW5nKSBpbml0aWFsVk5vZGUuZWwgPSBudWxsO1xuICAgIGlmIChpbnN0YW5jZS5hc3luY0RlcCkge1xuICAgICAgcGFyZW50U3VzcGVuc2UgJiYgcGFyZW50U3VzcGVuc2UucmVnaXN0ZXJEZXAoaW5zdGFuY2UsIHNldHVwUmVuZGVyRWZmZWN0LCBvcHRpbWl6ZWQpO1xuICAgICAgaWYgKCFpbml0aWFsVk5vZGUuZWwpIHtcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBpbnN0YW5jZS5zdWJUcmVlID0gY3JlYXRlVk5vZGUoQ29tbWVudCk7XG4gICAgICAgIHByb2Nlc3NDb21tZW50Tm9kZShudWxsLCBwbGFjZWhvbGRlciwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICBpbml0aWFsVk5vZGUucGxhY2Vob2xkZXIgPSBwbGFjZWhvbGRlci5lbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2V0dXBSZW5kZXJFZmZlY3QoXG4gICAgICAgIGluc3RhbmNlLFxuICAgICAgICBpbml0aWFsVk5vZGUsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYG1vdW50YCk7XG4gICAgfVxuICB9O1xuICBjb25zdCB1cGRhdGVDb21wb25lbnQgPSAobjEsIG4yLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IG4yLmNvbXBvbmVudCA9IG4xLmNvbXBvbmVudDtcbiAgICBpZiAoc2hvdWxkVXBkYXRlQ29tcG9uZW50KG4xLCBuMiwgb3B0aW1pemVkKSkge1xuICAgICAgaWYgKGluc3RhbmNlLmFzeW5jRGVwICYmICFpbnN0YW5jZS5hc3luY1Jlc29sdmVkKSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KG4yKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIoaW5zdGFuY2UsIG4yLCBvcHRpbWl6ZWQpO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHBvcFdhcm5pbmdDb250ZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5zdGFuY2UubmV4dCA9IG4yO1xuICAgICAgICBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbjIuZWwgPSBuMS5lbDtcbiAgICAgIGluc3RhbmNlLnZub2RlID0gbjI7XG4gICAgfVxuICB9O1xuICBjb25zdCBzZXR1cFJlbmRlckVmZmVjdCA9IChpbnN0YW5jZSwgaW5pdGlhbFZOb2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgb3B0aW1pemVkKSA9PiB7XG4gICAgY29uc3QgY29tcG9uZW50VXBkYXRlRm4gPSAoKSA9PiB7XG4gICAgICBpZiAoIWluc3RhbmNlLmlzTW91bnRlZCkge1xuICAgICAgICBsZXQgdm5vZGVIb29rO1xuICAgICAgICBjb25zdCB7IGVsLCBwcm9wcyB9ID0gaW5pdGlhbFZOb2RlO1xuICAgICAgICBjb25zdCB7IGJtLCBtLCBwYXJlbnQsIHJvb3QsIHR5cGUgfSA9IGluc3RhbmNlO1xuICAgICAgICBjb25zdCBpc0FzeW5jV3JhcHBlclZOb2RlID0gaXNBc3luY1dyYXBwZXIoaW5pdGlhbFZOb2RlKTtcbiAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgZmFsc2UpO1xuICAgICAgICBpZiAoYm0pIHtcbiAgICAgICAgICBpbnZva2VBcnJheUZucyhibSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0FzeW5jV3JhcHBlclZOb2RlICYmICh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlQmVmb3JlTW91bnQpKSB7XG4gICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50LCBpbml0aWFsVk5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIHRydWUpO1xuICAgICAgICBpZiAoZWwgJiYgaHlkcmF0ZU5vZGUpIHtcbiAgICAgICAgICBjb25zdCBoeWRyYXRlU3ViVHJlZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5zdGFuY2Uuc3ViVHJlZSA9IHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpO1xuICAgICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgaHlkcmF0ZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaHlkcmF0ZU5vZGUoXG4gICAgICAgICAgICAgIGVsLFxuICAgICAgICAgICAgICBpbnN0YW5jZS5zdWJUcmVlLFxuICAgICAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgaHlkcmF0ZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKGlzQXN5bmNXcmFwcGVyVk5vZGUgJiYgdHlwZS5fX2FzeW5jSHlkcmF0ZSkge1xuICAgICAgICAgICAgdHlwZS5fX2FzeW5jSHlkcmF0ZShcbiAgICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgICAgICBoeWRyYXRlU3ViVHJlZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaHlkcmF0ZVN1YlRyZWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHJvb3QuY2UgJiYgLy8gQHRzLWV4cGVjdC1lcnJvciBfZGVmIGlzIHByaXZhdGVcbiAgICAgICAgICByb290LmNlLl9kZWYuc2hhZG93Um9vdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJvb3QuY2UuX2luamVjdENoaWxkU3R5bGUodHlwZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qgc3ViVHJlZSA9IGluc3RhbmNlLnN1YlRyZWUgPSByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKTtcbiAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGF0Y2goXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgc3ViVHJlZSxcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2VcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5pdGlhbFZOb2RlLmVsID0gc3ViVHJlZS5lbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobSkge1xuICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChtLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0FzeW5jV3JhcHBlclZOb2RlICYmICh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlTW91bnRlZCkpIHtcbiAgICAgICAgICBjb25zdCBzY29wZWRJbml0aWFsVk5vZGUgPSBpbml0aWFsVk5vZGU7XG4gICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KFxuICAgICAgICAgICAgKCkgPT4gaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50LCBzY29wZWRJbml0aWFsVk5vZGUpLFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2VcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbml0aWFsVk5vZGUuc2hhcGVGbGFnICYgMjU2IHx8IHBhcmVudCAmJiBpc0FzeW5jV3JhcHBlcihwYXJlbnQudm5vZGUpICYmIHBhcmVudC52bm9kZS5zaGFwZUZsYWcgJiAyNTYpIHtcbiAgICAgICAgICBpbnN0YW5jZS5hICYmIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChpbnN0YW5jZS5hLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFuY2UuaXNNb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRBZGRlZChpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5pdGlhbFZOb2RlID0gY29udGFpbmVyID0gYW5jaG9yID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCB7IG5leHQsIGJ1LCB1LCBwYXJlbnQsIHZub2RlIH0gPSBpbnN0YW5jZTtcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IG5vbkh5ZHJhdGVkQXN5bmNSb290ID0gbG9jYXRlTm9uSHlkcmF0ZWRBc3luY1Jvb3QoaW5zdGFuY2UpO1xuICAgICAgICAgIGlmIChub25IeWRyYXRlZEFzeW5jUm9vdCkge1xuICAgICAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICAgICAgbmV4dC5lbCA9IHZub2RlLmVsO1xuICAgICAgICAgICAgICB1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIoaW5zdGFuY2UsIG5leHQsIG9wdGltaXplZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub25IeWRyYXRlZEFzeW5jUm9vdC5hc3luY0RlcC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKCFpbnN0YW5jZS5pc1VubW91bnRlZCkge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudFVwZGF0ZUZuKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgb3JpZ2luTmV4dCA9IG5leHQ7XG4gICAgICAgIGxldCB2bm9kZUhvb2s7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KG5leHQgfHwgaW5zdGFuY2Uudm5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIGZhbHNlKTtcbiAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICBuZXh0LmVsID0gdm5vZGUuZWw7XG4gICAgICAgICAgdXBkYXRlQ29tcG9uZW50UHJlUmVuZGVyKGluc3RhbmNlLCBuZXh0LCBvcHRpbWl6ZWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5leHQgPSB2bm9kZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnUpIHtcbiAgICAgICAgICBpbnZva2VBcnJheUZucyhidSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZub2RlSG9vayA9IG5leHQucHJvcHMgJiYgbmV4dC5wcm9wcy5vblZub2RlQmVmb3JlVXBkYXRlKSB7XG4gICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50LCBuZXh0LCB2bm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgdHJ1ZSk7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV4dFRyZWUgPSByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJldlRyZWUgPSBpbnN0YW5jZS5zdWJUcmVlO1xuICAgICAgICBpbnN0YW5jZS5zdWJUcmVlID0gbmV4dFRyZWU7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcbiAgICAgICAgfVxuICAgICAgICBwYXRjaChcbiAgICAgICAgICBwcmV2VHJlZSxcbiAgICAgICAgICBuZXh0VHJlZSxcbiAgICAgICAgICAvLyBwYXJlbnQgbWF5IGhhdmUgY2hhbmdlZCBpZiBpdCdzIGluIGEgdGVsZXBvcnRcbiAgICAgICAgICBob3N0UGFyZW50Tm9kZShwcmV2VHJlZS5lbCksXG4gICAgICAgICAgLy8gYW5jaG9yIG1heSBoYXZlIGNoYW5nZWQgaWYgaXQncyBpbiBhIGZyYWdtZW50XG4gICAgICAgICAgZ2V0TmV4dEhvc3ROb2RlKHByZXZUcmVlKSxcbiAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2VcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcbiAgICAgICAgfVxuICAgICAgICBuZXh0LmVsID0gbmV4dFRyZWUuZWw7XG4gICAgICAgIGlmIChvcmlnaW5OZXh0ID09PSBudWxsKSB7XG4gICAgICAgICAgdXBkYXRlSE9DSG9zdEVsKGluc3RhbmNlLCBuZXh0VHJlZS5lbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHUpIHtcbiAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QodSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2bm9kZUhvb2sgPSBuZXh0LnByb3BzICYmIG5leHQucHJvcHMub25Wbm9kZVVwZGF0ZWQpIHtcbiAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoXG4gICAgICAgICAgICAoKSA9PiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIG5leHQsIHZub2RlKSxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudFVwZGF0ZWQoaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgaW5zdGFuY2Uuc2NvcGUub24oKTtcbiAgICBjb25zdCBlZmZlY3QgPSBpbnN0YW5jZS5lZmZlY3QgPSBuZXcgUmVhY3RpdmVFZmZlY3QoY29tcG9uZW50VXBkYXRlRm4pO1xuICAgIGluc3RhbmNlLnNjb3BlLm9mZigpO1xuICAgIGNvbnN0IHVwZGF0ZSA9IGluc3RhbmNlLnVwZGF0ZSA9IGVmZmVjdC5ydW4uYmluZChlZmZlY3QpO1xuICAgIGNvbnN0IGpvYiA9IGluc3RhbmNlLmpvYiA9IGVmZmVjdC5ydW5JZkRpcnR5LmJpbmQoZWZmZWN0KTtcbiAgICBqb2IuaSA9IGluc3RhbmNlO1xuICAgIGpvYi5pZCA9IGluc3RhbmNlLnVpZDtcbiAgICBlZmZlY3Quc2NoZWR1bGVyID0gKCkgPT4gcXVldWVKb2Ioam9iKTtcbiAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCB0cnVlKTtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgZWZmZWN0Lm9uVHJhY2sgPSBpbnN0YW5jZS5ydGMgPyAoZSkgPT4gaW52b2tlQXJyYXlGbnMoaW5zdGFuY2UucnRjLCBlKSA6IHZvaWQgMDtcbiAgICAgIGVmZmVjdC5vblRyaWdnZXIgPSBpbnN0YW5jZS5ydGcgPyAoZSkgPT4gaW52b2tlQXJyYXlGbnMoaW5zdGFuY2UucnRnLCBlKSA6IHZvaWQgMDtcbiAgICB9XG4gICAgdXBkYXRlKCk7XG4gIH07XG4gIGNvbnN0IHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlciA9IChpbnN0YW5jZSwgbmV4dFZOb2RlLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBuZXh0Vk5vZGUuY29tcG9uZW50ID0gaW5zdGFuY2U7XG4gICAgY29uc3QgcHJldlByb3BzID0gaW5zdGFuY2Uudm5vZGUucHJvcHM7XG4gICAgaW5zdGFuY2Uudm5vZGUgPSBuZXh0Vk5vZGU7XG4gICAgaW5zdGFuY2UubmV4dCA9IG51bGw7XG4gICAgdXBkYXRlUHJvcHMoaW5zdGFuY2UsIG5leHRWTm9kZS5wcm9wcywgcHJldlByb3BzLCBvcHRpbWl6ZWQpO1xuICAgIHVwZGF0ZVNsb3RzKGluc3RhbmNlLCBuZXh0Vk5vZGUuY2hpbGRyZW4sIG9wdGltaXplZCk7XG4gICAgcGF1c2VUcmFja2luZygpO1xuICAgIGZsdXNoUHJlRmx1c2hDYnMoaW5zdGFuY2UpO1xuICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgfTtcbiAgY29uc3QgcGF0Y2hDaGlsZHJlbiA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkID0gZmFsc2UpID0+IHtcbiAgICBjb25zdCBjMSA9IG4xICYmIG4xLmNoaWxkcmVuO1xuICAgIGNvbnN0IHByZXZTaGFwZUZsYWcgPSBuMSA/IG4xLnNoYXBlRmxhZyA6IDA7XG4gICAgY29uc3QgYzIgPSBuMi5jaGlsZHJlbjtcbiAgICBjb25zdCB7IHBhdGNoRmxhZywgc2hhcGVGbGFnIH0gPSBuMjtcbiAgICBpZiAocGF0Y2hGbGFnID4gMCkge1xuICAgICAgaWYgKHBhdGNoRmxhZyAmIDEyOCkge1xuICAgICAgICBwYXRjaEtleWVkQ2hpbGRyZW4oXG4gICAgICAgICAgYzEsXG4gICAgICAgICAgYzIsXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIGlmIChwYXRjaEZsYWcgJiAyNTYpIHtcbiAgICAgICAgcGF0Y2hVbmtleWVkQ2hpbGRyZW4oXG4gICAgICAgICAgYzEsXG4gICAgICAgICAgYzIsXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc2hhcGVGbGFnICYgOCkge1xuICAgICAgaWYgKHByZXZTaGFwZUZsYWcgJiAxNikge1xuICAgICAgICB1bm1vdW50Q2hpbGRyZW4oYzEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgfVxuICAgICAgaWYgKGMyICE9PSBjMSkge1xuICAgICAgICBob3N0U2V0RWxlbWVudFRleHQoY29udGFpbmVyLCBjMik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcmV2U2hhcGVGbGFnICYgMTYpIHtcbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICAgICAgcGF0Y2hLZXllZENoaWxkcmVuKFxuICAgICAgICAgICAgYzEsXG4gICAgICAgICAgICBjMixcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oYzEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJldlNoYXBlRmxhZyAmIDgpIHtcbiAgICAgICAgICBob3N0U2V0RWxlbWVudFRleHQoY29udGFpbmVyLCBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTYpIHtcbiAgICAgICAgICBtb3VudENoaWxkcmVuKFxuICAgICAgICAgICAgYzIsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHBhdGNoVW5rZXllZENoaWxkcmVuID0gKGMxLCBjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBjMSA9IGMxIHx8IEVNUFRZX0FSUjtcbiAgICBjMiA9IGMyIHx8IEVNUFRZX0FSUjtcbiAgICBjb25zdCBvbGRMZW5ndGggPSBjMS5sZW5ndGg7XG4gICAgY29uc3QgbmV3TGVuZ3RoID0gYzIubGVuZ3RoO1xuICAgIGNvbnN0IGNvbW1vbkxlbmd0aCA9IE1hdGgubWluKG9sZExlbmd0aCwgbmV3TGVuZ3RoKTtcbiAgICBsZXQgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgY29tbW9uTGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5leHRDaGlsZCA9IGMyW2ldID0gb3B0aW1pemVkID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pO1xuICAgICAgcGF0Y2goXG4gICAgICAgIGMxW2ldLFxuICAgICAgICBuZXh0Q2hpbGQsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgbnVsbCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKG9sZExlbmd0aCA+IG5ld0xlbmd0aCkge1xuICAgICAgdW5tb3VudENoaWxkcmVuKFxuICAgICAgICBjMSxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGNvbW1vbkxlbmd0aFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbW91bnRDaGlsZHJlbihcbiAgICAgICAgYzIsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkLFxuICAgICAgICBjb21tb25MZW5ndGhcbiAgICAgICk7XG4gICAgfVxuICB9O1xuICBjb25zdCBwYXRjaEtleWVkQ2hpbGRyZW4gPSAoYzEsIGMyLCBjb250YWluZXIsIHBhcmVudEFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgIGxldCBpID0gMDtcbiAgICBjb25zdCBsMiA9IGMyLmxlbmd0aDtcbiAgICBsZXQgZTEgPSBjMS5sZW5ndGggLSAxO1xuICAgIGxldCBlMiA9IGwyIC0gMTtcbiAgICB3aGlsZSAoaSA8PSBlMSAmJiBpIDw9IGUyKSB7XG4gICAgICBjb25zdCBuMSA9IGMxW2ldO1xuICAgICAgY29uc3QgbjIgPSBjMltpXSA9IG9wdGltaXplZCA/IGNsb25lSWZNb3VudGVkKGMyW2ldKSA6IG5vcm1hbGl6ZVZOb2RlKGMyW2ldKTtcbiAgICAgIGlmIChpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSkge1xuICAgICAgICBwYXRjaChcbiAgICAgICAgICBuMSxcbiAgICAgICAgICBuMixcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaSsrO1xuICAgIH1cbiAgICB3aGlsZSAoaSA8PSBlMSAmJiBpIDw9IGUyKSB7XG4gICAgICBjb25zdCBuMSA9IGMxW2UxXTtcbiAgICAgIGNvbnN0IG4yID0gYzJbZTJdID0gb3B0aW1pemVkID8gY2xvbmVJZk1vdW50ZWQoYzJbZTJdKSA6IG5vcm1hbGl6ZVZOb2RlKGMyW2UyXSk7XG4gICAgICBpZiAoaXNTYW1lVk5vZGVUeXBlKG4xLCBuMikpIHtcbiAgICAgICAgcGF0Y2goXG4gICAgICAgICAgbjEsXG4gICAgICAgICAgbjIsXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGUxLS07XG4gICAgICBlMi0tO1xuICAgIH1cbiAgICBpZiAoaSA+IGUxKSB7XG4gICAgICBpZiAoaSA8PSBlMikge1xuICAgICAgICBjb25zdCBuZXh0UG9zID0gZTIgKyAxO1xuICAgICAgICBjb25zdCBhbmNob3IgPSBuZXh0UG9zIDwgbDIgPyBjMltuZXh0UG9zXS5lbCA6IHBhcmVudEFuY2hvcjtcbiAgICAgICAgd2hpbGUgKGkgPD0gZTIpIHtcbiAgICAgICAgICBwYXRjaChcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBjMltpXSA9IG9wdGltaXplZCA/IGNsb25lSWZNb3VudGVkKGMyW2ldKSA6IG5vcm1hbGl6ZVZOb2RlKGMyW2ldKSxcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGkgPiBlMikge1xuICAgICAgd2hpbGUgKGkgPD0gZTEpIHtcbiAgICAgICAgdW5tb3VudChjMVtpXSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgIGkrKztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgczEgPSBpO1xuICAgICAgY29uc3QgczIgPSBpO1xuICAgICAgY29uc3Qga2V5VG9OZXdJbmRleE1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICBmb3IgKGkgPSBzMjsgaSA8PSBlMjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG5leHRDaGlsZCA9IGMyW2ldID0gb3B0aW1pemVkID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pO1xuICAgICAgICBpZiAobmV4dENoaWxkLmtleSAhPSBudWxsKSB7XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYga2V5VG9OZXdJbmRleE1hcC5oYXMobmV4dENoaWxkLmtleSkpIHtcbiAgICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgICAgYER1cGxpY2F0ZSBrZXlzIGZvdW5kIGR1cmluZyB1cGRhdGU6YCxcbiAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkobmV4dENoaWxkLmtleSksXG4gICAgICAgICAgICAgIGBNYWtlIHN1cmUga2V5cyBhcmUgdW5pcXVlLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGtleVRvTmV3SW5kZXhNYXAuc2V0KG5leHRDaGlsZC5rZXksIGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgajtcbiAgICAgIGxldCBwYXRjaGVkID0gMDtcbiAgICAgIGNvbnN0IHRvQmVQYXRjaGVkID0gZTIgLSBzMiArIDE7XG4gICAgICBsZXQgbW92ZWQgPSBmYWxzZTtcbiAgICAgIGxldCBtYXhOZXdJbmRleFNvRmFyID0gMDtcbiAgICAgIGNvbnN0IG5ld0luZGV4VG9PbGRJbmRleE1hcCA9IG5ldyBBcnJheSh0b0JlUGF0Y2hlZCk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdG9CZVBhdGNoZWQ7IGkrKykgbmV3SW5kZXhUb09sZEluZGV4TWFwW2ldID0gMDtcbiAgICAgIGZvciAoaSA9IHMxOyBpIDw9IGUxOyBpKyspIHtcbiAgICAgICAgY29uc3QgcHJldkNoaWxkID0gYzFbaV07XG4gICAgICAgIGlmIChwYXRjaGVkID49IHRvQmVQYXRjaGVkKSB7XG4gICAgICAgICAgdW5tb3VudChwcmV2Q2hpbGQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBuZXdJbmRleDtcbiAgICAgICAgaWYgKHByZXZDaGlsZC5rZXkgIT0gbnVsbCkge1xuICAgICAgICAgIG5ld0luZGV4ID0ga2V5VG9OZXdJbmRleE1hcC5nZXQocHJldkNoaWxkLmtleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yIChqID0gczI7IGogPD0gZTI7IGorKykge1xuICAgICAgICAgICAgaWYgKG5ld0luZGV4VG9PbGRJbmRleE1hcFtqIC0gczJdID09PSAwICYmIGlzU2FtZVZOb2RlVHlwZShwcmV2Q2hpbGQsIGMyW2pdKSkge1xuICAgICAgICAgICAgICBuZXdJbmRleCA9IGo7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3SW5kZXggPT09IHZvaWQgMCkge1xuICAgICAgICAgIHVubW91bnQocHJldkNoaWxkLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdJbmRleFRvT2xkSW5kZXhNYXBbbmV3SW5kZXggLSBzMl0gPSBpICsgMTtcbiAgICAgICAgICBpZiAobmV3SW5kZXggPj0gbWF4TmV3SW5kZXhTb0Zhcikge1xuICAgICAgICAgICAgbWF4TmV3SW5kZXhTb0ZhciA9IG5ld0luZGV4O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb3ZlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhdGNoKFxuICAgICAgICAgICAgcHJldkNoaWxkLFxuICAgICAgICAgICAgYzJbbmV3SW5kZXhdLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgICBwYXRjaGVkKys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlID0gbW92ZWQgPyBnZXRTZXF1ZW5jZShuZXdJbmRleFRvT2xkSW5kZXhNYXApIDogRU1QVFlfQVJSO1xuICAgICAgaiA9IGluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlLmxlbmd0aCAtIDE7XG4gICAgICBmb3IgKGkgPSB0b0JlUGF0Y2hlZCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGNvbnN0IG5leHRJbmRleCA9IHMyICsgaTtcbiAgICAgICAgY29uc3QgbmV4dENoaWxkID0gYzJbbmV4dEluZGV4XTtcbiAgICAgICAgY29uc3QgYW5jaG9yVk5vZGUgPSBjMltuZXh0SW5kZXggKyAxXTtcbiAgICAgICAgY29uc3QgYW5jaG9yID0gbmV4dEluZGV4ICsgMSA8IGwyID8gKFxuICAgICAgICAgIC8vICMxMzU1OSwgZmFsbGJhY2sgdG8gZWwgcGxhY2Vob2xkZXIgZm9yIHVucmVzb2x2ZWQgYXN5bmMgY29tcG9uZW50XG4gICAgICAgICAgYW5jaG9yVk5vZGUuZWwgfHwgYW5jaG9yVk5vZGUucGxhY2Vob2xkZXJcbiAgICAgICAgKSA6IHBhcmVudEFuY2hvcjtcbiAgICAgICAgaWYgKG5ld0luZGV4VG9PbGRJbmRleE1hcFtpXSA9PT0gMCkge1xuICAgICAgICAgIHBhdGNoKFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIG5leHRDaGlsZCxcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChtb3ZlZCkge1xuICAgICAgICAgIGlmIChqIDwgMCB8fCBpICE9PSBpbmNyZWFzaW5nTmV3SW5kZXhTZXF1ZW5jZVtqXSkge1xuICAgICAgICAgICAgbW92ZShuZXh0Q2hpbGQsIGNvbnRhaW5lciwgYW5jaG9yLCAyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgai0tO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgbW92ZSA9ICh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIG1vdmVUeXBlLCBwYXJlbnRTdXNwZW5zZSA9IG51bGwpID0+IHtcbiAgICBjb25zdCB7IGVsLCB0eXBlLCB0cmFuc2l0aW9uLCBjaGlsZHJlbiwgc2hhcGVGbGFnIH0gPSB2bm9kZTtcbiAgICBpZiAoc2hhcGVGbGFnICYgNikge1xuICAgICAgbW92ZSh2bm9kZS5jb21wb25lbnQuc3ViVHJlZSwgY29udGFpbmVyLCBhbmNob3IsIG1vdmVUeXBlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNoYXBlRmxhZyAmIDEyOCkge1xuICAgICAgdm5vZGUuc3VzcGVuc2UubW92ZShjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoc2hhcGVGbGFnICYgNjQpIHtcbiAgICAgIHR5cGUubW92ZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIGludGVybmFscyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlID09PSBGcmFnbWVudCkge1xuICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBtb3ZlKGNoaWxkcmVuW2ldLCBjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUpO1xuICAgICAgfVxuICAgICAgaG9zdEluc2VydCh2bm9kZS5hbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09IFN0YXRpYykge1xuICAgICAgbW92ZVN0YXRpY05vZGUodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbmVlZFRyYW5zaXRpb24yID0gbW92ZVR5cGUgIT09IDIgJiYgc2hhcGVGbGFnICYgMSAmJiB0cmFuc2l0aW9uO1xuICAgIGlmIChuZWVkVHJhbnNpdGlvbjIpIHtcbiAgICAgIGlmIChtb3ZlVHlwZSA9PT0gMCkge1xuICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGVsKTtcbiAgICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4gdHJhbnNpdGlvbi5lbnRlcihlbCksIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHsgbGVhdmUsIGRlbGF5TGVhdmUsIGFmdGVyTGVhdmUgfSA9IHRyYW5zaXRpb247XG4gICAgICAgIGNvbnN0IHJlbW92ZTIgPSAoKSA9PiB7XG4gICAgICAgICAgaWYgKHZub2RlLmN0eC5pc1VubW91bnRlZCkge1xuICAgICAgICAgICAgaG9zdFJlbW92ZShlbCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHBlcmZvcm1MZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgICBpZiAoZWwuX2lzTGVhdmluZykge1xuICAgICAgICAgICAgZWxbbGVhdmVDYktleV0oXG4gICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICAgLyogY2FuY2VsbGVkICovXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZWF2ZShlbCwgKCkgPT4ge1xuICAgICAgICAgICAgcmVtb3ZlMigpO1xuICAgICAgICAgICAgYWZ0ZXJMZWF2ZSAmJiBhZnRlckxlYXZlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChkZWxheUxlYXZlKSB7XG4gICAgICAgICAgZGVsYXlMZWF2ZShlbCwgcmVtb3ZlMiwgcGVyZm9ybUxlYXZlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwZXJmb3JtTGVhdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgfVxuICB9O1xuICBjb25zdCB1bm1vdW50ID0gKHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSA9IGZhbHNlLCBvcHRpbWl6ZWQgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHR5cGUsXG4gICAgICBwcm9wcyxcbiAgICAgIHJlZixcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgZHluYW1pY0NoaWxkcmVuLFxuICAgICAgc2hhcGVGbGFnLFxuICAgICAgcGF0Y2hGbGFnLFxuICAgICAgZGlycyxcbiAgICAgIGNhY2hlSW5kZXhcbiAgICB9ID0gdm5vZGU7XG4gICAgaWYgKHBhdGNoRmxhZyA9PT0gLTIpIHtcbiAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAocmVmICE9IG51bGwpIHtcbiAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgIHNldFJlZihyZWYsIG51bGwsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgdHJ1ZSk7XG4gICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgfVxuICAgIGlmIChjYWNoZUluZGV4ICE9IG51bGwpIHtcbiAgICAgIHBhcmVudENvbXBvbmVudC5yZW5kZXJDYWNoZVtjYWNoZUluZGV4XSA9IHZvaWQgMDtcbiAgICB9XG4gICAgaWYgKHNoYXBlRmxhZyAmIDI1Nikge1xuICAgICAgcGFyZW50Q29tcG9uZW50LmN0eC5kZWFjdGl2YXRlKHZub2RlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2hvdWxkSW52b2tlRGlycyA9IHNoYXBlRmxhZyAmIDEgJiYgZGlycztcbiAgICBjb25zdCBzaG91bGRJbnZva2VWbm9kZUhvb2sgPSAhaXNBc3luY1dyYXBwZXIodm5vZGUpO1xuICAgIGxldCB2bm9kZUhvb2s7XG4gICAgaWYgKHNob3VsZEludm9rZVZub2RlSG9vayAmJiAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZUJlZm9yZVVubW91bnQpKSB7XG4gICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcbiAgICB9XG4gICAgaWYgKHNoYXBlRmxhZyAmIDYpIHtcbiAgICAgIHVubW91bnRDb21wb25lbnQodm5vZGUuY29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgICAgIHZub2RlLnN1c3BlbnNlLnVubW91bnQocGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHNob3VsZEludm9rZURpcnMpIHtcbiAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBcImJlZm9yZVVubW91bnRcIik7XG4gICAgICB9XG4gICAgICBpZiAoc2hhcGVGbGFnICYgNjQpIHtcbiAgICAgICAgdm5vZGUudHlwZS5yZW1vdmUoXG4gICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIGludGVybmFscyxcbiAgICAgICAgICBkb1JlbW92ZVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChkeW5hbWljQ2hpbGRyZW4gJiYgLy8gIzUxNTRcbiAgICAgIC8vIHdoZW4gdi1vbmNlIGlzIHVzZWQgaW5zaWRlIGEgYmxvY2ssIHNldEJsb2NrVHJhY2tpbmcoLTEpIG1hcmtzIHRoZVxuICAgICAgLy8gcGFyZW50IGJsb2NrIHdpdGggaGFzT25jZTogdHJ1ZVxuICAgICAgLy8gc28gdGhhdCBpdCBkb2Vzbid0IHRha2UgdGhlIGZhc3QgcGF0aCBkdXJpbmcgdW5tb3VudCAtIG90aGVyd2lzZVxuICAgICAgLy8gY29tcG9uZW50cyBuZXN0ZWQgaW4gdi1vbmNlIGFyZSBuZXZlciB1bm1vdW50ZWQuXG4gICAgICAhZHluYW1pY0NoaWxkcmVuLmhhc09uY2UgJiYgLy8gIzExNTM6IGZhc3QgcGF0aCBzaG91bGQgbm90IGJlIHRha2VuIGZvciBub24tc3RhYmxlICh2LWZvcikgZnJhZ21lbnRzXG4gICAgICAodHlwZSAhPT0gRnJhZ21lbnQgfHwgcGF0Y2hGbGFnID4gMCAmJiBwYXRjaEZsYWcgJiA2NCkpIHtcbiAgICAgICAgdW5tb3VudENoaWxkcmVuKFxuICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBGcmFnbWVudCAmJiBwYXRjaEZsYWcgJiAoMTI4IHwgMjU2KSB8fCAhb3B0aW1pemVkICYmIHNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICAgIHVubW91bnRDaGlsZHJlbihjaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICB9XG4gICAgICBpZiAoZG9SZW1vdmUpIHtcbiAgICAgICAgcmVtb3ZlKHZub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNob3VsZEludm9rZVZub2RlSG9vayAmJiAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZVVubW91bnRlZCkgfHwgc2hvdWxkSW52b2tlRGlycykge1xuICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgdm5vZGVIb29rICYmIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICBzaG91bGRJbnZva2VEaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgXCJ1bm1vdW50ZWRcIik7XG4gICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgfVxuICB9O1xuICBjb25zdCByZW1vdmUgPSAodm5vZGUpID0+IHtcbiAgICBjb25zdCB7IHR5cGUsIGVsLCBhbmNob3IsIHRyYW5zaXRpb24gfSA9IHZub2RlO1xuICAgIGlmICh0eXBlID09PSBGcmFnbWVudCkge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdm5vZGUucGF0Y2hGbGFnID4gMCAmJiB2bm9kZS5wYXRjaEZsYWcgJiAyMDQ4ICYmIHRyYW5zaXRpb24gJiYgIXRyYW5zaXRpb24ucGVyc2lzdGVkKSB7XG4gICAgICAgIHZub2RlLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IENvbW1lbnQpIHtcbiAgICAgICAgICAgIGhvc3RSZW1vdmUoY2hpbGQuZWwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW1vdmUoY2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZW1vdmVGcmFnbWVudChlbCwgYW5jaG9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09IFN0YXRpYykge1xuICAgICAgcmVtb3ZlU3RhdGljTm9kZSh2bm9kZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBlcmZvcm1SZW1vdmUgPSAoKSA9PiB7XG4gICAgICBob3N0UmVtb3ZlKGVsKTtcbiAgICAgIGlmICh0cmFuc2l0aW9uICYmICF0cmFuc2l0aW9uLnBlcnNpc3RlZCAmJiB0cmFuc2l0aW9uLmFmdGVyTGVhdmUpIHtcbiAgICAgICAgdHJhbnNpdGlvbi5hZnRlckxlYXZlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMSAmJiB0cmFuc2l0aW9uICYmICF0cmFuc2l0aW9uLnBlcnNpc3RlZCkge1xuICAgICAgY29uc3QgeyBsZWF2ZSwgZGVsYXlMZWF2ZSB9ID0gdHJhbnNpdGlvbjtcbiAgICAgIGNvbnN0IHBlcmZvcm1MZWF2ZSA9ICgpID0+IGxlYXZlKGVsLCBwZXJmb3JtUmVtb3ZlKTtcbiAgICAgIGlmIChkZWxheUxlYXZlKSB7XG4gICAgICAgIGRlbGF5TGVhdmUodm5vZGUuZWwsIHBlcmZvcm1SZW1vdmUsIHBlcmZvcm1MZWF2ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwZXJmb3JtTGVhdmUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcGVyZm9ybVJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcmVtb3ZlRnJhZ21lbnQgPSAoY3VyLCBlbmQpID0+IHtcbiAgICBsZXQgbmV4dDtcbiAgICB3aGlsZSAoY3VyICE9PSBlbmQpIHtcbiAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoY3VyKTtcbiAgICAgIGhvc3RSZW1vdmUoY3VyKTtcbiAgICAgIGN1ciA9IG5leHQ7XG4gICAgfVxuICAgIGhvc3RSZW1vdmUoZW5kKTtcbiAgfTtcbiAgY29uc3QgdW5tb3VudENvbXBvbmVudCA9IChpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKSA9PiB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaW5zdGFuY2UudHlwZS5fX2htcklkKSB7XG4gICAgICB1bnJlZ2lzdGVySE1SKGluc3RhbmNlKTtcbiAgICB9XG4gICAgY29uc3QgeyBidW0sIHNjb3BlLCBqb2IsIHN1YlRyZWUsIHVtLCBtLCBhIH0gPSBpbnN0YW5jZTtcbiAgICBpbnZhbGlkYXRlTW91bnQobSk7XG4gICAgaW52YWxpZGF0ZU1vdW50KGEpO1xuICAgIGlmIChidW0pIHtcbiAgICAgIGludm9rZUFycmF5Rm5zKGJ1bSk7XG4gICAgfVxuICAgIHNjb3BlLnN0b3AoKTtcbiAgICBpZiAoam9iKSB7XG4gICAgICBqb2IuZmxhZ3MgfD0gODtcbiAgICAgIHVubW91bnQoc3ViVHJlZSwgaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSk7XG4gICAgfVxuICAgIGlmICh1bSkge1xuICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KHVtLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgfVxuICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICBpbnN0YW5jZS5pc1VubW91bnRlZCA9IHRydWU7XG4gICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgZGV2dG9vbHNDb21wb25lbnRSZW1vdmVkKGluc3RhbmNlKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHVubW91bnRDaGlsZHJlbiA9IChjaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUgPSBmYWxzZSwgb3B0aW1pemVkID0gZmFsc2UsIHN0YXJ0ID0gMCkgPT4ge1xuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICB1bm1vdW50KGNoaWxkcmVuW2ldLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSwgb3B0aW1pemVkKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGdldE5leHRIb3N0Tm9kZSA9ICh2bm9kZSkgPT4ge1xuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiA2KSB7XG4gICAgICByZXR1cm4gZ2V0TmV4dEhvc3ROb2RlKHZub2RlLmNvbXBvbmVudC5zdWJUcmVlKTtcbiAgICB9XG4gICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEyOCkge1xuICAgICAgcmV0dXJuIHZub2RlLnN1c3BlbnNlLm5leHQoKTtcbiAgICB9XG4gICAgY29uc3QgZWwgPSBob3N0TmV4dFNpYmxpbmcodm5vZGUuYW5jaG9yIHx8IHZub2RlLmVsKTtcbiAgICBjb25zdCB0ZWxlcG9ydEVuZCA9IGVsICYmIGVsW1RlbGVwb3J0RW5kS2V5XTtcbiAgICByZXR1cm4gdGVsZXBvcnRFbmQgPyBob3N0TmV4dFNpYmxpbmcodGVsZXBvcnRFbmQpIDogZWw7XG4gIH07XG4gIGxldCBpc0ZsdXNoaW5nID0gZmFsc2U7XG4gIGNvbnN0IHJlbmRlciA9ICh2bm9kZSwgY29udGFpbmVyLCBuYW1lc3BhY2UpID0+IHtcbiAgICBpZiAodm5vZGUgPT0gbnVsbCkge1xuICAgICAgaWYgKGNvbnRhaW5lci5fdm5vZGUpIHtcbiAgICAgICAgdW5tb3VudChjb250YWluZXIuX3Zub2RlLCBudWxsLCBudWxsLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcGF0Y2goXG4gICAgICAgIGNvbnRhaW5lci5fdm5vZGUgfHwgbnVsbCxcbiAgICAgICAgdm5vZGUsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgbnVsbCxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgbmFtZXNwYWNlXG4gICAgICApO1xuICAgIH1cbiAgICBjb250YWluZXIuX3Zub2RlID0gdm5vZGU7XG4gICAgaWYgKCFpc0ZsdXNoaW5nKSB7XG4gICAgICBpc0ZsdXNoaW5nID0gdHJ1ZTtcbiAgICAgIGZsdXNoUHJlRmx1c2hDYnMoKTtcbiAgICAgIGZsdXNoUG9zdEZsdXNoQ2JzKCk7XG4gICAgICBpc0ZsdXNoaW5nID0gZmFsc2U7XG4gICAgfVxuICB9O1xuICBjb25zdCBpbnRlcm5hbHMgPSB7XG4gICAgcDogcGF0Y2gsXG4gICAgdW06IHVubW91bnQsXG4gICAgbTogbW92ZSxcbiAgICByOiByZW1vdmUsXG4gICAgbXQ6IG1vdW50Q29tcG9uZW50LFxuICAgIG1jOiBtb3VudENoaWxkcmVuLFxuICAgIHBjOiBwYXRjaENoaWxkcmVuLFxuICAgIHBiYzogcGF0Y2hCbG9ja0NoaWxkcmVuLFxuICAgIG46IGdldE5leHRIb3N0Tm9kZSxcbiAgICBvOiBvcHRpb25zXG4gIH07XG4gIGxldCBoeWRyYXRlO1xuICBsZXQgaHlkcmF0ZU5vZGU7XG4gIGlmIChjcmVhdGVIeWRyYXRpb25GbnMpIHtcbiAgICBbaHlkcmF0ZSwgaHlkcmF0ZU5vZGVdID0gY3JlYXRlSHlkcmF0aW9uRm5zKFxuICAgICAgaW50ZXJuYWxzXG4gICAgKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHJlbmRlcixcbiAgICBoeWRyYXRlLFxuICAgIGNyZWF0ZUFwcDogY3JlYXRlQXBwQVBJKHJlbmRlciwgaHlkcmF0ZSlcbiAgfTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVDaGlsZHJlbk5hbWVzcGFjZSh7IHR5cGUsIHByb3BzIH0sIGN1cnJlbnROYW1lc3BhY2UpIHtcbiAgcmV0dXJuIGN1cnJlbnROYW1lc3BhY2UgPT09IFwic3ZnXCIgJiYgdHlwZSA9PT0gXCJmb3JlaWduT2JqZWN0XCIgfHwgY3VycmVudE5hbWVzcGFjZSA9PT0gXCJtYXRobWxcIiAmJiB0eXBlID09PSBcImFubm90YXRpb24teG1sXCIgJiYgcHJvcHMgJiYgcHJvcHMuZW5jb2RpbmcgJiYgcHJvcHMuZW5jb2RpbmcuaW5jbHVkZXMoXCJodG1sXCIpID8gdm9pZCAwIDogY3VycmVudE5hbWVzcGFjZTtcbn1cbmZ1bmN0aW9uIHRvZ2dsZVJlY3Vyc2UoeyBlZmZlY3QsIGpvYiB9LCBhbGxvd2VkKSB7XG4gIGlmIChhbGxvd2VkKSB7XG4gICAgZWZmZWN0LmZsYWdzIHw9IDMyO1xuICAgIGpvYi5mbGFncyB8PSA0O1xuICB9IGVsc2Uge1xuICAgIGVmZmVjdC5mbGFncyAmPSAtMzM7XG4gICAgam9iLmZsYWdzICY9IC01O1xuICB9XG59XG5mdW5jdGlvbiBuZWVkVHJhbnNpdGlvbihwYXJlbnRTdXNwZW5zZSwgdHJhbnNpdGlvbikge1xuICByZXR1cm4gKCFwYXJlbnRTdXNwZW5zZSB8fCBwYXJlbnRTdXNwZW5zZSAmJiAhcGFyZW50U3VzcGVuc2UucGVuZGluZ0JyYW5jaCkgJiYgdHJhbnNpdGlvbiAmJiAhdHJhbnNpdGlvbi5wZXJzaXN0ZWQ7XG59XG5mdW5jdGlvbiB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKG4xLCBuMiwgc2hhbGxvdyA9IGZhbHNlKSB7XG4gIGNvbnN0IGNoMSA9IG4xLmNoaWxkcmVuO1xuICBjb25zdCBjaDIgPSBuMi5jaGlsZHJlbjtcbiAgaWYgKGlzQXJyYXkoY2gxKSAmJiBpc0FycmF5KGNoMikpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoMS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYzEgPSBjaDFbaV07XG4gICAgICBsZXQgYzIgPSBjaDJbaV07XG4gICAgICBpZiAoYzIuc2hhcGVGbGFnICYgMSAmJiAhYzIuZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgIGlmIChjMi5wYXRjaEZsYWcgPD0gMCB8fCBjMi5wYXRjaEZsYWcgPT09IDMyKSB7XG4gICAgICAgICAgYzIgPSBjaDJbaV0gPSBjbG9uZUlmTW91bnRlZChjaDJbaV0pO1xuICAgICAgICAgIGMyLmVsID0gYzEuZWw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzaGFsbG93ICYmIGMyLnBhdGNoRmxhZyAhPT0gLTIpXG4gICAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihjMSwgYzIpO1xuICAgICAgfVxuICAgICAgaWYgKGMyLnR5cGUgPT09IFRleHQgJiYgLy8gYXZvaWQgY2FjaGVkIHRleHQgbm9kZXMgcmV0YWluaW5nIGRldGFjaGVkIGRvbSBub2Rlc1xuICAgICAgYzIucGF0Y2hGbGFnICE9PSAtMSkge1xuICAgICAgICBjMi5lbCA9IGMxLmVsO1xuICAgICAgfVxuICAgICAgaWYgKGMyLnR5cGUgPT09IENvbW1lbnQgJiYgIWMyLmVsKSB7XG4gICAgICAgIGMyLmVsID0gYzEuZWw7XG4gICAgICB9XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICBjMi5lbCAmJiAoYzIuZWwuX192bm9kZSA9IGMyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFNlcXVlbmNlKGFycikge1xuICBjb25zdCBwID0gYXJyLnNsaWNlKCk7XG4gIGNvbnN0IHJlc3VsdCA9IFswXTtcbiAgbGV0IGksIGosIHUsIHYsIGM7XG4gIGNvbnN0IGxlbiA9IGFyci5sZW5ndGg7XG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IGFyckkgPSBhcnJbaV07XG4gICAgaWYgKGFyckkgIT09IDApIHtcbiAgICAgIGogPSByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKGFycltqXSA8IGFyckkpIHtcbiAgICAgICAgcFtpXSA9IGo7XG4gICAgICAgIHJlc3VsdC5wdXNoKGkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHUgPSAwO1xuICAgICAgdiA9IHJlc3VsdC5sZW5ndGggLSAxO1xuICAgICAgd2hpbGUgKHUgPCB2KSB7XG4gICAgICAgIGMgPSB1ICsgdiA+PiAxO1xuICAgICAgICBpZiAoYXJyW3Jlc3VsdFtjXV0gPCBhcnJJKSB7XG4gICAgICAgICAgdSA9IGMgKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHYgPSBjO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYXJySSA8IGFycltyZXN1bHRbdV1dKSB7XG4gICAgICAgIGlmICh1ID4gMCkge1xuICAgICAgICAgIHBbaV0gPSByZXN1bHRbdSAtIDFdO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdFt1XSA9IGk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHUgPSByZXN1bHQubGVuZ3RoO1xuICB2ID0gcmVzdWx0W3UgLSAxXTtcbiAgd2hpbGUgKHUtLSA+IDApIHtcbiAgICByZXN1bHRbdV0gPSB2O1xuICAgIHYgPSBwW3ZdO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBsb2NhdGVOb25IeWRyYXRlZEFzeW5jUm9vdChpbnN0YW5jZSkge1xuICBjb25zdCBzdWJDb21wb25lbnQgPSBpbnN0YW5jZS5zdWJUcmVlLmNvbXBvbmVudDtcbiAgaWYgKHN1YkNvbXBvbmVudCkge1xuICAgIGlmIChzdWJDb21wb25lbnQuYXN5bmNEZXAgJiYgIXN1YkNvbXBvbmVudC5hc3luY1Jlc29sdmVkKSB7XG4gICAgICByZXR1cm4gc3ViQ29tcG9uZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbG9jYXRlTm9uSHlkcmF0ZWRBc3luY1Jvb3Qoc3ViQ29tcG9uZW50KTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGludmFsaWRhdGVNb3VudChob29rcykge1xuICBpZiAoaG9va3MpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgaSsrKVxuICAgICAgaG9va3NbaV0uZmxhZ3MgfD0gODtcbiAgfVxufVxuXG5jb25zdCBpc1N1c3BlbnNlID0gKHR5cGUpID0+IHR5cGUuX19pc1N1c3BlbnNlO1xubGV0IHN1c3BlbnNlSWQgPSAwO1xuY29uc3QgU3VzcGVuc2VJbXBsID0ge1xuICBuYW1lOiBcIlN1c3BlbnNlXCIsXG4gIC8vIEluIG9yZGVyIHRvIG1ha2UgU3VzcGVuc2UgdHJlZS1zaGFrYWJsZSwgd2UgbmVlZCB0byBhdm9pZCBpbXBvcnRpbmcgaXRcbiAgLy8gZGlyZWN0bHkgaW4gdGhlIHJlbmRlcmVyLiBUaGUgcmVuZGVyZXIgY2hlY2tzIGZvciB0aGUgX19pc1N1c3BlbnNlIGZsYWdcbiAgLy8gb24gYSB2bm9kZSdzIHR5cGUgYW5kIGNhbGxzIHRoZSBgcHJvY2Vzc2AgbWV0aG9kLCBwYXNzaW5nIGluIHJlbmRlcmVyXG4gIC8vIGludGVybmFscy5cbiAgX19pc1N1c3BlbnNlOiB0cnVlLFxuICBwcm9jZXNzKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzKSB7XG4gICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgIG1vdW50U3VzcGVuc2UoXG4gICAgICAgIG4yLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZCxcbiAgICAgICAgcmVuZGVyZXJJbnRlcm5hbHNcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwYXJlbnRTdXNwZW5zZSAmJiBwYXJlbnRTdXNwZW5zZS5kZXBzID4gMCAmJiAhbjEuc3VzcGVuc2UuaXNJbkZhbGxiYWNrKSB7XG4gICAgICAgIG4yLnN1c3BlbnNlID0gbjEuc3VzcGVuc2U7XG4gICAgICAgIG4yLnN1c3BlbnNlLnZub2RlID0gbjI7XG4gICAgICAgIG4yLmVsID0gbjEuZWw7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHBhdGNoU3VzcGVuc2UoXG4gICAgICAgIG4xLFxuICAgICAgICBuMixcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZCxcbiAgICAgICAgcmVuZGVyZXJJbnRlcm5hbHNcbiAgICAgICk7XG4gICAgfVxuICB9LFxuICBoeWRyYXRlOiBoeWRyYXRlU3VzcGVuc2UsXG4gIG5vcm1hbGl6ZTogbm9ybWFsaXplU3VzcGVuc2VDaGlsZHJlblxufTtcbmNvbnN0IFN1c3BlbnNlID0gU3VzcGVuc2VJbXBsIDtcbmZ1bmN0aW9uIHRyaWdnZXJFdmVudCh2bm9kZSwgbmFtZSkge1xuICBjb25zdCBldmVudExpc3RlbmVyID0gdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHNbbmFtZV07XG4gIGlmIChpc0Z1bmN0aW9uKGV2ZW50TGlzdGVuZXIpKSB7XG4gICAgZXZlbnRMaXN0ZW5lcigpO1xuICB9XG59XG5mdW5jdGlvbiBtb3VudFN1c3BlbnNlKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMpIHtcbiAgY29uc3Qge1xuICAgIHA6IHBhdGNoLFxuICAgIG86IHsgY3JlYXRlRWxlbWVudCB9XG4gIH0gPSByZW5kZXJlckludGVybmFscztcbiAgY29uc3QgaGlkZGVuQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY29uc3Qgc3VzcGVuc2UgPSB2bm9kZS5zdXNwZW5zZSA9IGNyZWF0ZVN1c3BlbnNlQm91bmRhcnkoXG4gICAgdm5vZGUsXG4gICAgcGFyZW50U3VzcGVuc2UsXG4gICAgcGFyZW50Q29tcG9uZW50LFxuICAgIGNvbnRhaW5lcixcbiAgICBoaWRkZW5Db250YWluZXIsXG4gICAgYW5jaG9yLFxuICAgIG5hbWVzcGFjZSxcbiAgICBzbG90U2NvcGVJZHMsXG4gICAgb3B0aW1pemVkLFxuICAgIHJlbmRlcmVySW50ZXJuYWxzXG4gICk7XG4gIHBhdGNoKFxuICAgIG51bGwsXG4gICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IHZub2RlLnNzQ29udGVudCxcbiAgICBoaWRkZW5Db250YWluZXIsXG4gICAgbnVsbCxcbiAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgc3VzcGVuc2UsXG4gICAgbmFtZXNwYWNlLFxuICAgIHNsb3RTY29wZUlkc1xuICApO1xuICBpZiAoc3VzcGVuc2UuZGVwcyA+IDApIHtcbiAgICB0cmlnZ2VyRXZlbnQodm5vZGUsIFwib25QZW5kaW5nXCIpO1xuICAgIHRyaWdnZXJFdmVudCh2bm9kZSwgXCJvbkZhbGxiYWNrXCIpO1xuICAgIHBhdGNoKFxuICAgICAgbnVsbCxcbiAgICAgIHZub2RlLnNzRmFsbGJhY2ssXG4gICAgICBjb250YWluZXIsXG4gICAgICBhbmNob3IsXG4gICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICBudWxsLFxuICAgICAgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcbiAgICAgIG5hbWVzcGFjZSxcbiAgICAgIHNsb3RTY29wZUlkc1xuICAgICk7XG4gICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCB2bm9kZS5zc0ZhbGxiYWNrKTtcbiAgfSBlbHNlIHtcbiAgICBzdXNwZW5zZS5yZXNvbHZlKGZhbHNlLCB0cnVlKTtcbiAgfVxufVxuZnVuY3Rpb24gcGF0Y2hTdXNwZW5zZShuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHsgcDogcGF0Y2gsIHVtOiB1bm1vdW50LCBvOiB7IGNyZWF0ZUVsZW1lbnQgfSB9KSB7XG4gIGNvbnN0IHN1c3BlbnNlID0gbjIuc3VzcGVuc2UgPSBuMS5zdXNwZW5zZTtcbiAgc3VzcGVuc2Uudm5vZGUgPSBuMjtcbiAgbjIuZWwgPSBuMS5lbDtcbiAgY29uc3QgbmV3QnJhbmNoID0gbjIuc3NDb250ZW50O1xuICBjb25zdCBuZXdGYWxsYmFjayA9IG4yLnNzRmFsbGJhY2s7XG4gIGNvbnN0IHsgYWN0aXZlQnJhbmNoLCBwZW5kaW5nQnJhbmNoLCBpc0luRmFsbGJhY2ssIGlzSHlkcmF0aW5nIH0gPSBzdXNwZW5zZTtcbiAgaWYgKHBlbmRpbmdCcmFuY2gpIHtcbiAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gbmV3QnJhbmNoO1xuICAgIGlmIChpc1NhbWVWTm9kZVR5cGUocGVuZGluZ0JyYW5jaCwgbmV3QnJhbmNoKSkge1xuICAgICAgcGF0Y2goXG4gICAgICAgIHBlbmRpbmdCcmFuY2gsXG4gICAgICAgIG5ld0JyYW5jaCxcbiAgICAgICAgc3VzcGVuc2UuaGlkZGVuQ29udGFpbmVyLFxuICAgICAgICBudWxsLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgICAgaWYgKHN1c3BlbnNlLmRlcHMgPD0gMCkge1xuICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICB9IGVsc2UgaWYgKGlzSW5GYWxsYmFjaykge1xuICAgICAgICBpZiAoIWlzSHlkcmF0aW5nKSB7XG4gICAgICAgICAgcGF0Y2goXG4gICAgICAgICAgICBhY3RpdmVCcmFuY2gsXG4gICAgICAgICAgICBuZXdGYWxsYmFjayxcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAvLyBmYWxsYmFjayB0cmVlIHdpbGwgbm90IGhhdmUgc3VzcGVuc2UgY29udGV4dFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIG5ld0ZhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdXNwZW5zZS5wZW5kaW5nSWQgPSBzdXNwZW5zZUlkKys7XG4gICAgICBpZiAoaXNIeWRyYXRpbmcpIHtcbiAgICAgICAgc3VzcGVuc2UuaXNIeWRyYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgc3VzcGVuc2UuYWN0aXZlQnJhbmNoID0gcGVuZGluZ0JyYW5jaDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVubW91bnQocGVuZGluZ0JyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSk7XG4gICAgICB9XG4gICAgICBzdXNwZW5zZS5kZXBzID0gMDtcbiAgICAgIHN1c3BlbnNlLmVmZmVjdHMubGVuZ3RoID0gMDtcbiAgICAgIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBpZiAoaXNJbkZhbGxiYWNrKSB7XG4gICAgICAgIHBhdGNoKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgbmV3QnJhbmNoLFxuICAgICAgICAgIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lcixcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBzdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgICBpZiAoc3VzcGVuc2UuZGVwcyA8PSAwKSB7XG4gICAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhdGNoKFxuICAgICAgICAgICAgYWN0aXZlQnJhbmNoLFxuICAgICAgICAgICAgbmV3RmFsbGJhY2ssXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBuZXdGYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYWN0aXZlQnJhbmNoICYmIGlzU2FtZVZOb2RlVHlwZShhY3RpdmVCcmFuY2gsIG5ld0JyYW5jaCkpIHtcbiAgICAgICAgcGF0Y2goXG4gICAgICAgICAgYWN0aXZlQnJhbmNoLFxuICAgICAgICAgIG5ld0JyYW5jaCxcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBzdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGF0Y2goXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBuZXdCcmFuY2gsXG4gICAgICAgICAgc3VzcGVuc2UuaGlkZGVuQ29udGFpbmVyLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICAgIGlmIChzdXNwZW5zZS5kZXBzIDw9IDApIHtcbiAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGFjdGl2ZUJyYW5jaCAmJiBpc1NhbWVWTm9kZVR5cGUoYWN0aXZlQnJhbmNoLCBuZXdCcmFuY2gpKSB7XG4gICAgICBwYXRjaChcbiAgICAgICAgYWN0aXZlQnJhbmNoLFxuICAgICAgICBuZXdCcmFuY2gsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBuZXdCcmFuY2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmlnZ2VyRXZlbnQobjIsIFwib25QZW5kaW5nXCIpO1xuICAgICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IG5ld0JyYW5jaDtcbiAgICAgIGlmIChuZXdCcmFuY2guc2hhcGVGbGFnICYgNTEyKSB7XG4gICAgICAgIHN1c3BlbnNlLnBlbmRpbmdJZCA9IG5ld0JyYW5jaC5jb21wb25lbnQuc3VzcGVuc2VJZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1c3BlbnNlLnBlbmRpbmdJZCA9IHN1c3BlbnNlSWQrKztcbiAgICAgIH1cbiAgICAgIHBhdGNoKFxuICAgICAgICBudWxsLFxuICAgICAgICBuZXdCcmFuY2gsXG4gICAgICAgIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lcixcbiAgICAgICAgbnVsbCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBzdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICAgIGlmIChzdXNwZW5zZS5kZXBzIDw9IDApIHtcbiAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgeyB0aW1lb3V0LCBwZW5kaW5nSWQgfSA9IHN1c3BlbnNlO1xuICAgICAgICBpZiAodGltZW91dCA+IDApIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmIChzdXNwZW5zZS5wZW5kaW5nSWQgPT09IHBlbmRpbmdJZCkge1xuICAgICAgICAgICAgICBzdXNwZW5zZS5mYWxsYmFjayhuZXdGYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGltZW91dCA9PT0gMCkge1xuICAgICAgICAgIHN1c3BlbnNlLmZhbGxiYWNrKG5ld0ZhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxubGV0IGhhc1dhcm5lZCA9IGZhbHNlO1xuZnVuY3Rpb24gY3JlYXRlU3VzcGVuc2VCb3VuZGFyeSh2bm9kZSwgcGFyZW50U3VzcGVuc2UsIHBhcmVudENvbXBvbmVudCwgY29udGFpbmVyLCBoaWRkZW5Db250YWluZXIsIGFuY2hvciwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMsIGlzSHlkcmF0aW5nID0gZmFsc2UpIHtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdHJ1ZSAmJiAhaGFzV2FybmVkKSB7XG4gICAgaGFzV2FybmVkID0gdHJ1ZTtcbiAgICBjb25zb2xlW2NvbnNvbGUuaW5mbyA/IFwiaW5mb1wiIDogXCJsb2dcIl0oXG4gICAgICBgPFN1c3BlbnNlPiBpcyBhbiBleHBlcmltZW50YWwgZmVhdHVyZSBhbmQgaXRzIEFQSSB3aWxsIGxpa2VseSBjaGFuZ2UuYFxuICAgICk7XG4gIH1cbiAgY29uc3Qge1xuICAgIHA6IHBhdGNoLFxuICAgIG06IG1vdmUsXG4gICAgdW06IHVubW91bnQsXG4gICAgbjogbmV4dCxcbiAgICBvOiB7IHBhcmVudE5vZGUsIHJlbW92ZSB9XG4gIH0gPSByZW5kZXJlckludGVybmFscztcbiAgbGV0IHBhcmVudFN1c3BlbnNlSWQ7XG4gIGNvbnN0IGlzU3VzcGVuc2libGUgPSBpc1ZOb2RlU3VzcGVuc2libGUodm5vZGUpO1xuICBpZiAoaXNTdXNwZW5zaWJsZSkge1xuICAgIGlmIChwYXJlbnRTdXNwZW5zZSAmJiBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XG4gICAgICBwYXJlbnRTdXNwZW5zZUlkID0gcGFyZW50U3VzcGVuc2UucGVuZGluZ0lkO1xuICAgICAgcGFyZW50U3VzcGVuc2UuZGVwcysrO1xuICAgIH1cbiAgfVxuICBjb25zdCB0aW1lb3V0ID0gdm5vZGUucHJvcHMgPyB0b051bWJlcih2bm9kZS5wcm9wcy50aW1lb3V0KSA6IHZvaWQgMDtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBhc3NlcnROdW1iZXIodGltZW91dCwgYFN1c3BlbnNlIHRpbWVvdXRgKTtcbiAgfVxuICBjb25zdCBpbml0aWFsQW5jaG9yID0gYW5jaG9yO1xuICBjb25zdCBzdXNwZW5zZSA9IHtcbiAgICB2bm9kZSxcbiAgICBwYXJlbnQ6IHBhcmVudFN1c3BlbnNlLFxuICAgIHBhcmVudENvbXBvbmVudCxcbiAgICBuYW1lc3BhY2UsXG4gICAgY29udGFpbmVyLFxuICAgIGhpZGRlbkNvbnRhaW5lcixcbiAgICBkZXBzOiAwLFxuICAgIHBlbmRpbmdJZDogc3VzcGVuc2VJZCsrLFxuICAgIHRpbWVvdXQ6IHR5cGVvZiB0aW1lb3V0ID09PSBcIm51bWJlclwiID8gdGltZW91dCA6IC0xLFxuICAgIGFjdGl2ZUJyYW5jaDogbnVsbCxcbiAgICBwZW5kaW5nQnJhbmNoOiBudWxsLFxuICAgIGlzSW5GYWxsYmFjazogIWlzSHlkcmF0aW5nLFxuICAgIGlzSHlkcmF0aW5nLFxuICAgIGlzVW5tb3VudGVkOiBmYWxzZSxcbiAgICBlZmZlY3RzOiBbXSxcbiAgICByZXNvbHZlKHJlc3VtZSA9IGZhbHNlLCBzeW5jID0gZmFsc2UpIHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgIGlmICghcmVzdW1lICYmICFzdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYHN1c3BlbnNlLnJlc29sdmUoKSBpcyBjYWxsZWQgd2l0aG91dCBhIHBlbmRpbmcgYnJhbmNoLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdXNwZW5zZS5pc1VubW91bnRlZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBzdXNwZW5zZS5yZXNvbHZlKCkgaXMgY2FsbGVkIG9uIGFuIGFscmVhZHkgdW5tb3VudGVkIHN1c3BlbnNlIGJvdW5kYXJ5LmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCB7XG4gICAgICAgIHZub2RlOiB2bm9kZTIsXG4gICAgICAgIGFjdGl2ZUJyYW5jaCxcbiAgICAgICAgcGVuZGluZ0JyYW5jaCxcbiAgICAgICAgcGVuZGluZ0lkLFxuICAgICAgICBlZmZlY3RzLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQ6IHBhcmVudENvbXBvbmVudDIsXG4gICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyMixcbiAgICAgICAgaXNJbkZhbGxiYWNrXG4gICAgICB9ID0gc3VzcGVuc2U7XG4gICAgICBsZXQgZGVsYXlFbnRlciA9IGZhbHNlO1xuICAgICAgaWYgKHN1c3BlbnNlLmlzSHlkcmF0aW5nKSB7XG4gICAgICAgIHN1c3BlbnNlLmlzSHlkcmF0aW5nID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKCFyZXN1bWUpIHtcbiAgICAgICAgZGVsYXlFbnRlciA9IGFjdGl2ZUJyYW5jaCAmJiBwZW5kaW5nQnJhbmNoLnRyYW5zaXRpb24gJiYgcGVuZGluZ0JyYW5jaC50cmFuc2l0aW9uLm1vZGUgPT09IFwib3V0LWluXCI7XG4gICAgICAgIGlmIChkZWxheUVudGVyKSB7XG4gICAgICAgICAgYWN0aXZlQnJhbmNoLnRyYW5zaXRpb24uYWZ0ZXJMZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChwZW5kaW5nSWQgPT09IHN1c3BlbnNlLnBlbmRpbmdJZCkge1xuICAgICAgICAgICAgICBtb3ZlKFxuICAgICAgICAgICAgICAgIHBlbmRpbmdCcmFuY2gsXG4gICAgICAgICAgICAgICAgY29udGFpbmVyMixcbiAgICAgICAgICAgICAgICBhbmNob3IgPT09IGluaXRpYWxBbmNob3IgPyBuZXh0KGFjdGl2ZUJyYW5jaCkgOiBhbmNob3IsXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBxdWV1ZVBvc3RGbHVzaENiKGVmZmVjdHMpO1xuICAgICAgICAgICAgICBpZiAoaXNJbkZhbGxiYWNrICYmIHZub2RlMi5zc0ZhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdm5vZGUyLnNzRmFsbGJhY2suZWwgPSBudWxsO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWN0aXZlQnJhbmNoKSB7XG4gICAgICAgICAgaWYgKHBhcmVudE5vZGUoYWN0aXZlQnJhbmNoLmVsKSA9PT0gY29udGFpbmVyMikge1xuICAgICAgICAgICAgYW5jaG9yID0gbmV4dChhY3RpdmVCcmFuY2gpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB1bm1vdW50KGFjdGl2ZUJyYW5jaCwgcGFyZW50Q29tcG9uZW50Miwgc3VzcGVuc2UsIHRydWUpO1xuICAgICAgICAgIGlmICghZGVsYXlFbnRlciAmJiBpc0luRmFsbGJhY2sgJiYgdm5vZGUyLnNzRmFsbGJhY2spIHtcbiAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB2bm9kZTIuc3NGYWxsYmFjay5lbCA9IG51bGwsIHN1c3BlbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkZWxheUVudGVyKSB7XG4gICAgICAgICAgbW92ZShwZW5kaW5nQnJhbmNoLCBjb250YWluZXIyLCBhbmNob3IsIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIHBlbmRpbmdCcmFuY2gpO1xuICAgICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IG51bGw7XG4gICAgICBzdXNwZW5zZS5pc0luRmFsbGJhY2sgPSBmYWxzZTtcbiAgICAgIGxldCBwYXJlbnQgPSBzdXNwZW5zZS5wYXJlbnQ7XG4gICAgICBsZXQgaGFzVW5yZXNvbHZlZEFuY2VzdG9yID0gZmFsc2U7XG4gICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgIGlmIChwYXJlbnQucGVuZGluZ0JyYW5jaCkge1xuICAgICAgICAgIHBhcmVudC5lZmZlY3RzLnB1c2goLi4uZWZmZWN0cyk7XG4gICAgICAgICAgaGFzVW5yZXNvbHZlZEFuY2VzdG9yID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICAgICAgfVxuICAgICAgaWYgKCFoYXNVbnJlc29sdmVkQW5jZXN0b3IgJiYgIWRlbGF5RW50ZXIpIHtcbiAgICAgICAgcXVldWVQb3N0Rmx1c2hDYihlZmZlY3RzKTtcbiAgICAgIH1cbiAgICAgIHN1c3BlbnNlLmVmZmVjdHMgPSBbXTtcbiAgICAgIGlmIChpc1N1c3BlbnNpYmxlKSB7XG4gICAgICAgIGlmIChwYXJlbnRTdXNwZW5zZSAmJiBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nQnJhbmNoICYmIHBhcmVudFN1c3BlbnNlSWQgPT09IHBhcmVudFN1c3BlbnNlLnBlbmRpbmdJZCkge1xuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLmRlcHMtLTtcbiAgICAgICAgICBpZiAocGFyZW50U3VzcGVuc2UuZGVwcyA9PT0gMCAmJiAhc3luYykge1xuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdHJpZ2dlckV2ZW50KHZub2RlMiwgXCJvblJlc29sdmVcIik7XG4gICAgfSxcbiAgICBmYWxsYmFjayhmYWxsYmFja1ZOb2RlKSB7XG4gICAgICBpZiAoIXN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgeyB2bm9kZTogdm5vZGUyLCBhY3RpdmVCcmFuY2gsIHBhcmVudENvbXBvbmVudDogcGFyZW50Q29tcG9uZW50MiwgY29udGFpbmVyOiBjb250YWluZXIyLCBuYW1lc3BhY2U6IG5hbWVzcGFjZTIgfSA9IHN1c3BlbnNlO1xuICAgICAgdHJpZ2dlckV2ZW50KHZub2RlMiwgXCJvbkZhbGxiYWNrXCIpO1xuICAgICAgY29uc3QgYW5jaG9yMiA9IG5leHQoYWN0aXZlQnJhbmNoKTtcbiAgICAgIGNvbnN0IG1vdW50RmFsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgIGlmICghc3VzcGVuc2UuaXNJbkZhbGxiYWNrKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHBhdGNoKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgZmFsbGJhY2tWTm9kZSxcbiAgICAgICAgICBjb250YWluZXIyLFxuICAgICAgICAgIGFuY2hvcjIsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50MixcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIC8vIGZhbGxiYWNrIHRyZWUgd2lsbCBub3QgaGF2ZSBzdXNwZW5zZSBjb250ZXh0XG4gICAgICAgICAgbmFtZXNwYWNlMixcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgZmFsbGJhY2tWTm9kZSk7XG4gICAgICB9O1xuICAgICAgY29uc3QgZGVsYXlFbnRlciA9IGZhbGxiYWNrVk5vZGUudHJhbnNpdGlvbiAmJiBmYWxsYmFja1ZOb2RlLnRyYW5zaXRpb24ubW9kZSA9PT0gXCJvdXQtaW5cIjtcbiAgICAgIGlmIChkZWxheUVudGVyKSB7XG4gICAgICAgIGFjdGl2ZUJyYW5jaC50cmFuc2l0aW9uLmFmdGVyTGVhdmUgPSBtb3VudEZhbGxiYWNrO1xuICAgICAgfVxuICAgICAgc3VzcGVuc2UuaXNJbkZhbGxiYWNrID0gdHJ1ZTtcbiAgICAgIHVubW91bnQoXG4gICAgICAgIGFjdGl2ZUJyYW5jaCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50MixcbiAgICAgICAgbnVsbCxcbiAgICAgICAgLy8gbm8gc3VzcGVuc2Ugc28gdW5tb3VudCBob29rcyBmaXJlIG5vd1xuICAgICAgICB0cnVlXG4gICAgICAgIC8vIHNob3VsZFJlbW92ZVxuICAgICAgKTtcbiAgICAgIGlmICghZGVsYXlFbnRlcikge1xuICAgICAgICBtb3VudEZhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBtb3ZlKGNvbnRhaW5lcjIsIGFuY2hvcjIsIHR5cGUpIHtcbiAgICAgIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCAmJiBtb3ZlKHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCwgY29udGFpbmVyMiwgYW5jaG9yMiwgdHlwZSk7XG4gICAgICBzdXNwZW5zZS5jb250YWluZXIgPSBjb250YWluZXIyO1xuICAgIH0sXG4gICAgbmV4dCgpIHtcbiAgICAgIHJldHVybiBzdXNwZW5zZS5hY3RpdmVCcmFuY2ggJiYgbmV4dChzdXNwZW5zZS5hY3RpdmVCcmFuY2gpO1xuICAgIH0sXG4gICAgcmVnaXN0ZXJEZXAoaW5zdGFuY2UsIHNldHVwUmVuZGVyRWZmZWN0LCBvcHRpbWl6ZWQyKSB7XG4gICAgICBjb25zdCBpc0luUGVuZGluZ1N1c3BlbnNlID0gISFzdXNwZW5zZS5wZW5kaW5nQnJhbmNoO1xuICAgICAgaWYgKGlzSW5QZW5kaW5nU3VzcGVuc2UpIHtcbiAgICAgICAgc3VzcGVuc2UuZGVwcysrO1xuICAgICAgfVxuICAgICAgY29uc3QgaHlkcmF0ZWRFbCA9IGluc3RhbmNlLnZub2RlLmVsO1xuICAgICAgaW5zdGFuY2UuYXN5bmNEZXAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCAwKTtcbiAgICAgIH0pLnRoZW4oKGFzeW5jU2V0dXBSZXN1bHQpID0+IHtcbiAgICAgICAgaWYgKGluc3RhbmNlLmlzVW5tb3VudGVkIHx8IHN1c3BlbnNlLmlzVW5tb3VudGVkIHx8IHN1c3BlbnNlLnBlbmRpbmdJZCAhPT0gaW5zdGFuY2Uuc3VzcGVuc2VJZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5hc3luY1Jlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgeyB2bm9kZTogdm5vZGUyIH0gPSBpbnN0YW5jZTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQodm5vZGUyKTtcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVTZXR1cFJlc3VsdChpbnN0YW5jZSwgYXN5bmNTZXR1cFJlc3VsdCwgZmFsc2UpO1xuICAgICAgICBpZiAoaHlkcmF0ZWRFbCkge1xuICAgICAgICAgIHZub2RlMi5lbCA9IGh5ZHJhdGVkRWw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSAhaHlkcmF0ZWRFbCAmJiBpbnN0YW5jZS5zdWJUcmVlLmVsO1xuICAgICAgICBzZXR1cFJlbmRlckVmZmVjdChcbiAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICB2bm9kZTIsXG4gICAgICAgICAgLy8gY29tcG9uZW50IG1heSBoYXZlIGJlZW4gbW92ZWQgYmVmb3JlIHJlc29sdmUuXG4gICAgICAgICAgLy8gaWYgdGhpcyBpcyBub3QgYSBoeWRyYXRpb24sIGluc3RhbmNlLnN1YlRyZWUgd2lsbCBiZSB0aGUgY29tbWVudFxuICAgICAgICAgIC8vIHBsYWNlaG9sZGVyLlxuICAgICAgICAgIHBhcmVudE5vZGUoaHlkcmF0ZWRFbCB8fCBpbnN0YW5jZS5zdWJUcmVlLmVsKSxcbiAgICAgICAgICAvLyBhbmNob3Igd2lsbCBub3QgYmUgdXNlZCBpZiB0aGlzIGlzIGh5ZHJhdGlvbiwgc28gb25seSBuZWVkIHRvXG4gICAgICAgICAgLy8gY29uc2lkZXIgdGhlIGNvbW1lbnQgcGxhY2Vob2xkZXIgY2FzZS5cbiAgICAgICAgICBoeWRyYXRlZEVsID8gbnVsbCA6IG5leHQoaW5zdGFuY2Uuc3ViVHJlZSksXG4gICAgICAgICAgc3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIG9wdGltaXplZDJcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgdm5vZGUyLnBsYWNlaG9sZGVyID0gbnVsbDtcbiAgICAgICAgICByZW1vdmUocGxhY2Vob2xkZXIpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZUhPQ0hvc3RFbChpbnN0YW5jZSwgdm5vZGUyLmVsKTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0luUGVuZGluZ1N1c3BlbnNlICYmIC0tc3VzcGVuc2UuZGVwcyA9PT0gMCkge1xuICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICB1bm1vdW50KHBhcmVudFN1c3BlbnNlMiwgZG9SZW1vdmUpIHtcbiAgICAgIHN1c3BlbnNlLmlzVW5tb3VudGVkID0gdHJ1ZTtcbiAgICAgIGlmIChzdXNwZW5zZS5hY3RpdmVCcmFuY2gpIHtcbiAgICAgICAgdW5tb3VudChcbiAgICAgICAgICBzdXNwZW5zZS5hY3RpdmVCcmFuY2gsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlMixcbiAgICAgICAgICBkb1JlbW92ZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgdW5tb3VudChcbiAgICAgICAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZTIsXG4gICAgICAgICAgZG9SZW1vdmVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJldHVybiBzdXNwZW5zZTtcbn1cbmZ1bmN0aW9uIGh5ZHJhdGVTdXNwZW5zZShub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMsIGh5ZHJhdGVOb2RlKSB7XG4gIGNvbnN0IHN1c3BlbnNlID0gdm5vZGUuc3VzcGVuc2UgPSBjcmVhdGVTdXNwZW5zZUJvdW5kYXJ5KFxuICAgIHZub2RlLFxuICAgIHBhcmVudFN1c3BlbnNlLFxuICAgIHBhcmVudENvbXBvbmVudCxcbiAgICBub2RlLnBhcmVudE5vZGUsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgbnVsbCxcbiAgICBuYW1lc3BhY2UsXG4gICAgc2xvdFNjb3BlSWRzLFxuICAgIG9wdGltaXplZCxcbiAgICByZW5kZXJlckludGVybmFscyxcbiAgICB0cnVlXG4gICk7XG4gIGNvbnN0IHJlc3VsdCA9IGh5ZHJhdGVOb2RlKFxuICAgIG5vZGUsXG4gICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IHZub2RlLnNzQ29udGVudCxcbiAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgc3VzcGVuc2UsXG4gICAgc2xvdFNjb3BlSWRzLFxuICAgIG9wdGltaXplZFxuICApO1xuICBpZiAoc3VzcGVuc2UuZGVwcyA9PT0gMCkge1xuICAgIHN1c3BlbnNlLnJlc29sdmUoZmFsc2UsIHRydWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBub3JtYWxpemVTdXNwZW5zZUNoaWxkcmVuKHZub2RlKSB7XG4gIGNvbnN0IHsgc2hhcGVGbGFnLCBjaGlsZHJlbiB9ID0gdm5vZGU7XG4gIGNvbnN0IGlzU2xvdENoaWxkcmVuID0gc2hhcGVGbGFnICYgMzI7XG4gIHZub2RlLnNzQ29udGVudCA9IG5vcm1hbGl6ZVN1c3BlbnNlU2xvdChcbiAgICBpc1Nsb3RDaGlsZHJlbiA/IGNoaWxkcmVuLmRlZmF1bHQgOiBjaGlsZHJlblxuICApO1xuICB2bm9kZS5zc0ZhbGxiYWNrID0gaXNTbG90Q2hpbGRyZW4gPyBub3JtYWxpemVTdXNwZW5zZVNsb3QoY2hpbGRyZW4uZmFsbGJhY2spIDogY3JlYXRlVk5vZGUoQ29tbWVudCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVTdXNwZW5zZVNsb3Qocykge1xuICBsZXQgYmxvY2s7XG4gIGlmIChpc0Z1bmN0aW9uKHMpKSB7XG4gICAgY29uc3QgdHJhY2tCbG9jayA9IGlzQmxvY2tUcmVlRW5hYmxlZCAmJiBzLl9jO1xuICAgIGlmICh0cmFja0Jsb2NrKSB7XG4gICAgICBzLl9kID0gZmFsc2U7XG4gICAgICBvcGVuQmxvY2soKTtcbiAgICB9XG4gICAgcyA9IHMoKTtcbiAgICBpZiAodHJhY2tCbG9jaykge1xuICAgICAgcy5fZCA9IHRydWU7XG4gICAgICBibG9jayA9IGN1cnJlbnRCbG9jaztcbiAgICAgIGNsb3NlQmxvY2soKTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzQXJyYXkocykpIHtcbiAgICBjb25zdCBzaW5nbGVDaGlsZCA9IGZpbHRlclNpbmdsZVJvb3Qocyk7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIXNpbmdsZUNoaWxkICYmIHMuZmlsdGVyKChjaGlsZCkgPT4gY2hpbGQgIT09IE5VTExfRFlOQU1JQ19DT01QT05FTlQpLmxlbmd0aCA+IDApIHtcbiAgICAgIHdhcm4kMShgPFN1c3BlbnNlPiBzbG90cyBleHBlY3QgYSBzaW5nbGUgcm9vdCBub2RlLmApO1xuICAgIH1cbiAgICBzID0gc2luZ2xlQ2hpbGQ7XG4gIH1cbiAgcyA9IG5vcm1hbGl6ZVZOb2RlKHMpO1xuICBpZiAoYmxvY2sgJiYgIXMuZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgcy5keW5hbWljQ2hpbGRyZW4gPSBibG9jay5maWx0ZXIoKGMpID0+IGMgIT09IHMpO1xuICB9XG4gIHJldHVybiBzO1xufVxuZnVuY3Rpb24gcXVldWVFZmZlY3RXaXRoU3VzcGVuc2UoZm4sIHN1c3BlbnNlKSB7XG4gIGlmIChzdXNwZW5zZSAmJiBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XG4gICAgaWYgKGlzQXJyYXkoZm4pKSB7XG4gICAgICBzdXNwZW5zZS5lZmZlY3RzLnB1c2goLi4uZm4pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdXNwZW5zZS5lZmZlY3RzLnB1c2goZm4pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBxdWV1ZVBvc3RGbHVzaENiKGZuKTtcbiAgfVxufVxuZnVuY3Rpb24gc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBicmFuY2gpIHtcbiAgc3VzcGVuc2UuYWN0aXZlQnJhbmNoID0gYnJhbmNoO1xuICBjb25zdCB7IHZub2RlLCBwYXJlbnRDb21wb25lbnQgfSA9IHN1c3BlbnNlO1xuICBsZXQgZWwgPSBicmFuY2guZWw7XG4gIHdoaWxlICghZWwgJiYgYnJhbmNoLmNvbXBvbmVudCkge1xuICAgIGJyYW5jaCA9IGJyYW5jaC5jb21wb25lbnQuc3ViVHJlZTtcbiAgICBlbCA9IGJyYW5jaC5lbDtcbiAgfVxuICB2bm9kZS5lbCA9IGVsO1xuICBpZiAocGFyZW50Q29tcG9uZW50ICYmIHBhcmVudENvbXBvbmVudC5zdWJUcmVlID09PSB2bm9kZSkge1xuICAgIHBhcmVudENvbXBvbmVudC52bm9kZS5lbCA9IGVsO1xuICAgIHVwZGF0ZUhPQ0hvc3RFbChwYXJlbnRDb21wb25lbnQsIGVsKTtcbiAgfVxufVxuZnVuY3Rpb24gaXNWTm9kZVN1c3BlbnNpYmxlKHZub2RlKSB7XG4gIGNvbnN0IHN1c3BlbnNpYmxlID0gdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMuc3VzcGVuc2libGU7XG4gIHJldHVybiBzdXNwZW5zaWJsZSAhPSBudWxsICYmIHN1c3BlbnNpYmxlICE9PSBmYWxzZTtcbn1cblxuY29uc3QgRnJhZ21lbnQgPSBTeW1ib2wuZm9yKFwidi1mZ3RcIik7XG5jb25zdCBUZXh0ID0gU3ltYm9sLmZvcihcInYtdHh0XCIpO1xuY29uc3QgQ29tbWVudCA9IFN5bWJvbC5mb3IoXCJ2LWNtdFwiKTtcbmNvbnN0IFN0YXRpYyA9IFN5bWJvbC5mb3IoXCJ2LXN0Y1wiKTtcbmNvbnN0IGJsb2NrU3RhY2sgPSBbXTtcbmxldCBjdXJyZW50QmxvY2sgPSBudWxsO1xuZnVuY3Rpb24gb3BlbkJsb2NrKGRpc2FibGVUcmFja2luZyA9IGZhbHNlKSB7XG4gIGJsb2NrU3RhY2sucHVzaChjdXJyZW50QmxvY2sgPSBkaXNhYmxlVHJhY2tpbmcgPyBudWxsIDogW10pO1xufVxuZnVuY3Rpb24gY2xvc2VCbG9jaygpIHtcbiAgYmxvY2tTdGFjay5wb3AoKTtcbiAgY3VycmVudEJsb2NrID0gYmxvY2tTdGFja1tibG9ja1N0YWNrLmxlbmd0aCAtIDFdIHx8IG51bGw7XG59XG5sZXQgaXNCbG9ja1RyZWVFbmFibGVkID0gMTtcbmZ1bmN0aW9uIHNldEJsb2NrVHJhY2tpbmcodmFsdWUsIGluVk9uY2UgPSBmYWxzZSkge1xuICBpc0Jsb2NrVHJlZUVuYWJsZWQgKz0gdmFsdWU7XG4gIGlmICh2YWx1ZSA8IDAgJiYgY3VycmVudEJsb2NrICYmIGluVk9uY2UpIHtcbiAgICBjdXJyZW50QmxvY2suaGFzT25jZSA9IHRydWU7XG4gIH1cbn1cbmZ1bmN0aW9uIHNldHVwQmxvY2sodm5vZGUpIHtcbiAgdm5vZGUuZHluYW1pY0NoaWxkcmVuID0gaXNCbG9ja1RyZWVFbmFibGVkID4gMCA/IGN1cnJlbnRCbG9jayB8fCBFTVBUWV9BUlIgOiBudWxsO1xuICBjbG9zZUJsb2NrKCk7XG4gIGlmIChpc0Jsb2NrVHJlZUVuYWJsZWQgPiAwICYmIGN1cnJlbnRCbG9jaykge1xuICAgIGN1cnJlbnRCbG9jay5wdXNoKHZub2RlKTtcbiAgfVxuICByZXR1cm4gdm5vZGU7XG59XG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50QmxvY2sodHlwZSwgcHJvcHMsIGNoaWxkcmVuLCBwYXRjaEZsYWcsIGR5bmFtaWNQcm9wcywgc2hhcGVGbGFnKSB7XG4gIHJldHVybiBzZXR1cEJsb2NrKFxuICAgIGNyZWF0ZUJhc2VWTm9kZShcbiAgICAgIHR5cGUsXG4gICAgICBwcm9wcyxcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgcGF0Y2hGbGFnLFxuICAgICAgZHluYW1pY1Byb3BzLFxuICAgICAgc2hhcGVGbGFnLFxuICAgICAgdHJ1ZVxuICAgIClcbiAgKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUJsb2NrKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMpIHtcbiAgcmV0dXJuIHNldHVwQmxvY2soXG4gICAgY3JlYXRlVk5vZGUoXG4gICAgICB0eXBlLFxuICAgICAgcHJvcHMsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIHBhdGNoRmxhZyxcbiAgICAgIGR5bmFtaWNQcm9wcyxcbiAgICAgIHRydWVcbiAgICApXG4gICk7XG59XG5mdW5jdGlvbiBpc1ZOb2RlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA/IHZhbHVlLl9fdl9pc1ZOb2RlID09PSB0cnVlIDogZmFsc2U7XG59XG5mdW5jdGlvbiBpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIG4yLnNoYXBlRmxhZyAmIDYgJiYgbjEuY29tcG9uZW50KSB7XG4gICAgY29uc3QgZGlydHlJbnN0YW5jZXMgPSBobXJEaXJ0eUNvbXBvbmVudHMuZ2V0KG4yLnR5cGUpO1xuICAgIGlmIChkaXJ0eUluc3RhbmNlcyAmJiBkaXJ0eUluc3RhbmNlcy5oYXMobjEuY29tcG9uZW50KSkge1xuICAgICAgbjEuc2hhcGVGbGFnICY9IC0yNTc7XG4gICAgICBuMi5zaGFwZUZsYWcgJj0gLTUxMztcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG4xLnR5cGUgPT09IG4yLnR5cGUgJiYgbjEua2V5ID09PSBuMi5rZXk7XG59XG5sZXQgdm5vZGVBcmdzVHJhbnNmb3JtZXI7XG5mdW5jdGlvbiB0cmFuc2Zvcm1WTm9kZUFyZ3ModHJhbnNmb3JtZXIpIHtcbiAgdm5vZGVBcmdzVHJhbnNmb3JtZXIgPSB0cmFuc2Zvcm1lcjtcbn1cbmNvbnN0IGNyZWF0ZVZOb2RlV2l0aEFyZ3NUcmFuc2Zvcm0gPSAoLi4uYXJncykgPT4ge1xuICByZXR1cm4gX2NyZWF0ZVZOb2RlKFxuICAgIC4uLnZub2RlQXJnc1RyYW5zZm9ybWVyID8gdm5vZGVBcmdzVHJhbnNmb3JtZXIoYXJncywgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKSA6IGFyZ3NcbiAgKTtcbn07XG5jb25zdCBub3JtYWxpemVLZXkgPSAoeyBrZXkgfSkgPT4ga2V5ICE9IG51bGwgPyBrZXkgOiBudWxsO1xuY29uc3Qgbm9ybWFsaXplUmVmID0gKHtcbiAgcmVmLFxuICByZWZfa2V5LFxuICByZWZfZm9yXG59KSA9PiB7XG4gIGlmICh0eXBlb2YgcmVmID09PSBcIm51bWJlclwiKSB7XG4gICAgcmVmID0gXCJcIiArIHJlZjtcbiAgfVxuICByZXR1cm4gcmVmICE9IG51bGwgPyBpc1N0cmluZyhyZWYpIHx8IGlzUmVmKHJlZikgfHwgaXNGdW5jdGlvbihyZWYpID8geyBpOiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsIHI6IHJlZiwgazogcmVmX2tleSwgZjogISFyZWZfZm9yIH0gOiByZWYgOiBudWxsO1xufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VWTm9kZSh0eXBlLCBwcm9wcyA9IG51bGwsIGNoaWxkcmVuID0gbnVsbCwgcGF0Y2hGbGFnID0gMCwgZHluYW1pY1Byb3BzID0gbnVsbCwgc2hhcGVGbGFnID0gdHlwZSA9PT0gRnJhZ21lbnQgPyAwIDogMSwgaXNCbG9ja05vZGUgPSBmYWxzZSwgbmVlZEZ1bGxDaGlsZHJlbk5vcm1hbGl6YXRpb24gPSBmYWxzZSkge1xuICBjb25zdCB2bm9kZSA9IHtcbiAgICBfX3ZfaXNWTm9kZTogdHJ1ZSxcbiAgICBfX3Zfc2tpcDogdHJ1ZSxcbiAgICB0eXBlLFxuICAgIHByb3BzLFxuICAgIGtleTogcHJvcHMgJiYgbm9ybWFsaXplS2V5KHByb3BzKSxcbiAgICByZWY6IHByb3BzICYmIG5vcm1hbGl6ZVJlZihwcm9wcyksXG4gICAgc2NvcGVJZDogY3VycmVudFNjb3BlSWQsXG4gICAgc2xvdFNjb3BlSWRzOiBudWxsLFxuICAgIGNoaWxkcmVuLFxuICAgIGNvbXBvbmVudDogbnVsbCxcbiAgICBzdXNwZW5zZTogbnVsbCxcbiAgICBzc0NvbnRlbnQ6IG51bGwsXG4gICAgc3NGYWxsYmFjazogbnVsbCxcbiAgICBkaXJzOiBudWxsLFxuICAgIHRyYW5zaXRpb246IG51bGwsXG4gICAgZWw6IG51bGwsXG4gICAgYW5jaG9yOiBudWxsLFxuICAgIHRhcmdldDogbnVsbCxcbiAgICB0YXJnZXRTdGFydDogbnVsbCxcbiAgICB0YXJnZXRBbmNob3I6IG51bGwsXG4gICAgc3RhdGljQ291bnQ6IDAsXG4gICAgc2hhcGVGbGFnLFxuICAgIHBhdGNoRmxhZyxcbiAgICBkeW5hbWljUHJvcHMsXG4gICAgZHluYW1pY0NoaWxkcmVuOiBudWxsLFxuICAgIGFwcENvbnRleHQ6IG51bGwsXG4gICAgY3R4OiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2VcbiAgfTtcbiAgaWYgKG5lZWRGdWxsQ2hpbGRyZW5Ob3JtYWxpemF0aW9uKSB7XG4gICAgbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuKTtcbiAgICBpZiAoc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgICB0eXBlLm5vcm1hbGl6ZSh2bm9kZSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGNoaWxkcmVuKSB7XG4gICAgdm5vZGUuc2hhcGVGbGFnIHw9IGlzU3RyaW5nKGNoaWxkcmVuKSA/IDggOiAxNjtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB2bm9kZS5rZXkgIT09IHZub2RlLmtleSkge1xuICAgIHdhcm4kMShgVk5vZGUgY3JlYXRlZCB3aXRoIGludmFsaWQga2V5IChOYU4pLiBWTm9kZSB0eXBlOmAsIHZub2RlLnR5cGUpO1xuICB9XG4gIGlmIChpc0Jsb2NrVHJlZUVuYWJsZWQgPiAwICYmIC8vIGF2b2lkIGEgYmxvY2sgbm9kZSBmcm9tIHRyYWNraW5nIGl0c2VsZlxuICAhaXNCbG9ja05vZGUgJiYgLy8gaGFzIGN1cnJlbnQgcGFyZW50IGJsb2NrXG4gIGN1cnJlbnRCbG9jayAmJiAvLyBwcmVzZW5jZSBvZiBhIHBhdGNoIGZsYWcgaW5kaWNhdGVzIHRoaXMgbm9kZSBuZWVkcyBwYXRjaGluZyBvbiB1cGRhdGVzLlxuICAvLyBjb21wb25lbnQgbm9kZXMgYWxzbyBzaG91bGQgYWx3YXlzIGJlIHBhdGNoZWQsIGJlY2F1c2UgZXZlbiBpZiB0aGVcbiAgLy8gY29tcG9uZW50IGRvZXNuJ3QgbmVlZCB0byB1cGRhdGUsIGl0IG5lZWRzIHRvIHBlcnNpc3QgdGhlIGluc3RhbmNlIG9uIHRvXG4gIC8vIHRoZSBuZXh0IHZub2RlIHNvIHRoYXQgaXQgY2FuIGJlIHByb3Blcmx5IHVubW91bnRlZCBsYXRlci5cbiAgKHZub2RlLnBhdGNoRmxhZyA+IDAgfHwgc2hhcGVGbGFnICYgNikgJiYgLy8gdGhlIEVWRU5UUyBmbGFnIGlzIG9ubHkgZm9yIGh5ZHJhdGlvbiBhbmQgaWYgaXQgaXMgdGhlIG9ubHkgZmxhZywgdGhlXG4gIC8vIHZub2RlIHNob3VsZCBub3QgYmUgY29uc2lkZXJlZCBkeW5hbWljIGR1ZSB0byBoYW5kbGVyIGNhY2hpbmcuXG4gIHZub2RlLnBhdGNoRmxhZyAhPT0gMzIpIHtcbiAgICBjdXJyZW50QmxvY2sucHVzaCh2bm9kZSk7XG4gIH1cbiAgcmV0dXJuIHZub2RlO1xufVxuY29uc3QgY3JlYXRlVk5vZGUgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gY3JlYXRlVk5vZGVXaXRoQXJnc1RyYW5zZm9ybSA6IF9jcmVhdGVWTm9kZTtcbmZ1bmN0aW9uIF9jcmVhdGVWTm9kZSh0eXBlLCBwcm9wcyA9IG51bGwsIGNoaWxkcmVuID0gbnVsbCwgcGF0Y2hGbGFnID0gMCwgZHluYW1pY1Byb3BzID0gbnVsbCwgaXNCbG9ja05vZGUgPSBmYWxzZSkge1xuICBpZiAoIXR5cGUgfHwgdHlwZSA9PT0gTlVMTF9EWU5BTUlDX0NPTVBPTkVOVCkge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICF0eXBlKSB7XG4gICAgICB3YXJuJDEoYEludmFsaWQgdm5vZGUgdHlwZSB3aGVuIGNyZWF0aW5nIHZub2RlOiAke3R5cGV9LmApO1xuICAgIH1cbiAgICB0eXBlID0gQ29tbWVudDtcbiAgfVxuICBpZiAoaXNWTm9kZSh0eXBlKSkge1xuICAgIGNvbnN0IGNsb25lZCA9IGNsb25lVk5vZGUoXG4gICAgICB0eXBlLFxuICAgICAgcHJvcHMsXG4gICAgICB0cnVlXG4gICAgICAvKiBtZXJnZVJlZjogdHJ1ZSAqL1xuICAgICk7XG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICBub3JtYWxpemVDaGlsZHJlbihjbG9uZWQsIGNoaWxkcmVuKTtcbiAgICB9XG4gICAgaWYgKGlzQmxvY2tUcmVlRW5hYmxlZCA+IDAgJiYgIWlzQmxvY2tOb2RlICYmIGN1cnJlbnRCbG9jaykge1xuICAgICAgaWYgKGNsb25lZC5zaGFwZUZsYWcgJiA2KSB7XG4gICAgICAgIGN1cnJlbnRCbG9ja1tjdXJyZW50QmxvY2suaW5kZXhPZih0eXBlKV0gPSBjbG9uZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50QmxvY2sucHVzaChjbG9uZWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBjbG9uZWQucGF0Y2hGbGFnID0gLTI7XG4gICAgcmV0dXJuIGNsb25lZDtcbiAgfVxuICBpZiAoaXNDbGFzc0NvbXBvbmVudCh0eXBlKSkge1xuICAgIHR5cGUgPSB0eXBlLl9fdmNjT3B0cztcbiAgfVxuICBpZiAocHJvcHMpIHtcbiAgICBwcm9wcyA9IGd1YXJkUmVhY3RpdmVQcm9wcyhwcm9wcyk7XG4gICAgbGV0IHsgY2xhc3M6IGtsYXNzLCBzdHlsZSB9ID0gcHJvcHM7XG4gICAgaWYgKGtsYXNzICYmICFpc1N0cmluZyhrbGFzcykpIHtcbiAgICAgIHByb3BzLmNsYXNzID0gbm9ybWFsaXplQ2xhc3Moa2xhc3MpO1xuICAgIH1cbiAgICBpZiAoaXNPYmplY3Qoc3R5bGUpKSB7XG4gICAgICBpZiAoaXNQcm94eShzdHlsZSkgJiYgIWlzQXJyYXkoc3R5bGUpKSB7XG4gICAgICAgIHN0eWxlID0gZXh0ZW5kKHt9LCBzdHlsZSk7XG4gICAgICB9XG4gICAgICBwcm9wcy5zdHlsZSA9IG5vcm1hbGl6ZVN0eWxlKHN0eWxlKTtcbiAgICB9XG4gIH1cbiAgY29uc3Qgc2hhcGVGbGFnID0gaXNTdHJpbmcodHlwZSkgPyAxIDogaXNTdXNwZW5zZSh0eXBlKSA/IDEyOCA6IGlzVGVsZXBvcnQodHlwZSkgPyA2NCA6IGlzT2JqZWN0KHR5cGUpID8gNCA6IGlzRnVuY3Rpb24odHlwZSkgPyAyIDogMDtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgc2hhcGVGbGFnICYgNCAmJiBpc1Byb3h5KHR5cGUpKSB7XG4gICAgdHlwZSA9IHRvUmF3KHR5cGUpO1xuICAgIHdhcm4kMShcbiAgICAgIGBWdWUgcmVjZWl2ZWQgYSBDb21wb25lbnQgdGhhdCB3YXMgbWFkZSBhIHJlYWN0aXZlIG9iamVjdC4gVGhpcyBjYW4gbGVhZCB0byB1bm5lY2Vzc2FyeSBwZXJmb3JtYW5jZSBvdmVyaGVhZCBhbmQgc2hvdWxkIGJlIGF2b2lkZWQgYnkgbWFya2luZyB0aGUgY29tcG9uZW50IHdpdGggXFxgbWFya1Jhd1xcYCBvciB1c2luZyBcXGBzaGFsbG93UmVmXFxgIGluc3RlYWQgb2YgXFxgcmVmXFxgLmAsXG4gICAgICBgXG5Db21wb25lbnQgdGhhdCB3YXMgbWFkZSByZWFjdGl2ZTogYCxcbiAgICAgIHR5cGVcbiAgICApO1xuICB9XG4gIHJldHVybiBjcmVhdGVCYXNlVk5vZGUoXG4gICAgdHlwZSxcbiAgICBwcm9wcyxcbiAgICBjaGlsZHJlbixcbiAgICBwYXRjaEZsYWcsXG4gICAgZHluYW1pY1Byb3BzLFxuICAgIHNoYXBlRmxhZyxcbiAgICBpc0Jsb2NrTm9kZSxcbiAgICB0cnVlXG4gICk7XG59XG5mdW5jdGlvbiBndWFyZFJlYWN0aXZlUHJvcHMocHJvcHMpIHtcbiAgaWYgKCFwcm9wcykgcmV0dXJuIG51bGw7XG4gIHJldHVybiBpc1Byb3h5KHByb3BzKSB8fCBpc0ludGVybmFsT2JqZWN0KHByb3BzKSA/IGV4dGVuZCh7fSwgcHJvcHMpIDogcHJvcHM7XG59XG5mdW5jdGlvbiBjbG9uZVZOb2RlKHZub2RlLCBleHRyYVByb3BzLCBtZXJnZVJlZiA9IGZhbHNlLCBjbG9uZVRyYW5zaXRpb24gPSBmYWxzZSkge1xuICBjb25zdCB7IHByb3BzLCByZWYsIHBhdGNoRmxhZywgY2hpbGRyZW4sIHRyYW5zaXRpb24gfSA9IHZub2RlO1xuICBjb25zdCBtZXJnZWRQcm9wcyA9IGV4dHJhUHJvcHMgPyBtZXJnZVByb3BzKHByb3BzIHx8IHt9LCBleHRyYVByb3BzKSA6IHByb3BzO1xuICBjb25zdCBjbG9uZWQgPSB7XG4gICAgX192X2lzVk5vZGU6IHRydWUsXG4gICAgX192X3NraXA6IHRydWUsXG4gICAgdHlwZTogdm5vZGUudHlwZSxcbiAgICBwcm9wczogbWVyZ2VkUHJvcHMsXG4gICAga2V5OiBtZXJnZWRQcm9wcyAmJiBub3JtYWxpemVLZXkobWVyZ2VkUHJvcHMpLFxuICAgIHJlZjogZXh0cmFQcm9wcyAmJiBleHRyYVByb3BzLnJlZiA/IChcbiAgICAgIC8vICMyMDc4IGluIHRoZSBjYXNlIG9mIDxjb21wb25lbnQgOmlzPVwidm5vZGVcIiByZWY9XCJleHRyYVwiLz5cbiAgICAgIC8vIGlmIHRoZSB2bm9kZSBpdHNlbGYgYWxyZWFkeSBoYXMgYSByZWYsIGNsb25lVk5vZGUgd2lsbCBuZWVkIHRvIG1lcmdlXG4gICAgICAvLyB0aGUgcmVmcyBzbyB0aGUgc2luZ2xlIHZub2RlIGNhbiBiZSBzZXQgb24gbXVsdGlwbGUgcmVmc1xuICAgICAgbWVyZ2VSZWYgJiYgcmVmID8gaXNBcnJheShyZWYpID8gcmVmLmNvbmNhdChub3JtYWxpemVSZWYoZXh0cmFQcm9wcykpIDogW3JlZiwgbm9ybWFsaXplUmVmKGV4dHJhUHJvcHMpXSA6IG5vcm1hbGl6ZVJlZihleHRyYVByb3BzKVxuICAgICkgOiByZWYsXG4gICAgc2NvcGVJZDogdm5vZGUuc2NvcGVJZCxcbiAgICBzbG90U2NvcGVJZHM6IHZub2RlLnNsb3RTY29wZUlkcyxcbiAgICBjaGlsZHJlbjogISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBwYXRjaEZsYWcgPT09IC0xICYmIGlzQXJyYXkoY2hpbGRyZW4pID8gY2hpbGRyZW4ubWFwKGRlZXBDbG9uZVZOb2RlKSA6IGNoaWxkcmVuLFxuICAgIHRhcmdldDogdm5vZGUudGFyZ2V0LFxuICAgIHRhcmdldFN0YXJ0OiB2bm9kZS50YXJnZXRTdGFydCxcbiAgICB0YXJnZXRBbmNob3I6IHZub2RlLnRhcmdldEFuY2hvcixcbiAgICBzdGF0aWNDb3VudDogdm5vZGUuc3RhdGljQ291bnQsXG4gICAgc2hhcGVGbGFnOiB2bm9kZS5zaGFwZUZsYWcsXG4gICAgLy8gaWYgdGhlIHZub2RlIGlzIGNsb25lZCB3aXRoIGV4dHJhIHByb3BzLCB3ZSBjYW4gbm8gbG9uZ2VyIGFzc3VtZSBpdHNcbiAgICAvLyBleGlzdGluZyBwYXRjaCBmbGFnIHRvIGJlIHJlbGlhYmxlIGFuZCBuZWVkIHRvIGFkZCB0aGUgRlVMTF9QUk9QUyBmbGFnLlxuICAgIC8vIG5vdGU6IHByZXNlcnZlIGZsYWcgZm9yIGZyYWdtZW50cyBzaW5jZSB0aGV5IHVzZSB0aGUgZmxhZyBmb3IgY2hpbGRyZW5cbiAgICAvLyBmYXN0IHBhdGhzIG9ubHkuXG4gICAgcGF0Y2hGbGFnOiBleHRyYVByb3BzICYmIHZub2RlLnR5cGUgIT09IEZyYWdtZW50ID8gcGF0Y2hGbGFnID09PSAtMSA/IDE2IDogcGF0Y2hGbGFnIHwgMTYgOiBwYXRjaEZsYWcsXG4gICAgZHluYW1pY1Byb3BzOiB2bm9kZS5keW5hbWljUHJvcHMsXG4gICAgZHluYW1pY0NoaWxkcmVuOiB2bm9kZS5keW5hbWljQ2hpbGRyZW4sXG4gICAgYXBwQ29udGV4dDogdm5vZGUuYXBwQ29udGV4dCxcbiAgICBkaXJzOiB2bm9kZS5kaXJzLFxuICAgIHRyYW5zaXRpb24sXG4gICAgLy8gVGhlc2Ugc2hvdWxkIHRlY2huaWNhbGx5IG9ubHkgYmUgbm9uLW51bGwgb24gbW91bnRlZCBWTm9kZXMuIEhvd2V2ZXIsXG4gICAgLy8gdGhleSAqc2hvdWxkKiBiZSBjb3BpZWQgZm9yIGtlcHQtYWxpdmUgdm5vZGVzLiBTbyB3ZSBqdXN0IGFsd2F5cyBjb3B5XG4gICAgLy8gdGhlbSBzaW5jZSB0aGVtIGJlaW5nIG5vbi1udWxsIGR1cmluZyBhIG1vdW50IGRvZXNuJ3QgYWZmZWN0IHRoZSBsb2dpYyBhc1xuICAgIC8vIHRoZXkgd2lsbCBzaW1wbHkgYmUgb3ZlcndyaXR0ZW4uXG4gICAgY29tcG9uZW50OiB2bm9kZS5jb21wb25lbnQsXG4gICAgc3VzcGVuc2U6IHZub2RlLnN1c3BlbnNlLFxuICAgIHNzQ29udGVudDogdm5vZGUuc3NDb250ZW50ICYmIGNsb25lVk5vZGUodm5vZGUuc3NDb250ZW50KSxcbiAgICBzc0ZhbGxiYWNrOiB2bm9kZS5zc0ZhbGxiYWNrICYmIGNsb25lVk5vZGUodm5vZGUuc3NGYWxsYmFjayksXG4gICAgcGxhY2Vob2xkZXI6IHZub2RlLnBsYWNlaG9sZGVyLFxuICAgIGVsOiB2bm9kZS5lbCxcbiAgICBhbmNob3I6IHZub2RlLmFuY2hvcixcbiAgICBjdHg6IHZub2RlLmN0eCxcbiAgICBjZTogdm5vZGUuY2VcbiAgfTtcbiAgaWYgKHRyYW5zaXRpb24gJiYgY2xvbmVUcmFuc2l0aW9uKSB7XG4gICAgc2V0VHJhbnNpdGlvbkhvb2tzKFxuICAgICAgY2xvbmVkLFxuICAgICAgdHJhbnNpdGlvbi5jbG9uZShjbG9uZWQpXG4gICAgKTtcbiAgfVxuICByZXR1cm4gY2xvbmVkO1xufVxuZnVuY3Rpb24gZGVlcENsb25lVk5vZGUodm5vZGUpIHtcbiAgY29uc3QgY2xvbmVkID0gY2xvbmVWTm9kZSh2bm9kZSk7XG4gIGlmIChpc0FycmF5KHZub2RlLmNoaWxkcmVuKSkge1xuICAgIGNsb25lZC5jaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuLm1hcChkZWVwQ2xvbmVWTm9kZSk7XG4gIH1cbiAgcmV0dXJuIGNsb25lZDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRleHRWTm9kZSh0ZXh0ID0gXCIgXCIsIGZsYWcgPSAwKSB7XG4gIHJldHVybiBjcmVhdGVWTm9kZShUZXh0LCBudWxsLCB0ZXh0LCBmbGFnKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVN0YXRpY1ZOb2RlKGNvbnRlbnQsIG51bWJlck9mTm9kZXMpIHtcbiAgY29uc3Qgdm5vZGUgPSBjcmVhdGVWTm9kZShTdGF0aWMsIG51bGwsIGNvbnRlbnQpO1xuICB2bm9kZS5zdGF0aWNDb3VudCA9IG51bWJlck9mTm9kZXM7XG4gIHJldHVybiB2bm9kZTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUNvbW1lbnRWTm9kZSh0ZXh0ID0gXCJcIiwgYXNCbG9jayA9IGZhbHNlKSB7XG4gIHJldHVybiBhc0Jsb2NrID8gKG9wZW5CbG9jaygpLCBjcmVhdGVCbG9jayhDb21tZW50LCBudWxsLCB0ZXh0KSkgOiBjcmVhdGVWTm9kZShDb21tZW50LCBudWxsLCB0ZXh0KTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZVZOb2RlKGNoaWxkKSB7XG4gIGlmIChjaGlsZCA9PSBudWxsIHx8IHR5cGVvZiBjaGlsZCA9PT0gXCJib29sZWFuXCIpIHtcbiAgICByZXR1cm4gY3JlYXRlVk5vZGUoQ29tbWVudCk7XG4gIH0gZWxzZSBpZiAoaXNBcnJheShjaGlsZCkpIHtcbiAgICByZXR1cm4gY3JlYXRlVk5vZGUoXG4gICAgICBGcmFnbWVudCxcbiAgICAgIG51bGwsXG4gICAgICAvLyAjMzY2NiwgYXZvaWQgcmVmZXJlbmNlIHBvbGx1dGlvbiB3aGVuIHJldXNpbmcgdm5vZGVcbiAgICAgIGNoaWxkLnNsaWNlKClcbiAgICApO1xuICB9IGVsc2UgaWYgKGlzVk5vZGUoY2hpbGQpKSB7XG4gICAgcmV0dXJuIGNsb25lSWZNb3VudGVkKGNoaWxkKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY3JlYXRlVk5vZGUoVGV4dCwgbnVsbCwgU3RyaW5nKGNoaWxkKSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNsb25lSWZNb3VudGVkKGNoaWxkKSB7XG4gIHJldHVybiBjaGlsZC5lbCA9PT0gbnVsbCAmJiBjaGlsZC5wYXRjaEZsYWcgIT09IC0xIHx8IGNoaWxkLm1lbW8gPyBjaGlsZCA6IGNsb25lVk5vZGUoY2hpbGQpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuKSB7XG4gIGxldCB0eXBlID0gMDtcbiAgY29uc3QgeyBzaGFwZUZsYWcgfSA9IHZub2RlO1xuICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkge1xuICAgIGNoaWxkcmVuID0gbnVsbDtcbiAgfSBlbHNlIGlmIChpc0FycmF5KGNoaWxkcmVuKSkge1xuICAgIHR5cGUgPSAxNjtcbiAgfSBlbHNlIGlmICh0eXBlb2YgY2hpbGRyZW4gPT09IFwib2JqZWN0XCIpIHtcbiAgICBpZiAoc2hhcGVGbGFnICYgKDEgfCA2NCkpIHtcbiAgICAgIGNvbnN0IHNsb3QgPSBjaGlsZHJlbi5kZWZhdWx0O1xuICAgICAgaWYgKHNsb3QpIHtcbiAgICAgICAgc2xvdC5fYyAmJiAoc2xvdC5fZCA9IGZhbHNlKTtcbiAgICAgICAgbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIHNsb3QoKSk7XG4gICAgICAgIHNsb3QuX2MgJiYgKHNsb3QuX2QgPSB0cnVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgdHlwZSA9IDMyO1xuICAgICAgY29uc3Qgc2xvdEZsYWcgPSBjaGlsZHJlbi5fO1xuICAgICAgaWYgKCFzbG90RmxhZyAmJiAhaXNJbnRlcm5hbE9iamVjdChjaGlsZHJlbikpIHtcbiAgICAgICAgY2hpbGRyZW4uX2N0eCA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZTtcbiAgICAgIH0gZWxzZSBpZiAoc2xvdEZsYWcgPT09IDMgJiYgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKSB7XG4gICAgICAgIGlmIChjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2Uuc2xvdHMuXyA9PT0gMSkge1xuICAgICAgICAgIGNoaWxkcmVuLl8gPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoaWxkcmVuLl8gPSAyO1xuICAgICAgICAgIHZub2RlLnBhdGNoRmxhZyB8PSAxMDI0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24oY2hpbGRyZW4pKSB7XG4gICAgY2hpbGRyZW4gPSB7IGRlZmF1bHQ6IGNoaWxkcmVuLCBfY3R4OiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgfTtcbiAgICB0eXBlID0gMzI7XG4gIH0gZWxzZSB7XG4gICAgY2hpbGRyZW4gPSBTdHJpbmcoY2hpbGRyZW4pO1xuICAgIGlmIChzaGFwZUZsYWcgJiA2NCkge1xuICAgICAgdHlwZSA9IDE2O1xuICAgICAgY2hpbGRyZW4gPSBbY3JlYXRlVGV4dFZOb2RlKGNoaWxkcmVuKV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHR5cGUgPSA4O1xuICAgIH1cbiAgfVxuICB2bm9kZS5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICB2bm9kZS5zaGFwZUZsYWcgfD0gdHlwZTtcbn1cbmZ1bmN0aW9uIG1lcmdlUHJvcHMoLi4uYXJncykge1xuICBjb25zdCByZXQgPSB7fTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgdG9NZXJnZSA9IGFyZ3NbaV07XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdG9NZXJnZSkge1xuICAgICAgaWYgKGtleSA9PT0gXCJjbGFzc1wiKSB7XG4gICAgICAgIGlmIChyZXQuY2xhc3MgIT09IHRvTWVyZ2UuY2xhc3MpIHtcbiAgICAgICAgICByZXQuY2xhc3MgPSBub3JtYWxpemVDbGFzcyhbcmV0LmNsYXNzLCB0b01lcmdlLmNsYXNzXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcInN0eWxlXCIpIHtcbiAgICAgICAgcmV0LnN0eWxlID0gbm9ybWFsaXplU3R5bGUoW3JldC5zdHlsZSwgdG9NZXJnZS5zdHlsZV0pO1xuICAgICAgfSBlbHNlIGlmIChpc09uKGtleSkpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSByZXRba2V5XTtcbiAgICAgICAgY29uc3QgaW5jb21pbmcgPSB0b01lcmdlW2tleV07XG4gICAgICAgIGlmIChpbmNvbWluZyAmJiBleGlzdGluZyAhPT0gaW5jb21pbmcgJiYgIShpc0FycmF5KGV4aXN0aW5nKSAmJiBleGlzdGluZy5pbmNsdWRlcyhpbmNvbWluZykpKSB7XG4gICAgICAgICAgcmV0W2tleV0gPSBleGlzdGluZyA/IFtdLmNvbmNhdChleGlzdGluZywgaW5jb21pbmcpIDogaW5jb21pbmc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoa2V5ICE9PSBcIlwiKSB7XG4gICAgICAgIHJldFtrZXldID0gdG9NZXJnZVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gaW52b2tlVk5vZGVIb29rKGhvb2ssIGluc3RhbmNlLCB2bm9kZSwgcHJldlZOb2RlID0gbnVsbCkge1xuICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhob29rLCBpbnN0YW5jZSwgNywgW1xuICAgIHZub2RlLFxuICAgIHByZXZWTm9kZVxuICBdKTtcbn1cblxuY29uc3QgZW1wdHlBcHBDb250ZXh0ID0gY3JlYXRlQXBwQ29udGV4dCgpO1xubGV0IHVpZCA9IDA7XG5mdW5jdGlvbiBjcmVhdGVDb21wb25lbnRJbnN0YW5jZSh2bm9kZSwgcGFyZW50LCBzdXNwZW5zZSkge1xuICBjb25zdCB0eXBlID0gdm5vZGUudHlwZTtcbiAgY29uc3QgYXBwQ29udGV4dCA9IChwYXJlbnQgPyBwYXJlbnQuYXBwQ29udGV4dCA6IHZub2RlLmFwcENvbnRleHQpIHx8IGVtcHR5QXBwQ29udGV4dDtcbiAgY29uc3QgaW5zdGFuY2UgPSB7XG4gICAgdWlkOiB1aWQrKyxcbiAgICB2bm9kZSxcbiAgICB0eXBlLFxuICAgIHBhcmVudCxcbiAgICBhcHBDb250ZXh0LFxuICAgIHJvb3Q6IG51bGwsXG4gICAgLy8gdG8gYmUgaW1tZWRpYXRlbHkgc2V0XG4gICAgbmV4dDogbnVsbCxcbiAgICBzdWJUcmVlOiBudWxsLFxuICAgIC8vIHdpbGwgYmUgc2V0IHN5bmNocm9ub3VzbHkgcmlnaHQgYWZ0ZXIgY3JlYXRpb25cbiAgICBlZmZlY3Q6IG51bGwsXG4gICAgdXBkYXRlOiBudWxsLFxuICAgIC8vIHdpbGwgYmUgc2V0IHN5bmNocm9ub3VzbHkgcmlnaHQgYWZ0ZXIgY3JlYXRpb25cbiAgICBqb2I6IG51bGwsXG4gICAgc2NvcGU6IG5ldyBFZmZlY3RTY29wZShcbiAgICAgIHRydWVcbiAgICAgIC8qIGRldGFjaGVkICovXG4gICAgKSxcbiAgICByZW5kZXI6IG51bGwsXG4gICAgcHJveHk6IG51bGwsXG4gICAgZXhwb3NlZDogbnVsbCxcbiAgICBleHBvc2VQcm94eTogbnVsbCxcbiAgICB3aXRoUHJveHk6IG51bGwsXG4gICAgcHJvdmlkZXM6IHBhcmVudCA/IHBhcmVudC5wcm92aWRlcyA6IE9iamVjdC5jcmVhdGUoYXBwQ29udGV4dC5wcm92aWRlcyksXG4gICAgaWRzOiBwYXJlbnQgPyBwYXJlbnQuaWRzIDogW1wiXCIsIDAsIDBdLFxuICAgIGFjY2Vzc0NhY2hlOiBudWxsLFxuICAgIHJlbmRlckNhY2hlOiBbXSxcbiAgICAvLyBsb2NhbCByZXNvbHZlZCBhc3NldHNcbiAgICBjb21wb25lbnRzOiBudWxsLFxuICAgIGRpcmVjdGl2ZXM6IG51bGwsXG4gICAgLy8gcmVzb2x2ZWQgcHJvcHMgYW5kIGVtaXRzIG9wdGlvbnNcbiAgICBwcm9wc09wdGlvbnM6IG5vcm1hbGl6ZVByb3BzT3B0aW9ucyh0eXBlLCBhcHBDb250ZXh0KSxcbiAgICBlbWl0c09wdGlvbnM6IG5vcm1hbGl6ZUVtaXRzT3B0aW9ucyh0eXBlLCBhcHBDb250ZXh0KSxcbiAgICAvLyBlbWl0XG4gICAgZW1pdDogbnVsbCxcbiAgICAvLyB0byBiZSBzZXQgaW1tZWRpYXRlbHlcbiAgICBlbWl0dGVkOiBudWxsLFxuICAgIC8vIHByb3BzIGRlZmF1bHQgdmFsdWVcbiAgICBwcm9wc0RlZmF1bHRzOiBFTVBUWV9PQkosXG4gICAgLy8gaW5oZXJpdEF0dHJzXG4gICAgaW5oZXJpdEF0dHJzOiB0eXBlLmluaGVyaXRBdHRycyxcbiAgICAvLyBzdGF0ZVxuICAgIGN0eDogRU1QVFlfT0JKLFxuICAgIGRhdGE6IEVNUFRZX09CSixcbiAgICBwcm9wczogRU1QVFlfT0JKLFxuICAgIGF0dHJzOiBFTVBUWV9PQkosXG4gICAgc2xvdHM6IEVNUFRZX09CSixcbiAgICByZWZzOiBFTVBUWV9PQkosXG4gICAgc2V0dXBTdGF0ZTogRU1QVFlfT0JKLFxuICAgIHNldHVwQ29udGV4dDogbnVsbCxcbiAgICAvLyBzdXNwZW5zZSByZWxhdGVkXG4gICAgc3VzcGVuc2UsXG4gICAgc3VzcGVuc2VJZDogc3VzcGVuc2UgPyBzdXNwZW5zZS5wZW5kaW5nSWQgOiAwLFxuICAgIGFzeW5jRGVwOiBudWxsLFxuICAgIGFzeW5jUmVzb2x2ZWQ6IGZhbHNlLFxuICAgIC8vIGxpZmVjeWNsZSBob29rc1xuICAgIC8vIG5vdCB1c2luZyBlbnVtcyBoZXJlIGJlY2F1c2UgaXQgcmVzdWx0cyBpbiBjb21wdXRlZCBwcm9wZXJ0aWVzXG4gICAgaXNNb3VudGVkOiBmYWxzZSxcbiAgICBpc1VubW91bnRlZDogZmFsc2UsXG4gICAgaXNEZWFjdGl2YXRlZDogZmFsc2UsXG4gICAgYmM6IG51bGwsXG4gICAgYzogbnVsbCxcbiAgICBibTogbnVsbCxcbiAgICBtOiBudWxsLFxuICAgIGJ1OiBudWxsLFxuICAgIHU6IG51bGwsXG4gICAgdW06IG51bGwsXG4gICAgYnVtOiBudWxsLFxuICAgIGRhOiBudWxsLFxuICAgIGE6IG51bGwsXG4gICAgcnRnOiBudWxsLFxuICAgIHJ0YzogbnVsbCxcbiAgICBlYzogbnVsbCxcbiAgICBzcDogbnVsbFxuICB9O1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGluc3RhbmNlLmN0eCA9IGNyZWF0ZURldlJlbmRlckNvbnRleHQoaW5zdGFuY2UpO1xuICB9IGVsc2Uge1xuICAgIGluc3RhbmNlLmN0eCA9IHsgXzogaW5zdGFuY2UgfTtcbiAgfVxuICBpbnN0YW5jZS5yb290ID0gcGFyZW50ID8gcGFyZW50LnJvb3QgOiBpbnN0YW5jZTtcbiAgaW5zdGFuY2UuZW1pdCA9IGVtaXQuYmluZChudWxsLCBpbnN0YW5jZSk7XG4gIGlmICh2bm9kZS5jZSkge1xuICAgIHZub2RlLmNlKGluc3RhbmNlKTtcbiAgfVxuICByZXR1cm4gaW5zdGFuY2U7XG59XG5sZXQgY3VycmVudEluc3RhbmNlID0gbnVsbDtcbmNvbnN0IGdldEN1cnJlbnRJbnN0YW5jZSA9ICgpID0+IGN1cnJlbnRJbnN0YW5jZSB8fCBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG5sZXQgaW50ZXJuYWxTZXRDdXJyZW50SW5zdGFuY2U7XG5sZXQgc2V0SW5TU1JTZXR1cFN0YXRlO1xue1xuICBjb25zdCBnID0gZ2V0R2xvYmFsVGhpcygpO1xuICBjb25zdCByZWdpc3Rlckdsb2JhbFNldHRlciA9IChrZXksIHNldHRlcikgPT4ge1xuICAgIGxldCBzZXR0ZXJzO1xuICAgIGlmICghKHNldHRlcnMgPSBnW2tleV0pKSBzZXR0ZXJzID0gZ1trZXldID0gW107XG4gICAgc2V0dGVycy5wdXNoKHNldHRlcik7XG4gICAgcmV0dXJuICh2KSA9PiB7XG4gICAgICBpZiAoc2V0dGVycy5sZW5ndGggPiAxKSBzZXR0ZXJzLmZvckVhY2goKHNldCkgPT4gc2V0KHYpKTtcbiAgICAgIGVsc2Ugc2V0dGVyc1swXSh2KTtcbiAgICB9O1xuICB9O1xuICBpbnRlcm5hbFNldEN1cnJlbnRJbnN0YW5jZSA9IHJlZ2lzdGVyR2xvYmFsU2V0dGVyKFxuICAgIGBfX1ZVRV9JTlNUQU5DRV9TRVRURVJTX19gLFxuICAgICh2KSA9PiBjdXJyZW50SW5zdGFuY2UgPSB2XG4gICk7XG4gIHNldEluU1NSU2V0dXBTdGF0ZSA9IHJlZ2lzdGVyR2xvYmFsU2V0dGVyKFxuICAgIGBfX1ZVRV9TU1JfU0VUVEVSU19fYCxcbiAgICAodikgPT4gaXNJblNTUkNvbXBvbmVudFNldHVwID0gdlxuICApO1xufVxuY29uc3Qgc2V0Q3VycmVudEluc3RhbmNlID0gKGluc3RhbmNlKSA9PiB7XG4gIGNvbnN0IHByZXYgPSBjdXJyZW50SW5zdGFuY2U7XG4gIGludGVybmFsU2V0Q3VycmVudEluc3RhbmNlKGluc3RhbmNlKTtcbiAgaW5zdGFuY2Uuc2NvcGUub24oKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBpbnN0YW5jZS5zY29wZS5vZmYoKTtcbiAgICBpbnRlcm5hbFNldEN1cnJlbnRJbnN0YW5jZShwcmV2KTtcbiAgfTtcbn07XG5jb25zdCB1bnNldEN1cnJlbnRJbnN0YW5jZSA9ICgpID0+IHtcbiAgY3VycmVudEluc3RhbmNlICYmIGN1cnJlbnRJbnN0YW5jZS5zY29wZS5vZmYoKTtcbiAgaW50ZXJuYWxTZXRDdXJyZW50SW5zdGFuY2UobnVsbCk7XG59O1xuY29uc3QgaXNCdWlsdEluVGFnID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoXCJzbG90LGNvbXBvbmVudFwiKTtcbmZ1bmN0aW9uIHZhbGlkYXRlQ29tcG9uZW50TmFtZShuYW1lLCB7IGlzTmF0aXZlVGFnIH0pIHtcbiAgaWYgKGlzQnVpbHRJblRhZyhuYW1lKSB8fCBpc05hdGl2ZVRhZyhuYW1lKSkge1xuICAgIHdhcm4kMShcbiAgICAgIFwiRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCBpZDogXCIgKyBuYW1lXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gaXNTdGF0ZWZ1bENvbXBvbmVudChpbnN0YW5jZSkge1xuICByZXR1cm4gaW5zdGFuY2Uudm5vZGUuc2hhcGVGbGFnICYgNDtcbn1cbmxldCBpc0luU1NSQ29tcG9uZW50U2V0dXAgPSBmYWxzZTtcbmZ1bmN0aW9uIHNldHVwQ29tcG9uZW50KGluc3RhbmNlLCBpc1NTUiA9IGZhbHNlLCBvcHRpbWl6ZWQgPSBmYWxzZSkge1xuICBpc1NTUiAmJiBzZXRJblNTUlNldHVwU3RhdGUoaXNTU1IpO1xuICBjb25zdCB7IHByb3BzLCBjaGlsZHJlbiB9ID0gaW5zdGFuY2Uudm5vZGU7XG4gIGNvbnN0IGlzU3RhdGVmdWwgPSBpc1N0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlKTtcbiAgaW5pdFByb3BzKGluc3RhbmNlLCBwcm9wcywgaXNTdGF0ZWZ1bCwgaXNTU1IpO1xuICBpbml0U2xvdHMoaW5zdGFuY2UsIGNoaWxkcmVuLCBvcHRpbWl6ZWQgfHwgaXNTU1IpO1xuICBjb25zdCBzZXR1cFJlc3VsdCA9IGlzU3RhdGVmdWwgPyBzZXR1cFN0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlLCBpc1NTUikgOiB2b2lkIDA7XG4gIGlzU1NSICYmIHNldEluU1NSU2V0dXBTdGF0ZShmYWxzZSk7XG4gIHJldHVybiBzZXR1cFJlc3VsdDtcbn1cbmZ1bmN0aW9uIHNldHVwU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UsIGlzU1NSKSB7XG4gIGNvbnN0IENvbXBvbmVudCA9IGluc3RhbmNlLnR5cGU7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgaWYgKENvbXBvbmVudC5uYW1lKSB7XG4gICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUoQ29tcG9uZW50Lm5hbWUsIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnKTtcbiAgICB9XG4gICAgaWYgKENvbXBvbmVudC5jb21wb25lbnRzKSB7XG4gICAgICBjb25zdCBuYW1lcyA9IE9iamVjdC5rZXlzKENvbXBvbmVudC5jb21wb25lbnRzKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWVzW2ldLCBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDb21wb25lbnQuZGlyZWN0aXZlcykge1xuICAgICAgY29uc3QgbmFtZXMgPSBPYmplY3Qua2V5cyhDb21wb25lbnQuZGlyZWN0aXZlcyk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbGlkYXRlRGlyZWN0aXZlTmFtZShuYW1lc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDb21wb25lbnQuY29tcGlsZXJPcHRpb25zICYmIGlzUnVudGltZU9ubHkoKSkge1xuICAgICAgd2FybiQxKFxuICAgICAgICBgXCJjb21waWxlck9wdGlvbnNcIiBpcyBvbmx5IHN1cHBvcnRlZCB3aGVuIHVzaW5nIGEgYnVpbGQgb2YgVnVlIHRoYXQgaW5jbHVkZXMgdGhlIHJ1bnRpbWUgY29tcGlsZXIuIFNpbmNlIHlvdSBhcmUgdXNpbmcgYSBydW50aW1lLW9ubHkgYnVpbGQsIHRoZSBvcHRpb25zIHNob3VsZCBiZSBwYXNzZWQgdmlhIHlvdXIgYnVpbGQgdG9vbCBjb25maWcgaW5zdGVhZC5gXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBpbnN0YW5jZS5hY2Nlc3NDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBpbnN0YW5jZS5wcm94eSA9IG5ldyBQcm94eShpbnN0YW5jZS5jdHgsIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycyk7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgZXhwb3NlUHJvcHNPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpO1xuICB9XG4gIGNvbnN0IHsgc2V0dXAgfSA9IENvbXBvbmVudDtcbiAgaWYgKHNldHVwKSB7XG4gICAgcGF1c2VUcmFja2luZygpO1xuICAgIGNvbnN0IHNldHVwQ29udGV4dCA9IGluc3RhbmNlLnNldHVwQ29udGV4dCA9IHNldHVwLmxlbmd0aCA+IDEgPyBjcmVhdGVTZXR1cENvbnRleHQoaW5zdGFuY2UpIDogbnVsbDtcbiAgICBjb25zdCByZXNldCA9IHNldEN1cnJlbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgY29uc3Qgc2V0dXBSZXN1bHQgPSBjYWxsV2l0aEVycm9ySGFuZGxpbmcoXG4gICAgICBzZXR1cCxcbiAgICAgIGluc3RhbmNlLFxuICAgICAgMCxcbiAgICAgIFtcbiAgICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHNoYWxsb3dSZWFkb25seShpbnN0YW5jZS5wcm9wcykgOiBpbnN0YW5jZS5wcm9wcyxcbiAgICAgICAgc2V0dXBDb250ZXh0XG4gICAgICBdXG4gICAgKTtcbiAgICBjb25zdCBpc0FzeW5jU2V0dXAgPSBpc1Byb21pc2Uoc2V0dXBSZXN1bHQpO1xuICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICByZXNldCgpO1xuICAgIGlmICgoaXNBc3luY1NldHVwIHx8IGluc3RhbmNlLnNwKSAmJiAhaXNBc3luY1dyYXBwZXIoaW5zdGFuY2UpKSB7XG4gICAgICBtYXJrQXN5bmNCb3VuZGFyeShpbnN0YW5jZSk7XG4gICAgfVxuICAgIGlmIChpc0FzeW5jU2V0dXApIHtcbiAgICAgIHNldHVwUmVzdWx0LnRoZW4odW5zZXRDdXJyZW50SW5zdGFuY2UsIHVuc2V0Q3VycmVudEluc3RhbmNlKTtcbiAgICAgIGlmIChpc1NTUikge1xuICAgICAgICByZXR1cm4gc2V0dXBSZXN1bHQudGhlbigocmVzb2x2ZWRSZXN1bHQpID0+IHtcbiAgICAgICAgICBoYW5kbGVTZXR1cFJlc3VsdChpbnN0YW5jZSwgcmVzb2x2ZWRSZXN1bHQsIGlzU1NSKTtcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICBoYW5kbGVFcnJvcihlLCBpbnN0YW5jZSwgMCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5zdGFuY2UuYXN5bmNEZXAgPSBzZXR1cFJlc3VsdDtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWluc3RhbmNlLnN1c3BlbnNlKSB7XG4gICAgICAgICAgY29uc3QgbmFtZSA9IGZvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIENvbXBvbmVudCk7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYENvbXBvbmVudCA8JHtuYW1lfT46IHNldHVwIGZ1bmN0aW9uIHJldHVybmVkIGEgcHJvbWlzZSwgYnV0IG5vIDxTdXNwZW5zZT4gYm91bmRhcnkgd2FzIGZvdW5kIGluIHRoZSBwYXJlbnQgY29tcG9uZW50IHRyZWUuIEEgY29tcG9uZW50IHdpdGggYXN5bmMgc2V0dXAoKSBtdXN0IGJlIG5lc3RlZCBpbiBhIDxTdXNwZW5zZT4gaW4gb3JkZXIgdG8gYmUgcmVuZGVyZWQuYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIHNldHVwUmVzdWx0LCBpc1NTUik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZpbmlzaENvbXBvbmVudFNldHVwKGluc3RhbmNlLCBpc1NTUik7XG4gIH1cbn1cbmZ1bmN0aW9uIGhhbmRsZVNldHVwUmVzdWx0KGluc3RhbmNlLCBzZXR1cFJlc3VsdCwgaXNTU1IpIHtcbiAgaWYgKGlzRnVuY3Rpb24oc2V0dXBSZXN1bHQpKSB7XG4gICAgaWYgKGluc3RhbmNlLnR5cGUuX19zc3JJbmxpbmVSZW5kZXIpIHtcbiAgICAgIGluc3RhbmNlLnNzclJlbmRlciA9IHNldHVwUmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnN0YW5jZS5yZW5kZXIgPSBzZXR1cFJlc3VsdDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qoc2V0dXBSZXN1bHQpKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaXNWTm9kZShzZXR1cFJlc3VsdCkpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYHNldHVwKCkgc2hvdWxkIG5vdCByZXR1cm4gVk5vZGVzIGRpcmVjdGx5IC0gcmV0dXJuIGEgcmVuZGVyIGZ1bmN0aW9uIGluc3RlYWQuYFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICBpbnN0YW5jZS5kZXZ0b29sc1Jhd1NldHVwU3RhdGUgPSBzZXR1cFJlc3VsdDtcbiAgICB9XG4gICAgaW5zdGFuY2Uuc2V0dXBTdGF0ZSA9IHByb3h5UmVmcyhzZXR1cFJlc3VsdCk7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIGV4cG9zZVNldHVwU3RhdGVPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpO1xuICAgIH1cbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHNldHVwUmVzdWx0ICE9PSB2b2lkIDApIHtcbiAgICB3YXJuJDEoXG4gICAgICBgc2V0dXAoKSBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC4gUmVjZWl2ZWQ6ICR7c2V0dXBSZXN1bHQgPT09IG51bGwgPyBcIm51bGxcIiA6IHR5cGVvZiBzZXR1cFJlc3VsdH1gXG4gICAgKTtcbiAgfVxuICBmaW5pc2hDb21wb25lbnRTZXR1cChpbnN0YW5jZSwgaXNTU1IpO1xufVxubGV0IGNvbXBpbGU7XG5sZXQgaW5zdGFsbFdpdGhQcm94eTtcbmZ1bmN0aW9uIHJlZ2lzdGVyUnVudGltZUNvbXBpbGVyKF9jb21waWxlKSB7XG4gIGNvbXBpbGUgPSBfY29tcGlsZTtcbiAgaW5zdGFsbFdpdGhQcm94eSA9IChpKSA9PiB7XG4gICAgaWYgKGkucmVuZGVyLl9yYykge1xuICAgICAgaS53aXRoUHJveHkgPSBuZXcgUHJveHkoaS5jdHgsIFJ1bnRpbWVDb21waWxlZFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycyk7XG4gICAgfVxuICB9O1xufVxuY29uc3QgaXNSdW50aW1lT25seSA9ICgpID0+ICFjb21waWxlO1xuZnVuY3Rpb24gZmluaXNoQ29tcG9uZW50U2V0dXAoaW5zdGFuY2UsIGlzU1NSLCBza2lwT3B0aW9ucykge1xuICBjb25zdCBDb21wb25lbnQgPSBpbnN0YW5jZS50eXBlO1xuICBpZiAoIWluc3RhbmNlLnJlbmRlcikge1xuICAgIGlmICghaXNTU1IgJiYgY29tcGlsZSAmJiAhQ29tcG9uZW50LnJlbmRlcikge1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSBDb21wb25lbnQudGVtcGxhdGUgfHwgX19WVUVfT1BUSU9OU19BUElfXyAmJiByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpbnN0YW5jZSkudGVtcGxhdGU7XG4gICAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBjb21waWxlYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBpc0N1c3RvbUVsZW1lbnQsIGNvbXBpbGVyT3B0aW9ucyB9ID0gaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWc7XG4gICAgICAgIGNvbnN0IHsgZGVsaW1pdGVycywgY29tcGlsZXJPcHRpb25zOiBjb21wb25lbnRDb21waWxlck9wdGlvbnMgfSA9IENvbXBvbmVudDtcbiAgICAgICAgY29uc3QgZmluYWxDb21waWxlck9wdGlvbnMgPSBleHRlbmQoXG4gICAgICAgICAgZXh0ZW5kKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpc0N1c3RvbUVsZW1lbnQsXG4gICAgICAgICAgICAgIGRlbGltaXRlcnNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb21waWxlck9wdGlvbnNcbiAgICAgICAgICApLFxuICAgICAgICAgIGNvbXBvbmVudENvbXBpbGVyT3B0aW9uc1xuICAgICAgICApO1xuICAgICAgICBDb21wb25lbnQucmVuZGVyID0gY29tcGlsZSh0ZW1wbGF0ZSwgZmluYWxDb21waWxlck9wdGlvbnMpO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBjb21waWxlYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaW5zdGFuY2UucmVuZGVyID0gQ29tcG9uZW50LnJlbmRlciB8fCBOT09QO1xuICAgIGlmIChpbnN0YWxsV2l0aFByb3h5KSB7XG4gICAgICBpbnN0YWxsV2l0aFByb3h5KGluc3RhbmNlKTtcbiAgICB9XG4gIH1cbiAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18gJiYgdHJ1ZSkge1xuICAgIGNvbnN0IHJlc2V0ID0gc2V0Q3VycmVudEluc3RhbmNlKGluc3RhbmNlKTtcbiAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgdHJ5IHtcbiAgICAgIGFwcGx5T3B0aW9ucyhpbnN0YW5jZSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgIHJlc2V0KCk7XG4gICAgfVxuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFDb21wb25lbnQucmVuZGVyICYmIGluc3RhbmNlLnJlbmRlciA9PT0gTk9PUCAmJiAhaXNTU1IpIHtcbiAgICBpZiAoIWNvbXBpbGUgJiYgQ29tcG9uZW50LnRlbXBsYXRlKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGBDb21wb25lbnQgcHJvdmlkZWQgdGVtcGxhdGUgb3B0aW9uIGJ1dCBydW50aW1lIGNvbXBpbGF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBidWlsZCBvZiBWdWUuYCArIChgIENvbmZpZ3VyZSB5b3VyIGJ1bmRsZXIgdG8gYWxpYXMgXCJ2dWVcIiB0byBcInZ1ZS9kaXN0L3Z1ZS5lc20tYnVuZGxlci5qc1wiLmAgKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2FybiQxKGBDb21wb25lbnQgaXMgbWlzc2luZyB0ZW1wbGF0ZSBvciByZW5kZXIgZnVuY3Rpb246IGAsIENvbXBvbmVudCk7XG4gICAgfVxuICB9XG59XG5jb25zdCBhdHRyc1Byb3h5SGFuZGxlcnMgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8ge1xuICBnZXQodGFyZ2V0LCBrZXkpIHtcbiAgICBtYXJrQXR0cnNBY2Nlc3NlZCgpO1xuICAgIHRyYWNrKHRhcmdldCwgXCJnZXRcIiwgXCJcIik7XG4gICAgcmV0dXJuIHRhcmdldFtrZXldO1xuICB9LFxuICBzZXQoKSB7XG4gICAgd2FybiQxKGBzZXR1cENvbnRleHQuYXR0cnMgaXMgcmVhZG9ubHkuYCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuICBkZWxldGVQcm9wZXJ0eSgpIHtcbiAgICB3YXJuJDEoYHNldHVwQ29udGV4dC5hdHRycyBpcyByZWFkb25seS5gKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0gOiB7XG4gIGdldCh0YXJnZXQsIGtleSkge1xuICAgIHRyYWNrKHRhcmdldCwgXCJnZXRcIiwgXCJcIik7XG4gICAgcmV0dXJuIHRhcmdldFtrZXldO1xuICB9XG59O1xuZnVuY3Rpb24gZ2V0U2xvdHNQcm94eShpbnN0YW5jZSkge1xuICByZXR1cm4gbmV3IFByb3h5KGluc3RhbmNlLnNsb3RzLCB7XG4gICAgZ2V0KHRhcmdldCwga2V5KSB7XG4gICAgICB0cmFjayhpbnN0YW5jZSwgXCJnZXRcIiwgXCIkc2xvdHNcIik7XG4gICAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVNldHVwQ29udGV4dChpbnN0YW5jZSkge1xuICBjb25zdCBleHBvc2UgPSAoZXhwb3NlZCkgPT4ge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICBpZiAoaW5zdGFuY2UuZXhwb3NlZCkge1xuICAgICAgICB3YXJuJDEoYGV4cG9zZSgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlIHBlciBzZXR1cCgpLmApO1xuICAgICAgfVxuICAgICAgaWYgKGV4cG9zZWQgIT0gbnVsbCkge1xuICAgICAgICBsZXQgZXhwb3NlZFR5cGUgPSB0eXBlb2YgZXhwb3NlZDtcbiAgICAgICAgaWYgKGV4cG9zZWRUeXBlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgaWYgKGlzQXJyYXkoZXhwb3NlZCkpIHtcbiAgICAgICAgICAgIGV4cG9zZWRUeXBlID0gXCJhcnJheVwiO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZWYoZXhwb3NlZCkpIHtcbiAgICAgICAgICAgIGV4cG9zZWRUeXBlID0gXCJyZWZcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cG9zZWRUeXBlICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYGV4cG9zZSgpIHNob3VsZCBiZSBwYXNzZWQgYSBwbGFpbiBvYmplY3QsIHJlY2VpdmVkICR7ZXhwb3NlZFR5cGV9LmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGluc3RhbmNlLmV4cG9zZWQgPSBleHBvc2VkIHx8IHt9O1xuICB9O1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGxldCBhdHRyc1Byb3h5O1xuICAgIGxldCBzbG90c1Byb3h5O1xuICAgIHJldHVybiBPYmplY3QuZnJlZXplKHtcbiAgICAgIGdldCBhdHRycygpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJzUHJveHkgfHwgKGF0dHJzUHJveHkgPSBuZXcgUHJveHkoaW5zdGFuY2UuYXR0cnMsIGF0dHJzUHJveHlIYW5kbGVycykpO1xuICAgICAgfSxcbiAgICAgIGdldCBzbG90cygpIHtcbiAgICAgICAgcmV0dXJuIHNsb3RzUHJveHkgfHwgKHNsb3RzUHJveHkgPSBnZXRTbG90c1Byb3h5KGluc3RhbmNlKSk7XG4gICAgICB9LFxuICAgICAgZ2V0IGVtaXQoKSB7XG4gICAgICAgIHJldHVybiAoZXZlbnQsIC4uLmFyZ3MpID0+IGluc3RhbmNlLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgICAgfSxcbiAgICAgIGV4cG9zZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7XG4gICAgICBhdHRyczogbmV3IFByb3h5KGluc3RhbmNlLmF0dHJzLCBhdHRyc1Byb3h5SGFuZGxlcnMpLFxuICAgICAgc2xvdHM6IGluc3RhbmNlLnNsb3RzLFxuICAgICAgZW1pdDogaW5zdGFuY2UuZW1pdCxcbiAgICAgIGV4cG9zZVxuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIGdldENvbXBvbmVudFB1YmxpY0luc3RhbmNlKGluc3RhbmNlKSB7XG4gIGlmIChpbnN0YW5jZS5leHBvc2VkKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlLmV4cG9zZVByb3h5IHx8IChpbnN0YW5jZS5leHBvc2VQcm94eSA9IG5ldyBQcm94eShwcm94eVJlZnMobWFya1JhdyhpbnN0YW5jZS5leHBvc2VkKSksIHtcbiAgICAgIGdldCh0YXJnZXQsIGtleSkge1xuICAgICAgICBpZiAoa2V5IGluIHRhcmdldCkge1xuICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgaW4gcHVibGljUHJvcGVydGllc01hcCkge1xuICAgICAgICAgIHJldHVybiBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV0oaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaGFzKHRhcmdldCwga2V5KSB7XG4gICAgICAgIHJldHVybiBrZXkgaW4gdGFyZ2V0IHx8IGtleSBpbiBwdWJsaWNQcm9wZXJ0aWVzTWFwO1xuICAgICAgfVxuICAgIH0pKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaW5zdGFuY2UucHJveHk7XG4gIH1cbn1cbmNvbnN0IGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9dKVxcdy9nO1xuY29uc3QgY2xhc3NpZnkgPSAoc3RyKSA9PiBzdHIucmVwbGFjZShjbGFzc2lmeVJFLCAoYykgPT4gYy50b1VwcGVyQ2FzZSgpKS5yZXBsYWNlKC9bLV9dL2csIFwiXCIpO1xuZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZShDb21wb25lbnQsIGluY2x1ZGVJbmZlcnJlZCA9IHRydWUpIHtcbiAgcmV0dXJuIGlzRnVuY3Rpb24oQ29tcG9uZW50KSA/IENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZSA6IENvbXBvbmVudC5uYW1lIHx8IGluY2x1ZGVJbmZlcnJlZCAmJiBDb21wb25lbnQuX19uYW1lO1xufVxuZnVuY3Rpb24gZm9ybWF0Q29tcG9uZW50TmFtZShpbnN0YW5jZSwgQ29tcG9uZW50LCBpc1Jvb3QgPSBmYWxzZSkge1xuICBsZXQgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoQ29tcG9uZW50KTtcbiAgaWYgKCFuYW1lICYmIENvbXBvbmVudC5fX2ZpbGUpIHtcbiAgICBjb25zdCBtYXRjaCA9IENvbXBvbmVudC5fX2ZpbGUubWF0Y2goLyhbXi9cXFxcXSspXFwuXFx3KyQvKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIG5hbWUgPSBtYXRjaFsxXTtcbiAgICB9XG4gIH1cbiAgaWYgKCFuYW1lICYmIGluc3RhbmNlKSB7XG4gICAgY29uc3QgaW5mZXJGcm9tUmVnaXN0cnkgPSAocmVnaXN0cnkpID0+IHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHJlZ2lzdHJ5KSB7XG4gICAgICAgIGlmIChyZWdpc3RyeVtrZXldID09PSBDb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBuYW1lID0gaW5mZXJGcm9tUmVnaXN0cnkoaW5zdGFuY2UuY29tcG9uZW50cykgfHwgaW5zdGFuY2UucGFyZW50ICYmIGluZmVyRnJvbVJlZ2lzdHJ5KFxuICAgICAgaW5zdGFuY2UucGFyZW50LnR5cGUuY29tcG9uZW50c1xuICAgICkgfHwgaW5mZXJGcm9tUmVnaXN0cnkoaW5zdGFuY2UuYXBwQ29udGV4dC5jb21wb25lbnRzKTtcbiAgfVxuICByZXR1cm4gbmFtZSA/IGNsYXNzaWZ5KG5hbWUpIDogaXNSb290ID8gYEFwcGAgOiBgQW5vbnltb3VzYDtcbn1cbmZ1bmN0aW9uIGlzQ2xhc3NDb21wb25lbnQodmFsdWUpIHtcbiAgcmV0dXJuIGlzRnVuY3Rpb24odmFsdWUpICYmIFwiX192Y2NPcHRzXCIgaW4gdmFsdWU7XG59XG5cbmNvbnN0IGNvbXB1dGVkID0gKGdldHRlck9yT3B0aW9ucywgZGVidWdPcHRpb25zKSA9PiB7XG4gIGNvbnN0IGMgPSBjb21wdXRlZCQxKGdldHRlck9yT3B0aW9ucywgZGVidWdPcHRpb25zLCBpc0luU1NSQ29tcG9uZW50U2V0dXApO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGNvbnN0IGkgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICBpZiAoaSAmJiBpLmFwcENvbnRleHQuY29uZmlnLndhcm5SZWN1cnNpdmVDb21wdXRlZCkge1xuICAgICAgYy5fd2FyblJlY3Vyc2l2ZSA9IHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBjO1xufTtcblxuZnVuY3Rpb24gaCh0eXBlLCBwcm9wc09yQ2hpbGRyZW4sIGNoaWxkcmVuKSB7XG4gIHRyeSB7XG4gICAgc2V0QmxvY2tUcmFja2luZygtMSk7XG4gICAgY29uc3QgbCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgaWYgKGwgPT09IDIpIHtcbiAgICAgIGlmIChpc09iamVjdChwcm9wc09yQ2hpbGRyZW4pICYmICFpc0FycmF5KHByb3BzT3JDaGlsZHJlbikpIHtcbiAgICAgICAgaWYgKGlzVk5vZGUocHJvcHNPckNoaWxkcmVuKSkge1xuICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0eXBlLCBudWxsLCBbcHJvcHNPckNoaWxkcmVuXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHR5cGUsIHByb3BzT3JDaGlsZHJlbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgbnVsbCwgcHJvcHNPckNoaWxkcmVuKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGwgPiAzKSB7XG4gICAgICAgIGNoaWxkcmVuID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICAgIH0gZWxzZSBpZiAobCA9PT0gMyAmJiBpc1ZOb2RlKGNoaWxkcmVuKSkge1xuICAgICAgICBjaGlsZHJlbiA9IFtjaGlsZHJlbl07XG4gICAgICB9XG4gICAgICByZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgcHJvcHNPckNoaWxkcmVuLCBjaGlsZHJlbik7XG4gICAgfVxuICB9IGZpbmFsbHkge1xuICAgIHNldEJsb2NrVHJhY2tpbmcoMSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdEN1c3RvbUZvcm1hdHRlcigpIHtcbiAgaWYgKCEhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdnVlU3R5bGUgPSB7IHN0eWxlOiBcImNvbG9yOiMzYmE3NzZcIiB9O1xuICBjb25zdCBudW1iZXJTdHlsZSA9IHsgc3R5bGU6IFwiY29sb3I6IzE2NzdmZlwiIH07XG4gIGNvbnN0IHN0cmluZ1N0eWxlID0geyBzdHlsZTogXCJjb2xvcjojZjUyMjJkXCIgfTtcbiAgY29uc3Qga2V5d29yZFN0eWxlID0geyBzdHlsZTogXCJjb2xvcjojZWIyZjk2XCIgfTtcbiAgY29uc3QgZm9ybWF0dGVyID0ge1xuICAgIF9fdnVlX2N1c3RvbV9mb3JtYXR0ZXI6IHRydWUsXG4gICAgaGVhZGVyKG9iaikge1xuICAgICAgaWYgKCFpc09iamVjdChvYmopKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKG9iai5fX2lzVnVlKSB7XG4gICAgICAgIHJldHVybiBbXCJkaXZcIiwgdnVlU3R5bGUsIGBWdWVJbnN0YW5jZWBdO1xuICAgICAgfSBlbHNlIGlmIChpc1JlZihvYmopKSB7XG4gICAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBvYmoudmFsdWU7XG4gICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgIHt9LFxuICAgICAgICAgIFtcInNwYW5cIiwgdnVlU3R5bGUsIGdlblJlZkZsYWcob2JqKV0sXG4gICAgICAgICAgXCI8XCIsXG4gICAgICAgICAgZm9ybWF0VmFsdWUodmFsdWUpLFxuICAgICAgICAgIGA+YFxuICAgICAgICBdO1xuICAgICAgfSBlbHNlIGlmIChpc1JlYWN0aXZlKG9iaikpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgIHt9LFxuICAgICAgICAgIFtcInNwYW5cIiwgdnVlU3R5bGUsIGlzU2hhbGxvdyhvYmopID8gXCJTaGFsbG93UmVhY3RpdmVcIiA6IFwiUmVhY3RpdmVcIl0sXG4gICAgICAgICAgXCI8XCIsXG4gICAgICAgICAgZm9ybWF0VmFsdWUob2JqKSxcbiAgICAgICAgICBgPiR7aXNSZWFkb25seShvYmopID8gYCAocmVhZG9ubHkpYCA6IGBgfWBcbiAgICAgICAgXTtcbiAgICAgIH0gZWxzZSBpZiAoaXNSZWFkb25seShvYmopKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICB7fSxcbiAgICAgICAgICBbXCJzcGFuXCIsIHZ1ZVN0eWxlLCBpc1NoYWxsb3cob2JqKSA/IFwiU2hhbGxvd1JlYWRvbmx5XCIgOiBcIlJlYWRvbmx5XCJdLFxuICAgICAgICAgIFwiPFwiLFxuICAgICAgICAgIGZvcm1hdFZhbHVlKG9iaiksXG4gICAgICAgICAgXCI+XCJcbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgaGFzQm9keShvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9faXNWdWU7XG4gICAgfSxcbiAgICBib2R5KG9iaikge1xuICAgICAgaWYgKG9iaiAmJiBvYmouX19pc1Z1ZSkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAge30sXG4gICAgICAgICAgLi4uZm9ybWF0SW5zdGFuY2Uob2JqLiQpXG4gICAgICAgIF07XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBmb3JtYXRJbnN0YW5jZShpbnN0YW5jZSkge1xuICAgIGNvbnN0IGJsb2NrcyA9IFtdO1xuICAgIGlmIChpbnN0YW5jZS50eXBlLnByb3BzICYmIGluc3RhbmNlLnByb3BzKSB7XG4gICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKFwicHJvcHNcIiwgdG9SYXcoaW5zdGFuY2UucHJvcHMpKSk7XG4gICAgfVxuICAgIGlmIChpbnN0YW5jZS5zZXR1cFN0YXRlICE9PSBFTVBUWV9PQkopIHtcbiAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soXCJzZXR1cFwiLCBpbnN0YW5jZS5zZXR1cFN0YXRlKSk7XG4gICAgfVxuICAgIGlmIChpbnN0YW5jZS5kYXRhICE9PSBFTVBUWV9PQkopIHtcbiAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soXCJkYXRhXCIsIHRvUmF3KGluc3RhbmNlLmRhdGEpKSk7XG4gICAgfVxuICAgIGNvbnN0IGNvbXB1dGVkID0gZXh0cmFjdEtleXMoaW5zdGFuY2UsIFwiY29tcHV0ZWRcIik7XG4gICAgaWYgKGNvbXB1dGVkKSB7XG4gICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKFwiY29tcHV0ZWRcIiwgY29tcHV0ZWQpKTtcbiAgICB9XG4gICAgY29uc3QgaW5qZWN0ZWQgPSBleHRyYWN0S2V5cyhpbnN0YW5jZSwgXCJpbmplY3RcIik7XG4gICAgaWYgKGluamVjdGVkKSB7XG4gICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKFwiaW5qZWN0ZWRcIiwgaW5qZWN0ZWQpKTtcbiAgICB9XG4gICAgYmxvY2tzLnB1c2goW1xuICAgICAgXCJkaXZcIixcbiAgICAgIHt9LFxuICAgICAgW1xuICAgICAgICBcInNwYW5cIixcbiAgICAgICAge1xuICAgICAgICAgIHN0eWxlOiBrZXl3b3JkU3R5bGUuc3R5bGUgKyBcIjtvcGFjaXR5OjAuNjZcIlxuICAgICAgICB9LFxuICAgICAgICBcIiQgKGludGVybmFsKTogXCJcbiAgICAgIF0sXG4gICAgICBbXCJvYmplY3RcIiwgeyBvYmplY3Q6IGluc3RhbmNlIH1dXG4gICAgXSk7XG4gICAgcmV0dXJuIGJsb2NrcztcbiAgfVxuICBmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZUJsb2NrKHR5cGUsIHRhcmdldCkge1xuICAgIHRhcmdldCA9IGV4dGVuZCh7fSwgdGFyZ2V0KTtcbiAgICBpZiAoIU9iamVjdC5rZXlzKHRhcmdldCkubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gW1wic3BhblwiLCB7fV07XG4gICAgfVxuICAgIHJldHVybiBbXG4gICAgICBcImRpdlwiLFxuICAgICAgeyBzdHlsZTogXCJsaW5lLWhlaWdodDoxLjI1ZW07bWFyZ2luLWJvdHRvbTowLjZlbVwiIH0sXG4gICAgICBbXG4gICAgICAgIFwiZGl2XCIsXG4gICAgICAgIHtcbiAgICAgICAgICBzdHlsZTogXCJjb2xvcjojNDc2NTgyXCJcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCJkaXZcIixcbiAgICAgICAge1xuICAgICAgICAgIHN0eWxlOiBcInBhZGRpbmctbGVmdDoxLjI1ZW1cIlxuICAgICAgICB9LFxuICAgICAgICAuLi5PYmplY3Qua2V5cyh0YXJnZXQpLm1hcCgoa2V5KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICB7fSxcbiAgICAgICAgICAgIFtcInNwYW5cIiwga2V5d29yZFN0eWxlLCBrZXkgKyBcIjogXCJdLFxuICAgICAgICAgICAgZm9ybWF0VmFsdWUodGFyZ2V0W2tleV0sIGZhbHNlKVxuICAgICAgICAgIF07XG4gICAgICAgIH0pXG4gICAgICBdXG4gICAgXTtcbiAgfVxuICBmdW5jdGlvbiBmb3JtYXRWYWx1ZSh2LCBhc1JhdyA9IHRydWUpIHtcbiAgICBpZiAodHlwZW9mIHYgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiBbXCJzcGFuXCIsIG51bWJlclN0eWxlLCB2XTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gW1wic3BhblwiLCBzdHJpbmdTdHlsZSwgSlNPTi5zdHJpbmdpZnkodildO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICByZXR1cm4gW1wic3BhblwiLCBrZXl3b3JkU3R5bGUsIHZdO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodikpIHtcbiAgICAgIHJldHVybiBbXCJvYmplY3RcIiwgeyBvYmplY3Q6IGFzUmF3ID8gdG9SYXcodikgOiB2IH1dO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW1wic3BhblwiLCBzdHJpbmdTdHlsZSwgU3RyaW5nKHYpXTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZXh0cmFjdEtleXMoaW5zdGFuY2UsIHR5cGUpIHtcbiAgICBjb25zdCBDb21wID0gaW5zdGFuY2UudHlwZTtcbiAgICBpZiAoaXNGdW5jdGlvbihDb21wKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBleHRyYWN0ZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBpbnN0YW5jZS5jdHgpIHtcbiAgICAgIGlmIChpc0tleU9mVHlwZShDb21wLCBrZXksIHR5cGUpKSB7XG4gICAgICAgIGV4dHJhY3RlZFtrZXldID0gaW5zdGFuY2UuY3R4W2tleV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBleHRyYWN0ZWQ7XG4gIH1cbiAgZnVuY3Rpb24gaXNLZXlPZlR5cGUoQ29tcCwga2V5LCB0eXBlKSB7XG4gICAgY29uc3Qgb3B0cyA9IENvbXBbdHlwZV07XG4gICAgaWYgKGlzQXJyYXkob3B0cykgJiYgb3B0cy5pbmNsdWRlcyhrZXkpIHx8IGlzT2JqZWN0KG9wdHMpICYmIGtleSBpbiBvcHRzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKENvbXAuZXh0ZW5kcyAmJiBpc0tleU9mVHlwZShDb21wLmV4dGVuZHMsIGtleSwgdHlwZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoQ29tcC5taXhpbnMgJiYgQ29tcC5taXhpbnMuc29tZSgobSkgPT4gaXNLZXlPZlR5cGUobSwga2V5LCB0eXBlKSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBnZW5SZWZGbGFnKHYpIHtcbiAgICBpZiAoaXNTaGFsbG93KHYpKSB7XG4gICAgICByZXR1cm4gYFNoYWxsb3dSZWZgO1xuICAgIH1cbiAgICBpZiAodi5lZmZlY3QpIHtcbiAgICAgIHJldHVybiBgQ29tcHV0ZWRSZWZgO1xuICAgIH1cbiAgICByZXR1cm4gYFJlZmA7XG4gIH1cbiAgaWYgKHdpbmRvdy5kZXZ0b29sc0Zvcm1hdHRlcnMpIHtcbiAgICB3aW5kb3cuZGV2dG9vbHNGb3JtYXR0ZXJzLnB1c2goZm9ybWF0dGVyKTtcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cuZGV2dG9vbHNGb3JtYXR0ZXJzID0gW2Zvcm1hdHRlcl07XG4gIH1cbn1cblxuZnVuY3Rpb24gd2l0aE1lbW8obWVtbywgcmVuZGVyLCBjYWNoZSwgaW5kZXgpIHtcbiAgY29uc3QgY2FjaGVkID0gY2FjaGVbaW5kZXhdO1xuICBpZiAoY2FjaGVkICYmIGlzTWVtb1NhbWUoY2FjaGVkLCBtZW1vKSkge1xuICAgIHJldHVybiBjYWNoZWQ7XG4gIH1cbiAgY29uc3QgcmV0ID0gcmVuZGVyKCk7XG4gIHJldC5tZW1vID0gbWVtby5zbGljZSgpO1xuICByZXQuY2FjaGVJbmRleCA9IGluZGV4O1xuICByZXR1cm4gY2FjaGVbaW5kZXhdID0gcmV0O1xufVxuZnVuY3Rpb24gaXNNZW1vU2FtZShjYWNoZWQsIG1lbW8pIHtcbiAgY29uc3QgcHJldiA9IGNhY2hlZC5tZW1vO1xuICBpZiAocHJldi5sZW5ndGggIT0gbWVtby5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2Lmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGhhc0NoYW5nZWQocHJldltpXSwgbWVtb1tpXSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzQmxvY2tUcmVlRW5hYmxlZCA+IDAgJiYgY3VycmVudEJsb2NrKSB7XG4gICAgY3VycmVudEJsb2NrLnB1c2goY2FjaGVkKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuY29uc3QgdmVyc2lvbiA9IFwiMy41LjI1XCI7XG5jb25zdCB3YXJuID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHdhcm4kMSA6IE5PT1A7XG5jb25zdCBFcnJvclR5cGVTdHJpbmdzID0gRXJyb3JUeXBlU3RyaW5ncyQxIDtcbmNvbnN0IGRldnRvb2xzID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCB0cnVlID8gZGV2dG9vbHMkMSA6IHZvaWQgMDtcbmNvbnN0IHNldERldnRvb2xzSG9vayA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgdHJ1ZSA/IHNldERldnRvb2xzSG9vayQxIDogTk9PUDtcbmNvbnN0IF9zc3JVdGlscyA9IHtcbiAgY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UsXG4gIHNldHVwQ29tcG9uZW50LFxuICByZW5kZXJDb21wb25lbnRSb290LFxuICBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsXG4gIGlzVk5vZGU6IGlzVk5vZGUsXG4gIG5vcm1hbGl6ZVZOb2RlLFxuICBnZXRDb21wb25lbnRQdWJsaWNJbnN0YW5jZSxcbiAgZW5zdXJlVmFsaWRWTm9kZSxcbiAgcHVzaFdhcm5pbmdDb250ZXh0LFxuICBwb3BXYXJuaW5nQ29udGV4dFxufTtcbmNvbnN0IHNzclV0aWxzID0gX3NzclV0aWxzIDtcbmNvbnN0IHJlc29sdmVGaWx0ZXIgPSBudWxsO1xuY29uc3QgY29tcGF0VXRpbHMgPSBudWxsO1xuY29uc3QgRGVwcmVjYXRpb25UeXBlcyA9IG51bGw7XG5cbmV4cG9ydCB7IEJhc2VUcmFuc2l0aW9uLCBCYXNlVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycywgQ29tbWVudCwgRGVwcmVjYXRpb25UeXBlcywgRXJyb3JDb2RlcywgRXJyb3JUeXBlU3RyaW5ncywgRnJhZ21lbnQsIEtlZXBBbGl2ZSwgU3RhdGljLCBTdXNwZW5zZSwgVGVsZXBvcnQsIFRleHQsIGFzc2VydE51bWJlciwgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcsIGNhbGxXaXRoRXJyb3JIYW5kbGluZywgY2xvbmVWTm9kZSwgY29tcGF0VXRpbHMsIGNvbXB1dGVkLCBjcmVhdGVCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlLCBjcmVhdGVFbGVtZW50QmxvY2ssIGNyZWF0ZUJhc2VWTm9kZSBhcyBjcmVhdGVFbGVtZW50Vk5vZGUsIGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyLCBjcmVhdGVQcm9wc1Jlc3RQcm94eSwgY3JlYXRlUmVuZGVyZXIsIGNyZWF0ZVNsb3RzLCBjcmVhdGVTdGF0aWNWTm9kZSwgY3JlYXRlVGV4dFZOb2RlLCBjcmVhdGVWTm9kZSwgZGVmaW5lQXN5bmNDb21wb25lbnQsIGRlZmluZUNvbXBvbmVudCwgZGVmaW5lRW1pdHMsIGRlZmluZUV4cG9zZSwgZGVmaW5lTW9kZWwsIGRlZmluZU9wdGlvbnMsIGRlZmluZVByb3BzLCBkZWZpbmVTbG90cywgZGV2dG9vbHMsIGdldEN1cnJlbnRJbnN0YW5jZSwgZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuLCBndWFyZFJlYWN0aXZlUHJvcHMsIGgsIGhhbmRsZUVycm9yLCBoYXNJbmplY3Rpb25Db250ZXh0LCBoeWRyYXRlT25JZGxlLCBoeWRyYXRlT25JbnRlcmFjdGlvbiwgaHlkcmF0ZU9uTWVkaWFRdWVyeSwgaHlkcmF0ZU9uVmlzaWJsZSwgaW5pdEN1c3RvbUZvcm1hdHRlciwgaW5qZWN0LCBpc01lbW9TYW1lLCBpc1J1bnRpbWVPbmx5LCBpc1ZOb2RlLCBtZXJnZURlZmF1bHRzLCBtZXJnZU1vZGVscywgbWVyZ2VQcm9wcywgbmV4dFRpY2ssIG9uQWN0aXZhdGVkLCBvbkJlZm9yZU1vdW50LCBvbkJlZm9yZVVubW91bnQsIG9uQmVmb3JlVXBkYXRlLCBvbkRlYWN0aXZhdGVkLCBvbkVycm9yQ2FwdHVyZWQsIG9uTW91bnRlZCwgb25SZW5kZXJUcmFja2VkLCBvblJlbmRlclRyaWdnZXJlZCwgb25TZXJ2ZXJQcmVmZXRjaCwgb25Vbm1vdW50ZWQsIG9uVXBkYXRlZCwgb3BlbkJsb2NrLCBwb3BTY29wZUlkLCBwcm92aWRlLCBwdXNoU2NvcGVJZCwgcXVldWVQb3N0Rmx1c2hDYiwgcmVnaXN0ZXJSdW50aW1lQ29tcGlsZXIsIHJlbmRlckxpc3QsIHJlbmRlclNsb3QsIHJlc29sdmVDb21wb25lbnQsIHJlc29sdmVEaXJlY3RpdmUsIHJlc29sdmVEeW5hbWljQ29tcG9uZW50LCByZXNvbHZlRmlsdGVyLCByZXNvbHZlVHJhbnNpdGlvbkhvb2tzLCBzZXRCbG9ja1RyYWNraW5nLCBzZXREZXZ0b29sc0hvb2ssIHNldFRyYW5zaXRpb25Ib29rcywgc3NyQ29udGV4dEtleSwgc3NyVXRpbHMsIHRvSGFuZGxlcnMsIHRyYW5zZm9ybVZOb2RlQXJncywgdXNlQXR0cnMsIHVzZUlkLCB1c2VNb2RlbCwgdXNlU1NSQ29udGV4dCwgdXNlU2xvdHMsIHVzZVRlbXBsYXRlUmVmLCB1c2VUcmFuc2l0aW9uU3RhdGUsIHZlcnNpb24sIHdhcm4sIHdhdGNoLCB3YXRjaEVmZmVjdCwgd2F0Y2hQb3N0RWZmZWN0LCB3YXRjaFN5bmNFZmZlY3QsIHdpdGhBc3luY0NvbnRleHQsIHdpdGhDdHgsIHdpdGhEZWZhdWx0cywgd2l0aERpcmVjdGl2ZXMsIHdpdGhNZW1vLCB3aXRoU2NvcGVJZCB9O1xuIiwiLyoqXG4qIEB2dWUvcnVudGltZS1kb20gdjMuNS4yNVxuKiAoYykgMjAxOC1wcmVzZW50IFl1eGkgKEV2YW4pIFlvdSBhbmQgVnVlIGNvbnRyaWJ1dG9yc1xuKiBAbGljZW5zZSBNSVRcbioqL1xuaW1wb3J0IHsgd2FybiwgQmFzZVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMsIGgsIEJhc2VUcmFuc2l0aW9uLCBhc3NlcnROdW1iZXIsIGdldEN1cnJlbnRJbnN0YW5jZSwgb25CZWZvcmVVcGRhdGUsIHF1ZXVlUG9zdEZsdXNoQ2IsIG9uTW91bnRlZCwgd2F0Y2gsIG9uVW5tb3VudGVkLCBGcmFnbWVudCwgU3RhdGljLCBjYW1lbGl6ZSwgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcsIGRlZmluZUNvbXBvbmVudCwgbmV4dFRpY2ssIHVucmVmLCBjcmVhdGVWTm9kZSwgdXNlVHJhbnNpdGlvblN0YXRlLCBvblVwZGF0ZWQsIHRvUmF3LCBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4sIHNldFRyYW5zaXRpb25Ib29rcywgcmVzb2x2ZVRyYW5zaXRpb25Ib29rcywgVGV4dCwgY3JlYXRlUmVuZGVyZXIsIGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyLCBpc1J1bnRpbWVPbmx5IH0gZnJvbSAnQHZ1ZS9ydW50aW1lLWNvcmUnO1xuZXhwb3J0ICogZnJvbSAnQHZ1ZS9ydW50aW1lLWNvcmUnO1xuaW1wb3J0IHsgZXh0ZW5kLCBpc09iamVjdCwgdG9OdW1iZXIsIGlzQXJyYXksIE5PT1AsIG5vcm1hbGl6ZUNzc1ZhclZhbHVlLCBpc1N0cmluZywgaHlwaGVuYXRlLCBjYXBpdGFsaXplLCBpc1NwZWNpYWxCb29sZWFuQXR0ciwgaW5jbHVkZUJvb2xlYW5BdHRyLCBpc1N5bWJvbCwgaXNGdW5jdGlvbiwgaXNPbiwgaXNNb2RlbExpc3RlbmVyLCBjYW1lbGl6ZSBhcyBjYW1lbGl6ZSQxLCBpc1BsYWluT2JqZWN0LCBoYXNPd24sIEVNUFRZX09CSiwgbG9vc2VUb051bWJlciwgbG9vc2VJbmRleE9mLCBpc1NldCwgbG9vc2VFcXVhbCwgaW52b2tlQXJyYXlGbnMsIGlzSFRNTFRhZywgaXNTVkdUYWcsIGlzTWF0aE1MVGFnIH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuXG5sZXQgcG9saWN5ID0gdm9pZCAwO1xuY29uc3QgdHQgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy50cnVzdGVkVHlwZXM7XG5pZiAodHQpIHtcbiAgdHJ5IHtcbiAgICBwb2xpY3kgPSAvKiBAX19QVVJFX18gKi8gdHQuY3JlYXRlUG9saWN5KFwidnVlXCIsIHtcbiAgICAgIGNyZWF0ZUhUTUw6ICh2YWwpID0+IHZhbFxuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuKGBFcnJvciBjcmVhdGluZyB0cnVzdGVkIHR5cGVzIHBvbGljeTogJHtlfWApO1xuICB9XG59XG5jb25zdCB1bnNhZmVUb1RydXN0ZWRIVE1MID0gcG9saWN5ID8gKHZhbCkgPT4gcG9saWN5LmNyZWF0ZUhUTUwodmFsKSA6ICh2YWwpID0+IHZhbDtcbmNvbnN0IHN2Z05TID0gXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiO1xuY29uc3QgbWF0aG1sTlMgPSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTgvTWF0aC9NYXRoTUxcIjtcbmNvbnN0IGRvYyA9IHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIiA/IGRvY3VtZW50IDogbnVsbDtcbmNvbnN0IHRlbXBsYXRlQ29udGFpbmVyID0gZG9jICYmIC8qIEBfX1BVUkVfXyAqLyBkb2MuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuY29uc3Qgbm9kZU9wcyA9IHtcbiAgaW5zZXJ0OiAoY2hpbGQsIHBhcmVudCwgYW5jaG9yKSA9PiB7XG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShjaGlsZCwgYW5jaG9yIHx8IG51bGwpO1xuICB9LFxuICByZW1vdmU6IChjaGlsZCkgPT4ge1xuICAgIGNvbnN0IHBhcmVudCA9IGNoaWxkLnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICB9XG4gIH0sXG4gIGNyZWF0ZUVsZW1lbnQ6ICh0YWcsIG5hbWVzcGFjZSwgaXMsIHByb3BzKSA9PiB7XG4gICAgY29uc3QgZWwgPSBuYW1lc3BhY2UgPT09IFwic3ZnXCIgPyBkb2MuY3JlYXRlRWxlbWVudE5TKHN2Z05TLCB0YWcpIDogbmFtZXNwYWNlID09PSBcIm1hdGhtbFwiID8gZG9jLmNyZWF0ZUVsZW1lbnROUyhtYXRobWxOUywgdGFnKSA6IGlzID8gZG9jLmNyZWF0ZUVsZW1lbnQodGFnLCB7IGlzIH0pIDogZG9jLmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICBpZiAodGFnID09PSBcInNlbGVjdFwiICYmIHByb3BzICYmIHByb3BzLm11bHRpcGxlICE9IG51bGwpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShcIm11bHRpcGxlXCIsIHByb3BzLm11bHRpcGxlKTtcbiAgICB9XG4gICAgcmV0dXJuIGVsO1xuICB9LFxuICBjcmVhdGVUZXh0OiAodGV4dCkgPT4gZG9jLmNyZWF0ZVRleHROb2RlKHRleHQpLFxuICBjcmVhdGVDb21tZW50OiAodGV4dCkgPT4gZG9jLmNyZWF0ZUNvbW1lbnQodGV4dCksXG4gIHNldFRleHQ6IChub2RlLCB0ZXh0KSA9PiB7XG4gICAgbm9kZS5ub2RlVmFsdWUgPSB0ZXh0O1xuICB9LFxuICBzZXRFbGVtZW50VGV4dDogKGVsLCB0ZXh0KSA9PiB7XG4gICAgZWwudGV4dENvbnRlbnQgPSB0ZXh0O1xuICB9LFxuICBwYXJlbnROb2RlOiAobm9kZSkgPT4gbm9kZS5wYXJlbnROb2RlLFxuICBuZXh0U2libGluZzogKG5vZGUpID0+IG5vZGUubmV4dFNpYmxpbmcsXG4gIHF1ZXJ5U2VsZWN0b3I6IChzZWxlY3RvcikgPT4gZG9jLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLFxuICBzZXRTY29wZUlkKGVsLCBpZCkge1xuICAgIGVsLnNldEF0dHJpYnV0ZShpZCwgXCJcIik7XG4gIH0sXG4gIC8vIF9fVU5TQUZFX19cbiAgLy8gUmVhc29uOiBpbm5lckhUTUwuXG4gIC8vIFN0YXRpYyBjb250ZW50IGhlcmUgY2FuIG9ubHkgY29tZSBmcm9tIGNvbXBpbGVkIHRlbXBsYXRlcy5cbiAgLy8gQXMgbG9uZyBhcyB0aGUgdXNlciBvbmx5IHVzZXMgdHJ1c3RlZCB0ZW1wbGF0ZXMsIHRoaXMgaXMgc2FmZS5cbiAgaW5zZXJ0U3RhdGljQ29udGVudChjb250ZW50LCBwYXJlbnQsIGFuY2hvciwgbmFtZXNwYWNlLCBzdGFydCwgZW5kKSB7XG4gICAgY29uc3QgYmVmb3JlID0gYW5jaG9yID8gYW5jaG9yLnByZXZpb3VzU2libGluZyA6IHBhcmVudC5sYXN0Q2hpbGQ7XG4gICAgaWYgKHN0YXJ0ICYmIChzdGFydCA9PT0gZW5kIHx8IHN0YXJ0Lm5leHRTaWJsaW5nKSkge1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShzdGFydC5jbG9uZU5vZGUodHJ1ZSksIGFuY2hvcik7XG4gICAgICAgIGlmIChzdGFydCA9PT0gZW5kIHx8ICEoc3RhcnQgPSBzdGFydC5uZXh0U2libGluZykpIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0ZW1wbGF0ZUNvbnRhaW5lci5pbm5lckhUTUwgPSB1bnNhZmVUb1RydXN0ZWRIVE1MKFxuICAgICAgICBuYW1lc3BhY2UgPT09IFwic3ZnXCIgPyBgPHN2Zz4ke2NvbnRlbnR9PC9zdmc+YCA6IG5hbWVzcGFjZSA9PT0gXCJtYXRobWxcIiA/IGA8bWF0aD4ke2NvbnRlbnR9PC9tYXRoPmAgOiBjb250ZW50XG4gICAgICApO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNvbnRhaW5lci5jb250ZW50O1xuICAgICAgaWYgKG5hbWVzcGFjZSA9PT0gXCJzdmdcIiB8fCBuYW1lc3BhY2UgPT09IFwibWF0aG1sXCIpIHtcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IHRlbXBsYXRlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIHdoaWxlICh3cmFwcGVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICB0ZW1wbGF0ZS5hcHBlbmRDaGlsZCh3cmFwcGVyLmZpcnN0Q2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIHRlbXBsYXRlLnJlbW92ZUNoaWxkKHdyYXBwZXIpO1xuICAgICAgfVxuICAgICAgcGFyZW50Lmluc2VydEJlZm9yZSh0ZW1wbGF0ZSwgYW5jaG9yKTtcbiAgICB9XG4gICAgcmV0dXJuIFtcbiAgICAgIC8vIGZpcnN0XG4gICAgICBiZWZvcmUgPyBiZWZvcmUubmV4dFNpYmxpbmcgOiBwYXJlbnQuZmlyc3RDaGlsZCxcbiAgICAgIC8vIGxhc3RcbiAgICAgIGFuY2hvciA/IGFuY2hvci5wcmV2aW91c1NpYmxpbmcgOiBwYXJlbnQubGFzdENoaWxkXG4gICAgXTtcbiAgfVxufTtcblxuY29uc3QgVFJBTlNJVElPTiA9IFwidHJhbnNpdGlvblwiO1xuY29uc3QgQU5JTUFUSU9OID0gXCJhbmltYXRpb25cIjtcbmNvbnN0IHZ0Y0tleSA9IFN5bWJvbChcIl92dGNcIik7XG5jb25zdCBET01UcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzID0ge1xuICBuYW1lOiBTdHJpbmcsXG4gIHR5cGU6IFN0cmluZyxcbiAgY3NzOiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0sXG4gIGR1cmF0aW9uOiBbU3RyaW5nLCBOdW1iZXIsIE9iamVjdF0sXG4gIGVudGVyRnJvbUNsYXNzOiBTdHJpbmcsXG4gIGVudGVyQWN0aXZlQ2xhc3M6IFN0cmluZyxcbiAgZW50ZXJUb0NsYXNzOiBTdHJpbmcsXG4gIGFwcGVhckZyb21DbGFzczogU3RyaW5nLFxuICBhcHBlYXJBY3RpdmVDbGFzczogU3RyaW5nLFxuICBhcHBlYXJUb0NsYXNzOiBTdHJpbmcsXG4gIGxlYXZlRnJvbUNsYXNzOiBTdHJpbmcsXG4gIGxlYXZlQWN0aXZlQ2xhc3M6IFN0cmluZyxcbiAgbGVhdmVUb0NsYXNzOiBTdHJpbmdcbn07XG5jb25zdCBUcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzID0gLyogQF9fUFVSRV9fICovIGV4dGVuZChcbiAge30sXG4gIEJhc2VUcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzLFxuICBET01UcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzXG4pO1xuY29uc3QgZGVjb3JhdGUkMSA9ICh0KSA9PiB7XG4gIHQuZGlzcGxheU5hbWUgPSBcIlRyYW5zaXRpb25cIjtcbiAgdC5wcm9wcyA9IFRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnM7XG4gIHJldHVybiB0O1xufTtcbmNvbnN0IFRyYW5zaXRpb24gPSAvKiBAX19QVVJFX18gKi8gZGVjb3JhdGUkMShcbiAgKHByb3BzLCB7IHNsb3RzIH0pID0+IGgoQmFzZVRyYW5zaXRpb24sIHJlc29sdmVUcmFuc2l0aW9uUHJvcHMocHJvcHMpLCBzbG90cylcbik7XG5jb25zdCBjYWxsSG9vayA9IChob29rLCBhcmdzID0gW10pID0+IHtcbiAgaWYgKGlzQXJyYXkoaG9vaykpIHtcbiAgICBob29rLmZvckVhY2goKGgyKSA9PiBoMiguLi5hcmdzKSk7XG4gIH0gZWxzZSBpZiAoaG9vaykge1xuICAgIGhvb2soLi4uYXJncyk7XG4gIH1cbn07XG5jb25zdCBoYXNFeHBsaWNpdENhbGxiYWNrID0gKGhvb2spID0+IHtcbiAgcmV0dXJuIGhvb2sgPyBpc0FycmF5KGhvb2spID8gaG9vay5zb21lKChoMikgPT4gaDIubGVuZ3RoID4gMSkgOiBob29rLmxlbmd0aCA+IDEgOiBmYWxzZTtcbn07XG5mdW5jdGlvbiByZXNvbHZlVHJhbnNpdGlvblByb3BzKHJhd1Byb3BzKSB7XG4gIGNvbnN0IGJhc2VQcm9wcyA9IHt9O1xuICBmb3IgKGNvbnN0IGtleSBpbiByYXdQcm9wcykge1xuICAgIGlmICghKGtleSBpbiBET01UcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzKSkge1xuICAgICAgYmFzZVByb3BzW2tleV0gPSByYXdQcm9wc1trZXldO1xuICAgIH1cbiAgfVxuICBpZiAocmF3UHJvcHMuY3NzID09PSBmYWxzZSkge1xuICAgIHJldHVybiBiYXNlUHJvcHM7XG4gIH1cbiAgY29uc3Qge1xuICAgIG5hbWUgPSBcInZcIixcbiAgICB0eXBlLFxuICAgIGR1cmF0aW9uLFxuICAgIGVudGVyRnJvbUNsYXNzID0gYCR7bmFtZX0tZW50ZXItZnJvbWAsXG4gICAgZW50ZXJBY3RpdmVDbGFzcyA9IGAke25hbWV9LWVudGVyLWFjdGl2ZWAsXG4gICAgZW50ZXJUb0NsYXNzID0gYCR7bmFtZX0tZW50ZXItdG9gLFxuICAgIGFwcGVhckZyb21DbGFzcyA9IGVudGVyRnJvbUNsYXNzLFxuICAgIGFwcGVhckFjdGl2ZUNsYXNzID0gZW50ZXJBY3RpdmVDbGFzcyxcbiAgICBhcHBlYXJUb0NsYXNzID0gZW50ZXJUb0NsYXNzLFxuICAgIGxlYXZlRnJvbUNsYXNzID0gYCR7bmFtZX0tbGVhdmUtZnJvbWAsXG4gICAgbGVhdmVBY3RpdmVDbGFzcyA9IGAke25hbWV9LWxlYXZlLWFjdGl2ZWAsXG4gICAgbGVhdmVUb0NsYXNzID0gYCR7bmFtZX0tbGVhdmUtdG9gXG4gIH0gPSByYXdQcm9wcztcbiAgY29uc3QgZHVyYXRpb25zID0gbm9ybWFsaXplRHVyYXRpb24oZHVyYXRpb24pO1xuICBjb25zdCBlbnRlckR1cmF0aW9uID0gZHVyYXRpb25zICYmIGR1cmF0aW9uc1swXTtcbiAgY29uc3QgbGVhdmVEdXJhdGlvbiA9IGR1cmF0aW9ucyAmJiBkdXJhdGlvbnNbMV07XG4gIGNvbnN0IHtcbiAgICBvbkJlZm9yZUVudGVyLFxuICAgIG9uRW50ZXIsXG4gICAgb25FbnRlckNhbmNlbGxlZCxcbiAgICBvbkxlYXZlLFxuICAgIG9uTGVhdmVDYW5jZWxsZWQsXG4gICAgb25CZWZvcmVBcHBlYXIgPSBvbkJlZm9yZUVudGVyLFxuICAgIG9uQXBwZWFyID0gb25FbnRlcixcbiAgICBvbkFwcGVhckNhbmNlbGxlZCA9IG9uRW50ZXJDYW5jZWxsZWRcbiAgfSA9IGJhc2VQcm9wcztcbiAgY29uc3QgZmluaXNoRW50ZXIgPSAoZWwsIGlzQXBwZWFyLCBkb25lLCBpc0NhbmNlbGxlZCkgPT4ge1xuICAgIGVsLl9lbnRlckNhbmNlbGxlZCA9IGlzQ2FuY2VsbGVkO1xuICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgaXNBcHBlYXIgPyBhcHBlYXJUb0NsYXNzIDogZW50ZXJUb0NsYXNzKTtcbiAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGlzQXBwZWFyID8gYXBwZWFyQWN0aXZlQ2xhc3MgOiBlbnRlckFjdGl2ZUNsYXNzKTtcbiAgICBkb25lICYmIGRvbmUoKTtcbiAgfTtcbiAgY29uc3QgZmluaXNoTGVhdmUgPSAoZWwsIGRvbmUpID0+IHtcbiAgICBlbC5faXNMZWF2aW5nID0gZmFsc2U7XG4gICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUZyb21DbGFzcyk7XG4gICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZVRvQ2xhc3MpO1xuICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVBY3RpdmVDbGFzcyk7XG4gICAgZG9uZSAmJiBkb25lKCk7XG4gIH07XG4gIGNvbnN0IG1ha2VFbnRlckhvb2sgPSAoaXNBcHBlYXIpID0+IHtcbiAgICByZXR1cm4gKGVsLCBkb25lKSA9PiB7XG4gICAgICBjb25zdCBob29rID0gaXNBcHBlYXIgPyBvbkFwcGVhciA6IG9uRW50ZXI7XG4gICAgICBjb25zdCByZXNvbHZlID0gKCkgPT4gZmluaXNoRW50ZXIoZWwsIGlzQXBwZWFyLCBkb25lKTtcbiAgICAgIGNhbGxIb29rKGhvb2ssIFtlbCwgcmVzb2x2ZV0pO1xuICAgICAgbmV4dEZyYW1lKCgpID0+IHtcbiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBpc0FwcGVhciA/IGFwcGVhckZyb21DbGFzcyA6IGVudGVyRnJvbUNsYXNzKTtcbiAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBpc0FwcGVhciA/IGFwcGVhclRvQ2xhc3MgOiBlbnRlclRvQ2xhc3MpO1xuICAgICAgICBpZiAoIWhhc0V4cGxpY2l0Q2FsbGJhY2soaG9vaykpIHtcbiAgICAgICAgICB3aGVuVHJhbnNpdGlvbkVuZHMoZWwsIHR5cGUsIGVudGVyRHVyYXRpb24sIHJlc29sdmUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xuICByZXR1cm4gZXh0ZW5kKGJhc2VQcm9wcywge1xuICAgIG9uQmVmb3JlRW50ZXIoZWwpIHtcbiAgICAgIGNhbGxIb29rKG9uQmVmb3JlRW50ZXIsIFtlbF0pO1xuICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBlbnRlckZyb21DbGFzcyk7XG4gICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGVudGVyQWN0aXZlQ2xhc3MpO1xuICAgIH0sXG4gICAgb25CZWZvcmVBcHBlYXIoZWwpIHtcbiAgICAgIGNhbGxIb29rKG9uQmVmb3JlQXBwZWFyLCBbZWxdKTtcbiAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgYXBwZWFyRnJvbUNsYXNzKTtcbiAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgYXBwZWFyQWN0aXZlQ2xhc3MpO1xuICAgIH0sXG4gICAgb25FbnRlcjogbWFrZUVudGVySG9vayhmYWxzZSksXG4gICAgb25BcHBlYXI6IG1ha2VFbnRlckhvb2sodHJ1ZSksXG4gICAgb25MZWF2ZShlbCwgZG9uZSkge1xuICAgICAgZWwuX2lzTGVhdmluZyA9IHRydWU7XG4gICAgICBjb25zdCByZXNvbHZlID0gKCkgPT4gZmluaXNoTGVhdmUoZWwsIGRvbmUpO1xuICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUZyb21DbGFzcyk7XG4gICAgICBpZiAoIWVsLl9lbnRlckNhbmNlbGxlZCkge1xuICAgICAgICBmb3JjZVJlZmxvdyhlbCk7XG4gICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVBY3RpdmVDbGFzcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpO1xuICAgICAgICBmb3JjZVJlZmxvdyhlbCk7XG4gICAgICB9XG4gICAgICBuZXh0RnJhbWUoKCkgPT4ge1xuICAgICAgICBpZiAoIWVsLl9pc0xlYXZpbmcpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUZyb21DbGFzcyk7XG4gICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTtcbiAgICAgICAgaWYgKCFoYXNFeHBsaWNpdENhbGxiYWNrKG9uTGVhdmUpKSB7XG4gICAgICAgICAgd2hlblRyYW5zaXRpb25FbmRzKGVsLCB0eXBlLCBsZWF2ZUR1cmF0aW9uLCByZXNvbHZlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjYWxsSG9vayhvbkxlYXZlLCBbZWwsIHJlc29sdmVdKTtcbiAgICB9LFxuICAgIG9uRW50ZXJDYW5jZWxsZWQoZWwpIHtcbiAgICAgIGZpbmlzaEVudGVyKGVsLCBmYWxzZSwgdm9pZCAwLCB0cnVlKTtcbiAgICAgIGNhbGxIb29rKG9uRW50ZXJDYW5jZWxsZWQsIFtlbF0pO1xuICAgIH0sXG4gICAgb25BcHBlYXJDYW5jZWxsZWQoZWwpIHtcbiAgICAgIGZpbmlzaEVudGVyKGVsLCB0cnVlLCB2b2lkIDAsIHRydWUpO1xuICAgICAgY2FsbEhvb2sob25BcHBlYXJDYW5jZWxsZWQsIFtlbF0pO1xuICAgIH0sXG4gICAgb25MZWF2ZUNhbmNlbGxlZChlbCkge1xuICAgICAgZmluaXNoTGVhdmUoZWwpO1xuICAgICAgY2FsbEhvb2sob25MZWF2ZUNhbmNlbGxlZCwgW2VsXSk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUR1cmF0aW9uKGR1cmF0aW9uKSB7XG4gIGlmIChkdXJhdGlvbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QoZHVyYXRpb24pKSB7XG4gICAgcmV0dXJuIFtOdW1iZXJPZihkdXJhdGlvbi5lbnRlciksIE51bWJlck9mKGR1cmF0aW9uLmxlYXZlKV07XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgbiA9IE51bWJlck9mKGR1cmF0aW9uKTtcbiAgICByZXR1cm4gW24sIG5dO1xuICB9XG59XG5mdW5jdGlvbiBOdW1iZXJPZih2YWwpIHtcbiAgY29uc3QgcmVzID0gdG9OdW1iZXIodmFsKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBhc3NlcnROdW1iZXIocmVzLCBcIjx0cmFuc2l0aW9uPiBleHBsaWNpdCBkdXJhdGlvblwiKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBjbHMpIHtcbiAgY2xzLnNwbGl0KC9cXHMrLykuZm9yRWFjaCgoYykgPT4gYyAmJiBlbC5jbGFzc0xpc3QuYWRkKGMpKTtcbiAgKGVsW3Z0Y0tleV0gfHwgKGVsW3Z0Y0tleV0gPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpKSkuYWRkKGNscyk7XG59XG5mdW5jdGlvbiByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGNscykge1xuICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKChjKSA9PiBjICYmIGVsLmNsYXNzTGlzdC5yZW1vdmUoYykpO1xuICBjb25zdCBfdnRjID0gZWxbdnRjS2V5XTtcbiAgaWYgKF92dGMpIHtcbiAgICBfdnRjLmRlbGV0ZShjbHMpO1xuICAgIGlmICghX3Z0Yy5zaXplKSB7XG4gICAgICBlbFt2dGNLZXldID0gdm9pZCAwO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gbmV4dEZyYW1lKGNiKSB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNiKTtcbiAgfSk7XG59XG5sZXQgZW5kSWQgPSAwO1xuZnVuY3Rpb24gd2hlblRyYW5zaXRpb25FbmRzKGVsLCBleHBlY3RlZFR5cGUsIGV4cGxpY2l0VGltZW91dCwgcmVzb2x2ZSkge1xuICBjb25zdCBpZCA9IGVsLl9lbmRJZCA9ICsrZW5kSWQ7XG4gIGNvbnN0IHJlc29sdmVJZk5vdFN0YWxlID0gKCkgPT4ge1xuICAgIGlmIChpZCA9PT0gZWwuX2VuZElkKSB7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfVxuICB9O1xuICBpZiAoZXhwbGljaXRUaW1lb3V0ICE9IG51bGwpIHtcbiAgICByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlSWZOb3RTdGFsZSwgZXhwbGljaXRUaW1lb3V0KTtcbiAgfVxuICBjb25zdCB7IHR5cGUsIHRpbWVvdXQsIHByb3BDb3VudCB9ID0gZ2V0VHJhbnNpdGlvbkluZm8oZWwsIGV4cGVjdGVkVHlwZSk7XG4gIGlmICghdHlwZSkge1xuICAgIHJldHVybiByZXNvbHZlKCk7XG4gIH1cbiAgY29uc3QgZW5kRXZlbnQgPSB0eXBlICsgXCJlbmRcIjtcbiAgbGV0IGVuZGVkID0gMDtcbiAgY29uc3QgZW5kID0gKCkgPT4ge1xuICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZW5kRXZlbnQsIG9uRW5kKTtcbiAgICByZXNvbHZlSWZOb3RTdGFsZSgpO1xuICB9O1xuICBjb25zdCBvbkVuZCA9IChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlbCAmJiArK2VuZGVkID49IHByb3BDb3VudCkge1xuICAgICAgZW5kKCk7XG4gICAgfVxuICB9O1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBpZiAoZW5kZWQgPCBwcm9wQ291bnQpIHtcbiAgICAgIGVuZCgpO1xuICAgIH1cbiAgfSwgdGltZW91dCArIDEpO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKGVuZEV2ZW50LCBvbkVuZCk7XG59XG5mdW5jdGlvbiBnZXRUcmFuc2l0aW9uSW5mbyhlbCwgZXhwZWN0ZWRUeXBlKSB7XG4gIGNvbnN0IHN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKTtcbiAgY29uc3QgZ2V0U3R5bGVQcm9wZXJ0aWVzID0gKGtleSkgPT4gKHN0eWxlc1trZXldIHx8IFwiXCIpLnNwbGl0KFwiLCBcIik7XG4gIGNvbnN0IHRyYW5zaXRpb25EZWxheXMgPSBnZXRTdHlsZVByb3BlcnRpZXMoYCR7VFJBTlNJVElPTn1EZWxheWApO1xuICBjb25zdCB0cmFuc2l0aW9uRHVyYXRpb25zID0gZ2V0U3R5bGVQcm9wZXJ0aWVzKGAke1RSQU5TSVRJT059RHVyYXRpb25gKTtcbiAgY29uc3QgdHJhbnNpdGlvblRpbWVvdXQgPSBnZXRUaW1lb3V0KHRyYW5zaXRpb25EZWxheXMsIHRyYW5zaXRpb25EdXJhdGlvbnMpO1xuICBjb25zdCBhbmltYXRpb25EZWxheXMgPSBnZXRTdHlsZVByb3BlcnRpZXMoYCR7QU5JTUFUSU9OfURlbGF5YCk7XG4gIGNvbnN0IGFuaW1hdGlvbkR1cmF0aW9ucyA9IGdldFN0eWxlUHJvcGVydGllcyhgJHtBTklNQVRJT059RHVyYXRpb25gKTtcbiAgY29uc3QgYW5pbWF0aW9uVGltZW91dCA9IGdldFRpbWVvdXQoYW5pbWF0aW9uRGVsYXlzLCBhbmltYXRpb25EdXJhdGlvbnMpO1xuICBsZXQgdHlwZSA9IG51bGw7XG4gIGxldCB0aW1lb3V0ID0gMDtcbiAgbGV0IHByb3BDb3VudCA9IDA7XG4gIGlmIChleHBlY3RlZFR5cGUgPT09IFRSQU5TSVRJT04pIHtcbiAgICBpZiAodHJhbnNpdGlvblRpbWVvdXQgPiAwKSB7XG4gICAgICB0eXBlID0gVFJBTlNJVElPTjtcbiAgICAgIHRpbWVvdXQgPSB0cmFuc2l0aW9uVGltZW91dDtcbiAgICAgIHByb3BDb3VudCA9IHRyYW5zaXRpb25EdXJhdGlvbnMubGVuZ3RoO1xuICAgIH1cbiAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09IEFOSU1BVElPTikge1xuICAgIGlmIChhbmltYXRpb25UaW1lb3V0ID4gMCkge1xuICAgICAgdHlwZSA9IEFOSU1BVElPTjtcbiAgICAgIHRpbWVvdXQgPSBhbmltYXRpb25UaW1lb3V0O1xuICAgICAgcHJvcENvdW50ID0gYW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGltZW91dCA9IE1hdGgubWF4KHRyYW5zaXRpb25UaW1lb3V0LCBhbmltYXRpb25UaW1lb3V0KTtcbiAgICB0eXBlID0gdGltZW91dCA+IDAgPyB0cmFuc2l0aW9uVGltZW91dCA+IGFuaW1hdGlvblRpbWVvdXQgPyBUUkFOU0lUSU9OIDogQU5JTUFUSU9OIDogbnVsbDtcbiAgICBwcm9wQ291bnQgPSB0eXBlID8gdHlwZSA9PT0gVFJBTlNJVElPTiA/IHRyYW5zaXRpb25EdXJhdGlvbnMubGVuZ3RoIDogYW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aCA6IDA7XG4gIH1cbiAgY29uc3QgaGFzVHJhbnNmb3JtID0gdHlwZSA9PT0gVFJBTlNJVElPTiAmJiAvXFxiKD86dHJhbnNmb3JtfGFsbCkoPzosfCQpLy50ZXN0KFxuICAgIGdldFN0eWxlUHJvcGVydGllcyhgJHtUUkFOU0lUSU9OfVByb3BlcnR5YCkudG9TdHJpbmcoKVxuICApO1xuICByZXR1cm4ge1xuICAgIHR5cGUsXG4gICAgdGltZW91dCxcbiAgICBwcm9wQ291bnQsXG4gICAgaGFzVHJhbnNmb3JtXG4gIH07XG59XG5mdW5jdGlvbiBnZXRUaW1lb3V0KGRlbGF5cywgZHVyYXRpb25zKSB7XG4gIHdoaWxlIChkZWxheXMubGVuZ3RoIDwgZHVyYXRpb25zLmxlbmd0aCkge1xuICAgIGRlbGF5cyA9IGRlbGF5cy5jb25jYXQoZGVsYXlzKTtcbiAgfVxuICByZXR1cm4gTWF0aC5tYXgoLi4uZHVyYXRpb25zLm1hcCgoZCwgaSkgPT4gdG9NcyhkKSArIHRvTXMoZGVsYXlzW2ldKSkpO1xufVxuZnVuY3Rpb24gdG9NcyhzKSB7XG4gIGlmIChzID09PSBcImF1dG9cIikgcmV0dXJuIDA7XG4gIHJldHVybiBOdW1iZXIocy5zbGljZSgwLCAtMSkucmVwbGFjZShcIixcIiwgXCIuXCIpKSAqIDFlMztcbn1cbmZ1bmN0aW9uIGZvcmNlUmVmbG93KGVsKSB7XG4gIGNvbnN0IHRhcmdldERvY3VtZW50ID0gZWwgPyBlbC5vd25lckRvY3VtZW50IDogZG9jdW1lbnQ7XG4gIHJldHVybiB0YXJnZXREb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodDtcbn1cblxuZnVuY3Rpb24gcGF0Y2hDbGFzcyhlbCwgdmFsdWUsIGlzU1ZHKSB7XG4gIGNvbnN0IHRyYW5zaXRpb25DbGFzc2VzID0gZWxbdnRjS2V5XTtcbiAgaWYgKHRyYW5zaXRpb25DbGFzc2VzKSB7XG4gICAgdmFsdWUgPSAodmFsdWUgPyBbdmFsdWUsIC4uLnRyYW5zaXRpb25DbGFzc2VzXSA6IFsuLi50cmFuc2l0aW9uQ2xhc3Nlc10pLmpvaW4oXCIgXCIpO1xuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgZWwucmVtb3ZlQXR0cmlidXRlKFwiY2xhc3NcIik7XG4gIH0gZWxzZSBpZiAoaXNTVkcpIHtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgZWwuY2xhc3NOYW1lID0gdmFsdWU7XG4gIH1cbn1cblxuY29uc3QgdlNob3dPcmlnaW5hbERpc3BsYXkgPSBTeW1ib2woXCJfdm9kXCIpO1xuY29uc3QgdlNob3dIaWRkZW4gPSBTeW1ib2woXCJfdnNoXCIpO1xuY29uc3QgdlNob3cgPSB7XG4gIC8vIHVzZWQgZm9yIHByb3AgbWlzbWF0Y2ggY2hlY2sgZHVyaW5nIGh5ZHJhdGlvblxuICBuYW1lOiBcInNob3dcIixcbiAgYmVmb3JlTW91bnQoZWwsIHsgdmFsdWUgfSwgeyB0cmFuc2l0aW9uIH0pIHtcbiAgICBlbFt2U2hvd09yaWdpbmFsRGlzcGxheV0gPSBlbC5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIiA/IFwiXCIgOiBlbC5zdHlsZS5kaXNwbGF5O1xuICAgIGlmICh0cmFuc2l0aW9uICYmIHZhbHVlKSB7XG4gICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0RGlzcGxheShlbCwgdmFsdWUpO1xuICAgIH1cbiAgfSxcbiAgbW91bnRlZChlbCwgeyB2YWx1ZSB9LCB7IHRyYW5zaXRpb24gfSkge1xuICAgIGlmICh0cmFuc2l0aW9uICYmIHZhbHVlKSB7XG4gICAgICB0cmFuc2l0aW9uLmVudGVyKGVsKTtcbiAgICB9XG4gIH0sXG4gIHVwZGF0ZWQoZWwsIHsgdmFsdWUsIG9sZFZhbHVlIH0sIHsgdHJhbnNpdGlvbiB9KSB7XG4gICAgaWYgKCF2YWx1ZSA9PT0gIW9sZFZhbHVlKSByZXR1cm47XG4gICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGVsKTtcbiAgICAgICAgc2V0RGlzcGxheShlbCwgdHJ1ZSk7XG4gICAgICAgIHRyYW5zaXRpb24uZW50ZXIoZWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJhbnNpdGlvbi5sZWF2ZShlbCwgKCkgPT4ge1xuICAgICAgICAgIHNldERpc3BsYXkoZWwsIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldERpc3BsYXkoZWwsIHZhbHVlKTtcbiAgICB9XG4gIH0sXG4gIGJlZm9yZVVubW91bnQoZWwsIHsgdmFsdWUgfSkge1xuICAgIHNldERpc3BsYXkoZWwsIHZhbHVlKTtcbiAgfVxufTtcbmZ1bmN0aW9uIHNldERpc3BsYXkoZWwsIHZhbHVlKSB7XG4gIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/IGVsW3ZTaG93T3JpZ2luYWxEaXNwbGF5XSA6IFwibm9uZVwiO1xuICBlbFt2U2hvd0hpZGRlbl0gPSAhdmFsdWU7XG59XG5mdW5jdGlvbiBpbml0VlNob3dGb3JTU1IoKSB7XG4gIHZTaG93LmdldFNTUlByb3BzID0gKHsgdmFsdWUgfSkgPT4ge1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHJldHVybiB7IHN0eWxlOiB7IGRpc3BsYXk6IFwibm9uZVwiIH0gfTtcbiAgICB9XG4gIH07XG59XG5cbmNvbnN0IENTU19WQVJfVEVYVCA9IFN5bWJvbCghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gXCJDU1NfVkFSX1RFWFRcIiA6IFwiXCIpO1xuZnVuY3Rpb24gdXNlQ3NzVmFycyhnZXR0ZXIpIHtcbiAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgaWYgKCFpbnN0YW5jZSkge1xuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybihgdXNlQ3NzVmFycyBpcyBjYWxsZWQgd2l0aG91dCBjdXJyZW50IGFjdGl2ZSBjb21wb25lbnQgaW5zdGFuY2UuYCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHVwZGF0ZVRlbGVwb3J0cyA9IGluc3RhbmNlLnV0ID0gKHZhcnMgPSBnZXR0ZXIoaW5zdGFuY2UucHJveHkpKSA9PiB7XG4gICAgQXJyYXkuZnJvbShcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFtkYXRhLXYtb3duZXI9XCIke2luc3RhbmNlLnVpZH1cIl1gKVxuICAgICkuZm9yRWFjaCgobm9kZSkgPT4gc2V0VmFyc09uTm9kZShub2RlLCB2YXJzKSk7XG4gIH07XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgaW5zdGFuY2UuZ2V0Q3NzVmFycyA9ICgpID0+IGdldHRlcihpbnN0YW5jZS5wcm94eSk7XG4gIH1cbiAgY29uc3Qgc2V0VmFycyA9ICgpID0+IHtcbiAgICBjb25zdCB2YXJzID0gZ2V0dGVyKGluc3RhbmNlLnByb3h5KTtcbiAgICBpZiAoaW5zdGFuY2UuY2UpIHtcbiAgICAgIHNldFZhcnNPbk5vZGUoaW5zdGFuY2UuY2UsIHZhcnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRWYXJzT25WTm9kZShpbnN0YW5jZS5zdWJUcmVlLCB2YXJzKTtcbiAgICB9XG4gICAgdXBkYXRlVGVsZXBvcnRzKHZhcnMpO1xuICB9O1xuICBvbkJlZm9yZVVwZGF0ZSgoKSA9PiB7XG4gICAgcXVldWVQb3N0Rmx1c2hDYihzZXRWYXJzKTtcbiAgfSk7XG4gIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgd2F0Y2goc2V0VmFycywgTk9PUCwgeyBmbHVzaDogXCJwb3N0XCIgfSk7XG4gICAgY29uc3Qgb2IgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihzZXRWYXJzKTtcbiAgICBvYi5vYnNlcnZlKGluc3RhbmNlLnN1YlRyZWUuZWwucGFyZW50Tm9kZSwgeyBjaGlsZExpc3Q6IHRydWUgfSk7XG4gICAgb25Vbm1vdW50ZWQoKCkgPT4gb2IuZGlzY29ubmVjdCgpKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBzZXRWYXJzT25WTm9kZSh2bm9kZSwgdmFycykge1xuICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgY29uc3Qgc3VzcGVuc2UgPSB2bm9kZS5zdXNwZW5zZTtcbiAgICB2bm9kZSA9IHN1c3BlbnNlLmFjdGl2ZUJyYW5jaDtcbiAgICBpZiAoc3VzcGVuc2UucGVuZGluZ0JyYW5jaCAmJiAhc3VzcGVuc2UuaXNIeWRyYXRpbmcpIHtcbiAgICAgIHN1c3BlbnNlLmVmZmVjdHMucHVzaCgoKSA9PiB7XG4gICAgICAgIHNldFZhcnNPblZOb2RlKHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCwgdmFycyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgd2hpbGUgKHZub2RlLmNvbXBvbmVudCkge1xuICAgIHZub2RlID0gdm5vZGUuY29tcG9uZW50LnN1YlRyZWU7XG4gIH1cbiAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEgJiYgdm5vZGUuZWwpIHtcbiAgICBzZXRWYXJzT25Ob2RlKHZub2RlLmVsLCB2YXJzKTtcbiAgfSBlbHNlIGlmICh2bm9kZS50eXBlID09PSBGcmFnbWVudCkge1xuICAgIHZub2RlLmNoaWxkcmVuLmZvckVhY2goKGMpID0+IHNldFZhcnNPblZOb2RlKGMsIHZhcnMpKTtcbiAgfSBlbHNlIGlmICh2bm9kZS50eXBlID09PSBTdGF0aWMpIHtcbiAgICBsZXQgeyBlbCwgYW5jaG9yIH0gPSB2bm9kZTtcbiAgICB3aGlsZSAoZWwpIHtcbiAgICAgIHNldFZhcnNPbk5vZGUoZWwsIHZhcnMpO1xuICAgICAgaWYgKGVsID09PSBhbmNob3IpIGJyZWFrO1xuICAgICAgZWwgPSBlbC5uZXh0U2libGluZztcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHNldFZhcnNPbk5vZGUoZWwsIHZhcnMpIHtcbiAgaWYgKGVsLm5vZGVUeXBlID09PSAxKSB7XG4gICAgY29uc3Qgc3R5bGUgPSBlbC5zdHlsZTtcbiAgICBsZXQgY3NzVGV4dCA9IFwiXCI7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdmFycykge1xuICAgICAgY29uc3QgdmFsdWUgPSBub3JtYWxpemVDc3NWYXJWYWx1ZSh2YXJzW2tleV0pO1xuICAgICAgc3R5bGUuc2V0UHJvcGVydHkoYC0tJHtrZXl9YCwgdmFsdWUpO1xuICAgICAgY3NzVGV4dCArPSBgLS0ke2tleX06ICR7dmFsdWV9O2A7XG4gICAgfVxuICAgIHN0eWxlW0NTU19WQVJfVEVYVF0gPSBjc3NUZXh0O1xuICB9XG59XG5cbmNvbnN0IGRpc3BsYXlSRSA9IC8oPzpefDspXFxzKmRpc3BsYXlcXHMqOi87XG5mdW5jdGlvbiBwYXRjaFN0eWxlKGVsLCBwcmV2LCBuZXh0KSB7XG4gIGNvbnN0IHN0eWxlID0gZWwuc3R5bGU7XG4gIGNvbnN0IGlzQ3NzU3RyaW5nID0gaXNTdHJpbmcobmV4dCk7XG4gIGxldCBoYXNDb250cm9sbGVkRGlzcGxheSA9IGZhbHNlO1xuICBpZiAobmV4dCAmJiAhaXNDc3NTdHJpbmcpIHtcbiAgICBpZiAocHJldikge1xuICAgICAgaWYgKCFpc1N0cmluZyhwcmV2KSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcmV2KSB7XG4gICAgICAgICAgaWYgKG5leHRba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICBzZXRTdHlsZShzdHlsZSwga2V5LCBcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJldlN0eWxlIG9mIHByZXYuc3BsaXQoXCI7XCIpKSB7XG4gICAgICAgICAgY29uc3Qga2V5ID0gcHJldlN0eWxlLnNsaWNlKDAsIHByZXZTdHlsZS5pbmRleE9mKFwiOlwiKSkudHJpbSgpO1xuICAgICAgICAgIGlmIChuZXh0W2tleV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgc2V0U3R5bGUoc3R5bGUsIGtleSwgXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIG5leHQpIHtcbiAgICAgIGlmIChrZXkgPT09IFwiZGlzcGxheVwiKSB7XG4gICAgICAgIGhhc0NvbnRyb2xsZWREaXNwbGF5ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHNldFN0eWxlKHN0eWxlLCBrZXksIG5leHRba2V5XSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChpc0Nzc1N0cmluZykge1xuICAgICAgaWYgKHByZXYgIT09IG5leHQpIHtcbiAgICAgICAgY29uc3QgY3NzVmFyVGV4dCA9IHN0eWxlW0NTU19WQVJfVEVYVF07XG4gICAgICAgIGlmIChjc3NWYXJUZXh0KSB7XG4gICAgICAgICAgbmV4dCArPSBcIjtcIiArIGNzc1ZhclRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgc3R5bGUuY3NzVGV4dCA9IG5leHQ7XG4gICAgICAgIGhhc0NvbnRyb2xsZWREaXNwbGF5ID0gZGlzcGxheVJFLnRlc3QobmV4dCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwcmV2KSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICB9XG4gIH1cbiAgaWYgKHZTaG93T3JpZ2luYWxEaXNwbGF5IGluIGVsKSB7XG4gICAgZWxbdlNob3dPcmlnaW5hbERpc3BsYXldID0gaGFzQ29udHJvbGxlZERpc3BsYXkgPyBzdHlsZS5kaXNwbGF5IDogXCJcIjtcbiAgICBpZiAoZWxbdlNob3dIaWRkZW5dKSB7XG4gICAgICBzdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuICB9XG59XG5jb25zdCBzZW1pY29sb25SRSA9IC9bXlxcXFxdO1xccyokLztcbmNvbnN0IGltcG9ydGFudFJFID0gL1xccyohaW1wb3J0YW50JC87XG5mdW5jdGlvbiBzZXRTdHlsZShzdHlsZSwgbmFtZSwgdmFsKSB7XG4gIGlmIChpc0FycmF5KHZhbCkpIHtcbiAgICB2YWwuZm9yRWFjaCgodikgPT4gc2V0U3R5bGUoc3R5bGUsIG5hbWUsIHYpKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodmFsID09IG51bGwpIHZhbCA9IFwiXCI7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIGlmIChzZW1pY29sb25SRS50ZXN0KHZhbCkpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBgVW5leHBlY3RlZCBzZW1pY29sb24gYXQgdGhlIGVuZCBvZiAnJHtuYW1lfScgc3R5bGUgdmFsdWU6ICcke3ZhbH0nYFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobmFtZS5zdGFydHNXaXRoKFwiLS1cIikpIHtcbiAgICAgIHN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHByZWZpeGVkID0gYXV0b1ByZWZpeChzdHlsZSwgbmFtZSk7XG4gICAgICBpZiAoaW1wb3J0YW50UkUudGVzdCh2YWwpKSB7XG4gICAgICAgIHN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAgIGh5cGhlbmF0ZShwcmVmaXhlZCksXG4gICAgICAgICAgdmFsLnJlcGxhY2UoaW1wb3J0YW50UkUsIFwiXCIpLFxuICAgICAgICAgIFwiaW1wb3J0YW50XCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlW3ByZWZpeGVkXSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmNvbnN0IHByZWZpeGVzID0gW1wiV2Via2l0XCIsIFwiTW96XCIsIFwibXNcIl07XG5jb25zdCBwcmVmaXhDYWNoZSA9IHt9O1xuZnVuY3Rpb24gYXV0b1ByZWZpeChzdHlsZSwgcmF3TmFtZSkge1xuICBjb25zdCBjYWNoZWQgPSBwcmVmaXhDYWNoZVtyYXdOYW1lXTtcbiAgaWYgKGNhY2hlZCkge1xuICAgIHJldHVybiBjYWNoZWQ7XG4gIH1cbiAgbGV0IG5hbWUgPSBjYW1lbGl6ZShyYXdOYW1lKTtcbiAgaWYgKG5hbWUgIT09IFwiZmlsdGVyXCIgJiYgbmFtZSBpbiBzdHlsZSkge1xuICAgIHJldHVybiBwcmVmaXhDYWNoZVtyYXdOYW1lXSA9IG5hbWU7XG4gIH1cbiAgbmFtZSA9IGNhcGl0YWxpemUobmFtZSk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBwcmVmaXhlZCA9IHByZWZpeGVzW2ldICsgbmFtZTtcbiAgICBpZiAocHJlZml4ZWQgaW4gc3R5bGUpIHtcbiAgICAgIHJldHVybiBwcmVmaXhDYWNoZVtyYXdOYW1lXSA9IHByZWZpeGVkO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmF3TmFtZTtcbn1cblxuY29uc3QgeGxpbmtOUyA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiO1xuZnVuY3Rpb24gcGF0Y2hBdHRyKGVsLCBrZXksIHZhbHVlLCBpc1NWRywgaW5zdGFuY2UsIGlzQm9vbGVhbiA9IGlzU3BlY2lhbEJvb2xlYW5BdHRyKGtleSkpIHtcbiAgaWYgKGlzU1ZHICYmIGtleS5zdGFydHNXaXRoKFwieGxpbms6XCIpKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZU5TKHhsaW5rTlMsIGtleS5zbGljZSg2LCBrZXkubGVuZ3RoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGtleSwgdmFsdWUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCBpc0Jvb2xlYW4gJiYgIWluY2x1ZGVCb29sZWFuQXR0cih2YWx1ZSkpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoXG4gICAgICAgIGtleSxcbiAgICAgICAgaXNCb29sZWFuID8gXCJcIiA6IGlzU3ltYm9sKHZhbHVlKSA/IFN0cmluZyh2YWx1ZSkgOiB2YWx1ZVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcGF0Y2hET01Qcm9wKGVsLCBrZXksIHZhbHVlLCBwYXJlbnRDb21wb25lbnQsIGF0dHJOYW1lKSB7XG4gIGlmIChrZXkgPT09IFwiaW5uZXJIVE1MXCIgfHwga2V5ID09PSBcInRleHRDb250ZW50XCIpIHtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgZWxba2V5XSA9IGtleSA9PT0gXCJpbm5lckhUTUxcIiA/IHVuc2FmZVRvVHJ1c3RlZEhUTUwodmFsdWUpIDogdmFsdWU7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB0YWcgPSBlbC50YWdOYW1lO1xuICBpZiAoa2V5ID09PSBcInZhbHVlXCIgJiYgdGFnICE9PSBcIlBST0dSRVNTXCIgJiYgLy8gY3VzdG9tIGVsZW1lbnRzIG1heSB1c2UgX3ZhbHVlIGludGVybmFsbHlcbiAgIXRhZy5pbmNsdWRlcyhcIi1cIikpIHtcbiAgICBjb25zdCBvbGRWYWx1ZSA9IHRhZyA9PT0gXCJPUFRJT05cIiA/IGVsLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpIHx8IFwiXCIgOiBlbC52YWx1ZTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlID09IG51bGwgPyAoXG4gICAgICAvLyAjMTE2NDc6IHZhbHVlIHNob3VsZCBiZSBzZXQgYXMgZW1wdHkgc3RyaW5nIGZvciBudWxsIGFuZCB1bmRlZmluZWQsXG4gICAgICAvLyBidXQgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiPiBzaG91bGQgYmUgc2V0IGFzICdvbicuXG4gICAgICBlbC50eXBlID09PSBcImNoZWNrYm94XCIgPyBcIm9uXCIgOiBcIlwiXG4gICAgKSA6IFN0cmluZyh2YWx1ZSk7XG4gICAgaWYgKG9sZFZhbHVlICE9PSBuZXdWYWx1ZSB8fCAhKFwiX3ZhbHVlXCIgaW4gZWwpKSB7XG4gICAgICBlbC52YWx1ZSA9IG5ld1ZhbHVlO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgfVxuICAgIGVsLl92YWx1ZSA9IHZhbHVlO1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgbmVlZFJlbW92ZSA9IGZhbHNlO1xuICBpZiAodmFsdWUgPT09IFwiXCIgfHwgdmFsdWUgPT0gbnVsbCkge1xuICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgZWxba2V5XTtcbiAgICBpZiAodHlwZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHZhbHVlID0gaW5jbHVkZUJvb2xlYW5BdHRyKHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlID09IG51bGwgJiYgdHlwZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgdmFsdWUgPSBcIlwiO1xuICAgICAgbmVlZFJlbW92ZSA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcIm51bWJlclwiKSB7XG4gICAgICB2YWx1ZSA9IDA7XG4gICAgICBuZWVkUmVtb3ZlID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgdHJ5IHtcbiAgICBlbFtrZXldID0gdmFsdWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhbmVlZFJlbW92ZSkge1xuICAgICAgd2FybihcbiAgICAgICAgYEZhaWxlZCBzZXR0aW5nIHByb3AgXCIke2tleX1cIiBvbiA8JHt0YWcudG9Mb3dlckNhc2UoKX0+OiB2YWx1ZSAke3ZhbHVlfSBpcyBpbnZhbGlkLmAsXG4gICAgICAgIGVcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIG5lZWRSZW1vdmUgJiYgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHJOYW1lIHx8IGtleSk7XG59XG5cbmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZWwsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcihlbCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG59XG5jb25zdCB2ZWlLZXkgPSBTeW1ib2woXCJfdmVpXCIpO1xuZnVuY3Rpb24gcGF0Y2hFdmVudChlbCwgcmF3TmFtZSwgcHJldlZhbHVlLCBuZXh0VmFsdWUsIGluc3RhbmNlID0gbnVsbCkge1xuICBjb25zdCBpbnZva2VycyA9IGVsW3ZlaUtleV0gfHwgKGVsW3ZlaUtleV0gPSB7fSk7XG4gIGNvbnN0IGV4aXN0aW5nSW52b2tlciA9IGludm9rZXJzW3Jhd05hbWVdO1xuICBpZiAobmV4dFZhbHVlICYmIGV4aXN0aW5nSW52b2tlcikge1xuICAgIGV4aXN0aW5nSW52b2tlci52YWx1ZSA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzYW5pdGl6ZUV2ZW50VmFsdWUobmV4dFZhbHVlLCByYXdOYW1lKSA6IG5leHRWYWx1ZTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBbbmFtZSwgb3B0aW9uc10gPSBwYXJzZU5hbWUocmF3TmFtZSk7XG4gICAgaWYgKG5leHRWYWx1ZSkge1xuICAgICAgY29uc3QgaW52b2tlciA9IGludm9rZXJzW3Jhd05hbWVdID0gY3JlYXRlSW52b2tlcihcbiAgICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHNhbml0aXplRXZlbnRWYWx1ZShuZXh0VmFsdWUsIHJhd05hbWUpIDogbmV4dFZhbHVlLFxuICAgICAgICBpbnN0YW5jZVxuICAgICAgKTtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsIG5hbWUsIGludm9rZXIsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAoZXhpc3RpbmdJbnZva2VyKSB7XG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKGVsLCBuYW1lLCBleGlzdGluZ0ludm9rZXIsIG9wdGlvbnMpO1xuICAgICAgaW52b2tlcnNbcmF3TmFtZV0gPSB2b2lkIDA7XG4gICAgfVxuICB9XG59XG5jb25zdCBvcHRpb25zTW9kaWZpZXJSRSA9IC8oPzpPbmNlfFBhc3NpdmV8Q2FwdHVyZSkkLztcbmZ1bmN0aW9uIHBhcnNlTmFtZShuYW1lKSB7XG4gIGxldCBvcHRpb25zO1xuICBpZiAob3B0aW9uc01vZGlmaWVyUkUudGVzdChuYW1lKSkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgICBsZXQgbTtcbiAgICB3aGlsZSAobSA9IG5hbWUubWF0Y2gob3B0aW9uc01vZGlmaWVyUkUpKSB7XG4gICAgICBuYW1lID0gbmFtZS5zbGljZSgwLCBuYW1lLmxlbmd0aCAtIG1bMF0ubGVuZ3RoKTtcbiAgICAgIG9wdGlvbnNbbVswXS50b0xvd2VyQ2FzZSgpXSA9IHRydWU7XG4gICAgfVxuICB9XG4gIGNvbnN0IGV2ZW50ID0gbmFtZVsyXSA9PT0gXCI6XCIgPyBuYW1lLnNsaWNlKDMpIDogaHlwaGVuYXRlKG5hbWUuc2xpY2UoMikpO1xuICByZXR1cm4gW2V2ZW50LCBvcHRpb25zXTtcbn1cbmxldCBjYWNoZWROb3cgPSAwO1xuY29uc3QgcCA9IC8qIEBfX1BVUkVfXyAqLyBQcm9taXNlLnJlc29sdmUoKTtcbmNvbnN0IGdldE5vdyA9ICgpID0+IGNhY2hlZE5vdyB8fCAocC50aGVuKCgpID0+IGNhY2hlZE5vdyA9IDApLCBjYWNoZWROb3cgPSBEYXRlLm5vdygpKTtcbmZ1bmN0aW9uIGNyZWF0ZUludm9rZXIoaW5pdGlhbFZhbHVlLCBpbnN0YW5jZSkge1xuICBjb25zdCBpbnZva2VyID0gKGUpID0+IHtcbiAgICBpZiAoIWUuX3Z0cykge1xuICAgICAgZS5fdnRzID0gRGF0ZS5ub3coKTtcbiAgICB9IGVsc2UgaWYgKGUuX3Z0cyA8PSBpbnZva2VyLmF0dGFjaGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKFxuICAgICAgcGF0Y2hTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oZSwgaW52b2tlci52YWx1ZSksXG4gICAgICBpbnN0YW5jZSxcbiAgICAgIDUsXG4gICAgICBbZV1cbiAgICApO1xuICB9O1xuICBpbnZva2VyLnZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICBpbnZva2VyLmF0dGFjaGVkID0gZ2V0Tm93KCk7XG4gIHJldHVybiBpbnZva2VyO1xufVxuZnVuY3Rpb24gc2FuaXRpemVFdmVudFZhbHVlKHZhbHVlLCBwcm9wTmFtZSkge1xuICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkgfHwgaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgd2FybihcbiAgICBgV3JvbmcgdHlwZSBwYXNzZWQgYXMgZXZlbnQgaGFuZGxlciB0byAke3Byb3BOYW1lfSAtIGRpZCB5b3UgZm9yZ2V0IEAgb3IgOiBpbiBmcm9udCBvZiB5b3VyIHByb3A/XG5FeHBlY3RlZCBmdW5jdGlvbiBvciBhcnJheSBvZiBmdW5jdGlvbnMsIHJlY2VpdmVkIHR5cGUgJHt0eXBlb2YgdmFsdWV9LmBcbiAgKTtcbiAgcmV0dXJuIE5PT1A7XG59XG5mdW5jdGlvbiBwYXRjaFN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbihlLCB2YWx1ZSkge1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBjb25zdCBvcmlnaW5hbFN0b3AgPSBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjtcbiAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiA9ICgpID0+IHtcbiAgICAgIG9yaWdpbmFsU3RvcC5jYWxsKGUpO1xuICAgICAgZS5fc3RvcHBlZCA9IHRydWU7XG4gICAgfTtcbiAgICByZXR1cm4gdmFsdWUubWFwKFxuICAgICAgKGZuKSA9PiAoZTIpID0+ICFlMi5fc3RvcHBlZCAmJiBmbiAmJiBmbihlMilcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufVxuXG5jb25zdCBpc05hdGl2ZU9uID0gKGtleSkgPT4ga2V5LmNoYXJDb2RlQXQoMCkgPT09IDExMSAmJiBrZXkuY2hhckNvZGVBdCgxKSA9PT0gMTEwICYmIC8vIGxvd2VyY2FzZSBsZXR0ZXJcbmtleS5jaGFyQ29kZUF0KDIpID4gOTYgJiYga2V5LmNoYXJDb2RlQXQoMikgPCAxMjM7XG5jb25zdCBwYXRjaFByb3AgPSAoZWwsIGtleSwgcHJldlZhbHVlLCBuZXh0VmFsdWUsIG5hbWVzcGFjZSwgcGFyZW50Q29tcG9uZW50KSA9PiB7XG4gIGNvbnN0IGlzU1ZHID0gbmFtZXNwYWNlID09PSBcInN2Z1wiO1xuICBpZiAoa2V5ID09PSBcImNsYXNzXCIpIHtcbiAgICBwYXRjaENsYXNzKGVsLCBuZXh0VmFsdWUsIGlzU1ZHKTtcbiAgfSBlbHNlIGlmIChrZXkgPT09IFwic3R5bGVcIikge1xuICAgIHBhdGNoU3R5bGUoZWwsIHByZXZWYWx1ZSwgbmV4dFZhbHVlKTtcbiAgfSBlbHNlIGlmIChpc09uKGtleSkpIHtcbiAgICBpZiAoIWlzTW9kZWxMaXN0ZW5lcihrZXkpKSB7XG4gICAgICBwYXRjaEV2ZW50KGVsLCBrZXksIHByZXZWYWx1ZSwgbmV4dFZhbHVlLCBwYXJlbnRDb21wb25lbnQpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChrZXlbMF0gPT09IFwiLlwiID8gKGtleSA9IGtleS5zbGljZSgxKSwgdHJ1ZSkgOiBrZXlbMF0gPT09IFwiXlwiID8gKGtleSA9IGtleS5zbGljZSgxKSwgZmFsc2UpIDogc2hvdWxkU2V0QXNQcm9wKGVsLCBrZXksIG5leHRWYWx1ZSwgaXNTVkcpKSB7XG4gICAgcGF0Y2hET01Qcm9wKGVsLCBrZXksIG5leHRWYWx1ZSk7XG4gICAgaWYgKCFlbC50YWdOYW1lLmluY2x1ZGVzKFwiLVwiKSAmJiAoa2V5ID09PSBcInZhbHVlXCIgfHwga2V5ID09PSBcImNoZWNrZWRcIiB8fCBrZXkgPT09IFwic2VsZWN0ZWRcIikpIHtcbiAgICAgIHBhdGNoQXR0cihlbCwga2V5LCBuZXh0VmFsdWUsIGlzU1ZHLCBwYXJlbnRDb21wb25lbnQsIGtleSAhPT0gXCJ2YWx1ZVwiKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoXG4gICAgLy8gIzExMDgxIGZvcmNlIHNldCBwcm9wcyBmb3IgcG9zc2libGUgYXN5bmMgY3VzdG9tIGVsZW1lbnRcbiAgICBlbC5faXNWdWVDRSAmJiAoL1tBLVpdLy50ZXN0KGtleSkgfHwgIWlzU3RyaW5nKG5leHRWYWx1ZSkpXG4gICkge1xuICAgIHBhdGNoRE9NUHJvcChlbCwgY2FtZWxpemUkMShrZXkpLCBuZXh0VmFsdWUsIHBhcmVudENvbXBvbmVudCwga2V5KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoa2V5ID09PSBcInRydWUtdmFsdWVcIikge1xuICAgICAgZWwuX3RydWVWYWx1ZSA9IG5leHRWYWx1ZTtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJmYWxzZS12YWx1ZVwiKSB7XG4gICAgICBlbC5fZmFsc2VWYWx1ZSA9IG5leHRWYWx1ZTtcbiAgICB9XG4gICAgcGF0Y2hBdHRyKGVsLCBrZXksIG5leHRWYWx1ZSwgaXNTVkcpO1xuICB9XG59O1xuZnVuY3Rpb24gc2hvdWxkU2V0QXNQcm9wKGVsLCBrZXksIHZhbHVlLCBpc1NWRykge1xuICBpZiAoaXNTVkcpIHtcbiAgICBpZiAoa2V5ID09PSBcImlubmVySFRNTFwiIHx8IGtleSA9PT0gXCJ0ZXh0Q29udGVudFwiKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGtleSBpbiBlbCAmJiBpc05hdGl2ZU9uKGtleSkgJiYgaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGtleSA9PT0gXCJzcGVsbGNoZWNrXCIgfHwga2V5ID09PSBcImRyYWdnYWJsZVwiIHx8IGtleSA9PT0gXCJ0cmFuc2xhdGVcIiB8fCBrZXkgPT09IFwiYXV0b2NvcnJlY3RcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoa2V5ID09PSBcInNhbmRib3hcIiAmJiBlbC50YWdOYW1lID09PSBcIklGUkFNRVwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChrZXkgPT09IFwiZm9ybVwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChrZXkgPT09IFwibGlzdFwiICYmIGVsLnRhZ05hbWUgPT09IFwiSU5QVVRcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoa2V5ID09PSBcInR5cGVcIiAmJiBlbC50YWdOYW1lID09PSBcIlRFWFRBUkVBXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGtleSA9PT0gXCJ3aWR0aFwiIHx8IGtleSA9PT0gXCJoZWlnaHRcIikge1xuICAgIGNvbnN0IHRhZyA9IGVsLnRhZ05hbWU7XG4gICAgaWYgKHRhZyA9PT0gXCJJTUdcIiB8fCB0YWcgPT09IFwiVklERU9cIiB8fCB0YWcgPT09IFwiQ0FOVkFTXCIgfHwgdGFnID09PSBcIlNPVVJDRVwiKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIGlmIChpc05hdGl2ZU9uKGtleSkgJiYgaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBrZXkgaW4gZWw7XG59XG5cbmNvbnN0IFJFTU9WQUwgPSB7fTtcbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5mdW5jdGlvbiBkZWZpbmVDdXN0b21FbGVtZW50KG9wdGlvbnMsIGV4dHJhT3B0aW9ucywgX2NyZWF0ZUFwcCkge1xuICBsZXQgQ29tcCA9IGRlZmluZUNvbXBvbmVudChvcHRpb25zLCBleHRyYU9wdGlvbnMpO1xuICBpZiAoaXNQbGFpbk9iamVjdChDb21wKSkgQ29tcCA9IGV4dGVuZCh7fSwgQ29tcCwgZXh0cmFPcHRpb25zKTtcbiAgY2xhc3MgVnVlQ3VzdG9tRWxlbWVudCBleHRlbmRzIFZ1ZUVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGluaXRpYWxQcm9wcykge1xuICAgICAgc3VwZXIoQ29tcCwgaW5pdGlhbFByb3BzLCBfY3JlYXRlQXBwKTtcbiAgICB9XG4gIH1cbiAgVnVlQ3VzdG9tRWxlbWVudC5kZWYgPSBDb21wO1xuICByZXR1cm4gVnVlQ3VzdG9tRWxlbWVudDtcbn1cbmNvbnN0IGRlZmluZVNTUkN1c3RvbUVsZW1lbnQgPSAoLyogQF9fTk9fU0lERV9FRkZFQ1RTX18gKi8gKG9wdGlvbnMsIGV4dHJhT3B0aW9ucykgPT4ge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGRlZmluZUN1c3RvbUVsZW1lbnQob3B0aW9ucywgZXh0cmFPcHRpb25zLCBjcmVhdGVTU1JBcHApO1xufSk7XG5jb25zdCBCYXNlQ2xhc3MgPSB0eXBlb2YgSFRNTEVsZW1lbnQgIT09IFwidW5kZWZpbmVkXCIgPyBIVE1MRWxlbWVudCA6IGNsYXNzIHtcbn07XG5jbGFzcyBWdWVFbGVtZW50IGV4dGVuZHMgQmFzZUNsYXNzIHtcbiAgY29uc3RydWN0b3IoX2RlZiwgX3Byb3BzID0ge30sIF9jcmVhdGVBcHAgPSBjcmVhdGVBcHApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2RlZiA9IF9kZWY7XG4gICAgdGhpcy5fcHJvcHMgPSBfcHJvcHM7XG4gICAgdGhpcy5fY3JlYXRlQXBwID0gX2NyZWF0ZUFwcDtcbiAgICB0aGlzLl9pc1Z1ZUNFID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLl9pbnN0YW5jZSA9IG51bGw7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5fYXBwID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLl9ub25jZSA9IHRoaXMuX2RlZi5ub25jZTtcbiAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9yZXNvbHZlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3BhdGNoaW5nID0gZmFsc2U7XG4gICAgdGhpcy5fZGlydHkgPSBmYWxzZTtcbiAgICB0aGlzLl9udW1iZXJQcm9wcyA9IG51bGw7XG4gICAgdGhpcy5fc3R5bGVDaGlsZHJlbiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpO1xuICAgIHRoaXMuX29iID0gbnVsbDtcbiAgICBpZiAodGhpcy5zaGFkb3dSb290ICYmIF9jcmVhdGVBcHAgIT09IGNyZWF0ZUFwcCkge1xuICAgICAgdGhpcy5fcm9vdCA9IHRoaXMuc2hhZG93Um9vdDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdGhpcy5zaGFkb3dSb290KSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgYEN1c3RvbSBlbGVtZW50IGhhcyBwcmUtcmVuZGVyZWQgZGVjbGFyYXRpdmUgc2hhZG93IHJvb3QgYnV0IGlzIG5vdCBkZWZpbmVkIGFzIGh5ZHJhdGFibGUuIFVzZSBcXGBkZWZpbmVTU1JDdXN0b21FbGVtZW50XFxgLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChfZGVmLnNoYWRvd1Jvb3QgIT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuYXR0YWNoU2hhZG93KFxuICAgICAgICAgIGV4dGVuZCh7fSwgX2RlZi5zaGFkb3dSb290T3B0aW9ucywge1xuICAgICAgICAgICAgbW9kZTogXCJvcGVuXCJcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICB0aGlzLl9yb290ID0gdGhpcy5zaGFkb3dSb290O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcm9vdCA9IHRoaXM7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZCkgcmV0dXJuO1xuICAgIGlmICghdGhpcy5zaGFkb3dSb290ICYmICF0aGlzLl9yZXNvbHZlZCkge1xuICAgICAgdGhpcy5fcGFyc2VTbG90cygpO1xuICAgIH1cbiAgICB0aGlzLl9jb25uZWN0ZWQgPSB0cnVlO1xuICAgIGxldCBwYXJlbnQgPSB0aGlzO1xuICAgIHdoaWxlIChwYXJlbnQgPSBwYXJlbnQgJiYgKHBhcmVudC5wYXJlbnROb2RlIHx8IHBhcmVudC5ob3N0KSkge1xuICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIFZ1ZUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLl9pbnN0YW5jZSkge1xuICAgICAgaWYgKHRoaXMuX3Jlc29sdmVkKSB7XG4gICAgICAgIHRoaXMuX21vdW50KHRoaXMuX2RlZik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocGFyZW50ICYmIHBhcmVudC5fcGVuZGluZ1Jlc29sdmUpIHtcbiAgICAgICAgICB0aGlzLl9wZW5kaW5nUmVzb2x2ZSA9IHBhcmVudC5fcGVuZGluZ1Jlc29sdmUudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9wZW5kaW5nUmVzb2x2ZSA9IHZvaWQgMDtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVEZWYoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9yZXNvbHZlRGVmKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX3NldFBhcmVudChwYXJlbnQgPSB0aGlzLl9wYXJlbnQpIHtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICB0aGlzLl9pbnN0YW5jZS5wYXJlbnQgPSBwYXJlbnQuX2luc3RhbmNlO1xuICAgICAgdGhpcy5faW5oZXJpdFBhcmVudENvbnRleHQocGFyZW50KTtcbiAgICB9XG4gIH1cbiAgX2luaGVyaXRQYXJlbnRDb250ZXh0KHBhcmVudCA9IHRoaXMuX3BhcmVudCkge1xuICAgIGlmIChwYXJlbnQgJiYgdGhpcy5fYXBwKSB7XG4gICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoXG4gICAgICAgIHRoaXMuX2FwcC5fY29udGV4dC5wcm92aWRlcyxcbiAgICAgICAgcGFyZW50Ll9pbnN0YW5jZS5wcm92aWRlc1xuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XG4gICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9jb25uZWN0ZWQpIHtcbiAgICAgICAgaWYgKHRoaXMuX29iKSB7XG4gICAgICAgICAgdGhpcy5fb2IuZGlzY29ubmVjdCgpO1xuICAgICAgICAgIHRoaXMuX29iID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hcHAgJiYgdGhpcy5fYXBwLnVubW91bnQoKTtcbiAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNlKSB0aGlzLl9pbnN0YW5jZS5jZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5fYXBwID0gdGhpcy5faW5zdGFuY2UgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5fdGVsZXBvcnRUYXJnZXRzKSB7XG4gICAgICAgICAgdGhpcy5fdGVsZXBvcnRUYXJnZXRzLmNsZWFyKCk7XG4gICAgICAgICAgdGhpcy5fdGVsZXBvcnRUYXJnZXRzID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgX3Byb2Nlc3NNdXRhdGlvbnMobXV0YXRpb25zKSB7XG4gICAgZm9yIChjb25zdCBtIG9mIG11dGF0aW9ucykge1xuICAgICAgdGhpcy5fc2V0QXR0cihtLmF0dHJpYnV0ZU5hbWUpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogcmVzb2x2ZSBpbm5lciBjb21wb25lbnQgZGVmaW5pdGlvbiAoaGFuZGxlIHBvc3NpYmxlIGFzeW5jIGNvbXBvbmVudClcbiAgICovXG4gIF9yZXNvbHZlRGVmKCkge1xuICAgIGlmICh0aGlzLl9wZW5kaW5nUmVzb2x2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5fc2V0QXR0cih0aGlzLmF0dHJpYnV0ZXNbaV0ubmFtZSk7XG4gICAgfVxuICAgIHRoaXMuX29iID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5fcHJvY2Vzc011dGF0aW9ucy5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLl9vYi5vYnNlcnZlKHRoaXMsIHsgYXR0cmlidXRlczogdHJ1ZSB9KTtcbiAgICBjb25zdCByZXNvbHZlID0gKGRlZiwgaXNBc3luYyA9IGZhbHNlKSA9PiB7XG4gICAgICB0aGlzLl9yZXNvbHZlZCA9IHRydWU7XG4gICAgICB0aGlzLl9wZW5kaW5nUmVzb2x2ZSA9IHZvaWQgMDtcbiAgICAgIGNvbnN0IHsgcHJvcHMsIHN0eWxlcyB9ID0gZGVmO1xuICAgICAgbGV0IG51bWJlclByb3BzO1xuICAgICAgaWYgKHByb3BzICYmICFpc0FycmF5KHByb3BzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgICAgIGNvbnN0IG9wdCA9IHByb3BzW2tleV07XG4gICAgICAgICAgaWYgKG9wdCA9PT0gTnVtYmVyIHx8IG9wdCAmJiBvcHQudHlwZSA9PT0gTnVtYmVyKSB7XG4gICAgICAgICAgICBpZiAoa2V5IGluIHRoaXMuX3Byb3BzKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3Byb3BzW2tleV0gPSB0b051bWJlcih0aGlzLl9wcm9wc1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIChudW1iZXJQcm9wcyB8fCAobnVtYmVyUHJvcHMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKSkpW2NhbWVsaXplJDEoa2V5KV0gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fbnVtYmVyUHJvcHMgPSBudW1iZXJQcm9wcztcbiAgICAgIHRoaXMuX3Jlc29sdmVQcm9wcyhkZWYpO1xuICAgICAgaWYgKHRoaXMuc2hhZG93Um9vdCkge1xuICAgICAgICB0aGlzLl9hcHBseVN0eWxlcyhzdHlsZXMpO1xuICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHN0eWxlcykge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIFwiQ3VzdG9tIGVsZW1lbnQgc3R5bGUgaW5qZWN0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgd2hlbiB1c2luZyBzaGFkb3dSb290OiBmYWxzZVwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aGlzLl9tb3VudChkZWYpO1xuICAgIH07XG4gICAgY29uc3QgYXN5bmNEZWYgPSB0aGlzLl9kZWYuX19hc3luY0xvYWRlcjtcbiAgICBpZiAoYXN5bmNEZWYpIHtcbiAgICAgIHRoaXMuX3BlbmRpbmdSZXNvbHZlID0gYXN5bmNEZWYoKS50aGVuKChkZWYpID0+IHtcbiAgICAgICAgZGVmLmNvbmZpZ3VyZUFwcCA9IHRoaXMuX2RlZi5jb25maWd1cmVBcHA7XG4gICAgICAgIHJlc29sdmUodGhpcy5fZGVmID0gZGVmLCB0cnVlKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlKHRoaXMuX2RlZik7XG4gICAgfVxuICB9XG4gIF9tb3VudChkZWYpIHtcbiAgICBpZiAoKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSAmJiAhZGVmLm5hbWUpIHtcbiAgICAgIGRlZi5uYW1lID0gXCJWdWVFbGVtZW50XCI7XG4gICAgfVxuICAgIHRoaXMuX2FwcCA9IHRoaXMuX2NyZWF0ZUFwcChkZWYpO1xuICAgIHRoaXMuX2luaGVyaXRQYXJlbnRDb250ZXh0KCk7XG4gICAgaWYgKGRlZi5jb25maWd1cmVBcHApIHtcbiAgICAgIGRlZi5jb25maWd1cmVBcHAodGhpcy5fYXBwKTtcbiAgICB9XG4gICAgdGhpcy5fYXBwLl9jZVZOb2RlID0gdGhpcy5fY3JlYXRlVk5vZGUoKTtcbiAgICB0aGlzLl9hcHAubW91bnQodGhpcy5fcm9vdCk7XG4gICAgY29uc3QgZXhwb3NlZCA9IHRoaXMuX2luc3RhbmNlICYmIHRoaXMuX2luc3RhbmNlLmV4cG9zZWQ7XG4gICAgaWYgKCFleHBvc2VkKSByZXR1cm47XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZXhwb3NlZCkge1xuICAgICAgaWYgKCFoYXNPd24odGhpcywga2V5KSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCB7XG4gICAgICAgICAgLy8gdW53cmFwIHJlZiB0byBiZSBjb25zaXN0ZW50IHdpdGggcHVibGljIGluc3RhbmNlIGJlaGF2aW9yXG4gICAgICAgICAgZ2V0OiAoKSA9PiB1bnJlZihleHBvc2VkW2tleV0pXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgIHdhcm4oYEV4cG9zZWQgcHJvcGVydHkgXCIke2tleX1cIiBhbHJlYWR5IGV4aXN0cyBvbiBjdXN0b20gZWxlbWVudC5gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX3Jlc29sdmVQcm9wcyhkZWYpIHtcbiAgICBjb25zdCB7IHByb3BzIH0gPSBkZWY7XG4gICAgY29uc3QgZGVjbGFyZWRQcm9wS2V5cyA9IGlzQXJyYXkocHJvcHMpID8gcHJvcHMgOiBPYmplY3Qua2V5cyhwcm9wcyB8fCB7fSk7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModGhpcykpIHtcbiAgICAgIGlmIChrZXlbMF0gIT09IFwiX1wiICYmIGRlY2xhcmVkUHJvcEtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICB0aGlzLl9zZXRQcm9wKGtleSwgdGhpc1trZXldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgZGVjbGFyZWRQcm9wS2V5cy5tYXAoY2FtZWxpemUkMSkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIHtcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRQcm9wKGtleSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCh2YWwpIHtcbiAgICAgICAgICB0aGlzLl9zZXRQcm9wKGtleSwgdmFsLCB0cnVlLCAhdGhpcy5fcGF0Y2hpbmcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgX3NldEF0dHIoa2V5KSB7XG4gICAgaWYgKGtleS5zdGFydHNXaXRoKFwiZGF0YS12LVwiKSkgcmV0dXJuO1xuICAgIGNvbnN0IGhhcyA9IHRoaXMuaGFzQXR0cmlidXRlKGtleSk7XG4gICAgbGV0IHZhbHVlID0gaGFzID8gdGhpcy5nZXRBdHRyaWJ1dGUoa2V5KSA6IFJFTU9WQUw7XG4gICAgY29uc3QgY2FtZWxLZXkgPSBjYW1lbGl6ZSQxKGtleSk7XG4gICAgaWYgKGhhcyAmJiB0aGlzLl9udW1iZXJQcm9wcyAmJiB0aGlzLl9udW1iZXJQcm9wc1tjYW1lbEtleV0pIHtcbiAgICAgIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xuICAgIH1cbiAgICB0aGlzLl9zZXRQcm9wKGNhbWVsS2V5LCB2YWx1ZSwgZmFsc2UsIHRydWUpO1xuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9nZXRQcm9wKGtleSkge1xuICAgIHJldHVybiB0aGlzLl9wcm9wc1trZXldO1xuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9zZXRQcm9wKGtleSwgdmFsLCBzaG91bGRSZWZsZWN0ID0gdHJ1ZSwgc2hvdWxkVXBkYXRlID0gZmFsc2UpIHtcbiAgICBpZiAodmFsICE9PSB0aGlzLl9wcm9wc1trZXldKSB7XG4gICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICBpZiAodmFsID09PSBSRU1PVkFMKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9wcm9wc1trZXldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcHJvcHNba2V5XSA9IHZhbDtcbiAgICAgICAgaWYgKGtleSA9PT0gXCJrZXlcIiAmJiB0aGlzLl9hcHApIHtcbiAgICAgICAgICB0aGlzLl9hcHAuX2NlVk5vZGUua2V5ID0gdmFsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc2hvdWxkVXBkYXRlICYmIHRoaXMuX2luc3RhbmNlKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgICAgfVxuICAgICAgaWYgKHNob3VsZFJlZmxlY3QpIHtcbiAgICAgICAgY29uc3Qgb2IgPSB0aGlzLl9vYjtcbiAgICAgICAgaWYgKG9iKSB7XG4gICAgICAgICAgdGhpcy5fcHJvY2Vzc011dGF0aW9ucyhvYi50YWtlUmVjb3JkcygpKTtcbiAgICAgICAgICBvYi5kaXNjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGh5cGhlbmF0ZShrZXkpLCBcIlwiKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShoeXBoZW5hdGUoa2V5KSwgdmFsICsgXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoIXZhbCkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGh5cGhlbmF0ZShrZXkpKTtcbiAgICAgICAgfVxuICAgICAgICBvYiAmJiBvYi5vYnNlcnZlKHRoaXMsIHsgYXR0cmlidXRlczogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX3VwZGF0ZSgpIHtcbiAgICBjb25zdCB2bm9kZSA9IHRoaXMuX2NyZWF0ZVZOb2RlKCk7XG4gICAgaWYgKHRoaXMuX2FwcCkgdm5vZGUuYXBwQ29udGV4dCA9IHRoaXMuX2FwcC5fY29udGV4dDtcbiAgICByZW5kZXIodm5vZGUsIHRoaXMuX3Jvb3QpO1xuICB9XG4gIF9jcmVhdGVWTm9kZSgpIHtcbiAgICBjb25zdCBiYXNlUHJvcHMgPSB7fTtcbiAgICBpZiAoIXRoaXMuc2hhZG93Um9vdCkge1xuICAgICAgYmFzZVByb3BzLm9uVm5vZGVNb3VudGVkID0gYmFzZVByb3BzLm9uVm5vZGVVcGRhdGVkID0gdGhpcy5fcmVuZGVyU2xvdHMuYmluZCh0aGlzKTtcbiAgICB9XG4gICAgY29uc3Qgdm5vZGUgPSBjcmVhdGVWTm9kZSh0aGlzLl9kZWYsIGV4dGVuZChiYXNlUHJvcHMsIHRoaXMuX3Byb3BzKSk7XG4gICAgaWYgKCF0aGlzLl9pbnN0YW5jZSkge1xuICAgICAgdm5vZGUuY2UgPSAoaW5zdGFuY2UpID0+IHtcbiAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBpbnN0YW5jZTtcbiAgICAgICAgaW5zdGFuY2UuY2UgPSB0aGlzO1xuICAgICAgICBpbnN0YW5jZS5pc0NFID0gdHJ1ZTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBpbnN0YW5jZS5jZVJlbG9hZCA9IChuZXdTdHlsZXMpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zdHlsZXMpIHtcbiAgICAgICAgICAgICAgdGhpcy5fc3R5bGVzLmZvckVhY2goKHMpID0+IHRoaXMuX3Jvb3QucmVtb3ZlQ2hpbGQocykpO1xuICAgICAgICAgICAgICB0aGlzLl9zdHlsZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2FwcGx5U3R5bGVzKG5ld1N0eWxlcyk7XG4gICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRpc3BhdGNoID0gKGV2ZW50LCBhcmdzKSA9PiB7XG4gICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KFxuICAgICAgICAgICAgICBldmVudCxcbiAgICAgICAgICAgICAgaXNQbGFpbk9iamVjdChhcmdzWzBdKSA/IGV4dGVuZCh7IGRldGFpbDogYXJncyB9LCBhcmdzWzBdKSA6IHsgZGV0YWlsOiBhcmdzIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICB9O1xuICAgICAgICBpbnN0YW5jZS5lbWl0ID0gKGV2ZW50LCAuLi5hcmdzKSA9PiB7XG4gICAgICAgICAgZGlzcGF0Y2goZXZlbnQsIGFyZ3MpO1xuICAgICAgICAgIGlmIChoeXBoZW5hdGUoZXZlbnQpICE9PSBldmVudCkge1xuICAgICAgICAgICAgZGlzcGF0Y2goaHlwaGVuYXRlKGV2ZW50KSwgYXJncyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9zZXRQYXJlbnQoKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB2bm9kZTtcbiAgfVxuICBfYXBwbHlTdHlsZXMoc3R5bGVzLCBvd25lcikge1xuICAgIGlmICghc3R5bGVzKSByZXR1cm47XG4gICAgaWYgKG93bmVyKSB7XG4gICAgICBpZiAob3duZXIgPT09IHRoaXMuX2RlZiB8fCB0aGlzLl9zdHlsZUNoaWxkcmVuLmhhcyhvd25lcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5fc3R5bGVDaGlsZHJlbi5hZGQob3duZXIpO1xuICAgIH1cbiAgICBjb25zdCBub25jZSA9IHRoaXMuX25vbmNlO1xuICAgIGZvciAobGV0IGkgPSBzdHlsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICBpZiAobm9uY2UpIHMuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgbm9uY2UpO1xuICAgICAgcy50ZXh0Q29udGVudCA9IHN0eWxlc1tpXTtcbiAgICAgIHRoaXMuc2hhZG93Um9vdC5wcmVwZW5kKHMpO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgaWYgKG93bmVyKSB7XG4gICAgICAgICAgaWYgKG93bmVyLl9faG1ySWQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fY2hpbGRTdHlsZXMpIHRoaXMuX2NoaWxkU3R5bGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgICAgICAgIGxldCBlbnRyeSA9IHRoaXMuX2NoaWxkU3R5bGVzLmdldChvd25lci5fX2htcklkKTtcbiAgICAgICAgICAgIGlmICghZW50cnkpIHtcbiAgICAgICAgICAgICAgdGhpcy5fY2hpbGRTdHlsZXMuc2V0KG93bmVyLl9faG1ySWQsIGVudHJ5ID0gW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZW50cnkucHVzaChzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgKHRoaXMuX3N0eWxlcyB8fCAodGhpcy5fc3R5bGVzID0gW10pKS5wdXNoKHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBPbmx5IGNhbGxlZCB3aGVuIHNoYWRvd1Jvb3QgaXMgZmFsc2VcbiAgICovXG4gIF9wYXJzZVNsb3RzKCkge1xuICAgIGNvbnN0IHNsb3RzID0gdGhpcy5fc2xvdHMgPSB7fTtcbiAgICBsZXQgbjtcbiAgICB3aGlsZSAobiA9IHRoaXMuZmlyc3RDaGlsZCkge1xuICAgICAgY29uc3Qgc2xvdE5hbWUgPSBuLm5vZGVUeXBlID09PSAxICYmIG4uZ2V0QXR0cmlidXRlKFwic2xvdFwiKSB8fCBcImRlZmF1bHRcIjtcbiAgICAgIChzbG90c1tzbG90TmFtZV0gfHwgKHNsb3RzW3Nsb3ROYW1lXSA9IFtdKSkucHVzaChuKTtcbiAgICAgIHRoaXMucmVtb3ZlQ2hpbGQobik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBPbmx5IGNhbGxlZCB3aGVuIHNoYWRvd1Jvb3QgaXMgZmFsc2VcbiAgICovXG4gIF9yZW5kZXJTbG90cygpIHtcbiAgICBjb25zdCBvdXRsZXRzID0gdGhpcy5fZ2V0U2xvdHMoKTtcbiAgICBjb25zdCBzY29wZUlkID0gdGhpcy5faW5zdGFuY2UudHlwZS5fX3Njb3BlSWQ7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXRsZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBvID0gb3V0bGV0c1tpXTtcbiAgICAgIGNvbnN0IHNsb3ROYW1lID0gby5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpIHx8IFwiZGVmYXVsdFwiO1xuICAgICAgY29uc3QgY29udGVudCA9IHRoaXMuX3Nsb3RzW3Nsb3ROYW1lXTtcbiAgICAgIGNvbnN0IHBhcmVudCA9IG8ucGFyZW50Tm9kZTtcbiAgICAgIGlmIChjb250ZW50KSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBjb250ZW50KSB7XG4gICAgICAgICAgaWYgKHNjb3BlSWQgJiYgbi5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBzY29wZUlkICsgXCItc1wiO1xuICAgICAgICAgICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihuLCAxKTtcbiAgICAgICAgICAgIG4uc2V0QXR0cmlidXRlKGlkLCBcIlwiKTtcbiAgICAgICAgICAgIGxldCBjaGlsZDtcbiAgICAgICAgICAgIHdoaWxlIChjaGlsZCA9IHdhbGtlci5uZXh0Tm9kZSgpKSB7XG4gICAgICAgICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZShpZCwgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUobiwgbyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdoaWxlIChvLmZpcnN0Q2hpbGQpIHBhcmVudC5pbnNlcnRCZWZvcmUoby5maXJzdENoaWxkLCBvKTtcbiAgICAgIH1cbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChvKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX2dldFNsb3RzKCkge1xuICAgIGNvbnN0IHJvb3RzID0gW3RoaXNdO1xuICAgIGlmICh0aGlzLl90ZWxlcG9ydFRhcmdldHMpIHtcbiAgICAgIHJvb3RzLnB1c2goLi4udGhpcy5fdGVsZXBvcnRUYXJnZXRzKTtcbiAgICB9XG4gICAgY29uc3Qgc2xvdHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3Qgcm9vdCBvZiByb290cykge1xuICAgICAgY29uc3QgZm91bmQgPSByb290LnF1ZXJ5U2VsZWN0b3JBbGwoXCJzbG90XCIpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3VuZC5sZW5ndGg7IGkrKykge1xuICAgICAgICBzbG90cy5hZGQoZm91bmRbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gQXJyYXkuZnJvbShzbG90cyk7XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX2luamVjdENoaWxkU3R5bGUoY29tcCkge1xuICAgIHRoaXMuX2FwcGx5U3R5bGVzKGNvbXAuc3R5bGVzLCBjb21wKTtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBfYmVnaW5QYXRjaCgpIHtcbiAgICB0aGlzLl9wYXRjaGluZyA9IHRydWU7XG4gICAgdGhpcy5fZGlydHkgPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBfZW5kUGF0Y2goKSB7XG4gICAgdGhpcy5fcGF0Y2hpbmcgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5fZGlydHkgJiYgdGhpcy5faW5zdGFuY2UpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBfcmVtb3ZlQ2hpbGRTdHlsZShjb21wKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHRoaXMuX3N0eWxlQ2hpbGRyZW4uZGVsZXRlKGNvbXApO1xuICAgICAgaWYgKHRoaXMuX2NoaWxkU3R5bGVzICYmIGNvbXAuX19obXJJZCkge1xuICAgICAgICBjb25zdCBvbGRTdHlsZXMgPSB0aGlzLl9jaGlsZFN0eWxlcy5nZXQoY29tcC5fX2htcklkKTtcbiAgICAgICAgaWYgKG9sZFN0eWxlcykge1xuICAgICAgICAgIG9sZFN0eWxlcy5mb3JFYWNoKChzKSA9PiB0aGlzLl9yb290LnJlbW92ZUNoaWxkKHMpKTtcbiAgICAgICAgICBvbGRTdHlsZXMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gdXNlSG9zdChjYWxsZXIpIHtcbiAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgY29uc3QgZWwgPSBpbnN0YW5jZSAmJiBpbnN0YW5jZS5jZTtcbiAgaWYgKGVsKSB7XG4gICAgcmV0dXJuIGVsO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBpZiAoIWluc3RhbmNlKSB7XG4gICAgICB3YXJuKFxuICAgICAgICBgJHtjYWxsZXIgfHwgXCJ1c2VIb3N0XCJ9IGNhbGxlZCB3aXRob3V0IGFuIGFjdGl2ZSBjb21wb25lbnQgaW5zdGFuY2UuYFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2FybihcbiAgICAgICAgYCR7Y2FsbGVyIHx8IFwidXNlSG9zdFwifSBjYW4gb25seSBiZSB1c2VkIGluIGNvbXBvbmVudHMgZGVmaW5lZCB2aWEgZGVmaW5lQ3VzdG9tRWxlbWVudC5gXG4gICAgICApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIHVzZVNoYWRvd1Jvb3QoKSB7XG4gIGNvbnN0IGVsID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHVzZUhvc3QoXCJ1c2VTaGFkb3dSb290XCIpIDogdXNlSG9zdCgpO1xuICByZXR1cm4gZWwgJiYgZWwuc2hhZG93Um9vdDtcbn1cblxuZnVuY3Rpb24gdXNlQ3NzTW9kdWxlKG5hbWUgPSBcIiRzdHlsZVwiKSB7XG4gIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIGlmICghaW5zdGFuY2UpIHtcbiAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybihgdXNlQ3NzTW9kdWxlIG11c3QgYmUgY2FsbGVkIGluc2lkZSBzZXR1cCgpYCk7XG4gICAgICByZXR1cm4gRU1QVFlfT0JKO1xuICAgIH1cbiAgICBjb25zdCBtb2R1bGVzID0gaW5zdGFuY2UudHlwZS5fX2Nzc01vZHVsZXM7XG4gICAgaWYgKCFtb2R1bGVzKSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4oYEN1cnJlbnQgaW5zdGFuY2UgZG9lcyBub3QgaGF2ZSBDU1MgbW9kdWxlcyBpbmplY3RlZC5gKTtcbiAgICAgIHJldHVybiBFTVBUWV9PQko7XG4gICAgfVxuICAgIGNvbnN0IG1vZCA9IG1vZHVsZXNbbmFtZV07XG4gICAgaWYgKCFtb2QpIHtcbiAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybihgQ3VycmVudCBpbnN0YW5jZSBkb2VzIG5vdCBoYXZlIENTUyBtb2R1bGUgbmFtZWQgXCIke25hbWV9XCIuYCk7XG4gICAgICByZXR1cm4gRU1QVFlfT0JKO1xuICAgIH1cbiAgICByZXR1cm4gbW9kO1xuICB9XG59XG5cbmNvbnN0IHBvc2l0aW9uTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5jb25zdCBuZXdQb3NpdGlvbk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuY29uc3QgbW92ZUNiS2V5ID0gU3ltYm9sKFwiX21vdmVDYlwiKTtcbmNvbnN0IGVudGVyQ2JLZXkgPSBTeW1ib2woXCJfZW50ZXJDYlwiKTtcbmNvbnN0IGRlY29yYXRlID0gKHQpID0+IHtcbiAgZGVsZXRlIHQucHJvcHMubW9kZTtcbiAgcmV0dXJuIHQ7XG59O1xuY29uc3QgVHJhbnNpdGlvbkdyb3VwSW1wbCA9IC8qIEBfX1BVUkVfXyAqLyBkZWNvcmF0ZSh7XG4gIG5hbWU6IFwiVHJhbnNpdGlvbkdyb3VwXCIsXG4gIHByb3BzOiAvKiBAX19QVVJFX18gKi8gZXh0ZW5kKHt9LCBUcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzLCB7XG4gICAgdGFnOiBTdHJpbmcsXG4gICAgbW92ZUNsYXNzOiBTdHJpbmdcbiAgfSksXG4gIHNldHVwKHByb3BzLCB7IHNsb3RzIH0pIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIGNvbnN0IHN0YXRlID0gdXNlVHJhbnNpdGlvblN0YXRlKCk7XG4gICAgbGV0IHByZXZDaGlsZHJlbjtcbiAgICBsZXQgY2hpbGRyZW47XG4gICAgb25VcGRhdGVkKCgpID0+IHtcbiAgICAgIGlmICghcHJldkNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBtb3ZlQ2xhc3MgPSBwcm9wcy5tb3ZlQ2xhc3MgfHwgYCR7cHJvcHMubmFtZSB8fCBcInZcIn0tbW92ZWA7XG4gICAgICBpZiAoIWhhc0NTU1RyYW5zZm9ybShcbiAgICAgICAgcHJldkNoaWxkcmVuWzBdLmVsLFxuICAgICAgICBpbnN0YW5jZS52bm9kZS5lbCxcbiAgICAgICAgbW92ZUNsYXNzXG4gICAgICApKSB7XG4gICAgICAgIHByZXZDaGlsZHJlbiA9IFtdO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBwcmV2Q2hpbGRyZW4uZm9yRWFjaChjYWxsUGVuZGluZ0Nicyk7XG4gICAgICBwcmV2Q2hpbGRyZW4uZm9yRWFjaChyZWNvcmRQb3NpdGlvbik7XG4gICAgICBjb25zdCBtb3ZlZENoaWxkcmVuID0gcHJldkNoaWxkcmVuLmZpbHRlcihhcHBseVRyYW5zbGF0aW9uKTtcbiAgICAgIGZvcmNlUmVmbG93KGluc3RhbmNlLnZub2RlLmVsKTtcbiAgICAgIG1vdmVkQ2hpbGRyZW4uZm9yRWFjaCgoYykgPT4ge1xuICAgICAgICBjb25zdCBlbCA9IGMuZWw7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZWwuc3R5bGU7XG4gICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTtcbiAgICAgICAgc3R5bGUudHJhbnNmb3JtID0gc3R5bGUud2Via2l0VHJhbnNmb3JtID0gc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCJcIjtcbiAgICAgICAgY29uc3QgY2IgPSBlbFttb3ZlQ2JLZXldID0gKGUpID0+IHtcbiAgICAgICAgICBpZiAoZSAmJiBlLnRhcmdldCAhPT0gZWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFlIHx8IGUucHJvcGVydHlOYW1lLmVuZHNXaXRoKFwidHJhbnNmb3JtXCIpKSB7XG4gICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBjYik7XG4gICAgICAgICAgICBlbFttb3ZlQ2JLZXldID0gbnVsbDtcbiAgICAgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGNiKTtcbiAgICAgIH0pO1xuICAgICAgcHJldkNoaWxkcmVuID0gW107XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IHJhd1Byb3BzID0gdG9SYXcocHJvcHMpO1xuICAgICAgY29uc3QgY3NzVHJhbnNpdGlvblByb3BzID0gcmVzb2x2ZVRyYW5zaXRpb25Qcm9wcyhyYXdQcm9wcyk7XG4gICAgICBsZXQgdGFnID0gcmF3UHJvcHMudGFnIHx8IEZyYWdtZW50O1xuICAgICAgcHJldkNoaWxkcmVuID0gW107XG4gICAgICBpZiAoY2hpbGRyZW4pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgaWYgKGNoaWxkLmVsICYmIGNoaWxkLmVsIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgcHJldkNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKFxuICAgICAgICAgICAgICBjaGlsZCxcbiAgICAgICAgICAgICAgcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhcbiAgICAgICAgICAgICAgICBjaGlsZCxcbiAgICAgICAgICAgICAgICBjc3NUcmFuc2l0aW9uUHJvcHMsXG4gICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHBvc2l0aW9uTWFwLnNldChjaGlsZCwge1xuICAgICAgICAgICAgICBsZWZ0OiBjaGlsZC5lbC5vZmZzZXRMZWZ0LFxuICAgICAgICAgICAgICB0b3A6IGNoaWxkLmVsLm9mZnNldFRvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjaGlsZHJlbiA9IHNsb3RzLmRlZmF1bHQgPyBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4oc2xvdHMuZGVmYXVsdCgpKSA6IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICBpZiAoY2hpbGQua2V5ICE9IG51bGwpIHtcbiAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3MoXG4gICAgICAgICAgICBjaGlsZCxcbiAgICAgICAgICAgIHJlc29sdmVUcmFuc2l0aW9uSG9va3MoY2hpbGQsIGNzc1RyYW5zaXRpb25Qcm9wcywgc3RhdGUsIGluc3RhbmNlKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBjaGlsZC50eXBlICE9PSBUZXh0KSB7XG4gICAgICAgICAgd2FybihgPFRyYW5zaXRpb25Hcm91cD4gY2hpbGRyZW4gbXVzdCBiZSBrZXllZC5gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHRhZywgbnVsbCwgY2hpbGRyZW4pO1xuICAgIH07XG4gIH1cbn0pO1xuY29uc3QgVHJhbnNpdGlvbkdyb3VwID0gVHJhbnNpdGlvbkdyb3VwSW1wbDtcbmZ1bmN0aW9uIGNhbGxQZW5kaW5nQ2JzKGMpIHtcbiAgY29uc3QgZWwgPSBjLmVsO1xuICBpZiAoZWxbbW92ZUNiS2V5XSkge1xuICAgIGVsW21vdmVDYktleV0oKTtcbiAgfVxuICBpZiAoZWxbZW50ZXJDYktleV0pIHtcbiAgICBlbFtlbnRlckNiS2V5XSgpO1xuICB9XG59XG5mdW5jdGlvbiByZWNvcmRQb3NpdGlvbihjKSB7XG4gIG5ld1Bvc2l0aW9uTWFwLnNldChjLCB7XG4gICAgbGVmdDogYy5lbC5vZmZzZXRMZWZ0LFxuICAgIHRvcDogYy5lbC5vZmZzZXRUb3BcbiAgfSk7XG59XG5mdW5jdGlvbiBhcHBseVRyYW5zbGF0aW9uKGMpIHtcbiAgY29uc3Qgb2xkUG9zID0gcG9zaXRpb25NYXAuZ2V0KGMpO1xuICBjb25zdCBuZXdQb3MgPSBuZXdQb3NpdGlvbk1hcC5nZXQoYyk7XG4gIGNvbnN0IGR4ID0gb2xkUG9zLmxlZnQgLSBuZXdQb3MubGVmdDtcbiAgY29uc3QgZHkgPSBvbGRQb3MudG9wIC0gbmV3UG9zLnRvcDtcbiAgaWYgKGR4IHx8IGR5KSB7XG4gICAgY29uc3QgcyA9IGMuZWwuc3R5bGU7XG4gICAgcy50cmFuc2Zvcm0gPSBzLndlYmtpdFRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtkeH1weCwke2R5fXB4KWA7XG4gICAgcy50cmFuc2l0aW9uRHVyYXRpb24gPSBcIjBzXCI7XG4gICAgcmV0dXJuIGM7XG4gIH1cbn1cbmZ1bmN0aW9uIGhhc0NTU1RyYW5zZm9ybShlbCwgcm9vdCwgbW92ZUNsYXNzKSB7XG4gIGNvbnN0IGNsb25lID0gZWwuY2xvbmVOb2RlKCk7XG4gIGNvbnN0IF92dGMgPSBlbFt2dGNLZXldO1xuICBpZiAoX3Z0Yykge1xuICAgIF92dGMuZm9yRWFjaCgoY2xzKSA9PiB7XG4gICAgICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKChjKSA9PiBjICYmIGNsb25lLmNsYXNzTGlzdC5yZW1vdmUoYykpO1xuICAgIH0pO1xuICB9XG4gIG1vdmVDbGFzcy5zcGxpdCgvXFxzKy8pLmZvckVhY2goKGMpID0+IGMgJiYgY2xvbmUuY2xhc3NMaXN0LmFkZChjKSk7XG4gIGNsb25lLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgY29uc3QgY29udGFpbmVyID0gcm9vdC5ub2RlVHlwZSA9PT0gMSA/IHJvb3QgOiByb290LnBhcmVudE5vZGU7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9uZSk7XG4gIGNvbnN0IHsgaGFzVHJhbnNmb3JtIH0gPSBnZXRUcmFuc2l0aW9uSW5mbyhjbG9uZSk7XG4gIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjbG9uZSk7XG4gIHJldHVybiBoYXNUcmFuc2Zvcm07XG59XG5cbmNvbnN0IGdldE1vZGVsQXNzaWduZXIgPSAodm5vZGUpID0+IHtcbiAgY29uc3QgZm4gPSB2bm9kZS5wcm9wc1tcIm9uVXBkYXRlOm1vZGVsVmFsdWVcIl0gfHwgZmFsc2U7XG4gIHJldHVybiBpc0FycmF5KGZuKSA/ICh2YWx1ZSkgPT4gaW52b2tlQXJyYXlGbnMoZm4sIHZhbHVlKSA6IGZuO1xufTtcbmZ1bmN0aW9uIG9uQ29tcG9zaXRpb25TdGFydChlKSB7XG4gIGUudGFyZ2V0LmNvbXBvc2luZyA9IHRydWU7XG59XG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uRW5kKGUpIHtcbiAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gIGlmICh0YXJnZXQuY29tcG9zaW5nKSB7XG4gICAgdGFyZ2V0LmNvbXBvc2luZyA9IGZhbHNlO1xuICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIpKTtcbiAgfVxufVxuY29uc3QgYXNzaWduS2V5ID0gU3ltYm9sKFwiX2Fzc2lnblwiKTtcbmZ1bmN0aW9uIGNhc3RWYWx1ZSh2YWx1ZSwgdHJpbSwgbnVtYmVyKSB7XG4gIGlmICh0cmltKSB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcbiAgaWYgKG51bWJlcikgdmFsdWUgPSBsb29zZVRvTnVtYmVyKHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufVxuY29uc3Qgdk1vZGVsVGV4dCA9IHtcbiAgY3JlYXRlZChlbCwgeyBtb2RpZmllcnM6IHsgbGF6eSwgdHJpbSwgbnVtYmVyIH0gfSwgdm5vZGUpIHtcbiAgICBlbFthc3NpZ25LZXldID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgY29uc3QgY2FzdFRvTnVtYmVyID0gbnVtYmVyIHx8IHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLnR5cGUgPT09IFwibnVtYmVyXCI7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgbGF6eSA/IFwiY2hhbmdlXCIgOiBcImlucHV0XCIsIChlKSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQuY29tcG9zaW5nKSByZXR1cm47XG4gICAgICBlbFthc3NpZ25LZXldKGNhc3RWYWx1ZShlbC52YWx1ZSwgdHJpbSwgY2FzdFRvTnVtYmVyKSk7XG4gICAgfSk7XG4gICAgaWYgKHRyaW0gfHwgY2FzdFRvTnVtYmVyKSB7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBcImNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICAgIGVsLnZhbHVlID0gY2FzdFZhbHVlKGVsLnZhbHVlLCB0cmltLCBjYXN0VG9OdW1iZXIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghbGF6eSkge1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgXCJjb21wb3NpdGlvbnN0YXJ0XCIsIG9uQ29tcG9zaXRpb25TdGFydCk7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBcImNvbXBvc2l0aW9uZW5kXCIsIG9uQ29tcG9zaXRpb25FbmQpO1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgXCJjaGFuZ2VcIiwgb25Db21wb3NpdGlvbkVuZCk7XG4gICAgfVxuICB9LFxuICAvLyBzZXQgdmFsdWUgb24gbW91bnRlZCBzbyBpdCdzIGFmdGVyIG1pbi9tYXggZm9yIHR5cGU9XCJyYW5nZVwiXG4gIG1vdW50ZWQoZWwsIHsgdmFsdWUgfSkge1xuICAgIGVsLnZhbHVlID0gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZTtcbiAgfSxcbiAgYmVmb3JlVXBkYXRlKGVsLCB7IHZhbHVlLCBvbGRWYWx1ZSwgbW9kaWZpZXJzOiB7IGxhenksIHRyaW0sIG51bWJlciB9IH0sIHZub2RlKSB7XG4gICAgZWxbYXNzaWduS2V5XSA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgIGlmIChlbC5jb21wb3NpbmcpIHJldHVybjtcbiAgICBjb25zdCBlbFZhbHVlID0gKG51bWJlciB8fCBlbC50eXBlID09PSBcIm51bWJlclwiKSAmJiAhL14wXFxkLy50ZXN0KGVsLnZhbHVlKSA/IGxvb3NlVG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG4gICAgY29uc3QgbmV3VmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlO1xuICAgIGlmIChlbFZhbHVlID09PSBuZXdWYWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZWwgJiYgZWwudHlwZSAhPT0gXCJyYW5nZVwiKSB7XG4gICAgICBpZiAobGF6eSAmJiB2YWx1ZSA9PT0gb2xkVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRyaW0gJiYgZWwudmFsdWUudHJpbSgpID09PSBuZXdWYWx1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGVsLnZhbHVlID0gbmV3VmFsdWU7XG4gIH1cbn07XG5jb25zdCB2TW9kZWxDaGVja2JveCA9IHtcbiAgLy8gIzQwOTYgYXJyYXkgY2hlY2tib3hlcyBuZWVkIHRvIGJlIGRlZXAgdHJhdmVyc2VkXG4gIGRlZXA6IHRydWUsXG4gIGNyZWF0ZWQoZWwsIF8sIHZub2RlKSB7XG4gICAgZWxbYXNzaWduS2V5XSA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsIFwiY2hhbmdlXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IG1vZGVsVmFsdWUgPSBlbC5fbW9kZWxWYWx1ZTtcbiAgICAgIGNvbnN0IGVsZW1lbnRWYWx1ZSA9IGdldFZhbHVlKGVsKTtcbiAgICAgIGNvbnN0IGNoZWNrZWQgPSBlbC5jaGVja2VkO1xuICAgICAgY29uc3QgYXNzaWduID0gZWxbYXNzaWduS2V5XTtcbiAgICAgIGlmIChpc0FycmF5KG1vZGVsVmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gbG9vc2VJbmRleE9mKG1vZGVsVmFsdWUsIGVsZW1lbnRWYWx1ZSk7XG4gICAgICAgIGNvbnN0IGZvdW5kID0gaW5kZXggIT09IC0xO1xuICAgICAgICBpZiAoY2hlY2tlZCAmJiAhZm91bmQpIHtcbiAgICAgICAgICBhc3NpZ24obW9kZWxWYWx1ZS5jb25jYXQoZWxlbWVudFZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWNoZWNrZWQgJiYgZm91bmQpIHtcbiAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IFsuLi5tb2RlbFZhbHVlXTtcbiAgICAgICAgICBmaWx0ZXJlZC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIGFzc2lnbihmaWx0ZXJlZCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNTZXQobW9kZWxWYWx1ZSkpIHtcbiAgICAgICAgY29uc3QgY2xvbmVkID0gbmV3IFNldChtb2RlbFZhbHVlKTtcbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgICAgICBjbG9uZWQuYWRkKGVsZW1lbnRWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2xvbmVkLmRlbGV0ZShlbGVtZW50VmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2lnbihjbG9uZWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXNzaWduKGdldENoZWNrYm94VmFsdWUoZWwsIGNoZWNrZWQpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgLy8gc2V0IGluaXRpYWwgY2hlY2tlZCBvbiBtb3VudCB0byB3YWl0IGZvciB0cnVlLXZhbHVlL2ZhbHNlLXZhbHVlXG4gIG1vdW50ZWQ6IHNldENoZWNrZWQsXG4gIGJlZm9yZVVwZGF0ZShlbCwgYmluZGluZywgdm5vZGUpIHtcbiAgICBlbFthc3NpZ25LZXldID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgc2V0Q2hlY2tlZChlbCwgYmluZGluZywgdm5vZGUpO1xuICB9XG59O1xuZnVuY3Rpb24gc2V0Q2hlY2tlZChlbCwgeyB2YWx1ZSwgb2xkVmFsdWUgfSwgdm5vZGUpIHtcbiAgZWwuX21vZGVsVmFsdWUgPSB2YWx1ZTtcbiAgbGV0IGNoZWNrZWQ7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGNoZWNrZWQgPSBsb29zZUluZGV4T2YodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKSA+IC0xO1xuICB9IGVsc2UgaWYgKGlzU2V0KHZhbHVlKSkge1xuICAgIGNoZWNrZWQgPSB2YWx1ZS5oYXModm5vZGUucHJvcHMudmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZSA9PT0gb2xkVmFsdWUpIHJldHVybjtcbiAgICBjaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZ2V0Q2hlY2tib3hWYWx1ZShlbCwgdHJ1ZSkpO1xuICB9XG4gIGlmIChlbC5jaGVja2VkICE9PSBjaGVja2VkKSB7XG4gICAgZWwuY2hlY2tlZCA9IGNoZWNrZWQ7XG4gIH1cbn1cbmNvbnN0IHZNb2RlbFJhZGlvID0ge1xuICBjcmVhdGVkKGVsLCB7IHZhbHVlIH0sIHZub2RlKSB7XG4gICAgZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKTtcbiAgICBlbFthc3NpZ25LZXldID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgXCJjaGFuZ2VcIiwgKCkgPT4ge1xuICAgICAgZWxbYXNzaWduS2V5XShnZXRWYWx1ZShlbCkpO1xuICAgIH0pO1xuICB9LFxuICBiZWZvcmVVcGRhdGUoZWwsIHsgdmFsdWUsIG9sZFZhbHVlIH0sIHZub2RlKSB7XG4gICAgZWxbYXNzaWduS2V5XSA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgIGlmICh2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB2bm9kZS5wcm9wcy52YWx1ZSk7XG4gICAgfVxuICB9XG59O1xuY29uc3Qgdk1vZGVsU2VsZWN0ID0ge1xuICAvLyA8c2VsZWN0IG11bHRpcGxlPiB2YWx1ZSBuZWVkIHRvIGJlIGRlZXAgdHJhdmVyc2VkXG4gIGRlZXA6IHRydWUsXG4gIGNyZWF0ZWQoZWwsIHsgdmFsdWUsIG1vZGlmaWVyczogeyBudW1iZXIgfSB9LCB2bm9kZSkge1xuICAgIGNvbnN0IGlzU2V0TW9kZWwgPSBpc1NldCh2YWx1ZSk7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgXCJjaGFuZ2VcIiwgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VsZWN0ZWRWYWwgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoZWwub3B0aW9ucywgKG8pID0+IG8uc2VsZWN0ZWQpLm1hcChcbiAgICAgICAgKG8pID0+IG51bWJlciA/IGxvb3NlVG9OdW1iZXIoZ2V0VmFsdWUobykpIDogZ2V0VmFsdWUobylcbiAgICAgICk7XG4gICAgICBlbFthc3NpZ25LZXldKFxuICAgICAgICBlbC5tdWx0aXBsZSA/IGlzU2V0TW9kZWwgPyBuZXcgU2V0KHNlbGVjdGVkVmFsKSA6IHNlbGVjdGVkVmFsIDogc2VsZWN0ZWRWYWxbMF1cbiAgICAgICk7XG4gICAgICBlbC5fYXNzaWduaW5nID0gdHJ1ZTtcbiAgICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgZWwuX2Fzc2lnbmluZyA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgZWxbYXNzaWduS2V5XSA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICB9LFxuICAvLyBzZXQgdmFsdWUgaW4gbW91bnRlZCAmIHVwZGF0ZWQgYmVjYXVzZSA8c2VsZWN0PiByZWxpZXMgb24gaXRzIGNoaWxkcmVuXG4gIC8vIDxvcHRpb24+cy5cbiAgbW91bnRlZChlbCwgeyB2YWx1ZSB9KSB7XG4gICAgc2V0U2VsZWN0ZWQoZWwsIHZhbHVlKTtcbiAgfSxcbiAgYmVmb3JlVXBkYXRlKGVsLCBfYmluZGluZywgdm5vZGUpIHtcbiAgICBlbFthc3NpZ25LZXldID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gIH0sXG4gIHVwZGF0ZWQoZWwsIHsgdmFsdWUgfSkge1xuICAgIGlmICghZWwuX2Fzc2lnbmluZykge1xuICAgICAgc2V0U2VsZWN0ZWQoZWwsIHZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5mdW5jdGlvbiBzZXRTZWxlY3RlZChlbCwgdmFsdWUpIHtcbiAgY29uc3QgaXNNdWx0aXBsZSA9IGVsLm11bHRpcGxlO1xuICBjb25zdCBpc0FycmF5VmFsdWUgPSBpc0FycmF5KHZhbHVlKTtcbiAgaWYgKGlzTXVsdGlwbGUgJiYgIWlzQXJyYXlWYWx1ZSAmJiAhaXNTZXQodmFsdWUpKSB7XG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuKFxuICAgICAgYDxzZWxlY3QgbXVsdGlwbGUgdi1tb2RlbD4gZXhwZWN0cyBhbiBBcnJheSBvciBTZXQgdmFsdWUgZm9yIGl0cyBiaW5kaW5nLCBidXQgZ290ICR7T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS5zbGljZSg4LCAtMSl9LmBcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuICBmb3IgKGxldCBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgY29uc3Qgb3B0aW9uID0gZWwub3B0aW9uc1tpXTtcbiAgICBjb25zdCBvcHRpb25WYWx1ZSA9IGdldFZhbHVlKG9wdGlvbik7XG4gICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgIGlmIChpc0FycmF5VmFsdWUpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uVHlwZSA9IHR5cGVvZiBvcHRpb25WYWx1ZTtcbiAgICAgICAgaWYgKG9wdGlvblR5cGUgPT09IFwic3RyaW5nXCIgfHwgb3B0aW9uVHlwZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHZhbHVlLnNvbWUoKHYpID0+IFN0cmluZyh2KSA9PT0gU3RyaW5nKG9wdGlvblZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gbG9vc2VJbmRleE9mKHZhbHVlLCBvcHRpb25WYWx1ZSkgPiAtMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdmFsdWUuaGFzKG9wdGlvblZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGxvb3NlRXF1YWwoZ2V0VmFsdWUob3B0aW9uKSwgdmFsdWUpKSB7XG4gICAgICBpZiAoZWwuc2VsZWN0ZWRJbmRleCAhPT0gaSkgZWwuc2VsZWN0ZWRJbmRleCA9IGk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIGlmICghaXNNdWx0aXBsZSAmJiBlbC5zZWxlY3RlZEluZGV4ICE9PSAtMSkge1xuICAgIGVsLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0VmFsdWUoZWwpIHtcbiAgcmV0dXJuIFwiX3ZhbHVlXCIgaW4gZWwgPyBlbC5fdmFsdWUgOiBlbC52YWx1ZTtcbn1cbmZ1bmN0aW9uIGdldENoZWNrYm94VmFsdWUoZWwsIGNoZWNrZWQpIHtcbiAgY29uc3Qga2V5ID0gY2hlY2tlZCA/IFwiX3RydWVWYWx1ZVwiIDogXCJfZmFsc2VWYWx1ZVwiO1xuICByZXR1cm4ga2V5IGluIGVsID8gZWxba2V5XSA6IGNoZWNrZWQ7XG59XG5jb25zdCB2TW9kZWxEeW5hbWljID0ge1xuICBjcmVhdGVkKGVsLCBiaW5kaW5nLCB2bm9kZSkge1xuICAgIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBudWxsLCBcImNyZWF0ZWRcIik7XG4gIH0sXG4gIG1vdW50ZWQoZWwsIGJpbmRpbmcsIHZub2RlKSB7XG4gICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIG51bGwsIFwibW91bnRlZFwiKTtcbiAgfSxcbiAgYmVmb3JlVXBkYXRlKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlKSB7XG4gICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSwgXCJiZWZvcmVVcGRhdGVcIik7XG4gIH0sXG4gIHVwZGF0ZWQoZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUpIHtcbiAgICBjYWxsTW9kZWxIb29rKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlLCBcInVwZGF0ZWRcIik7XG4gIH1cbn07XG5mdW5jdGlvbiByZXNvbHZlRHluYW1pY01vZGVsKHRhZ05hbWUsIHR5cGUpIHtcbiAgc3dpdGNoICh0YWdOYW1lKSB7XG4gICAgY2FzZSBcIlNFTEVDVFwiOlxuICAgICAgcmV0dXJuIHZNb2RlbFNlbGVjdDtcbiAgICBjYXNlIFwiVEVYVEFSRUFcIjpcbiAgICAgIHJldHVybiB2TW9kZWxUZXh0O1xuICAgIGRlZmF1bHQ6XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcImNoZWNrYm94XCI6XG4gICAgICAgICAgcmV0dXJuIHZNb2RlbENoZWNrYm94O1xuICAgICAgICBjYXNlIFwicmFkaW9cIjpcbiAgICAgICAgICByZXR1cm4gdk1vZGVsUmFkaW87XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIHZNb2RlbFRleHQ7XG4gICAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUsIGhvb2spIHtcbiAgY29uc3QgbW9kZWxUb1VzZSA9IHJlc29sdmVEeW5hbWljTW9kZWwoXG4gICAgZWwudGFnTmFtZSxcbiAgICB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy50eXBlXG4gICk7XG4gIGNvbnN0IGZuID0gbW9kZWxUb1VzZVtob29rXTtcbiAgZm4gJiYgZm4oZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUpO1xufVxuZnVuY3Rpb24gaW5pdFZNb2RlbEZvclNTUigpIHtcbiAgdk1vZGVsVGV4dC5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0pID0+ICh7IHZhbHVlIH0pO1xuICB2TW9kZWxSYWRpby5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0sIHZub2RlKSA9PiB7XG4gICAgaWYgKHZub2RlLnByb3BzICYmIGxvb3NlRXF1YWwodm5vZGUucHJvcHMudmFsdWUsIHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgIH1cbiAgfTtcbiAgdk1vZGVsQ2hlY2tib3guZ2V0U1NSUHJvcHMgPSAoeyB2YWx1ZSB9LCB2bm9kZSkgPT4ge1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgaWYgKHZub2RlLnByb3BzICYmIGxvb3NlSW5kZXhPZih2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNTZXQodmFsdWUpKSB7XG4gICAgICBpZiAodm5vZGUucHJvcHMgJiYgdmFsdWUuaGFzKHZub2RlLnByb3BzLnZhbHVlKSkge1xuICAgICAgICByZXR1cm4geyBjaGVja2VkOiB0cnVlIH07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgIH1cbiAgfTtcbiAgdk1vZGVsRHluYW1pYy5nZXRTU1JQcm9wcyA9IChiaW5kaW5nLCB2bm9kZSkgPT4ge1xuICAgIGlmICh0eXBlb2Ygdm5vZGUudHlwZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtb2RlbFRvVXNlID0gcmVzb2x2ZUR5bmFtaWNNb2RlbChcbiAgICAgIC8vIHJlc29sdmVEeW5hbWljTW9kZWwgZXhwZWN0cyBhbiB1cHBlcmNhc2UgdGFnIG5hbWUsIGJ1dCB2bm9kZS50eXBlIGlzIGxvd2VyY2FzZVxuICAgICAgdm5vZGUudHlwZS50b1VwcGVyQ2FzZSgpLFxuICAgICAgdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudHlwZVxuICAgICk7XG4gICAgaWYgKG1vZGVsVG9Vc2UuZ2V0U1NSUHJvcHMpIHtcbiAgICAgIHJldHVybiBtb2RlbFRvVXNlLmdldFNTUlByb3BzKGJpbmRpbmcsIHZub2RlKTtcbiAgICB9XG4gIH07XG59XG5cbmNvbnN0IHN5c3RlbU1vZGlmaWVycyA9IFtcImN0cmxcIiwgXCJzaGlmdFwiLCBcImFsdFwiLCBcIm1ldGFcIl07XG5jb25zdCBtb2RpZmllckd1YXJkcyA9IHtcbiAgc3RvcDogKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksXG4gIHByZXZlbnQ6IChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCksXG4gIHNlbGY6IChlKSA9PiBlLnRhcmdldCAhPT0gZS5jdXJyZW50VGFyZ2V0LFxuICBjdHJsOiAoZSkgPT4gIWUuY3RybEtleSxcbiAgc2hpZnQ6IChlKSA9PiAhZS5zaGlmdEtleSxcbiAgYWx0OiAoZSkgPT4gIWUuYWx0S2V5LFxuICBtZXRhOiAoZSkgPT4gIWUubWV0YUtleSxcbiAgbGVmdDogKGUpID0+IFwiYnV0dG9uXCIgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMCxcbiAgbWlkZGxlOiAoZSkgPT4gXCJidXR0b25cIiBpbiBlICYmIGUuYnV0dG9uICE9PSAxLFxuICByaWdodDogKGUpID0+IFwiYnV0dG9uXCIgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMixcbiAgZXhhY3Q6IChlLCBtb2RpZmllcnMpID0+IHN5c3RlbU1vZGlmaWVycy5zb21lKChtKSA9PiBlW2Ake219S2V5YF0gJiYgIW1vZGlmaWVycy5pbmNsdWRlcyhtKSlcbn07XG5jb25zdCB3aXRoTW9kaWZpZXJzID0gKGZuLCBtb2RpZmllcnMpID0+IHtcbiAgY29uc3QgY2FjaGUgPSBmbi5fd2l0aE1vZHMgfHwgKGZuLl93aXRoTW9kcyA9IHt9KTtcbiAgY29uc3QgY2FjaGVLZXkgPSBtb2RpZmllcnMuam9pbihcIi5cIik7XG4gIHJldHVybiBjYWNoZVtjYWNoZUtleV0gfHwgKGNhY2hlW2NhY2hlS2V5XSA9ICgoZXZlbnQsIC4uLmFyZ3MpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vZGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZ3VhcmQgPSBtb2RpZmllckd1YXJkc1ttb2RpZmllcnNbaV1dO1xuICAgICAgaWYgKGd1YXJkICYmIGd1YXJkKGV2ZW50LCBtb2RpZmllcnMpKSByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBmbihldmVudCwgLi4uYXJncyk7XG4gIH0pKTtcbn07XG5jb25zdCBrZXlOYW1lcyA9IHtcbiAgZXNjOiBcImVzY2FwZVwiLFxuICBzcGFjZTogXCIgXCIsXG4gIHVwOiBcImFycm93LXVwXCIsXG4gIGxlZnQ6IFwiYXJyb3ctbGVmdFwiLFxuICByaWdodDogXCJhcnJvdy1yaWdodFwiLFxuICBkb3duOiBcImFycm93LWRvd25cIixcbiAgZGVsZXRlOiBcImJhY2tzcGFjZVwiXG59O1xuY29uc3Qgd2l0aEtleXMgPSAoZm4sIG1vZGlmaWVycykgPT4ge1xuICBjb25zdCBjYWNoZSA9IGZuLl93aXRoS2V5cyB8fCAoZm4uX3dpdGhLZXlzID0ge30pO1xuICBjb25zdCBjYWNoZUtleSA9IG1vZGlmaWVycy5qb2luKFwiLlwiKTtcbiAgcmV0dXJuIGNhY2hlW2NhY2hlS2V5XSB8fCAoY2FjaGVbY2FjaGVLZXldID0gKChldmVudCkgPT4ge1xuICAgIGlmICghKFwia2V5XCIgaW4gZXZlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGV2ZW50S2V5ID0gaHlwaGVuYXRlKGV2ZW50LmtleSk7XG4gICAgaWYgKG1vZGlmaWVycy5zb21lKFxuICAgICAgKGspID0+IGsgPT09IGV2ZW50S2V5IHx8IGtleU5hbWVzW2tdID09PSBldmVudEtleVxuICAgICkpIHtcbiAgICAgIHJldHVybiBmbihldmVudCk7XG4gICAgfVxuICB9KSk7XG59O1xuXG5jb25zdCByZW5kZXJlck9wdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gZXh0ZW5kKHsgcGF0Y2hQcm9wIH0sIG5vZGVPcHMpO1xubGV0IHJlbmRlcmVyO1xubGV0IGVuYWJsZWRIeWRyYXRpb24gPSBmYWxzZTtcbmZ1bmN0aW9uIGVuc3VyZVJlbmRlcmVyKCkge1xuICByZXR1cm4gcmVuZGVyZXIgfHwgKHJlbmRlcmVyID0gY3JlYXRlUmVuZGVyZXIocmVuZGVyZXJPcHRpb25zKSk7XG59XG5mdW5jdGlvbiBlbnN1cmVIeWRyYXRpb25SZW5kZXJlcigpIHtcbiAgcmVuZGVyZXIgPSBlbmFibGVkSHlkcmF0aW9uID8gcmVuZGVyZXIgOiBjcmVhdGVIeWRyYXRpb25SZW5kZXJlcihyZW5kZXJlck9wdGlvbnMpO1xuICBlbmFibGVkSHlkcmF0aW9uID0gdHJ1ZTtcbiAgcmV0dXJuIHJlbmRlcmVyO1xufVxuY29uc3QgcmVuZGVyID0gKCguLi5hcmdzKSA9PiB7XG4gIGVuc3VyZVJlbmRlcmVyKCkucmVuZGVyKC4uLmFyZ3MpO1xufSk7XG5jb25zdCBoeWRyYXRlID0gKCguLi5hcmdzKSA9PiB7XG4gIGVuc3VyZUh5ZHJhdGlvblJlbmRlcmVyKCkuaHlkcmF0ZSguLi5hcmdzKTtcbn0pO1xuY29uc3QgY3JlYXRlQXBwID0gKCguLi5hcmdzKSA9PiB7XG4gIGNvbnN0IGFwcCA9IGVuc3VyZVJlbmRlcmVyKCkuY3JlYXRlQXBwKC4uLmFyZ3MpO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGluamVjdE5hdGl2ZVRhZ0NoZWNrKGFwcCk7XG4gICAgaW5qZWN0Q29tcGlsZXJPcHRpb25zQ2hlY2soYXBwKTtcbiAgfVxuICBjb25zdCB7IG1vdW50IH0gPSBhcHA7XG4gIGFwcC5tb3VudCA9IChjb250YWluZXJPclNlbGVjdG9yKSA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gbm9ybWFsaXplQ29udGFpbmVyKGNvbnRhaW5lck9yU2VsZWN0b3IpO1xuICAgIGlmICghY29udGFpbmVyKSByZXR1cm47XG4gICAgY29uc3QgY29tcG9uZW50ID0gYXBwLl9jb21wb25lbnQ7XG4gICAgaWYgKCFpc0Z1bmN0aW9uKGNvbXBvbmVudCkgJiYgIWNvbXBvbmVudC5yZW5kZXIgJiYgIWNvbXBvbmVudC50ZW1wbGF0ZSkge1xuICAgICAgY29tcG9uZW50LnRlbXBsYXRlID0gY29udGFpbmVyLmlubmVySFRNTDtcbiAgICB9XG4gICAgaWYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgY29udGFpbmVyLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9XG4gICAgY29uc3QgcHJveHkgPSBtb3VudChjb250YWluZXIsIGZhbHNlLCByZXNvbHZlUm9vdE5hbWVzcGFjZShjb250YWluZXIpKTtcbiAgICBpZiAoY29udGFpbmVyIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgY29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZShcInYtY2xvYWtcIik7XG4gICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS12LWFwcFwiLCBcIlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHByb3h5O1xuICB9O1xuICByZXR1cm4gYXBwO1xufSk7XG5jb25zdCBjcmVhdGVTU1JBcHAgPSAoKC4uLmFyZ3MpID0+IHtcbiAgY29uc3QgYXBwID0gZW5zdXJlSHlkcmF0aW9uUmVuZGVyZXIoKS5jcmVhdGVBcHAoLi4uYXJncyk7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgaW5qZWN0TmF0aXZlVGFnQ2hlY2soYXBwKTtcbiAgICBpbmplY3RDb21waWxlck9wdGlvbnNDaGVjayhhcHApO1xuICB9XG4gIGNvbnN0IHsgbW91bnQgfSA9IGFwcDtcbiAgYXBwLm1vdW50ID0gKGNvbnRhaW5lck9yU2VsZWN0b3IpID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBub3JtYWxpemVDb250YWluZXIoY29udGFpbmVyT3JTZWxlY3Rvcik7XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgcmV0dXJuIG1vdW50KGNvbnRhaW5lciwgdHJ1ZSwgcmVzb2x2ZVJvb3ROYW1lc3BhY2UoY29udGFpbmVyKSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gYXBwO1xufSk7XG5mdW5jdGlvbiByZXNvbHZlUm9vdE5hbWVzcGFjZShjb250YWluZXIpIHtcbiAgaWYgKGNvbnRhaW5lciBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpIHtcbiAgICByZXR1cm4gXCJzdmdcIjtcbiAgfVxuICBpZiAodHlwZW9mIE1hdGhNTEVsZW1lbnQgPT09IFwiZnVuY3Rpb25cIiAmJiBjb250YWluZXIgaW5zdGFuY2VvZiBNYXRoTUxFbGVtZW50KSB7XG4gICAgcmV0dXJuIFwibWF0aG1sXCI7XG4gIH1cbn1cbmZ1bmN0aW9uIGluamVjdE5hdGl2ZVRhZ0NoZWNrKGFwcCkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBwLmNvbmZpZywgXCJpc05hdGl2ZVRhZ1wiLCB7XG4gICAgdmFsdWU6ICh0YWcpID0+IGlzSFRNTFRhZyh0YWcpIHx8IGlzU1ZHVGFnKHRhZykgfHwgaXNNYXRoTUxUYWcodGFnKSxcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG59XG5mdW5jdGlvbiBpbmplY3RDb21waWxlck9wdGlvbnNDaGVjayhhcHApIHtcbiAgaWYgKGlzUnVudGltZU9ubHkoKSkge1xuICAgIGNvbnN0IGlzQ3VzdG9tRWxlbWVudCA9IGFwcC5jb25maWcuaXNDdXN0b21FbGVtZW50O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcHAuY29uZmlnLCBcImlzQ3VzdG9tRWxlbWVudFwiLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiBpc0N1c3RvbUVsZW1lbnQ7XG4gICAgICB9LFxuICAgICAgc2V0KCkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIGBUaGUgXFxgaXNDdXN0b21FbGVtZW50XFxgIGNvbmZpZyBvcHRpb24gaXMgZGVwcmVjYXRlZC4gVXNlIFxcYGNvbXBpbGVyT3B0aW9ucy5pc0N1c3RvbUVsZW1lbnRcXGAgaW5zdGVhZC5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tcGlsZXJPcHRpb25zID0gYXBwLmNvbmZpZy5jb21waWxlck9wdGlvbnM7XG4gICAgY29uc3QgbXNnID0gYFRoZSBcXGBjb21waWxlck9wdGlvbnNcXGAgY29uZmlnIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIGEgYnVpbGQgb2YgVnVlLmpzIHRoYXQgaW5jbHVkZXMgdGhlIHJ1bnRpbWUgY29tcGlsZXIgKGFrYSBcImZ1bGwgYnVpbGRcIikuIFNpbmNlIHlvdSBhcmUgdXNpbmcgdGhlIHJ1bnRpbWUtb25seSBidWlsZCwgXFxgY29tcGlsZXJPcHRpb25zXFxgIG11c3QgYmUgcGFzc2VkIHRvIFxcYEB2dWUvY29tcGlsZXItZG9tXFxgIGluIHRoZSBidWlsZCBzZXR1cCBpbnN0ZWFkLlxuLSBGb3IgdnVlLWxvYWRlcjogcGFzcyBpdCB2aWEgdnVlLWxvYWRlcidzIFxcYGNvbXBpbGVyT3B0aW9uc1xcYCBsb2FkZXIgb3B0aW9uLlxuLSBGb3IgdnVlLWNsaTogc2VlIGh0dHBzOi8vY2xpLnZ1ZWpzLm9yZy9ndWlkZS93ZWJwYWNrLmh0bWwjbW9kaWZ5aW5nLW9wdGlvbnMtb2YtYS1sb2FkZXJcbi0gRm9yIHZpdGU6IHBhc3MgaXQgdmlhIEB2aXRlanMvcGx1Z2luLXZ1ZSBvcHRpb25zLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3ZpdGVqcy92aXRlLXBsdWdpbi12dWUvdHJlZS9tYWluL3BhY2thZ2VzL3BsdWdpbi12dWUjZXhhbXBsZS1mb3ItcGFzc2luZy1vcHRpb25zLXRvLXZ1ZWNvbXBpbGVyLXNmY2A7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFwcC5jb25maWcsIFwiY29tcGlsZXJPcHRpb25zXCIsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgd2Fybihtc2cpO1xuICAgICAgICByZXR1cm4gY29tcGlsZXJPcHRpb25zO1xuICAgICAgfSxcbiAgICAgIHNldCgpIHtcbiAgICAgICAgd2Fybihtc2cpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5mdW5jdGlvbiBub3JtYWxpemVDb250YWluZXIoY29udGFpbmVyKSB7XG4gIGlmIChpc1N0cmluZyhjb250YWluZXIpKSB7XG4gICAgY29uc3QgcmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXIpO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFyZXMpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIGBGYWlsZWQgdG8gbW91bnQgYXBwOiBtb3VudCB0YXJnZXQgc2VsZWN0b3IgXCIke2NvbnRhaW5lcn1cIiByZXR1cm5lZCBudWxsLmBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2luZG93LlNoYWRvd1Jvb3QgJiYgY29udGFpbmVyIGluc3RhbmNlb2Ygd2luZG93LlNoYWRvd1Jvb3QgJiYgY29udGFpbmVyLm1vZGUgPT09IFwiY2xvc2VkXCIpIHtcbiAgICB3YXJuKFxuICAgICAgYG1vdW50aW5nIG9uIGEgU2hhZG93Um9vdCB3aXRoIFxcYHttb2RlOiBcImNsb3NlZFwifVxcYCBtYXkgbGVhZCB0byB1bnByZWRpY3RhYmxlIGJ1Z3NgXG4gICAgKTtcbiAgfVxuICByZXR1cm4gY29udGFpbmVyO1xufVxubGV0IHNzckRpcmVjdGl2ZUluaXRpYWxpemVkID0gZmFsc2U7XG5jb25zdCBpbml0RGlyZWN0aXZlc0ZvclNTUiA9ICgpID0+IHtcbiAgaWYgKCFzc3JEaXJlY3RpdmVJbml0aWFsaXplZCkge1xuICAgIHNzckRpcmVjdGl2ZUluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICBpbml0Vk1vZGVsRm9yU1NSKCk7XG4gICAgaW5pdFZTaG93Rm9yU1NSKCk7XG4gIH1cbn0gO1xuXG5leHBvcnQgeyBUcmFuc2l0aW9uLCBUcmFuc2l0aW9uR3JvdXAsIFZ1ZUVsZW1lbnQsIGNyZWF0ZUFwcCwgY3JlYXRlU1NSQXBwLCBkZWZpbmVDdXN0b21FbGVtZW50LCBkZWZpbmVTU1JDdXN0b21FbGVtZW50LCBoeWRyYXRlLCBpbml0RGlyZWN0aXZlc0ZvclNTUiwgbm9kZU9wcywgcGF0Y2hQcm9wLCByZW5kZXIsIHVzZUNzc01vZHVsZSwgdXNlQ3NzVmFycywgdXNlSG9zdCwgdXNlU2hhZG93Um9vdCwgdk1vZGVsQ2hlY2tib3gsIHZNb2RlbER5bmFtaWMsIHZNb2RlbFJhZGlvLCB2TW9kZWxTZWxlY3QsIHZNb2RlbFRleHQsIHZTaG93LCB3aXRoS2V5cywgd2l0aE1vZGlmaWVycyB9O1xuIiwiLy8gc3JjL2FwcC1kYXRhL2luZGV4LnRzXG52YXIgQlVJTEQgPSB7XG4gIGFsbFJlbmRlckZuOiBmYWxzZSxcbiAgZWxlbWVudDogdHJ1ZSxcbiAgZXZlbnQ6IHRydWUsXG4gIGhhc1JlbmRlckZuOiB0cnVlLFxuICBob3N0TGlzdGVuZXI6IHRydWUsXG4gIGhvc3RMaXN0ZW5lclRhcmdldFdpbmRvdzogdHJ1ZSxcbiAgaG9zdExpc3RlbmVyVGFyZ2V0RG9jdW1lbnQ6IHRydWUsXG4gIGhvc3RMaXN0ZW5lclRhcmdldEJvZHk6IHRydWUsXG4gIGhvc3RMaXN0ZW5lclRhcmdldFBhcmVudDogZmFsc2UsXG4gIGhvc3RMaXN0ZW5lclRhcmdldDogdHJ1ZSxcbiAgbWVtYmVyOiB0cnVlLFxuICBtZXRob2Q6IHRydWUsXG4gIG1vZGU6IHRydWUsXG4gIG9ic2VydmVBdHRyaWJ1dGU6IHRydWUsXG4gIHByb3A6IHRydWUsXG4gIHByb3BNdXRhYmxlOiB0cnVlLFxuICByZWZsZWN0OiB0cnVlLFxuICBzY29wZWQ6IHRydWUsXG4gIHNoYWRvd0RvbTogdHJ1ZSxcbiAgc2xvdDogdHJ1ZSxcbiAgY3NzQW5ub3RhdGlvbnM6IHRydWUsXG4gIHN0YXRlOiB0cnVlLFxuICBzdHlsZTogdHJ1ZSxcbiAgZm9ybUFzc29jaWF0ZWQ6IGZhbHNlLFxuICBzdmc6IHRydWUsXG4gIHVwZGF0YWJsZTogdHJ1ZSxcbiAgdmRvbUF0dHJpYnV0ZTogdHJ1ZSxcbiAgdmRvbVhsaW5rOiB0cnVlLFxuICB2ZG9tQ2xhc3M6IHRydWUsXG4gIHZkb21GdW5jdGlvbmFsOiB0cnVlLFxuICB2ZG9tS2V5OiB0cnVlLFxuICB2ZG9tTGlzdGVuZXI6IHRydWUsXG4gIHZkb21SZWY6IHRydWUsXG4gIHZkb21Qcm9wT3JBdHRyOiB0cnVlLFxuICB2ZG9tUmVuZGVyOiB0cnVlLFxuICB2ZG9tU3R5bGU6IHRydWUsXG4gIHZkb21UZXh0OiB0cnVlLFxuICBwcm9wQ2hhbmdlQ2FsbGJhY2s6IHRydWUsXG4gIHRhc2tRdWV1ZTogdHJ1ZSxcbiAgaG90TW9kdWxlUmVwbGFjZW1lbnQ6IGZhbHNlLFxuICBpc0RlYnVnOiBmYWxzZSxcbiAgaXNEZXY6IGZhbHNlLFxuICBpc1Rlc3Rpbmc6IGZhbHNlLFxuICBoeWRyYXRlU2VydmVyU2lkZTogZmFsc2UsXG4gIGh5ZHJhdGVDbGllbnRTaWRlOiBmYWxzZSxcbiAgbGlmZWN5Y2xlRE9NRXZlbnRzOiBmYWxzZSxcbiAgbGF6eUxvYWQ6IGZhbHNlLFxuICBwcm9maWxlOiBmYWxzZSxcbiAgc2xvdFJlbG9jYXRpb246IHRydWUsXG4gIC8vIFRPRE8oU1RFTkNJTC05MTQpOiByZW1vdmUgdGhpcyBvcHRpb24gd2hlbiBgZXhwZXJpbWVudGFsU2xvdEZpeGVzYCBpcyB0aGUgZGVmYXVsdCBiZWhhdmlvclxuICBhcHBlbmRDaGlsZFNsb3RGaXg6IGZhbHNlLFxuICAvLyBUT0RPKFNURU5DSUwtOTE0KTogcmVtb3ZlIHRoaXMgb3B0aW9uIHdoZW4gYGV4cGVyaW1lbnRhbFNsb3RGaXhlc2AgaXMgdGhlIGRlZmF1bHQgYmVoYXZpb3JcbiAgY2xvbmVOb2RlRml4OiBmYWxzZSxcbiAgaHlkcmF0ZWRBdHRyaWJ1dGU6IGZhbHNlLFxuICBoeWRyYXRlZENsYXNzOiB0cnVlLFxuICAvLyBUT0RPKFNURU5DSUwtMTMwNSk6IHJlbW92ZSB0aGlzIG9wdGlvblxuICBzY3JpcHREYXRhT3B0czogZmFsc2UsXG4gIC8vIFRPRE8oU1RFTkNJTC05MTQpOiByZW1vdmUgdGhpcyBvcHRpb24gd2hlbiBgZXhwZXJpbWVudGFsU2xvdEZpeGVzYCBpcyB0aGUgZGVmYXVsdCBiZWhhdmlvclxuICBzY29wZWRTbG90VGV4dENvbnRlbnRGaXg6IGZhbHNlLFxuICAvLyBUT0RPKFNURU5DSUwtODU0KTogUmVtb3ZlIGNvZGUgcmVsYXRlZCB0byBsZWdhY3kgc2hhZG93RG9tU2hpbSBmaWVsZFxuICBzaGFkb3dEb21TaGltOiBmYWxzZSxcbiAgLy8gVE9ETyhTVEVOQ0lMLTkxNCk6IHJlbW92ZSB0aGlzIG9wdGlvbiB3aGVuIGBleHBlcmltZW50YWxTbG90Rml4ZXNgIGlzIHRoZSBkZWZhdWx0IGJlaGF2aW9yXG4gIHNsb3RDaGlsZE5vZGVzRml4OiBmYWxzZSxcbiAgaW52aXNpYmxlUHJlaHlkcmF0aW9uOiB0cnVlLFxuICBwcm9wQm9vbGVhbjogdHJ1ZSxcbiAgcHJvcE51bWJlcjogdHJ1ZSxcbiAgcHJvcFN0cmluZzogdHJ1ZSxcbiAgY29uc3RydWN0YWJsZUNTUzogdHJ1ZSxcbiAgZGV2VG9vbHM6IGZhbHNlLFxuICBzaGFkb3dEZWxlZ2F0ZXNGb2N1czogdHJ1ZSxcbiAgaW5pdGlhbGl6ZU5leHRUaWNrOiBmYWxzZSxcbiAgYXN5bmNMb2FkaW5nOiB0cnVlLFxuICBhc3luY1F1ZXVlOiBmYWxzZSxcbiAgdHJhbnNmb3JtVGFnTmFtZTogZmFsc2UsXG4gIGF0dGFjaFN0eWxlczogdHJ1ZSxcbiAgLy8gVE9ETyhTVEVOQ0lMLTkxNCk6IHJlbW92ZSB0aGlzIG9wdGlvbiB3aGVuIGBleHBlcmltZW50YWxTbG90Rml4ZXNgIGlzIHRoZSBkZWZhdWx0IGJlaGF2aW9yXG4gIGV4cGVyaW1lbnRhbFNsb3RGaXhlczogZmFsc2Vcbn07XG52YXIgRW52ID0ge307XG52YXIgTkFNRVNQQUNFID0gKFxuICAvKiBkZWZhdWx0ICovXG4gIFwiYXBwXCJcbik7XG5leHBvcnQge1xuICBCVUlMRCxcbiAgRW52LFxuICBOQU1FU1BBQ0Vcbn07XG4iLCIvKlxuIFN0ZW5jaWwgQ2xpZW50IFBsYXRmb3JtIHY0LjM4LjAgfCBNSVQgTGljZW5zZWQgfCBodHRwczovL3N0ZW5jaWxqcy5jb21cbiAqL1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4ge1xuICBmb3IgKHZhciBuYW1lIGluIGFsbClcbiAgICBfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCB7IGdldDogYWxsW25hbWVdLCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xufTtcblxuLy8gc3JjL2NsaWVudC9jbGllbnQtYnVpbGQudHNcbmltcG9ydCB7IEJVSUxEIH0gZnJvbSBcIkBzdGVuY2lsL2NvcmUvaW50ZXJuYWwvYXBwLWRhdGFcIjtcbnZhciBCdWlsZCA9IHtcbiAgaXNEZXY6IEJVSUxELmlzRGV2ID8gdHJ1ZSA6IGZhbHNlLFxuICBpc0Jyb3dzZXI6IHRydWUsXG4gIGlzU2VydmVyOiBmYWxzZSxcbiAgaXNUZXN0aW5nOiBCVUlMRC5pc1Rlc3RpbmcgPyB0cnVlIDogZmFsc2Vcbn07XG5cbi8vIHNyYy9jbGllbnQvY2xpZW50LWhvc3QtcmVmLnRzXG5pbXBvcnQgeyBCVUlMRCBhcyBCVUlMRDMgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xuXG4vLyBzcmMvdXRpbHMvZXMyMDIyLXJld2lyZS1jbGFzcy1tZW1iZXJzLnRzXG5pbXBvcnQgeyBCVUlMRCBhcyBCVUlMRDIgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xuXG4vLyBzcmMvdXRpbHMvY29uc3RhbnRzLnRzXG52YXIgU1ZHX05TID0gXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiO1xudmFyIEhUTUxfTlMgPSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIjtcbnZhciBQcmltaXRpdmVUeXBlID0gLyogQF9fUFVSRV9fICovICgoUHJpbWl0aXZlVHlwZTIpID0+IHtcbiAgUHJpbWl0aXZlVHlwZTJbXCJVbmRlZmluZWRcIl0gPSBcInVuZGVmaW5lZFwiO1xuICBQcmltaXRpdmVUeXBlMltcIk51bGxcIl0gPSBcIm51bGxcIjtcbiAgUHJpbWl0aXZlVHlwZTJbXCJTdHJpbmdcIl0gPSBcInN0cmluZ1wiO1xuICBQcmltaXRpdmVUeXBlMltcIk51bWJlclwiXSA9IFwibnVtYmVyXCI7XG4gIFByaW1pdGl2ZVR5cGUyW1wiU3BlY2lhbE51bWJlclwiXSA9IFwibnVtYmVyXCI7XG4gIFByaW1pdGl2ZVR5cGUyW1wiQm9vbGVhblwiXSA9IFwiYm9vbGVhblwiO1xuICBQcmltaXRpdmVUeXBlMltcIkJpZ0ludFwiXSA9IFwiYmlnaW50XCI7XG4gIHJldHVybiBQcmltaXRpdmVUeXBlMjtcbn0pKFByaW1pdGl2ZVR5cGUgfHwge30pO1xudmFyIE5vblByaW1pdGl2ZVR5cGUgPSAvKiBAX19QVVJFX18gKi8gKChOb25QcmltaXRpdmVUeXBlMikgPT4ge1xuICBOb25QcmltaXRpdmVUeXBlMltcIkFycmF5XCJdID0gXCJhcnJheVwiO1xuICBOb25QcmltaXRpdmVUeXBlMltcIkRhdGVcIl0gPSBcImRhdGVcIjtcbiAgTm9uUHJpbWl0aXZlVHlwZTJbXCJNYXBcIl0gPSBcIm1hcFwiO1xuICBOb25QcmltaXRpdmVUeXBlMltcIk9iamVjdFwiXSA9IFwib2JqZWN0XCI7XG4gIE5vblByaW1pdGl2ZVR5cGUyW1wiUmVndWxhckV4cHJlc3Npb25cIl0gPSBcInJlZ2V4cFwiO1xuICBOb25QcmltaXRpdmVUeXBlMltcIlNldFwiXSA9IFwic2V0XCI7XG4gIE5vblByaW1pdGl2ZVR5cGUyW1wiQ2hhbm5lbFwiXSA9IFwiY2hhbm5lbFwiO1xuICBOb25QcmltaXRpdmVUeXBlMltcIlN5bWJvbFwiXSA9IFwic3ltYm9sXCI7XG4gIHJldHVybiBOb25QcmltaXRpdmVUeXBlMjtcbn0pKE5vblByaW1pdGl2ZVR5cGUgfHwge30pO1xudmFyIFRZUEVfQ09OU1RBTlQgPSBcInR5cGVcIjtcbnZhciBWQUxVRV9DT05TVEFOVCA9IFwidmFsdWVcIjtcbnZhciBTRVJJQUxJWkVEX1BSRUZJWCA9IFwic2VyaWFsaXplZDpcIjtcblxuLy8gc3JjL3V0aWxzL2VzMjAyMi1yZXdpcmUtY2xhc3MtbWVtYmVycy50c1xudmFyIHJlV2lyZUdldHRlclNldHRlciA9IChpbnN0YW5jZSwgaG9zdFJlZikgPT4ge1xuICB2YXIgX2E7XG4gIGNvbnN0IGNtcE1ldGEgPSBob3N0UmVmLiRjbXBNZXRhJDtcbiAgY29uc3QgbWVtYmVycyA9IE9iamVjdC5lbnRyaWVzKChfYSA9IGNtcE1ldGEuJG1lbWJlcnMkKSAhPSBudWxsID8gX2EgOiB7fSk7XG4gIG1lbWJlcnMubWFwKChbbWVtYmVyTmFtZSwgW21lbWJlckZsYWdzXV0pID0+IHtcbiAgICBpZiAoKEJVSUxEMi5zdGF0ZSB8fCBCVUlMRDIucHJvcCkgJiYgKG1lbWJlckZsYWdzICYgMzEgLyogUHJvcCAqLyB8fCBtZW1iZXJGbGFncyAmIDMyIC8qIFN0YXRlICovKSkge1xuICAgICAgY29uc3Qgb2dWYWx1ZSA9IGluc3RhbmNlW21lbWJlck5hbWVdO1xuICAgICAgY29uc3Qgb2dEZXNjcmlwdG9yID0gZ2V0UHJvcGVydHlEZXNjcmlwdG9yKE9iamVjdC5nZXRQcm90b3R5cGVPZihpbnN0YW5jZSksIG1lbWJlck5hbWUpIHx8IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaW5zdGFuY2UsIG1lbWJlck5hbWUpO1xuICAgICAgaWYgKG9nRGVzY3JpcHRvcikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5zdGFuY2UsIG1lbWJlck5hbWUsIHtcbiAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gb2dEZXNjcmlwdG9yLmdldC5jYWxsKHRoaXMpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0KG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBvZ0Rlc2NyaXB0b3Iuc2V0LmNhbGwodGhpcywgbmV3VmFsdWUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpbnN0YW5jZVttZW1iZXJOYW1lXSA9IGhvc3RSZWYuJGluc3RhbmNlVmFsdWVzJC5oYXMobWVtYmVyTmFtZSkgPyBob3N0UmVmLiRpbnN0YW5jZVZhbHVlcyQuZ2V0KG1lbWJlck5hbWUpIDogb2dWYWx1ZTtcbiAgICB9XG4gIH0pO1xufTtcbmZ1bmN0aW9uIGdldFByb3BlcnR5RGVzY3JpcHRvcihvYmosIG1lbWJlck5hbWUpIHtcbiAgd2hpbGUgKG9iaikge1xuICAgIGNvbnN0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgbWVtYmVyTmFtZSk7XG4gICAgaWYgKGRlc2MgPT0gbnVsbCA/IHZvaWQgMCA6IGRlc2MuZ2V0KSByZXR1cm4gZGVzYztcbiAgICBvYmogPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKTtcbiAgfVxuICByZXR1cm4gdm9pZCAwO1xufVxuXG4vLyBzcmMvY2xpZW50L2NsaWVudC1ob3N0LXJlZi50c1xudmFyIGdldEhvc3RSZWYgPSAocmVmKSA9PiB7XG4gIGlmIChyZWYuX19zdGVuY2lsX19nZXRIb3N0UmVmKSB7XG4gICAgcmV0dXJuIHJlZi5fX3N0ZW5jaWxfX2dldEhvc3RSZWYoKTtcbiAgfVxuICByZXR1cm4gdm9pZCAwO1xufTtcbnZhciByZWdpc3Rlckluc3RhbmNlID0gKGxhenlJbnN0YW5jZSwgaG9zdFJlZikgPT4ge1xuICBpZiAoIWhvc3RSZWYpIHJldHVybjtcbiAgbGF6eUluc3RhbmNlLl9fc3RlbmNpbF9fZ2V0SG9zdFJlZiA9ICgpID0+IGhvc3RSZWY7XG4gIGhvc3RSZWYuJGxhenlJbnN0YW5jZSQgPSBsYXp5SW5zdGFuY2U7XG4gIGlmIChCVUlMRDMubW9kZXJuUHJvcGVydHlEZWNscyAmJiAoQlVJTEQzLnN0YXRlIHx8IEJVSUxEMy5wcm9wKSkge1xuICAgIHJlV2lyZUdldHRlclNldHRlcihsYXp5SW5zdGFuY2UsIGhvc3RSZWYpO1xuICB9XG59O1xudmFyIHJlZ2lzdGVySG9zdCA9IChob3N0RWxlbWVudCwgY21wTWV0YSkgPT4ge1xuICBjb25zdCBob3N0UmVmID0ge1xuICAgICRmbGFncyQ6IDAsXG4gICAgJGhvc3RFbGVtZW50JDogaG9zdEVsZW1lbnQsXG4gICAgJGNtcE1ldGEkOiBjbXBNZXRhLFxuICAgICRpbnN0YW5jZVZhbHVlcyQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksXG4gICAgJHNlcmlhbGl6ZXJWYWx1ZXMkOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpXG4gIH07XG4gIGlmIChCVUlMRDMuaXNEZXYpIHtcbiAgICBob3N0UmVmLiRyZW5kZXJDb3VudCQgPSAwO1xuICB9XG4gIGlmIChCVUlMRDMubWV0aG9kICYmIEJVSUxEMy5sYXp5TG9hZCkge1xuICAgIGhvc3RSZWYuJG9uSW5zdGFuY2VQcm9taXNlJCA9IG5ldyBQcm9taXNlKChyKSA9PiBob3N0UmVmLiRvbkluc3RhbmNlUmVzb2x2ZSQgPSByKTtcbiAgfVxuICBpZiAoQlVJTEQzLmFzeW5jTG9hZGluZykge1xuICAgIGhvc3RSZWYuJG9uUmVhZHlQcm9taXNlJCA9IG5ldyBQcm9taXNlKChyKSA9PiBob3N0UmVmLiRvblJlYWR5UmVzb2x2ZSQgPSByKTtcbiAgICBob3N0RWxlbWVudFtcInMtcFwiXSA9IFtdO1xuICAgIGhvc3RFbGVtZW50W1wicy1yY1wiXSA9IFtdO1xuICB9XG4gIGlmIChCVUlMRDMubGF6eUxvYWQpIHtcbiAgICBob3N0UmVmLiRmZXRjaGVkQ2JMaXN0JCA9IFtdO1xuICB9XG4gIGNvbnN0IHJlZiA9IGhvc3RSZWY7XG4gIGhvc3RFbGVtZW50Ll9fc3RlbmNpbF9fZ2V0SG9zdFJlZiA9ICgpID0+IHJlZjtcbiAgaWYgKCFCVUlMRDMubGF6eUxvYWQgJiYgQlVJTEQzLm1vZGVyblByb3BlcnR5RGVjbHMgJiYgKEJVSUxEMy5zdGF0ZSB8fCBCVUlMRDMucHJvcCkpIHtcbiAgICByZVdpcmVHZXR0ZXJTZXR0ZXIoaG9zdEVsZW1lbnQsIGhvc3RSZWYpO1xuICB9XG4gIHJldHVybiByZWY7XG59O1xudmFyIGlzTWVtYmVySW5FbGVtZW50ID0gKGVsbSwgbWVtYmVyTmFtZSkgPT4gbWVtYmVyTmFtZSBpbiBlbG07XG5cbi8vIHNyYy9jbGllbnQvY2xpZW50LWxvYWQtbW9kdWxlLnRzXG5pbXBvcnQgeyBCVUlMRCBhcyBCVUlMRDUgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xuXG4vLyBzcmMvY2xpZW50L2NsaWVudC1sb2cudHNcbmltcG9ydCB7IEJVSUxEIGFzIEJVSUxENCB9IGZyb20gXCJAc3RlbmNpbC9jb3JlL2ludGVybmFsL2FwcC1kYXRhXCI7XG52YXIgY3VzdG9tRXJyb3I7XG52YXIgY29uc29sZUVycm9yID0gKGUsIGVsKSA9PiAoY3VzdG9tRXJyb3IgfHwgY29uc29sZS5lcnJvcikoZSwgZWwpO1xudmFyIFNURU5DSUxfREVWX01PREUgPSBCVUlMRDQuaXNUZXN0aW5nID8gW1wiU1RFTkNJTDpcIl0gOiBbXG4gIFwiJWNzdGVuY2lsXCIsXG4gIFwiY29sb3I6IHdoaXRlO2JhY2tncm91bmQ6IzRjNDdmZjtmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOjEwcHg7IHBhZGRpbmc6MnB4IDZweDsgYm9yZGVyLXJhZGl1czogNXB4XCJcbl07XG52YXIgY29uc29sZURldkVycm9yID0gKC4uLm0pID0+IGNvbnNvbGUuZXJyb3IoLi4uU1RFTkNJTF9ERVZfTU9ERSwgLi4ubSk7XG52YXIgY29uc29sZURldldhcm4gPSAoLi4ubSkgPT4gY29uc29sZS53YXJuKC4uLlNURU5DSUxfREVWX01PREUsIC4uLm0pO1xudmFyIGNvbnNvbGVEZXZJbmZvID0gKC4uLm0pID0+IGNvbnNvbGUuaW5mbyguLi5TVEVOQ0lMX0RFVl9NT0RFLCAuLi5tKTtcbnZhciBzZXRFcnJvckhhbmRsZXIgPSAoaGFuZGxlcikgPT4gY3VzdG9tRXJyb3IgPSBoYW5kbGVyO1xuXG4vLyBzcmMvY2xpZW50L2NsaWVudC1sb2FkLW1vZHVsZS50c1xudmFyIGNtcE1vZHVsZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xudmFyIE1PRFVMRV9JTVBPUlRfUFJFRklYID0gXCIuL1wiO1xudmFyIGxvYWRNb2R1bGUgPSAoY21wTWV0YSwgaG9zdFJlZiwgaG1yVmVyc2lvbklkKSA9PiB7XG4gIGNvbnN0IGV4cG9ydE5hbWUgPSBjbXBNZXRhLiR0YWdOYW1lJC5yZXBsYWNlKC8tL2csIFwiX1wiKTtcbiAgY29uc3QgYnVuZGxlSWQgPSBjbXBNZXRhLiRsYXp5QnVuZGxlSWQkO1xuICBpZiAoQlVJTEQ1LmlzRGV2ICYmIHR5cGVvZiBidW5kbGVJZCAhPT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnNvbGVEZXZFcnJvcihcbiAgICAgIGBUcnlpbmcgdG8gbGF6aWx5IGxvYWQgY29tcG9uZW50IDwke2NtcE1ldGEuJHRhZ05hbWUkfT4gd2l0aCBzdHlsZSBtb2RlIFwiJHtob3N0UmVmLiRtb2RlTmFtZSR9XCIsIGJ1dCBpdCBkb2VzIG5vdCBleGlzdC5gXG4gICAgKTtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9IGVsc2UgaWYgKCFidW5kbGVJZCkge1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbiAgY29uc3QgbW9kdWxlID0gIUJVSUxENS5ob3RNb2R1bGVSZXBsYWNlbWVudCA/IGNtcE1vZHVsZXMuZ2V0KGJ1bmRsZUlkKSA6IGZhbHNlO1xuICBpZiAobW9kdWxlKSB7XG4gICAgcmV0dXJuIG1vZHVsZVtleHBvcnROYW1lXTtcbiAgfVxuICAvKiFfX1NURU5DSUxfU1RBVElDX0lNUE9SVF9TV0lUQ0hfXyovXG4gIHJldHVybiBpbXBvcnQoXG4gICAgLyogQHZpdGUtaWdub3JlICovXG4gICAgLyogd2VicGFja0luY2x1ZGU6IC9cXC5lbnRyeVxcLmpzJC8gKi9cbiAgICAvKiB3ZWJwYWNrRXhjbHVkZTogL1xcLnN5c3RlbVxcLmVudHJ5XFwuanMkLyAqL1xuICAgIC8qIHdlYnBhY2tNb2RlOiBcImxhenlcIiAqL1xuICAgIGAuLyR7YnVuZGxlSWR9LmVudHJ5LmpzJHtCVUlMRDUuaG90TW9kdWxlUmVwbGFjZW1lbnQgJiYgaG1yVmVyc2lvbklkID8gXCI/cy1obXI9XCIgKyBobXJWZXJzaW9uSWQgOiBcIlwifWBcbiAgKS50aGVuKFxuICAgIChpbXBvcnRlZE1vZHVsZSkgPT4ge1xuICAgICAgaWYgKCFCVUlMRDUuaG90TW9kdWxlUmVwbGFjZW1lbnQpIHtcbiAgICAgICAgY21wTW9kdWxlcy5zZXQoYnVuZGxlSWQsIGltcG9ydGVkTW9kdWxlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpbXBvcnRlZE1vZHVsZVtleHBvcnROYW1lXTtcbiAgICB9LFxuICAgIChlKSA9PiB7XG4gICAgICBjb25zb2xlRXJyb3IoZSwgaG9zdFJlZi4kaG9zdEVsZW1lbnQkKTtcbiAgICB9XG4gICk7XG59O1xuXG4vLyBzcmMvY2xpZW50L2NsaWVudC1zdHlsZS50c1xudmFyIHN0eWxlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG52YXIgbW9kZVJlc29sdXRpb25DaGFpbiA9IFtdO1xudmFyIHNldFNjb3BlZFNTUiA9IChfb3B0cykgPT4ge1xufTtcbnZhciBuZWVkc1Njb3BlZFNTUiA9ICgpID0+IGZhbHNlO1xuXG4vLyBzcmMvY2xpZW50L2NsaWVudC10YXNrLXF1ZXVlLnRzXG5pbXBvcnQgeyBCVUlMRCBhcyBCVUlMRDcgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xuXG4vLyBzcmMvcnVudGltZS9ydW50aW1lLWNvbnN0YW50cy50c1xudmFyIENPTlRFTlRfUkVGX0lEID0gXCJyXCI7XG52YXIgT1JHX0xPQ0FUSU9OX0lEID0gXCJvXCI7XG52YXIgU0xPVF9OT0RFX0lEID0gXCJzXCI7XG52YXIgVEVYVF9OT0RFX0lEID0gXCJ0XCI7XG52YXIgQ09NTUVOVF9OT0RFX0lEID0gXCJjXCI7XG52YXIgSFlEUkFURV9JRCA9IFwicy1pZFwiO1xudmFyIEhZRFJBVEVEX1NUWUxFX0lEID0gXCJzdHktaWRcIjtcbnZhciBIWURSQVRFX0NISUxEX0lEID0gXCJjLWlkXCI7XG52YXIgSFlEUkFURURfQ1NTID0gXCJ7dmlzaWJpbGl0eTpoaWRkZW59Lmh5ZHJhdGVke3Zpc2liaWxpdHk6aW5oZXJpdH1cIjtcbnZhciBTVEVOQ0lMX0RPQ19EQVRBID0gXCJfc3RlbmNpbERvY0RhdGFcIjtcbnZhciBERUZBVUxUX0RPQ19EQVRBID0ge1xuICBob3N0SWRzOiAwLFxuICByb290TGV2ZWxJZHM6IDAsXG4gIHN0YXRpY0NvbXBvbmVudHM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KClcbn07XG52YXIgU0xPVF9GQl9DU1MgPSBcInNsb3QtZmJ7ZGlzcGxheTpjb250ZW50c31zbG90LWZiW2hpZGRlbl17ZGlzcGxheTpub25lfVwiO1xudmFyIFhMSU5LX05TID0gXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCI7XG52YXIgRk9STV9BU1NPQ0lBVEVEX0NVU1RPTV9FTEVNRU5UX0NBTExCQUNLUyA9IFtcbiAgXCJmb3JtQXNzb2NpYXRlZENhbGxiYWNrXCIsXG4gIFwiZm9ybVJlc2V0Q2FsbGJhY2tcIixcbiAgXCJmb3JtRGlzYWJsZWRDYWxsYmFja1wiLFxuICBcImZvcm1TdGF0ZVJlc3RvcmVDYWxsYmFja1wiXG5dO1xuXG4vLyBzcmMvY2xpZW50L2NsaWVudC13aW5kb3cudHNcbmltcG9ydCB7IEJVSUxEIGFzIEJVSUxENiB9IGZyb20gXCJAc3RlbmNpbC9jb3JlL2ludGVybmFsL2FwcC1kYXRhXCI7XG52YXIgd2luID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9O1xudmFyIEggPSB3aW4uSFRNTEVsZW1lbnQgfHwgY2xhc3Mge1xufTtcbnZhciBwbHQgPSB7XG4gICRmbGFncyQ6IDAsXG4gICRyZXNvdXJjZXNVcmwkOiBcIlwiLFxuICBqbXA6IChoMikgPT4gaDIoKSxcbiAgcmFmOiAoaDIpID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZShoMiksXG4gIGFlbDogKGVsLCBldmVudE5hbWUsIGxpc3RlbmVyLCBvcHRzKSA9PiBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIsIG9wdHMpLFxuICByZWw6IChlbCwgZXZlbnROYW1lLCBsaXN0ZW5lciwgb3B0cykgPT4gZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyLCBvcHRzKSxcbiAgY2U6IChldmVudE5hbWUsIG9wdHMpID0+IG5ldyBDdXN0b21FdmVudChldmVudE5hbWUsIG9wdHMpXG59O1xudmFyIHNldFBsYXRmb3JtSGVscGVycyA9IChoZWxwZXJzKSA9PiB7XG4gIE9iamVjdC5hc3NpZ24ocGx0LCBoZWxwZXJzKTtcbn07XG52YXIgc3VwcG9ydHNTaGFkb3cgPSBCVUlMRDYuc2hhZG93RG9tO1xudmFyIHN1cHBvcnRzTGlzdGVuZXJPcHRpb25zID0gLyogQF9fUFVSRV9fICovICgoKSA9PiB7XG4gIHZhciBfYTtcbiAgbGV0IHN1cHBvcnRzTGlzdGVuZXJPcHRpb25zMiA9IGZhbHNlO1xuICB0cnkge1xuICAgIChfYSA9IHdpbi5kb2N1bWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImVcIixcbiAgICAgIG51bGwsXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sIFwicGFzc2l2ZVwiLCB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICBzdXBwb3J0c0xpc3RlbmVyT3B0aW9uczIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICByZXR1cm4gc3VwcG9ydHNMaXN0ZW5lck9wdGlvbnMyO1xufSkoKTtcbnZhciBwcm9taXNlUmVzb2x2ZSA9ICh2KSA9PiBQcm9taXNlLnJlc29sdmUodik7XG52YXIgc3VwcG9ydHNDb25zdHJ1Y3RhYmxlU3R5bGVzaGVldHMgPSBCVUlMRDYuY29uc3RydWN0YWJsZUNTUyA/IC8qIEBfX1BVUkVfXyAqLyAoKCkgPT4ge1xuICB0cnkge1xuICAgIG5ldyBDU1NTdHlsZVNoZWV0KCk7XG4gICAgcmV0dXJuIHR5cGVvZiBuZXcgQ1NTU3R5bGVTaGVldCgpLnJlcGxhY2VTeW5jID09PSBcImZ1bmN0aW9uXCI7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59KSgpIDogZmFsc2U7XG52YXIgc3VwcG9ydHNNdXRhYmxlQWRvcHRlZFN0eWxlU2hlZXRzID0gc3VwcG9ydHNDb25zdHJ1Y3RhYmxlU3R5bGVzaGVldHMgPyAvKiBAX19QVVJFX18gKi8gKCgpID0+ICEhd2luLmRvY3VtZW50ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luLmRvY3VtZW50LmFkb3B0ZWRTdHlsZVNoZWV0cywgXCJsZW5ndGhcIikud3JpdGFibGUpKCkgOiBmYWxzZTtcblxuLy8gc3JjL2NsaWVudC9jbGllbnQtdGFzay1xdWV1ZS50c1xudmFyIHF1ZXVlQ29uZ2VzdGlvbiA9IDA7XG52YXIgcXVldWVQZW5kaW5nID0gZmFsc2U7XG52YXIgcXVldWVEb21SZWFkcyA9IFtdO1xudmFyIHF1ZXVlRG9tV3JpdGVzID0gW107XG52YXIgcXVldWVEb21Xcml0ZXNMb3cgPSBbXTtcbnZhciBxdWV1ZVRhc2sgPSAocXVldWUsIHdyaXRlKSA9PiAoY2IpID0+IHtcbiAgcXVldWUucHVzaChjYik7XG4gIGlmICghcXVldWVQZW5kaW5nKSB7XG4gICAgcXVldWVQZW5kaW5nID0gdHJ1ZTtcbiAgICBpZiAod3JpdGUgJiYgcGx0LiRmbGFncyQgJiA0IC8qIHF1ZXVlU3luYyAqLykge1xuICAgICAgbmV4dFRpY2soZmx1c2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwbHQucmFmKGZsdXNoKTtcbiAgICB9XG4gIH1cbn07XG52YXIgY29uc3VtZSA9IChxdWV1ZSkgPT4ge1xuICBmb3IgKGxldCBpMiA9IDA7IGkyIDwgcXVldWUubGVuZ3RoOyBpMisrKSB7XG4gICAgdHJ5IHtcbiAgICAgIHF1ZXVlW2kyXShwZXJmb3JtYW5jZS5ub3coKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZUVycm9yKGUpO1xuICAgIH1cbiAgfVxuICBxdWV1ZS5sZW5ndGggPSAwO1xufTtcbnZhciBjb25zdW1lVGltZW91dCA9IChxdWV1ZSwgdGltZW91dCkgPT4ge1xuICBsZXQgaTIgPSAwO1xuICBsZXQgdHMgPSAwO1xuICB3aGlsZSAoaTIgPCBxdWV1ZS5sZW5ndGggJiYgKHRzID0gcGVyZm9ybWFuY2Uubm93KCkpIDwgdGltZW91dCkge1xuICAgIHRyeSB7XG4gICAgICBxdWV1ZVtpMisrXSh0cyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZUVycm9yKGUpO1xuICAgIH1cbiAgfVxuICBpZiAoaTIgPT09IHF1ZXVlLmxlbmd0aCkge1xuICAgIHF1ZXVlLmxlbmd0aCA9IDA7XG4gIH0gZWxzZSBpZiAoaTIgIT09IDApIHtcbiAgICBxdWV1ZS5zcGxpY2UoMCwgaTIpO1xuICB9XG59O1xudmFyIGZsdXNoID0gKCkgPT4ge1xuICBpZiAoQlVJTEQ3LmFzeW5jUXVldWUpIHtcbiAgICBxdWV1ZUNvbmdlc3Rpb24rKztcbiAgfVxuICBjb25zdW1lKHF1ZXVlRG9tUmVhZHMpO1xuICBpZiAoQlVJTEQ3LmFzeW5jUXVldWUpIHtcbiAgICBjb25zdCB0aW1lb3V0ID0gKHBsdC4kZmxhZ3MkICYgNiAvKiBxdWV1ZU1hc2sgKi8pID09PSAyIC8qIGFwcExvYWRlZCAqLyA/IHBlcmZvcm1hbmNlLm5vdygpICsgMTQgKiBNYXRoLmNlaWwocXVldWVDb25nZXN0aW9uICogKDEgLyAxMCkpIDogSW5maW5pdHk7XG4gICAgY29uc3VtZVRpbWVvdXQocXVldWVEb21Xcml0ZXMsIHRpbWVvdXQpO1xuICAgIGNvbnN1bWVUaW1lb3V0KHF1ZXVlRG9tV3JpdGVzTG93LCB0aW1lb3V0KTtcbiAgICBpZiAocXVldWVEb21Xcml0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgcXVldWVEb21Xcml0ZXNMb3cucHVzaCguLi5xdWV1ZURvbVdyaXRlcyk7XG4gICAgICBxdWV1ZURvbVdyaXRlcy5sZW5ndGggPSAwO1xuICAgIH1cbiAgICBpZiAocXVldWVQZW5kaW5nID0gcXVldWVEb21SZWFkcy5sZW5ndGggKyBxdWV1ZURvbVdyaXRlcy5sZW5ndGggKyBxdWV1ZURvbVdyaXRlc0xvdy5sZW5ndGggPiAwKSB7XG4gICAgICBwbHQucmFmKGZsdXNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcXVldWVDb25nZXN0aW9uID0gMDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc3VtZShxdWV1ZURvbVdyaXRlcyk7XG4gICAgaWYgKHF1ZXVlUGVuZGluZyA9IHF1ZXVlRG9tUmVhZHMubGVuZ3RoID4gMCkge1xuICAgICAgcGx0LnJhZihmbHVzaCk7XG4gICAgfVxuICB9XG59O1xudmFyIG5leHRUaWNrID0gKGNiKSA9PiBwcm9taXNlUmVzb2x2ZSgpLnRoZW4oY2IpO1xudmFyIHJlYWRUYXNrID0gLyogQF9fUFVSRV9fICovIHF1ZXVlVGFzayhxdWV1ZURvbVJlYWRzLCBmYWxzZSk7XG52YXIgd3JpdGVUYXNrID0gLyogQF9fUFVSRV9fICovIHF1ZXVlVGFzayhxdWV1ZURvbVdyaXRlcywgdHJ1ZSk7XG5cbi8vIHNyYy9jbGllbnQvaW5kZXgudHNcbmltcG9ydCB7IEJVSUxEIGFzIEJVSUxEMzEsIEVudiwgTkFNRVNQQUNFIGFzIE5BTUVTUEFDRTIgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xuXG4vLyBzcmMvcnVudGltZS9hc3NldC1wYXRoLnRzXG52YXIgZ2V0QXNzZXRQYXRoID0gKHBhdGgpID0+IHtcbiAgY29uc3QgYXNzZXRVcmwgPSBuZXcgVVJMKHBhdGgsIHBsdC4kcmVzb3VyY2VzVXJsJCk7XG4gIHJldHVybiBhc3NldFVybC5vcmlnaW4gIT09IHdpbi5sb2NhdGlvbi5vcmlnaW4gPyBhc3NldFVybC5ocmVmIDogYXNzZXRVcmwucGF0aG5hbWU7XG59O1xudmFyIHNldEFzc2V0UGF0aCA9IChwYXRoKSA9PiBwbHQuJHJlc291cmNlc1VybCQgPSBwYXRoO1xuXG4vLyBzcmMvcnVudGltZS9ib290c3RyYXAtY3VzdG9tLWVsZW1lbnQudHNcbmltcG9ydCB7IEJVSUxEIGFzIEJVSUxEMjcgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xuXG4vLyBzcmMvdXRpbHMvaGVscGVycy50c1xudmFyIGlzRGVmID0gKHYpID0+IHYgIT0gbnVsbCAmJiB2ICE9PSB2b2lkIDA7XG52YXIgaXNDb21wbGV4VHlwZSA9IChvKSA9PiB7XG4gIG8gPSB0eXBlb2YgbztcbiAgcmV0dXJuIG8gPT09IFwib2JqZWN0XCIgfHwgbyA9PT0gXCJmdW5jdGlvblwiO1xufTtcblxuLy8gc3JjL3V0aWxzL3F1ZXJ5LW5vbmNlLW1ldGEtdGFnLWNvbnRlbnQudHNcbmZ1bmN0aW9uIHF1ZXJ5Tm9uY2VNZXRhVGFnQ29udGVudChkb2MpIHtcbiAgdmFyIF9hLCBfYiwgX2M7XG4gIHJldHVybiAoX2MgPSAoX2IgPSAoX2EgPSBkb2MuaGVhZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT1cImNzcC1ub25jZVwiXScpKSA9PSBudWxsID8gdm9pZCAwIDogX2IuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKSkgIT0gbnVsbCA/IF9jIDogdm9pZCAwO1xufVxuXG4vLyBzcmMvdXRpbHMvcmVndWxhci1leHByZXNzaW9uLnRzXG52YXIgZXNjYXBlUmVnRXhwU3BlY2lhbENoYXJhY3RlcnMgPSAodGV4dCkgPT4ge1xuICByZXR1cm4gdGV4dC5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7XG59O1xuXG4vLyBzcmMvdXRpbHMvcmVtb3RlLXZhbHVlLnRzXG52YXIgUmVtb3RlVmFsdWUgPSBjbGFzcyBfUmVtb3RlVmFsdWUge1xuICAvKipcbiAgICogRGVzZXJpYWxpemVzIGEgTG9jYWxWYWx1ZSBzZXJpYWxpemVkIG9iamVjdCBiYWNrIHRvIGl0cyBvcmlnaW5hbCBKYXZhU2NyaXB0IHJlcHJlc2VudGF0aW9uXG4gICAqXG4gICAqIEBwYXJhbSBzZXJpYWxpemVkIFRoZSBzZXJpYWxpemVkIExvY2FsVmFsdWUgb2JqZWN0XG4gICAqIEByZXR1cm5zIFRoZSBvcmlnaW5hbCBKYXZhU2NyaXB0IHZhbHVlL29iamVjdFxuICAgKi9cbiAgc3RhdGljIGZyb21Mb2NhbFZhbHVlKHNlcmlhbGl6ZWQpIHtcbiAgICBjb25zdCB0eXBlID0gc2VyaWFsaXplZFtUWVBFX0NPTlNUQU5UXTtcbiAgICBjb25zdCB2YWx1ZSA9IFZBTFVFX0NPTlNUQU5UIGluIHNlcmlhbGl6ZWQgPyBzZXJpYWxpemVkW1ZBTFVFX0NPTlNUQU5UXSA6IHZvaWQgMDtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgXCJzdHJpbmdcIiAvKiBTdHJpbmcgKi86XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIGNhc2UgXCJib29sZWFuXCIgLyogQm9vbGVhbiAqLzpcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgY2FzZSBcImJpZ2ludFwiIC8qIEJpZ0ludCAqLzpcbiAgICAgICAgcmV0dXJuIEJpZ0ludCh2YWx1ZSk7XG4gICAgICBjYXNlIFwidW5kZWZpbmVkXCIgLyogVW5kZWZpbmVkICovOlxuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgY2FzZSBcIm51bGxcIiAvKiBOdWxsICovOlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIGNhc2UgXCJudW1iZXJcIiAvKiBOdW1iZXIgKi86XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gXCJOYU5cIikgcmV0dXJuIE5hTjtcbiAgICAgICAgaWYgKHZhbHVlID09PSBcIi0wXCIpIHJldHVybiAtMDtcbiAgICAgICAgaWYgKHZhbHVlID09PSBcIkluZmluaXR5XCIpIHJldHVybiBJbmZpbml0eTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBcIi1JbmZpbml0eVwiKSByZXR1cm4gLUluZmluaXR5O1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICBjYXNlIFwiYXJyYXlcIiAvKiBBcnJheSAqLzpcbiAgICAgICAgcmV0dXJuIHZhbHVlLm1hcCgoaXRlbSkgPT4gX1JlbW90ZVZhbHVlLmZyb21Mb2NhbFZhbHVlKGl0ZW0pKTtcbiAgICAgIGNhc2UgXCJkYXRlXCIgLyogRGF0ZSAqLzpcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHZhbHVlKTtcbiAgICAgIGNhc2UgXCJtYXBcIiAvKiBNYXAgKi86XG4gICAgICAgIGNvbnN0IG1hcDIgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbF0gb2YgdmFsdWUpIHtcbiAgICAgICAgICBjb25zdCBkZXNlcmlhbGl6ZWRLZXkgPSB0eXBlb2Yga2V5ID09PSBcIm9iamVjdFwiICYmIGtleSAhPT0gbnVsbCA/IF9SZW1vdGVWYWx1ZS5mcm9tTG9jYWxWYWx1ZShrZXkpIDoga2V5O1xuICAgICAgICAgIGNvbnN0IGRlc2VyaWFsaXplZFZhbHVlID0gX1JlbW90ZVZhbHVlLmZyb21Mb2NhbFZhbHVlKHZhbCk7XG4gICAgICAgICAgbWFwMi5zZXQoZGVzZXJpYWxpemVkS2V5LCBkZXNlcmlhbGl6ZWRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hcDI7XG4gICAgICBjYXNlIFwib2JqZWN0XCIgLyogT2JqZWN0ICovOlxuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWxdIG9mIHZhbHVlKSB7XG4gICAgICAgICAgb2JqW2tleV0gPSBfUmVtb3RlVmFsdWUuZnJvbUxvY2FsVmFsdWUodmFsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgY2FzZSBcInJlZ2V4cFwiIC8qIFJlZ3VsYXJFeHByZXNzaW9uICovOlxuICAgICAgICBjb25zdCB7IHBhdHRlcm4sIGZsYWdzIH0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAocGF0dGVybiwgZmxhZ3MpO1xuICAgICAgY2FzZSBcInNldFwiIC8qIFNldCAqLzpcbiAgICAgICAgY29uc3Qgc2V0ID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHZhbHVlKSB7XG4gICAgICAgICAgc2V0LmFkZChfUmVtb3RlVmFsdWUuZnJvbUxvY2FsVmFsdWUoaXRlbSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXQ7XG4gICAgICBjYXNlIFwic3ltYm9sXCIgLyogU3ltYm9sICovOlxuICAgICAgICByZXR1cm4gU3ltYm9sKHZhbHVlKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgdHlwZTogJHt0eXBlfWApO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXRpbGl0eSBtZXRob2QgdG8gZGVzZXJpYWxpemUgbXVsdGlwbGUgTG9jYWxWYWx1ZXMgYXQgb25jZVxuICAgKlxuICAgKiBAcGFyYW0gc2VyaWFsaXplZFZhbHVlcyBBcnJheSBvZiBzZXJpYWxpemVkIExvY2FsVmFsdWUgb2JqZWN0c1xuICAgKiBAcmV0dXJucyBBcnJheSBvZiBkZXNlcmlhbGl6ZWQgSmF2YVNjcmlwdCB2YWx1ZXNcbiAgICovXG4gIHN0YXRpYyBmcm9tTG9jYWxWYWx1ZUFycmF5KHNlcmlhbGl6ZWRWYWx1ZXMpIHtcbiAgICByZXR1cm4gc2VyaWFsaXplZFZhbHVlcy5tYXAoKHZhbHVlKSA9PiBfUmVtb3RlVmFsdWUuZnJvbUxvY2FsVmFsdWUodmFsdWUpKTtcbiAgfVxuICAvKipcbiAgICogVmVyaWZpZXMgaWYgdGhlIGdpdmVuIG9iamVjdCBtYXRjaGVzIHRoZSBzdHJ1Y3R1cmUgb2YgYSBzZXJpYWxpemVkIExvY2FsVmFsdWVcbiAgICpcbiAgICogQHBhcmFtIG9iaiBPYmplY3QgdG8gdmVyaWZ5XG4gICAqIEByZXR1cm5zIGJvb2xlYW4gaW5kaWNhdGluZyBpZiB0aGUgb2JqZWN0IGhhcyBMb2NhbFZhbHVlIHN0cnVjdHVyZVxuICAgKi9cbiAgc3RhdGljIGlzTG9jYWxWYWx1ZU9iamVjdChvYmopIHtcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIiB8fCBvYmogPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoVFlQRV9DT05TVEFOVCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IG9ialtUWVBFX0NPTlNUQU5UXTtcbiAgICBjb25zdCBoYXNUeXBlUHJvcGVydHkgPSBPYmplY3QudmFsdWVzKHsgLi4uUHJpbWl0aXZlVHlwZSwgLi4uTm9uUHJpbWl0aXZlVHlwZSB9KS5pbmNsdWRlcyh0eXBlKTtcbiAgICBpZiAoIWhhc1R5cGVQcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAodHlwZSAhPT0gXCJudWxsXCIgLyogTnVsbCAqLyAmJiB0eXBlICE9PSBcInVuZGVmaW5lZFwiIC8qIFVuZGVmaW5lZCAqLykge1xuICAgICAgcmV0dXJuIG9iai5oYXNPd25Qcm9wZXJ0eShWQUxVRV9DT05TVEFOVCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG4vLyBzcmMvdXRpbHMvcmVzdWx0LnRzXG52YXIgcmVzdWx0X2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHJlc3VsdF9leHBvcnRzLCB7XG4gIGVycjogKCkgPT4gZXJyLFxuICBtYXA6ICgpID0+IG1hcCxcbiAgb2s6ICgpID0+IG9rLFxuICB1bndyYXA6ICgpID0+IHVud3JhcCxcbiAgdW53cmFwRXJyOiAoKSA9PiB1bndyYXBFcnJcbn0pO1xudmFyIG9rID0gKHZhbHVlKSA9PiAoe1xuICBpc09rOiB0cnVlLFxuICBpc0VycjogZmFsc2UsXG4gIHZhbHVlXG59KTtcbnZhciBlcnIgPSAodmFsdWUpID0+ICh7XG4gIGlzT2s6IGZhbHNlLFxuICBpc0VycjogdHJ1ZSxcbiAgdmFsdWVcbn0pO1xuZnVuY3Rpb24gbWFwKHJlc3VsdCwgZm4pIHtcbiAgaWYgKHJlc3VsdC5pc09rKSB7XG4gICAgY29uc3QgdmFsID0gZm4ocmVzdWx0LnZhbHVlKTtcbiAgICBpZiAodmFsIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgcmV0dXJuIHZhbC50aGVuKChuZXdWYWwpID0+IG9rKG5ld1ZhbCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb2sodmFsKTtcbiAgICB9XG4gIH1cbiAgaWYgKHJlc3VsdC5pc0Vycikge1xuICAgIGNvbnN0IHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgIHJldHVybiBlcnIodmFsdWUpO1xuICB9XG4gIHRocm93IFwic2hvdWxkIG5ldmVyIGdldCBoZXJlXCI7XG59XG52YXIgdW53cmFwID0gKHJlc3VsdCkgPT4ge1xuICBpZiAocmVzdWx0LmlzT2spIHtcbiAgICByZXR1cm4gcmVzdWx0LnZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHRocm93IHJlc3VsdC52YWx1ZTtcbiAgfVxufTtcbnZhciB1bndyYXBFcnIgPSAocmVzdWx0KSA9PiB7XG4gIGlmIChyZXN1bHQuaXNFcnIpIHtcbiAgICByZXR1cm4gcmVzdWx0LnZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHRocm93IHJlc3VsdC52YWx1ZTtcbiAgfVxufTtcblxuLy8gc3JjL3V0aWxzL3NlcmlhbGl6ZS50c1xuZnVuY3Rpb24gZGVzZXJpYWxpemVQcm9wZXJ0eSh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInN0cmluZ1wiIHx8ICF2YWx1ZS5zdGFydHNXaXRoKFNFUklBTElaRURfUFJFRklYKSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICByZXR1cm4gUmVtb3RlVmFsdWUuZnJvbUxvY2FsVmFsdWUoSlNPTi5wYXJzZShhdG9iKHZhbHVlLnNsaWNlKFNFUklBTElaRURfUFJFRklYLmxlbmd0aCkpKSk7XG59XG5cbi8vIHNyYy91dGlscy9zaGFkb3ctcm9vdC50c1xuaW1wb3J0IHsgQlVJTEQgYXMgQlVJTEQ4IH0gZnJvbSBcIkBzdGVuY2lsL2NvcmUvaW50ZXJuYWwvYXBwLWRhdGFcIjtcbmltcG9ydCB7IGdsb2JhbFN0eWxlcyB9IGZyb20gXCJAc3RlbmNpbC9jb3JlL2ludGVybmFsL2FwcC1nbG9iYWxzXCI7XG5cbi8vIHNyYy91dGlscy9zdHlsZS50c1xuZnVuY3Rpb24gY3JlYXRlU3R5bGVTaGVldElmTmVlZGVkQW5kU3VwcG9ydGVkKHN0eWxlczIpIHtcbiAgaWYgKCFzdHlsZXMyIHx8ICFzdXBwb3J0c0NvbnN0cnVjdGFibGVTdHlsZXNoZWV0cykgcmV0dXJuIHZvaWQgMDtcbiAgY29uc3Qgc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xuICBzaGVldC5yZXBsYWNlU3luYyhzdHlsZXMyKTtcbiAgcmV0dXJuIHNoZWV0O1xufVxuXG4vLyBzcmMvdXRpbHMvc2hhZG93LXJvb3QudHNcbnZhciBnbG9iYWxTdHlsZVNoZWV0O1xuZnVuY3Rpb24gY3JlYXRlU2hhZG93Um9vdChjbXBNZXRhKSB7XG4gIHZhciBfYTtcbiAgY29uc3Qgc2hhZG93Um9vdCA9IEJVSUxEOC5zaGFkb3dEZWxlZ2F0ZXNGb2N1cyA/IHRoaXMuYXR0YWNoU2hhZG93KHtcbiAgICBtb2RlOiBcIm9wZW5cIixcbiAgICBkZWxlZ2F0ZXNGb2N1czogISEoY21wTWV0YS4kZmxhZ3MkICYgMTYgLyogc2hhZG93RGVsZWdhdGVzRm9jdXMgKi8pXG4gIH0pIDogdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcbiAgaWYgKGdsb2JhbFN0eWxlU2hlZXQgPT09IHZvaWQgMCkgZ2xvYmFsU3R5bGVTaGVldCA9IChfYSA9IGNyZWF0ZVN0eWxlU2hlZXRJZk5lZWRlZEFuZFN1cHBvcnRlZChnbG9iYWxTdHlsZXMpKSAhPSBudWxsID8gX2EgOiBudWxsO1xuICBpZiAoZ2xvYmFsU3R5bGVTaGVldCkge1xuICAgIGlmIChzdXBwb3J0c011dGFibGVBZG9wdGVkU3R5bGVTaGVldHMpIHtcbiAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzLnB1c2goZ2xvYmFsU3R5bGVTaGVldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gWy4uLnNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzLCBnbG9iYWxTdHlsZVNoZWV0XTtcbiAgICB9XG4gIH1cbn1cblxuLy8gc3JjL3V0aWxzL3V0aWwudHNcbnZhciBsb3dlclBhdGhQYXJhbSA9IChmbikgPT4gKHApID0+IGZuKHAudG9Mb3dlckNhc2UoKSk7XG52YXIgaXNEdHNGaWxlID0gbG93ZXJQYXRoUGFyYW0oKHApID0+IHAuZW5kc1dpdGgoXCIuZC50c1wiKSB8fCBwLmVuZHNXaXRoKFwiLmQubXRzXCIpIHx8IHAuZW5kc1dpdGgoXCIuZC5jdHNcIikpO1xudmFyIGlzVHNGaWxlID0gbG93ZXJQYXRoUGFyYW0oXG4gIChwKSA9PiAhaXNEdHNGaWxlKHApICYmIChwLmVuZHNXaXRoKFwiLnRzXCIpIHx8IHAuZW5kc1dpdGgoXCIubXRzXCIpIHx8IHAuZW5kc1dpdGgoXCIuY3RzXCIpKVxuKTtcbnZhciBpc1RzeEZpbGUgPSBsb3dlclBhdGhQYXJhbShcbiAgKHApID0+IHAuZW5kc1dpdGgoXCIudHN4XCIpIHx8IHAuZW5kc1dpdGgoXCIubXRzeFwiKSB8fCBwLmVuZHNXaXRoKFwiLmN0c3hcIilcbik7XG52YXIgaXNKc3hGaWxlID0gbG93ZXJQYXRoUGFyYW0oXG4gIChwKSA9PiBwLmVuZHNXaXRoKFwiLmpzeFwiKSB8fCBwLmVuZHNXaXRoKFwiLm1qc3hcIikgfHwgcC5lbmRzV2l0aChcIi5janN4XCIpXG4pO1xudmFyIGlzSnNGaWxlID0gbG93ZXJQYXRoUGFyYW0oKHApID0+IHAuZW5kc1dpdGgoXCIuanNcIikgfHwgcC5lbmRzV2l0aChcIi5tanNcIikgfHwgcC5lbmRzV2l0aChcIi5janNcIikpO1xuXG4vLyBzcmMvcnVudGltZS9jb25uZWN0ZWQtY2FsbGJhY2sudHNcbmltcG9ydCB7IEJVSUxEIGFzIEJVSUxEMjUgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xuXG4vLyBzcmMvcnVudGltZS9jbGllbnQtaHlkcmF0ZS50c1xuaW1wb3J0IHsgQlVJTEQgYXMgQlVJTEQxNCB9IGZyb20gXCJAc3RlbmNpbC9jb3JlL2ludGVybmFsL2FwcC1kYXRhXCI7XG5cbi8vIHNyYy9ydW50aW1lL2RvbS1leHRyYXMudHNcbmltcG9ydCB7IEJVSUxEIGFzIEJVSUxEMTAgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xuXG4vLyBzcmMvcnVudGltZS9zbG90LXBvbHlmaWxsLXV0aWxzLnRzXG5pbXBvcnQgeyBCVUlMRCBhcyBCVUlMRDkgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xudmFyIHVwZGF0ZUZhbGxiYWNrU2xvdFZpc2liaWxpdHkgPSAoZWxtKSA9PiB7XG4gIGNvbnN0IGNoaWxkTm9kZXMgPSBpbnRlcm5hbENhbGwoZWxtLCBcImNoaWxkTm9kZXNcIik7XG4gIGlmIChlbG0udGFnTmFtZSAmJiBlbG0udGFnTmFtZS5pbmNsdWRlcyhcIi1cIikgJiYgZWxtW1wicy1jclwiXSAmJiBlbG0udGFnTmFtZSAhPT0gXCJTTE9ULUZCXCIpIHtcbiAgICBnZXRIb3N0U2xvdE5vZGVzKGNoaWxkTm9kZXMsIGVsbS50YWdOYW1lKS5mb3JFYWNoKChzbG90Tm9kZSkgPT4ge1xuICAgICAgaWYgKHNsb3ROb2RlLm5vZGVUeXBlID09PSAxIC8qIEVsZW1lbnROb2RlICovICYmIHNsb3ROb2RlLnRhZ05hbWUgPT09IFwiU0xPVC1GQlwiKSB7XG4gICAgICAgIGlmIChnZXRTbG90Q2hpbGRTaWJsaW5ncyhzbG90Tm9kZSwgZ2V0U2xvdE5hbWUoc2xvdE5vZGUpLCBmYWxzZSkubGVuZ3RoKSB7XG4gICAgICAgICAgc2xvdE5vZGUuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzbG90Tm9kZS5oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGxldCBpMiA9IDA7XG4gIGZvciAoaTIgPSAwOyBpMiA8IGNoaWxkTm9kZXMubGVuZ3RoOyBpMisrKSB7XG4gICAgY29uc3QgY2hpbGROb2RlID0gY2hpbGROb2Rlc1tpMl07XG4gICAgaWYgKGNoaWxkTm9kZS5ub2RlVHlwZSA9PT0gMSAvKiBFbGVtZW50Tm9kZSAqLyAmJiBpbnRlcm5hbENhbGwoY2hpbGROb2RlLCBcImNoaWxkTm9kZXNcIikubGVuZ3RoKSB7XG4gICAgICB1cGRhdGVGYWxsYmFja1Nsb3RWaXNpYmlsaXR5KGNoaWxkTm9kZSk7XG4gICAgfVxuICB9XG59O1xudmFyIGdldFNsb3R0ZWRDaGlsZE5vZGVzID0gKGNoaWxkTm9kZXMpID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGZvciAobGV0IGkyID0gMDsgaTIgPCBjaGlsZE5vZGVzLmxlbmd0aDsgaTIrKykge1xuICAgIGNvbnN0IHNsb3R0ZWROb2RlID0gY2hpbGROb2Rlc1tpMl1bXCJzLW5yXCJdIHx8IHZvaWQgMDtcbiAgICBpZiAoc2xvdHRlZE5vZGUgJiYgc2xvdHRlZE5vZGUuaXNDb25uZWN0ZWQpIHtcbiAgICAgIHJlc3VsdC5wdXNoKHNsb3R0ZWROb2RlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5mdW5jdGlvbiBnZXRIb3N0U2xvdE5vZGVzKGNoaWxkTm9kZXMsIGhvc3ROYW1lLCBzbG90TmFtZSkge1xuICBsZXQgaTIgPSAwO1xuICBsZXQgc2xvdHRlZE5vZGVzID0gW107XG4gIGxldCBjaGlsZE5vZGU7XG4gIGZvciAoOyBpMiA8IGNoaWxkTm9kZXMubGVuZ3RoOyBpMisrKSB7XG4gICAgY2hpbGROb2RlID0gY2hpbGROb2Rlc1tpMl07XG4gICAgaWYgKGNoaWxkTm9kZVtcInMtc3JcIl0gJiYgKCFob3N0TmFtZSB8fCBjaGlsZE5vZGVbXCJzLWhuXCJdID09PSBob3N0TmFtZSkgJiYgKHNsb3ROYW1lID09PSB2b2lkIDAgfHwgZ2V0U2xvdE5hbWUoY2hpbGROb2RlKSA9PT0gc2xvdE5hbWUpKSB7XG4gICAgICBzbG90dGVkTm9kZXMucHVzaChjaGlsZE5vZGUpO1xuICAgICAgaWYgKHR5cGVvZiBzbG90TmFtZSAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHNsb3R0ZWROb2RlcztcbiAgICB9XG4gICAgc2xvdHRlZE5vZGVzID0gWy4uLnNsb3R0ZWROb2RlcywgLi4uZ2V0SG9zdFNsb3ROb2RlcyhjaGlsZE5vZGUuY2hpbGROb2RlcywgaG9zdE5hbWUsIHNsb3ROYW1lKV07XG4gIH1cbiAgcmV0dXJuIHNsb3R0ZWROb2Rlcztcbn1cbnZhciBnZXRTbG90Q2hpbGRTaWJsaW5ncyA9IChzbG90LCBzbG90TmFtZSwgaW5jbHVkZVNsb3QgPSB0cnVlKSA9PiB7XG4gIGNvbnN0IGNoaWxkTm9kZXMgPSBbXTtcbiAgaWYgKGluY2x1ZGVTbG90ICYmIHNsb3RbXCJzLXNyXCJdIHx8ICFzbG90W1wicy1zclwiXSkgY2hpbGROb2Rlcy5wdXNoKHNsb3QpO1xuICBsZXQgbm9kZSA9IHNsb3Q7XG4gIHdoaWxlIChub2RlID0gbm9kZS5uZXh0U2libGluZykge1xuICAgIGlmIChnZXRTbG90TmFtZShub2RlKSA9PT0gc2xvdE5hbWUgJiYgKGluY2x1ZGVTbG90IHx8ICFub2RlW1wicy1zclwiXSkpIGNoaWxkTm9kZXMucHVzaChub2RlKTtcbiAgfVxuICByZXR1cm4gY2hpbGROb2Rlcztcbn07XG52YXIgaXNOb2RlTG9jYXRlZEluU2xvdCA9IChub2RlVG9SZWxvY2F0ZSwgc2xvdE5hbWUpID0+IHtcbiAgaWYgKG5vZGVUb1JlbG9jYXRlLm5vZGVUeXBlID09PSAxIC8qIEVsZW1lbnROb2RlICovKSB7XG4gICAgaWYgKG5vZGVUb1JlbG9jYXRlLmdldEF0dHJpYnV0ZShcInNsb3RcIikgPT09IG51bGwgJiYgc2xvdE5hbWUgPT09IFwiXCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAobm9kZVRvUmVsb2NhdGUuZ2V0QXR0cmlidXRlKFwic2xvdFwiKSA9PT0gc2xvdE5hbWUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKG5vZGVUb1JlbG9jYXRlW1wicy1zblwiXSA9PT0gc2xvdE5hbWUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gc2xvdE5hbWUgPT09IFwiXCI7XG59O1xudmFyIGFkZFNsb3RSZWxvY2F0ZU5vZGUgPSAobmV3Q2hpbGQsIHNsb3ROb2RlLCBwcmVwZW5kLCBwb3NpdGlvbikgPT4ge1xuICBpZiAobmV3Q2hpbGRbXCJzLW9sXCJdICYmIG5ld0NoaWxkW1wicy1vbFwiXS5pc0Nvbm5lY3RlZCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBzbG90dGVkTm9kZUxvY2F0aW9uID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIik7XG4gIHNsb3R0ZWROb2RlTG9jYXRpb25bXCJzLW5yXCJdID0gbmV3Q2hpbGQ7XG4gIGlmICghc2xvdE5vZGVbXCJzLWNyXCJdIHx8ICFzbG90Tm9kZVtcInMtY3JcIl0ucGFyZW50Tm9kZSkgcmV0dXJuO1xuICBjb25zdCBwYXJlbnQgPSBzbG90Tm9kZVtcInMtY3JcIl0ucGFyZW50Tm9kZTtcbiAgY29uc3QgYXBwZW5kTWV0aG9kID0gcHJlcGVuZCA/IGludGVybmFsQ2FsbChwYXJlbnQsIFwicHJlcGVuZFwiKSA6IGludGVybmFsQ2FsbChwYXJlbnQsIFwiYXBwZW5kQ2hpbGRcIik7XG4gIGlmIChCVUlMRDkuaHlkcmF0ZUNsaWVudFNpZGUgJiYgdHlwZW9mIHBvc2l0aW9uICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgc2xvdHRlZE5vZGVMb2NhdGlvbltcInMtb29cIl0gPSBwb3NpdGlvbjtcbiAgICBjb25zdCBjaGlsZE5vZGVzID0gaW50ZXJuYWxDYWxsKHBhcmVudCwgXCJjaGlsZE5vZGVzXCIpO1xuICAgIGNvbnN0IHNsb3RSZWxvY2F0ZU5vZGVzID0gW3Nsb3R0ZWROb2RlTG9jYXRpb25dO1xuICAgIGNoaWxkTm9kZXMuZm9yRWFjaCgobikgPT4ge1xuICAgICAgaWYgKG5bXCJzLW5yXCJdKSBzbG90UmVsb2NhdGVOb2Rlcy5wdXNoKG4pO1xuICAgIH0pO1xuICAgIHNsb3RSZWxvY2F0ZU5vZGVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGlmICghYVtcInMtb29cIl0gfHwgYVtcInMtb29cIl0gPCAoYltcInMtb29cIl0gfHwgMCkpIHJldHVybiAtMTtcbiAgICAgIGVsc2UgaWYgKCFiW1wicy1vb1wiXSB8fCBiW1wicy1vb1wiXSA8IGFbXCJzLW9vXCJdKSByZXR1cm4gMTtcbiAgICAgIHJldHVybiAwO1xuICAgIH0pO1xuICAgIHNsb3RSZWxvY2F0ZU5vZGVzLmZvckVhY2goKG4pID0+IGFwcGVuZE1ldGhvZC5jYWxsKHBhcmVudCwgbikpO1xuICB9IGVsc2Uge1xuICAgIGFwcGVuZE1ldGhvZC5jYWxsKHBhcmVudCwgc2xvdHRlZE5vZGVMb2NhdGlvbik7XG4gIH1cbiAgbmV3Q2hpbGRbXCJzLW9sXCJdID0gc2xvdHRlZE5vZGVMb2NhdGlvbjtcbiAgbmV3Q2hpbGRbXCJzLXNoXCJdID0gc2xvdE5vZGVbXCJzLWhuXCJdO1xufTtcbnZhciBnZXRTbG90TmFtZSA9IChub2RlKSA9PiB0eXBlb2Ygbm9kZVtcInMtc25cIl0gPT09IFwic3RyaW5nXCIgPyBub2RlW1wicy1zblwiXSA6IG5vZGUubm9kZVR5cGUgPT09IDEgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoXCJzbG90XCIpIHx8IHZvaWQgMDtcbmZ1bmN0aW9uIHBhdGNoU2xvdE5vZGUobm9kZSkge1xuICBpZiAobm9kZS5hc3NpZ25lZEVsZW1lbnRzIHx8IG5vZGUuYXNzaWduZWROb2RlcyB8fCAhbm9kZVtcInMtc3JcIl0pIHJldHVybjtcbiAgY29uc3QgYXNzaWduZWRGYWN0b3J5ID0gKGVsZW1lbnRzT25seSkgPT4gKGZ1bmN0aW9uKG9wdHMpIHtcbiAgICBjb25zdCB0b1JldHVybiA9IFtdO1xuICAgIGNvbnN0IHNsb3ROYW1lID0gdGhpc1tcInMtc25cIl07XG4gICAgaWYgKG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMuZmxhdHRlbikge1xuICAgICAgY29uc29sZS5lcnJvcihgXG4gICAgICAgICAgRmxhdHRlbmluZyBpcyBub3Qgc3VwcG9ydGVkIGZvciBTdGVuY2lsIG5vbi1zaGFkb3cgc2xvdHMuXG4gICAgICAgICAgWW91IGNhbiB1c2UgXFxgLmNoaWxkTm9kZXNcXGAgdG8gbmVzdGVkIHNsb3QgZmFsbGJhY2sgY29udGVudC5cbiAgICAgICAgICBJZiB5b3UgaGF2ZSBhIHBhcnRpY3VsYXIgdXNlIGNhc2UsIHBsZWFzZSBvcGVuIGFuIGlzc3VlIG9uIHRoZSBTdGVuY2lsIHJlcG8uXG4gICAgICAgIGApO1xuICAgIH1cbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzW1wicy1jclwiXS5wYXJlbnRFbGVtZW50O1xuICAgIGNvbnN0IHNsb3R0ZWROb2RlcyA9IHBhcmVudC5fX2NoaWxkTm9kZXMgPyBwYXJlbnQuY2hpbGROb2RlcyA6IGdldFNsb3R0ZWRDaGlsZE5vZGVzKHBhcmVudC5jaGlsZE5vZGVzKTtcbiAgICBzbG90dGVkTm9kZXMuZm9yRWFjaCgobikgPT4ge1xuICAgICAgaWYgKHNsb3ROYW1lID09PSBnZXRTbG90TmFtZShuKSkge1xuICAgICAgICB0b1JldHVybi5wdXNoKG4pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChlbGVtZW50c09ubHkpIHtcbiAgICAgIHJldHVybiB0b1JldHVybi5maWx0ZXIoKG4pID0+IG4ubm9kZVR5cGUgPT09IDEgLyogRWxlbWVudE5vZGUgKi8pO1xuICAgIH1cbiAgICByZXR1cm4gdG9SZXR1cm47XG4gIH0pLmJpbmQobm9kZSk7XG4gIG5vZGUuYXNzaWduZWRFbGVtZW50cyA9IGFzc2lnbmVkRmFjdG9yeSh0cnVlKTtcbiAgbm9kZS5hc3NpZ25lZE5vZGVzID0gYXNzaWduZWRGYWN0b3J5KGZhbHNlKTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoU2xvdENoYW5nZUV2ZW50KGVsbSkge1xuICBlbG0uZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJzbG90Y2hhbmdlXCIsIHsgYnViYmxlczogZmFsc2UsIGNhbmNlbGFibGU6IGZhbHNlLCBjb21wb3NlZDogZmFsc2UgfSkpO1xufVxuZnVuY3Rpb24gZmluZFNsb3RGcm9tU2xvdHRlZE5vZGUoc2xvdHRlZE5vZGUsIHBhcmVudEhvc3QpIHtcbiAgdmFyIF9hO1xuICBwYXJlbnRIb3N0ID0gcGFyZW50SG9zdCB8fCAoKF9hID0gc2xvdHRlZE5vZGVbXCJzLW9sXCJdKSA9PSBudWxsID8gdm9pZCAwIDogX2EucGFyZW50RWxlbWVudCk7XG4gIGlmICghcGFyZW50SG9zdCkgcmV0dXJuIHsgc2xvdE5vZGU6IG51bGwsIHNsb3ROYW1lOiBcIlwiIH07XG4gIGNvbnN0IHNsb3ROYW1lID0gc2xvdHRlZE5vZGVbXCJzLXNuXCJdID0gZ2V0U2xvdE5hbWUoc2xvdHRlZE5vZGUpIHx8IFwiXCI7XG4gIGNvbnN0IGNoaWxkTm9kZXMgPSBpbnRlcm5hbENhbGwocGFyZW50SG9zdCwgXCJjaGlsZE5vZGVzXCIpO1xuICBjb25zdCBzbG90Tm9kZSA9IGdldEhvc3RTbG90Tm9kZXMoY2hpbGROb2RlcywgcGFyZW50SG9zdC50YWdOYW1lLCBzbG90TmFtZSlbMF07XG4gIHJldHVybiB7IHNsb3ROb2RlLCBzbG90TmFtZSB9O1xufVxuXG4vLyBzcmMvcnVudGltZS9kb20tZXh0cmFzLnRzXG52YXIgcGF0Y2hQc2V1ZG9TaGFkb3dEb20gPSAoaG9zdEVsZW1lbnRQcm90b3R5cGUpID0+IHtcbiAgcGF0Y2hDbG9uZU5vZGUoaG9zdEVsZW1lbnRQcm90b3R5cGUpO1xuICBwYXRjaFNsb3RBcHBlbmRDaGlsZChob3N0RWxlbWVudFByb3RvdHlwZSk7XG4gIHBhdGNoU2xvdEFwcGVuZChob3N0RWxlbWVudFByb3RvdHlwZSk7XG4gIHBhdGNoU2xvdFByZXBlbmQoaG9zdEVsZW1lbnRQcm90b3R5cGUpO1xuICBwYXRjaFNsb3RJbnNlcnRBZGphY2VudEVsZW1lbnQoaG9zdEVsZW1lbnRQcm90b3R5cGUpO1xuICBwYXRjaFNsb3RJbnNlcnRBZGphY2VudEhUTUwoaG9zdEVsZW1lbnRQcm90b3R5cGUpO1xuICBwYXRjaFNsb3RJbnNlcnRBZGphY2VudFRleHQoaG9zdEVsZW1lbnRQcm90b3R5cGUpO1xuICBwYXRjaEluc2VydEJlZm9yZShob3N0RWxlbWVudFByb3RvdHlwZSk7XG4gIHBhdGNoVGV4dENvbnRlbnQoaG9zdEVsZW1lbnRQcm90b3R5cGUpO1xuICBwYXRjaENoaWxkU2xvdE5vZGVzKGhvc3RFbGVtZW50UHJvdG90eXBlKTtcbiAgcGF0Y2hTbG90UmVtb3ZlQ2hpbGQoaG9zdEVsZW1lbnRQcm90b3R5cGUpO1xufTtcbnZhciBwYXRjaENsb25lTm9kZSA9IChIb3N0RWxlbWVudFByb3RvdHlwZSkgPT4ge1xuICBjb25zdCBvcmdDbG9uZU5vZGUgPSBIb3N0RWxlbWVudFByb3RvdHlwZS5jbG9uZU5vZGU7XG4gIEhvc3RFbGVtZW50UHJvdG90eXBlLmNsb25lTm9kZSA9IGZ1bmN0aW9uKGRlZXApIHtcbiAgICBjb25zdCBzcmNOb2RlID0gdGhpcztcbiAgICBjb25zdCBpc1NoYWRvd0RvbSA9IEJVSUxEMTAuc2hhZG93RG9tID8gc3JjTm9kZS5zaGFkb3dSb290ICYmIHN1cHBvcnRzU2hhZG93IDogZmFsc2U7XG4gICAgY29uc3QgY2xvbmVkTm9kZSA9IG9yZ0Nsb25lTm9kZS5jYWxsKHNyY05vZGUsIGlzU2hhZG93RG9tID8gZGVlcCA6IGZhbHNlKTtcbiAgICBpZiAoQlVJTEQxMC5zbG90ICYmICFpc1NoYWRvd0RvbSAmJiBkZWVwKSB7XG4gICAgICBsZXQgaTIgPSAwO1xuICAgICAgbGV0IHNsb3R0ZWQsIG5vblN0ZW5jaWxOb2RlO1xuICAgICAgY29uc3Qgc3RlbmNpbFByaXZhdGVzID0gW1xuICAgICAgICBcInMtaWRcIixcbiAgICAgICAgXCJzLWNyXCIsXG4gICAgICAgIFwicy1sclwiLFxuICAgICAgICBcInMtcmNcIixcbiAgICAgICAgXCJzLXNjXCIsXG4gICAgICAgIFwicy1wXCIsXG4gICAgICAgIFwicy1jblwiLFxuICAgICAgICBcInMtc3JcIixcbiAgICAgICAgXCJzLXNuXCIsXG4gICAgICAgIFwicy1oblwiLFxuICAgICAgICBcInMtb2xcIixcbiAgICAgICAgXCJzLW5yXCIsXG4gICAgICAgIFwicy1zaVwiLFxuICAgICAgICBcInMtcmZcIixcbiAgICAgICAgXCJzLXNjc1wiXG4gICAgICBdO1xuICAgICAgY29uc3QgY2hpbGROb2RlcyA9IHRoaXMuX19jaGlsZE5vZGVzIHx8IHRoaXMuY2hpbGROb2RlcztcbiAgICAgIGZvciAoOyBpMiA8IGNoaWxkTm9kZXMubGVuZ3RoOyBpMisrKSB7XG4gICAgICAgIHNsb3R0ZWQgPSBjaGlsZE5vZGVzW2kyXVtcInMtbnJcIl07XG4gICAgICAgIG5vblN0ZW5jaWxOb2RlID0gc3RlbmNpbFByaXZhdGVzLmV2ZXJ5KChwcml2YXRlRmllbGQpID0+ICFjaGlsZE5vZGVzW2kyXVtwcml2YXRlRmllbGRdKTtcbiAgICAgICAgaWYgKHNsb3R0ZWQpIHtcbiAgICAgICAgICBpZiAoQlVJTEQxMC5hcHBlbmRDaGlsZFNsb3RGaXggJiYgY2xvbmVkTm9kZS5fX2FwcGVuZENoaWxkKSB7XG4gICAgICAgICAgICBjbG9uZWROb2RlLl9fYXBwZW5kQ2hpbGQoc2xvdHRlZC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbG9uZWROb2RlLmFwcGVuZENoaWxkKHNsb3R0ZWQuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vblN0ZW5jaWxOb2RlKSB7XG4gICAgICAgICAgY2xvbmVkTm9kZS5hcHBlbmRDaGlsZChjaGlsZE5vZGVzW2kyXS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjbG9uZWROb2RlO1xuICB9O1xufTtcbnZhciBwYXRjaFNsb3RBcHBlbmRDaGlsZCA9IChIb3N0RWxlbWVudFByb3RvdHlwZSkgPT4ge1xuICBIb3N0RWxlbWVudFByb3RvdHlwZS5fX2FwcGVuZENoaWxkID0gSG9zdEVsZW1lbnRQcm90b3R5cGUuYXBwZW5kQ2hpbGQ7XG4gIEhvc3RFbGVtZW50UHJvdG90eXBlLmFwcGVuZENoaWxkID0gZnVuY3Rpb24obmV3Q2hpbGQpIHtcbiAgICBjb25zdCB7IHNsb3ROYW1lLCBzbG90Tm9kZSB9ID0gZmluZFNsb3RGcm9tU2xvdHRlZE5vZGUobmV3Q2hpbGQsIHRoaXMpO1xuICAgIGlmIChzbG90Tm9kZSkge1xuICAgICAgYWRkU2xvdFJlbG9jYXRlTm9kZShuZXdDaGlsZCwgc2xvdE5vZGUpO1xuICAgICAgY29uc3Qgc2xvdENoaWxkTm9kZXMgPSBnZXRTbG90Q2hpbGRTaWJsaW5ncyhzbG90Tm9kZSwgc2xvdE5hbWUpO1xuICAgICAgY29uc3QgYXBwZW5kQWZ0ZXIgPSBzbG90Q2hpbGROb2Rlc1tzbG90Q2hpbGROb2Rlcy5sZW5ndGggLSAxXTtcbiAgICAgIGNvbnN0IHBhcmVudCA9IGludGVybmFsQ2FsbChhcHBlbmRBZnRlciwgXCJwYXJlbnROb2RlXCIpO1xuICAgICAgY29uc3QgaW5zZXJ0ZWROb2RlID0gaW50ZXJuYWxDYWxsKHBhcmVudCwgXCJpbnNlcnRCZWZvcmVcIikobmV3Q2hpbGQsIGFwcGVuZEFmdGVyLm5leHRTaWJsaW5nKTtcbiAgICAgIGRpc3BhdGNoU2xvdENoYW5nZUV2ZW50KHNsb3ROb2RlKTtcbiAgICAgIHVwZGF0ZUZhbGxiYWNrU2xvdFZpc2liaWxpdHkodGhpcyk7XG4gICAgICByZXR1cm4gaW5zZXJ0ZWROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fX2FwcGVuZENoaWxkKG5ld0NoaWxkKTtcbiAgfTtcbn07XG52YXIgcGF0Y2hTbG90UmVtb3ZlQ2hpbGQgPSAoRWxlbWVudFByb3RvdHlwZSkgPT4ge1xuICBFbGVtZW50UHJvdG90eXBlLl9fcmVtb3ZlQ2hpbGQgPSBFbGVtZW50UHJvdG90eXBlLnJlbW92ZUNoaWxkO1xuICBFbGVtZW50UHJvdG90eXBlLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24odG9SZW1vdmUpIHtcbiAgICBpZiAodG9SZW1vdmUgJiYgdHlwZW9mIHRvUmVtb3ZlW1wicy1zblwiXSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgY29uc3QgY2hpbGROb2RlcyA9IHRoaXMuX19jaGlsZE5vZGVzIHx8IHRoaXMuY2hpbGROb2RlcztcbiAgICAgIGNvbnN0IHNsb3ROb2RlID0gZ2V0SG9zdFNsb3ROb2RlcyhjaGlsZE5vZGVzLCB0aGlzLnRhZ05hbWUsIHRvUmVtb3ZlW1wicy1zblwiXSk7XG4gICAgICBpZiAoc2xvdE5vZGUgJiYgdG9SZW1vdmUuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgdG9SZW1vdmUucmVtb3ZlKCk7XG4gICAgICAgIHVwZGF0ZUZhbGxiYWNrU2xvdFZpc2liaWxpdHkodGhpcyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX19yZW1vdmVDaGlsZCh0b1JlbW92ZSk7XG4gIH07XG59O1xudmFyIHBhdGNoU2xvdFByZXBlbmQgPSAoSG9zdEVsZW1lbnRQcm90b3R5cGUpID0+IHtcbiAgSG9zdEVsZW1lbnRQcm90b3R5cGUuX19wcmVwZW5kID0gSG9zdEVsZW1lbnRQcm90b3R5cGUucHJlcGVuZDtcbiAgSG9zdEVsZW1lbnRQcm90b3R5cGUucHJlcGVuZCA9IGZ1bmN0aW9uKC4uLm5ld0NoaWxkcmVuKSB7XG4gICAgbmV3Q2hpbGRyZW4uZm9yRWFjaCgobmV3Q2hpbGQpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgbmV3Q2hpbGQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgbmV3Q2hpbGQgPSB0aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobmV3Q2hpbGQpO1xuICAgICAgfVxuICAgICAgY29uc3Qgc2xvdE5hbWUgPSAobmV3Q2hpbGRbXCJzLXNuXCJdID0gZ2V0U2xvdE5hbWUobmV3Q2hpbGQpKSB8fCBcIlwiO1xuICAgICAgY29uc3QgY2hpbGROb2RlcyA9IGludGVybmFsQ2FsbCh0aGlzLCBcImNoaWxkTm9kZXNcIik7XG4gICAgICBjb25zdCBzbG90Tm9kZSA9IGdldEhvc3RTbG90Tm9kZXMoY2hpbGROb2RlcywgdGhpcy50YWdOYW1lLCBzbG90TmFtZSlbMF07XG4gICAgICBpZiAoc2xvdE5vZGUpIHtcbiAgICAgICAgYWRkU2xvdFJlbG9jYXRlTm9kZShuZXdDaGlsZCwgc2xvdE5vZGUsIHRydWUpO1xuICAgICAgICBjb25zdCBzbG90Q2hpbGROb2RlcyA9IGdldFNsb3RDaGlsZFNpYmxpbmdzKHNsb3ROb2RlLCBzbG90TmFtZSk7XG4gICAgICAgIGNvbnN0IGFwcGVuZEFmdGVyID0gc2xvdENoaWxkTm9kZXNbMF07XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IGludGVybmFsQ2FsbChhcHBlbmRBZnRlciwgXCJwYXJlbnROb2RlXCIpO1xuICAgICAgICBjb25zdCB0b1JldHVybiA9IGludGVybmFsQ2FsbChwYXJlbnQsIFwiaW5zZXJ0QmVmb3JlXCIpKG5ld0NoaWxkLCBpbnRlcm5hbENhbGwoYXBwZW5kQWZ0ZXIsIFwibmV4dFNpYmxpbmdcIikpO1xuICAgICAgICBkaXNwYXRjaFNsb3RDaGFuZ2VFdmVudChzbG90Tm9kZSk7XG4gICAgICAgIHJldHVybiB0b1JldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChuZXdDaGlsZC5ub2RlVHlwZSA9PT0gMSAmJiAhIW5ld0NoaWxkLmdldEF0dHJpYnV0ZShcInNsb3RcIikpIHtcbiAgICAgICAgbmV3Q2hpbGQuaGlkZGVuID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBIb3N0RWxlbWVudFByb3RvdHlwZS5fX3ByZXBlbmQobmV3Q2hpbGQpO1xuICAgIH0pO1xuICB9O1xufTtcbnZhciBwYXRjaFNsb3RBcHBlbmQgPSAoSG9zdEVsZW1lbnRQcm90b3R5cGUpID0+IHtcbiAgSG9zdEVsZW1lbnRQcm90b3R5cGUuX19hcHBlbmQgPSBIb3N0RWxlbWVudFByb3RvdHlwZS5hcHBlbmQ7XG4gIEhvc3RFbGVtZW50UHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKC4uLm5ld0NoaWxkcmVuKSB7XG4gICAgbmV3Q2hpbGRyZW4uZm9yRWFjaCgobmV3Q2hpbGQpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgbmV3Q2hpbGQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgbmV3Q2hpbGQgPSB0aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobmV3Q2hpbGQpO1xuICAgICAgfVxuICAgICAgdGhpcy5hcHBlbmRDaGlsZChuZXdDaGlsZCk7XG4gICAgfSk7XG4gIH07XG59O1xudmFyIHBhdGNoU2xvdEluc2VydEFkamFjZW50SFRNTCA9IChIb3N0RWxlbWVudFByb3RvdHlwZSkgPT4ge1xuICBjb25zdCBvcmlnaW5hbEluc2VydEFkamFjZW50SHRtbCA9IEhvc3RFbGVtZW50UHJvdG90eXBlLmluc2VydEFkamFjZW50SFRNTDtcbiAgSG9zdEVsZW1lbnRQcm90b3R5cGUuaW5zZXJ0QWRqYWNlbnRIVE1MID0gZnVuY3Rpb24ocG9zaXRpb24sIHRleHQpIHtcbiAgICBpZiAocG9zaXRpb24gIT09IFwiYWZ0ZXJiZWdpblwiICYmIHBvc2l0aW9uICE9PSBcImJlZm9yZWVuZFwiKSB7XG4gICAgICByZXR1cm4gb3JpZ2luYWxJbnNlcnRBZGphY2VudEh0bWwuY2FsbCh0aGlzLCBwb3NpdGlvbiwgdGV4dCk7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiX1wiKTtcbiAgICBsZXQgbm9kZTtcbiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gdGV4dDtcbiAgICBpZiAocG9zaXRpb24gPT09IFwiYWZ0ZXJiZWdpblwiKSB7XG4gICAgICB3aGlsZSAobm9kZSA9IGNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgIHRoaXMucHJlcGVuZChub2RlKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID09PSBcImJlZm9yZWVuZFwiKSB7XG4gICAgICB3aGlsZSAobm9kZSA9IGNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG52YXIgcGF0Y2hTbG90SW5zZXJ0QWRqYWNlbnRUZXh0ID0gKEhvc3RFbGVtZW50UHJvdG90eXBlKSA9PiB7XG4gIEhvc3RFbGVtZW50UHJvdG90eXBlLmluc2VydEFkamFjZW50VGV4dCA9IGZ1bmN0aW9uKHBvc2l0aW9uLCB0ZXh0KSB7XG4gICAgdGhpcy5pbnNlcnRBZGphY2VudEhUTUwocG9zaXRpb24sIHRleHQpO1xuICB9O1xufTtcbnZhciBwYXRjaEluc2VydEJlZm9yZSA9IChIb3N0RWxlbWVudFByb3RvdHlwZSkgPT4ge1xuICBjb25zdCBlbGVQcm90byA9IEhvc3RFbGVtZW50UHJvdG90eXBlO1xuICBpZiAoZWxlUHJvdG8uX19pbnNlcnRCZWZvcmUpIHJldHVybjtcbiAgZWxlUHJvdG8uX19pbnNlcnRCZWZvcmUgPSBIb3N0RWxlbWVudFByb3RvdHlwZS5pbnNlcnRCZWZvcmU7XG4gIEhvc3RFbGVtZW50UHJvdG90eXBlLmluc2VydEJlZm9yZSA9IGZ1bmN0aW9uKG5ld0NoaWxkLCBjdXJyZW50Q2hpbGQpIHtcbiAgICBjb25zdCB7IHNsb3ROYW1lLCBzbG90Tm9kZSB9ID0gZmluZFNsb3RGcm9tU2xvdHRlZE5vZGUobmV3Q2hpbGQsIHRoaXMpO1xuICAgIGNvbnN0IHNsb3R0ZWROb2RlcyA9IHRoaXMuX19jaGlsZE5vZGVzID8gdGhpcy5jaGlsZE5vZGVzIDogZ2V0U2xvdHRlZENoaWxkTm9kZXModGhpcy5jaGlsZE5vZGVzKTtcbiAgICBpZiAoc2xvdE5vZGUpIHtcbiAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgc2xvdHRlZE5vZGVzLmZvckVhY2goKGNoaWxkTm9kZSkgPT4ge1xuICAgICAgICBpZiAoY2hpbGROb2RlID09PSBjdXJyZW50Q2hpbGQgfHwgY3VycmVudENoaWxkID09PSBudWxsKSB7XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgIGlmIChjdXJyZW50Q2hpbGQgPT09IG51bGwgfHwgc2xvdE5hbWUgIT09IGN1cnJlbnRDaGlsZFtcInMtc25cIl0pIHtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQobmV3Q2hpbGQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2xvdE5hbWUgPT09IGN1cnJlbnRDaGlsZFtcInMtc25cIl0pIHtcbiAgICAgICAgICAgIGFkZFNsb3RSZWxvY2F0ZU5vZGUobmV3Q2hpbGQsIHNsb3ROb2RlKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGludGVybmFsQ2FsbChjdXJyZW50Q2hpbGQsIFwicGFyZW50Tm9kZVwiKTtcbiAgICAgICAgICAgIGludGVybmFsQ2FsbChwYXJlbnQsIFwiaW5zZXJ0QmVmb3JlXCIpKG5ld0NoaWxkLCBjdXJyZW50Q2hpbGQpO1xuICAgICAgICAgICAgZGlzcGF0Y2hTbG90Q2hhbmdlRXZlbnQoc2xvdE5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGZvdW5kKSByZXR1cm4gbmV3Q2hpbGQ7XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudE5vZGUgPSBjdXJyZW50Q2hpbGQgPT0gbnVsbCA/IHZvaWQgMCA6IGN1cnJlbnRDaGlsZC5fX3BhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudE5vZGUgJiYgIXRoaXMuaXNTYW1lTm9kZShwYXJlbnROb2RlKSkge1xuICAgICAgcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQobmV3Q2hpbGQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fX2luc2VydEJlZm9yZShuZXdDaGlsZCwgY3VycmVudENoaWxkKTtcbiAgfTtcbn07XG52YXIgcGF0Y2hTbG90SW5zZXJ0QWRqYWNlbnRFbGVtZW50ID0gKEhvc3RFbGVtZW50UHJvdG90eXBlKSA9PiB7XG4gIGNvbnN0IG9yaWdpbmFsSW5zZXJ0QWRqYWNlbnRFbGVtZW50ID0gSG9zdEVsZW1lbnRQcm90b3R5cGUuaW5zZXJ0QWRqYWNlbnRFbGVtZW50O1xuICBIb3N0RWxlbWVudFByb3RvdHlwZS5pbnNlcnRBZGphY2VudEVsZW1lbnQgPSBmdW5jdGlvbihwb3NpdGlvbiwgZWxlbWVudCkge1xuICAgIGlmIChwb3NpdGlvbiAhPT0gXCJhZnRlcmJlZ2luXCIgJiYgcG9zaXRpb24gIT09IFwiYmVmb3JlZW5kXCIpIHtcbiAgICAgIHJldHVybiBvcmlnaW5hbEluc2VydEFkamFjZW50RWxlbWVudC5jYWxsKHRoaXMsIHBvc2l0aW9uLCBlbGVtZW50KTtcbiAgICB9XG4gICAgaWYgKHBvc2l0aW9uID09PSBcImFmdGVyYmVnaW5cIikge1xuICAgICAgdGhpcy5wcmVwZW5kKGVsZW1lbnQpO1xuICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfSBlbHNlIGlmIChwb3NpdGlvbiA9PT0gXCJiZWZvcmVlbmRcIikge1xuICAgICAgdGhpcy5hcHBlbmQoZWxlbWVudCk7XG4gICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH07XG59O1xudmFyIHBhdGNoVGV4dENvbnRlbnQgPSAoaG9zdEVsZW1lbnRQcm90b3R5cGUpID0+IHtcbiAgcGF0Y2hIb3N0T3JpZ2luYWxBY2Nlc3NvcihcInRleHRDb250ZW50XCIsIGhvc3RFbGVtZW50UHJvdG90eXBlKTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGhvc3RFbGVtZW50UHJvdG90eXBlLCBcInRleHRDb250ZW50XCIsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgbGV0IHRleHQgPSBcIlwiO1xuICAgICAgY29uc3QgY2hpbGROb2RlcyA9IHRoaXMuX19jaGlsZE5vZGVzID8gdGhpcy5jaGlsZE5vZGVzIDogZ2V0U2xvdHRlZENoaWxkTm9kZXModGhpcy5jaGlsZE5vZGVzKTtcbiAgICAgIGNoaWxkTm9kZXMuZm9yRWFjaCgobm9kZSkgPT4gdGV4dCArPSBub2RlLnRleHRDb250ZW50IHx8IFwiXCIpO1xuICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBjb25zdCBjaGlsZE5vZGVzID0gdGhpcy5fX2NoaWxkTm9kZXMgPyB0aGlzLmNoaWxkTm9kZXMgOiBnZXRTbG90dGVkQ2hpbGROb2Rlcyh0aGlzLmNoaWxkTm9kZXMpO1xuICAgICAgY2hpbGROb2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgIGlmIChub2RlW1wicy1vbFwiXSkgbm9kZVtcInMtb2xcIl0ucmVtb3ZlKCk7XG4gICAgICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIHZhbHVlKTtcbiAgICB9XG4gIH0pO1xufTtcbnZhciBwYXRjaENoaWxkU2xvdE5vZGVzID0gKGVsbSkgPT4ge1xuICBjbGFzcyBGYWtlTm9kZUxpc3QgZXh0ZW5kcyBBcnJheSB7XG4gICAgaXRlbShuKSB7XG4gICAgICByZXR1cm4gdGhpc1tuXTtcbiAgICB9XG4gIH1cbiAgcGF0Y2hIb3N0T3JpZ2luYWxBY2Nlc3NvcihcImNoaWxkcmVuXCIsIGVsbSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbG0sIFwiY2hpbGRyZW5cIiwge1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkTm9kZXMuZmlsdGVyKChuKSA9PiBuLm5vZGVUeXBlID09PSAxKTtcbiAgICB9XG4gIH0pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWxtLCBcImNoaWxkRWxlbWVudENvdW50XCIsIHtcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGg7XG4gICAgfVxuICB9KTtcbiAgcGF0Y2hIb3N0T3JpZ2luYWxBY2Nlc3NvcihcImZpcnN0Q2hpbGRcIiwgZWxtKTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsbSwgXCJmaXJzdENoaWxkXCIsIHtcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGlsZE5vZGVzWzBdO1xuICAgIH1cbiAgfSk7XG4gIHBhdGNoSG9zdE9yaWdpbmFsQWNjZXNzb3IoXCJsYXN0Q2hpbGRcIiwgZWxtKTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsbSwgXCJsYXN0Q2hpbGRcIiwge1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkTm9kZXNbdGhpcy5jaGlsZE5vZGVzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgfSk7XG4gIHBhdGNoSG9zdE9yaWdpbmFsQWNjZXNzb3IoXCJjaGlsZE5vZGVzXCIsIGVsbSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbG0sIFwiY2hpbGROb2Rlc1wiLCB7XG4gICAgZ2V0KCkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IEZha2VOb2RlTGlzdCgpO1xuICAgICAgcmVzdWx0LnB1c2goLi4uZ2V0U2xvdHRlZENoaWxkTm9kZXModGhpcy5fX2NoaWxkTm9kZXMpKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICB9KTtcbn07XG52YXIgcGF0Y2hTbG90dGVkTm9kZSA9IChub2RlKSA9PiB7XG4gIGlmICghbm9kZSB8fCBub2RlLl9fbmV4dFNpYmxpbmcgIT09IHZvaWQgMCB8fCAhZ2xvYmFsVGhpcy5Ob2RlKSByZXR1cm47XG4gIHBhdGNoTmV4dFNpYmxpbmcobm9kZSk7XG4gIHBhdGNoUHJldmlvdXNTaWJsaW5nKG5vZGUpO1xuICBwYXRjaFBhcmVudE5vZGUobm9kZSk7XG4gIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgIHBhdGNoTmV4dEVsZW1lbnRTaWJsaW5nKG5vZGUpO1xuICAgIHBhdGNoUHJldmlvdXNFbGVtZW50U2libGluZyhub2RlKTtcbiAgfVxufTtcbnZhciBwYXRjaE5leHRTaWJsaW5nID0gKG5vZGUpID0+IHtcbiAgaWYgKCFub2RlIHx8IG5vZGUuX19uZXh0U2libGluZykgcmV0dXJuO1xuICBwYXRjaEhvc3RPcmlnaW5hbEFjY2Vzc29yKFwibmV4dFNpYmxpbmdcIiwgbm9kZSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShub2RlLCBcIm5leHRTaWJsaW5nXCIsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9hO1xuICAgICAgY29uc3QgcGFyZW50Tm9kZXMgPSAoX2EgPSB0aGlzW1wicy1vbFwiXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnBhcmVudE5vZGUuY2hpbGROb2RlcztcbiAgICAgIGNvbnN0IGluZGV4ID0gcGFyZW50Tm9kZXMgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmVudE5vZGVzLmluZGV4T2YodGhpcyk7XG4gICAgICBpZiAocGFyZW50Tm9kZXMgJiYgaW5kZXggPiAtMSkge1xuICAgICAgICByZXR1cm4gcGFyZW50Tm9kZXNbaW5kZXggKyAxXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9fbmV4dFNpYmxpbmc7XG4gICAgfVxuICB9KTtcbn07XG52YXIgcGF0Y2hOZXh0RWxlbWVudFNpYmxpbmcgPSAoZWxlbWVudCkgPT4ge1xuICBpZiAoIWVsZW1lbnQgfHwgZWxlbWVudC5fX25leHRFbGVtZW50U2libGluZykgcmV0dXJuO1xuICBwYXRjaEhvc3RPcmlnaW5hbEFjY2Vzc29yKFwibmV4dEVsZW1lbnRTaWJsaW5nXCIsIGVsZW1lbnQpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWxlbWVudCwgXCJuZXh0RWxlbWVudFNpYmxpbmdcIiwge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX2E7XG4gICAgICBjb25zdCBwYXJlbnRFbGVzID0gKF9hID0gdGhpc1tcInMtb2xcIl0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5wYXJlbnROb2RlLmNoaWxkcmVuO1xuICAgICAgY29uc3QgaW5kZXggPSBwYXJlbnRFbGVzID09IG51bGwgPyB2b2lkIDAgOiBwYXJlbnRFbGVzLmluZGV4T2YodGhpcyk7XG4gICAgICBpZiAocGFyZW50RWxlcyAmJiBpbmRleCA+IC0xKSB7XG4gICAgICAgIHJldHVybiBwYXJlbnRFbGVzW2luZGV4ICsgMV07XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fX25leHRFbGVtZW50U2libGluZztcbiAgICB9XG4gIH0pO1xufTtcbnZhciBwYXRjaFByZXZpb3VzU2libGluZyA9IChub2RlKSA9PiB7XG4gIGlmICghbm9kZSB8fCBub2RlLl9fcHJldmlvdXNTaWJsaW5nKSByZXR1cm47XG4gIHBhdGNoSG9zdE9yaWdpbmFsQWNjZXNzb3IoXCJwcmV2aW91c1NpYmxpbmdcIiwgbm9kZSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShub2RlLCBcInByZXZpb3VzU2libGluZ1wiLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfYTtcbiAgICAgIGNvbnN0IHBhcmVudE5vZGVzID0gKF9hID0gdGhpc1tcInMtb2xcIl0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5wYXJlbnROb2RlLmNoaWxkTm9kZXM7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcmVudE5vZGVzID09IG51bGwgPyB2b2lkIDAgOiBwYXJlbnROb2Rlcy5pbmRleE9mKHRoaXMpO1xuICAgICAgaWYgKHBhcmVudE5vZGVzICYmIGluZGV4ID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIHBhcmVudE5vZGVzW2luZGV4IC0gMV07XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fX3ByZXZpb3VzU2libGluZztcbiAgICB9XG4gIH0pO1xufTtcbnZhciBwYXRjaFByZXZpb3VzRWxlbWVudFNpYmxpbmcgPSAoZWxlbWVudCkgPT4ge1xuICBpZiAoIWVsZW1lbnQgfHwgZWxlbWVudC5fX3ByZXZpb3VzRWxlbWVudFNpYmxpbmcpIHJldHVybjtcbiAgcGF0Y2hIb3N0T3JpZ2luYWxBY2Nlc3NvcihcInByZXZpb3VzRWxlbWVudFNpYmxpbmdcIiwgZWxlbWVudCk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtZW50LCBcInByZXZpb3VzRWxlbWVudFNpYmxpbmdcIiwge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX2E7XG4gICAgICBjb25zdCBwYXJlbnROb2RlcyA9IChfYSA9IHRoaXNbXCJzLW9sXCJdKSA9PSBudWxsID8gdm9pZCAwIDogX2EucGFyZW50Tm9kZS5jaGlsZHJlbjtcbiAgICAgIGNvbnN0IGluZGV4ID0gcGFyZW50Tm9kZXMgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmVudE5vZGVzLmluZGV4T2YodGhpcyk7XG4gICAgICBpZiAocGFyZW50Tm9kZXMgJiYgaW5kZXggPiAtMSkge1xuICAgICAgICByZXR1cm4gcGFyZW50Tm9kZXNbaW5kZXggLSAxXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9fcHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICB9XG4gIH0pO1xufTtcbnZhciBwYXRjaFBhcmVudE5vZGUgPSAobm9kZSkgPT4ge1xuICBpZiAoIW5vZGUgfHwgbm9kZS5fX3BhcmVudE5vZGUpIHJldHVybjtcbiAgcGF0Y2hIb3N0T3JpZ2luYWxBY2Nlc3NvcihcInBhcmVudE5vZGVcIiwgbm9kZSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShub2RlLCBcInBhcmVudE5vZGVcIiwge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX2E7XG4gICAgICByZXR1cm4gKChfYSA9IHRoaXNbXCJzLW9sXCJdKSA9PSBudWxsID8gdm9pZCAwIDogX2EucGFyZW50Tm9kZSkgfHwgdGhpcy5fX3BhcmVudE5vZGU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB0aGlzLl9fcGFyZW50Tm9kZSA9IHZhbHVlO1xuICAgIH1cbiAgfSk7XG59O1xudmFyIHZhbGlkRWxlbWVudFBhdGNoZXMgPSBbXCJjaGlsZHJlblwiLCBcIm5leHRFbGVtZW50U2libGluZ1wiLCBcInByZXZpb3VzRWxlbWVudFNpYmxpbmdcIl07XG52YXIgdmFsaWROb2Rlc1BhdGNoZXMgPSBbXG4gIFwiY2hpbGROb2Rlc1wiLFxuICBcImZpcnN0Q2hpbGRcIixcbiAgXCJsYXN0Q2hpbGRcIixcbiAgXCJuZXh0U2libGluZ1wiLFxuICBcInByZXZpb3VzU2libGluZ1wiLFxuICBcInRleHRDb250ZW50XCIsXG4gIFwicGFyZW50Tm9kZVwiXG5dO1xuZnVuY3Rpb24gcGF0Y2hIb3N0T3JpZ2luYWxBY2Nlc3NvcihhY2Nlc3Nvck5hbWUsIG5vZGUpIHtcbiAgaWYgKCFnbG9iYWxUaGlzLk5vZGUgfHwgIWdsb2JhbFRoaXMuRWxlbWVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgYWNjZXNzb3I7XG4gIGlmICh2YWxpZEVsZW1lbnRQYXRjaGVzLmluY2x1ZGVzKGFjY2Vzc29yTmFtZSkpIHtcbiAgICBhY2Nlc3NvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRWxlbWVudC5wcm90b3R5cGUsIGFjY2Vzc29yTmFtZSk7XG4gIH0gZWxzZSBpZiAodmFsaWROb2Rlc1BhdGNoZXMuaW5jbHVkZXMoYWNjZXNzb3JOYW1lKSkge1xuICAgIGFjY2Vzc29yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihOb2RlLnByb3RvdHlwZSwgYWNjZXNzb3JOYW1lKTtcbiAgfVxuICBpZiAoIWFjY2Vzc29yKSB7XG4gICAgYWNjZXNzb3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG5vZGUsIGFjY2Vzc29yTmFtZSk7XG4gIH1cbiAgaWYgKGFjY2Vzc29yKSBPYmplY3QuZGVmaW5lUHJvcGVydHkobm9kZSwgXCJfX1wiICsgYWNjZXNzb3JOYW1lLCBhY2Nlc3Nvcik7XG59XG5mdW5jdGlvbiBpbnRlcm5hbENhbGwobm9kZSwgbWV0aG9kKSB7XG4gIGlmIChcIl9fXCIgKyBtZXRob2QgaW4gbm9kZSkge1xuICAgIGNvbnN0IHRvUmV0dXJuID0gbm9kZVtcIl9fXCIgKyBtZXRob2RdO1xuICAgIGlmICh0eXBlb2YgdG9SZXR1cm4gIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRvUmV0dXJuO1xuICAgIHJldHVybiB0b1JldHVybi5iaW5kKG5vZGUpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0eXBlb2Ygbm9kZVttZXRob2RdICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBub2RlW21ldGhvZF07XG4gICAgcmV0dXJuIG5vZGVbbWV0aG9kXS5iaW5kKG5vZGUpO1xuICB9XG59XG5cbi8vIHNyYy9ydW50aW1lL3Byb2ZpbGUudHNcbmltcG9ydCB7IEJVSUxEIGFzIEJVSUxEMTEgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xudmFyIGkgPSAwO1xudmFyIGNyZWF0ZVRpbWUgPSAoZm5OYW1lLCB0YWdOYW1lID0gXCJcIikgPT4ge1xuICBpZiAoQlVJTEQxMS5wcm9maWxlICYmIHBlcmZvcm1hbmNlLm1hcmspIHtcbiAgICBjb25zdCBrZXkgPSBgc3Q6JHtmbk5hbWV9OiR7dGFnTmFtZX06JHtpKyt9YDtcbiAgICBwZXJmb3JtYW5jZS5tYXJrKGtleSk7XG4gICAgcmV0dXJuICgpID0+IHBlcmZvcm1hbmNlLm1lYXN1cmUoYFtTdGVuY2lsXSAke2ZuTmFtZX0oKSA8JHt0YWdOYW1lfT5gLCBrZXkpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZXR1cm47XG4gICAgfTtcbiAgfVxufTtcbnZhciB1bmlxdWVUaW1lID0gKGtleSwgbWVhc3VyZVRleHQpID0+IHtcbiAgaWYgKEJVSUxEMTEucHJvZmlsZSAmJiBwZXJmb3JtYW5jZS5tYXJrKSB7XG4gICAgaWYgKHBlcmZvcm1hbmNlLmdldEVudHJpZXNCeU5hbWUoa2V5LCBcIm1hcmtcIikubGVuZ3RoID09PSAwKSB7XG4gICAgICBwZXJmb3JtYW5jZS5tYXJrKGtleSk7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAocGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5TmFtZShtZWFzdXJlVGV4dCwgXCJtZWFzdXJlXCIpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwZXJmb3JtYW5jZS5tZWFzdXJlKG1lYXN1cmVUZXh0LCBrZXkpO1xuICAgICAgfVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJldHVybjtcbiAgICB9O1xuICB9XG59O1xudmFyIGluc3BlY3QgPSAocmVmKSA9PiB7XG4gIGNvbnN0IGhvc3RSZWYgPSBnZXRIb3N0UmVmKHJlZik7XG4gIGlmICghaG9zdFJlZikge1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbiAgY29uc3QgZmxhZ3MgPSBob3N0UmVmLiRmbGFncyQ7XG4gIGNvbnN0IGhvc3RFbGVtZW50ID0gaG9zdFJlZi4kaG9zdEVsZW1lbnQkO1xuICByZXR1cm4ge1xuICAgIHJlbmRlckNvdW50OiBob3N0UmVmLiRyZW5kZXJDb3VudCQsXG4gICAgZmxhZ3M6IHtcbiAgICAgIGhhc1JlbmRlcmVkOiAhIShmbGFncyAmIDIgLyogaGFzUmVuZGVyZWQgKi8pLFxuICAgICAgaGFzQ29ubmVjdGVkOiAhIShmbGFncyAmIDEgLyogaGFzQ29ubmVjdGVkICovKSxcbiAgICAgIGlzV2FpdGluZ0ZvckNoaWxkcmVuOiAhIShmbGFncyAmIDQgLyogaXNXYWl0aW5nRm9yQ2hpbGRyZW4gKi8pLFxuICAgICAgaXNDb25zdHJ1Y3RpbmdJbnN0YW5jZTogISEoZmxhZ3MgJiA4IC8qIGlzQ29uc3RydWN0aW5nSW5zdGFuY2UgKi8pLFxuICAgICAgaXNRdWV1ZWRGb3JVcGRhdGU6ICEhKGZsYWdzICYgMTYgLyogaXNRdWV1ZWRGb3JVcGRhdGUgKi8pLFxuICAgICAgaGFzSW5pdGlhbGl6ZWRDb21wb25lbnQ6ICEhKGZsYWdzICYgMzIgLyogaGFzSW5pdGlhbGl6ZWRDb21wb25lbnQgKi8pLFxuICAgICAgaGFzTG9hZGVkQ29tcG9uZW50OiAhIShmbGFncyAmIDY0IC8qIGhhc0xvYWRlZENvbXBvbmVudCAqLyksXG4gICAgICBpc1dhdGNoUmVhZHk6ICEhKGZsYWdzICYgMTI4IC8qIGlzV2F0Y2hSZWFkeSAqLyksXG4gICAgICBpc0xpc3RlblJlYWR5OiAhIShmbGFncyAmIDI1NiAvKiBpc0xpc3RlblJlYWR5ICovKSxcbiAgICAgIG5lZWRzUmVyZW5kZXI6ICEhKGZsYWdzICYgNTEyIC8qIG5lZWRzUmVyZW5kZXIgKi8pXG4gICAgfSxcbiAgICBpbnN0YW5jZVZhbHVlczogaG9zdFJlZi4kaW5zdGFuY2VWYWx1ZXMkLFxuICAgIHNlcmlhbGl6ZXJWYWx1ZXM6IGhvc3RSZWYuJHNlcmlhbGl6ZXJWYWx1ZXMkLFxuICAgIGFuY2VzdG9yQ29tcG9uZW50OiBob3N0UmVmLiRhbmNlc3RvckNvbXBvbmVudCQsXG4gICAgaG9zdEVsZW1lbnQsXG4gICAgbGF6eUluc3RhbmNlOiBob3N0UmVmLiRsYXp5SW5zdGFuY2UkLFxuICAgIHZub2RlOiBob3N0UmVmLiR2bm9kZSQsXG4gICAgbW9kZU5hbWU6IGhvc3RSZWYuJG1vZGVOYW1lJCxcbiAgICBmZXRjaGVkQ2JMaXN0OiBob3N0UmVmLiRmZXRjaGVkQ2JMaXN0JCxcbiAgICBvblJlYWR5UHJvbWlzZTogaG9zdFJlZi4kb25SZWFkeVByb21pc2UkLFxuICAgIG9uUmVhZHlSZXNvbHZlOiBob3N0UmVmLiRvblJlYWR5UmVzb2x2ZSQsXG4gICAgb25JbnN0YW5jZVByb21pc2U6IGhvc3RSZWYuJG9uSW5zdGFuY2VQcm9taXNlJCxcbiAgICBvbkluc3RhbmNlUmVzb2x2ZTogaG9zdFJlZi4kb25JbnN0YW5jZVJlc29sdmUkLFxuICAgIG9uUmVuZGVyUmVzb2x2ZTogaG9zdFJlZi4kb25SZW5kZXJSZXNvbHZlJCxcbiAgICBxdWV1ZWRMaXN0ZW5lcnM6IGhvc3RSZWYuJHF1ZXVlZExpc3RlbmVycyQsXG4gICAgcm1MaXN0ZW5lcnM6IGhvc3RSZWYuJHJtTGlzdGVuZXJzJCxcbiAgICBbXCJzLWlkXCJdOiBob3N0RWxlbWVudFtcInMtaWRcIl0sXG4gICAgW1wicy1jclwiXTogaG9zdEVsZW1lbnRbXCJzLWNyXCJdLFxuICAgIFtcInMtbHJcIl06IGhvc3RFbGVtZW50W1wicy1sclwiXSxcbiAgICBbXCJzLXBcIl06IGhvc3RFbGVtZW50W1wicy1wXCJdLFxuICAgIFtcInMtcmNcIl06IGhvc3RFbGVtZW50W1wicy1yY1wiXSxcbiAgICBbXCJzLXNjXCJdOiBob3N0RWxlbWVudFtcInMtc2NcIl1cbiAgfTtcbn07XG52YXIgaW5zdGFsbERldlRvb2xzID0gKCkgPT4ge1xuICBpZiAoQlVJTEQxMS5kZXZUb29scykge1xuICAgIGNvbnN0IHN0ZW5jaWwgPSB3aW4uc3RlbmNpbCA9IHdpbi5zdGVuY2lsIHx8IHt9O1xuICAgIGNvbnN0IG9yaWdpbmFsSW5zcGVjdCA9IHN0ZW5jaWwuaW5zcGVjdDtcbiAgICBzdGVuY2lsLmluc3BlY3QgPSAocmVmKSA9PiB7XG4gICAgICBsZXQgcmVzdWx0ID0gaW5zcGVjdChyZWYpO1xuICAgICAgaWYgKCFyZXN1bHQgJiYgdHlwZW9mIG9yaWdpbmFsSW5zcGVjdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJlc3VsdCA9IG9yaWdpbmFsSW5zcGVjdChyZWYpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9XG59O1xuXG4vLyBzcmMvcnVudGltZS9zdHlsZXMudHNcbmltcG9ydCB7IEJVSUxEIGFzIEJVSUxEMTIgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xudmFyIHJvb3RBcHBsaWVkU3R5bGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG52YXIgcmVnaXN0ZXJTdHlsZSA9IChzY29wZUlkMiwgY3NzVGV4dCwgYWxsb3dDUykgPT4ge1xuICBsZXQgc3R5bGUgPSBzdHlsZXMuZ2V0KHNjb3BlSWQyKTtcbiAgaWYgKHN1cHBvcnRzQ29uc3RydWN0YWJsZVN0eWxlc2hlZXRzICYmIGFsbG93Q1MpIHtcbiAgICBzdHlsZSA9IHN0eWxlIHx8IG5ldyBDU1NTdHlsZVNoZWV0KCk7XG4gICAgaWYgKHR5cGVvZiBzdHlsZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgc3R5bGUgPSBjc3NUZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5yZXBsYWNlU3luYyhjc3NUZXh0KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBjc3NUZXh0O1xuICB9XG4gIHN0eWxlcy5zZXQoc2NvcGVJZDIsIHN0eWxlKTtcbn07XG52YXIgYWRkU3R5bGUgPSAoc3R5bGVDb250YWluZXJOb2RlLCBjbXBNZXRhLCBtb2RlKSA9PiB7XG4gIHZhciBfYTtcbiAgY29uc3Qgc2NvcGVJZDIgPSBnZXRTY29wZUlkKGNtcE1ldGEsIG1vZGUpO1xuICBjb25zdCBzdHlsZSA9IHN0eWxlcy5nZXQoc2NvcGVJZDIpO1xuICBpZiAoIUJVSUxEMTIuYXR0YWNoU3R5bGVzIHx8ICF3aW4uZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gc2NvcGVJZDI7XG4gIH1cbiAgc3R5bGVDb250YWluZXJOb2RlID0gc3R5bGVDb250YWluZXJOb2RlLm5vZGVUeXBlID09PSAxMSAvKiBEb2N1bWVudEZyYWdtZW50ICovID8gc3R5bGVDb250YWluZXJOb2RlIDogd2luLmRvY3VtZW50O1xuICBpZiAoc3R5bGUpIHtcbiAgICBpZiAodHlwZW9mIHN0eWxlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBzdHlsZUNvbnRhaW5lck5vZGUgPSBzdHlsZUNvbnRhaW5lck5vZGUuaGVhZCB8fCBzdHlsZUNvbnRhaW5lck5vZGU7XG4gICAgICBsZXQgYXBwbGllZFN0eWxlcyA9IHJvb3RBcHBsaWVkU3R5bGVzLmdldChzdHlsZUNvbnRhaW5lck5vZGUpO1xuICAgICAgbGV0IHN0eWxlRWxtO1xuICAgICAgaWYgKCFhcHBsaWVkU3R5bGVzKSB7XG4gICAgICAgIHJvb3RBcHBsaWVkU3R5bGVzLnNldChzdHlsZUNvbnRhaW5lck5vZGUsIGFwcGxpZWRTdHlsZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpKTtcbiAgICAgIH1cbiAgICAgIGlmICghYXBwbGllZFN0eWxlcy5oYXMoc2NvcGVJZDIpKSB7XG4gICAgICAgIGlmIChCVUlMRDEyLmh5ZHJhdGVDbGllbnRTaWRlICYmIHN0eWxlQ29udGFpbmVyTm9kZS5ob3N0ICYmIChzdHlsZUVsbSA9IHN0eWxlQ29udGFpbmVyTm9kZS5xdWVyeVNlbGVjdG9yKGBbJHtIWURSQVRFRF9TVFlMRV9JRH09XCIke3Njb3BlSWQyfVwiXWApKSkge1xuICAgICAgICAgIHN0eWxlRWxtLmlubmVySFRNTCA9IHN0eWxlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0eWxlRWxtID0gd2luLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgICBzdHlsZUVsbS5pbm5lckhUTUwgPSBzdHlsZTtcbiAgICAgICAgICBjb25zdCBub25jZSA9IChfYSA9IHBsdC4kbm9uY2UkKSAhPSBudWxsID8gX2EgOiBxdWVyeU5vbmNlTWV0YVRhZ0NvbnRlbnQod2luLmRvY3VtZW50KTtcbiAgICAgICAgICBpZiAobm9uY2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgc3R5bGVFbG0uc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgbm9uY2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoKEJVSUxEMTIuaHlkcmF0ZVNlcnZlclNpZGUgfHwgQlVJTEQxMi5ob3RNb2R1bGVSZXBsYWNlbWVudCkgJiYgKGNtcE1ldGEuJGZsYWdzJCAmIDIgLyogc2NvcGVkQ3NzRW5jYXBzdWxhdGlvbiAqLyB8fCBjbXBNZXRhLiRmbGFncyQgJiAxMjggLyogc2hhZG93TmVlZHNTY29wZWRDc3MgKi8pKSB7XG4gICAgICAgICAgICBzdHlsZUVsbS5zZXRBdHRyaWJ1dGUoSFlEUkFURURfU1RZTEVfSUQsIHNjb3BlSWQyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCEoY21wTWV0YS4kZmxhZ3MkICYgMSAvKiBzaGFkb3dEb21FbmNhcHN1bGF0aW9uICovKSkge1xuICAgICAgICAgICAgaWYgKHN0eWxlQ29udGFpbmVyTm9kZS5ub2RlTmFtZSA9PT0gXCJIRUFEXCIpIHtcbiAgICAgICAgICAgICAgY29uc3QgcHJlY29ubmVjdExpbmtzID0gc3R5bGVDb250YWluZXJOb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaW5rW3JlbD1wcmVjb25uZWN0XVwiKTtcbiAgICAgICAgICAgICAgY29uc3QgcmVmZXJlbmNlTm9kZTIgPSBwcmVjb25uZWN0TGlua3MubGVuZ3RoID4gMCA/IHByZWNvbm5lY3RMaW5rc1twcmVjb25uZWN0TGlua3MubGVuZ3RoIC0gMV0ubmV4dFNpYmxpbmcgOiBzdHlsZUNvbnRhaW5lck5vZGUucXVlcnlTZWxlY3RvcihcInN0eWxlXCIpO1xuICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lck5vZGUuaW5zZXJ0QmVmb3JlKFxuICAgICAgICAgICAgICAgIHN0eWxlRWxtLFxuICAgICAgICAgICAgICAgIChyZWZlcmVuY2VOb2RlMiA9PSBudWxsID8gdm9pZCAwIDogcmVmZXJlbmNlTm9kZTIucGFyZW50Tm9kZSkgPT09IHN0eWxlQ29udGFpbmVyTm9kZSA/IHJlZmVyZW5jZU5vZGUyIDogbnVsbFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcImhvc3RcIiBpbiBzdHlsZUNvbnRhaW5lck5vZGUpIHtcbiAgICAgICAgICAgICAgaWYgKHN1cHBvcnRzQ29uc3RydWN0YWJsZVN0eWxlc2hlZXRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XG4gICAgICAgICAgICAgICAgc3R5bGVzaGVldC5yZXBsYWNlU3luYyhzdHlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN1cHBvcnRzTXV0YWJsZUFkb3B0ZWRTdHlsZVNoZWV0cykge1xuICAgICAgICAgICAgICAgICAgc3R5bGVDb250YWluZXJOb2RlLmFkb3B0ZWRTdHlsZVNoZWV0cy51bnNoaWZ0KHN0eWxlc2hlZXQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lck5vZGUuYWRvcHRlZFN0eWxlU2hlZXRzID0gW3N0eWxlc2hlZXQsIC4uLnN0eWxlQ29udGFpbmVyTm9kZS5hZG9wdGVkU3R5bGVTaGVldHNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1N0eWxlQ29udGFpbmVyID0gc3R5bGVDb250YWluZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCJzdHlsZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdTdHlsZUNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgZXhpc3RpbmdTdHlsZUNvbnRhaW5lci5pbm5lckhUTUwgPSBzdHlsZSArIGV4aXN0aW5nU3R5bGVDb250YWluZXIuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lck5vZGUucHJlcGVuZChzdHlsZUVsbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lck5vZGUuYXBwZW5kKHN0eWxlRWxtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNtcE1ldGEuJGZsYWdzJCAmIDEgLyogc2hhZG93RG9tRW5jYXBzdWxhdGlvbiAqLykge1xuICAgICAgICAgICAgc3R5bGVDb250YWluZXJOb2RlLmluc2VydEJlZm9yZShzdHlsZUVsbSwgbnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjbXBNZXRhLiRmbGFncyQgJiA0IC8qIGhhc1Nsb3RSZWxvY2F0aW9uICovKSB7XG4gICAgICAgICAgc3R5bGVFbG0uaW5uZXJIVE1MICs9IFNMT1RfRkJfQ1NTO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcHBsaWVkU3R5bGVzKSB7XG4gICAgICAgICAgYXBwbGllZFN0eWxlcy5hZGQoc2NvcGVJZDIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChCVUlMRDEyLmNvbnN0cnVjdGFibGVDU1MgJiYgIXN0eWxlQ29udGFpbmVyTm9kZS5hZG9wdGVkU3R5bGVTaGVldHMuaW5jbHVkZXMoc3R5bGUpKSB7XG4gICAgICBpZiAoc3VwcG9ydHNNdXRhYmxlQWRvcHRlZFN0eWxlU2hlZXRzKSB7XG4gICAgICAgIHN0eWxlQ29udGFpbmVyTm9kZS5hZG9wdGVkU3R5bGVTaGVldHMucHVzaChzdHlsZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHlsZUNvbnRhaW5lck5vZGUuYWRvcHRlZFN0eWxlU2hlZXRzID0gWy4uLnN0eWxlQ29udGFpbmVyTm9kZS5hZG9wdGVkU3R5bGVTaGVldHMsIHN0eWxlXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNjb3BlSWQyO1xufTtcbnZhciBhdHRhY2hTdHlsZXMgPSAoaG9zdFJlZikgPT4ge1xuICBjb25zdCBjbXBNZXRhID0gaG9zdFJlZi4kY21wTWV0YSQ7XG4gIGNvbnN0IGVsbSA9IGhvc3RSZWYuJGhvc3RFbGVtZW50JDtcbiAgY29uc3QgZmxhZ3MgPSBjbXBNZXRhLiRmbGFncyQ7XG4gIGNvbnN0IGVuZEF0dGFjaFN0eWxlcyA9IGNyZWF0ZVRpbWUoXCJhdHRhY2hTdHlsZXNcIiwgY21wTWV0YS4kdGFnTmFtZSQpO1xuICBjb25zdCBzY29wZUlkMiA9IGFkZFN0eWxlKFxuICAgIEJVSUxEMTIuc2hhZG93RG9tICYmIHN1cHBvcnRzU2hhZG93ICYmIGVsbS5zaGFkb3dSb290ID8gZWxtLnNoYWRvd1Jvb3QgOiBlbG0uZ2V0Um9vdE5vZGUoKSxcbiAgICBjbXBNZXRhLFxuICAgIGhvc3RSZWYuJG1vZGVOYW1lJFxuICApO1xuICBpZiAoKEJVSUxEMTIuc2hhZG93RG9tIHx8IEJVSUxEMTIuc2NvcGVkKSAmJiBCVUlMRDEyLmNzc0Fubm90YXRpb25zICYmIGZsYWdzICYgMTAgLyogbmVlZHNTY29wZWRFbmNhcHN1bGF0aW9uICovKSB7XG4gICAgZWxtW1wicy1zY1wiXSA9IHNjb3BlSWQyO1xuICAgIGVsbS5jbGFzc0xpc3QuYWRkKHNjb3BlSWQyICsgXCItaFwiKTtcbiAgfVxuICBlbmRBdHRhY2hTdHlsZXMoKTtcbn07XG52YXIgZ2V0U2NvcGVJZCA9IChjbXAsIG1vZGUpID0+IFwic2MtXCIgKyAoQlVJTEQxMi5tb2RlICYmIG1vZGUgJiYgY21wLiRmbGFncyQgJiAzMiAvKiBoYXNNb2RlICovID8gY21wLiR0YWdOYW1lJCArIFwiLVwiICsgbW9kZSA6IGNtcC4kdGFnTmFtZSQpO1xudmFyIGNvbnZlcnRTY29wZWRUb1NoYWRvdyA9IChjc3MpID0+IGNzcy5yZXBsYWNlKC9cXC9cXCohQChbXlxcL10rKVxcKlxcL1teXFx7XStcXHsvZywgXCIkMXtcIik7XG52YXIgaHlkcmF0ZVNjb3BlZFRvU2hhZG93ID0gKCkgPT4ge1xuICBpZiAoIXdpbi5kb2N1bWVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBzdHlsZXMyID0gd2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFske0hZRFJBVEVEX1NUWUxFX0lEfV1gKTtcbiAgbGV0IGkyID0gMDtcbiAgZm9yICg7IGkyIDwgc3R5bGVzMi5sZW5ndGg7IGkyKyspIHtcbiAgICByZWdpc3RlclN0eWxlKHN0eWxlczJbaTJdLmdldEF0dHJpYnV0ZShIWURSQVRFRF9TVFlMRV9JRCksIGNvbnZlcnRTY29wZWRUb1NoYWRvdyhzdHlsZXMyW2kyXS5pbm5lckhUTUwpLCB0cnVlKTtcbiAgfVxufTtcblxuLy8gc3JjL3J1bnRpbWUvdmRvbS9oLnRzXG5pbXBvcnQgeyBCVUlMRCBhcyBCVUlMRDEzIH0gZnJvbSBcIkBzdGVuY2lsL2NvcmUvaW50ZXJuYWwvYXBwLWRhdGFcIjtcbnZhciBoID0gKG5vZGVOYW1lLCB2bm9kZURhdGEsIC4uLmNoaWxkcmVuKSA9PiB7XG4gIGxldCBjaGlsZCA9IG51bGw7XG4gIGxldCBrZXkgPSBudWxsO1xuICBsZXQgc2xvdE5hbWUgPSBudWxsO1xuICBsZXQgc2ltcGxlID0gZmFsc2U7XG4gIGxldCBsYXN0U2ltcGxlID0gZmFsc2U7XG4gIGNvbnN0IHZOb2RlQ2hpbGRyZW4gPSBbXTtcbiAgY29uc3Qgd2FsayA9IChjKSA9PiB7XG4gICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IGMubGVuZ3RoOyBpMisrKSB7XG4gICAgICBjaGlsZCA9IGNbaTJdO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGQpKSB7XG4gICAgICAgIHdhbGsoY2hpbGQpO1xuICAgICAgfSBlbHNlIGlmIChjaGlsZCAhPSBudWxsICYmIHR5cGVvZiBjaGlsZCAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgaWYgKHNpbXBsZSA9IHR5cGVvZiBub2RlTmFtZSAhPT0gXCJmdW5jdGlvblwiICYmICFpc0NvbXBsZXhUeXBlKGNoaWxkKSkge1xuICAgICAgICAgIGNoaWxkID0gU3RyaW5nKGNoaWxkKTtcbiAgICAgICAgfSBlbHNlIGlmIChCVUlMRDEzLmlzRGV2ICYmIHR5cGVvZiBub2RlTmFtZSAhPT0gXCJmdW5jdGlvblwiICYmIGNoaWxkLiRmbGFncyQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIGNvbnNvbGVEZXZFcnJvcihgdk5vZGUgcGFzc2VkIGFzIGNoaWxkcmVuIGhhcyB1bmV4cGVjdGVkIHR5cGUuXG5NYWtlIHN1cmUgaXQncyB1c2luZyB0aGUgY29ycmVjdCBoKCkgZnVuY3Rpb24uXG5FbXB0eSBvYmplY3RzIGNhbiBhbHNvIGJlIHRoZSBjYXVzZSwgbG9vayBmb3IgSlNYIGNvbW1lbnRzIHRoYXQgYmVjYW1lIG9iamVjdHMuYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNpbXBsZSAmJiBsYXN0U2ltcGxlKSB7XG4gICAgICAgICAgdk5vZGVDaGlsZHJlblt2Tm9kZUNoaWxkcmVuLmxlbmd0aCAtIDFdLiR0ZXh0JCArPSBjaGlsZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2Tm9kZUNoaWxkcmVuLnB1c2goc2ltcGxlID8gbmV3Vk5vZGUobnVsbCwgY2hpbGQpIDogY2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIGxhc3RTaW1wbGUgPSBzaW1wbGU7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICB3YWxrKGNoaWxkcmVuKTtcbiAgaWYgKHZub2RlRGF0YSkge1xuICAgIGlmIChCVUlMRDEzLmlzRGV2ICYmIG5vZGVOYW1lID09PSBcImlucHV0XCIpIHtcbiAgICAgIHZhbGlkYXRlSW5wdXRQcm9wZXJ0aWVzKHZub2RlRGF0YSk7XG4gICAgfVxuICAgIGlmIChCVUlMRDEzLnZkb21LZXkgJiYgdm5vZGVEYXRhLmtleSkge1xuICAgICAga2V5ID0gdm5vZGVEYXRhLmtleTtcbiAgICB9XG4gICAgaWYgKEJVSUxEMTMuc2xvdFJlbG9jYXRpb24gJiYgdm5vZGVEYXRhLm5hbWUpIHtcbiAgICAgIHNsb3ROYW1lID0gdm5vZGVEYXRhLm5hbWU7XG4gICAgfVxuICAgIGlmIChCVUlMRDEzLnZkb21DbGFzcykge1xuICAgICAgY29uc3QgY2xhc3NEYXRhID0gdm5vZGVEYXRhLmNsYXNzTmFtZSB8fCB2bm9kZURhdGEuY2xhc3M7XG4gICAgICBpZiAoY2xhc3NEYXRhKSB7XG4gICAgICAgIHZub2RlRGF0YS5jbGFzcyA9IHR5cGVvZiBjbGFzc0RhdGEgIT09IFwib2JqZWN0XCIgPyBjbGFzc0RhdGEgOiBPYmplY3Qua2V5cyhjbGFzc0RhdGEpLmZpbHRlcigoaykgPT4gY2xhc3NEYXRhW2tdKS5qb2luKFwiIFwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKEJVSUxEMTMuaXNEZXYgJiYgdk5vZGVDaGlsZHJlbi5zb21lKGlzSG9zdCkpIHtcbiAgICBjb25zb2xlRGV2RXJyb3IoYFRoZSA8SG9zdD4gbXVzdCBiZSB0aGUgc2luZ2xlIHJvb3QgY29tcG9uZW50LiBNYWtlIHN1cmU6XG4tIFlvdSBhcmUgTk9UIHVzaW5nIGhvc3REYXRhKCkgYW5kIDxIb3N0PiBpbiB0aGUgc2FtZSBjb21wb25lbnQuXG4tIDxIb3N0PiBpcyB1c2VkIG9uY2UsIGFuZCBpdCdzIHRoZSBzaW5nbGUgcm9vdCBjb21wb25lbnQgb2YgdGhlIHJlbmRlcigpIGZ1bmN0aW9uLmApO1xuICB9XG4gIGlmIChCVUlMRDEzLnZkb21GdW5jdGlvbmFsICYmIHR5cGVvZiBub2RlTmFtZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIG5vZGVOYW1lKFxuICAgICAgdm5vZGVEYXRhID09PSBudWxsID8ge30gOiB2bm9kZURhdGEsXG4gICAgICB2Tm9kZUNoaWxkcmVuLFxuICAgICAgdmRvbUZuVXRpbHNcbiAgICApO1xuICB9XG4gIGNvbnN0IHZub2RlID0gbmV3Vk5vZGUobm9kZU5hbWUsIG51bGwpO1xuICB2bm9kZS4kYXR0cnMkID0gdm5vZGVEYXRhO1xuICBpZiAodk5vZGVDaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgdm5vZGUuJGNoaWxkcmVuJCA9IHZOb2RlQ2hpbGRyZW47XG4gIH1cbiAgaWYgKEJVSUxEMTMudmRvbUtleSkge1xuICAgIHZub2RlLiRrZXkkID0ga2V5O1xuICB9XG4gIGlmIChCVUlMRDEzLnNsb3RSZWxvY2F0aW9uKSB7XG4gICAgdm5vZGUuJG5hbWUkID0gc2xvdE5hbWU7XG4gIH1cbiAgcmV0dXJuIHZub2RlO1xufTtcbnZhciBuZXdWTm9kZSA9ICh0YWcsIHRleHQpID0+IHtcbiAgY29uc3Qgdm5vZGUgPSB7XG4gICAgJGZsYWdzJDogMCxcbiAgICAkdGFnJDogdGFnLFxuICAgICR0ZXh0JDogdGV4dCxcbiAgICAkZWxtJDogbnVsbCxcbiAgICAkY2hpbGRyZW4kOiBudWxsXG4gIH07XG4gIGlmIChCVUlMRDEzLnZkb21BdHRyaWJ1dGUpIHtcbiAgICB2bm9kZS4kYXR0cnMkID0gbnVsbDtcbiAgfVxuICBpZiAoQlVJTEQxMy52ZG9tS2V5KSB7XG4gICAgdm5vZGUuJGtleSQgPSBudWxsO1xuICB9XG4gIGlmIChCVUlMRDEzLnNsb3RSZWxvY2F0aW9uKSB7XG4gICAgdm5vZGUuJG5hbWUkID0gbnVsbDtcbiAgfVxuICByZXR1cm4gdm5vZGU7XG59O1xudmFyIEhvc3QgPSB7fTtcbnZhciBpc0hvc3QgPSAobm9kZSkgPT4gbm9kZSAmJiBub2RlLiR0YWckID09PSBIb3N0O1xudmFyIHZkb21GblV0aWxzID0ge1xuICBmb3JFYWNoOiAoY2hpbGRyZW4sIGNiKSA9PiBjaGlsZHJlbi5tYXAoY29udmVydFRvUHVibGljKS5mb3JFYWNoKGNiKSxcbiAgbWFwOiAoY2hpbGRyZW4sIGNiKSA9PiBjaGlsZHJlbi5tYXAoY29udmVydFRvUHVibGljKS5tYXAoY2IpLm1hcChjb252ZXJ0VG9Qcml2YXRlKVxufTtcbnZhciBjb252ZXJ0VG9QdWJsaWMgPSAobm9kZSkgPT4gKHtcbiAgdmF0dHJzOiBub2RlLiRhdHRycyQsXG4gIHZjaGlsZHJlbjogbm9kZS4kY2hpbGRyZW4kLFxuICB2a2V5OiBub2RlLiRrZXkkLFxuICB2bmFtZTogbm9kZS4kbmFtZSQsXG4gIHZ0YWc6IG5vZGUuJHRhZyQsXG4gIHZ0ZXh0OiBub2RlLiR0ZXh0JFxufSk7XG52YXIgY29udmVydFRvUHJpdmF0ZSA9IChub2RlKSA9PiB7XG4gIGlmICh0eXBlb2Ygbm9kZS52dGFnID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb25zdCB2bm9kZURhdGEgPSB7IC4uLm5vZGUudmF0dHJzIH07XG4gICAgaWYgKG5vZGUudmtleSkge1xuICAgICAgdm5vZGVEYXRhLmtleSA9IG5vZGUudmtleTtcbiAgICB9XG4gICAgaWYgKG5vZGUudm5hbWUpIHtcbiAgICAgIHZub2RlRGF0YS5uYW1lID0gbm9kZS52bmFtZTtcbiAgICB9XG4gICAgcmV0dXJuIGgobm9kZS52dGFnLCB2bm9kZURhdGEsIC4uLm5vZGUudmNoaWxkcmVuIHx8IFtdKTtcbiAgfVxuICBjb25zdCB2bm9kZSA9IG5ld1ZOb2RlKG5vZGUudnRhZywgbm9kZS52dGV4dCk7XG4gIHZub2RlLiRhdHRycyQgPSBub2RlLnZhdHRycztcbiAgdm5vZGUuJGNoaWxkcmVuJCA9IG5vZGUudmNoaWxkcmVuO1xuICB2bm9kZS4ka2V5JCA9IG5vZGUudmtleTtcbiAgdm5vZGUuJG5hbWUkID0gbm9kZS52bmFtZTtcbiAgcmV0dXJuIHZub2RlO1xufTtcbnZhciB2YWxpZGF0ZUlucHV0UHJvcGVydGllcyA9IChpbnB1dEVsbSkgPT4ge1xuICBjb25zdCBwcm9wcyA9IE9iamVjdC5rZXlzKGlucHV0RWxtKTtcbiAgY29uc3QgdmFsdWUgPSBwcm9wcy5pbmRleE9mKFwidmFsdWVcIik7XG4gIGlmICh2YWx1ZSA9PT0gLTEpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdHlwZUluZGV4ID0gcHJvcHMuaW5kZXhPZihcInR5cGVcIik7XG4gIGNvbnN0IG1pbkluZGV4ID0gcHJvcHMuaW5kZXhPZihcIm1pblwiKTtcbiAgY29uc3QgbWF4SW5kZXggPSBwcm9wcy5pbmRleE9mKFwibWF4XCIpO1xuICBjb25zdCBzdGVwSW5kZXggPSBwcm9wcy5pbmRleE9mKFwic3RlcFwiKTtcbiAgaWYgKHZhbHVlIDwgdHlwZUluZGV4IHx8IHZhbHVlIDwgbWluSW5kZXggfHwgdmFsdWUgPCBtYXhJbmRleCB8fCB2YWx1ZSA8IHN0ZXBJbmRleCkge1xuICAgIGNvbnNvbGVEZXZXYXJuKGBUaGUgXCJ2YWx1ZVwiIHByb3Agb2YgPGlucHV0PiBzaG91bGQgYmUgc2V0IGFmdGVyIFwibWluXCIsIFwibWF4XCIsIFwidHlwZVwiIGFuZCBcInN0ZXBcImApO1xuICB9XG59O1xuXG4vLyBzcmMvcnVudGltZS9jbGllbnQtaHlkcmF0ZS50c1xudmFyIGluaXRpYWxpemVDbGllbnRIeWRyYXRlID0gKGhvc3RFbG0sIHRhZ05hbWUsIGhvc3RJZCwgaG9zdFJlZikgPT4ge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCBlbmRIeWRyYXRlID0gY3JlYXRlVGltZShcImh5ZHJhdGVDbGllbnRcIiwgdGFnTmFtZSk7XG4gIGNvbnN0IHNoYWRvd1Jvb3QgPSBob3N0RWxtLnNoYWRvd1Jvb3Q7XG4gIGNvbnN0IGNoaWxkUmVuZGVyTm9kZXMgPSBbXTtcbiAgY29uc3Qgc2xvdE5vZGVzID0gW107XG4gIGNvbnN0IHNsb3R0ZWROb2RlcyA9IFtdO1xuICBjb25zdCBzaGFkb3dSb290Tm9kZXMgPSBCVUlMRDE0LnNoYWRvd0RvbSAmJiBzaGFkb3dSb290ID8gW10gOiBudWxsO1xuICBjb25zdCB2bm9kZSA9IG5ld1ZOb2RlKHRhZ05hbWUsIG51bGwpO1xuICB2bm9kZS4kZWxtJCA9IGhvc3RFbG07XG4gIGxldCBzY29wZUlkMjtcbiAgaWYgKEJVSUxEMTQuc2NvcGVkKSB7XG4gICAgY29uc3QgY21wTWV0YSA9IGhvc3RSZWYuJGNtcE1ldGEkO1xuICAgIGlmIChjbXBNZXRhICYmIGNtcE1ldGEuJGZsYWdzJCAmIDEwIC8qIG5lZWRzU2NvcGVkRW5jYXBzdWxhdGlvbiAqLyAmJiBob3N0RWxtW1wicy1zY1wiXSkge1xuICAgICAgc2NvcGVJZDIgPSBob3N0RWxtW1wicy1zY1wiXTtcbiAgICAgIGhvc3RFbG0uY2xhc3NMaXN0LmFkZChzY29wZUlkMiArIFwiLWhcIik7XG4gICAgfSBlbHNlIGlmIChob3N0RWxtW1wicy1zY1wiXSkge1xuICAgICAgZGVsZXRlIGhvc3RFbG1bXCJzLXNjXCJdO1xuICAgIH1cbiAgfVxuICBpZiAod2luLmRvY3VtZW50ICYmICghcGx0LiRvcmdMb2NOb2RlcyQgfHwgIXBsdC4kb3JnTG9jTm9kZXMkLnNpemUpKSB7XG4gICAgaW5pdGlhbGl6ZURvY3VtZW50SHlkcmF0ZSh3aW4uZG9jdW1lbnQuYm9keSwgcGx0LiRvcmdMb2NOb2RlcyQgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKTtcbiAgfVxuICBob3N0RWxtW0hZRFJBVEVfSURdID0gaG9zdElkO1xuICBob3N0RWxtLnJlbW92ZUF0dHJpYnV0ZShIWURSQVRFX0lEKTtcbiAgaG9zdFJlZi4kdm5vZGUkID0gY2xpZW50SHlkcmF0ZShcbiAgICB2bm9kZSxcbiAgICBjaGlsZFJlbmRlck5vZGVzLFxuICAgIHNsb3ROb2RlcyxcbiAgICBzaGFkb3dSb290Tm9kZXMsXG4gICAgaG9zdEVsbSxcbiAgICBob3N0RWxtLFxuICAgIGhvc3RJZCxcbiAgICBzbG90dGVkTm9kZXNcbiAgKTtcbiAgbGV0IGNySW5kZXggPSAwO1xuICBjb25zdCBjckxlbmd0aCA9IGNoaWxkUmVuZGVyTm9kZXMubGVuZ3RoO1xuICBsZXQgY2hpbGRSZW5kZXJOb2RlO1xuICBmb3IgKGNySW5kZXg7IGNySW5kZXggPCBjckxlbmd0aDsgY3JJbmRleCsrKSB7XG4gICAgY2hpbGRSZW5kZXJOb2RlID0gY2hpbGRSZW5kZXJOb2Rlc1tjckluZGV4XTtcbiAgICBjb25zdCBvcmdMb2NhdGlvbklkID0gY2hpbGRSZW5kZXJOb2RlLiRob3N0SWQkICsgXCIuXCIgKyBjaGlsZFJlbmRlck5vZGUuJG5vZGVJZCQ7XG4gICAgY29uc3Qgb3JnTG9jYXRpb25Ob2RlID0gcGx0LiRvcmdMb2NOb2RlcyQuZ2V0KG9yZ0xvY2F0aW9uSWQpO1xuICAgIGNvbnN0IG5vZGUgPSBjaGlsZFJlbmRlck5vZGUuJGVsbSQ7XG4gICAgaWYgKCFzaGFkb3dSb290KSB7XG4gICAgICBub2RlW1wicy1oblwiXSA9IHRhZ05hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgIGlmIChjaGlsZFJlbmRlck5vZGUuJHRhZyQgPT09IFwic2xvdFwiKSB7XG4gICAgICAgIG5vZGVbXCJzLWNyXCJdID0gaG9zdEVsbVtcInMtY3JcIl07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgoKF9hID0gY2hpbGRSZW5kZXJOb2RlLiR0YWckKSA9PSBudWxsID8gdm9pZCAwIDogX2EudG9TdHJpbmcoKS5pbmNsdWRlcyhcIi1cIikpICYmIGNoaWxkUmVuZGVyTm9kZS4kdGFnJCAhPT0gXCJzbG90LWZiXCIgJiYgIWNoaWxkUmVuZGVyTm9kZS4kZWxtJC5zaGFkb3dSb290KSB7XG4gICAgICBjb25zdCBjbXBNZXRhID0gZ2V0SG9zdFJlZihjaGlsZFJlbmRlck5vZGUuJGVsbSQpO1xuICAgICAgaWYgKGNtcE1ldGEpIHtcbiAgICAgICAgY29uc3Qgc2NvcGVJZDMgPSBnZXRTY29wZUlkKFxuICAgICAgICAgIGNtcE1ldGEuJGNtcE1ldGEkLFxuICAgICAgICAgIEJVSUxEMTQubW9kZSA/IGNoaWxkUmVuZGVyTm9kZS4kZWxtJC5nZXRBdHRyaWJ1dGUoXCJzLW1vZGVcIikgOiB2b2lkIDBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgc3R5bGVTaGVldCA9IHdpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzdHlsZVtzdHktaWQ9XCIke3Njb3BlSWQzfVwiXWApO1xuICAgICAgICBpZiAoc3R5bGVTaGVldCkge1xuICAgICAgICAgIGhvc3RFbG0uc2hhZG93Um9vdC5hcHBlbmQoc3R5bGVTaGVldC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjaGlsZFJlbmRlck5vZGUuJHRhZyQgPT09IFwic2xvdFwiKSB7XG4gICAgICBjaGlsZFJlbmRlck5vZGUuJG5hbWUkID0gY2hpbGRSZW5kZXJOb2RlLiRlbG0kW1wicy1zblwiXSB8fCBjaGlsZFJlbmRlck5vZGUuJGVsbSRbXCJuYW1lXCJdIHx8IG51bGw7XG4gICAgICBpZiAoY2hpbGRSZW5kZXJOb2RlLiRjaGlsZHJlbiQpIHtcbiAgICAgICAgY2hpbGRSZW5kZXJOb2RlLiRmbGFncyQgfD0gMiAvKiBpc1Nsb3RGYWxsYmFjayAqLztcbiAgICAgICAgaWYgKCFjaGlsZFJlbmRlck5vZGUuJGVsbSQuY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgICBjaGlsZFJlbmRlck5vZGUuJGNoaWxkcmVuJC5mb3JFYWNoKChjKSA9PiB7XG4gICAgICAgICAgICBjaGlsZFJlbmRlck5vZGUuJGVsbSQuYXBwZW5kQ2hpbGQoYy4kZWxtJCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoaWxkUmVuZGVyTm9kZS4kZmxhZ3MkIHw9IDEgLyogaXNTbG90UmVmZXJlbmNlICovO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3JnTG9jYXRpb25Ob2RlICYmIG9yZ0xvY2F0aW9uTm9kZS5pc0Nvbm5lY3RlZCkge1xuICAgICAgaWYgKG9yZ0xvY2F0aW9uTm9kZS5wYXJlbnRFbGVtZW50LnNoYWRvd1Jvb3QgJiYgb3JnTG9jYXRpb25Ob2RlW1wicy1lblwiXSA9PT0gXCJcIikge1xuICAgICAgICBvcmdMb2NhdGlvbk5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgb3JnTG9jYXRpb25Ob2RlLm5leHRTaWJsaW5nKTtcbiAgICAgIH1cbiAgICAgIG9yZ0xvY2F0aW9uTm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9yZ0xvY2F0aW9uTm9kZSk7XG4gICAgICBpZiAoIXNoYWRvd1Jvb3QpIHtcbiAgICAgICAgbm9kZVtcInMtb29cIl0gPSBwYXJzZUludChjaGlsZFJlbmRlck5vZGUuJG5vZGVJZCQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3JnTG9jYXRpb25Ob2RlICYmICFvcmdMb2NhdGlvbk5vZGVbXCJzLWlkXCJdKSB7XG4gICAgICBwbHQuJG9yZ0xvY05vZGVzJC5kZWxldGUob3JnTG9jYXRpb25JZCk7XG4gICAgfVxuICB9XG4gIGNvbnN0IGhvc3RzID0gW107XG4gIGNvbnN0IHNuTGVuID0gc2xvdHRlZE5vZGVzLmxlbmd0aDtcbiAgbGV0IHNuSW5kZXggPSAwO1xuICBsZXQgc2xvdEdyb3VwO1xuICBsZXQgc25Hcm91cElkeDtcbiAgbGV0IHNuR3JvdXBMZW47XG4gIGxldCBzbG90dGVkSXRlbTtcbiAgZm9yIChzbkluZGV4OyBzbkluZGV4IDwgc25MZW47IHNuSW5kZXgrKykge1xuICAgIHNsb3RHcm91cCA9IHNsb3R0ZWROb2Rlc1tzbkluZGV4XTtcbiAgICBpZiAoIXNsb3RHcm91cCB8fCAhc2xvdEdyb3VwLmxlbmd0aCkgY29udGludWU7XG4gICAgc25Hcm91cExlbiA9IHNsb3RHcm91cC5sZW5ndGg7XG4gICAgc25Hcm91cElkeCA9IDA7XG4gICAgZm9yIChzbkdyb3VwSWR4OyBzbkdyb3VwSWR4IDwgc25Hcm91cExlbjsgc25Hcm91cElkeCsrKSB7XG4gICAgICBzbG90dGVkSXRlbSA9IHNsb3RHcm91cFtzbkdyb3VwSWR4XTtcbiAgICAgIGlmICghaG9zdHNbc2xvdHRlZEl0ZW0uaG9zdElkXSkge1xuICAgICAgICBob3N0c1tzbG90dGVkSXRlbS5ob3N0SWRdID0gcGx0LiRvcmdMb2NOb2RlcyQuZ2V0KHNsb3R0ZWRJdGVtLmhvc3RJZCk7XG4gICAgICB9XG4gICAgICBpZiAoIWhvc3RzW3Nsb3R0ZWRJdGVtLmhvc3RJZF0pIGNvbnRpbnVlO1xuICAgICAgY29uc3QgaG9zdEVsZSA9IGhvc3RzW3Nsb3R0ZWRJdGVtLmhvc3RJZF07XG4gICAgICBpZiAoaG9zdEVsZS5zaGFkb3dSb290ICYmIHNsb3R0ZWRJdGVtLm5vZGUucGFyZW50RWxlbWVudCAhPT0gaG9zdEVsZSkge1xuICAgICAgICBob3N0RWxlLmFwcGVuZENoaWxkKHNsb3R0ZWRJdGVtLm5vZGUpO1xuICAgICAgfVxuICAgICAgaWYgKCFob3N0RWxlLnNoYWRvd1Jvb3QgfHwgIXNoYWRvd1Jvb3QpIHtcbiAgICAgICAgaWYgKCFzbG90dGVkSXRlbS5zbG90W1wicy1jclwiXSkge1xuICAgICAgICAgIHNsb3R0ZWRJdGVtLnNsb3RbXCJzLWNyXCJdID0gaG9zdEVsZVtcInMtY3JcIl07XG4gICAgICAgICAgaWYgKCFzbG90dGVkSXRlbS5zbG90W1wicy1jclwiXSAmJiBob3N0RWxlLnNoYWRvd1Jvb3QpIHtcbiAgICAgICAgICAgIHNsb3R0ZWRJdGVtLnNsb3RbXCJzLWNyXCJdID0gaG9zdEVsZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2xvdHRlZEl0ZW0uc2xvdFtcInMtY3JcIl0gPSAoaG9zdEVsZS5fX2NoaWxkTm9kZXMgfHwgaG9zdEVsZS5jaGlsZE5vZGVzKVswXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYWRkU2xvdFJlbG9jYXRlTm9kZShzbG90dGVkSXRlbS5ub2RlLCBzbG90dGVkSXRlbS5zbG90LCBmYWxzZSwgc2xvdHRlZEl0ZW0ubm9kZVtcInMtb29cIl0pO1xuICAgICAgICBpZiAoKChfYiA9IHNsb3R0ZWRJdGVtLm5vZGUucGFyZW50RWxlbWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnNoYWRvd1Jvb3QpICYmIHNsb3R0ZWRJdGVtLm5vZGVbXCJnZXRBdHRyaWJ1dGVcIl0gJiYgc2xvdHRlZEl0ZW0ubm9kZS5nZXRBdHRyaWJ1dGUoXCJzbG90XCIpKSB7XG4gICAgICAgICAgc2xvdHRlZEl0ZW0ubm9kZS5yZW1vdmVBdHRyaWJ1dGUoXCJzbG90XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChCVUlMRDE0LmV4cGVyaW1lbnRhbFNsb3RGaXhlcykge1xuICAgICAgICAgIHBhdGNoU2xvdHRlZE5vZGUoc2xvdHRlZEl0ZW0ubm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKEJVSUxEMTQuc2NvcGVkICYmIHNjb3BlSWQyICYmIHNsb3ROb2Rlcy5sZW5ndGgpIHtcbiAgICBzbG90Tm9kZXMuZm9yRWFjaCgoc2xvdCkgPT4ge1xuICAgICAgc2xvdC4kZWxtJC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoc2NvcGVJZDIgKyBcIi1zXCIpO1xuICAgIH0pO1xuICB9XG4gIGlmIChCVUlMRDE0LnNoYWRvd0RvbSAmJiBzaGFkb3dSb290KSB7XG4gICAgbGV0IHJuSWRleCA9IDA7XG4gICAgY29uc3Qgcm5MZW4gPSBzaGFkb3dSb290Tm9kZXMubGVuZ3RoO1xuICAgIGlmIChybkxlbikge1xuICAgICAgZm9yIChybklkZXg7IHJuSWRleCA8IHJuTGVuOyBybklkZXgrKykge1xuICAgICAgICBjb25zdCBub2RlID0gc2hhZG93Um9vdE5vZGVzW3JuSWRleF07XG4gICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgc2hhZG93Um9vdC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgQXJyYXkuZnJvbShob3N0RWxtLmNoaWxkTm9kZXMpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBub2RlW1wicy1lblwiXSAhPT0gXCJzdHJpbmdcIiAmJiB0eXBlb2Ygbm9kZVtcInMtc25cIl0gIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSAvKiBFbGVtZW50Tm9kZSAqLyAmJiBub2RlLnNsb3QgJiYgbm9kZS5oaWRkZW4pIHtcbiAgICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKFwiaGlkZGVuXCIpO1xuICAgICAgICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gOCAvKiBDb21tZW50Tm9kZSAqLyAmJiAhbm9kZS5ub2RlVmFsdWUgfHwgbm9kZS5ub2RlVHlwZSA9PT0gMyAvKiBUZXh0Tm9kZSAqLyAmJiAhbm9kZS53aG9sZVRleHQudHJpbSgpKSB7XG4gICAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgaG9zdFJlZi4kaG9zdEVsZW1lbnQkID0gaG9zdEVsbTtcbiAgZW5kSHlkcmF0ZSgpO1xufTtcbnZhciBjbGllbnRIeWRyYXRlID0gKHBhcmVudFZOb2RlLCBjaGlsZFJlbmRlck5vZGVzLCBzbG90Tm9kZXMsIHNoYWRvd1Jvb3ROb2RlcywgaG9zdEVsbSwgbm9kZSwgaG9zdElkLCBzbG90dGVkTm9kZXMgPSBbXSkgPT4ge1xuICBsZXQgY2hpbGROb2RlVHlwZTtcbiAgbGV0IGNoaWxkSWRTcGx0O1xuICBsZXQgY2hpbGRWTm9kZTtcbiAgbGV0IGkyO1xuICBjb25zdCBzY29wZUlkMiA9IGhvc3RFbG1bXCJzLXNjXCJdO1xuICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSAvKiBFbGVtZW50Tm9kZSAqLykge1xuICAgIGNoaWxkTm9kZVR5cGUgPSBub2RlLmdldEF0dHJpYnV0ZShIWURSQVRFX0NISUxEX0lEKTtcbiAgICBpZiAoY2hpbGROb2RlVHlwZSkge1xuICAgICAgY2hpbGRJZFNwbHQgPSBjaGlsZE5vZGVUeXBlLnNwbGl0KFwiLlwiKTtcbiAgICAgIGlmIChjaGlsZElkU3BsdFswXSA9PT0gaG9zdElkIHx8IGNoaWxkSWRTcGx0WzBdID09PSBcIjBcIikge1xuICAgICAgICBjaGlsZFZOb2RlID0gY3JlYXRlU2ltcGxlVk5vZGUoe1xuICAgICAgICAgICRmbGFncyQ6IDAsXG4gICAgICAgICAgJGhvc3RJZCQ6IGNoaWxkSWRTcGx0WzBdLFxuICAgICAgICAgICRub2RlSWQkOiBjaGlsZElkU3BsdFsxXSxcbiAgICAgICAgICAkZGVwdGgkOiBjaGlsZElkU3BsdFsyXSxcbiAgICAgICAgICAkaW5kZXgkOiBjaGlsZElkU3BsdFszXSxcbiAgICAgICAgICAkdGFnJDogbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgJGVsbSQ6IG5vZGUsXG4gICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgYWRkIHRoZSBpbml0aWFsIGNsYXNzZXMgdG8gdGhlIFZOb2RlLCB0aGUgZmlyc3QgYHZkb20tcmVuZGVyLnRzYCBwYXRjaFxuICAgICAgICAgIC8vIHdvbid0IHRyeSB0byByZWNvbmNpbGUgdGhlbS4gQ2xhc3NlcyBzZXQgb24gdGhlIG5vZGUgd2lsbCBiZSBibG93biBhd2F5LlxuICAgICAgICAgICRhdHRycyQ6IHsgY2xhc3M6IG5vZGUuY2xhc3NOYW1lIHx8IFwiXCIgfVxuICAgICAgICB9KTtcbiAgICAgICAgY2hpbGRSZW5kZXJOb2Rlcy5wdXNoKGNoaWxkVk5vZGUpO1xuICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShIWURSQVRFX0NISUxEX0lEKTtcbiAgICAgICAgaWYgKCFwYXJlbnRWTm9kZS4kY2hpbGRyZW4kKSB7XG4gICAgICAgICAgcGFyZW50Vk5vZGUuJGNoaWxkcmVuJCA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChCVUlMRDE0LnNjb3BlZCAmJiBzY29wZUlkMiAmJiBjaGlsZElkU3BsdFswXSA9PT0gaG9zdElkKSB7XG4gICAgICAgICAgbm9kZVtcInMtc2lcIl0gPSBzY29wZUlkMjtcbiAgICAgICAgICBjaGlsZFZOb2RlLiRhdHRycyQuY2xhc3MgKz0gXCIgXCIgKyBzY29wZUlkMjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzbG90TmFtZSA9IGNoaWxkVk5vZGUuJGVsbSQuZ2V0QXR0cmlidXRlKFwicy1zblwiKTtcbiAgICAgICAgaWYgKHR5cGVvZiBzbG90TmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGlmIChjaGlsZFZOb2RlLiR0YWckID09PSBcInNsb3QtZmJcIikge1xuICAgICAgICAgICAgYWRkU2xvdChcbiAgICAgICAgICAgICAgc2xvdE5hbWUsXG4gICAgICAgICAgICAgIGNoaWxkSWRTcGx0WzJdLFxuICAgICAgICAgICAgICBjaGlsZFZOb2RlLFxuICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICBwYXJlbnRWTm9kZSxcbiAgICAgICAgICAgICAgY2hpbGRSZW5kZXJOb2RlcyxcbiAgICAgICAgICAgICAgc2xvdE5vZGVzLFxuICAgICAgICAgICAgICBzaGFkb3dSb290Tm9kZXMsXG4gICAgICAgICAgICAgIHNsb3R0ZWROb2Rlc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChCVUlMRDE0LnNjb3BlZCAmJiBzY29wZUlkMikge1xuICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoc2NvcGVJZDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjaGlsZFZOb2RlLiRlbG0kW1wicy1zblwiXSA9IHNsb3ROYW1lO1xuICAgICAgICAgIGNoaWxkVk5vZGUuJGVsbSQucmVtb3ZlQXR0cmlidXRlKFwicy1zblwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGRWTm9kZS4kaW5kZXgkICE9PSB2b2lkIDApIHtcbiAgICAgICAgICBwYXJlbnRWTm9kZS4kY2hpbGRyZW4kW2NoaWxkVk5vZGUuJGluZGV4JF0gPSBjaGlsZFZOb2RlO1xuICAgICAgICB9XG4gICAgICAgIHBhcmVudFZOb2RlID0gY2hpbGRWTm9kZTtcbiAgICAgICAgaWYgKHNoYWRvd1Jvb3ROb2RlcyAmJiBjaGlsZFZOb2RlLiRkZXB0aCQgPT09IFwiMFwiKSB7XG4gICAgICAgICAgc2hhZG93Um9vdE5vZGVzW2NoaWxkVk5vZGUuJGluZGV4JF0gPSBjaGlsZFZOb2RlLiRlbG0kO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChub2RlLnNoYWRvd1Jvb3QpIHtcbiAgICAgIGZvciAoaTIgPSBub2RlLnNoYWRvd1Jvb3QuY2hpbGROb2Rlcy5sZW5ndGggLSAxOyBpMiA+PSAwOyBpMi0tKSB7XG4gICAgICAgIGNsaWVudEh5ZHJhdGUoXG4gICAgICAgICAgcGFyZW50Vk5vZGUsXG4gICAgICAgICAgY2hpbGRSZW5kZXJOb2RlcyxcbiAgICAgICAgICBzbG90Tm9kZXMsXG4gICAgICAgICAgc2hhZG93Um9vdE5vZGVzLFxuICAgICAgICAgIGhvc3RFbG0sXG4gICAgICAgICAgbm9kZS5zaGFkb3dSb290LmNoaWxkTm9kZXNbaTJdLFxuICAgICAgICAgIGhvc3RJZCxcbiAgICAgICAgICBzbG90dGVkTm9kZXNcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgbm9uU2hhZG93Tm9kZXMgPSBub2RlLl9fY2hpbGROb2RlcyB8fCBub2RlLmNoaWxkTm9kZXM7XG4gICAgZm9yIChpMiA9IG5vblNoYWRvd05vZGVzLmxlbmd0aCAtIDE7IGkyID49IDA7IGkyLS0pIHtcbiAgICAgIGNsaWVudEh5ZHJhdGUoXG4gICAgICAgIHBhcmVudFZOb2RlLFxuICAgICAgICBjaGlsZFJlbmRlck5vZGVzLFxuICAgICAgICBzbG90Tm9kZXMsXG4gICAgICAgIHNoYWRvd1Jvb3ROb2RlcyxcbiAgICAgICAgaG9zdEVsbSxcbiAgICAgICAgbm9uU2hhZG93Tm9kZXNbaTJdLFxuICAgICAgICBob3N0SWQsXG4gICAgICAgIHNsb3R0ZWROb2Rlc1xuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gOCAvKiBDb21tZW50Tm9kZSAqLykge1xuICAgIGNoaWxkSWRTcGx0ID0gbm9kZS5ub2RlVmFsdWUuc3BsaXQoXCIuXCIpO1xuICAgIGlmIChjaGlsZElkU3BsdFsxXSA9PT0gaG9zdElkIHx8IGNoaWxkSWRTcGx0WzFdID09PSBcIjBcIikge1xuICAgICAgY2hpbGROb2RlVHlwZSA9IGNoaWxkSWRTcGx0WzBdO1xuICAgICAgY2hpbGRWTm9kZSA9IGNyZWF0ZVNpbXBsZVZOb2RlKHtcbiAgICAgICAgJGhvc3RJZCQ6IGNoaWxkSWRTcGx0WzFdLFxuICAgICAgICAkbm9kZUlkJDogY2hpbGRJZFNwbHRbMl0sXG4gICAgICAgICRkZXB0aCQ6IGNoaWxkSWRTcGx0WzNdLFxuICAgICAgICAkaW5kZXgkOiBjaGlsZElkU3BsdFs0XSB8fCBcIjBcIixcbiAgICAgICAgJGVsbSQ6IG5vZGUsXG4gICAgICAgICRhdHRycyQ6IG51bGwsXG4gICAgICAgICRjaGlsZHJlbiQ6IG51bGwsXG4gICAgICAgICRrZXkkOiBudWxsLFxuICAgICAgICAkbmFtZSQ6IG51bGwsXG4gICAgICAgICR0YWckOiBudWxsLFxuICAgICAgICAkdGV4dCQ6IG51bGxcbiAgICAgIH0pO1xuICAgICAgaWYgKGNoaWxkTm9kZVR5cGUgPT09IFRFWFRfTk9ERV9JRCkge1xuICAgICAgICBjaGlsZFZOb2RlLiRlbG0kID0gZmluZENvcnJlc3BvbmRpbmdOb2RlKG5vZGUsIDMgLyogVGV4dE5vZGUgKi8pO1xuICAgICAgICBpZiAoY2hpbGRWTm9kZS4kZWxtJCAmJiBjaGlsZFZOb2RlLiRlbG0kLm5vZGVUeXBlID09PSAzIC8qIFRleHROb2RlICovKSB7XG4gICAgICAgICAgY2hpbGRWTm9kZS4kdGV4dCQgPSBjaGlsZFZOb2RlLiRlbG0kLnRleHRDb250ZW50O1xuICAgICAgICAgIGNoaWxkUmVuZGVyTm9kZXMucHVzaChjaGlsZFZOb2RlKTtcbiAgICAgICAgICBub2RlLnJlbW92ZSgpO1xuICAgICAgICAgIGlmIChob3N0SWQgPT09IGNoaWxkVk5vZGUuJGhvc3RJZCQpIHtcbiAgICAgICAgICAgIGlmICghcGFyZW50Vk5vZGUuJGNoaWxkcmVuJCkge1xuICAgICAgICAgICAgICBwYXJlbnRWTm9kZS4kY2hpbGRyZW4kID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnRWTm9kZS4kY2hpbGRyZW4kW2NoaWxkVk5vZGUuJGluZGV4JF0gPSBjaGlsZFZOb2RlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2hhZG93Um9vdE5vZGVzICYmIGNoaWxkVk5vZGUuJGRlcHRoJCA9PT0gXCIwXCIpIHtcbiAgICAgICAgICAgIHNoYWRvd1Jvb3ROb2Rlc1tjaGlsZFZOb2RlLiRpbmRleCRdID0gY2hpbGRWTm9kZS4kZWxtJDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY2hpbGROb2RlVHlwZSA9PT0gQ09NTUVOVF9OT0RFX0lEKSB7XG4gICAgICAgIGNoaWxkVk5vZGUuJGVsbSQgPSBmaW5kQ29ycmVzcG9uZGluZ05vZGUobm9kZSwgOCAvKiBDb21tZW50Tm9kZSAqLyk7XG4gICAgICAgIGlmIChjaGlsZFZOb2RlLiRlbG0kICYmIGNoaWxkVk5vZGUuJGVsbSQubm9kZVR5cGUgPT09IDggLyogQ29tbWVudE5vZGUgKi8pIHtcbiAgICAgICAgICBjaGlsZFJlbmRlck5vZGVzLnB1c2goY2hpbGRWTm9kZSk7XG4gICAgICAgICAgbm9kZS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjaGlsZFZOb2RlLiRob3N0SWQkID09PSBob3N0SWQpIHtcbiAgICAgICAgaWYgKGNoaWxkTm9kZVR5cGUgPT09IFNMT1RfTk9ERV9JRCkge1xuICAgICAgICAgIGNvbnN0IHNsb3ROYW1lID0gbm9kZVtcInMtc25cIl0gPSBjaGlsZElkU3BsdFs1XSB8fCBcIlwiO1xuICAgICAgICAgIGFkZFNsb3QoXG4gICAgICAgICAgICBzbG90TmFtZSxcbiAgICAgICAgICAgIGNoaWxkSWRTcGx0WzJdLFxuICAgICAgICAgICAgY2hpbGRWTm9kZSxcbiAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICBwYXJlbnRWTm9kZSxcbiAgICAgICAgICAgIGNoaWxkUmVuZGVyTm9kZXMsXG4gICAgICAgICAgICBzbG90Tm9kZXMsXG4gICAgICAgICAgICBzaGFkb3dSb290Tm9kZXMsXG4gICAgICAgICAgICBzbG90dGVkTm9kZXNcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKGNoaWxkTm9kZVR5cGUgPT09IENPTlRFTlRfUkVGX0lEKSB7XG4gICAgICAgICAgaWYgKEJVSUxEMTQuc2hhZG93RG9tICYmIHNoYWRvd1Jvb3ROb2Rlcykge1xuICAgICAgICAgICAgbm9kZS5yZW1vdmUoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKEJVSUxEMTQuc2xvdFJlbG9jYXRpb24pIHtcbiAgICAgICAgICAgIGhvc3RFbG1bXCJzLWNyXCJdID0gbm9kZTtcbiAgICAgICAgICAgIG5vZGVbXCJzLWNuXCJdID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAocGFyZW50Vk5vZGUgJiYgcGFyZW50Vk5vZGUuJHRhZyQgPT09IFwic3R5bGVcIikge1xuICAgIGNvbnN0IHZub2RlID0gbmV3Vk5vZGUobnVsbCwgbm9kZS50ZXh0Q29udGVudCk7XG4gICAgdm5vZGUuJGVsbSQgPSBub2RlO1xuICAgIHZub2RlLiRpbmRleCQgPSBcIjBcIjtcbiAgICBwYXJlbnRWTm9kZS4kY2hpbGRyZW4kID0gW3Zub2RlXTtcbiAgfSBlbHNlIHtcbiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMyAvKiBUZXh0Tm9kZSAqLyAmJiAhbm9kZS53aG9sZVRleHQudHJpbSgpICYmICFub2RlW1wicy1uclwiXSkge1xuICAgICAgbm9kZS5yZW1vdmUoKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBhcmVudFZOb2RlO1xufTtcbnZhciBpbml0aWFsaXplRG9jdW1lbnRIeWRyYXRlID0gKG5vZGUsIG9yZ0xvY05vZGVzKSA9PiB7XG4gIGlmIChub2RlLm5vZGVUeXBlID09PSAxIC8qIEVsZW1lbnROb2RlICovKSB7XG4gICAgY29uc3QgY29tcG9uZW50SWQgPSBub2RlW0hZRFJBVEVfSURdIHx8IG5vZGUuZ2V0QXR0cmlidXRlKEhZRFJBVEVfSUQpO1xuICAgIGlmIChjb21wb25lbnRJZCkge1xuICAgICAgb3JnTG9jTm9kZXMuc2V0KGNvbXBvbmVudElkLCBub2RlKTtcbiAgICB9XG4gICAgbGV0IGkyID0gMDtcbiAgICBpZiAobm9kZS5zaGFkb3dSb290KSB7XG4gICAgICBmb3IgKDsgaTIgPCBub2RlLnNoYWRvd1Jvb3QuY2hpbGROb2Rlcy5sZW5ndGg7IGkyKyspIHtcbiAgICAgICAgaW5pdGlhbGl6ZURvY3VtZW50SHlkcmF0ZShub2RlLnNoYWRvd1Jvb3QuY2hpbGROb2Rlc1tpMl0sIG9yZ0xvY05vZGVzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgbm9uU2hhZG93Tm9kZXMgPSBub2RlLl9fY2hpbGROb2RlcyB8fCBub2RlLmNoaWxkTm9kZXM7XG4gICAgZm9yIChpMiA9IDA7IGkyIDwgbm9uU2hhZG93Tm9kZXMubGVuZ3RoOyBpMisrKSB7XG4gICAgICBpbml0aWFsaXplRG9jdW1lbnRIeWRyYXRlKG5vblNoYWRvd05vZGVzW2kyXSwgb3JnTG9jTm9kZXMpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09PSA4IC8qIENvbW1lbnROb2RlICovKSB7XG4gICAgY29uc3QgY2hpbGRJZFNwbHQgPSBub2RlLm5vZGVWYWx1ZS5zcGxpdChcIi5cIik7XG4gICAgaWYgKGNoaWxkSWRTcGx0WzBdID09PSBPUkdfTE9DQVRJT05fSUQpIHtcbiAgICAgIG9yZ0xvY05vZGVzLnNldChjaGlsZElkU3BsdFsxXSArIFwiLlwiICsgY2hpbGRJZFNwbHRbMl0sIG5vZGUpO1xuICAgICAgbm9kZS5ub2RlVmFsdWUgPSBcIlwiO1xuICAgICAgbm9kZVtcInMtZW5cIl0gPSBjaGlsZElkU3BsdFszXTtcbiAgICB9XG4gIH1cbn07XG52YXIgY3JlYXRlU2ltcGxlVk5vZGUgPSAodm5vZGUpID0+IHtcbiAgY29uc3QgZGVmYXVsdFZOb2RlID0ge1xuICAgICRmbGFncyQ6IDAsXG4gICAgJGhvc3RJZCQ6IG51bGwsXG4gICAgJG5vZGVJZCQ6IG51bGwsXG4gICAgJGRlcHRoJDogbnVsbCxcbiAgICAkaW5kZXgkOiBcIjBcIixcbiAgICAkZWxtJDogbnVsbCxcbiAgICAkYXR0cnMkOiBudWxsLFxuICAgICRjaGlsZHJlbiQ6IG51bGwsXG4gICAgJGtleSQ6IG51bGwsXG4gICAgJG5hbWUkOiBudWxsLFxuICAgICR0YWckOiBudWxsLFxuICAgICR0ZXh0JDogbnVsbFxuICB9O1xuICByZXR1cm4geyAuLi5kZWZhdWx0Vk5vZGUsIC4uLnZub2RlIH07XG59O1xuZnVuY3Rpb24gYWRkU2xvdChzbG90TmFtZSwgc2xvdElkLCBjaGlsZFZOb2RlLCBub2RlLCBwYXJlbnRWTm9kZSwgY2hpbGRSZW5kZXJOb2Rlcywgc2xvdE5vZGVzLCBzaGFkb3dSb290Tm9kZXMsIHNsb3R0ZWROb2Rlcykge1xuICBub2RlW1wicy1zclwiXSA9IHRydWU7XG4gIGNoaWxkVk5vZGUuJG5hbWUkID0gc2xvdE5hbWUgfHwgbnVsbDtcbiAgY2hpbGRWTm9kZS4kdGFnJCA9IFwic2xvdFwiO1xuICBjb25zdCBwYXJlbnROb2RlSWQgPSAocGFyZW50Vk5vZGUgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmVudFZOb2RlLiRlbG0kKSA/IHBhcmVudFZOb2RlLiRlbG0kW1wicy1pZFwiXSB8fCBwYXJlbnRWTm9kZS4kZWxtJC5nZXRBdHRyaWJ1dGUoXCJzLWlkXCIpIDogXCJcIjtcbiAgaWYgKEJVSUxEMTQuc2hhZG93RG9tICYmIHNoYWRvd1Jvb3ROb2RlcyAmJiB3aW4uZG9jdW1lbnQpIHtcbiAgICBjb25zdCBzbG90ID0gY2hpbGRWTm9kZS4kZWxtJCA9IHdpbi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KGNoaWxkVk5vZGUuJHRhZyQpO1xuICAgIGlmIChjaGlsZFZOb2RlLiRuYW1lJCkge1xuICAgICAgY2hpbGRWTm9kZS4kZWxtJC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIHNsb3ROYW1lKTtcbiAgICB9XG4gICAgaWYgKHBhcmVudFZOb2RlLiRlbG0kLnNoYWRvd1Jvb3QgJiYgcGFyZW50Tm9kZUlkICYmIHBhcmVudE5vZGVJZCAhPT0gY2hpbGRWTm9kZS4kaG9zdElkJCkge1xuICAgICAgaW50ZXJuYWxDYWxsKHBhcmVudFZOb2RlLiRlbG0kLCBcImluc2VydEJlZm9yZVwiKShzbG90LCBpbnRlcm5hbENhbGwocGFyZW50Vk5vZGUuJGVsbSQsIFwiY2hpbGRyZW5cIilbMF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcm5hbENhbGwoaW50ZXJuYWxDYWxsKG5vZGUsIFwicGFyZW50Tm9kZVwiKSwgXCJpbnNlcnRCZWZvcmVcIikoc2xvdCwgbm9kZSk7XG4gICAgfVxuICAgIGFkZFNsb3R0ZWROb2RlcyhzbG90dGVkTm9kZXMsIHNsb3RJZCwgc2xvdE5hbWUsIG5vZGUsIGNoaWxkVk5vZGUuJGhvc3RJZCQpO1xuICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgaWYgKGNoaWxkVk5vZGUuJGRlcHRoJCA9PT0gXCIwXCIpIHtcbiAgICAgIHNoYWRvd1Jvb3ROb2Rlc1tjaGlsZFZOb2RlLiRpbmRleCRdID0gY2hpbGRWTm9kZS4kZWxtJDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qgc2xvdCA9IGNoaWxkVk5vZGUuJGVsbSQ7XG4gICAgY29uc3Qgc2hvdWxkTW92ZSA9IHBhcmVudE5vZGVJZCAmJiBwYXJlbnROb2RlSWQgIT09IGNoaWxkVk5vZGUuJGhvc3RJZCQgJiYgcGFyZW50Vk5vZGUuJGVsbSQuc2hhZG93Um9vdDtcbiAgICBhZGRTbG90dGVkTm9kZXMoc2xvdHRlZE5vZGVzLCBzbG90SWQsIHNsb3ROYW1lLCBub2RlLCBzaG91bGRNb3ZlID8gcGFyZW50Tm9kZUlkIDogY2hpbGRWTm9kZS4kaG9zdElkJCk7XG4gICAgcGF0Y2hTbG90Tm9kZShub2RlKTtcbiAgICBpZiAoc2hvdWxkTW92ZSkge1xuICAgICAgcGFyZW50Vk5vZGUuJGVsbSQuaW5zZXJ0QmVmb3JlKHNsb3QsIHBhcmVudFZOb2RlLiRlbG0kLmNoaWxkcmVuWzBdKTtcbiAgICB9XG4gIH1cbiAgY2hpbGRSZW5kZXJOb2Rlcy5wdXNoKGNoaWxkVk5vZGUpO1xuICBzbG90Tm9kZXMucHVzaChjaGlsZFZOb2RlKTtcbiAgaWYgKCFwYXJlbnRWTm9kZS4kY2hpbGRyZW4kKSB7XG4gICAgcGFyZW50Vk5vZGUuJGNoaWxkcmVuJCA9IFtdO1xuICB9XG4gIHBhcmVudFZOb2RlLiRjaGlsZHJlbiRbY2hpbGRWTm9kZS4kaW5kZXgkXSA9IGNoaWxkVk5vZGU7XG59XG52YXIgYWRkU2xvdHRlZE5vZGVzID0gKHNsb3R0ZWROb2Rlcywgc2xvdE5vZGVJZCwgc2xvdE5hbWUsIHNsb3ROb2RlLCBob3N0SWQpID0+IHtcbiAgdmFyIF9hLCBfYjtcbiAgbGV0IHNsb3R0ZWROb2RlID0gc2xvdE5vZGUubmV4dFNpYmxpbmc7XG4gIHNsb3R0ZWROb2Rlc1tzbG90Tm9kZUlkXSA9IHNsb3R0ZWROb2Rlc1tzbG90Tm9kZUlkXSB8fCBbXTtcbiAgaWYgKCFzbG90dGVkTm9kZSB8fCAoKF9hID0gc2xvdHRlZE5vZGUubm9kZVZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc3RhcnRzV2l0aChTTE9UX05PREVfSUQgKyBcIi5cIikpKSByZXR1cm47XG4gIGRvIHtcbiAgICBpZiAoc2xvdHRlZE5vZGUgJiYgKChzbG90dGVkTm9kZVtcImdldEF0dHJpYnV0ZVwiXSAmJiBzbG90dGVkTm9kZS5nZXRBdHRyaWJ1dGUoXCJzbG90XCIpIHx8IHNsb3R0ZWROb2RlW1wicy1zblwiXSkgPT09IHNsb3ROYW1lIHx8IHNsb3ROYW1lID09PSBcIlwiICYmICFzbG90dGVkTm9kZVtcInMtc25cIl0gJiYgKCFzbG90dGVkTm9kZVtcImdldEF0dHJpYnV0ZVwiXSB8fCAhc2xvdHRlZE5vZGUuZ2V0QXR0cmlidXRlKFwic2xvdFwiKSkgJiYgKHNsb3R0ZWROb2RlLm5vZGVUeXBlID09PSA4IC8qIENvbW1lbnROb2RlICovIHx8IHNsb3R0ZWROb2RlLm5vZGVUeXBlID09PSAzIC8qIFRleHROb2RlICovKSkpIHtcbiAgICAgIHNsb3R0ZWROb2RlW1wicy1zblwiXSA9IHNsb3ROYW1lO1xuICAgICAgc2xvdHRlZE5vZGVzW3Nsb3ROb2RlSWRdLnB1c2goeyBzbG90OiBzbG90Tm9kZSwgbm9kZTogc2xvdHRlZE5vZGUsIGhvc3RJZCB9KTtcbiAgICB9XG4gICAgc2xvdHRlZE5vZGUgPSBzbG90dGVkTm9kZSA9PSBudWxsID8gdm9pZCAwIDogc2xvdHRlZE5vZGUubmV4dFNpYmxpbmc7XG4gIH0gd2hpbGUgKHNsb3R0ZWROb2RlICYmICEoKF9iID0gc2xvdHRlZE5vZGUubm9kZVZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2Iuc3RhcnRzV2l0aChTTE9UX05PREVfSUQgKyBcIi5cIikpKTtcbn07XG52YXIgZmluZENvcnJlc3BvbmRpbmdOb2RlID0gKG5vZGUsIHR5cGUpID0+IHtcbiAgbGV0IHNpYmxpbmcgPSBub2RlO1xuICBkbyB7XG4gICAgc2libGluZyA9IHNpYmxpbmcubmV4dFNpYmxpbmc7XG4gIH0gd2hpbGUgKHNpYmxpbmcgJiYgKHNpYmxpbmcubm9kZVR5cGUgIT09IHR5cGUgfHwgIXNpYmxpbmcubm9kZVZhbHVlKSk7XG4gIHJldHVybiBzaWJsaW5nO1xufTtcblxuLy8gc3JjL3J1bnRpbWUvaW5pdGlhbGl6ZS1jb21wb25lbnQudHNcbmltcG9ydCB7IEJVSUxEIGFzIEJVSUxEMjQgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xuXG4vLyBzcmMvdXRpbHMvc2hhZG93LWNzcy50c1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqXG4gKiBUaGlzIGZpbGUgaXMgYSBwb3J0IG9mIHNoYWRvd0NTUyBmcm9tIGB3ZWJjb21wb25lbnRzLmpzYCB0byBUeXBlU2NyaXB0LlxuICogaHR0cHM6Ly9naXRodWIuY29tL3dlYmNvbXBvbmVudHMvd2ViY29tcG9uZW50c2pzL2Jsb2IvNGVmZWNkN2UwZS9zcmMvU2hhZG93Q1NTL1NoYWRvd0NTUy5qc1xuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci9ibG9iL21hc3Rlci9wYWNrYWdlcy9jb21waWxlci9zcmMvc2hhZG93X2Nzcy50c1xuICovXG52YXIgc2FmZVNlbGVjdG9yID0gKHNlbGVjdG9yKSA9PiB7XG4gIGNvbnN0IHBsYWNlaG9sZGVycyA9IFtdO1xuICBsZXQgaW5kZXggPSAwO1xuICBzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UoLyhcXFtcXHMqcGFydH49XFxzKihcIlteXCJdKlwifCdbXiddKicpXFxzKlxcXSkvZywgKF8sIGtlZXApID0+IHtcbiAgICBjb25zdCByZXBsYWNlQnkgPSBgX19wYXJ0LSR7aW5kZXh9X19gO1xuICAgIHBsYWNlaG9sZGVycy5wdXNoKGtlZXApO1xuICAgIGluZGV4Kys7XG4gICAgcmV0dXJuIHJlcGxhY2VCeTtcbiAgfSk7XG4gIHNlbGVjdG9yID0gc2VsZWN0b3IucmVwbGFjZSgvKFxcW1teXFxdXSpcXF0pL2csIChfLCBrZWVwKSA9PiB7XG4gICAgY29uc3QgcmVwbGFjZUJ5ID0gYF9fcGgtJHtpbmRleH1fX2A7XG4gICAgcGxhY2Vob2xkZXJzLnB1c2goa2VlcCk7XG4gICAgaW5kZXgrKztcbiAgICByZXR1cm4gcmVwbGFjZUJ5O1xuICB9KTtcbiAgY29uc3QgY29udGVudCA9IHNlbGVjdG9yLnJlcGxhY2UoLyg6bnRoLVstXFx3XSspKFxcKFteKV0rXFwpKS9nLCAoXywgcHNldWRvLCBleHApID0+IHtcbiAgICBjb25zdCByZXBsYWNlQnkgPSBgX19waC0ke2luZGV4fV9fYDtcbiAgICBwbGFjZWhvbGRlcnMucHVzaChleHApO1xuICAgIGluZGV4Kys7XG4gICAgcmV0dXJuIHBzZXVkbyArIHJlcGxhY2VCeTtcbiAgfSk7XG4gIGNvbnN0IHNzID0ge1xuICAgIGNvbnRlbnQsXG4gICAgcGxhY2Vob2xkZXJzXG4gIH07XG4gIHJldHVybiBzcztcbn07XG52YXIgcmVzdG9yZVNhZmVTZWxlY3RvciA9IChwbGFjZWhvbGRlcnMsIGNvbnRlbnQpID0+IHtcbiAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvX19wYXJ0LShcXGQrKV9fL2csIChfLCBpbmRleCkgPT4gcGxhY2Vob2xkZXJzWytpbmRleF0pO1xuICByZXR1cm4gY29udGVudC5yZXBsYWNlKC9fX3BoLShcXGQrKV9fL2csIChfLCBpbmRleCkgPT4gcGxhY2Vob2xkZXJzWytpbmRleF0pO1xufTtcbnZhciBfcG9seWZpbGxIb3N0ID0gXCItc2hhZG93Y3NzaG9zdFwiO1xudmFyIF9wb2x5ZmlsbFNsb3R0ZWQgPSBcIi1zaGFkb3djc3NzbG90dGVkXCI7XG52YXIgX3BvbHlmaWxsSG9zdENvbnRleHQgPSBcIi1zaGFkb3djc3Njb250ZXh0XCI7XG52YXIgX3BhcmVuU3VmZml4ID0gXCIpKD86XFxcXCgoKD86XFxcXChbXikoXSpcXFxcKXxbXikoXSopKz8pXFxcXCkpPyhbXix7XSopXCI7XG52YXIgX2Nzc0NvbG9uSG9zdFJlID0gbmV3IFJlZ0V4cChcIihcIiArIF9wb2x5ZmlsbEhvc3QgKyBfcGFyZW5TdWZmaXgsIFwiZ2ltXCIpO1xudmFyIF9jc3NDb2xvbkhvc3RDb250ZXh0UmUgPSBuZXcgUmVnRXhwKFwiKFwiICsgX3BvbHlmaWxsSG9zdENvbnRleHQgKyBfcGFyZW5TdWZmaXgsIFwiZ2ltXCIpO1xudmFyIF9jc3NDb2xvblNsb3R0ZWRSZSA9IG5ldyBSZWdFeHAoXCIoXCIgKyBfcG9seWZpbGxTbG90dGVkICsgX3BhcmVuU3VmZml4LCBcImdpbVwiKTtcbnZhciBfcG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yID0gX3BvbHlmaWxsSG9zdCArIFwiLW5vLWNvbWJpbmF0b3JcIjtcbnZhciBfcG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yUmUgPSAvLXNoYWRvd2Nzc2hvc3Qtbm8tY29tYmluYXRvcihbXlxcc10qKS87XG52YXIgX3NoYWRvd0RPTVNlbGVjdG9yc1JlID0gWy86OnNoYWRvdy9nLCAvOjpjb250ZW50L2ddO1xudmFyIF9zYWZlUGFydFJlID0gL19fcGFydC0oXFxkKylfXy9nO1xudmFyIF9zZWxlY3RvclJlU3VmZml4ID0gXCIoWz5cXFxcc34rWy4sezpdW1xcXFxzXFxcXFNdKik/JFwiO1xudmFyIF9wb2x5ZmlsbEhvc3RSZSA9IC8tc2hhZG93Y3NzaG9zdC9naW07XG52YXIgY3JlYXRlU3VwcG9ydHNSdWxlUmUgPSAoc2VsZWN0b3IpID0+IHtcbiAgY29uc3Qgc2FmZVNlbGVjdG9yMiA9IGVzY2FwZVJlZ0V4cFNwZWNpYWxDaGFyYWN0ZXJzKHNlbGVjdG9yKTtcbiAgcmV0dXJuIG5ldyBSZWdFeHAoXG4gICAgLy8gRmlyc3QgY2FwdHVyZSBncm91cDogbWF0Y2ggYW55IGNvbnRleHQgYmVmb3JlIHRoZSBzZWxlY3RvciB0aGF0J3Mgbm90IGluc2lkZSBAc3VwcG9ydHMgc2VsZWN0b3IoKVxuICAgIC8vIFVzaW5nIG5lZ2F0aXZlIGxvb2thaGVhZCB0byBhdm9pZCBtYXRjaGluZyBpbnNpZGUgQHN1cHBvcnRzIHNlbGVjdG9yKC4uLikgY29uZGl0aW9uXG4gICAgYChefFteQF18QCg/IXN1cHBvcnRzXFxcXHMrc2VsZWN0b3JcXFxccypcXFxcKFtee10qPyR7c2FmZVNlbGVjdG9yMn0pKSgke3NhZmVTZWxlY3RvcjJ9XFxcXGIpYCxcbiAgICBcImdcIlxuICApO1xufTtcbnZhciBfY29sb25TbG90dGVkUmUgPSBjcmVhdGVTdXBwb3J0c1J1bGVSZShcIjo6c2xvdHRlZFwiKTtcbnZhciBfY29sb25Ib3N0UmUgPSBjcmVhdGVTdXBwb3J0c1J1bGVSZShcIjpob3N0XCIpO1xudmFyIF9jb2xvbkhvc3RDb250ZXh0UmUgPSBjcmVhdGVTdXBwb3J0c1J1bGVSZShcIjpob3N0LWNvbnRleHRcIik7XG52YXIgX2NvbW1lbnRSZSA9IC9cXC9cXCpcXHMqW1xcc1xcU10qP1xcKlxcLy9nO1xudmFyIHN0cmlwQ29tbWVudHMgPSAoaW5wdXQpID0+IHtcbiAgcmV0dXJuIGlucHV0LnJlcGxhY2UoX2NvbW1lbnRSZSwgXCJcIik7XG59O1xudmFyIF9jb21tZW50V2l0aEhhc2hSZSA9IC9cXC9cXCpcXHMqI1xccypzb3VyY2UoTWFwcGluZyk/VVJMPVtcXHNcXFNdKz9cXCpcXC8vZztcbnZhciBleHRyYWN0Q29tbWVudHNXaXRoSGFzaCA9IChpbnB1dCkgPT4ge1xuICByZXR1cm4gaW5wdXQubWF0Y2goX2NvbW1lbnRXaXRoSGFzaFJlKSB8fCBbXTtcbn07XG52YXIgX3J1bGVSZSA9IC8oXFxzKikoW147XFx7XFx9XSs/KShcXHMqKSgoPzp7JUJMT0NLJX0/XFxzKjs/KXwoPzpcXHMqOykpL2c7XG52YXIgX2N1cmx5UmUgPSAvKFt7fV0pL2c7XG52YXIgX3NlbGVjdG9yUGFydHNSZSA9IC8oXi4qP1teXFxcXF0pPz8oKDorKSguKil8JCkvO1xudmFyIE9QRU5fQ1VSTFkgPSBcIntcIjtcbnZhciBDTE9TRV9DVVJMWSA9IFwifVwiO1xudmFyIEJMT0NLX1BMQUNFSE9MREVSID0gXCIlQkxPQ0slXCI7XG52YXIgcHJvY2Vzc1J1bGVzID0gKGlucHV0LCBydWxlQ2FsbGJhY2spID0+IHtcbiAgY29uc3QgaW5wdXRXaXRoRXNjYXBlZEJsb2NrcyA9IGVzY2FwZUJsb2NrcyhpbnB1dCk7XG4gIGxldCBuZXh0QmxvY2tJbmRleCA9IDA7XG4gIHJldHVybiBpbnB1dFdpdGhFc2NhcGVkQmxvY2tzLmVzY2FwZWRTdHJpbmcucmVwbGFjZShfcnVsZVJlLCAoLi4ubSkgPT4ge1xuICAgIGNvbnN0IHNlbGVjdG9yID0gbVsyXTtcbiAgICBsZXQgY29udGVudCA9IFwiXCI7XG4gICAgbGV0IHN1ZmZpeCA9IG1bNF07XG4gICAgbGV0IGNvbnRlbnRQcmVmaXggPSBcIlwiO1xuICAgIGlmIChzdWZmaXggJiYgc3VmZml4LnN0YXJ0c1dpdGgoXCJ7XCIgKyBCTE9DS19QTEFDRUhPTERFUikpIHtcbiAgICAgIGNvbnRlbnQgPSBpbnB1dFdpdGhFc2NhcGVkQmxvY2tzLmJsb2Nrc1tuZXh0QmxvY2tJbmRleCsrXTtcbiAgICAgIHN1ZmZpeCA9IHN1ZmZpeC5zdWJzdHJpbmcoQkxPQ0tfUExBQ0VIT0xERVIubGVuZ3RoICsgMSk7XG4gICAgICBjb250ZW50UHJlZml4ID0gXCJ7XCI7XG4gICAgfVxuICAgIGNvbnN0IGNzc1J1bGUgPSB7XG4gICAgICBzZWxlY3RvcixcbiAgICAgIGNvbnRlbnRcbiAgICB9O1xuICAgIGNvbnN0IHJ1bGUgPSBydWxlQ2FsbGJhY2soY3NzUnVsZSk7XG4gICAgcmV0dXJuIGAke21bMV19JHtydWxlLnNlbGVjdG9yfSR7bVszXX0ke2NvbnRlbnRQcmVmaXh9JHtydWxlLmNvbnRlbnR9JHtzdWZmaXh9YDtcbiAgfSk7XG59O1xudmFyIGVzY2FwZUJsb2NrcyA9IChpbnB1dCkgPT4ge1xuICBjb25zdCBpbnB1dFBhcnRzID0gaW5wdXQuc3BsaXQoX2N1cmx5UmUpO1xuICBjb25zdCByZXN1bHRQYXJ0cyA9IFtdO1xuICBjb25zdCBlc2NhcGVkQmxvY2tzID0gW107XG4gIGxldCBicmFja2V0Q291bnQgPSAwO1xuICBsZXQgY3VycmVudEJsb2NrUGFydHMgPSBbXTtcbiAgZm9yIChsZXQgcGFydEluZGV4ID0gMDsgcGFydEluZGV4IDwgaW5wdXRQYXJ0cy5sZW5ndGg7IHBhcnRJbmRleCsrKSB7XG4gICAgY29uc3QgcGFydCA9IGlucHV0UGFydHNbcGFydEluZGV4XTtcbiAgICBpZiAocGFydCA9PT0gQ0xPU0VfQ1VSTFkpIHtcbiAgICAgIGJyYWNrZXRDb3VudC0tO1xuICAgIH1cbiAgICBpZiAoYnJhY2tldENvdW50ID4gMCkge1xuICAgICAgY3VycmVudEJsb2NrUGFydHMucHVzaChwYXJ0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGN1cnJlbnRCbG9ja1BhcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZXNjYXBlZEJsb2Nrcy5wdXNoKGN1cnJlbnRCbG9ja1BhcnRzLmpvaW4oXCJcIikpO1xuICAgICAgICByZXN1bHRQYXJ0cy5wdXNoKEJMT0NLX1BMQUNFSE9MREVSKTtcbiAgICAgICAgY3VycmVudEJsb2NrUGFydHMgPSBbXTtcbiAgICAgIH1cbiAgICAgIHJlc3VsdFBhcnRzLnB1c2gocGFydCk7XG4gICAgfVxuICAgIGlmIChwYXJ0ID09PSBPUEVOX0NVUkxZKSB7XG4gICAgICBicmFja2V0Q291bnQrKztcbiAgICB9XG4gIH1cbiAgaWYgKGN1cnJlbnRCbG9ja1BhcnRzLmxlbmd0aCA+IDApIHtcbiAgICBlc2NhcGVkQmxvY2tzLnB1c2goY3VycmVudEJsb2NrUGFydHMuam9pbihcIlwiKSk7XG4gICAgcmVzdWx0UGFydHMucHVzaChCTE9DS19QTEFDRUhPTERFUik7XG4gIH1cbiAgY29uc3Qgc3RyRXNjYXBlZEJsb2NrcyA9IHtcbiAgICBlc2NhcGVkU3RyaW5nOiByZXN1bHRQYXJ0cy5qb2luKFwiXCIpLFxuICAgIGJsb2NrczogZXNjYXBlZEJsb2Nrc1xuICB9O1xuICByZXR1cm4gc3RyRXNjYXBlZEJsb2Nrcztcbn07XG52YXIgaW5zZXJ0UG9seWZpbGxIb3N0SW5Dc3NUZXh0ID0gKGNzc1RleHQpID0+IHtcbiAgY29uc3Qgc3VwcG9ydHNCbG9ja3MgPSBbXTtcbiAgY3NzVGV4dCA9IGNzc1RleHQucmVwbGFjZSgvQHN1cHBvcnRzXFxzK3NlbGVjdG9yXFxzKlxcKFxccyooW14pXSopXFxzKlxcKS9nLCAoXywgc2VsZWN0b3JDb250ZW50KSA9PiB7XG4gICAgY29uc3QgcGxhY2Vob2xkZXIgPSBgX19zdXBwb3J0c18ke3N1cHBvcnRzQmxvY2tzLmxlbmd0aH1fX2A7XG4gICAgc3VwcG9ydHNCbG9ja3MucHVzaChzZWxlY3RvckNvbnRlbnQpO1xuICAgIHJldHVybiBgQHN1cHBvcnRzIHNlbGVjdG9yKCR7cGxhY2Vob2xkZXJ9KWA7XG4gIH0pO1xuICBjc3NUZXh0ID0gY3NzVGV4dC5yZXBsYWNlKF9jb2xvbkhvc3RDb250ZXh0UmUsIGAkMSR7X3BvbHlmaWxsSG9zdENvbnRleHR9YCkucmVwbGFjZShfY29sb25Ib3N0UmUsIGAkMSR7X3BvbHlmaWxsSG9zdH1gKS5yZXBsYWNlKF9jb2xvblNsb3R0ZWRSZSwgYCQxJHtfcG9seWZpbGxTbG90dGVkfWApO1xuICBzdXBwb3J0c0Jsb2Nrcy5mb3JFYWNoKChvcmlnaW5hbFNlbGVjdG9yLCBpbmRleCkgPT4ge1xuICAgIGNzc1RleHQgPSBjc3NUZXh0LnJlcGxhY2UoYF9fc3VwcG9ydHNfJHtpbmRleH1fX2AsIG9yaWdpbmFsU2VsZWN0b3IpO1xuICB9KTtcbiAgcmV0dXJuIGNzc1RleHQ7XG59O1xudmFyIGNvbnZlcnRDb2xvblJ1bGUgPSAoY3NzVGV4dCwgcmVnRXhwLCBwYXJ0UmVwbGFjZXIpID0+IHtcbiAgcmV0dXJuIGNzc1RleHQucmVwbGFjZShyZWdFeHAsICguLi5tKSA9PiB7XG4gICAgaWYgKG1bMl0pIHtcbiAgICAgIGNvbnN0IHBhcnRzID0gbVsyXS5zcGxpdChcIixcIik7XG4gICAgICBjb25zdCByID0gW107XG4gICAgICBmb3IgKGxldCBpMiA9IDA7IGkyIDwgcGFydHMubGVuZ3RoOyBpMisrKSB7XG4gICAgICAgIGNvbnN0IHAgPSBwYXJ0c1tpMl0udHJpbSgpO1xuICAgICAgICBpZiAoIXApIGJyZWFrO1xuICAgICAgICByLnB1c2gocGFydFJlcGxhY2VyKF9wb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IsIHAsIG1bM10pKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByLmpvaW4oXCIsXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gX3BvbHlmaWxsSG9zdE5vQ29tYmluYXRvciArIG1bM107XG4gICAgfVxuICB9KTtcbn07XG52YXIgY29sb25Ib3N0UGFydFJlcGxhY2VyID0gKGhvc3QsIHBhcnQsIHN1ZmZpeCkgPT4ge1xuICByZXR1cm4gaG9zdCArIHBhcnQucmVwbGFjZShfcG9seWZpbGxIb3N0LCBcIlwiKSArIHN1ZmZpeDtcbn07XG52YXIgY29udmVydENvbG9uSG9zdCA9IChjc3NUZXh0KSA9PiB7XG4gIHJldHVybiBjb252ZXJ0Q29sb25SdWxlKGNzc1RleHQsIF9jc3NDb2xvbkhvc3RSZSwgY29sb25Ib3N0UGFydFJlcGxhY2VyKTtcbn07XG52YXIgY29sb25Ib3N0Q29udGV4dFBhcnRSZXBsYWNlciA9IChob3N0LCBwYXJ0LCBzdWZmaXgpID0+IHtcbiAgaWYgKHBhcnQuaW5kZXhPZihfcG9seWZpbGxIb3N0KSA+IC0xKSB7XG4gICAgcmV0dXJuIGNvbG9uSG9zdFBhcnRSZXBsYWNlcihob3N0LCBwYXJ0LCBzdWZmaXgpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBob3N0ICsgcGFydCArIHN1ZmZpeCArIFwiLCBcIiArIHBhcnQgKyBcIiBcIiArIGhvc3QgKyBzdWZmaXg7XG4gIH1cbn07XG52YXIgY29udmVydENvbG9uU2xvdHRlZCA9IChjc3NUZXh0LCBzbG90U2NvcGVJZCkgPT4ge1xuICBjb25zdCBzbG90Q2xhc3MgPSBcIi5cIiArIHNsb3RTY29wZUlkICsgXCIgPiBcIjtcbiAgY29uc3Qgc2VsZWN0b3JzID0gW107XG4gIGNzc1RleHQgPSBjc3NUZXh0LnJlcGxhY2UoX2Nzc0NvbG9uU2xvdHRlZFJlLCAoLi4ubSkgPT4ge1xuICAgIGlmIChtWzJdKSB7XG4gICAgICBjb25zdCBjb21wb3VuZCA9IG1bMl0udHJpbSgpO1xuICAgICAgY29uc3Qgc3VmZml4ID0gbVszXTtcbiAgICAgIGNvbnN0IHNsb3R0ZWRTZWxlY3RvciA9IHNsb3RDbGFzcyArIGNvbXBvdW5kICsgc3VmZml4O1xuICAgICAgbGV0IHByZWZpeFNlbGVjdG9yID0gXCJcIjtcbiAgICAgIGZvciAobGV0IGkyID0gbVs0XSAtIDE7IGkyID49IDA7IGkyLS0pIHtcbiAgICAgICAgY29uc3QgY2hhciA9IG1bNV1baTJdO1xuICAgICAgICBpZiAoY2hhciA9PT0gXCJ9XCIgfHwgY2hhciA9PT0gXCIsXCIpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBwcmVmaXhTZWxlY3RvciA9IGNoYXIgKyBwcmVmaXhTZWxlY3RvcjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9yZ1NlbGVjdG9yID0gKHByZWZpeFNlbGVjdG9yICsgc2xvdHRlZFNlbGVjdG9yKS50cmltKCk7XG4gICAgICBjb25zdCBhZGRlZFNlbGVjdG9yID0gYCR7cHJlZml4U2VsZWN0b3IudHJpbUVuZCgpfSR7c2xvdHRlZFNlbGVjdG9yLnRyaW0oKX1gLnRyaW0oKTtcbiAgICAgIGlmIChvcmdTZWxlY3RvciAhPT0gYWRkZWRTZWxlY3Rvcikge1xuICAgICAgICBjb25zdCB1cGRhdGVkU2VsZWN0b3IgPSBgJHthZGRlZFNlbGVjdG9yfSwgJHtvcmdTZWxlY3Rvcn1gO1xuICAgICAgICBzZWxlY3RvcnMucHVzaCh7XG4gICAgICAgICAgb3JnU2VsZWN0b3IsXG4gICAgICAgICAgdXBkYXRlZFNlbGVjdG9yXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNsb3R0ZWRTZWxlY3RvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIF9wb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IgKyBtWzNdO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB7XG4gICAgc2VsZWN0b3JzLFxuICAgIGNzc1RleHRcbiAgfTtcbn07XG52YXIgY29udmVydENvbG9uSG9zdENvbnRleHQgPSAoY3NzVGV4dCkgPT4ge1xuICByZXR1cm4gY29udmVydENvbG9uUnVsZShjc3NUZXh0LCBfY3NzQ29sb25Ib3N0Q29udGV4dFJlLCBjb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyKTtcbn07XG52YXIgY29udmVydFNoYWRvd0RPTVNlbGVjdG9ycyA9IChjc3NUZXh0KSA9PiB7XG4gIHJldHVybiBfc2hhZG93RE9NU2VsZWN0b3JzUmUucmVkdWNlKChyZXN1bHQsIHBhdHRlcm4pID0+IHJlc3VsdC5yZXBsYWNlKHBhdHRlcm4sIFwiIFwiKSwgY3NzVGV4dCk7XG59O1xudmFyIG1ha2VTY29wZU1hdGNoZXIgPSAoc2NvcGVTZWxlY3RvcjIpID0+IHtcbiAgY29uc3QgbHJlID0gL1xcWy9nO1xuICBjb25zdCBycmUgPSAvXFxdL2c7XG4gIHNjb3BlU2VsZWN0b3IyID0gc2NvcGVTZWxlY3RvcjIucmVwbGFjZShscmUsIFwiXFxcXFtcIikucmVwbGFjZShycmUsIFwiXFxcXF1cIik7XG4gIHJldHVybiBuZXcgUmVnRXhwKFwiXihcIiArIHNjb3BlU2VsZWN0b3IyICsgXCIpXCIgKyBfc2VsZWN0b3JSZVN1ZmZpeCwgXCJtXCIpO1xufTtcbnZhciBzZWxlY3Rvck5lZWRzU2NvcGluZyA9IChzZWxlY3Rvciwgc2NvcGVTZWxlY3RvcjIpID0+IHtcbiAgY29uc3QgcmUgPSBtYWtlU2NvcGVNYXRjaGVyKHNjb3BlU2VsZWN0b3IyKTtcbiAgcmV0dXJuICFyZS50ZXN0KHNlbGVjdG9yKTtcbn07XG52YXIgaW5qZWN0U2NvcGluZ1NlbGVjdG9yID0gKHNlbGVjdG9yLCBzY29waW5nU2VsZWN0b3IpID0+IHtcbiAgcmV0dXJuIHNlbGVjdG9yLnJlcGxhY2UoX3NlbGVjdG9yUGFydHNSZSwgKF8sIGJlZm9yZSA9IFwiXCIsIF9jb2xvbkdyb3VwLCBjb2xvbiA9IFwiXCIsIGFmdGVyID0gXCJcIikgPT4ge1xuICAgIHJldHVybiBiZWZvcmUgKyBzY29waW5nU2VsZWN0b3IgKyBjb2xvbiArIGFmdGVyO1xuICB9KTtcbn07XG52YXIgYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlID0gKHNlbGVjdG9yLCBzY29wZVNlbGVjdG9yMiwgaG9zdFNlbGVjdG9yKSA9PiB7XG4gIF9wb2x5ZmlsbEhvc3RSZS5sYXN0SW5kZXggPSAwO1xuICBpZiAoX3BvbHlmaWxsSG9zdFJlLnRlc3Qoc2VsZWN0b3IpKSB7XG4gICAgY29uc3QgcmVwbGFjZUJ5ID0gYC4ke2hvc3RTZWxlY3Rvcn1gO1xuICAgIHJldHVybiBzZWxlY3Rvci5yZXBsYWNlKF9wb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3JSZSwgKF8sIHNlbGVjdG9yMikgPT4gaW5qZWN0U2NvcGluZ1NlbGVjdG9yKHNlbGVjdG9yMiwgcmVwbGFjZUJ5KSkucmVwbGFjZShfcG9seWZpbGxIb3N0UmUsIHJlcGxhY2VCeSArIFwiIFwiKTtcbiAgfVxuICByZXR1cm4gc2NvcGVTZWxlY3RvcjIgKyBcIiBcIiArIHNlbGVjdG9yO1xufTtcbnZhciBhcHBseVN0cmljdFNlbGVjdG9yU2NvcGUgPSAoc2VsZWN0b3IsIHNjb3BlU2VsZWN0b3IyLCBob3N0U2VsZWN0b3IpID0+IHtcbiAgY29uc3QgaXNSZSA9IC9cXFtpcz0oW15cXF1dKilcXF0vZztcbiAgc2NvcGVTZWxlY3RvcjIgPSBzY29wZVNlbGVjdG9yMi5yZXBsYWNlKGlzUmUsIChfLCAuLi5wYXJ0cykgPT4gcGFydHNbMF0pO1xuICBjb25zdCBjbGFzc05hbWUgPSBcIi5cIiArIHNjb3BlU2VsZWN0b3IyO1xuICBjb25zdCBfc2NvcGVTZWxlY3RvclBhcnQgPSAocCkgPT4ge1xuICAgIGxldCBzY29wZWRQID0gcC50cmltKCk7XG4gICAgaWYgKCFzY29wZWRQKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgaWYgKHAuaW5kZXhPZihfcG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yKSA+IC0xKSB7XG4gICAgICBzY29wZWRQID0gYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlKHAsIHNjb3BlU2VsZWN0b3IyLCBob3N0U2VsZWN0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0ID0gcC5yZXBsYWNlKF9wb2x5ZmlsbEhvc3RSZSwgXCJcIik7XG4gICAgICBpZiAodC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNjb3BlZFAgPSBpbmplY3RTY29waW5nU2VsZWN0b3IodCwgY2xhc3NOYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNjb3BlZFA7XG4gIH07XG4gIGNvbnN0IHNhZmVDb250ZW50ID0gc2FmZVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgc2VsZWN0b3IgPSBzYWZlQ29udGVudC5jb250ZW50O1xuICBsZXQgc2NvcGVkU2VsZWN0b3IgPSBcIlwiO1xuICBsZXQgc3RhcnRJbmRleCA9IDA7XG4gIGxldCByZXM7XG4gIGNvbnN0IHNlcCA9IC8oIHw+fFxcK3x+KD8hPSkpKD89KD86W14oKV0qXFwoW14oKV0qXFwpKSpbXigpXSokKVxccyovZztcbiAgY29uc3QgaGFzSG9zdCA9IHNlbGVjdG9yLmluZGV4T2YoX3BvbHlmaWxsSG9zdE5vQ29tYmluYXRvcikgPiAtMTtcbiAgbGV0IHNob3VsZFNjb3BlID0gIWhhc0hvc3Q7XG4gIHdoaWxlICgocmVzID0gc2VwLmV4ZWMoc2VsZWN0b3IpKSAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHNlcGFyYXRvciA9IHJlc1sxXTtcbiAgICBjb25zdCBwYXJ0MiA9IHNlbGVjdG9yLnNsaWNlKHN0YXJ0SW5kZXgsIHJlcy5pbmRleCkudHJpbSgpO1xuICAgIHNob3VsZFNjb3BlID0gc2hvdWxkU2NvcGUgfHwgcGFydDIuaW5kZXhPZihfcG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yKSA+IC0xO1xuICAgIGNvbnN0IHNjb3BlZFBhcnQgPSBzaG91bGRTY29wZSA/IF9zY29wZVNlbGVjdG9yUGFydChwYXJ0MikgOiBwYXJ0MjtcbiAgICBzY29wZWRTZWxlY3RvciArPSBgJHtzY29wZWRQYXJ0fSAke3NlcGFyYXRvcn0gYDtcbiAgICBzdGFydEluZGV4ID0gc2VwLmxhc3RJbmRleDtcbiAgfVxuICBjb25zdCBwYXJ0ID0gc2VsZWN0b3Iuc3Vic3RyaW5nKHN0YXJ0SW5kZXgpO1xuICBzaG91bGRTY29wZSA9ICFwYXJ0Lm1hdGNoKF9zYWZlUGFydFJlKSAmJiAoc2hvdWxkU2NvcGUgfHwgcGFydC5pbmRleE9mKF9wb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IpID4gLTEpO1xuICBzY29wZWRTZWxlY3RvciArPSBzaG91bGRTY29wZSA/IF9zY29wZVNlbGVjdG9yUGFydChwYXJ0KSA6IHBhcnQ7XG4gIHJldHVybiByZXN0b3JlU2FmZVNlbGVjdG9yKHNhZmVDb250ZW50LnBsYWNlaG9sZGVycywgc2NvcGVkU2VsZWN0b3IpO1xufTtcbnZhciBzY29wZVNlbGVjdG9yID0gKHNlbGVjdG9yLCBzY29wZVNlbGVjdG9yVGV4dCwgaG9zdFNlbGVjdG9yLCBzbG90U2VsZWN0b3IpID0+IHtcbiAgcmV0dXJuIHNlbGVjdG9yLnNwbGl0KFwiLFwiKS5tYXAoKHNoYWxsb3dQYXJ0KSA9PiB7XG4gICAgaWYgKHNsb3RTZWxlY3RvciAmJiBzaGFsbG93UGFydC5pbmRleE9mKFwiLlwiICsgc2xvdFNlbGVjdG9yKSA+IC0xKSB7XG4gICAgICByZXR1cm4gc2hhbGxvd1BhcnQudHJpbSgpO1xuICAgIH1cbiAgICBpZiAoc2VsZWN0b3JOZWVkc1Njb3Bpbmcoc2hhbGxvd1BhcnQsIHNjb3BlU2VsZWN0b3JUZXh0KSkge1xuICAgICAgcmV0dXJuIGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZShzaGFsbG93UGFydCwgc2NvcGVTZWxlY3RvclRleHQsIGhvc3RTZWxlY3RvcikudHJpbSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc2hhbGxvd1BhcnQudHJpbSgpO1xuICAgIH1cbiAgfSkuam9pbihcIiwgXCIpO1xufTtcbnZhciBzY29wZVNlbGVjdG9ycyA9IChjc3NUZXh0LCBzY29wZVNlbGVjdG9yVGV4dCwgaG9zdFNlbGVjdG9yLCBzbG90U2VsZWN0b3IsIGNvbW1lbnRPcmlnaW5hbFNlbGVjdG9yKSA9PiB7XG4gIHJldHVybiBwcm9jZXNzUnVsZXMoY3NzVGV4dCwgKHJ1bGUpID0+IHtcbiAgICBsZXQgc2VsZWN0b3IgPSBydWxlLnNlbGVjdG9yO1xuICAgIGxldCBjb250ZW50ID0gcnVsZS5jb250ZW50O1xuICAgIGlmIChydWxlLnNlbGVjdG9yWzBdICE9PSBcIkBcIikge1xuICAgICAgc2VsZWN0b3IgPSBzY29wZVNlbGVjdG9yKHJ1bGUuc2VsZWN0b3IsIHNjb3BlU2VsZWN0b3JUZXh0LCBob3N0U2VsZWN0b3IsIHNsb3RTZWxlY3Rvcik7XG4gICAgfSBlbHNlIGlmIChydWxlLnNlbGVjdG9yLnN0YXJ0c1dpdGgoXCJAbWVkaWFcIikgfHwgcnVsZS5zZWxlY3Rvci5zdGFydHNXaXRoKFwiQHN1cHBvcnRzXCIpIHx8IHJ1bGUuc2VsZWN0b3Iuc3RhcnRzV2l0aChcIkBwYWdlXCIpIHx8IHJ1bGUuc2VsZWN0b3Iuc3RhcnRzV2l0aChcIkBkb2N1bWVudFwiKSkge1xuICAgICAgY29udGVudCA9IHNjb3BlU2VsZWN0b3JzKHJ1bGUuY29udGVudCwgc2NvcGVTZWxlY3RvclRleHQsIGhvc3RTZWxlY3Rvciwgc2xvdFNlbGVjdG9yLCBjb21tZW50T3JpZ2luYWxTZWxlY3Rvcik7XG4gICAgfVxuICAgIGNvbnN0IGNzc1J1bGUgPSB7XG4gICAgICBzZWxlY3Rvcjogc2VsZWN0b3IucmVwbGFjZSgvXFxzezIsfS9nLCBcIiBcIikudHJpbSgpLFxuICAgICAgY29udGVudFxuICAgIH07XG4gICAgcmV0dXJuIGNzc1J1bGU7XG4gIH0pO1xufTtcbnZhciBzY29wZUNzc1RleHQgPSAoY3NzVGV4dCwgc2NvcGVJZDIsIGhvc3RTY29wZUlkLCBzbG90U2NvcGVJZCwgY29tbWVudE9yaWdpbmFsU2VsZWN0b3IpID0+IHtcbiAgY3NzVGV4dCA9IGluc2VydFBvbHlmaWxsSG9zdEluQ3NzVGV4dChjc3NUZXh0KTtcbiAgY3NzVGV4dCA9IGNvbnZlcnRDb2xvbkhvc3QoY3NzVGV4dCk7XG4gIGNzc1RleHQgPSBjb252ZXJ0Q29sb25Ib3N0Q29udGV4dChjc3NUZXh0KTtcbiAgY29uc3Qgc2xvdHRlZCA9IGNvbnZlcnRDb2xvblNsb3R0ZWQoY3NzVGV4dCwgc2xvdFNjb3BlSWQpO1xuICBjc3NUZXh0ID0gc2xvdHRlZC5jc3NUZXh0O1xuICBjc3NUZXh0ID0gY29udmVydFNoYWRvd0RPTVNlbGVjdG9ycyhjc3NUZXh0KTtcbiAgaWYgKHNjb3BlSWQyKSB7XG4gICAgY3NzVGV4dCA9IHNjb3BlU2VsZWN0b3JzKGNzc1RleHQsIHNjb3BlSWQyLCBob3N0U2NvcGVJZCwgc2xvdFNjb3BlSWQsIGNvbW1lbnRPcmlnaW5hbFNlbGVjdG9yKTtcbiAgfVxuICBjc3NUZXh0ID0gcmVwbGFjZVNoYWRvd0Nzc0hvc3QoY3NzVGV4dCwgaG9zdFNjb3BlSWQpO1xuICBjc3NUZXh0ID0gY3NzVGV4dC5yZXBsYWNlKC8+XFxzKlxcKlxccysoW157LCBdKykvZ20sIFwiICQxIFwiKTtcbiAgcmV0dXJuIHtcbiAgICBjc3NUZXh0OiBjc3NUZXh0LnRyaW0oKSxcbiAgICAvLyBXZSBuZWVkIHRvIHJlcGxhY2UgdGhlIHNoYWRvdyBDU1MgaG9zdCBzdHJpbmcgaW4gZWFjaCBvZiB0aGVzZSBzZWxlY3RvcnMgc2luY2Ugd2UgY3JlYXRlZFxuICAgIC8vIHRoZW0gcHJpb3IgdG8gdGhlIHJlcGxhY2VtZW50IGhhcHBlbmluZyBpbiB0aGUgY29tcG9uZW50cyBDU1MgdGV4dC5cbiAgICBzbG90dGVkU2VsZWN0b3JzOiBzbG90dGVkLnNlbGVjdG9ycy5tYXAoKHJlZikgPT4gKHtcbiAgICAgIG9yZ1NlbGVjdG9yOiByZXBsYWNlU2hhZG93Q3NzSG9zdChyZWYub3JnU2VsZWN0b3IsIGhvc3RTY29wZUlkKSxcbiAgICAgIHVwZGF0ZWRTZWxlY3RvcjogcmVwbGFjZVNoYWRvd0Nzc0hvc3QocmVmLnVwZGF0ZWRTZWxlY3RvciwgaG9zdFNjb3BlSWQpXG4gICAgfSkpXG4gIH07XG59O1xudmFyIHJlcGxhY2VTaGFkb3dDc3NIb3N0ID0gKGNzc1RleHQsIGhvc3RTY29wZUlkKSA9PiB7XG4gIHJldHVybiBjc3NUZXh0LnJlcGxhY2UoLy1zaGFkb3djc3Nob3N0LW5vLWNvbWJpbmF0b3IvZywgYC4ke2hvc3RTY29wZUlkfWApO1xufTtcbnZhciBleHBhbmRQYXJ0U2VsZWN0b3JzID0gKGNzc1RleHQpID0+IHtcbiAgY29uc3QgcGFydFNlbGVjdG9yUmUgPSAvKFteXFxzLHtdW14se10qPyk6OnBhcnRcXChcXHMqKFteKV0rPylcXHMqXFwpKCg/Ols6Ll1bXix7XSopKikvZztcbiAgcmV0dXJuIHByb2Nlc3NSdWxlcyhjc3NUZXh0LCAocnVsZSkgPT4ge1xuICAgIGlmIChydWxlLnNlbGVjdG9yWzBdID09PSBcIkBcIikge1xuICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgfVxuICAgIGNvbnN0IHNlbGVjdG9ycyA9IHJ1bGUuc2VsZWN0b3Iuc3BsaXQoXCIsXCIpLm1hcCgoc2VsKSA9PiB7XG4gICAgICBjb25zdCBvdXQgPSBbc2VsLnRyaW0oKV07XG4gICAgICBsZXQgbTtcbiAgICAgIHdoaWxlICgobSA9IHBhcnRTZWxlY3RvclJlLmV4ZWMoc2VsKSkgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgYmVmb3JlID0gbVsxXS50cmltRW5kKCk7XG4gICAgICAgIGNvbnN0IHBhcnROYW1lcyA9IG1bMl0udHJpbSgpLnNwbGl0KC9cXHMrLyk7XG4gICAgICAgIGNvbnN0IGFmdGVyID0gbVszXSB8fCBcIlwiO1xuICAgICAgICBjb25zdCBwYXJ0QXR0ciA9IHBhcnROYW1lcy5mbGF0TWFwKChwKSA9PiB7XG4gICAgICAgICAgaWYgKCFydWxlLnNlbGVjdG9yLmluY2x1ZGVzKGBbcGFydH49XCIke3B9XCJdYCkpIHtcbiAgICAgICAgICAgIHJldHVybiBbYFtwYXJ0fj1cIiR7cH1cIl1gXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9KS5qb2luKFwiXCIpO1xuICAgICAgICBjb25zdCBleHBhbmRlZCA9IGAke2JlZm9yZX0gJHtwYXJ0QXR0cn0ke2FmdGVyfWA7XG4gICAgICAgIGlmICghIXBhcnRBdHRyICYmIGV4cGFuZGVkICE9PSBzZWwudHJpbSgpKSB7XG4gICAgICAgICAgb3V0LnB1c2goZXhwYW5kZWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0LmpvaW4oXCIsIFwiKTtcbiAgICB9KTtcbiAgICBydWxlLnNlbGVjdG9yID0gc2VsZWN0b3JzLmpvaW4oXCIsIFwiKTtcbiAgICByZXR1cm4gcnVsZTtcbiAgfSk7XG59O1xudmFyIHNjb3BlQ3NzID0gKGNzc1RleHQsIHNjb3BlSWQyLCBjb21tZW50T3JpZ2luYWxTZWxlY3RvcikgPT4ge1xuICBjb25zdCBob3N0U2NvcGVJZCA9IHNjb3BlSWQyICsgXCItaFwiO1xuICBjb25zdCBzbG90U2NvcGVJZCA9IHNjb3BlSWQyICsgXCItc1wiO1xuICBjb25zdCBjb21tZW50c1dpdGhIYXNoID0gZXh0cmFjdENvbW1lbnRzV2l0aEhhc2goY3NzVGV4dCk7XG4gIGNzc1RleHQgPSBzdHJpcENvbW1lbnRzKGNzc1RleHQpO1xuICBjb25zdCBvcmdTZWxlY3RvcnMgPSBbXTtcbiAgaWYgKGNvbW1lbnRPcmlnaW5hbFNlbGVjdG9yKSB7XG4gICAgY29uc3QgcHJvY2Vzc0NvbW1lbnRlZFNlbGVjdG9yID0gKHJ1bGUpID0+IHtcbiAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gYC8qIUBfX18ke29yZ1NlbGVjdG9ycy5sZW5ndGh9X19fKi9gO1xuICAgICAgY29uc3QgY29tbWVudCA9IGAvKiFAJHtydWxlLnNlbGVjdG9yfSovYDtcbiAgICAgIG9yZ1NlbGVjdG9ycy5wdXNoKHsgcGxhY2Vob2xkZXIsIGNvbW1lbnQgfSk7XG4gICAgICBydWxlLnNlbGVjdG9yID0gcGxhY2Vob2xkZXIgKyBydWxlLnNlbGVjdG9yO1xuICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgfTtcbiAgICBjc3NUZXh0ID0gcHJvY2Vzc1J1bGVzKGNzc1RleHQsIChydWxlKSA9PiB7XG4gICAgICBpZiAocnVsZS5zZWxlY3RvclswXSAhPT0gXCJAXCIpIHtcbiAgICAgICAgcmV0dXJuIHByb2Nlc3NDb21tZW50ZWRTZWxlY3RvcihydWxlKTtcbiAgICAgIH0gZWxzZSBpZiAocnVsZS5zZWxlY3Rvci5zdGFydHNXaXRoKFwiQG1lZGlhXCIpIHx8IHJ1bGUuc2VsZWN0b3Iuc3RhcnRzV2l0aChcIkBzdXBwb3J0c1wiKSB8fCBydWxlLnNlbGVjdG9yLnN0YXJ0c1dpdGgoXCJAcGFnZVwiKSB8fCBydWxlLnNlbGVjdG9yLnN0YXJ0c1dpdGgoXCJAZG9jdW1lbnRcIikpIHtcbiAgICAgICAgcnVsZS5jb250ZW50ID0gcHJvY2Vzc1J1bGVzKHJ1bGUuY29udGVudCwgcHJvY2Vzc0NvbW1lbnRlZFNlbGVjdG9yKTtcbiAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gcnVsZTtcbiAgICB9KTtcbiAgfVxuICBjb25zdCBzY29wZWQgPSBzY29wZUNzc1RleHQoY3NzVGV4dCwgc2NvcGVJZDIsIGhvc3RTY29wZUlkLCBzbG90U2NvcGVJZCwgY29tbWVudE9yaWdpbmFsU2VsZWN0b3IpO1xuICBjc3NUZXh0ID0gW3Njb3BlZC5jc3NUZXh0LCAuLi5jb21tZW50c1dpdGhIYXNoXS5qb2luKFwiXFxuXCIpO1xuICBpZiAoY29tbWVudE9yaWdpbmFsU2VsZWN0b3IpIHtcbiAgICBvcmdTZWxlY3RvcnMuZm9yRWFjaCgoeyBwbGFjZWhvbGRlciwgY29tbWVudCB9KSA9PiB7XG4gICAgICBjc3NUZXh0ID0gY3NzVGV4dC5yZXBsYWNlKHBsYWNlaG9sZGVyLCBjb21tZW50KTtcbiAgICB9KTtcbiAgfVxuICBzY29wZWQuc2xvdHRlZFNlbGVjdG9ycy5mb3JFYWNoKChzbG90dGVkU2VsZWN0b3IpID0+IHtcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXhwU3BlY2lhbENoYXJhY3RlcnMoc2xvdHRlZFNlbGVjdG9yLm9yZ1NlbGVjdG9yKSwgXCJnXCIpO1xuICAgIGNzc1RleHQgPSBjc3NUZXh0LnJlcGxhY2UocmVnZXgsIHNsb3R0ZWRTZWxlY3Rvci51cGRhdGVkU2VsZWN0b3IpO1xuICB9KTtcbiAgY3NzVGV4dCA9IGV4cGFuZFBhcnRTZWxlY3RvcnMoY3NzVGV4dCk7XG4gIHJldHVybiBjc3NUZXh0O1xufTtcblxuLy8gc3JjL3J1bnRpbWUvbW9kZS50c1xudmFyIGNvbXB1dGVNb2RlID0gKGVsbSkgPT4gbW9kZVJlc29sdXRpb25DaGFpbi5tYXAoKGgyKSA9PiBoMihlbG0pKS5maW5kKChtKSA9PiAhIW0pO1xudmFyIHNldE1vZGUgPSAoaGFuZGxlcikgPT4gbW9kZVJlc29sdXRpb25DaGFpbi5wdXNoKGhhbmRsZXIpO1xudmFyIGdldE1vZGUgPSAocmVmKSA9PiB7XG4gIHZhciBfYTtcbiAgcmV0dXJuIChfYSA9IGdldEhvc3RSZWYocmVmKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLiRtb2RlTmFtZSQ7XG59O1xuXG4vLyBzcmMvcnVudGltZS9wcm94eS1jb21wb25lbnQudHNcbmltcG9ydCB7IEJVSUxEIGFzIEJVSUxEMjMgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xuXG4vLyBzcmMvcnVudGltZS9zZXQtdmFsdWUudHNcbmltcG9ydCB7IEJVSUxEIGFzIEJVSUxEMjIgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xuXG4vLyBzcmMvcnVudGltZS9wYXJzZS1wcm9wZXJ0eS12YWx1ZS50c1xuaW1wb3J0IHsgQlVJTEQgYXMgQlVJTEQxNSB9IGZyb20gXCJAc3RlbmNpbC9jb3JlL2ludGVybmFsL2FwcC1kYXRhXCI7XG52YXIgcGFyc2VQcm9wZXJ0eVZhbHVlID0gKHByb3BWYWx1ZSwgcHJvcFR5cGUsIGlzRm9ybUFzc29jaWF0ZWQpID0+IHtcbiAgaWYgKChCVUlMRDE1Lmh5ZHJhdGVDbGllbnRTaWRlIHx8IEJVSUxEMTUuaHlkcmF0ZVNlcnZlclNpZGUpICYmIHR5cGVvZiBwcm9wVmFsdWUgPT09IFwic3RyaW5nXCIgJiYgcHJvcFZhbHVlLnN0YXJ0c1dpdGgoU0VSSUFMSVpFRF9QUkVGSVgpKSB7XG4gICAgcHJvcFZhbHVlID0gZGVzZXJpYWxpemVQcm9wZXJ0eShwcm9wVmFsdWUpO1xuICAgIHJldHVybiBwcm9wVmFsdWU7XG4gIH1cbiAgaWYgKHByb3BWYWx1ZSAhPSBudWxsICYmICFpc0NvbXBsZXhUeXBlKHByb3BWYWx1ZSkpIHtcbiAgICBpZiAoQlVJTEQxNS5wcm9wQm9vbGVhbiAmJiBwcm9wVHlwZSAmIDQgLyogQm9vbGVhbiAqLykge1xuICAgICAgaWYgKEJVSUxEMTUuZm9ybUFzc29jaWF0ZWQgJiYgaXNGb3JtQXNzb2NpYXRlZCAmJiB0eXBlb2YgcHJvcFZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBwcm9wVmFsdWUgPT09IFwiXCIgfHwgISFwcm9wVmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcHJvcFZhbHVlID09PSBcImZhbHNlXCIgPyBmYWxzZSA6IHByb3BWYWx1ZSA9PT0gXCJcIiB8fCAhIXByb3BWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKEJVSUxEMTUucHJvcE51bWJlciAmJiBwcm9wVHlwZSAmIDIgLyogTnVtYmVyICovKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHByb3BWYWx1ZSA9PT0gXCJzdHJpbmdcIiA/IHBhcnNlRmxvYXQocHJvcFZhbHVlKSA6IHR5cGVvZiBwcm9wVmFsdWUgPT09IFwibnVtYmVyXCIgPyBwcm9wVmFsdWUgOiBOYU47XG4gICAgfVxuICAgIGlmIChCVUlMRDE1LnByb3BTdHJpbmcgJiYgcHJvcFR5cGUgJiAxIC8qIFN0cmluZyAqLykge1xuICAgICAgcmV0dXJuIFN0cmluZyhwcm9wVmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcFZhbHVlO1xuICB9XG4gIHJldHVybiBwcm9wVmFsdWU7XG59O1xuXG4vLyBzcmMvcnVudGltZS91cGRhdGUtY29tcG9uZW50LnRzXG5pbXBvcnQgeyBCVUlMRCBhcyBCVUlMRDIxLCBOQU1FU1BBQ0UgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xuXG4vLyBzcmMvcnVudGltZS9ldmVudC1lbWl0dGVyLnRzXG5pbXBvcnQgeyBCVUlMRCBhcyBCVUlMRDE3IH0gZnJvbSBcIkBzdGVuY2lsL2NvcmUvaW50ZXJuYWwvYXBwLWRhdGFcIjtcblxuLy8gc3JjL3J1bnRpbWUvZWxlbWVudC50c1xuaW1wb3J0IHsgQlVJTEQgYXMgQlVJTEQxNiB9IGZyb20gXCJAc3RlbmNpbC9jb3JlL2ludGVybmFsL2FwcC1kYXRhXCI7XG52YXIgZ2V0RWxlbWVudCA9IChyZWYpID0+IHtcbiAgdmFyIF9hO1xuICByZXR1cm4gQlVJTEQxNi5sYXp5TG9hZCA/IChfYSA9IGdldEhvc3RSZWYocmVmKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLiRob3N0RWxlbWVudCQgOiByZWY7XG59O1xuXG4vLyBzcmMvcnVudGltZS9ldmVudC1lbWl0dGVyLnRzXG52YXIgY3JlYXRlRXZlbnQgPSAocmVmLCBuYW1lLCBmbGFncykgPT4ge1xuICBjb25zdCBlbG0gPSBnZXRFbGVtZW50KHJlZik7XG4gIHJldHVybiB7XG4gICAgZW1pdDogKGRldGFpbCkgPT4ge1xuICAgICAgaWYgKEJVSUxEMTcuaXNEZXYgJiYgIWVsbS5pc0Nvbm5lY3RlZCkge1xuICAgICAgICBjb25zb2xlRGV2V2FybihgVGhlIFwiJHtuYW1lfVwiIGV2ZW50IHdhcyBlbWl0dGVkLCBidXQgdGhlIGRpc3BhdGNoZXIgbm9kZSBpcyBubyBsb25nZXIgY29ubmVjdGVkIHRvIHRoZSBkb20uYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZW1pdEV2ZW50KGVsbSwgbmFtZSwge1xuICAgICAgICBidWJibGVzOiAhIShmbGFncyAmIDQgLyogQnViYmxlcyAqLyksXG4gICAgICAgIGNvbXBvc2VkOiAhIShmbGFncyAmIDIgLyogQ29tcG9zZWQgKi8pLFxuICAgICAgICBjYW5jZWxhYmxlOiAhIShmbGFncyAmIDEgLyogQ2FuY2VsbGFibGUgKi8pLFxuICAgICAgICBkZXRhaWxcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn07XG52YXIgZW1pdEV2ZW50ID0gKGVsbSwgbmFtZSwgb3B0cykgPT4ge1xuICBjb25zdCBldiA9IHBsdC5jZShuYW1lLCBvcHRzKTtcbiAgZWxtLmRpc3BhdGNoRXZlbnQoZXYpO1xuICByZXR1cm4gZXY7XG59O1xuXG4vLyBzcmMvcnVudGltZS92ZG9tL3Zkb20tcmVuZGVyLnRzXG5pbXBvcnQgeyBCVUlMRCBhcyBCVUlMRDIwIH0gZnJvbSBcIkBzdGVuY2lsL2NvcmUvaW50ZXJuYWwvYXBwLWRhdGFcIjtcblxuLy8gc3JjL3J1bnRpbWUvdmRvbS91cGRhdGUtZWxlbWVudC50c1xuaW1wb3J0IHsgQlVJTEQgYXMgQlVJTEQxOSB9IGZyb20gXCJAc3RlbmNpbC9jb3JlL2ludGVybmFsL2FwcC1kYXRhXCI7XG5cbi8vIHNyYy9ydW50aW1lL3Zkb20vc2V0LWFjY2Vzc29yLnRzXG5pbXBvcnQgeyBCVUlMRCBhcyBCVUlMRDE4IH0gZnJvbSBcIkBzdGVuY2lsL2NvcmUvaW50ZXJuYWwvYXBwLWRhdGFcIjtcbnZhciBzZXRBY2Nlc3NvciA9IChlbG0sIG1lbWJlck5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSwgaXNTdmcsIGZsYWdzLCBpbml0aWFsUmVuZGVyKSA9PiB7XG4gIGlmIChvbGRWYWx1ZSA9PT0gbmV3VmFsdWUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IGlzUHJvcCA9IGlzTWVtYmVySW5FbGVtZW50KGVsbSwgbWVtYmVyTmFtZSk7XG4gIGxldCBsbiA9IG1lbWJlck5hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKEJVSUxEMTgudmRvbUNsYXNzICYmIG1lbWJlck5hbWUgPT09IFwiY2xhc3NcIikge1xuICAgIGNvbnN0IGNsYXNzTGlzdCA9IGVsbS5jbGFzc0xpc3Q7XG4gICAgY29uc3Qgb2xkQ2xhc3NlcyA9IHBhcnNlQ2xhc3NMaXN0KG9sZFZhbHVlKTtcbiAgICBsZXQgbmV3Q2xhc3NlcyA9IHBhcnNlQ2xhc3NMaXN0KG5ld1ZhbHVlKTtcbiAgICBpZiAoQlVJTEQxOC5oeWRyYXRlQ2xpZW50U2lkZSAmJiAoZWxtW1wicy1zaVwiXSB8fCBlbG1bXCJzLXNjXCJdKSAmJiBpbml0aWFsUmVuZGVyKSB7XG4gICAgICBjb25zdCBzY29wZUlkMiA9IGVsbVtcInMtc2NcIl0gfHwgZWxtW1wicy1zaVwiXTtcbiAgICAgIG5ld0NsYXNzZXMucHVzaChzY29wZUlkMik7XG4gICAgICBvbGRDbGFzc2VzLmZvckVhY2goKGMpID0+IHtcbiAgICAgICAgaWYgKGMuc3RhcnRzV2l0aChzY29wZUlkMikpIG5ld0NsYXNzZXMucHVzaChjKTtcbiAgICAgIH0pO1xuICAgICAgbmV3Q2xhc3NlcyA9IFsuLi5uZXcgU2V0KG5ld0NsYXNzZXMpXS5maWx0ZXIoKGMpID0+IGMpO1xuICAgICAgY2xhc3NMaXN0LmFkZCguLi5uZXdDbGFzc2VzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2xhc3NMaXN0LnJlbW92ZSguLi5vbGRDbGFzc2VzLmZpbHRlcigoYykgPT4gYyAmJiAhbmV3Q2xhc3Nlcy5pbmNsdWRlcyhjKSkpO1xuICAgICAgY2xhc3NMaXN0LmFkZCguLi5uZXdDbGFzc2VzLmZpbHRlcigoYykgPT4gYyAmJiAhb2xkQ2xhc3Nlcy5pbmNsdWRlcyhjKSkpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChCVUlMRDE4LnZkb21TdHlsZSAmJiBtZW1iZXJOYW1lID09PSBcInN0eWxlXCIpIHtcbiAgICBpZiAoQlVJTEQxOC51cGRhdGFibGUpIHtcbiAgICAgIGZvciAoY29uc3QgcHJvcCBpbiBvbGRWYWx1ZSkge1xuICAgICAgICBpZiAoIW5ld1ZhbHVlIHx8IG5ld1ZhbHVlW3Byb3BdID09IG51bGwpIHtcbiAgICAgICAgICBpZiAoIUJVSUxEMTguaHlkcmF0ZVNlcnZlclNpZGUgJiYgcHJvcC5pbmNsdWRlcyhcIi1cIikpIHtcbiAgICAgICAgICAgIGVsbS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShwcm9wKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxtLnN0eWxlW3Byb3BdID0gXCJcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBwcm9wIGluIG5ld1ZhbHVlKSB7XG4gICAgICBpZiAoIW9sZFZhbHVlIHx8IG5ld1ZhbHVlW3Byb3BdICE9PSBvbGRWYWx1ZVtwcm9wXSkge1xuICAgICAgICBpZiAoIUJVSUxEMTguaHlkcmF0ZVNlcnZlclNpZGUgJiYgcHJvcC5pbmNsdWRlcyhcIi1cIikpIHtcbiAgICAgICAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkocHJvcCwgbmV3VmFsdWVbcHJvcF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsbS5zdHlsZVtwcm9wXSA9IG5ld1ZhbHVlW3Byb3BdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKEJVSUxEMTgudmRvbUtleSAmJiBtZW1iZXJOYW1lID09PSBcImtleVwiKSB7XG4gIH0gZWxzZSBpZiAoQlVJTEQxOC52ZG9tUmVmICYmIG1lbWJlck5hbWUgPT09IFwicmVmXCIpIHtcbiAgICBpZiAobmV3VmFsdWUpIHtcbiAgICAgIG5ld1ZhbHVlKGVsbSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKEJVSUxEMTgudmRvbUxpc3RlbmVyICYmIChCVUlMRDE4LmxhenlMb2FkID8gIWlzUHJvcCA6ICFlbG0uX19sb29rdXBTZXR0ZXJfXyhtZW1iZXJOYW1lKSkgJiYgbWVtYmVyTmFtZVswXSA9PT0gXCJvXCIgJiYgbWVtYmVyTmFtZVsxXSA9PT0gXCJuXCIpIHtcbiAgICBpZiAobWVtYmVyTmFtZVsyXSA9PT0gXCItXCIpIHtcbiAgICAgIG1lbWJlck5hbWUgPSBtZW1iZXJOYW1lLnNsaWNlKDMpO1xuICAgIH0gZWxzZSBpZiAoaXNNZW1iZXJJbkVsZW1lbnQod2luLCBsbikpIHtcbiAgICAgIG1lbWJlck5hbWUgPSBsbi5zbGljZSgyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWVtYmVyTmFtZSA9IGxuWzJdICsgbWVtYmVyTmFtZS5zbGljZSgzKTtcbiAgICB9XG4gICAgaWYgKG9sZFZhbHVlIHx8IG5ld1ZhbHVlKSB7XG4gICAgICBjb25zdCBjYXB0dXJlID0gbWVtYmVyTmFtZS5lbmRzV2l0aChDQVBUVVJFX0VWRU5UX1NVRkZJWCk7XG4gICAgICBtZW1iZXJOYW1lID0gbWVtYmVyTmFtZS5yZXBsYWNlKENBUFRVUkVfRVZFTlRfUkVHRVgsIFwiXCIpO1xuICAgICAgaWYgKG9sZFZhbHVlKSB7XG4gICAgICAgIHBsdC5yZWwoZWxtLCBtZW1iZXJOYW1lLCBvbGRWYWx1ZSwgY2FwdHVyZSk7XG4gICAgICB9XG4gICAgICBpZiAobmV3VmFsdWUpIHtcbiAgICAgICAgcGx0LmFlbChlbG0sIG1lbWJlck5hbWUsIG5ld1ZhbHVlLCBjYXB0dXJlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoQlVJTEQxOC52ZG9tUHJvcE9yQXR0cikge1xuICAgIGNvbnN0IGlzQ29tcGxleCA9IGlzQ29tcGxleFR5cGUobmV3VmFsdWUpO1xuICAgIGlmICgoaXNQcm9wIHx8IGlzQ29tcGxleCAmJiBuZXdWYWx1ZSAhPT0gbnVsbCkgJiYgIWlzU3ZnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIWVsbS50YWdOYW1lLmluY2x1ZGVzKFwiLVwiKSkge1xuICAgICAgICAgIGNvbnN0IG4gPSBuZXdWYWx1ZSA9PSBudWxsID8gXCJcIiA6IG5ld1ZhbHVlO1xuICAgICAgICAgIGlmIChtZW1iZXJOYW1lID09PSBcImxpc3RcIikge1xuICAgICAgICAgICAgaXNQcm9wID0gZmFsc2U7XG4gICAgICAgICAgfSBlbHNlIGlmIChvbGRWYWx1ZSA9PSBudWxsIHx8IGVsbVttZW1iZXJOYW1lXSAhPSBuKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVsbS5fX2xvb2t1cFNldHRlcl9fKG1lbWJlck5hbWUpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgZWxtW21lbWJlck5hbWVdID0gbjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGVsbS5zZXRBdHRyaWJ1dGUobWVtYmVyTmFtZSwgbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGVsbVttZW1iZXJOYW1lXSAhPT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICBlbG1bbWVtYmVyTmFtZV0gPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgfVxuICAgIH1cbiAgICBsZXQgeGxpbmsgPSBmYWxzZTtcbiAgICBpZiAoQlVJTEQxOC52ZG9tWGxpbmspIHtcbiAgICAgIGlmIChsbiAhPT0gKGxuID0gbG4ucmVwbGFjZSgvXnhsaW5rXFw6Py8sIFwiXCIpKSkge1xuICAgICAgICBtZW1iZXJOYW1lID0gbG47XG4gICAgICAgIHhsaW5rID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5ld1ZhbHVlID09IG51bGwgfHwgbmV3VmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICBpZiAobmV3VmFsdWUgIT09IGZhbHNlIHx8IGVsbS5nZXRBdHRyaWJ1dGUobWVtYmVyTmFtZSkgPT09IFwiXCIpIHtcbiAgICAgICAgaWYgKEJVSUxEMTgudmRvbVhsaW5rICYmIHhsaW5rKSB7XG4gICAgICAgICAgZWxtLnJlbW92ZUF0dHJpYnV0ZU5TKFhMSU5LX05TLCBtZW1iZXJOYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbG0ucmVtb3ZlQXR0cmlidXRlKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgoIWlzUHJvcCB8fCBmbGFncyAmIDQgLyogaXNIb3N0ICovIHx8IGlzU3ZnKSAmJiAhaXNDb21wbGV4ICYmIGVsbS5ub2RlVHlwZSA9PT0gMSAvKiBFbGVtZW50Tm9kZSAqLykge1xuICAgICAgbmV3VmFsdWUgPSBuZXdWYWx1ZSA9PT0gdHJ1ZSA/IFwiXCIgOiBuZXdWYWx1ZTtcbiAgICAgIGlmIChCVUlMRDE4LnZkb21YbGluayAmJiB4bGluaykge1xuICAgICAgICBlbG0uc2V0QXR0cmlidXRlTlMoWExJTktfTlMsIG1lbWJlck5hbWUsIG5ld1ZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsbS5zZXRBdHRyaWJ1dGUobWVtYmVyTmFtZSwgbmV3VmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbnZhciBwYXJzZUNsYXNzTGlzdFJlZ2V4ID0gL1xccy87XG52YXIgcGFyc2VDbGFzc0xpc3QgPSAodmFsdWUpID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAmJiBcImJhc2VWYWxcIiBpbiB2YWx1ZSkge1xuICAgIHZhbHVlID0gdmFsdWUuYmFzZVZhbDtcbiAgfVxuICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICByZXR1cm4gdmFsdWUuc3BsaXQocGFyc2VDbGFzc0xpc3RSZWdleCk7XG59O1xudmFyIENBUFRVUkVfRVZFTlRfU1VGRklYID0gXCJDYXB0dXJlXCI7XG52YXIgQ0FQVFVSRV9FVkVOVF9SRUdFWCA9IG5ldyBSZWdFeHAoQ0FQVFVSRV9FVkVOVF9TVUZGSVggKyBcIiRcIik7XG5cbi8vIHNyYy9ydW50aW1lL3Zkb20vdXBkYXRlLWVsZW1lbnQudHNcbnZhciB1cGRhdGVFbGVtZW50ID0gKG9sZFZub2RlLCBuZXdWbm9kZSwgaXNTdmdNb2RlMiwgaXNJbml0aWFsUmVuZGVyKSA9PiB7XG4gIGNvbnN0IGVsbSA9IG5ld1Zub2RlLiRlbG0kLm5vZGVUeXBlID09PSAxMSAvKiBEb2N1bWVudEZyYWdtZW50ICovICYmIG5ld1Zub2RlLiRlbG0kLmhvc3QgPyBuZXdWbm9kZS4kZWxtJC5ob3N0IDogbmV3Vm5vZGUuJGVsbSQ7XG4gIGNvbnN0IG9sZFZub2RlQXR0cnMgPSBvbGRWbm9kZSAmJiBvbGRWbm9kZS4kYXR0cnMkIHx8IHt9O1xuICBjb25zdCBuZXdWbm9kZUF0dHJzID0gbmV3Vm5vZGUuJGF0dHJzJCB8fCB7fTtcbiAgaWYgKEJVSUxEMTkudXBkYXRhYmxlKSB7XG4gICAgZm9yIChjb25zdCBtZW1iZXJOYW1lIG9mIHNvcnRlZEF0dHJOYW1lcyhPYmplY3Qua2V5cyhvbGRWbm9kZUF0dHJzKSkpIHtcbiAgICAgIGlmICghKG1lbWJlck5hbWUgaW4gbmV3Vm5vZGVBdHRycykpIHtcbiAgICAgICAgc2V0QWNjZXNzb3IoXG4gICAgICAgICAgZWxtLFxuICAgICAgICAgIG1lbWJlck5hbWUsXG4gICAgICAgICAgb2xkVm5vZGVBdHRyc1ttZW1iZXJOYW1lXSxcbiAgICAgICAgICB2b2lkIDAsXG4gICAgICAgICAgaXNTdmdNb2RlMixcbiAgICAgICAgICBuZXdWbm9kZS4kZmxhZ3MkLFxuICAgICAgICAgIGlzSW5pdGlhbFJlbmRlclxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBmb3IgKGNvbnN0IG1lbWJlck5hbWUgb2Ygc29ydGVkQXR0ck5hbWVzKE9iamVjdC5rZXlzKG5ld1Zub2RlQXR0cnMpKSkge1xuICAgIHNldEFjY2Vzc29yKFxuICAgICAgZWxtLFxuICAgICAgbWVtYmVyTmFtZSxcbiAgICAgIG9sZFZub2RlQXR0cnNbbWVtYmVyTmFtZV0sXG4gICAgICBuZXdWbm9kZUF0dHJzW21lbWJlck5hbWVdLFxuICAgICAgaXNTdmdNb2RlMixcbiAgICAgIG5ld1Zub2RlLiRmbGFncyQsXG4gICAgICBpc0luaXRpYWxSZW5kZXJcbiAgICApO1xuICB9XG59O1xuZnVuY3Rpb24gc29ydGVkQXR0ck5hbWVzKGF0dHJOYW1lcykge1xuICByZXR1cm4gYXR0ck5hbWVzLmluY2x1ZGVzKFwicmVmXCIpID8gKFxuICAgIC8vIHdlIG5lZWQgdG8gc29ydCB0aGVzZSB0byBlbnN1cmUgdGhhdCBgJ3JlZidgIGlzIHRoZSBsYXN0IGF0dHJcbiAgICBbLi4uYXR0ck5hbWVzLmZpbHRlcigoYXR0cikgPT4gYXR0ciAhPT0gXCJyZWZcIiksIFwicmVmXCJdXG4gICkgOiAoXG4gICAgLy8gbm8gbmVlZCB0byBzb3J0LCByZXR1cm4gdGhlIG9yaWdpbmFsIGFycmF5XG4gICAgYXR0ck5hbWVzXG4gICk7XG59XG5cbi8vIHNyYy9ydW50aW1lL3Zkb20vdmRvbS1yZW5kZXIudHNcbnZhciBzY29wZUlkO1xudmFyIGNvbnRlbnRSZWY7XG52YXIgaG9zdFRhZ05hbWU7XG52YXIgdXNlTmF0aXZlU2hhZG93RG9tID0gZmFsc2U7XG52YXIgY2hlY2tTbG90RmFsbGJhY2tWaXNpYmlsaXR5ID0gZmFsc2U7XG52YXIgY2hlY2tTbG90UmVsb2NhdGUgPSBmYWxzZTtcbnZhciBpc1N2Z01vZGUgPSBmYWxzZTtcbnZhciBjcmVhdGVFbG0gPSAob2xkUGFyZW50Vk5vZGUsIG5ld1BhcmVudFZOb2RlLCBjaGlsZEluZGV4KSA9PiB7XG4gIHZhciBfYTtcbiAgY29uc3QgbmV3Vk5vZGUyID0gbmV3UGFyZW50Vk5vZGUuJGNoaWxkcmVuJFtjaGlsZEluZGV4XTtcbiAgbGV0IGkyID0gMDtcbiAgbGV0IGVsbTtcbiAgbGV0IGNoaWxkTm9kZTtcbiAgbGV0IG9sZFZOb2RlO1xuICBpZiAoQlVJTEQyMC5zbG90UmVsb2NhdGlvbiAmJiAhdXNlTmF0aXZlU2hhZG93RG9tKSB7XG4gICAgY2hlY2tTbG90UmVsb2NhdGUgPSB0cnVlO1xuICAgIGlmIChuZXdWTm9kZTIuJHRhZyQgPT09IFwic2xvdFwiKSB7XG4gICAgICBuZXdWTm9kZTIuJGZsYWdzJCB8PSBuZXdWTm9kZTIuJGNoaWxkcmVuJCA/IChcbiAgICAgICAgLy8gc2xvdCBlbGVtZW50IGhhcyBmYWxsYmFjayBjb250ZW50XG4gICAgICAgIC8vIHN0aWxsIGNyZWF0ZSBhbiBlbGVtZW50IHRoYXQgXCJtb2Nrc1wiIHRoZSBzbG90IGVsZW1lbnRcbiAgICAgICAgMiAvKiBpc1Nsb3RGYWxsYmFjayAqL1xuICAgICAgKSA6IChcbiAgICAgICAgLy8gc2xvdCBlbGVtZW50IGRvZXMgbm90IGhhdmUgZmFsbGJhY2sgY29udGVudFxuICAgICAgICAvLyBjcmVhdGUgYW4gaHRtbCBjb21tZW50IHdlJ2xsIHVzZSB0byBhbHdheXMgcmVmZXJlbmNlXG4gICAgICAgIC8vIHdoZXJlIGFjdHVhbCBzbG90IGNvbnRlbnQgc2hvdWxkIHNpdCBuZXh0IHRvXG4gICAgICAgIDEgLyogaXNTbG90UmVmZXJlbmNlICovXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBpZiAoQlVJTEQyMC5pc0RldiAmJiBuZXdWTm9kZTIuJGVsbSQpIHtcbiAgICBjb25zb2xlRGV2RXJyb3IoXG4gICAgICBgVGhlIEpTWCAke25ld1ZOb2RlMi4kdGV4dCQgIT09IG51bGwgPyBgXCIke25ld1ZOb2RlMi4kdGV4dCR9XCIgdGV4dGAgOiBgXCIke25ld1ZOb2RlMi4kdGFnJH1cIiBlbGVtZW50YH0gbm9kZSBzaG91bGQgbm90IGJlIHNoYXJlZCB3aXRoaW4gdGhlIHNhbWUgcmVuZGVyZXIuIFRoZSByZW5kZXJlciBjYWNoZXMgZWxlbWVudCBsb29rdXBzIGluIG9yZGVyIHRvIGltcHJvdmUgcGVyZm9ybWFuY2UuIEhvd2V2ZXIsIGEgc2lkZSBlZmZlY3QgZnJvbSB0aGlzIGlzIHRoYXQgdGhlIGV4YWN0IHNhbWUgSlNYIG5vZGUgc2hvdWxkIG5vdCBiZSByZXVzZWQuIEZvciBtb3JlIGluZm9ybWF0aW9uIHBsZWFzZSBzZWUgaHR0cHM6Ly9zdGVuY2lsanMuY29tL2RvY3MvdGVtcGxhdGluZy1qc3gjYXZvaWQtc2hhcmVkLWpzeC1ub2Rlc2BcbiAgICApO1xuICB9XG4gIGlmIChCVUlMRDIwLnZkb21UZXh0ICYmIG5ld1ZOb2RlMi4kdGV4dCQgIT09IG51bGwpIHtcbiAgICBlbG0gPSBuZXdWTm9kZTIuJGVsbSQgPSB3aW4uZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobmV3Vk5vZGUyLiR0ZXh0JCk7XG4gIH0gZWxzZSBpZiAoQlVJTEQyMC5zbG90UmVsb2NhdGlvbiAmJiBuZXdWTm9kZTIuJGZsYWdzJCAmIDEgLyogaXNTbG90UmVmZXJlbmNlICovKSB7XG4gICAgZWxtID0gbmV3Vk5vZGUyLiRlbG0kID0gQlVJTEQyMC5pc0RlYnVnIHx8IEJVSUxEMjAuaHlkcmF0ZVNlcnZlclNpZGUgPyBzbG90UmVmZXJlbmNlRGVidWdOb2RlKG5ld1ZOb2RlMikgOiB3aW4uZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIik7XG4gICAgaWYgKEJVSUxEMjAudmRvbUF0dHJpYnV0ZSkge1xuICAgICAgdXBkYXRlRWxlbWVudChudWxsLCBuZXdWTm9kZTIsIGlzU3ZnTW9kZSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChCVUlMRDIwLnN2ZyAmJiAhaXNTdmdNb2RlKSB7XG4gICAgICBpc1N2Z01vZGUgPSBuZXdWTm9kZTIuJHRhZyQgPT09IFwic3ZnXCI7XG4gICAgfVxuICAgIGlmICghd2luLmRvY3VtZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiWW91IGFyZSB0cnlpbmcgdG8gcmVuZGVyIGEgU3RlbmNpbCBjb21wb25lbnQgaW4gYW4gZW52aXJvbm1lbnQgdGhhdCBkb2Vzbid0IHN1cHBvcnQgdGhlIERPTS4gTWFrZSBzdXJlIHRvIHBvcHVsYXRlIHRoZSBbYHdpbmRvd2BdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3cvd2luZG93KSBvYmplY3QgYmVmb3JlIHJlbmRlcmluZyBhIGNvbXBvbmVudC5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgZWxtID0gbmV3Vk5vZGUyLiRlbG0kID0gQlVJTEQyMC5zdmcgPyB3aW4uZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFxuICAgICAgaXNTdmdNb2RlID8gU1ZHX05TIDogSFRNTF9OUyxcbiAgICAgICF1c2VOYXRpdmVTaGFkb3dEb20gJiYgQlVJTEQyMC5zbG90UmVsb2NhdGlvbiAmJiBuZXdWTm9kZTIuJGZsYWdzJCAmIDIgLyogaXNTbG90RmFsbGJhY2sgKi8gPyBcInNsb3QtZmJcIiA6IG5ld1ZOb2RlMi4kdGFnJFxuICAgICkgOiB3aW4uZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcbiAgICAgICF1c2VOYXRpdmVTaGFkb3dEb20gJiYgQlVJTEQyMC5zbG90UmVsb2NhdGlvbiAmJiBuZXdWTm9kZTIuJGZsYWdzJCAmIDIgLyogaXNTbG90RmFsbGJhY2sgKi8gPyBcInNsb3QtZmJcIiA6IG5ld1ZOb2RlMi4kdGFnJFxuICAgICk7XG4gICAgaWYgKEJVSUxEMjAuc3ZnICYmIGlzU3ZnTW9kZSAmJiBuZXdWTm9kZTIuJHRhZyQgPT09IFwiZm9yZWlnbk9iamVjdFwiKSB7XG4gICAgICBpc1N2Z01vZGUgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKEJVSUxEMjAudmRvbUF0dHJpYnV0ZSkge1xuICAgICAgdXBkYXRlRWxlbWVudChudWxsLCBuZXdWTm9kZTIsIGlzU3ZnTW9kZSk7XG4gICAgfVxuICAgIGlmICgoQlVJTEQyMC5zY29wZWQgfHwgQlVJTEQyMC5oeWRyYXRlU2VydmVyU2lkZSAmJiAxMjggLyogc2hhZG93TmVlZHNTY29wZWRDc3MgKi8pICYmIGlzRGVmKHNjb3BlSWQpICYmIGVsbVtcInMtc2lcIl0gIT09IHNjb3BlSWQpIHtcbiAgICAgIGVsbS5jbGFzc0xpc3QuYWRkKGVsbVtcInMtc2lcIl0gPSBzY29wZUlkKTtcbiAgICB9XG4gICAgaWYgKG5ld1ZOb2RlMi4kY2hpbGRyZW4kKSB7XG4gICAgICBmb3IgKGkyID0gMDsgaTIgPCBuZXdWTm9kZTIuJGNoaWxkcmVuJC5sZW5ndGg7ICsraTIpIHtcbiAgICAgICAgY2hpbGROb2RlID0gY3JlYXRlRWxtKG9sZFBhcmVudFZOb2RlLCBuZXdWTm9kZTIsIGkyKTtcbiAgICAgICAgaWYgKGNoaWxkTm9kZSkge1xuICAgICAgICAgIGVsbS5hcHBlbmRDaGlsZChjaGlsZE5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChCVUlMRDIwLnN2Zykge1xuICAgICAgaWYgKG5ld1ZOb2RlMi4kdGFnJCA9PT0gXCJzdmdcIikge1xuICAgICAgICBpc1N2Z01vZGUgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoZWxtLnRhZ05hbWUgPT09IFwiZm9yZWlnbk9iamVjdFwiKSB7XG4gICAgICAgIGlzU3ZnTW9kZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGVsbVtcInMtaG5cIl0gPSBob3N0VGFnTmFtZTtcbiAgaWYgKEJVSUxEMjAuc2xvdFJlbG9jYXRpb24pIHtcbiAgICBpZiAobmV3Vk5vZGUyLiRmbGFncyQgJiAoMiAvKiBpc1Nsb3RGYWxsYmFjayAqLyB8IDEgLyogaXNTbG90UmVmZXJlbmNlICovKSkge1xuICAgICAgZWxtW1wicy1zclwiXSA9IHRydWU7XG4gICAgICBlbG1bXCJzLWNyXCJdID0gY29udGVudFJlZjtcbiAgICAgIGVsbVtcInMtc25cIl0gPSBuZXdWTm9kZTIuJG5hbWUkIHx8IFwiXCI7XG4gICAgICBlbG1bXCJzLXJmXCJdID0gKF9hID0gbmV3Vk5vZGUyLiRhdHRycyQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5yZWY7XG4gICAgICBwYXRjaFNsb3ROb2RlKGVsbSk7XG4gICAgICBvbGRWTm9kZSA9IG9sZFBhcmVudFZOb2RlICYmIG9sZFBhcmVudFZOb2RlLiRjaGlsZHJlbiQgJiYgb2xkUGFyZW50Vk5vZGUuJGNoaWxkcmVuJFtjaGlsZEluZGV4XTtcbiAgICAgIGlmIChvbGRWTm9kZSAmJiBvbGRWTm9kZS4kdGFnJCA9PT0gbmV3Vk5vZGUyLiR0YWckICYmIG9sZFBhcmVudFZOb2RlLiRlbG0kKSB7XG4gICAgICAgIGlmIChCVUlMRDIwLmV4cGVyaW1lbnRhbFNsb3RGaXhlcykge1xuICAgICAgICAgIHJlbG9jYXRlVG9Ib3N0Um9vdChvbGRQYXJlbnRWTm9kZS4kZWxtJCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHV0QmFja0luT3JpZ2luYWxMb2NhdGlvbihvbGRQYXJlbnRWTm9kZS4kZWxtJCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoQlVJTEQyMC5zY29wZWQgfHwgQlVJTEQyMC5oeWRyYXRlU2VydmVyU2lkZSAmJiAxMjggLyogc2hhZG93TmVlZHNTY29wZWRDc3MgKi8pIHtcbiAgICAgICAgYWRkUmVtb3ZlU2xvdFNjb3BlZENsYXNzKGNvbnRlbnRSZWYsIGVsbSwgbmV3UGFyZW50Vk5vZGUuJGVsbSQsIG9sZFBhcmVudFZOb2RlID09IG51bGwgPyB2b2lkIDAgOiBvbGRQYXJlbnRWTm9kZS4kZWxtJCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBlbG07XG59O1xudmFyIHJlbG9jYXRlVG9Ib3N0Um9vdCA9IChwYXJlbnRFbG0pID0+IHtcbiAgcGx0LiRmbGFncyQgfD0gMSAvKiBpc1RtcERpc2Nvbm5lY3RlZCAqLztcbiAgY29uc3QgaG9zdCA9IHBhcmVudEVsbS5jbG9zZXN0KGhvc3RUYWdOYW1lLnRvTG93ZXJDYXNlKCkpO1xuICBpZiAoaG9zdCAhPSBudWxsKSB7XG4gICAgY29uc3QgY29udGVudFJlZk5vZGUgPSBBcnJheS5mcm9tKGhvc3QuX19jaGlsZE5vZGVzIHx8IGhvc3QuY2hpbGROb2RlcykuZmluZChcbiAgICAgIChyZWYpID0+IHJlZltcInMtY3JcIl1cbiAgICApO1xuICAgIGNvbnN0IGNoaWxkTm9kZUFycmF5ID0gQXJyYXkuZnJvbShcbiAgICAgIHBhcmVudEVsbS5fX2NoaWxkTm9kZXMgfHwgcGFyZW50RWxtLmNoaWxkTm9kZXNcbiAgICApO1xuICAgIGZvciAoY29uc3QgY2hpbGROb2RlIG9mIGNvbnRlbnRSZWZOb2RlID8gY2hpbGROb2RlQXJyYXkucmV2ZXJzZSgpIDogY2hpbGROb2RlQXJyYXkpIHtcbiAgICAgIGlmIChjaGlsZE5vZGVbXCJzLXNoXCJdICE9IG51bGwpIHtcbiAgICAgICAgaW5zZXJ0QmVmb3JlKGhvc3QsIGNoaWxkTm9kZSwgY29udGVudFJlZk5vZGUgIT0gbnVsbCA/IGNvbnRlbnRSZWZOb2RlIDogbnVsbCk7XG4gICAgICAgIGNoaWxkTm9kZVtcInMtc2hcIl0gPSB2b2lkIDA7XG4gICAgICAgIGNoZWNrU2xvdFJlbG9jYXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcGx0LiRmbGFncyQgJj0gfjEgLyogaXNUbXBEaXNjb25uZWN0ZWQgKi87XG59O1xudmFyIHB1dEJhY2tJbk9yaWdpbmFsTG9jYXRpb24gPSAocGFyZW50RWxtLCByZWN1cnNpdmUpID0+IHtcbiAgcGx0LiRmbGFncyQgfD0gMSAvKiBpc1RtcERpc2Nvbm5lY3RlZCAqLztcbiAgY29uc3Qgb2xkU2xvdENoaWxkTm9kZXMgPSBBcnJheS5mcm9tKHBhcmVudEVsbS5fX2NoaWxkTm9kZXMgfHwgcGFyZW50RWxtLmNoaWxkTm9kZXMpO1xuICBpZiAocGFyZW50RWxtW1wicy1zclwiXSAmJiBCVUlMRDIwLmV4cGVyaW1lbnRhbFNsb3RGaXhlcykge1xuICAgIGxldCBub2RlID0gcGFyZW50RWxtO1xuICAgIHdoaWxlIChub2RlID0gbm9kZS5uZXh0U2libGluZykge1xuICAgICAgaWYgKG5vZGUgJiYgbm9kZVtcInMtc25cIl0gPT09IHBhcmVudEVsbVtcInMtc25cIl0gJiYgbm9kZVtcInMtc2hcIl0gPT09IGhvc3RUYWdOYW1lKSB7XG4gICAgICAgIG9sZFNsb3RDaGlsZE5vZGVzLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZvciAobGV0IGkyID0gb2xkU2xvdENoaWxkTm9kZXMubGVuZ3RoIC0gMTsgaTIgPj0gMDsgaTItLSkge1xuICAgIGNvbnN0IGNoaWxkTm9kZSA9IG9sZFNsb3RDaGlsZE5vZGVzW2kyXTtcbiAgICBpZiAoY2hpbGROb2RlW1wicy1oblwiXSAhPT0gaG9zdFRhZ05hbWUgJiYgY2hpbGROb2RlW1wicy1vbFwiXSkge1xuICAgICAgaW5zZXJ0QmVmb3JlKHJlZmVyZW5jZU5vZGUoY2hpbGROb2RlKS5wYXJlbnROb2RlLCBjaGlsZE5vZGUsIHJlZmVyZW5jZU5vZGUoY2hpbGROb2RlKSk7XG4gICAgICBjaGlsZE5vZGVbXCJzLW9sXCJdLnJlbW92ZSgpO1xuICAgICAgY2hpbGROb2RlW1wicy1vbFwiXSA9IHZvaWQgMDtcbiAgICAgIGNoaWxkTm9kZVtcInMtc2hcIl0gPSB2b2lkIDA7XG4gICAgICBjaGVja1Nsb3RSZWxvY2F0ZSA9IHRydWU7XG4gICAgfVxuICAgIGlmIChyZWN1cnNpdmUpIHtcbiAgICAgIHB1dEJhY2tJbk9yaWdpbmFsTG9jYXRpb24oY2hpbGROb2RlLCByZWN1cnNpdmUpO1xuICAgIH1cbiAgfVxuICBwbHQuJGZsYWdzJCAmPSB+MSAvKiBpc1RtcERpc2Nvbm5lY3RlZCAqLztcbn07XG52YXIgYWRkVm5vZGVzID0gKHBhcmVudEVsbSwgYmVmb3JlLCBwYXJlbnRWTm9kZSwgdm5vZGVzLCBzdGFydElkeCwgZW5kSWR4KSA9PiB7XG4gIGxldCBjb250YWluZXJFbG0gPSBCVUlMRDIwLnNsb3RSZWxvY2F0aW9uICYmIHBhcmVudEVsbVtcInMtY3JcIl0gJiYgcGFyZW50RWxtW1wicy1jclwiXS5wYXJlbnROb2RlIHx8IHBhcmVudEVsbTtcbiAgbGV0IGNoaWxkTm9kZTtcbiAgaWYgKEJVSUxEMjAuc2hhZG93RG9tICYmIGNvbnRhaW5lckVsbS5zaGFkb3dSb290ICYmIGNvbnRhaW5lckVsbS50YWdOYW1lID09PSBob3N0VGFnTmFtZSkge1xuICAgIGNvbnRhaW5lckVsbSA9IGNvbnRhaW5lckVsbS5zaGFkb3dSb290O1xuICB9XG4gIGZvciAoOyBzdGFydElkeCA8PSBlbmRJZHg7ICsrc3RhcnRJZHgpIHtcbiAgICBpZiAodm5vZGVzW3N0YXJ0SWR4XSkge1xuICAgICAgY2hpbGROb2RlID0gY3JlYXRlRWxtKG51bGwsIHBhcmVudFZOb2RlLCBzdGFydElkeCk7XG4gICAgICBpZiAoY2hpbGROb2RlKSB7XG4gICAgICAgIHZub2Rlc1tzdGFydElkeF0uJGVsbSQgPSBjaGlsZE5vZGU7XG4gICAgICAgIGluc2VydEJlZm9yZShjb250YWluZXJFbG0sIGNoaWxkTm9kZSwgQlVJTEQyMC5zbG90UmVsb2NhdGlvbiA/IHJlZmVyZW5jZU5vZGUoYmVmb3JlKSA6IGJlZm9yZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xudmFyIHJlbW92ZVZub2RlcyA9ICh2bm9kZXMsIHN0YXJ0SWR4LCBlbmRJZHgpID0+IHtcbiAgZm9yIChsZXQgaW5kZXggPSBzdGFydElkeDsgaW5kZXggPD0gZW5kSWR4OyArK2luZGV4KSB7XG4gICAgY29uc3Qgdm5vZGUgPSB2bm9kZXNbaW5kZXhdO1xuICAgIGlmICh2bm9kZSkge1xuICAgICAgY29uc3QgZWxtID0gdm5vZGUuJGVsbSQ7XG4gICAgICBudWxsaWZ5Vk5vZGVSZWZzKHZub2RlKTtcbiAgICAgIGlmIChlbG0pIHtcbiAgICAgICAgaWYgKEJVSUxEMjAuc2xvdFJlbG9jYXRpb24pIHtcbiAgICAgICAgICBjaGVja1Nsb3RGYWxsYmFja1Zpc2liaWxpdHkgPSB0cnVlO1xuICAgICAgICAgIGlmIChlbG1bXCJzLW9sXCJdKSB7XG4gICAgICAgICAgICBlbG1bXCJzLW9sXCJdLnJlbW92ZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwdXRCYWNrSW5PcmlnaW5hbExvY2F0aW9uKGVsbSwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsbS5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG52YXIgdXBkYXRlQ2hpbGRyZW4gPSAocGFyZW50RWxtLCBvbGRDaCwgbmV3Vk5vZGUyLCBuZXdDaCwgaXNJbml0aWFsUmVuZGVyID0gZmFsc2UpID0+IHtcbiAgbGV0IG9sZFN0YXJ0SWR4ID0gMDtcbiAgbGV0IG5ld1N0YXJ0SWR4ID0gMDtcbiAgbGV0IGlkeEluT2xkID0gMDtcbiAgbGV0IGkyID0gMDtcbiAgbGV0IG9sZEVuZElkeCA9IG9sZENoLmxlbmd0aCAtIDE7XG4gIGxldCBvbGRTdGFydFZub2RlID0gb2xkQ2hbMF07XG4gIGxldCBvbGRFbmRWbm9kZSA9IG9sZENoW29sZEVuZElkeF07XG4gIGxldCBuZXdFbmRJZHggPSBuZXdDaC5sZW5ndGggLSAxO1xuICBsZXQgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWzBdO1xuICBsZXQgbmV3RW5kVm5vZGUgPSBuZXdDaFtuZXdFbmRJZHhdO1xuICBsZXQgbm9kZTtcbiAgbGV0IGVsbVRvTW92ZTtcbiAgd2hpbGUgKG9sZFN0YXJ0SWR4IDw9IG9sZEVuZElkeCAmJiBuZXdTdGFydElkeCA8PSBuZXdFbmRJZHgpIHtcbiAgICBpZiAob2xkU3RhcnRWbm9kZSA9PSBudWxsKSB7XG4gICAgICBvbGRTdGFydFZub2RlID0gb2xkQ2hbKytvbGRTdGFydElkeF07XG4gICAgfSBlbHNlIGlmIChvbGRFbmRWbm9kZSA9PSBudWxsKSB7XG4gICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTtcbiAgICB9IGVsc2UgaWYgKG5ld1N0YXJ0Vm5vZGUgPT0gbnVsbCkge1xuICAgICAgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWysrbmV3U3RhcnRJZHhdO1xuICAgIH0gZWxzZSBpZiAobmV3RW5kVm5vZGUgPT0gbnVsbCkge1xuICAgICAgbmV3RW5kVm5vZGUgPSBuZXdDaFstLW5ld0VuZElkeF07XG4gICAgfSBlbHNlIGlmIChpc1NhbWVWbm9kZShvbGRTdGFydFZub2RlLCBuZXdTdGFydFZub2RlLCBpc0luaXRpYWxSZW5kZXIpKSB7XG4gICAgICBwYXRjaChvbGRTdGFydFZub2RlLCBuZXdTdGFydFZub2RlLCBpc0luaXRpYWxSZW5kZXIpO1xuICAgICAgb2xkU3RhcnRWbm9kZSA9IG9sZENoWysrb2xkU3RhcnRJZHhdO1xuICAgICAgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWysrbmV3U3RhcnRJZHhdO1xuICAgIH0gZWxzZSBpZiAoaXNTYW1lVm5vZGUob2xkRW5kVm5vZGUsIG5ld0VuZFZub2RlLCBpc0luaXRpYWxSZW5kZXIpKSB7XG4gICAgICBwYXRjaChvbGRFbmRWbm9kZSwgbmV3RW5kVm5vZGUsIGlzSW5pdGlhbFJlbmRlcik7XG4gICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTtcbiAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdO1xuICAgIH0gZWxzZSBpZiAoaXNTYW1lVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3RW5kVm5vZGUsIGlzSW5pdGlhbFJlbmRlcikpIHtcbiAgICAgIGlmIChCVUlMRDIwLnNsb3RSZWxvY2F0aW9uICYmIChvbGRTdGFydFZub2RlLiR0YWckID09PSBcInNsb3RcIiB8fCBuZXdFbmRWbm9kZS4kdGFnJCA9PT0gXCJzbG90XCIpKSB7XG4gICAgICAgIHB1dEJhY2tJbk9yaWdpbmFsTG9jYXRpb24ob2xkU3RhcnRWbm9kZS4kZWxtJC5wYXJlbnROb2RlLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBwYXRjaChvbGRTdGFydFZub2RlLCBuZXdFbmRWbm9kZSwgaXNJbml0aWFsUmVuZGVyKTtcbiAgICAgIGluc2VydEJlZm9yZShwYXJlbnRFbG0sIG9sZFN0YXJ0Vm5vZGUuJGVsbSQsIG9sZEVuZFZub2RlLiRlbG0kLm5leHRTaWJsaW5nKTtcbiAgICAgIG9sZFN0YXJ0Vm5vZGUgPSBvbGRDaFsrK29sZFN0YXJ0SWR4XTtcbiAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdO1xuICAgIH0gZWxzZSBpZiAoaXNTYW1lVm5vZGUob2xkRW5kVm5vZGUsIG5ld1N0YXJ0Vm5vZGUsIGlzSW5pdGlhbFJlbmRlcikpIHtcbiAgICAgIGlmIChCVUlMRDIwLnNsb3RSZWxvY2F0aW9uICYmIChvbGRTdGFydFZub2RlLiR0YWckID09PSBcInNsb3RcIiB8fCBuZXdFbmRWbm9kZS4kdGFnJCA9PT0gXCJzbG90XCIpKSB7XG4gICAgICAgIHB1dEJhY2tJbk9yaWdpbmFsTG9jYXRpb24ob2xkRW5kVm5vZGUuJGVsbSQucGFyZW50Tm9kZSwgZmFsc2UpO1xuICAgICAgfVxuICAgICAgcGF0Y2gob2xkRW5kVm5vZGUsIG5ld1N0YXJ0Vm5vZGUsIGlzSW5pdGlhbFJlbmRlcik7XG4gICAgICBpbnNlcnRCZWZvcmUocGFyZW50RWxtLCBvbGRFbmRWbm9kZS4kZWxtJCwgb2xkU3RhcnRWbm9kZS4kZWxtJCk7XG4gICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTtcbiAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWR4SW5PbGQgPSAtMTtcbiAgICAgIGlmIChCVUlMRDIwLnZkb21LZXkpIHtcbiAgICAgICAgZm9yIChpMiA9IG9sZFN0YXJ0SWR4OyBpMiA8PSBvbGRFbmRJZHg7ICsraTIpIHtcbiAgICAgICAgICBpZiAob2xkQ2hbaTJdICYmIG9sZENoW2kyXS4ka2V5JCAhPT0gbnVsbCAmJiBvbGRDaFtpMl0uJGtleSQgPT09IG5ld1N0YXJ0Vm5vZGUuJGtleSQpIHtcbiAgICAgICAgICAgIGlkeEluT2xkID0gaTI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChCVUlMRDIwLnZkb21LZXkgJiYgaWR4SW5PbGQgPj0gMCkge1xuICAgICAgICBlbG1Ub01vdmUgPSBvbGRDaFtpZHhJbk9sZF07XG4gICAgICAgIGlmIChlbG1Ub01vdmUuJHRhZyQgIT09IG5ld1N0YXJ0Vm5vZGUuJHRhZyQpIHtcbiAgICAgICAgICBub2RlID0gY3JlYXRlRWxtKG9sZENoICYmIG9sZENoW25ld1N0YXJ0SWR4XSwgbmV3Vk5vZGUyLCBpZHhJbk9sZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGF0Y2goZWxtVG9Nb3ZlLCBuZXdTdGFydFZub2RlLCBpc0luaXRpYWxSZW5kZXIpO1xuICAgICAgICAgIG9sZENoW2lkeEluT2xkXSA9IHZvaWQgMDtcbiAgICAgICAgICBub2RlID0gZWxtVG9Nb3ZlLiRlbG0kO1xuICAgICAgICB9XG4gICAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGUgPSBjcmVhdGVFbG0ob2xkQ2ggJiYgb2xkQ2hbbmV3U3RhcnRJZHhdLCBuZXdWTm9kZTIsIG5ld1N0YXJ0SWR4KTtcbiAgICAgICAgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWysrbmV3U3RhcnRJZHhdO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgaWYgKEJVSUxEMjAuc2xvdFJlbG9jYXRpb24pIHtcbiAgICAgICAgICBpbnNlcnRCZWZvcmUoXG4gICAgICAgICAgICByZWZlcmVuY2VOb2RlKG9sZFN0YXJ0Vm5vZGUuJGVsbSQpLnBhcmVudE5vZGUsXG4gICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgcmVmZXJlbmNlTm9kZShvbGRTdGFydFZub2RlLiRlbG0kKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5zZXJ0QmVmb3JlKG9sZFN0YXJ0Vm5vZGUuJGVsbSQucGFyZW50Tm9kZSwgbm9kZSwgb2xkU3RhcnRWbm9kZS4kZWxtJCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKG9sZFN0YXJ0SWR4ID4gb2xkRW5kSWR4KSB7XG4gICAgYWRkVm5vZGVzKFxuICAgICAgcGFyZW50RWxtLFxuICAgICAgbmV3Q2hbbmV3RW5kSWR4ICsgMV0gPT0gbnVsbCA/IG51bGwgOiBuZXdDaFtuZXdFbmRJZHggKyAxXS4kZWxtJCxcbiAgICAgIG5ld1ZOb2RlMixcbiAgICAgIG5ld0NoLFxuICAgICAgbmV3U3RhcnRJZHgsXG4gICAgICBuZXdFbmRJZHhcbiAgICApO1xuICB9IGVsc2UgaWYgKEJVSUxEMjAudXBkYXRhYmxlICYmIG5ld1N0YXJ0SWR4ID4gbmV3RW5kSWR4KSB7XG4gICAgcmVtb3ZlVm5vZGVzKG9sZENoLCBvbGRTdGFydElkeCwgb2xkRW5kSWR4KTtcbiAgfVxufTtcbnZhciBpc1NhbWVWbm9kZSA9IChsZWZ0Vk5vZGUsIHJpZ2h0Vk5vZGUsIGlzSW5pdGlhbFJlbmRlciA9IGZhbHNlKSA9PiB7XG4gIGlmIChsZWZ0Vk5vZGUuJHRhZyQgPT09IHJpZ2h0Vk5vZGUuJHRhZyQpIHtcbiAgICBpZiAoQlVJTEQyMC5zbG90UmVsb2NhdGlvbiAmJiBsZWZ0Vk5vZGUuJHRhZyQgPT09IFwic2xvdFwiKSB7XG4gICAgICByZXR1cm4gbGVmdFZOb2RlLiRuYW1lJCA9PT0gcmlnaHRWTm9kZS4kbmFtZSQ7XG4gICAgfVxuICAgIGlmIChCVUlMRDIwLnZkb21LZXkgJiYgIWlzSW5pdGlhbFJlbmRlcikge1xuICAgICAgcmV0dXJuIGxlZnRWTm9kZS4ka2V5JCA9PT0gcmlnaHRWTm9kZS4ka2V5JDtcbiAgICB9XG4gICAgaWYgKGlzSW5pdGlhbFJlbmRlciAmJiAhbGVmdFZOb2RlLiRrZXkkICYmIHJpZ2h0Vk5vZGUuJGtleSQpIHtcbiAgICAgIGxlZnRWTm9kZS4ka2V5JCA9IHJpZ2h0Vk5vZGUuJGtleSQ7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG52YXIgcmVmZXJlbmNlTm9kZSA9IChub2RlKSA9PiBub2RlICYmIG5vZGVbXCJzLW9sXCJdIHx8IG5vZGU7XG52YXIgcGF0Y2ggPSAob2xkVk5vZGUsIG5ld1ZOb2RlMiwgaXNJbml0aWFsUmVuZGVyID0gZmFsc2UpID0+IHtcbiAgY29uc3QgZWxtID0gbmV3Vk5vZGUyLiRlbG0kID0gb2xkVk5vZGUuJGVsbSQ7XG4gIGNvbnN0IG9sZENoaWxkcmVuID0gb2xkVk5vZGUuJGNoaWxkcmVuJDtcbiAgY29uc3QgbmV3Q2hpbGRyZW4gPSBuZXdWTm9kZTIuJGNoaWxkcmVuJDtcbiAgY29uc3QgdGFnID0gbmV3Vk5vZGUyLiR0YWckO1xuICBjb25zdCB0ZXh0ID0gbmV3Vk5vZGUyLiR0ZXh0JDtcbiAgbGV0IGRlZmF1bHRIb2xkZXI7XG4gIGlmICghQlVJTEQyMC52ZG9tVGV4dCB8fCB0ZXh0ID09PSBudWxsKSB7XG4gICAgaWYgKEJVSUxEMjAuc3ZnKSB7XG4gICAgICBpc1N2Z01vZGUgPSB0YWcgPT09IFwic3ZnXCIgPyB0cnVlIDogdGFnID09PSBcImZvcmVpZ25PYmplY3RcIiA/IGZhbHNlIDogaXNTdmdNb2RlO1xuICAgIH1cbiAgICBpZiAoQlVJTEQyMC52ZG9tQXR0cmlidXRlIHx8IEJVSUxEMjAucmVmbGVjdCkge1xuICAgICAgaWYgKEJVSUxEMjAuc2xvdCAmJiB0YWcgPT09IFwic2xvdFwiICYmICF1c2VOYXRpdmVTaGFkb3dEb20pIHtcbiAgICAgICAgaWYgKEJVSUxEMjAuZXhwZXJpbWVudGFsU2xvdEZpeGVzICYmIG9sZFZOb2RlLiRuYW1lJCAhPT0gbmV3Vk5vZGUyLiRuYW1lJCkge1xuICAgICAgICAgIG5ld1ZOb2RlMi4kZWxtJFtcInMtc25cIl0gPSBuZXdWTm9kZTIuJG5hbWUkIHx8IFwiXCI7XG4gICAgICAgICAgcmVsb2NhdGVUb0hvc3RSb290KG5ld1ZOb2RlMi4kZWxtJC5wYXJlbnRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdXBkYXRlRWxlbWVudChvbGRWTm9kZSwgbmV3Vk5vZGUyLCBpc1N2Z01vZGUsIGlzSW5pdGlhbFJlbmRlcik7XG4gICAgfVxuICAgIGlmIChCVUlMRDIwLnVwZGF0YWJsZSAmJiBvbGRDaGlsZHJlbiAhPT0gbnVsbCAmJiBuZXdDaGlsZHJlbiAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlQ2hpbGRyZW4oZWxtLCBvbGRDaGlsZHJlbiwgbmV3Vk5vZGUyLCBuZXdDaGlsZHJlbiwgaXNJbml0aWFsUmVuZGVyKTtcbiAgICB9IGVsc2UgaWYgKG5ld0NoaWxkcmVuICE9PSBudWxsKSB7XG4gICAgICBpZiAoQlVJTEQyMC51cGRhdGFibGUgJiYgQlVJTEQyMC52ZG9tVGV4dCAmJiBvbGRWTm9kZS4kdGV4dCQgIT09IG51bGwpIHtcbiAgICAgICAgZWxtLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgIH1cbiAgICAgIGFkZFZub2RlcyhlbG0sIG51bGwsIG5ld1ZOb2RlMiwgbmV3Q2hpbGRyZW4sIDAsIG5ld0NoaWxkcmVuLmxlbmd0aCAtIDEpO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAvLyBkb24ndCBkbyB0aGlzIG9uIGluaXRpYWwgcmVuZGVyIGFzIGl0IGNhbiBjYXVzZSBub24taHlkcmF0ZWQgY29udGVudCB0byBiZSByZW1vdmVkXG4gICAgICAhaXNJbml0aWFsUmVuZGVyICYmIEJVSUxEMjAudXBkYXRhYmxlICYmIG9sZENoaWxkcmVuICE9PSBudWxsXG4gICAgKSB7XG4gICAgICByZW1vdmVWbm9kZXMob2xkQ2hpbGRyZW4sIDAsIG9sZENoaWxkcmVuLmxlbmd0aCAtIDEpO1xuICAgIH0gZWxzZSBpZiAoQlVJTEQyMC5oeWRyYXRlQ2xpZW50U2lkZSAmJiBpc0luaXRpYWxSZW5kZXIgJiYgQlVJTEQyMC51cGRhdGFibGUgJiYgb2xkQ2hpbGRyZW4gIT09IG51bGwgJiYgbmV3Q2hpbGRyZW4gPT09IG51bGwpIHtcbiAgICAgIG5ld1ZOb2RlMi4kY2hpbGRyZW4kID0gb2xkQ2hpbGRyZW47XG4gICAgfVxuICAgIGlmIChCVUlMRDIwLnN2ZyAmJiBpc1N2Z01vZGUgJiYgdGFnID09PSBcInN2Z1wiKSB7XG4gICAgICBpc1N2Z01vZGUgPSBmYWxzZTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoQlVJTEQyMC52ZG9tVGV4dCAmJiBCVUlMRDIwLnNsb3RSZWxvY2F0aW9uICYmIChkZWZhdWx0SG9sZGVyID0gZWxtW1wicy1jclwiXSkpIHtcbiAgICBkZWZhdWx0SG9sZGVyLnBhcmVudE5vZGUudGV4dENvbnRlbnQgPSB0ZXh0O1xuICB9IGVsc2UgaWYgKEJVSUxEMjAudmRvbVRleHQgJiYgb2xkVk5vZGUuJHRleHQkICE9PSB0ZXh0KSB7XG4gICAgZWxtLmRhdGEgPSB0ZXh0O1xuICB9XG59O1xudmFyIHJlbG9jYXRlTm9kZXMgPSBbXTtcbnZhciBtYXJrU2xvdENvbnRlbnRGb3JSZWxvY2F0aW9uID0gKGVsbSkgPT4ge1xuICBsZXQgbm9kZTtcbiAgbGV0IGhvc3RDb250ZW50Tm9kZXM7XG4gIGxldCBqO1xuICBjb25zdCBjaGlsZHJlbiA9IGVsbS5fX2NoaWxkTm9kZXMgfHwgZWxtLmNoaWxkTm9kZXM7XG4gIGZvciAoY29uc3QgY2hpbGROb2RlIG9mIGNoaWxkcmVuKSB7XG4gICAgaWYgKGNoaWxkTm9kZVtcInMtc3JcIl0gJiYgKG5vZGUgPSBjaGlsZE5vZGVbXCJzLWNyXCJdKSAmJiBub2RlLnBhcmVudE5vZGUpIHtcbiAgICAgIGhvc3RDb250ZW50Tm9kZXMgPSBub2RlLnBhcmVudE5vZGUuX19jaGlsZE5vZGVzIHx8IG5vZGUucGFyZW50Tm9kZS5jaGlsZE5vZGVzO1xuICAgICAgY29uc3Qgc2xvdE5hbWUgPSBjaGlsZE5vZGVbXCJzLXNuXCJdO1xuICAgICAgZm9yIChqID0gaG9zdENvbnRlbnROb2Rlcy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICBub2RlID0gaG9zdENvbnRlbnROb2Rlc1tqXTtcbiAgICAgICAgaWYgKCFub2RlW1wicy1jblwiXSAmJiAhbm9kZVtcInMtbnJcIl0gJiYgbm9kZVtcInMtaG5cIl0gIT09IGNoaWxkTm9kZVtcInMtaG5cIl0gJiYgKCFCVUlMRDIwLmV4cGVyaW1lbnRhbFNsb3RGaXhlcyB8fCAhbm9kZVtcInMtc2hcIl0gfHwgbm9kZVtcInMtc2hcIl0gIT09IGNoaWxkTm9kZVtcInMtaG5cIl0pKSB7XG4gICAgICAgICAgaWYgKGlzTm9kZUxvY2F0ZWRJblNsb3Qobm9kZSwgc2xvdE5hbWUpKSB7XG4gICAgICAgICAgICBsZXQgcmVsb2NhdGVOb2RlRGF0YSA9IHJlbG9jYXRlTm9kZXMuZmluZCgocikgPT4gci4kbm9kZVRvUmVsb2NhdGUkID09PSBub2RlKTtcbiAgICAgICAgICAgIGNoZWNrU2xvdEZhbGxiYWNrVmlzaWJpbGl0eSA9IHRydWU7XG4gICAgICAgICAgICBub2RlW1wicy1zblwiXSA9IG5vZGVbXCJzLXNuXCJdIHx8IHNsb3ROYW1lO1xuICAgICAgICAgICAgaWYgKHJlbG9jYXRlTm9kZURhdGEpIHtcbiAgICAgICAgICAgICAgcmVsb2NhdGVOb2RlRGF0YS4kbm9kZVRvUmVsb2NhdGUkW1wicy1zaFwiXSA9IGNoaWxkTm9kZVtcInMtaG5cIl07XG4gICAgICAgICAgICAgIHJlbG9jYXRlTm9kZURhdGEuJHNsb3RSZWZOb2RlJCA9IGNoaWxkTm9kZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG5vZGVbXCJzLXNoXCJdID0gY2hpbGROb2RlW1wicy1oblwiXTtcbiAgICAgICAgICAgICAgcmVsb2NhdGVOb2Rlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAkc2xvdFJlZk5vZGUkOiBjaGlsZE5vZGUsXG4gICAgICAgICAgICAgICAgJG5vZGVUb1JlbG9jYXRlJDogbm9kZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub2RlW1wicy1zclwiXSkge1xuICAgICAgICAgICAgICByZWxvY2F0ZU5vZGVzLm1hcCgocmVsb2NhdGVOb2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTm9kZUxvY2F0ZWRJblNsb3QocmVsb2NhdGVOb2RlLiRub2RlVG9SZWxvY2F0ZSQsIG5vZGVbXCJzLXNuXCJdKSkge1xuICAgICAgICAgICAgICAgICAgcmVsb2NhdGVOb2RlRGF0YSA9IHJlbG9jYXRlTm9kZXMuZmluZCgocikgPT4gci4kbm9kZVRvUmVsb2NhdGUkID09PSBub2RlKTtcbiAgICAgICAgICAgICAgICAgIGlmIChyZWxvY2F0ZU5vZGVEYXRhICYmICFyZWxvY2F0ZU5vZGUuJHNsb3RSZWZOb2RlJCkge1xuICAgICAgICAgICAgICAgICAgICByZWxvY2F0ZU5vZGUuJHNsb3RSZWZOb2RlJCA9IHJlbG9jYXRlTm9kZURhdGEuJHNsb3RSZWZOb2RlJDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoIXJlbG9jYXRlTm9kZXMuc29tZSgocikgPT4gci4kbm9kZVRvUmVsb2NhdGUkID09PSBub2RlKSkge1xuICAgICAgICAgICAgcmVsb2NhdGVOb2Rlcy5wdXNoKHtcbiAgICAgICAgICAgICAgJG5vZGVUb1JlbG9jYXRlJDogbm9kZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjaGlsZE5vZGUubm9kZVR5cGUgPT09IDEgLyogRWxlbWVudE5vZGUgKi8pIHtcbiAgICAgIG1hcmtTbG90Q29udGVudEZvclJlbG9jYXRpb24oY2hpbGROb2RlKTtcbiAgICB9XG4gIH1cbn07XG52YXIgbnVsbGlmeVZOb2RlUmVmcyA9ICh2Tm9kZSkgPT4ge1xuICBpZiAoQlVJTEQyMC52ZG9tUmVmKSB7XG4gICAgdk5vZGUuJGF0dHJzJCAmJiB2Tm9kZS4kYXR0cnMkLnJlZiAmJiB2Tm9kZS4kYXR0cnMkLnJlZihudWxsKTtcbiAgICB2Tm9kZS4kY2hpbGRyZW4kICYmIHZOb2RlLiRjaGlsZHJlbiQubWFwKG51bGxpZnlWTm9kZVJlZnMpO1xuICB9XG59O1xudmFyIGluc2VydEJlZm9yZSA9IChwYXJlbnQsIG5ld05vZGUsIHJlZmVyZW5jZSkgPT4ge1xuICBpZiAoQlVJTEQyMC5zY29wZWQgJiYgdHlwZW9mIG5ld05vZGVbXCJzLXNuXCJdID09PSBcInN0cmluZ1wiICYmICEhbmV3Tm9kZVtcInMtc3JcIl0gJiYgISFuZXdOb2RlW1wicy1jclwiXSkge1xuICAgIGFkZFJlbW92ZVNsb3RTY29wZWRDbGFzcyhuZXdOb2RlW1wicy1jclwiXSwgbmV3Tm9kZSwgcGFyZW50LCBuZXdOb2RlLnBhcmVudEVsZW1lbnQpO1xuICB9IGVsc2UgaWYgKEJVSUxEMjAuZXhwZXJpbWVudGFsU2xvdEZpeGVzICYmIHR5cGVvZiBuZXdOb2RlW1wicy1zblwiXSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGlmIChwYXJlbnQuZ2V0Um9vdE5vZGUoKS5ub2RlVHlwZSAhPT0gMTEgLyogRE9DVU1FTlRfRlJBR01FTlRfTk9ERSAqLykge1xuICAgICAgcGF0Y2hQYXJlbnROb2RlKG5ld05vZGUpO1xuICAgIH1cbiAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5ld05vZGUsIHJlZmVyZW5jZSk7XG4gICAgY29uc3QgeyBzbG90Tm9kZSB9ID0gZmluZFNsb3RGcm9tU2xvdHRlZE5vZGUobmV3Tm9kZSk7XG4gICAgaWYgKHNsb3ROb2RlKSBkaXNwYXRjaFNsb3RDaGFuZ2VFdmVudChzbG90Tm9kZSk7XG4gICAgcmV0dXJuIG5ld05vZGU7XG4gIH1cbiAgaWYgKEJVSUxEMjAuZXhwZXJpbWVudGFsU2xvdEZpeGVzICYmIHBhcmVudC5fX2luc2VydEJlZm9yZSkge1xuICAgIHJldHVybiBwYXJlbnQuX19pbnNlcnRCZWZvcmUobmV3Tm9kZSwgcmVmZXJlbmNlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcGFyZW50ID09IG51bGwgPyB2b2lkIDAgOiBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5ld05vZGUsIHJlZmVyZW5jZSk7XG4gIH1cbn07XG5mdW5jdGlvbiBhZGRSZW1vdmVTbG90U2NvcGVkQ2xhc3MocmVmZXJlbmNlLCBzbG90Tm9kZSwgbmV3UGFyZW50LCBvbGRQYXJlbnQpIHtcbiAgdmFyIF9hLCBfYjtcbiAgbGV0IHNjb3BlSWQyO1xuICBpZiAocmVmZXJlbmNlICYmIHR5cGVvZiBzbG90Tm9kZVtcInMtc25cIl0gPT09IFwic3RyaW5nXCIgJiYgISFzbG90Tm9kZVtcInMtc3JcIl0gJiYgcmVmZXJlbmNlLnBhcmVudE5vZGUgJiYgcmVmZXJlbmNlLnBhcmVudE5vZGVbXCJzLXNjXCJdICYmIChzY29wZUlkMiA9IHNsb3ROb2RlW1wicy1zaVwiXSB8fCByZWZlcmVuY2UucGFyZW50Tm9kZVtcInMtc2NcIl0pKSB7XG4gICAgY29uc3Qgc2NvcGVOYW1lID0gc2xvdE5vZGVbXCJzLXNuXCJdO1xuICAgIGNvbnN0IGhvc3ROYW1lID0gc2xvdE5vZGVbXCJzLWhuXCJdO1xuICAgIChfYSA9IG5ld1BhcmVudC5jbGFzc0xpc3QpID09IG51bGwgPyB2b2lkIDAgOiBfYS5hZGQoc2NvcGVJZDIgKyBcIi1zXCIpO1xuICAgIGlmIChvbGRQYXJlbnQgJiYgKChfYiA9IG9sZFBhcmVudC5jbGFzc0xpc3QpID09IG51bGwgPyB2b2lkIDAgOiBfYi5jb250YWlucyhzY29wZUlkMiArIFwiLXNcIikpKSB7XG4gICAgICBsZXQgY2hpbGQgPSAob2xkUGFyZW50Ll9fY2hpbGROb2RlcyB8fCBvbGRQYXJlbnQuY2hpbGROb2RlcylbMF07XG4gICAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICAgIHdoaWxlIChjaGlsZCkge1xuICAgICAgICBpZiAoY2hpbGRbXCJzLXNuXCJdICE9PSBzY29wZU5hbWUgJiYgY2hpbGRbXCJzLWhuXCJdID09PSBob3N0TmFtZSAmJiAhIWNoaWxkW1wicy1zclwiXSkge1xuICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgICAgaWYgKCFmb3VuZCkgb2xkUGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoc2NvcGVJZDIgKyBcIi1zXCIpO1xuICAgIH1cbiAgfVxufVxudmFyIHJlbmRlclZkb20gPSAoaG9zdFJlZiwgcmVuZGVyRm5SZXN1bHRzLCBpc0luaXRpYWxMb2FkID0gZmFsc2UpID0+IHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgY29uc3QgaG9zdEVsbSA9IGhvc3RSZWYuJGhvc3RFbGVtZW50JDtcbiAgY29uc3QgY21wTWV0YSA9IGhvc3RSZWYuJGNtcE1ldGEkO1xuICBjb25zdCBvbGRWTm9kZSA9IGhvc3RSZWYuJHZub2RlJCB8fCBuZXdWTm9kZShudWxsLCBudWxsKTtcbiAgY29uc3QgaXNIb3N0RWxlbWVudCA9IGlzSG9zdChyZW5kZXJGblJlc3VsdHMpO1xuICBjb25zdCByb290Vm5vZGUgPSBpc0hvc3RFbGVtZW50ID8gcmVuZGVyRm5SZXN1bHRzIDogaChudWxsLCBudWxsLCByZW5kZXJGblJlc3VsdHMpO1xuICBob3N0VGFnTmFtZSA9IGhvc3RFbG0udGFnTmFtZTtcbiAgaWYgKEJVSUxEMjAuaXNEZXYgJiYgQXJyYXkuaXNBcnJheShyZW5kZXJGblJlc3VsdHMpICYmIHJlbmRlckZuUmVzdWx0cy5zb21lKGlzSG9zdCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSA8SG9zdD4gbXVzdCBiZSB0aGUgc2luZ2xlIHJvb3QgY29tcG9uZW50LlxuTG9va3MgbGlrZSB0aGUgcmVuZGVyKCkgZnVuY3Rpb24gb2YgXCIke2hvc3RUYWdOYW1lLnRvTG93ZXJDYXNlKCl9XCIgaXMgcmV0dXJuaW5nIGFuIGFycmF5IHRoYXQgY29udGFpbnMgdGhlIDxIb3N0Pi5cblxuVGhlIHJlbmRlcigpIGZ1bmN0aW9uIHNob3VsZCBsb29rIGxpa2UgdGhpcyBpbnN0ZWFkOlxuXG5yZW5kZXIoKSB7XG4gIC8vIERvIG5vdCByZXR1cm4gYW4gYXJyYXlcbiAgcmV0dXJuIChcbiAgICA8SG9zdD57Y29udGVudH08L0hvc3Q+XG4gICk7XG59XG4gIGApO1xuICB9XG4gIGlmIChCVUlMRDIwLnJlZmxlY3QgJiYgY21wTWV0YS4kYXR0cnNUb1JlZmxlY3QkKSB7XG4gICAgcm9vdFZub2RlLiRhdHRycyQgPSByb290Vm5vZGUuJGF0dHJzJCB8fCB7fTtcbiAgICBjbXBNZXRhLiRhdHRyc1RvUmVmbGVjdCQuZm9yRWFjaCgoW3Byb3BOYW1lLCBhdHRyaWJ1dGVdKSA9PiB7XG4gICAgICBpZiAoQlVJTEQyMC5zZXJpYWxpemVyICYmIGhvc3RSZWYuJHNlcmlhbGl6ZXJWYWx1ZXMkLmhhcyhwcm9wTmFtZSkpIHtcbiAgICAgICAgcm9vdFZub2RlLiRhdHRycyRbYXR0cmlidXRlXSA9IGhvc3RSZWYuJHNlcmlhbGl6ZXJWYWx1ZXMkLmdldChwcm9wTmFtZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb290Vm5vZGUuJGF0dHJzJFthdHRyaWJ1dGVdID0gaG9zdEVsbVtwcm9wTmFtZV07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgaWYgKGlzSW5pdGlhbExvYWQgJiYgcm9vdFZub2RlLiRhdHRycyQpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhyb290Vm5vZGUuJGF0dHJzJCkpIHtcbiAgICAgIGlmIChob3N0RWxtLmhhc0F0dHJpYnV0ZShrZXkpICYmICFbXCJrZXlcIiwgXCJyZWZcIiwgXCJzdHlsZVwiLCBcImNsYXNzXCJdLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgcm9vdFZub2RlLiRhdHRycyRba2V5XSA9IGhvc3RFbG1ba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcm9vdFZub2RlLiR0YWckID0gbnVsbDtcbiAgcm9vdFZub2RlLiRmbGFncyQgfD0gNCAvKiBpc0hvc3QgKi87XG4gIGhvc3RSZWYuJHZub2RlJCA9IHJvb3RWbm9kZTtcbiAgcm9vdFZub2RlLiRlbG0kID0gb2xkVk5vZGUuJGVsbSQgPSBCVUlMRDIwLnNoYWRvd0RvbSA/IGhvc3RFbG0uc2hhZG93Um9vdCB8fCBob3N0RWxtIDogaG9zdEVsbTtcbiAgaWYgKEJVSUxEMjAuc2NvcGVkIHx8IEJVSUxEMjAuc2hhZG93RG9tKSB7XG4gICAgc2NvcGVJZCA9IGhvc3RFbG1bXCJzLXNjXCJdO1xuICB9XG4gIHVzZU5hdGl2ZVNoYWRvd0RvbSA9IHN1cHBvcnRzU2hhZG93ICYmICEhKGNtcE1ldGEuJGZsYWdzJCAmIDEgLyogc2hhZG93RG9tRW5jYXBzdWxhdGlvbiAqLykgJiYgIShjbXBNZXRhLiRmbGFncyQgJiAxMjggLyogc2hhZG93TmVlZHNTY29wZWRDc3MgKi8pO1xuICBpZiAoQlVJTEQyMC5zbG90UmVsb2NhdGlvbikge1xuICAgIGNvbnRlbnRSZWYgPSBob3N0RWxtW1wicy1jclwiXTtcbiAgICBjaGVja1Nsb3RGYWxsYmFja1Zpc2liaWxpdHkgPSBmYWxzZTtcbiAgfVxuICBwYXRjaChvbGRWTm9kZSwgcm9vdFZub2RlLCBpc0luaXRpYWxMb2FkKTtcbiAgaWYgKEJVSUxEMjAuc2xvdFJlbG9jYXRpb24pIHtcbiAgICBwbHQuJGZsYWdzJCB8PSAxIC8qIGlzVG1wRGlzY29ubmVjdGVkICovO1xuICAgIGlmIChjaGVja1Nsb3RSZWxvY2F0ZSkge1xuICAgICAgbWFya1Nsb3RDb250ZW50Rm9yUmVsb2NhdGlvbihyb290Vm5vZGUuJGVsbSQpO1xuICAgICAgZm9yIChjb25zdCByZWxvY2F0ZURhdGEgb2YgcmVsb2NhdGVOb2Rlcykge1xuICAgICAgICBjb25zdCBub2RlVG9SZWxvY2F0ZSA9IHJlbG9jYXRlRGF0YS4kbm9kZVRvUmVsb2NhdGUkO1xuICAgICAgICBpZiAoIW5vZGVUb1JlbG9jYXRlW1wicy1vbFwiXSAmJiB3aW4uZG9jdW1lbnQpIHtcbiAgICAgICAgICBjb25zdCBvcmdMb2NhdGlvbk5vZGUgPSBCVUlMRDIwLmlzRGVidWcgfHwgQlVJTEQyMC5oeWRyYXRlU2VydmVyU2lkZSA/IG9yaWdpbmFsTG9jYXRpb25EZWJ1Z05vZGUobm9kZVRvUmVsb2NhdGUpIDogd2luLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO1xuICAgICAgICAgIG9yZ0xvY2F0aW9uTm9kZVtcInMtbnJcIl0gPSBub2RlVG9SZWxvY2F0ZTtcbiAgICAgICAgICBpbnNlcnRCZWZvcmUobm9kZVRvUmVsb2NhdGUucGFyZW50Tm9kZSwgbm9kZVRvUmVsb2NhdGVbXCJzLW9sXCJdID0gb3JnTG9jYXRpb25Ob2RlLCBub2RlVG9SZWxvY2F0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgcmVsb2NhdGVEYXRhIG9mIHJlbG9jYXRlTm9kZXMpIHtcbiAgICAgICAgY29uc3Qgbm9kZVRvUmVsb2NhdGUgPSByZWxvY2F0ZURhdGEuJG5vZGVUb1JlbG9jYXRlJDtcbiAgICAgICAgY29uc3Qgc2xvdFJlZk5vZGUgPSByZWxvY2F0ZURhdGEuJHNsb3RSZWZOb2RlJDtcbiAgICAgICAgaWYgKHNsb3RSZWZOb2RlKSB7XG4gICAgICAgICAgY29uc3QgcGFyZW50Tm9kZVJlZiA9IHNsb3RSZWZOb2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgbGV0IGluc2VydEJlZm9yZU5vZGUgPSBzbG90UmVmTm9kZS5uZXh0U2libGluZztcbiAgICAgICAgICBpZiAoIUJVSUxEMjAuaHlkcmF0ZVNlcnZlclNpZGUgJiYgKCFCVUlMRDIwLmV4cGVyaW1lbnRhbFNsb3RGaXhlcyB8fCBpbnNlcnRCZWZvcmVOb2RlICYmIGluc2VydEJlZm9yZU5vZGUubm9kZVR5cGUgPT09IDEgLyogRWxlbWVudE5vZGUgKi8pKSB7XG4gICAgICAgICAgICBsZXQgb3JnTG9jYXRpb25Ob2RlID0gKF9hID0gbm9kZVRvUmVsb2NhdGVbXCJzLW9sXCJdKSA9PSBudWxsID8gdm9pZCAwIDogX2EucHJldmlvdXNTaWJsaW5nO1xuICAgICAgICAgICAgd2hpbGUgKG9yZ0xvY2F0aW9uTm9kZSkge1xuICAgICAgICAgICAgICBsZXQgcmVmTm9kZSA9IChfYiA9IG9yZ0xvY2F0aW9uTm9kZVtcInMtbnJcIl0pICE9IG51bGwgPyBfYiA6IG51bGw7XG4gICAgICAgICAgICAgIGlmIChyZWZOb2RlICYmIHJlZk5vZGVbXCJzLXNuXCJdID09PSBub2RlVG9SZWxvY2F0ZVtcInMtc25cIl0gJiYgcGFyZW50Tm9kZVJlZiA9PT0gKHJlZk5vZGUuX19wYXJlbnROb2RlIHx8IHJlZk5vZGUucGFyZW50Tm9kZSkpIHtcbiAgICAgICAgICAgICAgICByZWZOb2RlID0gcmVmTm9kZS5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVmTm9kZSA9PT0gbm9kZVRvUmVsb2NhdGUgfHwgKHJlZk5vZGUgPT0gbnVsbCA/IHZvaWQgMCA6IHJlZk5vZGVbXCJzLXNyXCJdKSkge1xuICAgICAgICAgICAgICAgICAgcmVmTm9kZSA9IHJlZk5vZGUgPT0gbnVsbCA/IHZvaWQgMCA6IHJlZk5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghcmVmTm9kZSB8fCAhcmVmTm9kZVtcInMtbnJcIl0pIHtcbiAgICAgICAgICAgICAgICAgIGluc2VydEJlZm9yZU5vZGUgPSByZWZOb2RlO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG9yZ0xvY2F0aW9uTm9kZSA9IG9yZ0xvY2F0aW9uTm9kZS5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGVUb1JlbG9jYXRlLl9fcGFyZW50Tm9kZSB8fCBub2RlVG9SZWxvY2F0ZS5wYXJlbnROb2RlO1xuICAgICAgICAgIGNvbnN0IG5leHRTaWJsaW5nID0gbm9kZVRvUmVsb2NhdGUuX19uZXh0U2libGluZyB8fCBub2RlVG9SZWxvY2F0ZS5uZXh0U2libGluZztcbiAgICAgICAgICBpZiAoIWluc2VydEJlZm9yZU5vZGUgJiYgcGFyZW50Tm9kZVJlZiAhPT0gcGFyZW50IHx8IG5leHRTaWJsaW5nICE9PSBpbnNlcnRCZWZvcmVOb2RlKSB7XG4gICAgICAgICAgICBpZiAobm9kZVRvUmVsb2NhdGUgIT09IGluc2VydEJlZm9yZU5vZGUpIHtcbiAgICAgICAgICAgICAgaWYgKCFCVUlMRDIwLmV4cGVyaW1lbnRhbFNsb3RGaXhlcyAmJiAhbm9kZVRvUmVsb2NhdGVbXCJzLWhuXCJdICYmIG5vZGVUb1JlbG9jYXRlW1wicy1vbFwiXSkge1xuICAgICAgICAgICAgICAgIG5vZGVUb1JlbG9jYXRlW1wicy1oblwiXSA9IG5vZGVUb1JlbG9jYXRlW1wicy1vbFwiXS5wYXJlbnROb2RlLm5vZGVOYW1lO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGluc2VydEJlZm9yZShwYXJlbnROb2RlUmVmLCBub2RlVG9SZWxvY2F0ZSwgaW5zZXJ0QmVmb3JlTm9kZSk7XG4gICAgICAgICAgICAgIGlmIChub2RlVG9SZWxvY2F0ZS5ub2RlVHlwZSA9PT0gMSAvKiBFbGVtZW50Tm9kZSAqLyAmJiBub2RlVG9SZWxvY2F0ZS50YWdOYW1lICE9PSBcIlNMT1QtRkJcIikge1xuICAgICAgICAgICAgICAgIG5vZGVUb1JlbG9jYXRlLmhpZGRlbiA9IChfYyA9IG5vZGVUb1JlbG9jYXRlW1wicy1paFwiXSkgIT0gbnVsbCA/IF9jIDogZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbm9kZVRvUmVsb2NhdGUgJiYgdHlwZW9mIHNsb3RSZWZOb2RlW1wicy1yZlwiXSA9PT0gXCJmdW5jdGlvblwiICYmIHNsb3RSZWZOb2RlW1wicy1yZlwiXShzbG90UmVmTm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG5vZGVUb1JlbG9jYXRlLm5vZGVUeXBlID09PSAxIC8qIEVsZW1lbnROb2RlICovKSB7XG4gICAgICAgICAgICBpZiAoaXNJbml0aWFsTG9hZCkge1xuICAgICAgICAgICAgICBub2RlVG9SZWxvY2F0ZVtcInMtaWhcIl0gPSAoX2QgPSBub2RlVG9SZWxvY2F0ZS5oaWRkZW4pICE9IG51bGwgPyBfZCA6IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZVRvUmVsb2NhdGUuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoZWNrU2xvdEZhbGxiYWNrVmlzaWJpbGl0eSkge1xuICAgICAgdXBkYXRlRmFsbGJhY2tTbG90VmlzaWJpbGl0eShyb290Vm5vZGUuJGVsbSQpO1xuICAgIH1cbiAgICBwbHQuJGZsYWdzJCAmPSB+MSAvKiBpc1RtcERpc2Nvbm5lY3RlZCAqLztcbiAgICByZWxvY2F0ZU5vZGVzLmxlbmd0aCA9IDA7XG4gIH1cbiAgaWYgKEJVSUxEMjAuZXhwZXJpbWVudGFsU2NvcGVkU2xvdENoYW5nZXMgJiYgY21wTWV0YS4kZmxhZ3MkICYgMiAvKiBzY29wZWRDc3NFbmNhcHN1bGF0aW9uICovKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSByb290Vm5vZGUuJGVsbSQuX19jaGlsZE5vZGVzIHx8IHJvb3RWbm9kZS4kZWxtJC5jaGlsZE5vZGVzO1xuICAgIGZvciAoY29uc3QgY2hpbGROb2RlIG9mIGNoaWxkcmVuKSB7XG4gICAgICBpZiAoY2hpbGROb2RlW1wicy1oblwiXSAhPT0gaG9zdFRhZ05hbWUgJiYgIWNoaWxkTm9kZVtcInMtc2hcIl0pIHtcbiAgICAgICAgaWYgKGlzSW5pdGlhbExvYWQgJiYgY2hpbGROb2RlW1wicy1paFwiXSA9PSBudWxsKSB7XG4gICAgICAgICAgY2hpbGROb2RlW1wicy1paFwiXSA9IChfZSA9IGNoaWxkTm9kZS5oaWRkZW4pICE9IG51bGwgPyBfZSA6IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkTm9kZS5oaWRkZW4gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb250ZW50UmVmID0gdm9pZCAwO1xufTtcbnZhciBzbG90UmVmZXJlbmNlRGVidWdOb2RlID0gKHNsb3RWTm9kZSkgPT4ge1xuICB2YXIgX2E7XG4gIHJldHVybiAoX2EgPSB3aW4uZG9jdW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jcmVhdGVDb21tZW50KFxuICAgIGA8c2xvdCR7c2xvdFZOb2RlLiRuYW1lJCA/ICcgbmFtZT1cIicgKyBzbG90Vk5vZGUuJG5hbWUkICsgJ1wiJyA6IFwiXCJ9PiAoaG9zdD0ke2hvc3RUYWdOYW1lLnRvTG93ZXJDYXNlKCl9KWBcbiAgKTtcbn07XG52YXIgb3JpZ2luYWxMb2NhdGlvbkRlYnVnTm9kZSA9IChub2RlVG9SZWxvY2F0ZSkgPT4ge1xuICB2YXIgX2E7XG4gIHJldHVybiAoX2EgPSB3aW4uZG9jdW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jcmVhdGVDb21tZW50KFxuICAgIGBvcmctbG9jYXRpb24gZm9yIGAgKyAobm9kZVRvUmVsb2NhdGUubG9jYWxOYW1lID8gYDwke25vZGVUb1JlbG9jYXRlLmxvY2FsTmFtZX0+IChob3N0PSR7bm9kZVRvUmVsb2NhdGVbXCJzLWhuXCJdfSlgIDogYFske25vZGVUb1JlbG9jYXRlLnRleHRDb250ZW50fV1gKVxuICApO1xufTtcblxuLy8gc3JjL3J1bnRpbWUvdXBkYXRlLWNvbXBvbmVudC50c1xudmFyIGF0dGFjaFRvQW5jZXN0b3IgPSAoaG9zdFJlZiwgYW5jZXN0b3JDb21wb25lbnQpID0+IHtcbiAgaWYgKEJVSUxEMjEuYXN5bmNMb2FkaW5nICYmIGFuY2VzdG9yQ29tcG9uZW50ICYmICFob3N0UmVmLiRvblJlbmRlclJlc29sdmUkICYmIGFuY2VzdG9yQ29tcG9uZW50W1wicy1wXCJdKSB7XG4gICAgY29uc3QgaW5kZXggPSBhbmNlc3RvckNvbXBvbmVudFtcInMtcFwiXS5wdXNoKFxuICAgICAgbmV3IFByb21pc2UoXG4gICAgICAgIChyKSA9PiBob3N0UmVmLiRvblJlbmRlclJlc29sdmUkID0gKCkgPT4ge1xuICAgICAgICAgIGFuY2VzdG9yQ29tcG9uZW50W1wicy1wXCJdLnNwbGljZShpbmRleCAtIDEsIDEpO1xuICAgICAgICAgIHIoKTtcbiAgICAgICAgfVxuICAgICAgKVxuICAgICk7XG4gIH1cbn07XG52YXIgc2NoZWR1bGVVcGRhdGUgPSAoaG9zdFJlZiwgaXNJbml0aWFsTG9hZCkgPT4ge1xuICBpZiAoQlVJTEQyMS50YXNrUXVldWUgJiYgQlVJTEQyMS51cGRhdGFibGUpIHtcbiAgICBob3N0UmVmLiRmbGFncyQgfD0gMTYgLyogaXNRdWV1ZWRGb3JVcGRhdGUgKi87XG4gIH1cbiAgaWYgKEJVSUxEMjEuYXN5bmNMb2FkaW5nICYmIGhvc3RSZWYuJGZsYWdzJCAmIDQgLyogaXNXYWl0aW5nRm9yQ2hpbGRyZW4gKi8pIHtcbiAgICBob3N0UmVmLiRmbGFncyQgfD0gNTEyIC8qIG5lZWRzUmVyZW5kZXIgKi87XG4gICAgcmV0dXJuO1xuICB9XG4gIGF0dGFjaFRvQW5jZXN0b3IoaG9zdFJlZiwgaG9zdFJlZi4kYW5jZXN0b3JDb21wb25lbnQkKTtcbiAgY29uc3QgZGlzcGF0Y2ggPSAoKSA9PiBkaXNwYXRjaEhvb2tzKGhvc3RSZWYsIGlzSW5pdGlhbExvYWQpO1xuICBpZiAoaXNJbml0aWFsTG9hZCkge1xuICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgIGRpc3BhdGNoKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJldHVybiBCVUlMRDIxLnRhc2tRdWV1ZSA/IHdyaXRlVGFzayhkaXNwYXRjaCkgOiBkaXNwYXRjaCgpO1xufTtcbnZhciBkaXNwYXRjaEhvb2tzID0gKGhvc3RSZWYsIGlzSW5pdGlhbExvYWQpID0+IHtcbiAgY29uc3QgZWxtID0gaG9zdFJlZi4kaG9zdEVsZW1lbnQkO1xuICBjb25zdCBlbmRTY2hlZHVsZSA9IGNyZWF0ZVRpbWUoXCJzY2hlZHVsZVVwZGF0ZVwiLCBob3N0UmVmLiRjbXBNZXRhJC4kdGFnTmFtZSQpO1xuICBjb25zdCBpbnN0YW5jZSA9IEJVSUxEMjEubGF6eUxvYWQgPyBob3N0UmVmLiRsYXp5SW5zdGFuY2UkIDogZWxtO1xuICBpZiAoIWluc3RhbmNlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYENhbid0IHJlbmRlciBjb21wb25lbnQgPCR7ZWxtLnRhZ05hbWUudG9Mb3dlckNhc2UoKX0gLz4gd2l0aCBpbnZhbGlkIFN0ZW5jaWwgcnVudGltZSEgTWFrZSBzdXJlIHRoaXMgaW1wb3J0ZWQgY29tcG9uZW50IGlzIGNvbXBpbGVkIHdpdGggYSBcXGBleHRlcm5hbFJ1bnRpbWU6IHRydWVcXGAgZmxhZy4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHBsZWFzZSByZWZlciB0byBodHRwczovL3N0ZW5jaWxqcy5jb20vZG9jcy9jdXN0b20tZWxlbWVudHMjZXh0ZXJuYWxydW50aW1lYFxuICAgICk7XG4gIH1cbiAgbGV0IG1heWJlUHJvbWlzZTtcbiAgaWYgKGlzSW5pdGlhbExvYWQpIHtcbiAgICBpZiAoQlVJTEQyMS5sYXp5TG9hZCkge1xuICAgICAgaWYgKEJVSUxEMjEuaG9zdExpc3RlbmVyKSB7XG4gICAgICAgIGhvc3RSZWYuJGZsYWdzJCB8PSAyNTYgLyogaXNMaXN0ZW5SZWFkeSAqLztcbiAgICAgICAgaWYgKGhvc3RSZWYuJHF1ZXVlZExpc3RlbmVycyQpIHtcbiAgICAgICAgICBob3N0UmVmLiRxdWV1ZWRMaXN0ZW5lcnMkLm1hcCgoW21ldGhvZE5hbWUsIGV2ZW50XSkgPT4gc2FmZUNhbGwoaW5zdGFuY2UsIG1ldGhvZE5hbWUsIGV2ZW50LCBlbG0pKTtcbiAgICAgICAgICBob3N0UmVmLiRxdWV1ZWRMaXN0ZW5lcnMkID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaG9zdFJlZi4kZmV0Y2hlZENiTGlzdCQubGVuZ3RoKSB7XG4gICAgICAgIGhvc3RSZWYuJGZldGNoZWRDYkxpc3QkLmZvckVhY2goKGNiKSA9PiBjYihlbG0pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZW1pdExpZmVjeWNsZUV2ZW50KGVsbSwgXCJjb21wb25lbnRXaWxsTG9hZFwiKTtcbiAgICBtYXliZVByb21pc2UgPSBzYWZlQ2FsbChpbnN0YW5jZSwgXCJjb21wb25lbnRXaWxsTG9hZFwiLCB2b2lkIDAsIGVsbSk7XG4gIH0gZWxzZSB7XG4gICAgZW1pdExpZmVjeWNsZUV2ZW50KGVsbSwgXCJjb21wb25lbnRXaWxsVXBkYXRlXCIpO1xuICAgIG1heWJlUHJvbWlzZSA9IHNhZmVDYWxsKGluc3RhbmNlLCBcImNvbXBvbmVudFdpbGxVcGRhdGVcIiwgdm9pZCAwLCBlbG0pO1xuICB9XG4gIGVtaXRMaWZlY3ljbGVFdmVudChlbG0sIFwiY29tcG9uZW50V2lsbFJlbmRlclwiKTtcbiAgbWF5YmVQcm9taXNlID0gZW5xdWV1ZShtYXliZVByb21pc2UsICgpID0+IHNhZmVDYWxsKGluc3RhbmNlLCBcImNvbXBvbmVudFdpbGxSZW5kZXJcIiwgdm9pZCAwLCBlbG0pKTtcbiAgZW5kU2NoZWR1bGUoKTtcbiAgcmV0dXJuIGVucXVldWUobWF5YmVQcm9taXNlLCAoKSA9PiB1cGRhdGVDb21wb25lbnQoaG9zdFJlZiwgaW5zdGFuY2UsIGlzSW5pdGlhbExvYWQpKTtcbn07XG52YXIgZW5xdWV1ZSA9IChtYXliZVByb21pc2UsIGZuKSA9PiBpc1Byb21pc2V5KG1heWJlUHJvbWlzZSkgPyBtYXliZVByb21pc2UudGhlbihmbikuY2F0Y2goKGVycjIpID0+IHtcbiAgY29uc29sZS5lcnJvcihlcnIyKTtcbiAgZm4oKTtcbn0pIDogZm4oKTtcbnZhciBpc1Byb21pc2V5ID0gKG1heWJlUHJvbWlzZSkgPT4gbWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSB8fCBtYXliZVByb21pc2UgJiYgbWF5YmVQcm9taXNlLnRoZW4gJiYgdHlwZW9mIG1heWJlUHJvbWlzZS50aGVuID09PSBcImZ1bmN0aW9uXCI7XG52YXIgdXBkYXRlQ29tcG9uZW50ID0gYXN5bmMgKGhvc3RSZWYsIGluc3RhbmNlLCBpc0luaXRpYWxMb2FkKSA9PiB7XG4gIHZhciBfYTtcbiAgY29uc3QgZWxtID0gaG9zdFJlZi4kaG9zdEVsZW1lbnQkO1xuICBjb25zdCBlbmRVcGRhdGUgPSBjcmVhdGVUaW1lKFwidXBkYXRlXCIsIGhvc3RSZWYuJGNtcE1ldGEkLiR0YWdOYW1lJCk7XG4gIGNvbnN0IHJjID0gZWxtW1wicy1yY1wiXTtcbiAgaWYgKEJVSUxEMjEuc3R5bGUgJiYgaXNJbml0aWFsTG9hZCkge1xuICAgIGF0dGFjaFN0eWxlcyhob3N0UmVmKTtcbiAgfVxuICBjb25zdCBlbmRSZW5kZXIgPSBjcmVhdGVUaW1lKFwicmVuZGVyXCIsIGhvc3RSZWYuJGNtcE1ldGEkLiR0YWdOYW1lJCk7XG4gIGlmIChCVUlMRDIxLmlzRGV2KSB7XG4gICAgaG9zdFJlZi4kZmxhZ3MkIHw9IDEwMjQgLyogZGV2T25SZW5kZXIgKi87XG4gIH1cbiAgaWYgKEJVSUxEMjEuaHlkcmF0ZVNlcnZlclNpZGUpIHtcbiAgICBhd2FpdCBjYWxsUmVuZGVyKGhvc3RSZWYsIGluc3RhbmNlLCBlbG0sIGlzSW5pdGlhbExvYWQpO1xuICB9IGVsc2Uge1xuICAgIGNhbGxSZW5kZXIoaG9zdFJlZiwgaW5zdGFuY2UsIGVsbSwgaXNJbml0aWFsTG9hZCk7XG4gIH1cbiAgaWYgKEJVSUxEMjEuaXNEZXYpIHtcbiAgICBob3N0UmVmLiRyZW5kZXJDb3VudCQgPSBob3N0UmVmLiRyZW5kZXJDb3VudCQgPT09IHZvaWQgMCA/IDEgOiBob3N0UmVmLiRyZW5kZXJDb3VudCQgKyAxO1xuICAgIGhvc3RSZWYuJGZsYWdzJCAmPSB+MTAyNCAvKiBkZXZPblJlbmRlciAqLztcbiAgfVxuICBpZiAoQlVJTEQyMS5oeWRyYXRlU2VydmVyU2lkZSkge1xuICAgIHRyeSB7XG4gICAgICBzZXJ2ZXJTaWRlQ29ubmVjdGVkKGVsbSk7XG4gICAgICBpZiAoaXNJbml0aWFsTG9hZCkge1xuICAgICAgICBpZiAoaG9zdFJlZi4kY21wTWV0YSQuJGZsYWdzJCAmIDEgLyogc2hhZG93RG9tRW5jYXBzdWxhdGlvbiAqLykge1xuICAgICAgICAgIGVsbVtcInMtZW5cIl0gPSBcIlwiO1xuICAgICAgICB9IGVsc2UgaWYgKGhvc3RSZWYuJGNtcE1ldGEkLiRmbGFncyQgJiAyIC8qIHNjb3BlZENzc0VuY2Fwc3VsYXRpb24gKi8pIHtcbiAgICAgICAgICBlbG1bXCJzLWVuXCJdID0gXCJjXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlRXJyb3IoZSwgZWxtKTtcbiAgICB9XG4gIH1cbiAgaWYgKEJVSUxEMjEuYXN5bmNMb2FkaW5nICYmIHJjKSB7XG4gICAgcmMubWFwKChjYikgPT4gY2IoKSk7XG4gICAgZWxtW1wicy1yY1wiXSA9IHZvaWQgMDtcbiAgfVxuICBlbmRSZW5kZXIoKTtcbiAgZW5kVXBkYXRlKCk7XG4gIGlmIChCVUlMRDIxLmFzeW5jTG9hZGluZykge1xuICAgIGNvbnN0IGNoaWxkcmVuUHJvbWlzZXMgPSAoX2EgPSBlbG1bXCJzLXBcIl0pICE9IG51bGwgPyBfYSA6IFtdO1xuICAgIGNvbnN0IHBvc3RVcGRhdGUgPSAoKSA9PiBwb3N0VXBkYXRlQ29tcG9uZW50KGhvc3RSZWYpO1xuICAgIGlmIChjaGlsZHJlblByb21pc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcG9zdFVwZGF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBQcm9taXNlLmFsbChjaGlsZHJlblByb21pc2VzKS50aGVuKHBvc3RVcGRhdGUpO1xuICAgICAgaG9zdFJlZi4kZmxhZ3MkIHw9IDQgLyogaXNXYWl0aW5nRm9yQ2hpbGRyZW4gKi87XG4gICAgICBjaGlsZHJlblByb21pc2VzLmxlbmd0aCA9IDA7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHBvc3RVcGRhdGVDb21wb25lbnQoaG9zdFJlZik7XG4gIH1cbn07XG52YXIgcmVuZGVyaW5nUmVmID0gbnVsbDtcbnZhciBjYWxsUmVuZGVyID0gKGhvc3RSZWYsIGluc3RhbmNlLCBlbG0sIGlzSW5pdGlhbExvYWQpID0+IHtcbiAgY29uc3QgYWxsUmVuZGVyRm4gPSBCVUlMRDIxLmFsbFJlbmRlckZuID8gdHJ1ZSA6IGZhbHNlO1xuICBjb25zdCBsYXp5TG9hZCA9IEJVSUxEMjEubGF6eUxvYWQgPyB0cnVlIDogZmFsc2U7XG4gIGNvbnN0IHRhc2tRdWV1ZSA9IEJVSUxEMjEudGFza1F1ZXVlID8gdHJ1ZSA6IGZhbHNlO1xuICBjb25zdCB1cGRhdGFibGUgPSBCVUlMRDIxLnVwZGF0YWJsZSA/IHRydWUgOiBmYWxzZTtcbiAgdHJ5IHtcbiAgICByZW5kZXJpbmdSZWYgPSBpbnN0YW5jZTtcbiAgICBpbnN0YW5jZSA9IGFsbFJlbmRlckZuID8gaW5zdGFuY2UucmVuZGVyKCkgOiBpbnN0YW5jZS5yZW5kZXIgJiYgaW5zdGFuY2UucmVuZGVyKCk7XG4gICAgaWYgKHVwZGF0YWJsZSAmJiB0YXNrUXVldWUpIHtcbiAgICAgIGhvc3RSZWYuJGZsYWdzJCAmPSB+MTYgLyogaXNRdWV1ZWRGb3JVcGRhdGUgKi87XG4gICAgfVxuICAgIGlmICh1cGRhdGFibGUgfHwgbGF6eUxvYWQpIHtcbiAgICAgIGhvc3RSZWYuJGZsYWdzJCB8PSAyIC8qIGhhc1JlbmRlcmVkICovO1xuICAgIH1cbiAgICBpZiAoQlVJTEQyMS5oYXNSZW5kZXJGbiB8fCBCVUlMRDIxLnJlZmxlY3QpIHtcbiAgICAgIGlmIChCVUlMRDIxLnZkb21SZW5kZXIgfHwgQlVJTEQyMS5yZWZsZWN0KSB7XG4gICAgICAgIGlmIChCVUlMRDIxLmh5ZHJhdGVTZXJ2ZXJTaWRlKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShpbnN0YW5jZSkudGhlbigodmFsdWUpID0+IHJlbmRlclZkb20oaG9zdFJlZiwgdmFsdWUsIGlzSW5pdGlhbExvYWQpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZW5kZXJWZG9tKGhvc3RSZWYsIGluc3RhbmNlLCBpc0luaXRpYWxMb2FkKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2hhZG93Um9vdCA9IGVsbS5zaGFkb3dSb290O1xuICAgICAgICBpZiAoaG9zdFJlZi4kY21wTWV0YSQuJGZsYWdzJCAmIDEgLyogc2hhZG93RG9tRW5jYXBzdWxhdGlvbiAqLykge1xuICAgICAgICAgIHNoYWRvd1Jvb3QudGV4dENvbnRlbnQgPSBpbnN0YW5jZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbG0udGV4dENvbnRlbnQgPSBpbnN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGVFcnJvcihlLCBob3N0UmVmLiRob3N0RWxlbWVudCQpO1xuICB9XG4gIHJlbmRlcmluZ1JlZiA9IG51bGw7XG4gIHJldHVybiBudWxsO1xufTtcbnZhciBnZXRSZW5kZXJpbmdSZWYgPSAoKSA9PiByZW5kZXJpbmdSZWY7XG52YXIgcG9zdFVwZGF0ZUNvbXBvbmVudCA9IChob3N0UmVmKSA9PiB7XG4gIGNvbnN0IHRhZ05hbWUgPSBob3N0UmVmLiRjbXBNZXRhJC4kdGFnTmFtZSQ7XG4gIGNvbnN0IGVsbSA9IGhvc3RSZWYuJGhvc3RFbGVtZW50JDtcbiAgY29uc3QgZW5kUG9zdFVwZGF0ZSA9IGNyZWF0ZVRpbWUoXCJwb3N0VXBkYXRlXCIsIHRhZ05hbWUpO1xuICBjb25zdCBpbnN0YW5jZSA9IEJVSUxEMjEubGF6eUxvYWQgPyBob3N0UmVmLiRsYXp5SW5zdGFuY2UkIDogZWxtO1xuICBjb25zdCBhbmNlc3RvckNvbXBvbmVudCA9IGhvc3RSZWYuJGFuY2VzdG9yQ29tcG9uZW50JDtcbiAgaWYgKEJVSUxEMjEuaXNEZXYpIHtcbiAgICBob3N0UmVmLiRmbGFncyQgfD0gMTAyNCAvKiBkZXZPblJlbmRlciAqLztcbiAgfVxuICBzYWZlQ2FsbChpbnN0YW5jZSwgXCJjb21wb25lbnREaWRSZW5kZXJcIiwgdm9pZCAwLCBlbG0pO1xuICBpZiAoQlVJTEQyMS5pc0Rldikge1xuICAgIGhvc3RSZWYuJGZsYWdzJCAmPSB+MTAyNCAvKiBkZXZPblJlbmRlciAqLztcbiAgfVxuICBlbWl0TGlmZWN5Y2xlRXZlbnQoZWxtLCBcImNvbXBvbmVudERpZFJlbmRlclwiKTtcbiAgaWYgKCEoaG9zdFJlZi4kZmxhZ3MkICYgNjQgLyogaGFzTG9hZGVkQ29tcG9uZW50ICovKSkge1xuICAgIGhvc3RSZWYuJGZsYWdzJCB8PSA2NCAvKiBoYXNMb2FkZWRDb21wb25lbnQgKi87XG4gICAgaWYgKEJVSUxEMjEuYXN5bmNMb2FkaW5nICYmIEJVSUxEMjEuY3NzQW5ub3RhdGlvbnMpIHtcbiAgICAgIGFkZEh5ZHJhdGVkRmxhZyhlbG0pO1xuICAgIH1cbiAgICBpZiAoQlVJTEQyMS5pc0Rldikge1xuICAgICAgaG9zdFJlZi4kZmxhZ3MkIHw9IDIwNDggLyogZGV2T25EaWRMb2FkICovO1xuICAgIH1cbiAgICBzYWZlQ2FsbChpbnN0YW5jZSwgXCJjb21wb25lbnREaWRMb2FkXCIsIHZvaWQgMCwgZWxtKTtcbiAgICBpZiAoQlVJTEQyMS5pc0Rldikge1xuICAgICAgaG9zdFJlZi4kZmxhZ3MkICY9IH4yMDQ4IC8qIGRldk9uRGlkTG9hZCAqLztcbiAgICB9XG4gICAgZW1pdExpZmVjeWNsZUV2ZW50KGVsbSwgXCJjb21wb25lbnREaWRMb2FkXCIpO1xuICAgIGVuZFBvc3RVcGRhdGUoKTtcbiAgICBpZiAoQlVJTEQyMS5hc3luY0xvYWRpbmcpIHtcbiAgICAgIGhvc3RSZWYuJG9uUmVhZHlSZXNvbHZlJChlbG0pO1xuICAgICAgaWYgKCFhbmNlc3RvckNvbXBvbmVudCkge1xuICAgICAgICBhcHBEaWRMb2FkKHRhZ05hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoQlVJTEQyMS5pc0Rldikge1xuICAgICAgaG9zdFJlZi4kZmxhZ3MkIHw9IDEwMjQgLyogZGV2T25SZW5kZXIgKi87XG4gICAgfVxuICAgIHNhZmVDYWxsKGluc3RhbmNlLCBcImNvbXBvbmVudERpZFVwZGF0ZVwiLCB2b2lkIDAsIGVsbSk7XG4gICAgaWYgKEJVSUxEMjEuaXNEZXYpIHtcbiAgICAgIGhvc3RSZWYuJGZsYWdzJCAmPSB+MTAyNCAvKiBkZXZPblJlbmRlciAqLztcbiAgICB9XG4gICAgZW1pdExpZmVjeWNsZUV2ZW50KGVsbSwgXCJjb21wb25lbnREaWRVcGRhdGVcIik7XG4gICAgZW5kUG9zdFVwZGF0ZSgpO1xuICB9XG4gIGlmIChCVUlMRDIxLm1ldGhvZCAmJiBCVUlMRDIxLmxhenlMb2FkKSB7XG4gICAgaG9zdFJlZi4kb25JbnN0YW5jZVJlc29sdmUkKGVsbSk7XG4gIH1cbiAgaWYgKEJVSUxEMjEuYXN5bmNMb2FkaW5nKSB7XG4gICAgaWYgKGhvc3RSZWYuJG9uUmVuZGVyUmVzb2x2ZSQpIHtcbiAgICAgIGhvc3RSZWYuJG9uUmVuZGVyUmVzb2x2ZSQoKTtcbiAgICAgIGhvc3RSZWYuJG9uUmVuZGVyUmVzb2x2ZSQgPSB2b2lkIDA7XG4gICAgfVxuICAgIGlmIChob3N0UmVmLiRmbGFncyQgJiA1MTIgLyogbmVlZHNSZXJlbmRlciAqLykge1xuICAgICAgbmV4dFRpY2soKCkgPT4gc2NoZWR1bGVVcGRhdGUoaG9zdFJlZiwgZmFsc2UpKTtcbiAgICB9XG4gICAgaG9zdFJlZi4kZmxhZ3MkICY9IH4oNCAvKiBpc1dhaXRpbmdGb3JDaGlsZHJlbiAqLyB8IDUxMiAvKiBuZWVkc1JlcmVuZGVyICovKTtcbiAgfVxufTtcbnZhciBmb3JjZVVwZGF0ZSA9IChyZWYpID0+IHtcbiAgdmFyIF9hO1xuICBpZiAoQlVJTEQyMS51cGRhdGFibGUgJiYgKEJ1aWxkLmlzQnJvd3NlciB8fCBCdWlsZC5pc1Rlc3RpbmcpKSB7XG4gICAgY29uc3QgaG9zdFJlZiA9IGdldEhvc3RSZWYocmVmKTtcbiAgICBjb25zdCBpc0Nvbm5lY3RlZCA9IChfYSA9IGhvc3RSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IGhvc3RSZWYuJGhvc3RFbGVtZW50JCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmlzQ29ubmVjdGVkO1xuICAgIGlmIChpc0Nvbm5lY3RlZCAmJiAoaG9zdFJlZi4kZmxhZ3MkICYgKDIgLyogaGFzUmVuZGVyZWQgKi8gfCAxNiAvKiBpc1F1ZXVlZEZvclVwZGF0ZSAqLykpID09PSAyIC8qIGhhc1JlbmRlcmVkICovKSB7XG4gICAgICBzY2hlZHVsZVVwZGF0ZShob3N0UmVmLCBmYWxzZSk7XG4gICAgfVxuICAgIHJldHVybiBpc0Nvbm5lY3RlZDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xudmFyIGFwcERpZExvYWQgPSAod2hvKSA9PiB7XG4gIHZhciBfYTtcbiAgaWYgKEJVSUxEMjEuYXN5bmNRdWV1ZSkge1xuICAgIHBsdC4kZmxhZ3MkIHw9IDIgLyogYXBwTG9hZGVkICovO1xuICB9XG4gIG5leHRUaWNrKCgpID0+IGVtaXRFdmVudCh3aW4sIFwiYXBwbG9hZFwiLCB7IGRldGFpbDogeyBuYW1lc3BhY2U6IE5BTUVTUEFDRSB9IH0pKTtcbiAgaWYgKEJVSUxEMjEuaHlkcmF0ZUNsaWVudFNpZGUpIHtcbiAgICBpZiAoKF9hID0gcGx0LiRvcmdMb2NOb2RlcyQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5zaXplKSB7XG4gICAgICBwbHQuJG9yZ0xvY05vZGVzJC5jbGVhcigpO1xuICAgIH1cbiAgfVxuICBpZiAoQlVJTEQyMS5wcm9maWxlICYmIHBlcmZvcm1hbmNlLm1lYXN1cmUpIHtcbiAgICBwZXJmb3JtYW5jZS5tZWFzdXJlKGBbU3RlbmNpbF0gJHtOQU1FU1BBQ0V9IGluaXRpYWwgbG9hZCAoYnkgJHt3aG99KWAsIFwic3Q6YXBwOnN0YXJ0XCIpO1xuICB9XG59O1xudmFyIHNhZmVDYWxsID0gKGluc3RhbmNlLCBtZXRob2QsIGFyZywgZWxtKSA9PiB7XG4gIGlmIChpbnN0YW5jZSAmJiBpbnN0YW5jZVttZXRob2RdKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBpbnN0YW5jZVttZXRob2RdKGFyZyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZUVycm9yKGUsIGVsbSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB2b2lkIDA7XG59O1xudmFyIGVtaXRMaWZlY3ljbGVFdmVudCA9IChlbG0sIGxpZmVjeWNsZU5hbWUpID0+IHtcbiAgaWYgKEJVSUxEMjEubGlmZWN5Y2xlRE9NRXZlbnRzKSB7XG4gICAgZW1pdEV2ZW50KGVsbSwgXCJzdGVuY2lsX1wiICsgbGlmZWN5Y2xlTmFtZSwge1xuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNvbXBvc2VkOiB0cnVlLFxuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIG5hbWVzcGFjZTogTkFNRVNQQUNFXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG52YXIgYWRkSHlkcmF0ZWRGbGFnID0gKGVsbSkgPT4ge1xuICB2YXIgX2EsIF9iO1xuICByZXR1cm4gQlVJTEQyMS5oeWRyYXRlZENsYXNzID8gZWxtLmNsYXNzTGlzdC5hZGQoKF9hID0gQlVJTEQyMS5oeWRyYXRlZFNlbGVjdG9yTmFtZSkgIT0gbnVsbCA/IF9hIDogXCJoeWRyYXRlZFwiKSA6IEJVSUxEMjEuaHlkcmF0ZWRBdHRyaWJ1dGUgPyBlbG0uc2V0QXR0cmlidXRlKChfYiA9IEJVSUxEMjEuaHlkcmF0ZWRTZWxlY3Rvck5hbWUpICE9IG51bGwgPyBfYiA6IFwiaHlkcmF0ZWRcIiwgXCJcIikgOiB2b2lkIDA7XG59O1xudmFyIHNlcnZlclNpZGVDb25uZWN0ZWQgPSAoZWxtKSA9PiB7XG4gIGNvbnN0IGNoaWxkcmVuID0gZWxtLmNoaWxkcmVuO1xuICBpZiAoY2hpbGRyZW4gIT0gbnVsbCkge1xuICAgIGZvciAobGV0IGkyID0gMCwgaWkgPSBjaGlsZHJlbi5sZW5ndGg7IGkyIDwgaWk7IGkyKyspIHtcbiAgICAgIGNvbnN0IGNoaWxkRWxtID0gY2hpbGRyZW5baTJdO1xuICAgICAgaWYgKHR5cGVvZiBjaGlsZEVsbS5jb25uZWN0ZWRDYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNoaWxkRWxtLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgICBzZXJ2ZXJTaWRlQ29ubmVjdGVkKGNoaWxkRWxtKTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9ydW50aW1lL3NldC12YWx1ZS50c1xudmFyIGdldFZhbHVlID0gKHJlZiwgcHJvcE5hbWUpID0+IGdldEhvc3RSZWYocmVmKS4kaW5zdGFuY2VWYWx1ZXMkLmdldChwcm9wTmFtZSk7XG52YXIgc2V0VmFsdWUgPSAocmVmLCBwcm9wTmFtZSwgbmV3VmFsLCBjbXBNZXRhKSA9PiB7XG4gIGNvbnN0IGhvc3RSZWYgPSBnZXRIb3N0UmVmKHJlZik7XG4gIGlmICghaG9zdFJlZikge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoQlVJTEQyMi5sYXp5TG9hZCAmJiAhaG9zdFJlZikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBDb3VsZG4ndCBmaW5kIGhvc3QgZWxlbWVudCBmb3IgXCIke2NtcE1ldGEuJHRhZ05hbWUkfVwiIGFzIGl0IGlzIHVua25vd24gdG8gdGhpcyBTdGVuY2lsIHJ1bnRpbWUuIFRoaXMgdXN1YWxseSBoYXBwZW5zIHdoZW4gaW50ZWdyYXRpbmcgYSAzcmQgcGFydHkgU3RlbmNpbCBjb21wb25lbnQgd2l0aCBhbm90aGVyIFN0ZW5jaWwgY29tcG9uZW50IG9yIGFwcGxpY2F0aW9uLiBQbGVhc2UgcmVhY2ggb3V0IHRvIHRoZSBtYWludGFpbmVycyBvZiB0aGUgM3JkIHBhcnR5IFN0ZW5jaWwgY29tcG9uZW50IG9yIHJlcG9ydCB0aGlzIG9uIHRoZSBTdGVuY2lsIERpc2NvcmQgc2VydmVyIChodHRwczovL2NoYXQuc3RlbmNpbGpzLmNvbSkgb3IgY29tbWVudCBvbiB0aGlzIHNpbWlsYXIgW0dpdEh1YiBpc3N1ZV0oaHR0cHM6Ly9naXRodWIuY29tL3N0ZW5jaWxqcy9jb3JlL2lzc3Vlcy81NDU3KS5gXG4gICAgKTtcbiAgfVxuICBpZiAoQlVJTEQyMi5zZXJpYWxpemVyICYmIGhvc3RSZWYuJHNlcmlhbGl6ZXJWYWx1ZXMkLmhhcyhwcm9wTmFtZSkgJiYgaG9zdFJlZi4kc2VyaWFsaXplclZhbHVlcyQuZ2V0KHByb3BOYW1lKSA9PT0gbmV3VmFsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGVsbSA9IEJVSUxEMjIubGF6eUxvYWQgPyBob3N0UmVmLiRob3N0RWxlbWVudCQgOiByZWY7XG4gIGNvbnN0IG9sZFZhbCA9IGhvc3RSZWYuJGluc3RhbmNlVmFsdWVzJC5nZXQocHJvcE5hbWUpO1xuICBjb25zdCBmbGFncyA9IGhvc3RSZWYuJGZsYWdzJDtcbiAgY29uc3QgaW5zdGFuY2UgPSBCVUlMRDIyLmxhenlMb2FkID8gaG9zdFJlZi4kbGF6eUluc3RhbmNlJCA6IGVsbTtcbiAgbmV3VmFsID0gcGFyc2VQcm9wZXJ0eVZhbHVlKFxuICAgIG5ld1ZhbCxcbiAgICBjbXBNZXRhLiRtZW1iZXJzJFtwcm9wTmFtZV1bMF0sXG4gICAgQlVJTEQyMi5mb3JtQXNzb2NpYXRlZCAmJiAhIShjbXBNZXRhLiRmbGFncyQgJiA2NCAvKiBmb3JtQXNzb2NpYXRlZCAqLylcbiAgKTtcbiAgY29uc3QgYXJlQm90aE5hTiA9IE51bWJlci5pc05hTihvbGRWYWwpICYmIE51bWJlci5pc05hTihuZXdWYWwpO1xuICBjb25zdCBkaWRWYWx1ZUNoYW5nZSA9IG5ld1ZhbCAhPT0gb2xkVmFsICYmICFhcmVCb3RoTmFOO1xuICBpZiAoKCFCVUlMRDIyLmxhenlMb2FkIHx8ICEoZmxhZ3MgJiA4IC8qIGlzQ29uc3RydWN0aW5nSW5zdGFuY2UgKi8pIHx8IG9sZFZhbCA9PT0gdm9pZCAwKSAmJiBkaWRWYWx1ZUNoYW5nZSkge1xuICAgIGhvc3RSZWYuJGluc3RhbmNlVmFsdWVzJC5zZXQocHJvcE5hbWUsIG5ld1ZhbCk7XG4gICAgaWYgKEJVSUxEMjIuc2VyaWFsaXplciAmJiBCVUlMRDIyLnJlZmxlY3QgJiYgY21wTWV0YS4kYXR0cnNUb1JlZmxlY3QkKSB7XG4gICAgICBpZiAoaW5zdGFuY2UgJiYgY21wTWV0YS4kc2VyaWFsaXplcnMkICYmIGNtcE1ldGEuJHNlcmlhbGl6ZXJzJFtwcm9wTmFtZV0pIHtcbiAgICAgICAgbGV0IGF0dHJWYWwgPSBuZXdWYWw7XG4gICAgICAgIGZvciAoY29uc3QgbWV0aG9kTmFtZSBvZiBjbXBNZXRhLiRzZXJpYWxpemVycyRbcHJvcE5hbWVdKSB7XG4gICAgICAgICAgYXR0clZhbCA9IGluc3RhbmNlW21ldGhvZE5hbWVdKGF0dHJWYWwsIHByb3BOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBob3N0UmVmLiRzZXJpYWxpemVyVmFsdWVzJC5zZXQocHJvcE5hbWUsIGF0dHJWYWwpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQlVJTEQyMi5pc0Rldikge1xuICAgICAgaWYgKGhvc3RSZWYuJGZsYWdzJCAmIDEwMjQgLyogZGV2T25SZW5kZXIgKi8pIHtcbiAgICAgICAgY29uc29sZURldldhcm4oXG4gICAgICAgICAgYFRoZSBzdGF0ZS9wcm9wIFwiJHtwcm9wTmFtZX1cIiBjaGFuZ2VkIGR1cmluZyByZW5kZXJpbmcuIFRoaXMgY2FuIHBvdGVudGlhbGx5IGxlYWQgdG8gaW5maW5pdGUtbG9vcHMgYW5kIG90aGVyIGJ1Z3MuYCxcbiAgICAgICAgICBcIlxcbkVsZW1lbnRcIixcbiAgICAgICAgICBlbG0sXG4gICAgICAgICAgXCJcXG5OZXcgdmFsdWVcIixcbiAgICAgICAgICBuZXdWYWwsXG4gICAgICAgICAgXCJcXG5PbGQgdmFsdWVcIixcbiAgICAgICAgICBvbGRWYWxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoaG9zdFJlZi4kZmxhZ3MkICYgMjA0OCAvKiBkZXZPbkRpZExvYWQgKi8pIHtcbiAgICAgICAgY29uc29sZURldldhcm4oXG4gICAgICAgICAgYFRoZSBzdGF0ZS9wcm9wIFwiJHtwcm9wTmFtZX1cIiBjaGFuZ2VkIGR1cmluZyBcImNvbXBvbmVudERpZExvYWQoKVwiLCB0aGlzIHRyaWdnZXJzIGV4dHJhIHJlLXJlbmRlcnMsIHRyeSB0byBzZXR1cCBvbiBcImNvbXBvbmVudFdpbGxMb2FkKClcImAsXG4gICAgICAgICAgXCJcXG5FbGVtZW50XCIsXG4gICAgICAgICAgZWxtLFxuICAgICAgICAgIFwiXFxuTmV3IHZhbHVlXCIsXG4gICAgICAgICAgbmV3VmFsLFxuICAgICAgICAgIFwiXFxuT2xkIHZhbHVlXCIsXG4gICAgICAgICAgb2xkVmFsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghQlVJTEQyMi5sYXp5TG9hZCB8fCBpbnN0YW5jZSkge1xuICAgICAgaWYgKEJVSUxEMjIucHJvcENoYW5nZUNhbGxiYWNrICYmIGNtcE1ldGEuJHdhdGNoZXJzJCAmJiBmbGFncyAmIDEyOCAvKiBpc1dhdGNoUmVhZHkgKi8pIHtcbiAgICAgICAgY29uc3Qgd2F0Y2hNZXRob2RzID0gY21wTWV0YS4kd2F0Y2hlcnMkW3Byb3BOYW1lXTtcbiAgICAgICAgaWYgKHdhdGNoTWV0aG9kcykge1xuICAgICAgICAgIHdhdGNoTWV0aG9kcy5tYXAoKHdhdGNoTWV0aG9kTmFtZSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgaW5zdGFuY2Vbd2F0Y2hNZXRob2ROYW1lXShuZXdWYWwsIG9sZFZhbCwgcHJvcE5hbWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBjb25zb2xlRXJyb3IoZSwgZWxtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKEJVSUxEMjIudXBkYXRhYmxlICYmIChmbGFncyAmICgyIC8qIGhhc1JlbmRlcmVkICovIHwgMTYgLyogaXNRdWV1ZWRGb3JVcGRhdGUgKi8pKSA9PT0gMiAvKiBoYXNSZW5kZXJlZCAqLykge1xuICAgICAgICBpZiAoaW5zdGFuY2UuY29tcG9uZW50U2hvdWxkVXBkYXRlKSB7XG4gICAgICAgICAgaWYgKGluc3RhbmNlLmNvbXBvbmVudFNob3VsZFVwZGF0ZShuZXdWYWwsIG9sZFZhbCwgcHJvcE5hbWUpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzY2hlZHVsZVVwZGF0ZShob3N0UmVmLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvcnVudGltZS9wcm94eS1jb21wb25lbnQudHNcbnZhciBwcm94eUNvbXBvbmVudCA9IChDc3RyLCBjbXBNZXRhLCBmbGFncykgPT4ge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCBwcm90b3R5cGUgPSBDc3RyLnByb3RvdHlwZTtcbiAgaWYgKEJVSUxEMjMuaXNUZXN0aW5nKSB7XG4gICAgaWYgKHByb3RvdHlwZS5fX3N0ZW5jaWxBdWdtZW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcHJvdG90eXBlLl9fc3RlbmNpbEF1Z21lbnRlZCA9IHRydWU7XG4gIH1cbiAgaWYgKEJVSUxEMjMuZm9ybUFzc29jaWF0ZWQgJiYgY21wTWV0YS4kZmxhZ3MkICYgNjQgLyogZm9ybUFzc29jaWF0ZWQgKi8gJiYgZmxhZ3MgJiAxIC8qIGlzRWxlbWVudENvbnN0cnVjdG9yICovKSB7XG4gICAgRk9STV9BU1NPQ0lBVEVEX0NVU1RPTV9FTEVNRU5UX0NBTExCQUNLUy5mb3JFYWNoKChjYk5hbWUpID0+IHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsRm9ybUFzc29jaWF0ZWRDYWxsYmFjayA9IHByb3RvdHlwZVtjYk5hbWVdO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgY2JOYW1lLCB7XG4gICAgICAgIHZhbHVlKC4uLmFyZ3MpIHtcbiAgICAgICAgICB2YXIgX2EyO1xuICAgICAgICAgIGNvbnN0IGhvc3RSZWYgPSBnZXRIb3N0UmVmKHRoaXMpO1xuICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gQlVJTEQyMy5sYXp5TG9hZCA/IGhvc3RSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IGhvc3RSZWYuJGxhenlJbnN0YW5jZSQgOiB0aGlzO1xuICAgICAgICAgIGlmICghaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIChfYTIgPSBob3N0UmVmID09IG51bGwgPyB2b2lkIDAgOiBob3N0UmVmLiRvblJlYWR5UHJvbWlzZSQpID09IG51bGwgPyB2b2lkIDAgOiBfYTIudGhlbigoYXN5bmNJbnN0YW5jZSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBjYiA9IGFzeW5jSW5zdGFuY2VbY2JOYW1lXTtcbiAgICAgICAgICAgICAgdHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIgJiYgY2IuY2FsbChhc3luY0luc3RhbmNlLCAuLi5hcmdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjYiA9IEJVSUxEMjMubGF6eUxvYWQgPyBpbnN0YW5jZVtjYk5hbWVdIDogb3JpZ2luYWxGb3JtQXNzb2NpYXRlZENhbGxiYWNrO1xuICAgICAgICAgICAgdHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIgJiYgY2IuY2FsbChpbnN0YW5jZSwgLi4uYXJncyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBpZiAoQlVJTEQyMy5tZW1iZXIgJiYgY21wTWV0YS4kbWVtYmVycyQgfHwgQlVJTEQyMy5wcm9wQ2hhbmdlQ2FsbGJhY2spIHtcbiAgICBpZiAoQlVJTEQyMy5wcm9wQ2hhbmdlQ2FsbGJhY2spIHtcbiAgICAgIGlmIChDc3RyLndhdGNoZXJzICYmICFjbXBNZXRhLiR3YXRjaGVycyQpIHtcbiAgICAgICAgY21wTWV0YS4kd2F0Y2hlcnMkID0gQ3N0ci53YXRjaGVycztcbiAgICAgIH1cbiAgICAgIGlmIChDc3RyLmRlc2VyaWFsaXplcnMgJiYgIWNtcE1ldGEuJGRlc2VyaWFsaXplcnMkKSB7XG4gICAgICAgIGNtcE1ldGEuJGRlc2VyaWFsaXplcnMkID0gQ3N0ci5kZXNlcmlhbGl6ZXJzO1xuICAgICAgfVxuICAgICAgaWYgKENzdHIuc2VyaWFsaXplcnMgJiYgIWNtcE1ldGEuJHNlcmlhbGl6ZXJzJCkge1xuICAgICAgICBjbXBNZXRhLiRzZXJpYWxpemVycyQgPSBDc3RyLnNlcmlhbGl6ZXJzO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBtZW1iZXJzID0gT2JqZWN0LmVudHJpZXMoKF9hID0gY21wTWV0YS4kbWVtYmVycyQpICE9IG51bGwgPyBfYSA6IHt9KTtcbiAgICBtZW1iZXJzLm1hcCgoW21lbWJlck5hbWUsIFttZW1iZXJGbGFnc11dKSA9PiB7XG4gICAgICBpZiAoKEJVSUxEMjMucHJvcCB8fCBCVUlMRDIzLnN0YXRlKSAmJiAobWVtYmVyRmxhZ3MgJiAzMSAvKiBQcm9wICovIHx8ICghQlVJTEQyMy5sYXp5TG9hZCB8fCBmbGFncyAmIDIgLyogcHJveHlTdGF0ZSAqLykgJiYgbWVtYmVyRmxhZ3MgJiAzMiAvKiBTdGF0ZSAqLykpIHtcbiAgICAgICAgY29uc3QgeyBnZXQ6IG9yaWdHZXR0ZXIsIHNldDogb3JpZ1NldHRlciB9ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm90b3R5cGUsIG1lbWJlck5hbWUpIHx8IHt9O1xuICAgICAgICBpZiAob3JpZ0dldHRlcikgY21wTWV0YS4kbWVtYmVycyRbbWVtYmVyTmFtZV1bMF0gfD0gMjA0OCAvKiBHZXR0ZXIgKi87XG4gICAgICAgIGlmIChvcmlnU2V0dGVyKSBjbXBNZXRhLiRtZW1iZXJzJFttZW1iZXJOYW1lXVswXSB8PSA0MDk2IC8qIFNldHRlciAqLztcbiAgICAgICAgaWYgKGZsYWdzICYgMSAvKiBpc0VsZW1lbnRDb25zdHJ1Y3RvciAqLyB8fCAhb3JpZ0dldHRlcikge1xuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90b3R5cGUsIG1lbWJlck5hbWUsIHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgaWYgKEJVSUxEMjMubGF6eUxvYWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoKGNtcE1ldGEuJG1lbWJlcnMkW21lbWJlck5hbWVdWzBdICYgMjA0OCAvKiBHZXR0ZXIgKi8pID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VmFsdWUodGhpcywgbWVtYmVyTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZiA9IGdldEhvc3RSZWYodGhpcyk7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSByZWYgPyByZWYuJGxhenlJbnN0YW5jZSQgOiBwcm90b3R5cGU7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnN0YW5jZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZVttZW1iZXJOYW1lXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoIUJVSUxEMjMubGF6eUxvYWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ0dldHRlciA/IG9yaWdHZXR0ZXIuYXBwbHkodGhpcykgOiBnZXRWYWx1ZSh0aGlzLCBtZW1iZXJOYW1lKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG90eXBlLCBtZW1iZXJOYW1lLCB7XG4gICAgICAgICAgc2V0KG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCByZWYgPSBnZXRIb3N0UmVmKHRoaXMpO1xuICAgICAgICAgICAgaWYgKCFyZWYpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEJVSUxEMjMuaXNEZXYpIHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBwcm94eWluZyB0aGUgaW5zdGFuY2UgKG5vdCBlbGVtZW50KVxuICAgICAgICAgICAgICAgIChmbGFncyAmIDEgLyogaXNFbGVtZW50Q29uc3RydWN0b3IgKi8pID09PSAwICYmIC8vIGlmIHRoZSBjbGFzcyBoYXMgYSBzZXR0ZXIsIHRoZW4gdGhlIEVsZW1lbnQgY2FuIHVwZGF0ZSBpbnN0YW5jZSB2YWx1ZXMsIHNvIGlnbm9yZVxuICAgICAgICAgICAgICAgIChjbXBNZXRhLiRtZW1iZXJzJFttZW1iZXJOYW1lXVswXSAmIDQwOTYgLyogU2V0dGVyICovKSA9PT0gMCAmJiAvLyB0aGUgZWxlbWVudCBpcyBub3QgY29uc3RydWN0aW5nXG4gICAgICAgICAgICAgICAgKHJlZiAmJiByZWYuJGZsYWdzJCAmIDggLyogaXNDb25zdHJ1Y3RpbmdJbnN0YW5jZSAqLykgPT09IDAgJiYgLy8gdGhlIG1lbWJlciBpcyBhIHByb3BcbiAgICAgICAgICAgICAgICAobWVtYmVyRmxhZ3MgJiAzMSAvKiBQcm9wICovKSAhPT0gMCAmJiAvLyB0aGUgbWVtYmVyIGlzIG5vdCBtdXRhYmxlXG4gICAgICAgICAgICAgICAgKG1lbWJlckZsYWdzICYgMTAyNCAvKiBNdXRhYmxlICovKSA9PT0gMFxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlRGV2V2FybihcbiAgICAgICAgICAgICAgICAgIGBAUHJvcCgpIFwiJHttZW1iZXJOYW1lfVwiIG9uIDwke2NtcE1ldGEuJHRhZ05hbWUkfT4gaXMgaW1tdXRhYmxlIGJ1dCB3YXMgbW9kaWZpZWQgZnJvbSB3aXRoaW4gdGhlIGNvbXBvbmVudC5cbk1vcmUgaW5mb3JtYXRpb246IGh0dHBzOi8vc3RlbmNpbGpzLmNvbS9kb2NzL3Byb3BlcnRpZXMjcHJvcC1tdXRhYmlsaXR5YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcmlnU2V0dGVyKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IG1lbWJlckZsYWdzICYgMzIgLyogU3RhdGUgKi8gPyB0aGlzW21lbWJlck5hbWVdIDogcmVmLiRob3N0RWxlbWVudCRbbWVtYmVyTmFtZV07XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VycmVudFZhbHVlID09PSBcInVuZGVmaW5lZFwiICYmIHJlZi4kaW5zdGFuY2VWYWx1ZXMkLmdldChtZW1iZXJOYW1lKSkge1xuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gcmVmLiRpbnN0YW5jZVZhbHVlcyQuZ2V0KG1lbWJlck5hbWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG9yaWdTZXR0ZXIuYXBwbHkodGhpcywgW1xuICAgICAgICAgICAgICAgIHBhcnNlUHJvcGVydHlWYWx1ZShcbiAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgICAgICAgICAgbWVtYmVyRmxhZ3MsXG4gICAgICAgICAgICAgICAgICBCVUlMRDIzLmZvcm1Bc3NvY2lhdGVkICYmICEhKGNtcE1ldGEuJGZsYWdzJCAmIDY0IC8qIGZvcm1Bc3NvY2lhdGVkICovKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgIG5ld1ZhbHVlID0gbWVtYmVyRmxhZ3MgJiAzMiAvKiBTdGF0ZSAqLyA/IHRoaXNbbWVtYmVyTmFtZV0gOiByZWYuJGhvc3RFbGVtZW50JFttZW1iZXJOYW1lXTtcbiAgICAgICAgICAgICAgc2V0VmFsdWUodGhpcywgbWVtYmVyTmFtZSwgbmV3VmFsdWUsIGNtcE1ldGEpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIUJVSUxEMjMubGF6eUxvYWQpIHtcbiAgICAgICAgICAgICAgc2V0VmFsdWUodGhpcywgbWVtYmVyTmFtZSwgbmV3VmFsdWUsIGNtcE1ldGEpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoQlVJTEQyMy5sYXp5TG9hZCkge1xuICAgICAgICAgICAgICBpZiAoKGZsYWdzICYgMSAvKiBpc0VsZW1lbnRDb25zdHJ1Y3RvciAqLykgPT09IDAgfHwgKGNtcE1ldGEuJG1lbWJlcnMkW21lbWJlck5hbWVdWzBdICYgNDA5NiAvKiBTZXR0ZXIgKi8pID09PSAwKSB7XG4gICAgICAgICAgICAgICAgc2V0VmFsdWUodGhpcywgbWVtYmVyTmFtZSwgbmV3VmFsdWUsIGNtcE1ldGEpO1xuICAgICAgICAgICAgICAgIGlmIChmbGFncyAmIDEgLyogaXNFbGVtZW50Q29uc3RydWN0b3IgKi8gJiYgIXJlZi4kbGF6eUluc3RhbmNlJCkge1xuICAgICAgICAgICAgICAgICAgcmVmLiRmZXRjaGVkQ2JMaXN0JC5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNtcE1ldGEuJG1lbWJlcnMkW21lbWJlck5hbWVdWzBdICYgNDA5NiAvKiBTZXR0ZXIgKi8gJiYgcmVmLiRsYXp5SW5zdGFuY2UkW21lbWJlck5hbWVdICE9PSByZWYuJGluc3RhbmNlVmFsdWVzJC5nZXQobWVtYmVyTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZWYuJGxhenlJbnN0YW5jZSRbbWVtYmVyTmFtZV0gPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCBzZXR0ZXJTZXRWYWwgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gcmVmLiRsYXp5SW5zdGFuY2UkW21lbWJlck5hbWVdO1xuICAgICAgICAgICAgICAgIGlmICghcmVmLiRpbnN0YW5jZVZhbHVlcyQuZ2V0KG1lbWJlck5hbWUpICYmIGN1cnJlbnRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgcmVmLiRpbnN0YW5jZVZhbHVlcyQuc2V0KG1lbWJlck5hbWUsIGN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlZi4kbGF6eUluc3RhbmNlJFttZW1iZXJOYW1lXSA9IHBhcnNlUHJvcGVydHlWYWx1ZShcbiAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgICAgICAgICAgbWVtYmVyRmxhZ3MsXG4gICAgICAgICAgICAgICAgICBCVUlMRDIzLmZvcm1Bc3NvY2lhdGVkICYmICEhKGNtcE1ldGEuJGZsYWdzJCAmIDY0IC8qIGZvcm1Bc3NvY2lhdGVkICovKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgc2V0VmFsdWUodGhpcywgbWVtYmVyTmFtZSwgcmVmLiRsYXp5SW5zdGFuY2UkW21lbWJlck5hbWVdLCBjbXBNZXRhKTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgaWYgKHJlZi4kbGF6eUluc3RhbmNlJCkge1xuICAgICAgICAgICAgICAgIHNldHRlclNldFZhbCgpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlZi4kZmV0Y2hlZENiTGlzdCQucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXR0ZXJTZXRWYWwoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKEJVSUxEMjMubGF6eUxvYWQgJiYgQlVJTEQyMy5tZXRob2QgJiYgZmxhZ3MgJiAxIC8qIGlzRWxlbWVudENvbnN0cnVjdG9yICovICYmIG1lbWJlckZsYWdzICYgNjQgLyogTWV0aG9kICovKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90b3R5cGUsIG1lbWJlck5hbWUsIHtcbiAgICAgICAgICB2YWx1ZSguLi5hcmdzKSB7XG4gICAgICAgICAgICB2YXIgX2EyO1xuICAgICAgICAgICAgY29uc3QgcmVmID0gZ2V0SG9zdFJlZih0aGlzKTtcbiAgICAgICAgICAgIHJldHVybiAoX2EyID0gcmVmID09IG51bGwgPyB2b2lkIDAgOiByZWYuJG9uSW5zdGFuY2VQcm9taXNlJCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgdmFyIF9hMztcbiAgICAgICAgICAgICAgcmV0dXJuIChfYTMgPSByZWYuJGxhenlJbnN0YW5jZSQpID09IG51bGwgPyB2b2lkIDAgOiBfYTNbbWVtYmVyTmFtZV0oLi4uYXJncyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChCVUlMRDIzLm9ic2VydmVBdHRyaWJ1dGUgJiYgKCFCVUlMRDIzLmxhenlMb2FkIHx8IGZsYWdzICYgMSAvKiBpc0VsZW1lbnRDb25zdHJ1Y3RvciAqLykpIHtcbiAgICAgIGNvbnN0IGF0dHJOYW1lVG9Qcm9wTmFtZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICBwcm90b3R5cGUuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrID0gZnVuY3Rpb24oYXR0ck5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICBwbHQuam1wKCgpID0+IHtcbiAgICAgICAgICB2YXIgX2EyO1xuICAgICAgICAgIGNvbnN0IHByb3BOYW1lID0gYXR0ck5hbWVUb1Byb3BOYW1lLmdldChhdHRyTmFtZSk7XG4gICAgICAgICAgY29uc3QgaG9zdFJlZiA9IGdldEhvc3RSZWYodGhpcyk7XG4gICAgICAgICAgaWYgKEJVSUxEMjMuc2VyaWFsaXplciAmJiBob3N0UmVmLiRzZXJpYWxpemVyVmFsdWVzJC5oYXMocHJvcE5hbWUpICYmIGhvc3RSZWYuJHNlcmlhbGl6ZXJWYWx1ZXMkLmdldChwcm9wTmFtZSkgPT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSAmJiBCVUlMRDIzLmxhenlMb2FkKSB7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IHRoaXNbcHJvcE5hbWVdO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXNbcHJvcE5hbWVdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoQlVJTEQyMy5kZXNlcmlhbGl6ZXIgJiYgY21wTWV0YS4kZGVzZXJpYWxpemVycyQgJiYgY21wTWV0YS4kZGVzZXJpYWxpemVycyRbcHJvcE5hbWVdKSB7XG4gICAgICAgICAgICBjb25zdCBzZXRWYWwgPSAobWV0aG9kTmFtZSwgaW5zdGFuY2UpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZGVzZXJpYWxpemVWYWwgPSBpbnN0YW5jZSA9PSBudWxsID8gdm9pZCAwIDogaW5zdGFuY2VbbWV0aG9kTmFtZV0obmV3VmFsdWUsIHByb3BOYW1lKTtcbiAgICAgICAgICAgICAgaWYgKGRlc2VyaWFsaXplVmFsICE9PSB0aGlzW3Byb3BOYW1lXSkge1xuICAgICAgICAgICAgICAgIHRoaXNbcHJvcE5hbWVdID0gZGVzZXJpYWxpemVWYWw7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1ldGhvZE5hbWUgb2YgY21wTWV0YS4kZGVzZXJpYWxpemVycyRbcHJvcE5hbWVdKSB7XG4gICAgICAgICAgICAgIGlmIChCVUlMRDIzLmxhenlMb2FkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhvc3RSZWYuJGxhenlJbnN0YW5jZSQpIHtcbiAgICAgICAgICAgICAgICAgIHNldFZhbChtZXRob2ROYW1lLCBob3N0UmVmLiRsYXp5SW5zdGFuY2UkKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgaG9zdFJlZi4kZmV0Y2hlZENiTGlzdCQucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldFZhbChtZXRob2ROYW1lLCBob3N0UmVmLiRsYXp5SW5zdGFuY2UkKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRWYWwobWV0aG9kTmFtZSwgdGhpcyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGVsc2UgaWYgKHByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkgJiYgdHlwZW9mIHRoaXNbcHJvcE5hbWVdID09PSBcIm51bWJlclwiICYmIC8vIGNhc3QgdHlwZSB0byBudW1iZXIgdG8gYXZvaWQgVFMgY29tcGlsZXIgaXNzdWVzXG4gICAgICAgICAgdGhpc1twcm9wTmFtZV0gPT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGVsc2UgaWYgKHByb3BOYW1lID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGZsYWdzMiA9IGhvc3RSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IGhvc3RSZWYuJGZsYWdzJDtcbiAgICAgICAgICAgIGlmIChob3N0UmVmICYmIGZsYWdzMiAmJiAhKGZsYWdzMiAmIDggLyogaXNDb25zdHJ1Y3RpbmdJbnN0YW5jZSAqLykgJiYgZmxhZ3MyICYgMTI4IC8qIGlzV2F0Y2hSZWFkeSAqLyAmJiBuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgY29uc3QgZWxtID0gQlVJTEQyMy5sYXp5TG9hZCA/IGhvc3RSZWYuJGhvc3RFbGVtZW50JCA6IHRoaXM7XG4gICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gQlVJTEQyMy5sYXp5TG9hZCA/IGhvc3RSZWYuJGxhenlJbnN0YW5jZSQgOiBlbG07XG4gICAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gKF9hMiA9IGNtcE1ldGEuJHdhdGNoZXJzJCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMlthdHRyTmFtZV07XG4gICAgICAgICAgICAgIGVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBlbnRyeS5mb3JFYWNoKChjYWxsYmFja05hbWUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2VbY2FsbGJhY2tOYW1lXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICBpbnN0YW5jZVtjYWxsYmFja05hbWVdLmNhbGwoaW5zdGFuY2UsIG5ld1ZhbHVlLCBvbGRWYWx1ZSwgYXR0ck5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm90b3R5cGUsIHByb3BOYW1lKTtcbiAgICAgICAgICBuZXdWYWx1ZSA9IG5ld1ZhbHVlID09PSBudWxsICYmIHR5cGVvZiB0aGlzW3Byb3BOYW1lXSA9PT0gXCJib29sZWFuXCIgPyBmYWxzZSA6IG5ld1ZhbHVlO1xuICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPSB0aGlzW3Byb3BOYW1lXSAmJiAoIXByb3BEZXNjLmdldCB8fCAhIXByb3BEZXNjLnNldCkpIHtcbiAgICAgICAgICAgIHRoaXNbcHJvcE5hbWVdID0gbmV3VmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICBDc3RyLm9ic2VydmVkQXR0cmlidXRlcyA9IEFycmF5LmZyb20oXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgICAgICAgICAuLi5PYmplY3Qua2V5cygoX2IgPSBjbXBNZXRhLiR3YXRjaGVycyQpICE9IG51bGwgPyBfYiA6IHt9KSxcbiAgICAgICAgICAuLi5tZW1iZXJzLmZpbHRlcigoW18sIG1dKSA9PiBtWzBdICYgMzEgLyogSGFzQXR0cmlidXRlICovKS5tYXAoKFtwcm9wTmFtZSwgbV0pID0+IHtcbiAgICAgICAgICAgIHZhciBfYTI7XG4gICAgICAgICAgICBjb25zdCBhdHRyTmFtZSA9IG1bMV0gfHwgcHJvcE5hbWU7XG4gICAgICAgICAgICBhdHRyTmFtZVRvUHJvcE5hbWUuc2V0KGF0dHJOYW1lLCBwcm9wTmFtZSk7XG4gICAgICAgICAgICBpZiAoQlVJTEQyMy5yZWZsZWN0ICYmIG1bMF0gJiA1MTIgLyogUmVmbGVjdEF0dHIgKi8pIHtcbiAgICAgICAgICAgICAgKF9hMiA9IGNtcE1ldGEuJGF0dHJzVG9SZWZsZWN0JCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5wdXNoKFtwcm9wTmFtZSwgYXR0ck5hbWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhdHRyTmFtZTtcbiAgICAgICAgICB9KVxuICAgICAgICBdKVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIENzdHI7XG59O1xuXG4vLyBzcmMvcnVudGltZS9pbml0aWFsaXplLWNvbXBvbmVudC50c1xudmFyIGluaXRpYWxpemVDb21wb25lbnQgPSBhc3luYyAoZWxtLCBob3N0UmVmLCBjbXBNZXRhLCBobXJWZXJzaW9uSWQpID0+IHtcbiAgbGV0IENzdHI7XG4gIGlmICgoaG9zdFJlZi4kZmxhZ3MkICYgMzIgLyogaGFzSW5pdGlhbGl6ZWRDb21wb25lbnQgKi8pID09PSAwKSB7XG4gICAgaG9zdFJlZi4kZmxhZ3MkIHw9IDMyIC8qIGhhc0luaXRpYWxpemVkQ29tcG9uZW50ICovO1xuICAgIGNvbnN0IGJ1bmRsZUlkID0gY21wTWV0YS4kbGF6eUJ1bmRsZUlkJDtcbiAgICBpZiAoQlVJTEQyNC5sYXp5TG9hZCAmJiBidW5kbGVJZCkge1xuICAgICAgY29uc3QgQ3N0ckltcG9ydCA9IGxvYWRNb2R1bGUoY21wTWV0YSwgaG9zdFJlZiwgaG1yVmVyc2lvbklkKTtcbiAgICAgIGlmIChDc3RySW1wb3J0ICYmIFwidGhlblwiIGluIENzdHJJbXBvcnQpIHtcbiAgICAgICAgY29uc3QgZW5kTG9hZCA9IHVuaXF1ZVRpbWUoXG4gICAgICAgICAgYHN0OmxvYWQ6JHtjbXBNZXRhLiR0YWdOYW1lJH06JHtob3N0UmVmLiRtb2RlTmFtZSR9YCxcbiAgICAgICAgICBgW1N0ZW5jaWxdIExvYWQgbW9kdWxlIGZvciA8JHtjbXBNZXRhLiR0YWdOYW1lJH0+YFxuICAgICAgICApO1xuICAgICAgICBDc3RyID0gYXdhaXQgQ3N0ckltcG9ydDtcbiAgICAgICAgZW5kTG9hZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgQ3N0ciA9IENzdHJJbXBvcnQ7XG4gICAgICB9XG4gICAgICBpZiAoIUNzdHIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb25zdHJ1Y3RvciBmb3IgXCIke2NtcE1ldGEuJHRhZ05hbWUkfSMke2hvc3RSZWYuJG1vZGVOYW1lJH1cIiB3YXMgbm90IGZvdW5kYCk7XG4gICAgICB9XG4gICAgICBpZiAoQlVJTEQyNC5tZW1iZXIgJiYgIUNzdHIuaXNQcm94aWVkKSB7XG4gICAgICAgIGlmIChCVUlMRDI0LnByb3BDaGFuZ2VDYWxsYmFjaykge1xuICAgICAgICAgIGNtcE1ldGEuJHdhdGNoZXJzJCA9IENzdHIud2F0Y2hlcnM7XG4gICAgICAgICAgY21wTWV0YS4kc2VyaWFsaXplcnMkID0gQ3N0ci5zZXJpYWxpemVycztcbiAgICAgICAgICBjbXBNZXRhLiRkZXNlcmlhbGl6ZXJzJCA9IENzdHIuZGVzZXJpYWxpemVycztcbiAgICAgICAgfVxuICAgICAgICBwcm94eUNvbXBvbmVudChDc3RyLCBjbXBNZXRhLCAyIC8qIHByb3h5U3RhdGUgKi8pO1xuICAgICAgICBDc3RyLmlzUHJveGllZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBjb25zdCBlbmROZXdJbnN0YW5jZSA9IGNyZWF0ZVRpbWUoXCJjcmVhdGVJbnN0YW5jZVwiLCBjbXBNZXRhLiR0YWdOYW1lJCk7XG4gICAgICBpZiAoQlVJTEQyNC5tZW1iZXIpIHtcbiAgICAgICAgaG9zdFJlZi4kZmxhZ3MkIHw9IDggLyogaXNDb25zdHJ1Y3RpbmdJbnN0YW5jZSAqLztcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIG5ldyBDc3RyKGhvc3RSZWYpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlRXJyb3IoZSwgZWxtKTtcbiAgICAgIH1cbiAgICAgIGlmIChCVUlMRDI0Lm1lbWJlcikge1xuICAgICAgICBob3N0UmVmLiRmbGFncyQgJj0gfjggLyogaXNDb25zdHJ1Y3RpbmdJbnN0YW5jZSAqLztcbiAgICAgIH1cbiAgICAgIGlmIChCVUlMRDI0LnByb3BDaGFuZ2VDYWxsYmFjaykge1xuICAgICAgICBob3N0UmVmLiRmbGFncyQgfD0gMTI4IC8qIGlzV2F0Y2hSZWFkeSAqLztcbiAgICAgIH1cbiAgICAgIGVuZE5ld0luc3RhbmNlKCk7XG4gICAgICBmaXJlQ29ubmVjdGVkQ2FsbGJhY2soaG9zdFJlZi4kbGF6eUluc3RhbmNlJCwgZWxtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgQ3N0ciA9IGVsbS5jb25zdHJ1Y3RvcjtcbiAgICAgIGNvbnN0IGNtcFRhZyA9IGVsbS5sb2NhbE5hbWU7XG4gICAgICBjdXN0b21FbGVtZW50cy53aGVuRGVmaW5lZChjbXBUYWcpLnRoZW4oKCkgPT4gaG9zdFJlZi4kZmxhZ3MkIHw9IDEyOCAvKiBpc1dhdGNoUmVhZHkgKi8pO1xuICAgIH1cbiAgICBpZiAoQlVJTEQyNC5zdHlsZSAmJiBDc3RyICYmIENzdHIuc3R5bGUpIHtcbiAgICAgIGxldCBzdHlsZTtcbiAgICAgIGlmICh0eXBlb2YgQ3N0ci5zdHlsZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBzdHlsZSA9IENzdHIuc3R5bGU7XG4gICAgICB9IGVsc2UgaWYgKEJVSUxEMjQubW9kZSAmJiB0eXBlb2YgQ3N0ci5zdHlsZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBob3N0UmVmLiRtb2RlTmFtZSQgPSBjb21wdXRlTW9kZShlbG0pO1xuICAgICAgICBpZiAoaG9zdFJlZi4kbW9kZU5hbWUkKSB7XG4gICAgICAgICAgc3R5bGUgPSBDc3RyLnN0eWxlW2hvc3RSZWYuJG1vZGVOYW1lJF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEJVSUxEMjQuaHlkcmF0ZVNlcnZlclNpZGUgJiYgaG9zdFJlZi4kbW9kZU5hbWUkKSB7XG4gICAgICAgICAgZWxtLnNldEF0dHJpYnV0ZShcInMtbW9kZVwiLCBob3N0UmVmLiRtb2RlTmFtZSQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBzY29wZUlkMiA9IGdldFNjb3BlSWQoY21wTWV0YSwgaG9zdFJlZi4kbW9kZU5hbWUkKTtcbiAgICAgIGlmICghc3R5bGVzLmhhcyhzY29wZUlkMikpIHtcbiAgICAgICAgY29uc3QgZW5kUmVnaXN0ZXJTdHlsZXMgPSBjcmVhdGVUaW1lKFwicmVnaXN0ZXJTdHlsZXNcIiwgY21wTWV0YS4kdGFnTmFtZSQpO1xuICAgICAgICBpZiAoQlVJTEQyNC5oeWRyYXRlU2VydmVyU2lkZSAmJiBCVUlMRDI0LnNoYWRvd0RvbSkge1xuICAgICAgICAgIGlmIChjbXBNZXRhLiRmbGFncyQgJiAxMjggLyogc2hhZG93TmVlZHNTY29wZWRDc3MgKi8pIHtcbiAgICAgICAgICAgIHN0eWxlID0gc2NvcGVDc3Moc3R5bGUsIHNjb3BlSWQyLCB0cnVlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5lZWRzU2NvcGVkU1NSKCkpIHtcbiAgICAgICAgICAgIHN0eWxlID0gZXhwYW5kUGFydFNlbGVjdG9ycyhzdHlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlZ2lzdGVyU3R5bGUoc2NvcGVJZDIsIHN0eWxlLCAhIShjbXBNZXRhLiRmbGFncyQgJiAxIC8qIHNoYWRvd0RvbUVuY2Fwc3VsYXRpb24gKi8pKTtcbiAgICAgICAgZW5kUmVnaXN0ZXJTdHlsZXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29uc3QgYW5jZXN0b3JDb21wb25lbnQgPSBob3N0UmVmLiRhbmNlc3RvckNvbXBvbmVudCQ7XG4gIGNvbnN0IHNjaGVkdWxlID0gKCkgPT4gc2NoZWR1bGVVcGRhdGUoaG9zdFJlZiwgdHJ1ZSk7XG4gIGlmIChCVUlMRDI0LmFzeW5jTG9hZGluZyAmJiBhbmNlc3RvckNvbXBvbmVudCAmJiBhbmNlc3RvckNvbXBvbmVudFtcInMtcmNcIl0pIHtcbiAgICBhbmNlc3RvckNvbXBvbmVudFtcInMtcmNcIl0ucHVzaChzY2hlZHVsZSk7XG4gIH0gZWxzZSB7XG4gICAgc2NoZWR1bGUoKTtcbiAgfVxufTtcbnZhciBmaXJlQ29ubmVjdGVkQ2FsbGJhY2sgPSAoaW5zdGFuY2UsIGVsbSkgPT4ge1xuICBpZiAoQlVJTEQyNC5sYXp5TG9hZCkge1xuICAgIHNhZmVDYWxsKGluc3RhbmNlLCBcImNvbm5lY3RlZENhbGxiYWNrXCIsIHZvaWQgMCwgZWxtKTtcbiAgfVxufTtcblxuLy8gc3JjL3J1bnRpbWUvY29ubmVjdGVkLWNhbGxiYWNrLnRzXG52YXIgY29ubmVjdGVkQ2FsbGJhY2sgPSAoZWxtKSA9PiB7XG4gIGlmICgocGx0LiRmbGFncyQgJiAxIC8qIGlzVG1wRGlzY29ubmVjdGVkICovKSA9PT0gMCkge1xuICAgIGNvbnN0IGhvc3RSZWYgPSBnZXRIb3N0UmVmKGVsbSk7XG4gICAgaWYgKCFob3N0UmVmKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNtcE1ldGEgPSBob3N0UmVmLiRjbXBNZXRhJDtcbiAgICBjb25zdCBlbmRDb25uZWN0ZWQgPSBjcmVhdGVUaW1lKFwiY29ubmVjdGVkQ2FsbGJhY2tcIiwgY21wTWV0YS4kdGFnTmFtZSQpO1xuICAgIGlmIChCVUlMRDI1Lmhvc3RMaXN0ZW5lclRhcmdldFBhcmVudCkge1xuICAgICAgYWRkSG9zdEV2ZW50TGlzdGVuZXJzKGVsbSwgaG9zdFJlZiwgY21wTWV0YS4kbGlzdGVuZXJzJCwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmICghKGhvc3RSZWYuJGZsYWdzJCAmIDEgLyogaGFzQ29ubmVjdGVkICovKSkge1xuICAgICAgaG9zdFJlZi4kZmxhZ3MkIHw9IDEgLyogaGFzQ29ubmVjdGVkICovO1xuICAgICAgbGV0IGhvc3RJZDtcbiAgICAgIGlmIChCVUlMRDI1Lmh5ZHJhdGVDbGllbnRTaWRlKSB7XG4gICAgICAgIGhvc3RJZCA9IGVsbS5nZXRBdHRyaWJ1dGUoSFlEUkFURV9JRCk7XG4gICAgICAgIGlmIChob3N0SWQpIHtcbiAgICAgICAgICBpZiAoQlVJTEQyNS5zaGFkb3dEb20gJiYgc3VwcG9ydHNTaGFkb3cgJiYgY21wTWV0YS4kZmxhZ3MkICYgMSAvKiBzaGFkb3dEb21FbmNhcHN1bGF0aW9uICovKSB7XG4gICAgICAgICAgICBjb25zdCBzY29wZUlkMiA9IEJVSUxEMjUubW9kZSA/IGFkZFN0eWxlKGVsbS5zaGFkb3dSb290LCBjbXBNZXRhLCBlbG0uZ2V0QXR0cmlidXRlKFwicy1tb2RlXCIpKSA6IGFkZFN0eWxlKGVsbS5zaGFkb3dSb290LCBjbXBNZXRhKTtcbiAgICAgICAgICAgIGVsbS5jbGFzc0xpc3QucmVtb3ZlKHNjb3BlSWQyICsgXCItaFwiLCBzY29wZUlkMiArIFwiLXNcIik7XG4gICAgICAgICAgfSBlbHNlIGlmIChCVUlMRDI1LnNjb3BlZCAmJiBjbXBNZXRhLiRmbGFncyQgJiAyIC8qIHNjb3BlZENzc0VuY2Fwc3VsYXRpb24gKi8pIHtcbiAgICAgICAgICAgIGNvbnN0IHNjb3BlSWQyID0gZ2V0U2NvcGVJZChjbXBNZXRhLCBCVUlMRDI1Lm1vZGUgPyBlbG0uZ2V0QXR0cmlidXRlKFwicy1tb2RlXCIpIDogdm9pZCAwKTtcbiAgICAgICAgICAgIGVsbVtcInMtc2NcIl0gPSBzY29wZUlkMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5pdGlhbGl6ZUNsaWVudEh5ZHJhdGUoZWxtLCBjbXBNZXRhLiR0YWdOYW1lJCwgaG9zdElkLCBob3N0UmVmKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKEJVSUxEMjUuc2xvdFJlbG9jYXRpb24gJiYgIWhvc3RJZCkge1xuICAgICAgICBpZiAoQlVJTEQyNS5oeWRyYXRlU2VydmVyU2lkZSB8fCAoQlVJTEQyNS5zbG90IHx8IEJVSUxEMjUuc2hhZG93RG9tKSAmJiAvLyBUT0RPKFNURU5DSUwtODU0KTogUmVtb3ZlIGNvZGUgcmVsYXRlZCB0byBsZWdhY3kgc2hhZG93RG9tU2hpbSBmaWVsZFxuICAgICAgICBjbXBNZXRhLiRmbGFncyQgJiAoNCAvKiBoYXNTbG90UmVsb2NhdGlvbiAqLyB8IDggLyogbmVlZHNTaGFkb3dEb21TaGltICovKSkge1xuICAgICAgICAgIHNldENvbnRlbnRSZWZlcmVuY2UoZWxtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKEJVSUxEMjUuYXN5bmNMb2FkaW5nKSB7XG4gICAgICAgIGxldCBhbmNlc3RvckNvbXBvbmVudCA9IGVsbTtcbiAgICAgICAgd2hpbGUgKGFuY2VzdG9yQ29tcG9uZW50ID0gYW5jZXN0b3JDb21wb25lbnQucGFyZW50Tm9kZSB8fCBhbmNlc3RvckNvbXBvbmVudC5ob3N0KSB7XG4gICAgICAgICAgaWYgKEJVSUxEMjUuaHlkcmF0ZUNsaWVudFNpZGUgJiYgYW5jZXN0b3JDb21wb25lbnQubm9kZVR5cGUgPT09IDEgLyogRWxlbWVudE5vZGUgKi8gJiYgYW5jZXN0b3JDb21wb25lbnQuaGFzQXR0cmlidXRlKFwicy1pZFwiKSAmJiBhbmNlc3RvckNvbXBvbmVudFtcInMtcFwiXSB8fCBhbmNlc3RvckNvbXBvbmVudFtcInMtcFwiXSkge1xuICAgICAgICAgICAgYXR0YWNoVG9BbmNlc3Rvcihob3N0UmVmLCBob3N0UmVmLiRhbmNlc3RvckNvbXBvbmVudCQgPSBhbmNlc3RvckNvbXBvbmVudCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChCVUlMRDI1LnByb3AgJiYgIUJVSUxEMjUuaHlkcmF0ZVNlcnZlclNpZGUgJiYgY21wTWV0YS4kbWVtYmVycyQpIHtcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoY21wTWV0YS4kbWVtYmVycyQpLm1hcCgoW21lbWJlck5hbWUsIFttZW1iZXJGbGFnc11dKSA9PiB7XG4gICAgICAgICAgaWYgKG1lbWJlckZsYWdzICYgMzEgLyogUHJvcCAqLyAmJiBtZW1iZXJOYW1lIGluIGVsbSAmJiBlbG1bbWVtYmVyTmFtZV0gIT09IE9iamVjdC5wcm90b3R5cGVbbWVtYmVyTmFtZV0pIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZWxtW21lbWJlck5hbWVdO1xuICAgICAgICAgICAgZGVsZXRlIGVsbVttZW1iZXJOYW1lXTtcbiAgICAgICAgICAgIGVsbVttZW1iZXJOYW1lXSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoQlVJTEQyNS5pbml0aWFsaXplTmV4dFRpY2spIHtcbiAgICAgICAgbmV4dFRpY2soKCkgPT4gaW5pdGlhbGl6ZUNvbXBvbmVudChlbG0sIGhvc3RSZWYsIGNtcE1ldGEpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluaXRpYWxpemVDb21wb25lbnQoZWxtLCBob3N0UmVmLCBjbXBNZXRhKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYWRkSG9zdEV2ZW50TGlzdGVuZXJzKGVsbSwgaG9zdFJlZiwgY21wTWV0YS4kbGlzdGVuZXJzJCwgZmFsc2UpO1xuICAgICAgaWYgKGhvc3RSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IGhvc3RSZWYuJGxhenlJbnN0YW5jZSQpIHtcbiAgICAgICAgZmlyZUNvbm5lY3RlZENhbGxiYWNrKGhvc3RSZWYuJGxhenlJbnN0YW5jZSQsIGVsbSk7XG4gICAgICB9IGVsc2UgaWYgKGhvc3RSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IGhvc3RSZWYuJG9uUmVhZHlQcm9taXNlJCkge1xuICAgICAgICBob3N0UmVmLiRvblJlYWR5UHJvbWlzZSQudGhlbigoKSA9PiBmaXJlQ29ubmVjdGVkQ2FsbGJhY2soaG9zdFJlZi4kbGF6eUluc3RhbmNlJCwgZWxtKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGVuZENvbm5lY3RlZCgpO1xuICB9XG59O1xudmFyIHNldENvbnRlbnRSZWZlcmVuY2UgPSAoZWxtKSA9PiB7XG4gIGlmICghd2luLmRvY3VtZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGNvbnRlbnRSZWZFbG0gPSBlbG1bXCJzLWNyXCJdID0gd2luLmRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoXG4gICAgQlVJTEQyNS5pc0RlYnVnID8gYGNvbnRlbnQtcmVmIChob3N0PSR7ZWxtLmxvY2FsTmFtZX0pYCA6IFwiXCJcbiAgKTtcbiAgY29udGVudFJlZkVsbVtcInMtY25cIl0gPSB0cnVlO1xuICBpbnNlcnRCZWZvcmUoZWxtLCBjb250ZW50UmVmRWxtLCBlbG0uZmlyc3RDaGlsZCk7XG59O1xuXG4vLyBzcmMvcnVudGltZS9kaXNjb25uZWN0ZWQtY2FsbGJhY2sudHNcbmltcG9ydCB7IEJVSUxEIGFzIEJVSUxEMjYgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xudmFyIGRpc2Nvbm5lY3RJbnN0YW5jZSA9IChpbnN0YW5jZSwgZWxtKSA9PiB7XG4gIGlmIChCVUlMRDI2LmxhenlMb2FkKSB7XG4gICAgc2FmZUNhbGwoaW5zdGFuY2UsIFwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIiwgdm9pZCAwLCBlbG0gfHwgaW5zdGFuY2UpO1xuICB9XG59O1xudmFyIGRpc2Nvbm5lY3RlZENhbGxiYWNrID0gYXN5bmMgKGVsbSkgPT4ge1xuICBpZiAoKHBsdC4kZmxhZ3MkICYgMSAvKiBpc1RtcERpc2Nvbm5lY3RlZCAqLykgPT09IDApIHtcbiAgICBjb25zdCBob3N0UmVmID0gZ2V0SG9zdFJlZihlbG0pO1xuICAgIGlmIChCVUlMRDI2Lmhvc3RMaXN0ZW5lcikge1xuICAgICAgaWYgKGhvc3RSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IGhvc3RSZWYuJHJtTGlzdGVuZXJzJCkge1xuICAgICAgICBob3N0UmVmLiRybUxpc3RlbmVycyQubWFwKChybUxpc3RlbmVyKSA9PiBybUxpc3RlbmVyKCkpO1xuICAgICAgICBob3N0UmVmLiRybUxpc3RlbmVycyQgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghQlVJTEQyNi5sYXp5TG9hZCkge1xuICAgICAgZGlzY29ubmVjdEluc3RhbmNlKGVsbSk7XG4gICAgfSBlbHNlIGlmIChob3N0UmVmID09IG51bGwgPyB2b2lkIDAgOiBob3N0UmVmLiRsYXp5SW5zdGFuY2UkKSB7XG4gICAgICBkaXNjb25uZWN0SW5zdGFuY2UoaG9zdFJlZi4kbGF6eUluc3RhbmNlJCwgZWxtKTtcbiAgICB9IGVsc2UgaWYgKGhvc3RSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IGhvc3RSZWYuJG9uUmVhZHlQcm9taXNlJCkge1xuICAgICAgaG9zdFJlZi4kb25SZWFkeVByb21pc2UkLnRoZW4oKCkgPT4gZGlzY29ubmVjdEluc3RhbmNlKGhvc3RSZWYuJGxhenlJbnN0YW5jZSQsIGVsbSkpO1xuICAgIH1cbiAgfVxuICBpZiAocm9vdEFwcGxpZWRTdHlsZXMuaGFzKGVsbSkpIHtcbiAgICByb290QXBwbGllZFN0eWxlcy5kZWxldGUoZWxtKTtcbiAgfVxuICBpZiAoZWxtLnNoYWRvd1Jvb3QgJiYgcm9vdEFwcGxpZWRTdHlsZXMuaGFzKGVsbS5zaGFkb3dSb290KSkge1xuICAgIHJvb3RBcHBsaWVkU3R5bGVzLmRlbGV0ZShlbG0uc2hhZG93Um9vdCk7XG4gIH1cbn07XG5cbi8vIHNyYy9ydW50aW1lL2Jvb3RzdHJhcC1jdXN0b20tZWxlbWVudC50c1xudmFyIGRlZmluZUN1c3RvbUVsZW1lbnQgPSAoQ3N0ciwgY29tcGFjdE1ldGEpID0+IHtcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKGNvbXBhY3RNZXRhWzFdLCBwcm94eUN1c3RvbUVsZW1lbnQoQ3N0ciwgY29tcGFjdE1ldGEpKTtcbn07XG52YXIgcHJveHlDdXN0b21FbGVtZW50ID0gKENzdHIsIGNvbXBhY3RNZXRhKSA9PiB7XG4gIGNvbnN0IGNtcE1ldGEgPSB7XG4gICAgJGZsYWdzJDogY29tcGFjdE1ldGFbMF0sXG4gICAgJHRhZ05hbWUkOiBjb21wYWN0TWV0YVsxXVxuICB9O1xuICBpZiAoQlVJTEQyNy5tZW1iZXIpIHtcbiAgICBjbXBNZXRhLiRtZW1iZXJzJCA9IGNvbXBhY3RNZXRhWzJdO1xuICB9XG4gIGlmIChCVUlMRDI3Lmhvc3RMaXN0ZW5lcikge1xuICAgIGNtcE1ldGEuJGxpc3RlbmVycyQgPSBjb21wYWN0TWV0YVszXTtcbiAgfVxuICBpZiAoQlVJTEQyNy5wcm9wQ2hhbmdlQ2FsbGJhY2spIHtcbiAgICBjbXBNZXRhLiR3YXRjaGVycyQgPSBDc3RyLiR3YXRjaGVycyQ7XG4gICAgY21wTWV0YS4kZGVzZXJpYWxpemVycyQgPSBDc3RyLiRkZXNlcmlhbGl6ZXJzJDtcbiAgICBjbXBNZXRhLiRzZXJpYWxpemVycyQgPSBDc3RyLiRzZXJpYWxpemVycyQ7XG4gIH1cbiAgaWYgKEJVSUxEMjcucmVmbGVjdCkge1xuICAgIGNtcE1ldGEuJGF0dHJzVG9SZWZsZWN0JCA9IFtdO1xuICB9XG4gIGlmIChCVUlMRDI3LnNoYWRvd0RvbSAmJiAhc3VwcG9ydHNTaGFkb3cgJiYgY21wTWV0YS4kZmxhZ3MkICYgMSAvKiBzaGFkb3dEb21FbmNhcHN1bGF0aW9uICovKSB7XG4gICAgY21wTWV0YS4kZmxhZ3MkIHw9IDggLyogbmVlZHNTaGFkb3dEb21TaGltICovO1xuICB9XG4gIGlmICghKGNtcE1ldGEuJGZsYWdzJCAmIDEgLyogc2hhZG93RG9tRW5jYXBzdWxhdGlvbiAqLykgJiYgY21wTWV0YS4kZmxhZ3MkICYgMjU2IC8qIGhhc1JlbmRlckZuICovKSB7XG4gICAgaWYgKEJVSUxEMjcuZXhwZXJpbWVudGFsU2xvdEZpeGVzKSB7XG4gICAgICBwYXRjaFBzZXVkb1NoYWRvd0RvbShDc3RyLnByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChCVUlMRDI3LnNsb3RDaGlsZE5vZGVzRml4KSB7XG4gICAgICAgIHBhdGNoQ2hpbGRTbG90Tm9kZXMoQ3N0ci5wcm90b3R5cGUpO1xuICAgICAgfVxuICAgICAgaWYgKEJVSUxEMjcuY2xvbmVOb2RlRml4KSB7XG4gICAgICAgIHBhdGNoQ2xvbmVOb2RlKENzdHIucHJvdG90eXBlKTtcbiAgICAgIH1cbiAgICAgIGlmIChCVUlMRDI3LmFwcGVuZENoaWxkU2xvdEZpeCkge1xuICAgICAgICBwYXRjaFNsb3RBcHBlbmRDaGlsZChDc3RyLnByb3RvdHlwZSk7XG4gICAgICB9XG4gICAgICBpZiAoQlVJTEQyNy5zY29wZWRTbG90VGV4dENvbnRlbnRGaXggJiYgY21wTWV0YS4kZmxhZ3MkICYgMiAvKiBzY29wZWRDc3NFbmNhcHN1bGF0aW9uICovKSB7XG4gICAgICAgIHBhdGNoVGV4dENvbnRlbnQoQ3N0ci5wcm90b3R5cGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoQlVJTEQyNy5oeWRyYXRlQ2xpZW50U2lkZSAmJiBCVUlMRDI3LnNoYWRvd0RvbSkge1xuICAgIGh5ZHJhdGVTY29wZWRUb1NoYWRvdygpO1xuICB9XG4gIGNvbnN0IG9yaWdpbmFsQ29ubmVjdGVkQ2FsbGJhY2sgPSBDc3RyLnByb3RvdHlwZS5jb25uZWN0ZWRDYWxsYmFjaztcbiAgY29uc3Qgb3JpZ2luYWxEaXNjb25uZWN0ZWRDYWxsYmFjayA9IENzdHIucHJvdG90eXBlLmRpc2Nvbm5lY3RlZENhbGxiYWNrO1xuICBPYmplY3QuYXNzaWduKENzdHIucHJvdG90eXBlLCB7XG4gICAgX19oYXNIb3N0TGlzdGVuZXJBdHRhY2hlZDogZmFsc2UsXG4gICAgX19yZWdpc3Rlckhvc3QoKSB7XG4gICAgICByZWdpc3Rlckhvc3QodGhpcywgY21wTWV0YSk7XG4gICAgfSxcbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgIGlmICghdGhpcy5fX2hhc0hvc3RMaXN0ZW5lckF0dGFjaGVkKSB7XG4gICAgICAgIGNvbnN0IGhvc3RSZWYgPSBnZXRIb3N0UmVmKHRoaXMpO1xuICAgICAgICBpZiAoIWhvc3RSZWYpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYWRkSG9zdEV2ZW50TGlzdGVuZXJzKHRoaXMsIGhvc3RSZWYsIGNtcE1ldGEuJGxpc3RlbmVycyQsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5fX2hhc0hvc3RMaXN0ZW5lckF0dGFjaGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGNvbm5lY3RlZENhbGxiYWNrKHRoaXMpO1xuICAgICAgaWYgKG9yaWdpbmFsQ29ubmVjdGVkQ2FsbGJhY2spIHtcbiAgICAgICAgb3JpZ2luYWxDb25uZWN0ZWRDYWxsYmFjay5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICBkaXNjb25uZWN0ZWRDYWxsYmFjayh0aGlzKTtcbiAgICAgIGlmIChvcmlnaW5hbERpc2Nvbm5lY3RlZENhbGxiYWNrKSB7XG4gICAgICAgIG9yaWdpbmFsRGlzY29ubmVjdGVkQ2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIF9fYXR0YWNoU2hhZG93KCkge1xuICAgICAgaWYgKHN1cHBvcnRzU2hhZG93KSB7XG4gICAgICAgIGlmICghdGhpcy5zaGFkb3dSb290KSB7XG4gICAgICAgICAgY3JlYXRlU2hhZG93Um9vdC5jYWxsKHRoaXMsIGNtcE1ldGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLnNoYWRvd1Jvb3QubW9kZSAhPT0gXCJvcGVuXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYFVuYWJsZSB0byByZS11c2UgZXhpc3Rpbmcgc2hhZG93IHJvb3QgZm9yICR7Y21wTWV0YS4kdGFnTmFtZSR9ISBNb2RlIGlzIHNldCB0byAke3RoaXMuc2hhZG93Um9vdC5tb2RlfSBidXQgU3RlbmNpbCBvbmx5IHN1cHBvcnRzIG9wZW4gc2hhZG93IHJvb3RzLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QgPSB0aGlzO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIENzdHIuaXMgPSBjbXBNZXRhLiR0YWdOYW1lJDtcbiAgcmV0dXJuIHByb3h5Q29tcG9uZW50KENzdHIsIGNtcE1ldGEsIDEgLyogaXNFbGVtZW50Q29uc3RydWN0b3IgKi8gfCAyIC8qIHByb3h5U3RhdGUgKi8pO1xufTtcbnZhciBmb3JjZU1vZGVVcGRhdGUgPSAoZWxtKSA9PiB7XG4gIGlmIChCVUlMRDI3LnN0eWxlICYmIEJVSUxEMjcubW9kZSAmJiAhQlVJTEQyNy5sYXp5TG9hZCkge1xuICAgIGNvbnN0IG1vZGUgPSBjb21wdXRlTW9kZShlbG0pO1xuICAgIGNvbnN0IGhvc3RSZWYgPSBnZXRIb3N0UmVmKGVsbSk7XG4gICAgaWYgKGhvc3RSZWYgJiYgaG9zdFJlZi4kbW9kZU5hbWUkICE9PSBtb2RlKSB7XG4gICAgICBjb25zdCBjbXBNZXRhID0gaG9zdFJlZi4kY21wTWV0YSQ7XG4gICAgICBjb25zdCBvbGRTY29wZUlkID0gZWxtW1wicy1zY1wiXTtcbiAgICAgIGNvbnN0IHNjb3BlSWQyID0gZ2V0U2NvcGVJZChjbXBNZXRhLCBtb2RlKTtcbiAgICAgIGNvbnN0IHN0eWxlID0gZWxtLmNvbnN0cnVjdG9yLnN0eWxlW21vZGVdO1xuICAgICAgY29uc3QgZmxhZ3MgPSBjbXBNZXRhLiRmbGFncyQ7XG4gICAgICBpZiAoc3R5bGUpIHtcbiAgICAgICAgaWYgKCFzdHlsZXMuaGFzKHNjb3BlSWQyKSkge1xuICAgICAgICAgIHJlZ2lzdGVyU3R5bGUoc2NvcGVJZDIsIHN0eWxlLCAhIShmbGFncyAmIDEgLyogc2hhZG93RG9tRW5jYXBzdWxhdGlvbiAqLykpO1xuICAgICAgICB9XG4gICAgICAgIGhvc3RSZWYuJG1vZGVOYW1lJCA9IG1vZGU7XG4gICAgICAgIGVsbS5jbGFzc0xpc3QucmVtb3ZlKG9sZFNjb3BlSWQgKyBcIi1oXCIsIG9sZFNjb3BlSWQgKyBcIi1zXCIpO1xuICAgICAgICBhdHRhY2hTdHlsZXMoaG9zdFJlZik7XG4gICAgICAgIGZvcmNlVXBkYXRlKGVsbSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvcnVudGltZS9ib290c3RyYXAtbGF6eS50c1xuaW1wb3J0IHsgQlVJTEQgYXMgQlVJTEQyOCB9IGZyb20gXCJAc3RlbmNpbC9jb3JlL2ludGVybmFsL2FwcC1kYXRhXCI7XG5cbi8vIHNyYy9ydW50aW1lL2htci1jb21wb25lbnQudHNcbnZhciBobXJTdGFydCA9IChob3N0RWxlbWVudCwgY21wTWV0YSwgaG1yVmVyc2lvbklkKSA9PiB7XG4gIGNvbnN0IGhvc3RSZWYgPSBnZXRIb3N0UmVmKGhvc3RFbGVtZW50KTtcbiAgaWYgKCFob3N0UmVmKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGhvc3RSZWYuJGZsYWdzJCA9IDEgLyogaGFzQ29ubmVjdGVkICovO1xuICBpbml0aWFsaXplQ29tcG9uZW50KGhvc3RFbGVtZW50LCBob3N0UmVmLCBjbXBNZXRhLCBobXJWZXJzaW9uSWQpO1xufTtcblxuLy8gc3JjL3J1bnRpbWUvYm9vdHN0cmFwLWxhenkudHNcbnZhciBib290c3RyYXBMYXp5ID0gKGxhenlCdW5kbGVzLCBvcHRpb25zID0ge30pID0+IHtcbiAgdmFyIF9hO1xuICBpZiAoQlVJTEQyOC5wcm9maWxlICYmIHBlcmZvcm1hbmNlLm1hcmspIHtcbiAgICBwZXJmb3JtYW5jZS5tYXJrKFwic3Q6YXBwOnN0YXJ0XCIpO1xuICB9XG4gIGluc3RhbGxEZXZUb29scygpO1xuICBpZiAoIXdpbi5kb2N1bWVudCkge1xuICAgIGNvbnNvbGUud2FybihcIlN0ZW5jaWw6IE5vIGRvY3VtZW50IGZvdW5kLiBTa2lwcGluZyBib290c3RyYXBwaW5nIGxhenkgY29tcG9uZW50cy5cIik7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGVuZEJvb3RzdHJhcCA9IGNyZWF0ZVRpbWUoXCJib290c3RyYXBMYXp5XCIpO1xuICBjb25zdCBjbXBUYWdzID0gW107XG4gIGNvbnN0IGV4Y2x1ZGUgPSBvcHRpb25zLmV4Y2x1ZGUgfHwgW107XG4gIGNvbnN0IGN1c3RvbUVsZW1lbnRzMiA9IHdpbi5jdXN0b21FbGVtZW50cztcbiAgY29uc3QgaGVhZCA9IHdpbi5kb2N1bWVudC5oZWFkO1xuICBjb25zdCBtZXRhQ2hhcnNldCA9IC8qIEBfX1BVUkVfXyAqLyBoZWFkLnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW2NoYXJzZXRdXCIpO1xuICBjb25zdCBkYXRhU3R5bGVzID0gLyogQF9fUFVSRV9fICovIHdpbi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gIGNvbnN0IGRlZmVycmVkQ29ubmVjdGVkQ2FsbGJhY2tzID0gW107XG4gIGxldCBhcHBMb2FkRmFsbGJhY2s7XG4gIGxldCBpc0Jvb3RzdHJhcHBpbmcgPSB0cnVlO1xuICBPYmplY3QuYXNzaWduKHBsdCwgb3B0aW9ucyk7XG4gIHBsdC4kcmVzb3VyY2VzVXJsJCA9IG5ldyBVUkwob3B0aW9ucy5yZXNvdXJjZXNVcmwgfHwgXCIuL1wiLCB3aW4uZG9jdW1lbnQuYmFzZVVSSSkuaHJlZjtcbiAgaWYgKEJVSUxEMjguYXN5bmNRdWV1ZSkge1xuICAgIGlmIChvcHRpb25zLnN5bmNRdWV1ZSkge1xuICAgICAgcGx0LiRmbGFncyQgfD0gNCAvKiBxdWV1ZVN5bmMgKi87XG4gICAgfVxuICB9XG4gIGlmIChCVUlMRDI4Lmh5ZHJhdGVDbGllbnRTaWRlKSB7XG4gICAgcGx0LiRmbGFncyQgfD0gMiAvKiBhcHBMb2FkZWQgKi87XG4gIH1cbiAgaWYgKEJVSUxEMjguaHlkcmF0ZUNsaWVudFNpZGUgJiYgQlVJTEQyOC5zaGFkb3dEb20pIHtcbiAgICBoeWRyYXRlU2NvcGVkVG9TaGFkb3coKTtcbiAgfVxuICBsZXQgaGFzU2xvdFJlbG9jYXRpb24gPSBmYWxzZTtcbiAgbGF6eUJ1bmRsZXMubWFwKChsYXp5QnVuZGxlKSA9PiB7XG4gICAgbGF6eUJ1bmRsZVsxXS5tYXAoKGNvbXBhY3RNZXRhKSA9PiB7XG4gICAgICB2YXIgX2EyLCBfYiwgX2M7XG4gICAgICBjb25zdCBjbXBNZXRhID0ge1xuICAgICAgICAkZmxhZ3MkOiBjb21wYWN0TWV0YVswXSxcbiAgICAgICAgJHRhZ05hbWUkOiBjb21wYWN0TWV0YVsxXSxcbiAgICAgICAgJG1lbWJlcnMkOiBjb21wYWN0TWV0YVsyXSxcbiAgICAgICAgJGxpc3RlbmVycyQ6IGNvbXBhY3RNZXRhWzNdXG4gICAgICB9O1xuICAgICAgaWYgKGNtcE1ldGEuJGZsYWdzJCAmIDQgLyogaGFzU2xvdFJlbG9jYXRpb24gKi8pIHtcbiAgICAgICAgaGFzU2xvdFJlbG9jYXRpb24gPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKEJVSUxEMjgubWVtYmVyKSB7XG4gICAgICAgIGNtcE1ldGEuJG1lbWJlcnMkID0gY29tcGFjdE1ldGFbMl07XG4gICAgICB9XG4gICAgICBpZiAoQlVJTEQyOC5ob3N0TGlzdGVuZXIpIHtcbiAgICAgICAgY21wTWV0YS4kbGlzdGVuZXJzJCA9IGNvbXBhY3RNZXRhWzNdO1xuICAgICAgfVxuICAgICAgaWYgKEJVSUxEMjgucmVmbGVjdCkge1xuICAgICAgICBjbXBNZXRhLiRhdHRyc1RvUmVmbGVjdCQgPSBbXTtcbiAgICAgIH1cbiAgICAgIGlmIChCVUlMRDI4LnByb3BDaGFuZ2VDYWxsYmFjaykge1xuICAgICAgICBjbXBNZXRhLiR3YXRjaGVycyQgPSAoX2EyID0gY29tcGFjdE1ldGFbNF0pICE9IG51bGwgPyBfYTIgOiB7fTtcbiAgICAgICAgY21wTWV0YS4kc2VyaWFsaXplcnMkID0gKF9iID0gY29tcGFjdE1ldGFbNV0pICE9IG51bGwgPyBfYiA6IHt9O1xuICAgICAgICBjbXBNZXRhLiRkZXNlcmlhbGl6ZXJzJCA9IChfYyA9IGNvbXBhY3RNZXRhWzZdKSAhPSBudWxsID8gX2MgOiB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChCVUlMRDI4LnNoYWRvd0RvbSAmJiAhc3VwcG9ydHNTaGFkb3cgJiYgY21wTWV0YS4kZmxhZ3MkICYgMSAvKiBzaGFkb3dEb21FbmNhcHN1bGF0aW9uICovKSB7XG4gICAgICAgIGNtcE1ldGEuJGZsYWdzJCB8PSA4IC8qIG5lZWRzU2hhZG93RG9tU2hpbSAqLztcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRhZ05hbWUgPSBCVUlMRDI4LnRyYW5zZm9ybVRhZ05hbWUgJiYgb3B0aW9ucy50cmFuc2Zvcm1UYWdOYW1lID8gb3B0aW9ucy50cmFuc2Zvcm1UYWdOYW1lKGNtcE1ldGEuJHRhZ05hbWUkKSA6IGNtcE1ldGEuJHRhZ05hbWUkO1xuICAgICAgY29uc3QgSG9zdEVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICAgICAgLy8gU3RlbmNpbExhenlIb3N0XG4gICAgICAgIGNvbnN0cnVjdG9yKHNlbGYpIHtcbiAgICAgICAgICBzdXBlcihzZWxmKTtcbiAgICAgICAgICB0aGlzLmhhc1JlZ2lzdGVyZWRFdmVudExpc3RlbmVycyA9IGZhbHNlO1xuICAgICAgICAgIHNlbGYgPSB0aGlzO1xuICAgICAgICAgIHJlZ2lzdGVySG9zdChzZWxmLCBjbXBNZXRhKTtcbiAgICAgICAgICBpZiAoQlVJTEQyOC5zaGFkb3dEb20gJiYgY21wTWV0YS4kZmxhZ3MkICYgMSAvKiBzaGFkb3dEb21FbmNhcHN1bGF0aW9uICovKSB7XG4gICAgICAgICAgICBpZiAoc3VwcG9ydHNTaGFkb3cpIHtcbiAgICAgICAgICAgICAgaWYgKCFzZWxmLnNoYWRvd1Jvb3QpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVTaGFkb3dSb290LmNhbGwoc2VsZiwgY21wTWV0YSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuc2hhZG93Um9vdC5tb2RlICE9PSBcIm9wZW5cIikge1xuICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIHJlLXVzZSBleGlzdGluZyBzaGFkb3cgcm9vdCBmb3IgJHtjbXBNZXRhLiR0YWdOYW1lJH0hIE1vZGUgaXMgc2V0IHRvICR7c2VsZi5zaGFkb3dSb290Lm1vZGV9IGJ1dCBTdGVuY2lsIG9ubHkgc3VwcG9ydHMgb3BlbiBzaGFkb3cgcm9vdHMuYFxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIUJVSUxEMjguaHlkcmF0ZVNlcnZlclNpZGUgJiYgIShcInNoYWRvd1Jvb3RcIiBpbiBzZWxmKSkge1xuICAgICAgICAgICAgICBzZWxmLnNoYWRvd1Jvb3QgPSBzZWxmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICBjb25zdCBob3N0UmVmID0gZ2V0SG9zdFJlZih0aGlzKTtcbiAgICAgICAgICBpZiAoIWhvc3RSZWYpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCF0aGlzLmhhc1JlZ2lzdGVyZWRFdmVudExpc3RlbmVycykge1xuICAgICAgICAgICAgdGhpcy5oYXNSZWdpc3RlcmVkRXZlbnRMaXN0ZW5lcnMgPSB0cnVlO1xuICAgICAgICAgICAgYWRkSG9zdEV2ZW50TGlzdGVuZXJzKHRoaXMsIGhvc3RSZWYsIGNtcE1ldGEuJGxpc3RlbmVycyQsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGFwcExvYWRGYWxsYmFjaykge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFwcExvYWRGYWxsYmFjayk7XG4gICAgICAgICAgICBhcHBMb2FkRmFsbGJhY2sgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNCb290c3RyYXBwaW5nKSB7XG4gICAgICAgICAgICBkZWZlcnJlZENvbm5lY3RlZENhbGxiYWNrcy5wdXNoKHRoaXMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwbHQuam1wKCgpID0+IGNvbm5lY3RlZENhbGxiYWNrKHRoaXMpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgcGx0LmptcCgoKSA9PiBkaXNjb25uZWN0ZWRDYWxsYmFjayh0aGlzKSk7XG4gICAgICAgICAgcGx0LnJhZigoKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EzO1xuICAgICAgICAgICAgY29uc3QgaG9zdFJlZiA9IGdldEhvc3RSZWYodGhpcyk7XG4gICAgICAgICAgICBpZiAoIWhvc3RSZWYpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaTIgPSBkZWZlcnJlZENvbm5lY3RlZENhbGxiYWNrcy5maW5kSW5kZXgoKGhvc3QpID0+IGhvc3QgPT09IHRoaXMpO1xuICAgICAgICAgICAgaWYgKGkyID4gLTEpIHtcbiAgICAgICAgICAgICAgZGVmZXJyZWRDb25uZWN0ZWRDYWxsYmFja3Muc3BsaWNlKGkyLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoKF9hMyA9IGhvc3RSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IGhvc3RSZWYuJHZub2RlJCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMy4kZWxtJCkgaW5zdGFuY2VvZiBOb2RlICYmICFob3N0UmVmLiR2bm9kZSQuJGVsbSQuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgZGVsZXRlIGhvc3RSZWYuJHZub2RlJC4kZWxtJDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb21wb25lbnRPblJlYWR5KCkge1xuICAgICAgICAgIHZhciBfYTM7XG4gICAgICAgICAgcmV0dXJuIChfYTMgPSBnZXRIb3N0UmVmKHRoaXMpKSA9PSBudWxsID8gdm9pZCAwIDogX2EzLiRvblJlYWR5UHJvbWlzZSQ7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBpZiAoIShjbXBNZXRhLiRmbGFncyQgJiAxIC8qIHNoYWRvd0RvbUVuY2Fwc3VsYXRpb24gKi8pICYmIGNtcE1ldGEuJGZsYWdzJCAmIDI1NiAvKiBoYXNSZW5kZXJGbiAqLykge1xuICAgICAgICBpZiAoQlVJTEQyOC5leHBlcmltZW50YWxTbG90Rml4ZXMpIHtcbiAgICAgICAgICBwYXRjaFBzZXVkb1NoYWRvd0RvbShIb3N0RWxlbWVudC5wcm90b3R5cGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChCVUlMRDI4LnNsb3RDaGlsZE5vZGVzRml4KSB7XG4gICAgICAgICAgICBwYXRjaENoaWxkU2xvdE5vZGVzKEhvc3RFbGVtZW50LnByb3RvdHlwZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChCVUlMRDI4LmNsb25lTm9kZUZpeCkge1xuICAgICAgICAgICAgcGF0Y2hDbG9uZU5vZGUoSG9zdEVsZW1lbnQucHJvdG90eXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKEJVSUxEMjguYXBwZW5kQ2hpbGRTbG90Rml4KSB7XG4gICAgICAgICAgICBwYXRjaFNsb3RBcHBlbmRDaGlsZChIb3N0RWxlbWVudC5wcm90b3R5cGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoQlVJTEQyOC5zY29wZWRTbG90VGV4dENvbnRlbnRGaXggJiYgY21wTWV0YS4kZmxhZ3MkICYgMiAvKiBzY29wZWRDc3NFbmNhcHN1bGF0aW9uICovKSB7XG4gICAgICAgICAgICBwYXRjaFRleHRDb250ZW50KEhvc3RFbGVtZW50LnByb3RvdHlwZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoQlVJTEQyOC5mb3JtQXNzb2NpYXRlZCAmJiBjbXBNZXRhLiRmbGFncyQgJiA2NCAvKiBmb3JtQXNzb2NpYXRlZCAqLykge1xuICAgICAgICBIb3N0RWxlbWVudC5mb3JtQXNzb2NpYXRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoQlVJTEQyOC5ob3RNb2R1bGVSZXBsYWNlbWVudCkge1xuICAgICAgICBIb3N0RWxlbWVudC5wcm90b3R5cGVbXCJzLWhtclwiXSA9IGZ1bmN0aW9uKGhtclZlcnNpb25JZCkge1xuICAgICAgICAgIGhtclN0YXJ0KHRoaXMsIGNtcE1ldGEsIGhtclZlcnNpb25JZCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjbXBNZXRhLiRsYXp5QnVuZGxlSWQkID0gbGF6eUJ1bmRsZVswXTtcbiAgICAgIGlmICghZXhjbHVkZS5pbmNsdWRlcyh0YWdOYW1lKSAmJiAhY3VzdG9tRWxlbWVudHMyLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBjbXBUYWdzLnB1c2godGFnTmFtZSk7XG4gICAgICAgIGN1c3RvbUVsZW1lbnRzMi5kZWZpbmUoXG4gICAgICAgICAgdGFnTmFtZSxcbiAgICAgICAgICBwcm94eUNvbXBvbmVudChIb3N0RWxlbWVudCwgY21wTWV0YSwgMSAvKiBpc0VsZW1lbnRDb25zdHJ1Y3RvciAqLylcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIGlmIChjbXBUYWdzLmxlbmd0aCA+IDApIHtcbiAgICBpZiAoaGFzU2xvdFJlbG9jYXRpb24pIHtcbiAgICAgIGRhdGFTdHlsZXMudGV4dENvbnRlbnQgKz0gU0xPVF9GQl9DU1M7XG4gICAgfVxuICAgIGlmIChCVUlMRDI4LmludmlzaWJsZVByZWh5ZHJhdGlvbiAmJiAoQlVJTEQyOC5oeWRyYXRlZENsYXNzIHx8IEJVSUxEMjguaHlkcmF0ZWRBdHRyaWJ1dGUpKSB7XG4gICAgICBkYXRhU3R5bGVzLnRleHRDb250ZW50ICs9IGNtcFRhZ3Muc29ydCgpICsgSFlEUkFURURfQ1NTO1xuICAgIH1cbiAgICBpZiAoZGF0YVN0eWxlcy5pbm5lckhUTUwubGVuZ3RoKSB7XG4gICAgICBkYXRhU3R5bGVzLnNldEF0dHJpYnV0ZShcImRhdGEtc3R5bGVzXCIsIFwiXCIpO1xuICAgICAgY29uc3Qgbm9uY2UgPSAoX2EgPSBwbHQuJG5vbmNlJCkgIT0gbnVsbCA/IF9hIDogcXVlcnlOb25jZU1ldGFUYWdDb250ZW50KHdpbi5kb2N1bWVudCk7XG4gICAgICBpZiAobm9uY2UgIT0gbnVsbCkge1xuICAgICAgICBkYXRhU3R5bGVzLnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIG5vbmNlKTtcbiAgICAgIH1cbiAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKGRhdGFTdHlsZXMsIG1ldGFDaGFyc2V0ID8gbWV0YUNoYXJzZXQubmV4dFNpYmxpbmcgOiBoZWFkLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgfVxuICBpc0Jvb3RzdHJhcHBpbmcgPSBmYWxzZTtcbiAgaWYgKGRlZmVycmVkQ29ubmVjdGVkQ2FsbGJhY2tzLmxlbmd0aCkge1xuICAgIGRlZmVycmVkQ29ubmVjdGVkQ2FsbGJhY2tzLm1hcCgoaG9zdCkgPT4gaG9zdC5jb25uZWN0ZWRDYWxsYmFjaygpKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoQlVJTEQyOC5wcm9maWxlKSB7XG4gICAgICBwbHQuam1wKCgpID0+IGFwcExvYWRGYWxsYmFjayA9IHNldFRpbWVvdXQoYXBwRGlkTG9hZCwgMzAsIFwidGltZW91dFwiKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBsdC5qbXAoKCkgPT4gYXBwTG9hZEZhbGxiYWNrID0gc2V0VGltZW91dChhcHBEaWRMb2FkLCAzMCkpO1xuICAgIH1cbiAgfVxuICBlbmRCb290c3RyYXAoKTtcbn07XG5cbi8vIHNyYy9ydW50aW1lL2ZyYWdtZW50LnRzXG52YXIgRnJhZ21lbnQgPSAoXywgY2hpbGRyZW4pID0+IGNoaWxkcmVuO1xuXG4vLyBzcmMvcnVudGltZS9ob3N0LWxpc3RlbmVyLnRzXG5pbXBvcnQgeyBCVUlMRCBhcyBCVUlMRDI5IH0gZnJvbSBcIkBzdGVuY2lsL2NvcmUvaW50ZXJuYWwvYXBwLWRhdGFcIjtcbnZhciBhZGRIb3N0RXZlbnRMaXN0ZW5lcnMgPSAoZWxtLCBob3N0UmVmLCBsaXN0ZW5lcnMsIGF0dGFjaFBhcmVudExpc3RlbmVycykgPT4ge1xuICBpZiAoQlVJTEQyOS5ob3N0TGlzdGVuZXIgJiYgbGlzdGVuZXJzICYmIHdpbi5kb2N1bWVudCkge1xuICAgIGlmIChCVUlMRDI5Lmhvc3RMaXN0ZW5lclRhcmdldFBhcmVudCkge1xuICAgICAgaWYgKGF0dGFjaFBhcmVudExpc3RlbmVycykge1xuICAgICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuZmlsdGVyKChbZmxhZ3NdKSA9PiBmbGFncyAmIDMyIC8qIFRhcmdldFBhcmVudCAqLyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuZmlsdGVyKChbZmxhZ3NdKSA9PiAhKGZsYWdzICYgMzIgLyogVGFyZ2V0UGFyZW50ICovKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGxpc3RlbmVycy5tYXAoKFtmbGFncywgbmFtZSwgbWV0aG9kXSkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gQlVJTEQyOS5ob3N0TGlzdGVuZXJUYXJnZXQgPyBnZXRIb3N0TGlzdGVuZXJUYXJnZXQod2luLmRvY3VtZW50LCBlbG0sIGZsYWdzKSA6IGVsbTtcbiAgICAgIGNvbnN0IGhhbmRsZXIgPSBob3N0TGlzdGVuZXJQcm94eShob3N0UmVmLCBtZXRob2QpO1xuICAgICAgY29uc3Qgb3B0cyA9IGhvc3RMaXN0ZW5lck9wdHMoZmxhZ3MpO1xuICAgICAgcGx0LmFlbCh0YXJnZXQsIG5hbWUsIGhhbmRsZXIsIG9wdHMpO1xuICAgICAgKGhvc3RSZWYuJHJtTGlzdGVuZXJzJCA9IGhvc3RSZWYuJHJtTGlzdGVuZXJzJCB8fCBbXSkucHVzaCgoKSA9PiBwbHQucmVsKHRhcmdldCwgbmFtZSwgaGFuZGxlciwgb3B0cykpO1xuICAgIH0pO1xuICB9XG59O1xudmFyIGhvc3RMaXN0ZW5lclByb3h5ID0gKGhvc3RSZWYsIG1ldGhvZE5hbWUpID0+IChldikgPT4ge1xuICB2YXIgX2E7XG4gIHRyeSB7XG4gICAgaWYgKEJVSUxEMjkubGF6eUxvYWQpIHtcbiAgICAgIGlmIChob3N0UmVmLiRmbGFncyQgJiAyNTYgLyogaXNMaXN0ZW5SZWFkeSAqLykge1xuICAgICAgICAoX2EgPSBob3N0UmVmLiRsYXp5SW5zdGFuY2UkKSA9PSBudWxsID8gdm9pZCAwIDogX2FbbWV0aG9kTmFtZV0oZXYpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKGhvc3RSZWYuJHF1ZXVlZExpc3RlbmVycyQgPSBob3N0UmVmLiRxdWV1ZWRMaXN0ZW5lcnMkIHx8IFtdKS5wdXNoKFttZXRob2ROYW1lLCBldl0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBob3N0UmVmLiRob3N0RWxlbWVudCRbbWV0aG9kTmFtZV0oZXYpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGVFcnJvcihlLCBob3N0UmVmLiRob3N0RWxlbWVudCQpO1xuICB9XG59O1xudmFyIGdldEhvc3RMaXN0ZW5lclRhcmdldCA9IChkb2MsIGVsbSwgZmxhZ3MpID0+IHtcbiAgaWYgKEJVSUxEMjkuaG9zdExpc3RlbmVyVGFyZ2V0RG9jdW1lbnQgJiYgZmxhZ3MgJiA0IC8qIFRhcmdldERvY3VtZW50ICovKSB7XG4gICAgcmV0dXJuIGRvYztcbiAgfVxuICBpZiAoQlVJTEQyOS5ob3N0TGlzdGVuZXJUYXJnZXRXaW5kb3cgJiYgZmxhZ3MgJiA4IC8qIFRhcmdldFdpbmRvdyAqLykge1xuICAgIHJldHVybiB3aW47XG4gIH1cbiAgaWYgKEJVSUxEMjkuaG9zdExpc3RlbmVyVGFyZ2V0Qm9keSAmJiBmbGFncyAmIDE2IC8qIFRhcmdldEJvZHkgKi8pIHtcbiAgICByZXR1cm4gZG9jLmJvZHk7XG4gIH1cbiAgaWYgKEJVSUxEMjkuaG9zdExpc3RlbmVyVGFyZ2V0UGFyZW50ICYmIGZsYWdzICYgMzIgLyogVGFyZ2V0UGFyZW50ICovICYmIGVsbS5wYXJlbnRFbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsbS5wYXJlbnRFbGVtZW50O1xuICB9XG4gIHJldHVybiBlbG07XG59O1xudmFyIGhvc3RMaXN0ZW5lck9wdHMgPSAoZmxhZ3MpID0+IHN1cHBvcnRzTGlzdGVuZXJPcHRpb25zID8ge1xuICBwYXNzaXZlOiAoZmxhZ3MgJiAxIC8qIFBhc3NpdmUgKi8pICE9PSAwLFxuICBjYXB0dXJlOiAoZmxhZ3MgJiAyIC8qIENhcHR1cmUgKi8pICE9PSAwXG59IDogKGZsYWdzICYgMiAvKiBDYXB0dXJlICovKSAhPT0gMDtcblxuLy8gc3JjL3J1bnRpbWUvbWl4aW4udHNcbmltcG9ydCB7IEJVSUxEIGFzIEJVSUxEMzAgfSBmcm9tIFwiQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9hcHAtZGF0YVwiO1xudmFyIGJhc2VDbGFzcyA9IEJVSUxEMzAubGF6eUxvYWQgPyBjbGFzcyB7XG59IDogZ2xvYmFsVGhpcy5IVE1MRWxlbWVudCB8fCBjbGFzcyB7XG59O1xuZnVuY3Rpb24gTWl4aW4oLi4ubWl4aW5zKSB7XG4gIHJldHVybiBtaXhpbnMucmVkdWNlUmlnaHQoKGFjYywgbWl4aW4pID0+IG1peGluKGFjYyksIGJhc2VDbGFzcyk7XG59XG5cbi8vIHNyYy9ydW50aW1lL25vbmNlLnRzXG52YXIgc2V0Tm9uY2UgPSAobm9uY2UpID0+IHBsdC4kbm9uY2UkID0gbm9uY2U7XG5cbi8vIHNyYy9ydW50aW1lL3BsYXRmb3JtLW9wdGlvbnMudHNcbnZhciBzZXRQbGF0Zm9ybU9wdGlvbnMgPSAob3B0cykgPT4gT2JqZWN0LmFzc2lnbihwbHQsIG9wdHMpO1xuXG4vLyBzcmMvcnVudGltZS9yZW5kZXIudHNcbmZ1bmN0aW9uIHJlbmRlcih2bm9kZSwgY29udGFpbmVyKSB7XG4gIGNvbnN0IGNtcE1ldGEgPSB7XG4gICAgJGZsYWdzJDogMCxcbiAgICAkdGFnTmFtZSQ6IGNvbnRhaW5lci50YWdOYW1lXG4gIH07XG4gIGNvbnN0IHJlZiA9IHtcbiAgICAkZmxhZ3MkOiAwLFxuICAgICRjbXBNZXRhJDogY21wTWV0YSxcbiAgICAkaG9zdEVsZW1lbnQkOiBjb250YWluZXJcbiAgfTtcbiAgcmVuZGVyVmRvbShyZWYsIHZub2RlKTtcbn1cblxuLy8gc3JjL3J1bnRpbWUvdmRvbS92ZG9tLWFubm90YXRpb25zLnRzXG52YXIgaW5zZXJ0VmRvbUFubm90YXRpb25zID0gKGRvYywgc3RhdGljQ29tcG9uZW50cykgPT4ge1xuICBpZiAoZG9jICE9IG51bGwpIHtcbiAgICBjb25zdCBkb2NEYXRhID0gU1RFTkNJTF9ET0NfREFUQSBpbiBkb2MgPyBkb2NbU1RFTkNJTF9ET0NfREFUQV0gOiB7IC4uLkRFRkFVTFRfRE9DX0RBVEEgfTtcbiAgICBkb2NEYXRhLnN0YXRpY0NvbXBvbmVudHMgPSBuZXcgU2V0KHN0YXRpY0NvbXBvbmVudHMpO1xuICAgIGNvbnN0IG9yZ0xvY2F0aW9uTm9kZXMgPSBbXTtcbiAgICBwYXJzZVZOb2RlQW5ub3RhdGlvbnMoZG9jLCBkb2MuYm9keSwgZG9jRGF0YSwgb3JnTG9jYXRpb25Ob2Rlcyk7XG4gICAgb3JnTG9jYXRpb25Ob2Rlcy5mb3JFYWNoKChvcmdMb2NhdGlvbk5vZGUpID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIGlmIChvcmdMb2NhdGlvbk5vZGUgIT0gbnVsbCAmJiBvcmdMb2NhdGlvbk5vZGVbXCJzLW5yXCJdKSB7XG4gICAgICAgIGNvbnN0IG5vZGVSZWYgPSBvcmdMb2NhdGlvbk5vZGVbXCJzLW5yXCJdO1xuICAgICAgICBsZXQgaG9zdElkID0gbm9kZVJlZltcInMtaG9zdC1pZFwiXTtcbiAgICAgICAgbGV0IG5vZGVJZCA9IG5vZGVSZWZbXCJzLW5vZGUtaWRcIl07XG4gICAgICAgIGxldCBjaGlsZElkID0gYCR7aG9zdElkfS4ke25vZGVJZH1gO1xuICAgICAgICBpZiAoaG9zdElkID09IG51bGwpIHtcbiAgICAgICAgICBob3N0SWQgPSAwO1xuICAgICAgICAgIGRvY0RhdGEucm9vdExldmVsSWRzKys7XG4gICAgICAgICAgbm9kZUlkID0gZG9jRGF0YS5yb290TGV2ZWxJZHM7XG4gICAgICAgICAgY2hpbGRJZCA9IGAke2hvc3RJZH0uJHtub2RlSWR9YDtcbiAgICAgICAgICBpZiAobm9kZVJlZi5ub2RlVHlwZSA9PT0gMSAvKiBFbGVtZW50Tm9kZSAqLykge1xuICAgICAgICAgICAgbm9kZVJlZi5zZXRBdHRyaWJ1dGUoSFlEUkFURV9DSElMRF9JRCwgY2hpbGRJZCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG5vZGVSZWZbXCJzLXNuXCJdID09PSBcInN0cmluZ1wiICYmICFub2RlUmVmLmdldEF0dHJpYnV0ZShcInNsb3RcIikpIHtcbiAgICAgICAgICAgICAgbm9kZVJlZi5zZXRBdHRyaWJ1dGUoXCJzLXNuXCIsIG5vZGVSZWZbXCJzLXNuXCJdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVSZWYubm9kZVR5cGUgPT09IDMgLyogVGV4dE5vZGUgKi8pIHtcbiAgICAgICAgICAgIGlmIChob3N0SWQgPT09IDApIHtcbiAgICAgICAgICAgICAgY29uc3QgdGV4dENvbnRlbnQgPSAoX2EgPSBub2RlUmVmLm5vZGVWYWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnRyaW0oKTtcbiAgICAgICAgICAgICAgaWYgKHRleHRDb250ZW50ID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgb3JnTG9jYXRpb25Ob2RlLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29tbWVudEJlZm9yZVRleHROb2RlID0gZG9jLmNyZWF0ZUNvbW1lbnQoY2hpbGRJZCk7XG4gICAgICAgICAgICBjb21tZW50QmVmb3JlVGV4dE5vZGUubm9kZVZhbHVlID0gYCR7VEVYVF9OT0RFX0lEfS4ke2NoaWxkSWR9YDtcbiAgICAgICAgICAgIGluc2VydEJlZm9yZShub2RlUmVmLnBhcmVudE5vZGUsIGNvbW1lbnRCZWZvcmVUZXh0Tm9kZSwgbm9kZVJlZik7XG4gICAgICAgICAgfSBlbHNlIGlmIChub2RlUmVmLm5vZGVUeXBlID09PSA4IC8qIENvbW1lbnROb2RlICovKSB7XG4gICAgICAgICAgICBjb25zdCBjb21tZW50QmVmb3JlVGV4dE5vZGUgPSBkb2MuY3JlYXRlQ29tbWVudChjaGlsZElkKTtcbiAgICAgICAgICAgIGNvbW1lbnRCZWZvcmVUZXh0Tm9kZS5ub2RlVmFsdWUgPSBgJHtDT01NRU5UX05PREVfSUR9LiR7Y2hpbGRJZH1gO1xuICAgICAgICAgICAgbm9kZVJlZi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjb21tZW50QmVmb3JlVGV4dE5vZGUsIG5vZGVSZWYpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgb3JnTG9jYXRpb25Ob2RlSWQgPSBgJHtPUkdfTE9DQVRJT05fSUR9LiR7Y2hpbGRJZH1gO1xuICAgICAgICBjb25zdCBvcmdMb2NhdGlvblBhcmVudE5vZGUgPSBvcmdMb2NhdGlvbk5vZGUucGFyZW50RWxlbWVudDtcbiAgICAgICAgaWYgKG9yZ0xvY2F0aW9uUGFyZW50Tm9kZSkge1xuICAgICAgICAgIGlmIChvcmdMb2NhdGlvblBhcmVudE5vZGVbXCJzLWVuXCJdID09PSBcIlwiKSB7XG4gICAgICAgICAgICBvcmdMb2NhdGlvbk5vZGVJZCArPSBgLmA7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcmdMb2NhdGlvblBhcmVudE5vZGVbXCJzLWVuXCJdID09PSBcImNcIikge1xuICAgICAgICAgICAgb3JnTG9jYXRpb25Ob2RlSWQgKz0gYC5jYDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3JnTG9jYXRpb25Ob2RlLm5vZGVWYWx1ZSA9IG9yZ0xvY2F0aW9uTm9kZUlkO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xudmFyIHBhcnNlVk5vZGVBbm5vdGF0aW9ucyA9IChkb2MsIG5vZGUsIGRvY0RhdGEsIG9yZ0xvY2F0aW9uTm9kZXMpID0+IHtcbiAgdmFyIF9hO1xuICBpZiAobm9kZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChub2RlW1wicy1uclwiXSAhPSBudWxsKSB7XG4gICAgb3JnTG9jYXRpb25Ob2Rlcy5wdXNoKG5vZGUpO1xuICB9XG4gIGlmIChub2RlLm5vZGVUeXBlID09PSAxIC8qIEVsZW1lbnROb2RlICovKSB7XG4gICAgY29uc3QgY2hpbGROb2RlcyA9IFsuLi5BcnJheS5mcm9tKG5vZGUuY2hpbGROb2RlcyksIC4uLkFycmF5LmZyb20oKChfYSA9IG5vZGUuc2hhZG93Um9vdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNoaWxkTm9kZXMpIHx8IFtdKV07XG4gICAgY2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZE5vZGUpID0+IHtcbiAgICAgIGNvbnN0IGhvc3RSZWYgPSBnZXRIb3N0UmVmKGNoaWxkTm9kZSk7XG4gICAgICBpZiAoaG9zdFJlZiAhPSBudWxsICYmICFkb2NEYXRhLnN0YXRpY0NvbXBvbmVudHMuaGFzKGNoaWxkTm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICBjb25zdCBjbXBEYXRhID0ge1xuICAgICAgICAgIG5vZGVJZHM6IDBcbiAgICAgICAgfTtcbiAgICAgICAgaW5zZXJ0Vk5vZGVBbm5vdGF0aW9ucyhkb2MsIGNoaWxkTm9kZSwgaG9zdFJlZi4kdm5vZGUkLCBkb2NEYXRhLCBjbXBEYXRhKTtcbiAgICAgIH1cbiAgICAgIHBhcnNlVk5vZGVBbm5vdGF0aW9ucyhkb2MsIGNoaWxkTm9kZSwgZG9jRGF0YSwgb3JnTG9jYXRpb25Ob2Rlcyk7XG4gICAgfSk7XG4gIH1cbn07XG52YXIgaW5zZXJ0Vk5vZGVBbm5vdGF0aW9ucyA9IChkb2MsIGhvc3RFbG0sIHZub2RlLCBkb2NEYXRhLCBjbXBEYXRhKSA9PiB7XG4gIGlmICh2bm9kZSAhPSBudWxsKSB7XG4gICAgY29uc3QgaG9zdElkID0gKytkb2NEYXRhLmhvc3RJZHM7XG4gICAgaG9zdEVsbS5zZXRBdHRyaWJ1dGUoSFlEUkFURV9JRCwgaG9zdElkKTtcbiAgICBpZiAoaG9zdEVsbVtcInMtY3JcIl0gIT0gbnVsbCkge1xuICAgICAgaG9zdEVsbVtcInMtY3JcIl0ubm9kZVZhbHVlID0gYCR7Q09OVEVOVF9SRUZfSUR9LiR7aG9zdElkfWA7XG4gICAgfVxuICAgIGlmICh2bm9kZS4kY2hpbGRyZW4kICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IGRlcHRoID0gMDtcbiAgICAgIHZub2RlLiRjaGlsZHJlbiQuZm9yRWFjaCgodm5vZGVDaGlsZCwgaW5kZXgpID0+IHtcbiAgICAgICAgaW5zZXJ0Q2hpbGRWTm9kZUFubm90YXRpb25zKGRvYywgdm5vZGVDaGlsZCwgY21wRGF0YSwgaG9zdElkLCBkZXB0aCwgaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChob3N0RWxtICYmIHZub2RlICYmIHZub2RlLiRlbG0kICYmICFob3N0RWxtLmhhc0F0dHJpYnV0ZShIWURSQVRFX0NISUxEX0lEKSkge1xuICAgICAgY29uc3QgcGFyZW50ID0gaG9zdEVsbS5wYXJlbnRFbGVtZW50O1xuICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQuY2hpbGROb2Rlcykge1xuICAgICAgICBjb25zdCBwYXJlbnRDaGlsZE5vZGVzID0gQXJyYXkuZnJvbShwYXJlbnQuY2hpbGROb2Rlcyk7XG4gICAgICAgIGNvbnN0IGNvbW1lbnQgPSBwYXJlbnRDaGlsZE5vZGVzLmZpbmQoXG4gICAgICAgICAgKG5vZGUpID0+IG5vZGUubm9kZVR5cGUgPT09IDggLyogQ29tbWVudE5vZGUgKi8gJiYgbm9kZVtcInMtc3JcIl1cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNvbW1lbnQpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcmVudENoaWxkTm9kZXMuaW5kZXhPZihob3N0RWxtKSAtIDE7XG4gICAgICAgICAgdm5vZGUuJGVsbSQuc2V0QXR0cmlidXRlKFxuICAgICAgICAgICAgSFlEUkFURV9DSElMRF9JRCxcbiAgICAgICAgICAgIGAke2NvbW1lbnRbXCJzLWhvc3QtaWRcIl19LiR7Y29tbWVudFtcInMtbm9kZS1pZFwiXX0uMC4ke2luZGV4fWBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xudmFyIGluc2VydENoaWxkVk5vZGVBbm5vdGF0aW9ucyA9IChkb2MsIHZub2RlQ2hpbGQsIGNtcERhdGEsIGhvc3RJZCwgZGVwdGgsIGluZGV4KSA9PiB7XG4gIGNvbnN0IGNoaWxkRWxtID0gdm5vZGVDaGlsZC4kZWxtJDtcbiAgaWYgKGNoaWxkRWxtID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgbm9kZUlkID0gY21wRGF0YS5ub2RlSWRzKys7XG4gIGNvbnN0IGNoaWxkSWQgPSBgJHtob3N0SWR9LiR7bm9kZUlkfS4ke2RlcHRofS4ke2luZGV4fWA7XG4gIGNoaWxkRWxtW1wicy1ob3N0LWlkXCJdID0gaG9zdElkO1xuICBjaGlsZEVsbVtcInMtbm9kZS1pZFwiXSA9IG5vZGVJZDtcbiAgaWYgKGNoaWxkRWxtLm5vZGVUeXBlID09PSAxIC8qIEVsZW1lbnROb2RlICovKSB7XG4gICAgY2hpbGRFbG0uc2V0QXR0cmlidXRlKEhZRFJBVEVfQ0hJTERfSUQsIGNoaWxkSWQpO1xuICAgIGlmICh0eXBlb2YgY2hpbGRFbG1bXCJzLXNuXCJdID09PSBcInN0cmluZ1wiICYmICFjaGlsZEVsbS5nZXRBdHRyaWJ1dGUoXCJzbG90XCIpKSB7XG4gICAgICBjaGlsZEVsbS5zZXRBdHRyaWJ1dGUoXCJzLXNuXCIsIGNoaWxkRWxtW1wicy1zblwiXSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGNoaWxkRWxtLm5vZGVUeXBlID09PSAzIC8qIFRleHROb2RlICovKSB7XG4gICAgY29uc3QgcGFyZW50Tm9kZSA9IGNoaWxkRWxtLnBhcmVudE5vZGU7XG4gICAgY29uc3Qgbm9kZU5hbWUgPSBwYXJlbnROb2RlID09IG51bGwgPyB2b2lkIDAgOiBwYXJlbnROb2RlLm5vZGVOYW1lO1xuICAgIGlmIChub2RlTmFtZSAhPT0gXCJTVFlMRVwiICYmIG5vZGVOYW1lICE9PSBcIlNDUklQVFwiKSB7XG4gICAgICBjb25zdCB0ZXh0Tm9kZUlkID0gYCR7VEVYVF9OT0RFX0lEfS4ke2NoaWxkSWR9YDtcbiAgICAgIGNvbnN0IGNvbW1lbnRCZWZvcmVUZXh0Tm9kZSA9IGRvYy5jcmVhdGVDb21tZW50KHRleHROb2RlSWQpO1xuICAgICAgaW5zZXJ0QmVmb3JlKHBhcmVudE5vZGUsIGNvbW1lbnRCZWZvcmVUZXh0Tm9kZSwgY2hpbGRFbG0pO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjaGlsZEVsbS5ub2RlVHlwZSA9PT0gOCAvKiBDb21tZW50Tm9kZSAqLykge1xuICAgIGlmIChjaGlsZEVsbVtcInMtc3JcIl0pIHtcbiAgICAgIGNvbnN0IHNsb3ROYW1lID0gY2hpbGRFbG1bXCJzLXNuXCJdIHx8IFwiXCI7XG4gICAgICBjb25zdCBzbG90Tm9kZUlkID0gYCR7U0xPVF9OT0RFX0lEfS4ke2NoaWxkSWR9LiR7c2xvdE5hbWV9YDtcbiAgICAgIGNoaWxkRWxtLm5vZGVWYWx1ZSA9IHNsb3ROb2RlSWQ7XG4gICAgfVxuICB9XG4gIGlmICh2bm9kZUNoaWxkLiRjaGlsZHJlbiQgIT0gbnVsbCkge1xuICAgIGNvbnN0IGNoaWxkRGVwdGggPSBkZXB0aCArIDE7XG4gICAgdm5vZGVDaGlsZC4kY2hpbGRyZW4kLmZvckVhY2goKHZub2RlLCBpbmRleDIpID0+IHtcbiAgICAgIGluc2VydENoaWxkVk5vZGVBbm5vdGF0aW9ucyhkb2MsIHZub2RlLCBjbXBEYXRhLCBob3N0SWQsIGNoaWxkRGVwdGgsIGluZGV4Mik7XG4gICAgfSk7XG4gIH1cbn07XG5leHBvcnQge1xuICBCVUlMRDMxIGFzIEJVSUxELFxuICBCdWlsZCxcbiAgRW52LFxuICBGcmFnbWVudCxcbiAgSCxcbiAgSCBhcyBIVE1MRWxlbWVudCxcbiAgSFlEUkFURURfU1RZTEVfSUQsXG4gIEhvc3QsXG4gIE1peGluLFxuICBOQU1FU1BBQ0UyIGFzIE5BTUVTUEFDRSxcbiAgU1RFTkNJTF9ERVZfTU9ERSxcbiAgYWRkSG9zdEV2ZW50TGlzdGVuZXJzLFxuICBib290c3RyYXBMYXp5LFxuICBjbXBNb2R1bGVzLFxuICBjb25uZWN0ZWRDYWxsYmFjayxcbiAgY29uc29sZURldkVycm9yLFxuICBjb25zb2xlRGV2SW5mbyxcbiAgY29uc29sZURldldhcm4sXG4gIGNvbnNvbGVFcnJvcixcbiAgY3JlYXRlRXZlbnQsXG4gIGRlZmluZUN1c3RvbUVsZW1lbnQsXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrLFxuICBmb3JjZU1vZGVVcGRhdGUsXG4gIGZvcmNlVXBkYXRlLFxuICBnZXRBc3NldFBhdGgsXG4gIGdldEVsZW1lbnQsXG4gIGdldEhvc3RSZWYsXG4gIGdldE1vZGUsXG4gIGdldFJlbmRlcmluZ1JlZixcbiAgZ2V0VmFsdWUsXG4gIGgsXG4gIGluc2VydFZkb21Bbm5vdGF0aW9ucyxcbiAgaXNNZW1iZXJJbkVsZW1lbnQsXG4gIGxvYWRNb2R1bGUsXG4gIG1vZGVSZXNvbHV0aW9uQ2hhaW4sXG4gIG5lZWRzU2NvcGVkU1NSLFxuICBuZXh0VGljayxcbiAgcGFyc2VQcm9wZXJ0eVZhbHVlLFxuICBwbHQsXG4gIHBvc3RVcGRhdGVDb21wb25lbnQsXG4gIHByb21pc2VSZXNvbHZlLFxuICBwcm94eUNvbXBvbmVudCxcbiAgcHJveHlDdXN0b21FbGVtZW50LFxuICByZWFkVGFzayxcbiAgcmVnaXN0ZXJIb3N0LFxuICByZWdpc3Rlckluc3RhbmNlLFxuICByZW5kZXIsXG4gIHJlbmRlclZkb20sXG4gIHNldEFzc2V0UGF0aCxcbiAgc2V0RXJyb3JIYW5kbGVyLFxuICBzZXRNb2RlLFxuICBzZXROb25jZSxcbiAgc2V0UGxhdGZvcm1IZWxwZXJzLFxuICBzZXRQbGF0Zm9ybU9wdGlvbnMsXG4gIHNldFNjb3BlZFNTUixcbiAgc2V0VmFsdWUsXG4gIHN0eWxlcyxcbiAgc3VwcG9ydHNDb25zdHJ1Y3RhYmxlU3R5bGVzaGVldHMsXG4gIHN1cHBvcnRzTGlzdGVuZXJPcHRpb25zLFxuICBzdXBwb3J0c011dGFibGVBZG9wdGVkU3R5bGVTaGVldHMsXG4gIHN1cHBvcnRzU2hhZG93LFxuICB3aW4sXG4gIHdyaXRlVGFza1xufTtcbiIsIi8qIVxuICogKEMpIElvbmljIGh0dHA6Ly9pb25pY2ZyYW1ld29yay5jb20gLSBNSVQgTGljZW5zZVxuICovXG4vLyBUT0RPKEZXLTI4MzIpOiB0eXBlc1xuY2xhc3MgQ29uZmlnIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5tID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICByZXNldChjb25maWdPYmopIHtcbiAgICAgICAgdGhpcy5tID0gbmV3IE1hcChPYmplY3QuZW50cmllcyhjb25maWdPYmopKTtcbiAgICB9XG4gICAgZ2V0KGtleSwgZmFsbGJhY2spIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLm0uZ2V0KGtleSk7XG4gICAgICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBmYWxsYmFjaztcbiAgICB9XG4gICAgZ2V0Qm9vbGVhbihrZXksIGZhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5tLmdldChrZXkpO1xuICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWwgPT09ICd0cnVlJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gISF2YWw7XG4gICAgfVxuICAgIGdldE51bWJlcihrZXksIGZhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHBhcnNlRmxvYXQodGhpcy5tLmdldChrZXkpKTtcbiAgICAgICAgcmV0dXJuIGlzTmFOKHZhbCkgPyAoZmFsbGJhY2sgIT09IHVuZGVmaW5lZCA/IGZhbGxiYWNrIDogTmFOKSA6IHZhbDtcbiAgICB9XG4gICAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5tLnNldChrZXksIHZhbHVlKTtcbiAgICB9XG59XG5jb25zdCBjb25maWcgPSAvKkBfX1BVUkVfXyovIG5ldyBDb25maWcoKTtcbmNvbnN0IGNvbmZpZ0Zyb21TZXNzaW9uID0gKHdpbikgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZ1N0ciA9IHdpbi5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKElPTklDX1NFU1NJT05fS0VZKTtcbiAgICAgICAgcmV0dXJuIGNvbmZpZ1N0ciAhPT0gbnVsbCA/IEpTT04ucGFyc2UoY29uZmlnU3RyKSA6IHt9O1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxufTtcbmNvbnN0IHNhdmVDb25maWcgPSAod2luLCBjKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgd2luLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oSU9OSUNfU0VTU0lPTl9LRVksIEpTT04uc3RyaW5naWZ5KGMpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn07XG5jb25zdCBjb25maWdGcm9tVVJMID0gKHdpbikgPT4ge1xuICAgIGNvbnN0IGNvbmZpZ09iaiA9IHt9O1xuICAgIHdpbi5sb2NhdGlvbi5zZWFyY2hcbiAgICAgICAgLnNsaWNlKDEpXG4gICAgICAgIC5zcGxpdCgnJicpXG4gICAgICAgIC5tYXAoKGVudHJ5KSA9PiBlbnRyeS5zcGxpdCgnPScpKVxuICAgICAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBbZGVjb2RlVVJJQ29tcG9uZW50KGtleSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSldO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gWycnLCAnJ107XG4gICAgICAgIH1cbiAgICB9KVxuICAgICAgICAuZmlsdGVyKChba2V5XSkgPT4gc3RhcnRzV2l0aChrZXksIElPTklDX1BSRUZJWCkpXG4gICAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4gW2tleS5zbGljZShJT05JQ19QUkVGSVgubGVuZ3RoKSwgdmFsdWVdKVxuICAgICAgICAuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGNvbmZpZ09ialtrZXldID0gdmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbmZpZ09iajtcbn07XG5jb25zdCBzdGFydHNXaXRoID0gKGlucHV0LCBzZWFyY2gpID0+IHtcbiAgICByZXR1cm4gaW5wdXQuc3Vic3RyKDAsIHNlYXJjaC5sZW5ndGgpID09PSBzZWFyY2g7XG59O1xuY29uc3QgSU9OSUNfUFJFRklYID0gJ2lvbmljOic7XG5jb25zdCBJT05JQ19TRVNTSU9OX0tFWSA9ICdpb25pYy1wZXJzaXN0LWNvbmZpZyc7XG5cbnZhciBMb2dMZXZlbDtcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcbiAgICBMb2dMZXZlbFtcIk9GRlwiXSA9IFwiT0ZGXCI7XG4gICAgTG9nTGV2ZWxbXCJFUlJPUlwiXSA9IFwiRVJST1JcIjtcbiAgICBMb2dMZXZlbFtcIldBUk5cIl0gPSBcIldBUk5cIjtcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XG4vKipcbiAqIExvZ3MgYSB3YXJuaW5nIHRvIHRoZSBjb25zb2xlIHdpdGggYW4gSW9uaWMgcHJlZml4XG4gKiB0byBpbmRpY2F0ZSB0aGUgbGlicmFyeSB0aGF0IGlzIHdhcm5pbmcgdGhlIGRldmVsb3Blci5cbiAqXG4gKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBzdHJpbmcgbWVzc2FnZSB0byBiZSBsb2dnZWQgdG8gdGhlIGNvbnNvbGUuXG4gKi9cbmNvbnN0IHByaW50SW9uV2FybmluZyA9IChtZXNzYWdlLCAuLi5wYXJhbXMpID0+IHtcbiAgICBjb25zdCBsb2dMZXZlbCA9IGNvbmZpZy5nZXQoJ2xvZ0xldmVsJywgTG9nTGV2ZWwuV0FSTik7XG4gICAgaWYgKFtMb2dMZXZlbC5XQVJOXS5pbmNsdWRlcyhsb2dMZXZlbCkpIHtcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybihgW0lvbmljIFdhcm5pbmddOiAke21lc3NhZ2V9YCwgLi4ucGFyYW1zKTtcbiAgICB9XG59O1xuLyoqXG4gKiBMb2dzIGFuIGVycm9yIHRvIHRoZSBjb25zb2xlIHdpdGggYW4gSW9uaWMgcHJlZml4XG4gKiB0byBpbmRpY2F0ZSB0aGUgbGlicmFyeSB0aGF0IGlzIHdhcm5pbmcgdGhlIGRldmVsb3Blci5cbiAqXG4gKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBzdHJpbmcgbWVzc2FnZSB0byBiZSBsb2dnZWQgdG8gdGhlIGNvbnNvbGUuXG4gKiBAcGFyYW0gcGFyYW1zIC0gQWRkaXRpb25hbCBhcmd1bWVudHMgdG8gc3VwcGx5IHRvIHRoZSBjb25zb2xlLmVycm9yLlxuICovXG5jb25zdCBwcmludElvbkVycm9yID0gKG1lc3NhZ2UsIC4uLnBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGxvZ0xldmVsID0gY29uZmlnLmdldCgnbG9nTGV2ZWwnLCBMb2dMZXZlbC5FUlJPUik7XG4gICAgaWYgKFtMb2dMZXZlbC5FUlJPUiwgTG9nTGV2ZWwuV0FSTl0uaW5jbHVkZXMobG9nTGV2ZWwpKSB7XG4gICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGBbSW9uaWMgRXJyb3JdOiAke21lc3NhZ2V9YCwgLi4ucGFyYW1zKTtcbiAgICB9XG59O1xuLyoqXG4gKiBQcmludHMgYW4gZXJyb3IgaW5mb3JtaW5nIGRldmVsb3BlcnMgdGhhdCBhbiBpbXBsZW1lbnRhdGlvbiByZXF1aXJlcyBhbiBlbGVtZW50IHRvIGJlIHVzZWRcbiAqIHdpdGhpbiBhIHNwZWNpZmljIHNlbGVjdG9yLlxuICpcbiAqIEBwYXJhbSBlbCBUaGUgd2ViIGNvbXBvbmVudCBlbGVtZW50IHRoaXMgaXMgcmVxdWlyaW5nIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHRhcmdldFNlbGVjdG9ycyBUaGUgc2VsZWN0b3Igb3Igc2VsZWN0b3JzIHRoYXQgd2VyZSBub3QgZm91bmQuXG4gKi9cbmNvbnN0IHByaW50UmVxdWlyZWRFbGVtZW50RXJyb3IgPSAoZWwsIC4uLnRhcmdldFNlbGVjdG9ycykgPT4ge1xuICAgIHJldHVybiBjb25zb2xlLmVycm9yKGA8JHtlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCl9PiBtdXN0IGJlIHVzZWQgaW5zaWRlICR7dGFyZ2V0U2VsZWN0b3JzLmpvaW4oJyBvciAnKX0uYCk7XG59O1xuXG5leHBvcnQgeyBMb2dMZXZlbCBhcyBMLCBwcmludElvbkVycm9yIGFzIGEsIGNvbmZpZ0Zyb21TZXNzaW9uIGFzIGIsIGNvbmZpZyBhcyBjLCBjb25maWdGcm9tVVJMIGFzIGQsIHByaW50UmVxdWlyZWRFbGVtZW50RXJyb3IgYXMgZSwgcHJpbnRJb25XYXJuaW5nIGFzIHAsIHNhdmVDb25maWcgYXMgcyB9O1xuIiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IGEgYXMgcHJpbnRJb25FcnJvciB9IGZyb20gJy4vaW5kZXg0LmpzJztcblxuY29uc3QgdHJhbnNpdGlvbkVuZEFzeW5jID0gKGVsLCBleHBlY3RlZER1cmF0aW9uID0gMCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICB0cmFuc2l0aW9uRW5kKGVsLCBleHBlY3RlZER1cmF0aW9uLCByZXNvbHZlKTtcbiAgICB9KTtcbn07XG4vKipcbiAqIEFsbG93cyBkZXZlbG9wZXIgdG8gd2FpdCBmb3IgYSB0cmFuc2l0aW9uXG4gKiB0byBmaW5pc2ggYW5kIGZhbGxiYWNrIHRvIGEgdGltZXIgaWYgdGhlXG4gKiB0cmFuc2l0aW9uIGlzIGNhbmNlbGxlZCBvciBvdGhlcndpc2VcbiAqIG5ldmVyIGZpbmlzaGVzLiBBbHNvIHNlZSB0cmFuc2l0aW9uRW5kQXN5bmNcbiAqIHdoaWNoIGlzIGFuIGF3YWl0LWFibGUgdmVyc2lvbiBvZiB0aGlzLlxuICovXG5jb25zdCB0cmFuc2l0aW9uRW5kID0gKGVsLCBleHBlY3RlZER1cmF0aW9uID0gMCwgY2FsbGJhY2spID0+IHtcbiAgICBsZXQgdW5SZWdUcmFucztcbiAgICBsZXQgYW5pbWF0aW9uVGltZW91dDtcbiAgICBjb25zdCBvcHRzID0geyBwYXNzaXZlOiB0cnVlIH07XG4gICAgY29uc3QgQU5JTUFUSU9OX0ZBTExCQUNLX1RJTUVPVVQgPSA1MDA7XG4gICAgY29uc3QgdW5yZWdpc3RlciA9ICgpID0+IHtcbiAgICAgICAgaWYgKHVuUmVnVHJhbnMpIHtcbiAgICAgICAgICAgIHVuUmVnVHJhbnMoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgb25UcmFuc2l0aW9uRW5kID0gKGV2KSA9PiB7XG4gICAgICAgIGlmIChldiA9PT0gdW5kZWZpbmVkIHx8IGVsID09PSBldi50YXJnZXQpIHtcbiAgICAgICAgICAgIHVucmVnaXN0ZXIoKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKGV2KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgaWYgKGVsKSB7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdFRyYW5zaXRpb25FbmQnLCBvblRyYW5zaXRpb25FbmQsIG9wdHMpO1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgb25UcmFuc2l0aW9uRW5kLCBvcHRzKTtcbiAgICAgICAgYW5pbWF0aW9uVGltZW91dCA9IHNldFRpbWVvdXQob25UcmFuc2l0aW9uRW5kLCBleHBlY3RlZER1cmF0aW9uICsgQU5JTUFUSU9OX0ZBTExCQUNLX1RJTUVPVVQpO1xuICAgICAgICB1blJlZ1RyYW5zID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGFuaW1hdGlvblRpbWVvdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChhbmltYXRpb25UaW1lb3V0KTtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25UaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2Via2l0VHJhbnNpdGlvbkVuZCcsIG9uVHJhbnNpdGlvbkVuZCwgb3B0cyk7XG4gICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgb25UcmFuc2l0aW9uRW5kLCBvcHRzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHVucmVnaXN0ZXI7XG59O1xuLyoqXG4gKiBXYWl0cyBmb3IgYSBjb21wb25lbnQgdG8gYmUgcmVhZHkgZm9yXG4gKiBib3RoIGN1c3RvbSBlbGVtZW50IGFuZCBub24tY3VzdG9tIGVsZW1lbnQgYnVpbGRzLlxuICogSWYgbm9uLWN1c3RvbSBlbGVtZW50IGJ1aWxkLCBlbC5jb21wb25lbnRPblJlYWR5XG4gKiB3aWxsIGJlIHVzZWQuXG4gKiBGb3IgY3VzdG9tIGVsZW1lbnQgYnVpbGRzLCB3ZSB3YWl0IGEgZnJhbWVcbiAqIHNvIHRoYXQgdGhlIGlubmVyIGNvbnRlbnRzIG9mIHRoZSBjb21wb25lbnRcbiAqIGhhdmUgYSBjaGFuY2UgdG8gcmVuZGVyLlxuICpcbiAqIFVzZSB0aGlzIHV0aWxpdHkgcmF0aGVyIHRoYW4gY2FsbGluZ1xuICogZWwuY29tcG9uZW50T25SZWFkeSB5b3Vyc2VsZi5cbiAqL1xuY29uc3QgY29tcG9uZW50T25SZWFkeSA9IChlbCwgY2FsbGJhY2spID0+IHtcbiAgICBpZiAoZWwuY29tcG9uZW50T25SZWFkeSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY3VzdG9tLXJ1bGVzL25vLWNvbXBvbmVudC1vbi1yZWFkeS1tZXRob2RcbiAgICAgICAgZWwuY29tcG9uZW50T25SZWFkeSgpLnRoZW4oKHJlc29sdmVkRWwpID0+IGNhbGxiYWNrKHJlc29sdmVkRWwpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJhZigoKSA9PiBjYWxsYmFjayhlbCkpO1xuICAgIH1cbn07XG4vKipcbiAqIFRoaXMgZnVuY3Rpb25zIGNoZWNrcyBpZiBhIFN0ZW5jaWwgY29tcG9uZW50IGlzIHVzaW5nXG4gKiB0aGUgbGF6eSBsb2FkZWQgYnVpbGQgb2YgU3RlbmNpbC4gUmV0dXJucyBgdHJ1ZWAgaWZcbiAqIHRoZSBjb21wb25lbnQgaXMgbGF6eSBsb2FkZWQuIFJldHVybnMgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmNvbnN0IGhhc0xhenlCdWlsZCA9IChzdGVuY2lsRWwpID0+IHtcbiAgICByZXR1cm4gc3RlbmNpbEVsLmNvbXBvbmVudE9uUmVhZHkgIT09IHVuZGVmaW5lZDtcbn07XG4vKipcbiAqIEVsZW1lbnRzIGluc2lkZSBvZiB3ZWIgY29tcG9uZW50cyBzb21ldGltZXMgbmVlZCB0byBpbmhlcml0IGdsb2JhbCBhdHRyaWJ1dGVzXG4gKiBzZXQgb24gdGhlIGhvc3QuIEZvciBleGFtcGxlLCB0aGUgaW5uZXIgaW5wdXQgaW4gYGlvbi1pbnB1dGAgc2hvdWxkIGluaGVyaXRcbiAqIHRoZSBgdGl0bGVgIGF0dHJpYnV0ZSB0aGF0IGRldmVsb3BlcnMgc2V0IGRpcmVjdGx5IG9uIGBpb24taW5wdXRgLiBUaGlzXG4gKiBoZWxwZXIgZnVuY3Rpb24gc2hvdWxkIGJlIGNhbGxlZCBpbiBjb21wb25lbnRXaWxsTG9hZCBhbmQgYXNzaWduZWQgdG8gYSB2YXJpYWJsZVxuICogdGhhdCBpcyBsYXRlciB1c2VkIGluIHRoZSByZW5kZXIgZnVuY3Rpb24uXG4gKlxuICogVGhpcyBkb2VzIG5vdCBuZWVkIHRvIGJlIHJlYWN0aXZlIGFzIGNoYW5naW5nIGF0dHJpYnV0ZXMgb24gdGhlIGhvc3QgZWxlbWVudFxuICogZG9lcyBub3QgdHJpZ2dlciBhIHJlLXJlbmRlci5cbiAqL1xuY29uc3QgaW5oZXJpdEF0dHJpYnV0ZXMgPSAoZWwsIGF0dHJpYnV0ZXMgPSBbXSkgPT4ge1xuICAgIGNvbnN0IGF0dHJpYnV0ZU9iamVjdCA9IHt9O1xuICAgIGF0dHJpYnV0ZXMuZm9yRWFjaCgoYXR0cikgPT4ge1xuICAgICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKGF0dHIpKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGVsLmdldEF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU9iamVjdFthdHRyXSA9IGVsLmdldEF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBhdHRyaWJ1dGVPYmplY3Q7XG59O1xuLyoqXG4gKiBMaXN0IG9mIGF2YWlsYWJsZSBBUklBIGF0dHJpYnV0ZXMgKyBgcm9sZWAuXG4gKiBSZW1vdmVkIGRlcHJlY2F0ZWQgYXR0cmlidXRlcy5cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FjY2Vzc2liaWxpdHkvQVJJQS9BdHRyaWJ1dGVzXG4gKi9cbmNvbnN0IGFyaWFBdHRyaWJ1dGVzID0gW1xuICAgICdyb2xlJyxcbiAgICAnYXJpYS1hY3RpdmVkZXNjZW5kYW50JyxcbiAgICAnYXJpYS1hdG9taWMnLFxuICAgICdhcmlhLWF1dG9jb21wbGV0ZScsXG4gICAgJ2FyaWEtYnJhaWxsZWxhYmVsJyxcbiAgICAnYXJpYS1icmFpbGxlcm9sZWRlc2NyaXB0aW9uJyxcbiAgICAnYXJpYS1idXN5JyxcbiAgICAnYXJpYS1jaGVja2VkJyxcbiAgICAnYXJpYS1jb2xjb3VudCcsXG4gICAgJ2FyaWEtY29saW5kZXgnLFxuICAgICdhcmlhLWNvbGluZGV4dGV4dCcsXG4gICAgJ2FyaWEtY29sc3BhbicsXG4gICAgJ2FyaWEtY29udHJvbHMnLFxuICAgICdhcmlhLWN1cnJlbnQnLFxuICAgICdhcmlhLWRlc2NyaWJlZGJ5JyxcbiAgICAnYXJpYS1kZXNjcmlwdGlvbicsXG4gICAgJ2FyaWEtZGV0YWlscycsXG4gICAgJ2FyaWEtZGlzYWJsZWQnLFxuICAgICdhcmlhLWVycm9ybWVzc2FnZScsXG4gICAgJ2FyaWEtZXhwYW5kZWQnLFxuICAgICdhcmlhLWZsb3d0bycsXG4gICAgJ2FyaWEtaGFzcG9wdXAnLFxuICAgICdhcmlhLWhpZGRlbicsXG4gICAgJ2FyaWEtaW52YWxpZCcsXG4gICAgJ2FyaWEta2V5c2hvcnRjdXRzJyxcbiAgICAnYXJpYS1sYWJlbCcsXG4gICAgJ2FyaWEtbGFiZWxsZWRieScsXG4gICAgJ2FyaWEtbGV2ZWwnLFxuICAgICdhcmlhLWxpdmUnLFxuICAgICdhcmlhLW11bHRpbGluZScsXG4gICAgJ2FyaWEtbXVsdGlzZWxlY3RhYmxlJyxcbiAgICAnYXJpYS1vcmllbnRhdGlvbicsXG4gICAgJ2FyaWEtb3ducycsXG4gICAgJ2FyaWEtcGxhY2Vob2xkZXInLFxuICAgICdhcmlhLXBvc2luc2V0JyxcbiAgICAnYXJpYS1wcmVzc2VkJyxcbiAgICAnYXJpYS1yZWFkb25seScsXG4gICAgJ2FyaWEtcmVsZXZhbnQnLFxuICAgICdhcmlhLXJlcXVpcmVkJyxcbiAgICAnYXJpYS1yb2xlZGVzY3JpcHRpb24nLFxuICAgICdhcmlhLXJvd2NvdW50JyxcbiAgICAnYXJpYS1yb3dpbmRleCcsXG4gICAgJ2FyaWEtcm93aW5kZXh0ZXh0JyxcbiAgICAnYXJpYS1yb3dzcGFuJyxcbiAgICAnYXJpYS1zZWxlY3RlZCcsXG4gICAgJ2FyaWEtc2V0c2l6ZScsXG4gICAgJ2FyaWEtc29ydCcsXG4gICAgJ2FyaWEtdmFsdWVtYXgnLFxuICAgICdhcmlhLXZhbHVlbWluJyxcbiAgICAnYXJpYS12YWx1ZW5vdycsXG4gICAgJ2FyaWEtdmFsdWV0ZXh0Jyxcbl07XG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgb2YgYXJpYSBhdHRyaWJ1dGVzIHRoYXQgc2hvdWxkIGJlIGNvcGllZCBmcm9tXG4gKiB0aGUgc2hhZG93IGhvc3QgZWxlbWVudCB0byBhIHRhcmdldCB3aXRoaW4gdGhlIGxpZ2h0IERPTS5cbiAqIEBwYXJhbSBlbCBUaGUgZWxlbWVudCB0aGF0IHRoZSBhdHRyaWJ1dGVzIHNob3VsZCBiZSBjb3BpZWQgZnJvbS5cbiAqIEBwYXJhbSBpZ25vcmVMaXN0IFRoZSBsaXN0IG9mIGFyaWEtYXR0cmlidXRlcyB0byBpZ25vcmUgcmVmbGVjdGluZyBhbmQgcmVtb3ZpbmcgZnJvbSB0aGUgaG9zdC5cbiAqIFVzZSB0aGlzIGluIGluc3RhbmNlcyB3aGVyZSB3ZSBtYW51YWxseSBzcGVjaWZ5IGFyaWEgYXR0cmlidXRlcyBvbiB0aGUgYDxIb3N0PmAgZWxlbWVudC5cbiAqL1xuY29uc3QgaW5oZXJpdEFyaWFBdHRyaWJ1dGVzID0gKGVsLCBpZ25vcmVMaXN0KSA9PiB7XG4gICAgbGV0IGF0dHJpYnV0ZXNUb0luaGVyaXQgPSBhcmlhQXR0cmlidXRlcztcbiAgICByZXR1cm4gaW5oZXJpdEF0dHJpYnV0ZXMoZWwsIGF0dHJpYnV0ZXNUb0luaGVyaXQpO1xufTtcbmNvbnN0IGFkZEV2ZW50TGlzdGVuZXIgPSAoZWwsIGV2ZW50TmFtZSwgY2FsbGJhY2ssIG9wdHMpID0+IHtcbiAgICByZXR1cm4gZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGNhbGxiYWNrLCBvcHRzKTtcbn07XG5jb25zdCByZW1vdmVFdmVudExpc3RlbmVyID0gKGVsLCBldmVudE5hbWUsIGNhbGxiYWNrLCBvcHRzKSA9PiB7XG4gICAgcmV0dXJuIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYWxsYmFjaywgb3B0cyk7XG59O1xuLyoqXG4gKiBHZXRzIHRoZSByb290IGNvbnRleHQgb2YgYSBzaGFkb3cgZG9tIGVsZW1lbnRcbiAqIE9uIG5ld2VyIGJyb3dzZXJzIHRoaXMgd2lsbCBiZSB0aGUgc2hhZG93Um9vdCxcbiAqIGJ1dCBmb3Igb2xkZXIgYnJvd3NlciB0aGlzIG1heSBqdXN0IGJlIHRoZVxuICogZWxlbWVudCBpdHNlbGYuXG4gKlxuICogVXNlZnVsIGZvciB3aGVuZXZlciB5b3UgbmVlZCB0byBleHBsaWNpdGx5XG4gKiBkbyBcIm15RWxlbWVudC5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKC4uLilcIi5cbiAqL1xuY29uc3QgZ2V0RWxlbWVudFJvb3QgPSAoZWwsIGZhbGxiYWNrID0gZWwpID0+IHtcbiAgICByZXR1cm4gZWwuc2hhZG93Um9vdCB8fCBmYWxsYmFjaztcbn07XG4vKipcbiAqIFBhdGNoZWQgdmVyc2lvbiBvZiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgdGhhdCBhdm9pZHMgbmd6b25lXG4gKiBVc2Ugb25seSB3aGVuIHlvdSBrbm93IG5nem9uZSBzaG91bGQgbm90IHJ1blxuICovXG5jb25zdCByYWYgPSAoaCkgPT4ge1xuICAgIGlmICh0eXBlb2YgX196b25lX3N5bWJvbF9fcmVxdWVzdEFuaW1hdGlvbkZyYW1lID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBfX3pvbmVfc3ltYm9sX19yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaCk7XG4gICAgfVxuICAgIHJldHVybiBzZXRUaW1lb3V0KGgpO1xufTtcbmNvbnN0IGhhc1NoYWRvd0RvbSA9IChlbCkgPT4ge1xuICAgIHJldHVybiAhIWVsLnNoYWRvd1Jvb3QgJiYgISFlbC5hdHRhY2hTaGFkb3c7XG59O1xuY29uc3QgZm9jdXNWaXNpYmxlRWxlbWVudCA9IChlbCkgPT4ge1xuICAgIGVsLmZvY3VzKCk7XG4gICAgLyoqXG4gICAgICogV2hlbiBwcm9ncmFtbWF0aWNhbGx5IGZvY3VzaW5nIGFuIGVsZW1lbnQsXG4gICAgICogdGhlIGZvY3VzLXZpc2libGUgdXRpbGl0eSB3aWxsIG5vdCBydW4gYmVjYXVzZVxuICAgICAqIGl0IGlzIGV4cGVjdGluZyBhIGtleWJvYXJkIGV2ZW50IHRvIGhhdmUgdHJpZ2dlcmVkIHRoaXM7XG4gICAgICogaG93ZXZlciwgdGhlcmUgYXJlIHRpbWVzIHdoZW4gd2UgbmVlZCB0byBtYW51YWxseSBjb250cm9sXG4gICAgICogdGhpcyBiZWhhdmlvciBzbyB3ZSBjYWxsIHRoZSBgc2V0Rm9jdXNgIG1ldGhvZCBvbiBpb24tYXBwXG4gICAgICogd2hpY2ggd2lsbCBsZXQgdXMgZXhwbGljaXRseSBzZXQgdGhlIGVsZW1lbnRzIHRvIGZvY3VzLlxuICAgICAqL1xuICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2lvbi1mb2N1c2FibGUnKSkge1xuICAgICAgICBjb25zdCBhcHAgPSBlbC5jbG9zZXN0KCdpb24tYXBwJyk7XG4gICAgICAgIGlmIChhcHApIHtcbiAgICAgICAgICAgIGFwcC5zZXRGb2N1cyhbZWxdKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG4vKipcbiAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gYWRkIGEgaGlkZGVuIGlucHV0IHRvIGEgaG9zdCBlbGVtZW50IHRoYXQgY29udGFpbnNcbiAqIGEgU2hhZG93IERPTS4gSXQgZG9lcyBub3QgYWRkIHRoZSBpbnB1dCBpbnNpZGUgb2YgdGhlIFNoYWRvdyByb290IHdoaWNoXG4gKiBhbGxvd3MgaXQgdG8gYmUgcGlja2VkIHVwIGluc2lkZSBvZiBmb3Jtcy4gSXQgc2hvdWxkIGNvbnRhaW4gdGhlIHNhbWVcbiAqIHZhbHVlcyBhcyB0aGUgaG9zdCBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSBhbHdheXMgQWRkIGEgaGlkZGVuIGlucHV0IGV2ZW4gaWYgdGhlIGNvbnRhaW5lciBkb2VzIG5vdCB1c2UgU2hhZG93XG4gKiBAcGFyYW0gY29udGFpbmVyIFRoZSBlbGVtZW50IHdoZXJlIHRoZSBpbnB1dCB3aWxsIGJlIGFkZGVkXG4gKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5wdXRcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgb2YgdGhlIGlucHV0XG4gKiBAcGFyYW0gZGlzYWJsZWQgSWYgdHJ1ZSwgdGhlIGlucHV0IGlzIGRpc2FibGVkXG4gKi9cbmNvbnN0IHJlbmRlckhpZGRlbklucHV0ID0gKGFsd2F5cywgY29udGFpbmVyLCBuYW1lLCB2YWx1ZSwgZGlzYWJsZWQpID0+IHtcbiAgICB7XG4gICAgICAgIGxldCBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dC5hdXgtaW5wdXQnKTtcbiAgICAgICAgaWYgKCFpbnB1dCkge1xuICAgICAgICAgICAgaW5wdXQgPSBjb250YWluZXIub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgaW5wdXQudHlwZSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnYXV4LWlucHV0Jyk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGlucHV0LmRpc2FibGVkID0gZGlzYWJsZWQ7XG4gICAgICAgIGlucHV0Lm5hbWUgPSBuYW1lO1xuICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlIHx8ICcnO1xuICAgIH1cbn07XG5jb25zdCBjbGFtcCA9IChtaW4sIG4sIG1heCkgPT4ge1xuICAgIHJldHVybiBNYXRoLm1heChtaW4sIE1hdGgubWluKG4sIG1heCkpO1xufTtcbmNvbnN0IGFzc2VydCA9IChhY3R1YWwsIHJlYXNvbikgPT4ge1xuICAgIGlmICghYWN0dWFsKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnQVNTRVJUOiAnICsgcmVhc29uO1xuICAgICAgICBwcmludElvbkVycm9yKG1lc3NhZ2UpO1xuICAgICAgICBkZWJ1Z2dlcjsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxufTtcbmNvbnN0IHBvaW50ZXJDb29yZCA9IChldikgPT4ge1xuICAgIC8vIGdldCBYIGNvb3JkaW5hdGVzIGZvciBlaXRoZXIgYSBtb3VzZSBjbGlja1xuICAgIC8vIG9yIGEgdG91Y2ggZGVwZW5kaW5nIG9uIHRoZSBnaXZlbiBldmVudFxuICAgIGlmIChldikge1xuICAgICAgICBjb25zdCBjaGFuZ2VkVG91Y2hlcyA9IGV2LmNoYW5nZWRUb3VjaGVzO1xuICAgICAgICBpZiAoY2hhbmdlZFRvdWNoZXMgJiYgY2hhbmdlZFRvdWNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgdG91Y2ggPSBjaGFuZ2VkVG91Y2hlc1swXTtcbiAgICAgICAgICAgIHJldHVybiB7IHg6IHRvdWNoLmNsaWVudFgsIHk6IHRvdWNoLmNsaWVudFkgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXYucGFnZVggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgeDogZXYucGFnZVgsIHk6IGV2LnBhZ2VZIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgeDogMCwgeTogMCB9O1xufTtcbi8qKlxuICogQGhpZGRlblxuICogR2l2ZW4gYSBzaWRlLCByZXR1cm4gaWYgaXQgc2hvdWxkIGJlIG9uIHRoZSBlbmRcbiAqIGJhc2VkIG9uIHRoZSB2YWx1ZSBvZiBkaXJcbiAqIEBwYXJhbSBzaWRlIHRoZSBzaWRlXG4gKiBAcGFyYW0gaXNSVEwgd2hldGhlciB0aGUgYXBwbGljYXRpb24gZGlyIGlzIHJ0bFxuICovXG5jb25zdCBpc0VuZFNpZGUgPSAoc2lkZSkgPT4ge1xuICAgIGNvbnN0IGlzUlRMID0gZG9jdW1lbnQuZGlyID09PSAncnRsJztcbiAgICBzd2l0Y2ggKHNpZGUpIHtcbiAgICAgICAgY2FzZSAnc3RhcnQnOlxuICAgICAgICAgICAgcmV0dXJuIGlzUlRMO1xuICAgICAgICBjYXNlICdlbmQnOlxuICAgICAgICAgICAgcmV0dXJuICFpc1JUTDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCIke3NpZGV9XCIgaXMgbm90IGEgdmFsaWQgdmFsdWUgZm9yIFtzaWRlXS4gVXNlIFwic3RhcnRcIiBvciBcImVuZFwiIGluc3RlYWQuYCk7XG4gICAgfVxufTtcbmNvbnN0IGRlYm91bmNlRXZlbnQgPSAoZXZlbnQsIHdhaXQpID0+IHtcbiAgICBjb25zdCBvcmlnaW5hbCA9IGV2ZW50Ll9vcmlnaW5hbCB8fCBldmVudDtcbiAgICByZXR1cm4ge1xuICAgICAgICBfb3JpZ2luYWw6IGV2ZW50LFxuICAgICAgICBlbWl0OiBkZWJvdW5jZShvcmlnaW5hbC5lbWl0LmJpbmQob3JpZ2luYWwpLCB3YWl0KSxcbiAgICB9O1xufTtcbmNvbnN0IGRlYm91bmNlID0gKGZ1bmMsIHdhaXQgPSAwKSA9PiB7XG4gICAgbGV0IHRpbWVyO1xuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuYywgd2FpdCwgLi4uYXJncyk7XG4gICAgfTtcbn07XG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdGhlIHR3byBzdHJpbmcgbWFwcyBhcmUgc2hhbGxvdyBlcXVhbC5cbiAqXG4gKiB1bmRlZmluZWQgaXMgdHJlYXRlZCBhcyBhbiBlbXB0eSBtYXAuXG4gKlxuICogQHJldHVybnMgd2hldGhlciB0aGUga2V5cyBhcmUgdGhlIHNhbWUgYW5kIHRoZSB2YWx1ZXMgYXJlIHNoYWxsb3cgZXF1YWwuXG4gKi9cbmNvbnN0IHNoYWxsb3dFcXVhbFN0cmluZ01hcCA9IChtYXAxLCBtYXAyKSA9PiB7XG4gICAgbWFwMSAhPT0gbnVsbCAmJiBtYXAxICE9PSB2b2lkIDAgPyBtYXAxIDogKG1hcDEgPSB7fSk7XG4gICAgbWFwMiAhPT0gbnVsbCAmJiBtYXAyICE9PSB2b2lkIDAgPyBtYXAyIDogKG1hcDIgPSB7fSk7XG4gICAgaWYgKG1hcDEgPT09IG1hcDIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGtleXMxID0gT2JqZWN0LmtleXMobWFwMSk7XG4gICAgaWYgKGtleXMxLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMobWFwMikubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrMSBvZiBrZXlzMSkge1xuICAgICAgICBpZiAoIShrMSBpbiBtYXAyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXAxW2sxXSAhPT0gbWFwMltrMV0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbiAqIENoZWNrcyBpbnB1dCBmb3IgdXNhYmxlIG51bWJlci4gTm90IE5hTiBhbmQgbm90IEluZmluaXRlLlxuICovXG5jb25zdCBpc1NhZmVOdW1iZXIgPSAoaW5wdXQpID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyAmJiAhaXNOYU4oaW5wdXQpICYmIGlzRmluaXRlKGlucHV0KTtcbn07XG5cbmV4cG9ydCB7IGFkZEV2ZW50TGlzdGVuZXIgYXMgYSwgcmVtb3ZlRXZlbnRMaXN0ZW5lciBhcyBiLCBjb21wb25lbnRPblJlYWR5IGFzIGMsIGluaGVyaXRBdHRyaWJ1dGVzIGFzIGQsIHJlbmRlckhpZGRlbklucHV0IGFzIGUsIGNsYW1wIGFzIGYsIGdldEVsZW1lbnRSb290IGFzIGcsIGZvY3VzVmlzaWJsZUVsZW1lbnQgYXMgaCwgaW5oZXJpdEFyaWFBdHRyaWJ1dGVzIGFzIGksIGhhc1NoYWRvd0RvbSBhcyBqLCBoYXNMYXp5QnVpbGQgYXMgaywgZGVib3VuY2VFdmVudCBhcyBsLCBpc0VuZFNpZGUgYXMgbSwgYXNzZXJ0IGFzIG4sIGlzU2FmZU51bWJlciBhcyBvLCBkZWJvdW5jZSBhcyBwLCBwb2ludGVyQ29vcmQgYXMgcSwgcmFmIGFzIHIsIHNoYWxsb3dFcXVhbFN0cmluZ01hcCBhcyBzLCB0cmFuc2l0aW9uRW5kQXN5bmMgYXMgdCB9O1xuIiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IHNldE1vZGUsIGdldE1vZGUgfSBmcm9tICdAc3RlbmNpbC9jb3JlL2ludGVybmFsL2NsaWVudCc7XG5pbXBvcnQgeyBjIGFzIGNvbmZpZywgYiBhcyBjb25maWdGcm9tU2Vzc2lvbiwgZCBhcyBjb25maWdGcm9tVVJMLCBzIGFzIHNhdmVDb25maWcsIHAgYXMgcHJpbnRJb25XYXJuaW5nIH0gZnJvbSAnLi9pbmRleDQuanMnO1xuXG5jb25zdCBnZXRQbGF0Zm9ybXMgPSAod2luKSA9PiBzZXR1cFBsYXRmb3Jtcyh3aW4pO1xuY29uc3QgaXNQbGF0Zm9ybSA9ICh3aW5PclBsYXRmb3JtLCBwbGF0Zm9ybSkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luT3JQbGF0Zm9ybSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcGxhdGZvcm0gPSB3aW5PclBsYXRmb3JtO1xuICAgICAgICB3aW5PclBsYXRmb3JtID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0UGxhdGZvcm1zKHdpbk9yUGxhdGZvcm0pLmluY2x1ZGVzKHBsYXRmb3JtKTtcbn07XG5jb25zdCBzZXR1cFBsYXRmb3JtcyA9ICh3aW4gPSB3aW5kb3cpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICB3aW4uSW9uaWMgPSB3aW4uSW9uaWMgfHwge307XG4gICAgbGV0IHBsYXRmb3JtcyA9IHdpbi5Jb25pYy5wbGF0Zm9ybXM7XG4gICAgaWYgKHBsYXRmb3JtcyA9PSBudWxsKSB7XG4gICAgICAgIHBsYXRmb3JtcyA9IHdpbi5Jb25pYy5wbGF0Zm9ybXMgPSBkZXRlY3RQbGF0Zm9ybXMod2luKTtcbiAgICAgICAgcGxhdGZvcm1zLmZvckVhY2goKHApID0+IHdpbi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChgcGx0LSR7cH1gKSk7XG4gICAgfVxuICAgIHJldHVybiBwbGF0Zm9ybXM7XG59O1xuY29uc3QgZGV0ZWN0UGxhdGZvcm1zID0gKHdpbikgPT4ge1xuICAgIGNvbnN0IGN1c3RvbVBsYXRmb3JtTWV0aG9kcyA9IGNvbmZpZy5nZXQoJ3BsYXRmb3JtJyk7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKFBMQVRGT1JNU19NQVApLmZpbHRlcigocCkgPT4ge1xuICAgICAgICBjb25zdCBjdXN0b21NZXRob2QgPSBjdXN0b21QbGF0Zm9ybU1ldGhvZHMgPT09IG51bGwgfHwgY3VzdG9tUGxhdGZvcm1NZXRob2RzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXN0b21QbGF0Zm9ybU1ldGhvZHNbcF07XG4gICAgICAgIHJldHVybiB0eXBlb2YgY3VzdG9tTWV0aG9kID09PSAnZnVuY3Rpb24nID8gY3VzdG9tTWV0aG9kKHdpbikgOiBQTEFURk9STVNfTUFQW3BdKHdpbik7XG4gICAgfSk7XG59O1xuY29uc3QgaXNNb2JpbGVXZWIgPSAod2luKSA9PiBpc01vYmlsZSh3aW4pICYmICFpc0h5YnJpZCh3aW4pO1xuY29uc3QgaXNJcGFkID0gKHdpbikgPT4ge1xuICAgIC8vIGlPUyAxMiBhbmQgYmVsb3dcbiAgICBpZiAodGVzdFVzZXJBZ2VudCh3aW4sIC9pUGFkL2kpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBpT1MgMTMrXG4gICAgaWYgKHRlc3RVc2VyQWdlbnQod2luLCAvTWFjaW50b3NoL2kpICYmIGlzTW9iaWxlKHdpbikpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5jb25zdCBpc0lwaG9uZSA9ICh3aW4pID0+IHRlc3RVc2VyQWdlbnQod2luLCAvaVBob25lL2kpO1xuY29uc3QgaXNJT1MgPSAod2luKSA9PiB0ZXN0VXNlckFnZW50KHdpbiwgL2lQaG9uZXxpUG9kL2kpIHx8IGlzSXBhZCh3aW4pO1xuY29uc3QgaXNBbmRyb2lkID0gKHdpbikgPT4gdGVzdFVzZXJBZ2VudCh3aW4sIC9hbmRyb2lkfHNpbmsvaSk7XG5jb25zdCBpc0FuZHJvaWRUYWJsZXQgPSAod2luKSA9PiB7XG4gICAgcmV0dXJuIGlzQW5kcm9pZCh3aW4pICYmICF0ZXN0VXNlckFnZW50KHdpbiwgL21vYmlsZS9pKTtcbn07XG5jb25zdCBpc1BoYWJsZXQgPSAod2luKSA9PiB7XG4gICAgY29uc3Qgd2lkdGggPSB3aW4uaW5uZXJXaWR0aDtcbiAgICBjb25zdCBoZWlnaHQgPSB3aW4uaW5uZXJIZWlnaHQ7XG4gICAgY29uc3Qgc21hbGxlc3QgPSBNYXRoLm1pbih3aWR0aCwgaGVpZ2h0KTtcbiAgICBjb25zdCBsYXJnZXN0ID0gTWF0aC5tYXgod2lkdGgsIGhlaWdodCk7XG4gICAgcmV0dXJuIHNtYWxsZXN0ID4gMzkwICYmIHNtYWxsZXN0IDwgNTIwICYmIGxhcmdlc3QgPiA2MjAgJiYgbGFyZ2VzdCA8IDgwMDtcbn07XG5jb25zdCBpc1RhYmxldCA9ICh3aW4pID0+IHtcbiAgICBjb25zdCB3aWR0aCA9IHdpbi5pbm5lcldpZHRoO1xuICAgIGNvbnN0IGhlaWdodCA9IHdpbi5pbm5lckhlaWdodDtcbiAgICBjb25zdCBzbWFsbGVzdCA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpO1xuICAgIGNvbnN0IGxhcmdlc3QgPSBNYXRoLm1heCh3aWR0aCwgaGVpZ2h0KTtcbiAgICByZXR1cm4gaXNJcGFkKHdpbikgfHwgaXNBbmRyb2lkVGFibGV0KHdpbikgfHwgKHNtYWxsZXN0ID4gNDYwICYmIHNtYWxsZXN0IDwgODIwICYmIGxhcmdlc3QgPiA3ODAgJiYgbGFyZ2VzdCA8IDE0MDApO1xufTtcbmNvbnN0IGlzTW9iaWxlID0gKHdpbikgPT4gbWF0Y2hNZWRpYSh3aW4sICcoYW55LXBvaW50ZXI6Y29hcnNlKScpO1xuY29uc3QgaXNEZXNrdG9wID0gKHdpbikgPT4gIWlzTW9iaWxlKHdpbik7XG5jb25zdCBpc0h5YnJpZCA9ICh3aW4pID0+IGlzQ29yZG92YSh3aW4pIHx8IGlzQ2FwYWNpdG9yTmF0aXZlKHdpbik7XG5jb25zdCBpc0NvcmRvdmEgPSAod2luKSA9PiAhISh3aW5bJ2NvcmRvdmEnXSB8fCB3aW5bJ3Bob25lZ2FwJ10gfHwgd2luWydQaG9uZUdhcCddKTtcbmNvbnN0IGlzQ2FwYWNpdG9yTmF0aXZlID0gKHdpbikgPT4ge1xuICAgIGNvbnN0IGNhcGFjaXRvciA9IHdpblsnQ2FwYWNpdG9yJ107XG4gICAgLy8gVE9ETyhST1UtMTE2OTMpOiBSZW1vdmUgd2hlbiB3ZSBubyBsb25nZXIgc3VwcG9ydCBDYXBhY2l0b3IgMiwgd2hpY2ggZG9lcyBub3QgaGF2ZSBpc05hdGl2ZVBsYXRmb3JtXG4gICAgcmV0dXJuICEhKChjYXBhY2l0b3IgPT09IG51bGwgfHwgY2FwYWNpdG9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjYXBhY2l0b3IuaXNOYXRpdmUpIHx8ICgoY2FwYWNpdG9yID09PSBudWxsIHx8IGNhcGFjaXRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2FwYWNpdG9yLmlzTmF0aXZlUGxhdGZvcm0pICYmICEhY2FwYWNpdG9yLmlzTmF0aXZlUGxhdGZvcm0oKSkpO1xufTtcbmNvbnN0IGlzRWxlY3Ryb24gPSAod2luKSA9PiB0ZXN0VXNlckFnZW50KHdpbiwgL2VsZWN0cm9uL2kpO1xuY29uc3QgaXNQV0EgPSAod2luKSA9PiB7IHZhciBfYTsgcmV0dXJuICEhKCgoX2EgPSB3aW4ubWF0Y2hNZWRpYSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwod2luLCAnKGRpc3BsYXktbW9kZTogc3RhbmRhbG9uZSknKS5tYXRjaGVzKSB8fCB3aW4ubmF2aWdhdG9yLnN0YW5kYWxvbmUpOyB9O1xuY29uc3QgdGVzdFVzZXJBZ2VudCA9ICh3aW4sIGV4cHIpID0+IGV4cHIudGVzdCh3aW4ubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5jb25zdCBtYXRjaE1lZGlhID0gKHdpbiwgcXVlcnkpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gd2luLm1hdGNoTWVkaWEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHdpbiwgcXVlcnkpLm1hdGNoZXM7IH07XG5jb25zdCBQTEFURk9STVNfTUFQID0ge1xuICAgIGlwYWQ6IGlzSXBhZCxcbiAgICBpcGhvbmU6IGlzSXBob25lLFxuICAgIGlvczogaXNJT1MsXG4gICAgYW5kcm9pZDogaXNBbmRyb2lkLFxuICAgIHBoYWJsZXQ6IGlzUGhhYmxldCxcbiAgICB0YWJsZXQ6IGlzVGFibGV0LFxuICAgIGNvcmRvdmE6IGlzQ29yZG92YSxcbiAgICBjYXBhY2l0b3I6IGlzQ2FwYWNpdG9yTmF0aXZlLFxuICAgIGVsZWN0cm9uOiBpc0VsZWN0cm9uLFxuICAgIHB3YTogaXNQV0EsXG4gICAgbW9iaWxlOiBpc01vYmlsZSxcbiAgICBtb2JpbGV3ZWI6IGlzTW9iaWxlV2ViLFxuICAgIGRlc2t0b3A6IGlzRGVza3RvcCxcbiAgICBoeWJyaWQ6IGlzSHlicmlkLFxufTtcblxuLy8gVE9ETyhGVy0yODMyKTogdHlwZXNcbmxldCBkZWZhdWx0TW9kZTtcbmNvbnN0IGdldElvbk1vZGUgPSAocmVmKSA9PiB7XG4gICAgcmV0dXJuIChyZWYgJiYgZ2V0TW9kZShyZWYpKSB8fCBkZWZhdWx0TW9kZTtcbn07XG5jb25zdCBpbml0aWFsaXplID0gKHVzZXJDb25maWcgPSB7fSkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRvYyA9IHdpbmRvdy5kb2N1bWVudDtcbiAgICBjb25zdCB3aW4gPSB3aW5kb3c7XG4gICAgY29uc3QgSW9uaWMgPSAod2luLklvbmljID0gd2luLklvbmljIHx8IHt9KTtcbiAgICAvLyBjcmVhdGUgdGhlIElvbmljLmNvbmZpZyBmcm9tIHJhdyBjb25maWcgb2JqZWN0IChpZiBpdCBleGlzdHMpXG4gICAgLy8gYW5kIGNvbnZlcnQgSW9uaWMuY29uZmlnIGludG8gYSBDb25maWdBcGkgdGhhdCBoYXMgYSBnZXQoKSBmblxuICAgIGNvbnN0IGNvbmZpZ09iaiA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnRnJvbVNlc3Npb24od2luKSksIHsgcGVyc2lzdENvbmZpZzogZmFsc2UgfSksIElvbmljLmNvbmZpZyksIGNvbmZpZ0Zyb21VUkwod2luKSksIHVzZXJDb25maWcpO1xuICAgIGNvbmZpZy5yZXNldChjb25maWdPYmopO1xuICAgIGlmIChjb25maWcuZ2V0Qm9vbGVhbigncGVyc2lzdENvbmZpZycpKSB7XG4gICAgICAgIHNhdmVDb25maWcod2luLCBjb25maWdPYmopO1xuICAgIH1cbiAgICAvLyBTZXR1cCBwbGF0Zm9ybXNcbiAgICBzZXR1cFBsYXRmb3Jtcyh3aW4pO1xuICAgIC8vIGZpcnN0IHNlZSBpZiB0aGUgbW9kZSB3YXMgc2V0IGFzIGFuIGF0dHJpYnV0ZSBvbiA8aHRtbD5cbiAgICAvLyB3aGljaCBjb3VsZCBoYXZlIGJlZW4gc2V0IGJ5IHRoZSB1c2VyLCBvciBieSBwcmUtcmVuZGVyaW5nXG4gICAgLy8gb3RoZXJ3aXNlIGdldCB0aGUgbW9kZSB2aWEgY29uZmlnIHNldHRpbmdzLCBhbmQgZmFsbGJhY2sgdG8gbWRcbiAgICBJb25pYy5jb25maWcgPSBjb25maWc7XG4gICAgSW9uaWMubW9kZSA9IGRlZmF1bHRNb2RlID0gY29uZmlnLmdldCgnbW9kZScsIGRvYy5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdtb2RlJykgfHwgKGlzUGxhdGZvcm0od2luLCAnaW9zJykgPyAnaW9zJyA6ICdtZCcpKTtcbiAgICBjb25maWcuc2V0KCdtb2RlJywgZGVmYXVsdE1vZGUpO1xuICAgIGRvYy5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdtb2RlJywgZGVmYXVsdE1vZGUpO1xuICAgIGRvYy5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChkZWZhdWx0TW9kZSk7XG4gICAgaWYgKGNvbmZpZy5nZXRCb29sZWFuKCdfdGVzdGluZycpKSB7XG4gICAgICAgIGNvbmZpZy5zZXQoJ2FuaW1hdGVkJywgZmFsc2UpO1xuICAgIH1cbiAgICBjb25zdCBpc0lvbmljRWxlbWVudCA9IChlbG0pID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZWxtLnRhZ05hbWUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdGFydHNXaXRoKCdJT04tJyk7IH07XG4gICAgY29uc3QgaXNBbGxvd2VkSW9uaWNNb2RlVmFsdWUgPSAoZWxtTW9kZSkgPT4gWydpb3MnLCAnbWQnXS5pbmNsdWRlcyhlbG1Nb2RlKTtcbiAgICBzZXRNb2RlKChlbG0pID0+IHtcbiAgICAgICAgd2hpbGUgKGVsbSkge1xuICAgICAgICAgICAgY29uc3QgZWxtTW9kZSA9IGVsbS5tb2RlIHx8IGVsbS5nZXRBdHRyaWJ1dGUoJ21vZGUnKTtcbiAgICAgICAgICAgIGlmIChlbG1Nb2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzQWxsb3dlZElvbmljTW9kZVZhbHVlKGVsbU1vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbG1Nb2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0lvbmljRWxlbWVudChlbG0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHByaW50SW9uV2FybmluZygnSW52YWxpZCBpb25pYyBtb2RlOiBcIicgKyBlbG1Nb2RlICsgJ1wiLCBleHBlY3RlZDogXCJpb3NcIiBvciBcIm1kXCInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbG0gPSBlbG0ucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmYXVsdE1vZGU7XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBpc1BsYXRmb3JtIGFzIGEsIGdldElvbk1vZGUgYXMgYiwgZ2V0UGxhdGZvcm1zIGFzIGcsIGluaXRpYWxpemUgYXMgaSB9O1xuIiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmNvbnN0IGhvc3RDb250ZXh0ID0gKHNlbGVjdG9yLCBlbCkgPT4ge1xuICAgIHJldHVybiBlbC5jbG9zZXN0KHNlbGVjdG9yKSAhPT0gbnVsbDtcbn07XG4vKipcbiAqIENyZWF0ZSB0aGUgbW9kZSBhbmQgY29sb3IgY2xhc3NlcyBmb3IgdGhlIGNvbXBvbmVudCBiYXNlZCBvbiB0aGUgY2xhc3NlcyBwYXNzZWQgaW5cbiAqL1xuY29uc3QgY3JlYXRlQ29sb3JDbGFzc2VzID0gKGNvbG9yLCBjc3NDbGFzc01hcCkgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgY29sb3IgPT09ICdzdHJpbmcnICYmIGNvbG9yLmxlbmd0aCA+IDBcbiAgICAgICAgPyBPYmplY3QuYXNzaWduKHsgJ2lvbi1jb2xvcic6IHRydWUsIFtgaW9uLWNvbG9yLSR7Y29sb3J9YF06IHRydWUgfSwgY3NzQ2xhc3NNYXApIDogY3NzQ2xhc3NNYXA7XG59O1xuY29uc3QgZ2V0Q2xhc3NMaXN0ID0gKGNsYXNzZXMpID0+IHtcbiAgICBpZiAoY2xhc3NlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGFycmF5ID0gQXJyYXkuaXNBcnJheShjbGFzc2VzKSA/IGNsYXNzZXMgOiBjbGFzc2VzLnNwbGl0KCcgJyk7XG4gICAgICAgIHJldHVybiBhcnJheVxuICAgICAgICAgICAgLmZpbHRlcigoYykgPT4gYyAhPSBudWxsKVxuICAgICAgICAgICAgLm1hcCgoYykgPT4gYy50cmltKCkpXG4gICAgICAgICAgICAuZmlsdGVyKChjKSA9PiBjICE9PSAnJyk7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbn07XG5jb25zdCBnZXRDbGFzc01hcCA9IChjbGFzc2VzKSA9PiB7XG4gICAgY29uc3QgbWFwID0ge307XG4gICAgZ2V0Q2xhc3NMaXN0KGNsYXNzZXMpLmZvckVhY2goKGMpID0+IChtYXBbY10gPSB0cnVlKSk7XG4gICAgcmV0dXJuIG1hcDtcbn07XG5jb25zdCBTQ0hFTUUgPSAvXlthLXpdW2EtejAtOStcXC0uXSo6LztcbmNvbnN0IG9wZW5VUkwgPSBhc3luYyAodXJsLCBldiwgZGlyZWN0aW9uLCBhbmltYXRpb24pID0+IHtcbiAgICBpZiAodXJsICE9IG51bGwgJiYgdXJsWzBdICE9PSAnIycgJiYgIVNDSEVNRS50ZXN0KHVybCkpIHtcbiAgICAgICAgY29uc3Qgcm91dGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW9uLXJvdXRlcicpO1xuICAgICAgICBpZiAocm91dGVyKSB7XG4gICAgICAgICAgICBpZiAoZXYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm91dGVyLnB1c2godXJsLCBkaXJlY3Rpb24sIGFuaW1hdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0IHsgY3JlYXRlQ29sb3JDbGFzc2VzIGFzIGMsIGdldENsYXNzTWFwIGFzIGcsIGhvc3RDb250ZXh0IGFzIGgsIG9wZW5VUkwgYXMgbyB9O1xuIiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IHByb3h5Q3VzdG9tRWxlbWVudCwgSFRNTEVsZW1lbnQsIGZvcmNlVXBkYXRlLCBoLCBIb3N0IH0gZnJvbSAnQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9jbGllbnQnO1xuaW1wb3J0IHsgYiBhcyBnZXRJb25Nb2RlIH0gZnJvbSAnLi9pb25pYy1nbG9iYWwuanMnO1xuXG5jb25zdCBTSVpFX1RPX01FRElBID0ge1xuICAgIHhzOiAnKG1pbi13aWR0aDogMHB4KScsXG4gICAgc206ICcobWluLXdpZHRoOiA1NzZweCknLFxuICAgIG1kOiAnKG1pbi13aWR0aDogNzY4cHgpJyxcbiAgICBsZzogJyhtaW4td2lkdGg6IDk5MnB4KScsXG4gICAgeGw6ICcobWluLXdpZHRoOiAxMjAwcHgpJyxcbn07XG4vLyBDaGVjayBpZiB0aGUgd2luZG93IG1hdGNoZXMgdGhlIG1lZGlhIHF1ZXJ5XG4vLyBhdCB0aGUgYnJlYWtwb2ludCBwYXNzZWRcbi8vIGUuZy4gbWF0Y2hCcmVha3BvaW50KCdzbScpID0+IHRydWUgaWYgc2NyZWVuIHdpZHRoIGV4Y2VlZHMgNTc2cHhcbmNvbnN0IG1hdGNoQnJlYWtwb2ludCA9IChicmVha3BvaW50KSA9PiB7XG4gICAgaWYgKGJyZWFrcG9pbnQgPT09IHVuZGVmaW5lZCB8fCBicmVha3BvaW50ID09PSAnJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKSB7XG4gICAgICAgIGNvbnN0IG1lZGlhUXVlcnkgPSBTSVpFX1RPX01FRElBW2JyZWFrcG9pbnRdO1xuICAgICAgICByZXR1cm4gd2luZG93Lm1hdGNoTWVkaWEobWVkaWFRdWVyeSkubWF0Y2hlcztcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgY29sQ3NzID0gXCI6aG9zdHstd2Via2l0LXBhZGRpbmctc3RhcnQ6dmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcteHMsIHZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLCA1cHgpKTtwYWRkaW5nLWlubGluZS1zdGFydDp2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZy14cywgdmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcsIDVweCkpOy13ZWJraXQtcGFkZGluZy1lbmQ6dmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcteHMsIHZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLCA1cHgpKTtwYWRkaW5nLWlubGluZS1lbmQ6dmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcteHMsIHZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLCA1cHgpKTtwYWRkaW5nLXRvcDp2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZy14cywgdmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcsIDVweCkpO3BhZGRpbmctYm90dG9tOnZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLXhzLCB2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZywgNXB4KSk7bWFyZ2luLWxlZnQ6MDttYXJnaW4tcmlnaHQ6MDttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowOy13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwb3NpdGlvbjpyZWxhdGl2ZTstbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTowO2ZsZXgtYmFzaXM6MDstbXMtZmxleC1wb3NpdGl2ZToxO2ZsZXgtZ3JvdzoxO3dpZHRoOjEwMCU7bWF4LXdpZHRoOjEwMCU7bWluLWhlaWdodDoxcHh9QG1lZGlhIChtaW4td2lkdGg6IDU3NnB4KXs6aG9zdHstd2Via2l0LXBhZGRpbmctc3RhcnQ6dmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmctc20sIHZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLCA1cHgpKTtwYWRkaW5nLWlubGluZS1zdGFydDp2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZy1zbSwgdmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcsIDVweCkpOy13ZWJraXQtcGFkZGluZy1lbmQ6dmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmctc20sIHZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLCA1cHgpKTtwYWRkaW5nLWlubGluZS1lbmQ6dmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmctc20sIHZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLCA1cHgpKTtwYWRkaW5nLXRvcDp2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZy1zbSwgdmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcsIDVweCkpO3BhZGRpbmctYm90dG9tOnZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLXNtLCB2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZywgNXB4KSl9fUBtZWRpYSAobWluLXdpZHRoOiA3NjhweCl7Omhvc3R7LXdlYmtpdC1wYWRkaW5nLXN0YXJ0OnZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLW1kLCB2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZywgNXB4KSk7cGFkZGluZy1pbmxpbmUtc3RhcnQ6dmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmctbWQsIHZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLCA1cHgpKTstd2Via2l0LXBhZGRpbmctZW5kOnZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLW1kLCB2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZywgNXB4KSk7cGFkZGluZy1pbmxpbmUtZW5kOnZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLW1kLCB2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZywgNXB4KSk7cGFkZGluZy10b3A6dmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmctbWQsIHZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLCA1cHgpKTtwYWRkaW5nLWJvdHRvbTp2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZy1tZCwgdmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcsIDVweCkpfX1AbWVkaWEgKG1pbi13aWR0aDogOTkycHgpezpob3N0ey13ZWJraXQtcGFkZGluZy1zdGFydDp2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZy1sZywgdmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcsIDVweCkpO3BhZGRpbmctaW5saW5lLXN0YXJ0OnZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLWxnLCB2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZywgNXB4KSk7LXdlYmtpdC1wYWRkaW5nLWVuZDp2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZy1sZywgdmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcsIDVweCkpO3BhZGRpbmctaW5saW5lLWVuZDp2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZy1sZywgdmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcsIDVweCkpO3BhZGRpbmctdG9wOnZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLWxnLCB2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZywgNXB4KSk7cGFkZGluZy1ib3R0b206dmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmctbGcsIHZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLCA1cHgpKX19QG1lZGlhIChtaW4td2lkdGg6IDEyMDBweCl7Omhvc3R7LXdlYmtpdC1wYWRkaW5nLXN0YXJ0OnZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLXhsLCB2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZywgNXB4KSk7cGFkZGluZy1pbmxpbmUtc3RhcnQ6dmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcteGwsIHZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLCA1cHgpKTstd2Via2l0LXBhZGRpbmctZW5kOnZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLXhsLCB2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZywgNXB4KSk7cGFkZGluZy1pbmxpbmUtZW5kOnZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLXhsLCB2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZywgNXB4KSk7cGFkZGluZy10b3A6dmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcteGwsIHZhcigtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLCA1cHgpKTtwYWRkaW5nLWJvdHRvbTp2YXIoLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZy14bCwgdmFyKC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcsIDVweCkpfX1cIjtcblxuY29uc3Qgd2luID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQ7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3ByZWZlci1vcHRpb25hbC1jaGFpblxuY29uc3QgU1VQUE9SVFNfVkFSUyA9IHdpbiAmJiAhISh3aW4uQ1NTICYmIHdpbi5DU1Muc3VwcG9ydHMgJiYgd2luLkNTUy5zdXBwb3J0cygnLS1hOiAwJykpO1xuY29uc3QgQlJFQUtQT0lOVFMgPSBbJycsICd4cycsICdzbScsICdtZCcsICdsZycsICd4bCddO1xuY29uc3QgQ29sID0gLypAX19QVVJFX18qLyBwcm94eUN1c3RvbUVsZW1lbnQoY2xhc3MgQ29sIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKHJlZ2lzdGVySG9zdCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAocmVnaXN0ZXJIb3N0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5fX3JlZ2lzdGVySG9zdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX19hdHRhY2hTaGFkb3coKTtcbiAgICB9XG4gICAgb25SZXNpemUoKSB7XG4gICAgICAgIGZvcmNlVXBkYXRlKHRoaXMpO1xuICAgIH1cbiAgICAvLyBMb29wIHRocm91Z2ggYWxsIG9mIHRoZSBicmVha3BvaW50cyB0byBzZWUgaWYgdGhlIG1lZGlhIHF1ZXJ5XG4gICAgLy8gbWF0Y2hlcyBhbmQgZ3JhYiB0aGUgY29sdW1uIHZhbHVlIGZyb20gdGhlIHJlbGV2YW50IHByb3AgaWYgc29cbiAgICBnZXRDb2x1bW5zKHByb3BlcnR5KSB7XG4gICAgICAgIGxldCBtYXRjaGVkO1xuICAgICAgICBmb3IgKGNvbnN0IGJyZWFrcG9pbnQgb2YgQlJFQUtQT0lOVFMpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBtYXRjaEJyZWFrcG9pbnQoYnJlYWtwb2ludCk7XG4gICAgICAgICAgICAvLyBHcmFiIHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHksIGlmIGl0IGV4aXN0cyBhbmQgb3VyXG4gICAgICAgICAgICAvLyBtZWRpYSBxdWVyeSBtYXRjaGVzIHdlIHJldHVybiB0aGUgdmFsdWVcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbnMgPSB0aGlzW3Byb3BlcnR5ICsgYnJlYWtwb2ludC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGJyZWFrcG9pbnQuc2xpY2UoMSldO1xuICAgICAgICAgICAgaWYgKG1hdGNoZXMgJiYgY29sdW1ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlZCA9IGNvbHVtbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBsYXN0IG1hdGNoZWQgY29sdW1ucyBzaW5jZSB0aGUgYnJlYWtwb2ludHNcbiAgICAgICAgLy8gaW5jcmVhc2UgaW4gc2l6ZSBhbmQgd2Ugd2FudCB0byByZXR1cm4gdGhlIGxhcmdlc3QgbWF0Y2hcbiAgICAgICAgcmV0dXJuIG1hdGNoZWQ7XG4gICAgfVxuICAgIGNhbGN1bGF0ZVNpemUoKSB7XG4gICAgICAgIGNvbnN0IGNvbHVtbnMgPSB0aGlzLmdldENvbHVtbnMoJ3NpemUnKTtcbiAgICAgICAgLy8gSWYgc2l6ZSB3YXNuJ3Qgc2V0IGZvciBhbnkgYnJlYWtwb2ludFxuICAgICAgICAvLyBvciBpZiB0aGUgdXNlciBzZXQgdGhlIHNpemUgd2l0aG91dCBhIHZhbHVlXG4gICAgICAgIC8vIGl0IG1lYW5zIHdlIG5lZWQgdG8gc3RpY2sgd2l0aCB0aGUgZGVmYXVsdCBhbmQgcmV0dXJuXG4gICAgICAgIC8vIGUuZy4gPGlvbi1jb2wgc2l6ZS1tZD5cbiAgICAgICAgaWYgKCFjb2x1bW5zIHx8IGNvbHVtbnMgPT09ICcnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIHNpemUgaXMgc2V0IHRvIGF1dG8gdGhlbiBkb24ndCBjYWxjdWxhdGUgYSBzaXplXG4gICAgICAgIGNvbnN0IGNvbFNpemUgPSBjb2x1bW5zID09PSAnYXV0bydcbiAgICAgICAgICAgID8gJ2F1dG8nXG4gICAgICAgICAgICA6IC8vIElmIENTUyBzdXBwb3J0cyB2YXJpYWJsZXMgd2Ugc2hvdWxkIHVzZSB0aGUgZ3JpZCBjb2x1bW5zIHZhclxuICAgICAgICAgICAgICAgIFNVUFBPUlRTX1ZBUlNcbiAgICAgICAgICAgICAgICAgICAgPyBgY2FsYyhjYWxjKCR7Y29sdW1uc30gLyB2YXIoLS1pb24tZ3JpZC1jb2x1bW5zLCAxMikpICogMTAwJSlgXG4gICAgICAgICAgICAgICAgICAgIDogLy8gQ29udmVydCB0aGUgY29sdW1ucyB0byBhIHBlcmNlbnRhZ2UgYnkgZGl2aWRpbmcgYnkgdGhlIHRvdGFsIG51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2YgY29sdW1ucyAoMTIpIGFuZCB0aGVuIG11bHRpcGx5aW5nIGJ5IDEwMFxuICAgICAgICAgICAgICAgICAgICAgICAgKGNvbHVtbnMgLyAxMikgKiAxMDAgKyAnJSc7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmbGV4OiBgMCAwICR7Y29sU2l6ZX1gLFxuICAgICAgICAgICAgd2lkdGg6IGAke2NvbFNpemV9YCxcbiAgICAgICAgICAgICdtYXgtd2lkdGgnOiBgJHtjb2xTaXplfWAsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIENhbGxlZCBieSBwdXNoLCBwdWxsLCBhbmQgb2Zmc2V0IHNpbmNlIHRoZXkgdXNlIHRoZSBzYW1lIGNhbGN1bGF0aW9uc1xuICAgIGNhbGN1bGF0ZVBvc2l0aW9uKHByb3BlcnR5LCBtb2RpZmllcikge1xuICAgICAgICBjb25zdCBjb2x1bW5zID0gdGhpcy5nZXRDb2x1bW5zKHByb3BlcnR5KTtcbiAgICAgICAgaWYgKCFjb2x1bW5zKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIG51bWJlciBvZiBjb2x1bW5zIHBhc3NlZCBhcmUgZ3JlYXRlciB0aGFuIDAgYW5kIGxlc3MgdGhhblxuICAgICAgICAvLyAxMiB3ZSBjYW4gcG9zaXRpb24gdGhlIGNvbHVtbiwgZWxzZSBkZWZhdWx0IHRvIGF1dG9cbiAgICAgICAgY29uc3QgYW1vdW50ID0gU1VQUE9SVFNfVkFSU1xuICAgICAgICAgICAgPyAvLyBJZiBDU1Mgc3VwcG9ydHMgdmFyaWFibGVzIHdlIHNob3VsZCB1c2UgdGhlIGdyaWQgY29sdW1ucyB2YXJcbiAgICAgICAgICAgICAgICBgY2FsYyhjYWxjKCR7Y29sdW1uc30gLyB2YXIoLS1pb24tZ3JpZC1jb2x1bW5zLCAxMikpICogMTAwJSlgXG4gICAgICAgICAgICA6IC8vIENvbnZlcnQgdGhlIGNvbHVtbnMgdG8gYSBwZXJjZW50YWdlIGJ5IGRpdmlkaW5nIGJ5IHRoZSB0b3RhbCBudW1iZXJcbiAgICAgICAgICAgICAgICAvLyBvZiBjb2x1bW5zICgxMikgYW5kIHRoZW4gbXVsdGlwbHlpbmcgYnkgMTAwXG4gICAgICAgICAgICAgICAgY29sdW1ucyA+IDAgJiYgY29sdW1ucyA8IDEyXG4gICAgICAgICAgICAgICAgICAgID8gKGNvbHVtbnMgLyAxMikgKiAxMDAgKyAnJSdcbiAgICAgICAgICAgICAgICAgICAgOiAnYXV0byc7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBbbW9kaWZpZXJdOiBhbW91bnQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhbGN1bGF0ZU9mZnNldChpc1JUTCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVQb3NpdGlvbignb2Zmc2V0JywgaXNSVEwgPyAnbWFyZ2luLXJpZ2h0JyA6ICdtYXJnaW4tbGVmdCcpO1xuICAgIH1cbiAgICBjYWxjdWxhdGVQdWxsKGlzUlRMKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZVBvc2l0aW9uKCdwdWxsJywgaXNSVEwgPyAnbGVmdCcgOiAncmlnaHQnKTtcbiAgICB9XG4gICAgY2FsY3VsYXRlUHVzaChpc1JUTCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVQb3NpdGlvbigncHVzaCcsIGlzUlRMID8gJ3JpZ2h0JyA6ICdsZWZ0Jyk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgaXNSVEwgPSBkb2N1bWVudC5kaXIgPT09ICdydGwnO1xuICAgICAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIChoKEhvc3QsIHsga2V5OiAnMzJlZDc1ZDgxZGQwOWQ5YmM4OTk5ZjZkNDJlNWIzY2I5OWM4NGQ5MScsIGNsYXNzOiB7XG4gICAgICAgICAgICAgICAgW21vZGVdOiB0cnVlLFxuICAgICAgICAgICAgfSwgc3R5bGU6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY2FsY3VsYXRlT2Zmc2V0KGlzUlRMKSksIHRoaXMuY2FsY3VsYXRlUHVsbChpc1JUTCkpLCB0aGlzLmNhbGN1bGF0ZVB1c2goaXNSVEwpKSwgdGhpcy5jYWxjdWxhdGVTaXplKCkpIH0sIGgoXCJzbG90XCIsIHsga2V5OiAnMzhmOGQwNDQwYzIwY2M2ZDFiMWQ2YTY1NGQwN2YxNmRlNjFkODEzNCcgfSkpKTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBzdHlsZSgpIHsgcmV0dXJuIGNvbENzczsgfVxufSwgWzI1NywgXCJpb24tY29sXCIsIHtcbiAgICAgICAgXCJvZmZzZXRcIjogWzFdLFxuICAgICAgICBcIm9mZnNldFhzXCI6IFsxLCBcIm9mZnNldC14c1wiXSxcbiAgICAgICAgXCJvZmZzZXRTbVwiOiBbMSwgXCJvZmZzZXQtc21cIl0sXG4gICAgICAgIFwib2Zmc2V0TWRcIjogWzEsIFwib2Zmc2V0LW1kXCJdLFxuICAgICAgICBcIm9mZnNldExnXCI6IFsxLCBcIm9mZnNldC1sZ1wiXSxcbiAgICAgICAgXCJvZmZzZXRYbFwiOiBbMSwgXCJvZmZzZXQteGxcIl0sXG4gICAgICAgIFwicHVsbFwiOiBbMV0sXG4gICAgICAgIFwicHVsbFhzXCI6IFsxLCBcInB1bGwteHNcIl0sXG4gICAgICAgIFwicHVsbFNtXCI6IFsxLCBcInB1bGwtc21cIl0sXG4gICAgICAgIFwicHVsbE1kXCI6IFsxLCBcInB1bGwtbWRcIl0sXG4gICAgICAgIFwicHVsbExnXCI6IFsxLCBcInB1bGwtbGdcIl0sXG4gICAgICAgIFwicHVsbFhsXCI6IFsxLCBcInB1bGwteGxcIl0sXG4gICAgICAgIFwicHVzaFwiOiBbMV0sXG4gICAgICAgIFwicHVzaFhzXCI6IFsxLCBcInB1c2gteHNcIl0sXG4gICAgICAgIFwicHVzaFNtXCI6IFsxLCBcInB1c2gtc21cIl0sXG4gICAgICAgIFwicHVzaE1kXCI6IFsxLCBcInB1c2gtbWRcIl0sXG4gICAgICAgIFwicHVzaExnXCI6IFsxLCBcInB1c2gtbGdcIl0sXG4gICAgICAgIFwicHVzaFhsXCI6IFsxLCBcInB1c2gteGxcIl0sXG4gICAgICAgIFwic2l6ZVwiOiBbMV0sXG4gICAgICAgIFwic2l6ZVhzXCI6IFsxLCBcInNpemUteHNcIl0sXG4gICAgICAgIFwic2l6ZVNtXCI6IFsxLCBcInNpemUtc21cIl0sXG4gICAgICAgIFwic2l6ZU1kXCI6IFsxLCBcInNpemUtbWRcIl0sXG4gICAgICAgIFwic2l6ZUxnXCI6IFsxLCBcInNpemUtbGdcIl0sXG4gICAgICAgIFwic2l6ZVhsXCI6IFsxLCBcInNpemUteGxcIl1cbiAgICB9LCBbWzksIFwicmVzaXplXCIsIFwib25SZXNpemVcIl1dXSk7XG5mdW5jdGlvbiBkZWZpbmVDdXN0b21FbGVtZW50JDEoKSB7XG4gICAgaWYgKHR5cGVvZiBjdXN0b21FbGVtZW50cyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbXBvbmVudHMgPSBbXCJpb24tY29sXCJdO1xuICAgIGNvbXBvbmVudHMuZm9yRWFjaCh0YWdOYW1lID0+IHsgc3dpdGNoICh0YWdOYW1lKSB7XG4gICAgICAgIGNhc2UgXCJpb24tY29sXCI6XG4gICAgICAgICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICAgICAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZSh0YWdOYW1lLCBDb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfSB9KTtcbn1cblxuY29uc3QgSW9uQ29sID0gQ29sO1xuY29uc3QgZGVmaW5lQ3VzdG9tRWxlbWVudCA9IGRlZmluZUN1c3RvbUVsZW1lbnQkMTtcblxuZXhwb3J0IHsgSW9uQ29sLCBkZWZpbmVDdXN0b21FbGVtZW50IH07XG4iLCIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZG9jdW1lbnQgb3IgaG9zdCBlbGVtZW50XG4gKiBoYXMgYSBgZGlyYCBzZXQgdG8gYHJ0bGAuIFRoZSBob3N0IHZhbHVlIHdpbGwgYWx3YXlzXG4gKiB0YWtlIHByaW9yaXR5IG92ZXIgdGhlIHJvb3QgZG9jdW1lbnQgdmFsdWUuXG4gKi9cbmNvbnN0IGlzUlRMID0gKGhvc3RFbCkgPT4ge1xuICAgIGlmIChob3N0RWwpIHtcbiAgICAgICAgaWYgKGhvc3RFbC5kaXIgIT09ICcnKSB7XG4gICAgICAgICAgICByZXR1cm4gaG9zdEVsLmRpci50b0xvd2VyQ2FzZSgpID09PSAncnRsJztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gKGRvY3VtZW50ID09PSBudWxsIHx8IGRvY3VtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkb2N1bWVudC5kaXIudG9Mb3dlckNhc2UoKSkgPT09ICdydGwnO1xufTtcblxuZXhwb3J0IHsgaXNSVEwgYXMgaSB9O1xuIiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IHByb3h5Q3VzdG9tRWxlbWVudCwgSFRNTEVsZW1lbnQsIGNyZWF0ZUV2ZW50LCBCdWlsZCwgcmVhZFRhc2ssIGZvcmNlVXBkYXRlLCBoLCBIb3N0IH0gZnJvbSAnQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9jbGllbnQnO1xuaW1wb3J0IHsgaSBhcyBpbmhlcml0QXJpYUF0dHJpYnV0ZXMsIGsgYXMgaGFzTGF6eUJ1aWxkLCBjIGFzIGNvbXBvbmVudE9uUmVhZHkgfSBmcm9tICcuL2hlbHBlcnMuanMnO1xuaW1wb3J0IHsgYiBhcyBnZXRJb25Nb2RlLCBhIGFzIGlzUGxhdGZvcm0gfSBmcm9tICcuL2lvbmljLWdsb2JhbC5qcyc7XG5pbXBvcnQgeyBpIGFzIGlzUlRMIH0gZnJvbSAnLi9kaXIuanMnO1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVDb2xvckNsYXNzZXMsIGggYXMgaG9zdENvbnRleHQgfSBmcm9tICcuL3RoZW1lLmpzJztcblxuY29uc3QgY29udGVudENzcyA9IFwiOmhvc3R7LS1iYWNrZ3JvdW5kOnZhcigtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yLCAjZmZmKTstLWNvbG9yOnZhcigtLWlvbi10ZXh0LWNvbG9yLCAjMDAwKTstLXBhZGRpbmctdG9wOjBweDstLXBhZGRpbmctYm90dG9tOjBweDstLXBhZGRpbmctc3RhcnQ6MHB4Oy0tcGFkZGluZy1lbmQ6MHB4Oy0ta2V5Ym9hcmQtb2Zmc2V0OjBweDstLW9mZnNldC10b3A6MHB4Oy0tb2Zmc2V0LWJvdHRvbTowcHg7LS1vdmVyZmxvdzphdXRvO2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246cmVsYXRpdmU7LW1zLWZsZXg6MTtmbGV4OjE7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTttYXJnaW46MCAhaW1wb3J0YW50O3BhZGRpbmc6MCAhaW1wb3J0YW50O2ZvbnQtZmFtaWx5OnZhcigtLWlvbi1mb250LWZhbWlseSwgaW5oZXJpdCk7Y29udGFpbjpzaXplIHN0eWxlfTpob3N0KC5pb24tY29sb3IpIC5pbm5lci1zY3JvbGx7YmFja2dyb3VuZDp2YXIoLS1pb24tY29sb3ItYmFzZSk7Y29sb3I6dmFyKC0taW9uLWNvbG9yLWNvbnRyYXN0KX0jYmFja2dyb3VuZC1jb250ZW50e2xlZnQ6MHB4O3JpZ2h0OjBweDt0b3A6Y2FsYyh2YXIoLS1vZmZzZXQtdG9wKSAqIC0xKTtib3R0b206Y2FsYyh2YXIoLS1vZmZzZXQtYm90dG9tKSAqIC0xKTtwb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kOnZhcigtLWJhY2tncm91bmQpfS5pbm5lci1zY3JvbGx7bGVmdDowcHg7cmlnaHQ6MHB4O3RvcDpjYWxjKHZhcigtLW9mZnNldC10b3ApICogLTEpO2JvdHRvbTpjYWxjKHZhcigtLW9mZnNldC1ib3R0b20pICogLTEpOy13ZWJraXQtcGFkZGluZy1zdGFydDp2YXIoLS1wYWRkaW5nLXN0YXJ0KTtwYWRkaW5nLWlubGluZS1zdGFydDp2YXIoLS1wYWRkaW5nLXN0YXJ0KTstd2Via2l0LXBhZGRpbmctZW5kOnZhcigtLXBhZGRpbmctZW5kKTtwYWRkaW5nLWlubGluZS1lbmQ6dmFyKC0tcGFkZGluZy1lbmQpO3BhZGRpbmctdG9wOmNhbGModmFyKC0tcGFkZGluZy10b3ApICsgdmFyKC0tb2Zmc2V0LXRvcCkpO3BhZGRpbmctYm90dG9tOmNhbGModmFyKC0tcGFkZGluZy1ib3R0b20pICsgdmFyKC0ta2V5Ym9hcmQtb2Zmc2V0KSArIHZhcigtLW9mZnNldC1ib3R0b20pKTtwb3NpdGlvbjphYnNvbHV0ZTtjb2xvcjp2YXIoLS1jb2xvcik7LXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O292ZXJmbG93OmhpZGRlbjstbXMtdG91Y2gtYWN0aW9uOnBhbi14IHBhbi15IHBpbmNoLXpvb207dG91Y2gtYWN0aW9uOnBhbi14IHBhbi15IHBpbmNoLXpvb219LnNjcm9sbC15LC5zY3JvbGwteHstd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzp0b3VjaDt6LWluZGV4OjA7d2lsbC1jaGFuZ2U6c2Nyb2xsLXBvc2l0aW9ufS5zY3JvbGwteXtvdmVyZmxvdy15OnZhcigtLW92ZXJmbG93KTtvdmVyc2Nyb2xsLWJlaGF2aW9yLXk6Y29udGFpbn0uc2Nyb2xsLXh7b3ZlcmZsb3cteDp2YXIoLS1vdmVyZmxvdyk7b3ZlcnNjcm9sbC1iZWhhdmlvci14OmNvbnRhaW59Lm92ZXJzY3JvbGw6OmJlZm9yZSwub3ZlcnNjcm9sbDo6YWZ0ZXJ7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MXB4O2hlaWdodDoxcHg7Y29udGVudDpcXFwiXFxcIn0ub3ZlcnNjcm9sbDo6YmVmb3Jle2JvdHRvbTotMXB4fS5vdmVyc2Nyb2xsOjphZnRlcnt0b3A6LTFweH06aG9zdCguY29udGVudC1zaXppbmcpe2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy1tcy1mbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC1kaXJlY3Rpb246Y29sdW1uO21pbi1oZWlnaHQ6MDtjb250YWluOm5vbmV9Omhvc3QoLmNvbnRlbnQtc2l6aW5nKSAuaW5uZXItc2Nyb2xse3Bvc2l0aW9uOnJlbGF0aXZlO3RvcDowO2JvdHRvbTowO21hcmdpbi10b3A6Y2FsYyh2YXIoLS1vZmZzZXQtdG9wKSAqIC0xKTttYXJnaW4tYm90dG9tOmNhbGModmFyKC0tb2Zmc2V0LWJvdHRvbSkgKiAtMSl9LnRyYW5zaXRpb24tZWZmZWN0e2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxMDAlO2hlaWdodDoxMDB2aDtvcGFjaXR5OjA7cG9pbnRlci1ldmVudHM6bm9uZX06aG9zdCguY29udGVudC1sdHIpIC50cmFuc2l0aW9uLWVmZmVjdHtsZWZ0Oi0xMDAlO306aG9zdCguY29udGVudC1ydGwpIC50cmFuc2l0aW9uLWVmZmVjdHtyaWdodDotMTAwJTt9LnRyYW5zaXRpb24tY292ZXJ7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JhY2tncm91bmQ6YmxhY2s7b3BhY2l0eTowLjF9LnRyYW5zaXRpb24tc2hhZG93e2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTstd2Via2l0LWJveC1zaGFkb3c6aW5zZXQgLTlweCAwIDlweCAwIHJnYmEoMCwgMCwgMTAwLCAwLjAzKTtib3gtc2hhZG93Omluc2V0IC05cHggMCA5cHggMCByZ2JhKDAsIDAsIDEwMCwgMC4wMyl9Omhvc3QoLmNvbnRlbnQtbHRyKSAudHJhbnNpdGlvbi1zaGFkb3d7cmlnaHQ6MDt9Omhvc3QoLmNvbnRlbnQtcnRsKSAudHJhbnNpdGlvbi1zaGFkb3d7bGVmdDowOy13ZWJraXQtdHJhbnNmb3JtOnNjYWxlWCgtMSk7dHJhbnNmb3JtOnNjYWxlWCgtMSl9OjpzbG90dGVkKFtzbG90PWZpeGVkXSl7cG9zaXRpb246YWJzb2x1dGU7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWigwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWigwKX1cIjtcblxuY29uc3QgQ29udGVudCA9IC8qQF9fUFVSRV9fKi8gcHJveHlDdXN0b21FbGVtZW50KGNsYXNzIENvbnRlbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IocmVnaXN0ZXJIb3N0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGlmIChyZWdpc3Rlckhvc3QgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLl9fcmVnaXN0ZXJIb3N0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fX2F0dGFjaFNoYWRvdygpO1xuICAgICAgICB0aGlzLmlvblNjcm9sbFN0YXJ0ID0gY3JlYXRlRXZlbnQodGhpcywgXCJpb25TY3JvbGxTdGFydFwiLCA3KTtcbiAgICAgICAgdGhpcy5pb25TY3JvbGwgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvblNjcm9sbFwiLCA3KTtcbiAgICAgICAgdGhpcy5pb25TY3JvbGxFbmQgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvblNjcm9sbEVuZFwiLCA3KTtcbiAgICAgICAgdGhpcy53YXRjaERvZyA9IG51bGw7XG4gICAgICAgIHRoaXMuaXNTY3JvbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sYXN0U2Nyb2xsID0gMDtcbiAgICAgICAgdGhpcy5xdWV1ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jVG9wID0gLTE7XG4gICAgICAgIHRoaXMuY0JvdHRvbSA9IC0xO1xuICAgICAgICB0aGlzLmlzTWFpbkNvbnRlbnQgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlc2l6ZVRpbWVvdXQgPSBudWxsO1xuICAgICAgICB0aGlzLmluaGVyaXRlZEF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgdGhpcy50YWJzRWxlbWVudCA9IG51bGw7XG4gICAgICAgIC8vIERldGFpbCBpcyB1c2VkIGluIGEgaG90IGxvb3AgaW4gdGhlIHNjcm9sbCBldmVudCwgYnkgYWxsb2NhdGluZyBpdCBoZXJlXG4gICAgICAgIC8vIFY4IHdpbGwgYmUgYWJsZSB0byBpbmxpbmUgYW55IHJlYWQvd3JpdGUgdG8gaXQgc2luY2UgaXQncyBhIG1vbm9tb3JwaGljIGNsYXNzLlxuICAgICAgICAvLyBodHRwczovL21yYWxlLnBoL2Jsb2cvMjAxNS8wMS8xMS93aGF0cy11cC13aXRoLW1vbm9tb3JwaGlzbS5odG1sXG4gICAgICAgIHRoaXMuZGV0YWlsID0ge1xuICAgICAgICAgICAgc2Nyb2xsVG9wOiAwLFxuICAgICAgICAgICAgc2Nyb2xsTGVmdDogMCxcbiAgICAgICAgICAgIHR5cGU6ICdzY3JvbGwnLFxuICAgICAgICAgICAgZXZlbnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHN0YXJ0WDogMCxcbiAgICAgICAgICAgIHN0YXJ0WTogMCxcbiAgICAgICAgICAgIHN0YXJ0VGltZTogMCxcbiAgICAgICAgICAgIGN1cnJlbnRYOiAwLFxuICAgICAgICAgICAgY3VycmVudFk6IDAsXG4gICAgICAgICAgICB2ZWxvY2l0eVg6IDAsXG4gICAgICAgICAgICB2ZWxvY2l0eVk6IDAsXG4gICAgICAgICAgICBkZWx0YVg6IDAsXG4gICAgICAgICAgICBkZWx0YVk6IDAsXG4gICAgICAgICAgICBjdXJyZW50VGltZTogMCxcbiAgICAgICAgICAgIGRhdGE6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGlzU2Nyb2xsaW5nOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgYHRydWVgLCB0aGUgY29udGVudCB3aWxsIHNjcm9sbCBiZWhpbmQgdGhlIGhlYWRlcnNcbiAgICAgICAgICogYW5kIGZvb3RlcnMuIFRoaXMgZWZmZWN0IGNhbiBlYXNpbHkgYmUgc2VlbiBieSBzZXR0aW5nIHRoZSB0b29sYmFyXG4gICAgICAgICAqIHRvIHRyYW5zcGFyZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mdWxsc2NyZWVuID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250cm9scyB3aGVyZSB0aGUgZml4ZWQgY29udGVudCBpcyBwbGFjZWQgcmVsYXRpdmUgdG8gdGhlIG1haW4gY29udGVudFxuICAgICAgICAgKiBpbiB0aGUgRE9NLiBUaGlzIGNhbiBiZSB1c2VkIHRvIGNvbnRyb2wgdGhlIG9yZGVyIGluIHdoaWNoIGZpeGVkIGVsZW1lbnRzXG4gICAgICAgICAqIHJlY2VpdmUga2V5Ym9hcmQgZm9jdXMuXG4gICAgICAgICAqIEZvciBleGFtcGxlLCBpZiBhIEZBQiBpbiB0aGUgZml4ZWQgc2xvdCBzaG91bGQgcmVjZWl2ZSBrZXlib2FyZCBmb2N1cyBiZWZvcmVcbiAgICAgICAgICogdGhlIG1haW4gcGFnZSBjb250ZW50LCBzZXQgdGhpcyBwcm9wZXJ0eSB0byBgJ2JlZm9yZSdgLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maXhlZFNsb3RQbGFjZW1lbnQgPSAnYWZ0ZXInO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gZW5hYmxlIHRoZSBjb250ZW50IHNjcm9sbGluZyBpbiB0aGUgWCBheGlzLCBzZXQgdGhpcyBwcm9wZXJ0eSB0byBgdHJ1ZWAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNjcm9sbFggPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHlvdSB3YW50IHRvIGRpc2FibGUgdGhlIGNvbnRlbnQgc2Nyb2xsaW5nIGluIHRoZSBZIGF4aXMsIHNldCB0aGlzIHByb3BlcnR5IHRvIGBmYWxzZWAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNjcm9sbFkgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQmVjYXVzZSBvZiBwZXJmb3JtYW5jZSByZWFzb25zLCBpb25TY3JvbGwgZXZlbnRzIGFyZSBkaXNhYmxlZCBieSBkZWZhdWx0LCBpbiBvcmRlciB0byBlbmFibGUgdGhlbVxuICAgICAgICAgKiBhbmQgc3RhcnQgbGlzdGVuaW5nIGZyb20gKGlvblNjcm9sbCksIHNldCB0aGlzIHByb3BlcnR5IHRvIGB0cnVlYC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2Nyb2xsRXZlbnRzID0gZmFsc2U7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgICAgICB0aGlzLmluaGVyaXRlZEF0dHJpYnV0ZXMgPSBpbmhlcml0QXJpYUF0dHJpYnV0ZXModGhpcy5lbCk7XG4gICAgfVxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLmlzTWFpbkNvbnRlbnQgPSB0aGlzLmVsLmNsb3Nlc3QoJ2lvbi1tZW51LCBpb24tcG9wb3ZlciwgaW9uLW1vZGFsJykgPT09IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZnVsbHNjcmVlbiBjb250ZW50IG9mZnNldHMgbmVlZCB0byBiZVxuICAgICAgICAgKiBjb21wdXRlZCBhZnRlciB0aGUgdGFiIGJhciBoYXMgbG9hZGVkLiBTaW5jZVxuICAgICAgICAgKiBsYXp5IGV2YWx1YXRpb24gbWVhbnMgY29tcG9uZW50cyBhcmUgbm90IGh5ZHJhdGVkXG4gICAgICAgICAqIGF0IHRoZSBzYW1lIHRpbWUsIHdlIG5lZWQgdG8gd2FpdCBmb3IgdGhlIGlvblRhYkJhckxvYWRlZFxuICAgICAgICAgKiBldmVudCB0byBmaXJlLiBUaGlzIGRvZXMgbm90IGltcGFjdCBkaXN0LWN1c3RvbS1lbGVtZW50c1xuICAgICAgICAgKiBiZWNhdXNlIHRoZXJlIGlzIG5vIGh5ZHJhdGlvbiB0aGVyZS5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChoYXNMYXp5QnVpbGQodGhpcy5lbCkpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogV2UgbmVlZCB0byBjYWNoZSB0aGUgcmVmZXJlbmNlIHRvIHRoZSB0YWJzLlxuICAgICAgICAgICAgICogSWYganVzdCB0aGUgY29udGVudCBpcyB1bm1vdW50ZWQgdGhlbiB3ZSB3b24ndFxuICAgICAgICAgICAgICogYmUgYWJsZSB0byBxdWVyeSBmb3IgdGhlIGNsb3Nlc3QgdGFicyBvbiBkaXNjb25uZWN0ZWRDYWxsYmFja1xuICAgICAgICAgICAgICogc2luY2UgdGhlIGNvbnRlbnQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBET00gdHJlZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29uc3QgY2xvc2VzdFRhYnMgPSAodGhpcy50YWJzRWxlbWVudCA9IHRoaXMuZWwuY2xvc2VzdCgnaW9uLXRhYnMnKSk7XG4gICAgICAgICAgICBpZiAoY2xvc2VzdFRhYnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBXaGVuIGFkZGluZyBhbmQgcmVtb3ZpbmcgdGhlIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgICAgICAgICAgICogd2UgbmVlZCB0byBtYWtlIHN1cmUgd2UgcGFzcyB0aGUgc2FtZSBmdW5jdGlvbiByZWZlcmVuY2VcbiAgICAgICAgICAgICAgICAgKiBvdGhlcndpc2UgdGhlIGV2ZW50IGxpc3RlbmVyIHdpbGwgbm90IGJlIHJlbW92ZWQgcHJvcGVybHkuXG4gICAgICAgICAgICAgICAgICogV2UgY2FuJ3Qgb25seSBwYXNzIGB0aGlzLnJlc2l6ZWAgYmVjYXVzZSBcInRoaXNcIiBpbiB0aGUgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICAgKiBjb250ZXh0IGJlY29tZXMgYSByZWZlcmVuY2UgdG8gSW9uVGFicyBpbnN0ZWFkIG9mIElvbkNvbnRlbnQuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBBZGRpdGlvbmFsbHksIHdlIGxpc3RlbiBmb3IgaW9uVGFiQmFyTG9hZGVkIG9uIHRoZSBJb25UYWJzXG4gICAgICAgICAgICAgICAgICogaW5zdGFuY2UgcmF0aGVyIHRoYW4gdGhlIElvblRhYkJhciBpbnN0YW5jZS4gSXQncyBwb3NzaWJsZSBmb3JcbiAgICAgICAgICAgICAgICAgKiBhIHRhYiBiYXIgdG8gYmUgY29uZGl0aW9uYWxseSByZW5kZXJlZC9tb3VudGVkLiBTaW5jZSBpb25UYWJCYXJMb2FkZWRcbiAgICAgICAgICAgICAgICAgKiBidWJibGVzLCB3ZSBjYW4gY2F0Y2ggYW55IGluc3RhbmNlcyBvZiBjaGlsZCB0YWIgYmFycyBsb2FkaW5nIGJ5IGxpc3RlbmluZ1xuICAgICAgICAgICAgICAgICAqIG9uIElvblRhYnMuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzTG9hZENhbGxiYWNrID0gKCkgPT4gdGhpcy5yZXNpemUoKTtcbiAgICAgICAgICAgICAgICBjbG9zZXN0VGFicy5hZGRFdmVudExpc3RlbmVyKCdpb25UYWJCYXJMb2FkZWQnLCB0aGlzLnRhYnNMb2FkQ2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLm9uU2Nyb2xsRW5kKCk7XG4gICAgICAgIGlmIChoYXNMYXp5QnVpbGQodGhpcy5lbCkpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGV2ZW50IGxpc3RlbmVyIGFuZCB0YWJzIGNhY2hlcyBuZWVkIHRvXG4gICAgICAgICAgICAgKiBiZSBjbGVhcmVkIG90aGVyd2lzZSB0aGlzIHdpbGwgY3JlYXRlIGEgbWVtb3J5XG4gICAgICAgICAgICAgKiBsZWFrIHdoZXJlIHRoZSBJb25UYWJzIGluc3RhbmNlIGNhbiBuZXZlciBiZVxuICAgICAgICAgICAgICogZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbnN0IHsgdGFic0VsZW1lbnQsIHRhYnNMb2FkQ2FsbGJhY2sgfSA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodGFic0VsZW1lbnQgIT09IG51bGwgJiYgdGFic0xvYWRDYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGFic0VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW9uVGFiQmFyTG9hZGVkJywgdGFic0xvYWRDYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRhYnNFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudGFic0xvYWRDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSb3RhdGluZyBjZXJ0YWluIGRldmljZXMgY2FuIHVwZGF0ZVxuICAgICAqIHRoZSBzYWZlIGFyZWEgaW5zZXRzLiBBcyBhIHJlc3VsdCxcbiAgICAgKiB0aGUgZnVsbHNjcmVlbiBmZWF0dXJlIG9uIGlvbi1jb250ZW50XG4gICAgICogbmVlZHMgdG8gYmUgcmVjYWxjdWxhdGVkLlxuICAgICAqXG4gICAgICogV2UgbGlzdGVuIGZvciBcInJlc2l6ZVwiIGJlY2F1c2Ugd2VcbiAgICAgKiBkbyBub3QgY2FyZSB3aGF0IHRoZSBvcmllbnRhdGlvbiBvZlxuICAgICAqIHRoZSBkZXZpY2UgaXMuIE90aGVyIEFQSXNcbiAgICAgKiBzdWNoIGFzIFNjcmVlbk9yaWVudGF0aW9uIG9yXG4gICAgICogdGhlIGRldmljZW9yaWVudGF0aW9uIGV2ZW50IG11c3QgaGF2ZVxuICAgICAqIHBlcm1pc3Npb24gZnJvbSB0aGUgdXNlciBmaXJzdCB3aGVyZWFzXG4gICAgICogdGhlIFwicmVzaXplXCIgZXZlbnQgZG9lcyBub3QuXG4gICAgICpcbiAgICAgKiBXZSBhbHNvIHRocm90dGxlIHRoZSBjYWxsYmFjayB0byBtaW5pbWl6ZVxuICAgICAqIHRocmFzaGluZyB3aGVuIHF1aWNrbHkgcmVzaXppbmcgYSB3aW5kb3cuXG4gICAgICovXG4gICAgb25SZXNpemUoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZVRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRpbWVvdXQpO1xuICAgICAgICAgICAgdGhpcy5yZXNpemVUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc2l6ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmVzaXplIHNob3VsZCBvbmx5IGhhcHBlblxuICAgICAgICAgICAgICogaWYgdGhlIGNvbnRlbnQgaXMgdmlzaWJsZS5cbiAgICAgICAgICAgICAqIFdoZW4gdGhlIGNvbnRlbnQgaXMgaGlkZGVuXG4gICAgICAgICAgICAgKiB0aGVuIG9mZnNldFBhcmVudCB3aWxsIGJlIG51bGwuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLmVsLm9mZnNldFBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVzaXplKCk7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgfVxuICAgIHNob3VsZEZvcmNlT3ZlcnNjcm9sbCgpIHtcbiAgICAgICAgY29uc3QgeyBmb3JjZU92ZXJzY3JvbGwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IG1vZGUgPSBnZXRJb25Nb2RlKHRoaXMpO1xuICAgICAgICByZXR1cm4gZm9yY2VPdmVyc2Nyb2xsID09PSB1bmRlZmluZWQgPyBtb2RlID09PSAnaW9zJyAmJiBpc1BsYXRmb3JtKCdpb3MnKSA6IGZvcmNlT3ZlcnNjcm9sbDtcbiAgICB9XG4gICAgcmVzaXplKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogT25seSBmb3JjZSB1cGRhdGUgaWYgdGhlIGNvbXBvbmVudCBpcyByZW5kZXJlZCBpbiBhIGJyb3dzZXIgY29udGV4dC5cbiAgICAgICAgICogVXNpbmcgYGZvcmNlVXBkYXRlYCBpbiBhIHNlcnZlciBjb250ZXh0IHdpdGggcHJlLXJlbmRlcmluZyBjYW4gbGVhZCB0byBhbiBpbmZpbml0ZSBsb29wLlxuICAgICAgICAgKiBUaGUgYGh5ZHJhdGVEb2N1bWVudGAgZnVuY3Rpb24gaW4gYEBzdGVuY2lsL2NvcmVgIHdpbGwgcmVuZGVyIHRoZSBgaW9uLWNvbnRlbnRgLCBidXRcbiAgICAgICAgICogYGZvcmNlVXBkYXRlYCB3aWxsIHRyaWdnZXIgYW5vdGhlciByZW5kZXIsIGxvY2tpbmcgdXAgdGhlIHNlcnZlci5cbiAgICAgICAgICpcbiAgICAgICAgICogVE9ETzogUmVtb3ZlIGlmIFNURU5DSUwtODM0IGRldGVybWluZXMgU3RlbmNpbCB3aWxsIGFjY291bnQgZm9yIHRoaXMuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoQnVpbGQuaXNCcm93c2VyKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5mdWxsc2NyZWVuKSB7XG4gICAgICAgICAgICAgICAgcmVhZFRhc2soKCkgPT4gdGhpcy5yZWFkRGltZW5zaW9ucygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY1RvcCAhPT0gMCB8fCB0aGlzLmNCb3R0b20gIT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNUb3AgPSB0aGlzLmNCb3R0b20gPSAwO1xuICAgICAgICAgICAgICAgIGZvcmNlVXBkYXRlKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJlYWREaW1lbnNpb25zKCkge1xuICAgICAgICBjb25zdCBwYWdlID0gZ2V0UGFnZUVsZW1lbnQodGhpcy5lbCk7XG4gICAgICAgIGNvbnN0IHRvcCA9IE1hdGgubWF4KHRoaXMuZWwub2Zmc2V0VG9wLCAwKTtcbiAgICAgICAgY29uc3QgYm90dG9tID0gTWF0aC5tYXgocGFnZS5vZmZzZXRIZWlnaHQgLSB0b3AgLSB0aGlzLmVsLm9mZnNldEhlaWdodCwgMCk7XG4gICAgICAgIGNvbnN0IGRpcnR5ID0gdG9wICE9PSB0aGlzLmNUb3AgfHwgYm90dG9tICE9PSB0aGlzLmNCb3R0b207XG4gICAgICAgIGlmIChkaXJ0eSkge1xuICAgICAgICAgICAgdGhpcy5jVG9wID0gdG9wO1xuICAgICAgICAgICAgdGhpcy5jQm90dG9tID0gYm90dG9tO1xuICAgICAgICAgICAgZm9yY2VVcGRhdGUodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25TY3JvbGwoZXYpIHtcbiAgICAgICAgY29uc3QgdGltZVN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3Qgc2hvdWxkU3RhcnQgPSAhdGhpcy5pc1Njcm9sbGluZztcbiAgICAgICAgdGhpcy5sYXN0U2Nyb2xsID0gdGltZVN0YW1wO1xuICAgICAgICBpZiAoc2hvdWxkU3RhcnQpIHtcbiAgICAgICAgICAgIHRoaXMub25TY3JvbGxTdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5xdWV1ZWQgJiYgdGhpcy5zY3JvbGxFdmVudHMpIHtcbiAgICAgICAgICAgIHRoaXMucXVldWVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlYWRUYXNrKCh0cykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucXVldWVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXRhaWwuZXZlbnQgPSBldjtcbiAgICAgICAgICAgICAgICB1cGRhdGVTY3JvbGxEZXRhaWwodGhpcy5kZXRhaWwsIHRoaXMuc2Nyb2xsRWwsIHRzLCBzaG91bGRTdGFydCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pb25TY3JvbGwuZW1pdCh0aGlzLmRldGFpbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGVsZW1lbnQgd2hlcmUgdGhlIGFjdHVhbCBzY3JvbGxpbmcgdGFrZXMgcGxhY2UuXG4gICAgICogVGhpcyBlbGVtZW50IGNhbiBiZSB1c2VkIHRvIHN1YnNjcmliZSB0byBgc2Nyb2xsYCBldmVudHMgb3IgbWFudWFsbHkgbW9kaWZ5XG4gICAgICogYHNjcm9sbFRvcGAuIEhvd2V2ZXIsIGl0J3MgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSBBUEkgcHJvdmlkZWQgYnkgYGlvbi1jb250ZW50YDpcbiAgICAgKlxuICAgICAqIGkuZS4gVXNpbmcgYGlvblNjcm9sbGAsIGBpb25TY3JvbGxTdGFydGAsIGBpb25TY3JvbGxFbmRgIGZvciBzY3JvbGxpbmcgZXZlbnRzXG4gICAgICogYW5kIGBzY3JvbGxUb1BvaW50KClgIHRvIHNjcm9sbCB0aGUgY29udGVudCBpbnRvIGEgY2VydGFpbiBwb2ludC5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRTY3JvbGxFbGVtZW50KCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhpcyBnZXRzIGNhbGxlZCBpbiBjZXJ0YWluIGVhcmx5IGxpZmVjeWNsZSBob29rcyAoZXg6IFZ1ZSBvbk1vdW50ZWQpLFxuICAgICAgICAgKiBzY3JvbGxFbCB3b24ndCBiZSBkZWZpbmVkIHlldCB3aXRoIHRoZSBjdXN0b20gZWxlbWVudHMgYnVpbGQsIHNvIHdhaXQgZm9yIGl0IHRvIGxvYWQgaW4uXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoIXRoaXMuc2Nyb2xsRWwpIHtcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBjb21wb25lbnRPblJlYWR5KHRoaXMuZWwsIHJlc29sdmUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuc2Nyb2xsRWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBiYWNrZ3JvdW5kIGNvbnRlbnQgZWxlbWVudC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyBnZXRCYWNrZ3JvdW5kRWxlbWVudCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJhY2tncm91bmRDb250ZW50RWwpIHtcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBjb21wb25lbnRPblJlYWR5KHRoaXMuZWwsIHJlc29sdmUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuYmFja2dyb3VuZENvbnRlbnRFbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjcm9sbCB0byB0aGUgdG9wIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZHVyYXRpb24gVGhlIGFtb3VudCBvZiB0aW1lIHRvIHRha2Ugc2Nyb2xsaW5nIHRvIHRoZSB0b3AuIERlZmF1bHRzIHRvIGAwYC5cbiAgICAgKi9cbiAgICBzY3JvbGxUb1RvcChkdXJhdGlvbiA9IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Nyb2xsVG9Qb2ludCh1bmRlZmluZWQsIDAsIGR1cmF0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2Nyb2xsIHRvIHRoZSBib3R0b20gb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkdXJhdGlvbiBUaGUgYW1vdW50IG9mIHRpbWUgdG8gdGFrZSBzY3JvbGxpbmcgdG8gdGhlIGJvdHRvbS4gRGVmYXVsdHMgdG8gYDBgLlxuICAgICAqL1xuICAgIGFzeW5jIHNjcm9sbFRvQm90dG9tKGR1cmF0aW9uID0gMCkge1xuICAgICAgICBjb25zdCBzY3JvbGxFbCA9IGF3YWl0IHRoaXMuZ2V0U2Nyb2xsRWxlbWVudCgpO1xuICAgICAgICBjb25zdCB5ID0gc2Nyb2xsRWwuc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsRWwuY2xpZW50SGVpZ2h0O1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JvbGxUb1BvaW50KHVuZGVmaW5lZCwgeSwgZHVyYXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY3JvbGwgYnkgYSBzcGVjaWZpZWQgWC9ZIGRpc3RhbmNlIGluIHRoZSBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geCBUaGUgYW1vdW50IHRvIHNjcm9sbCBieSBvbiB0aGUgaG9yaXpvbnRhbCBheGlzLlxuICAgICAqIEBwYXJhbSB5IFRoZSBhbW91bnQgdG8gc2Nyb2xsIGJ5IG9uIHRoZSB2ZXJ0aWNhbCBheGlzLlxuICAgICAqIEBwYXJhbSBkdXJhdGlvbiBUaGUgYW1vdW50IG9mIHRpbWUgdG8gdGFrZSBzY3JvbGxpbmcgYnkgdGhhdCBhbW91bnQuXG4gICAgICovXG4gICAgYXN5bmMgc2Nyb2xsQnlQb2ludCh4LCB5LCBkdXJhdGlvbikge1xuICAgICAgICBjb25zdCBzY3JvbGxFbCA9IGF3YWl0IHRoaXMuZ2V0U2Nyb2xsRWxlbWVudCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JvbGxUb1BvaW50KHggKyBzY3JvbGxFbC5zY3JvbGxMZWZ0LCB5ICsgc2Nyb2xsRWwuc2Nyb2xsVG9wLCBkdXJhdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjcm9sbCB0byBhIHNwZWNpZmllZCBYL1kgbG9jYXRpb24gaW4gdGhlIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB4IFRoZSBwb2ludCB0byBzY3JvbGwgdG8gb24gdGhlIGhvcml6b250YWwgYXhpcy5cbiAgICAgKiBAcGFyYW0geSBUaGUgcG9pbnQgdG8gc2Nyb2xsIHRvIG9uIHRoZSB2ZXJ0aWNhbCBheGlzLlxuICAgICAqIEBwYXJhbSBkdXJhdGlvbiBUaGUgYW1vdW50IG9mIHRpbWUgdG8gdGFrZSBzY3JvbGxpbmcgdG8gdGhhdCBwb2ludC4gRGVmYXVsdHMgdG8gYDBgLlxuICAgICAqL1xuICAgIGFzeW5jIHNjcm9sbFRvUG9pbnQoeCwgeSwgZHVyYXRpb24gPSAwKSB7XG4gICAgICAgIGNvbnN0IGVsID0gYXdhaXQgdGhpcy5nZXRTY3JvbGxFbGVtZW50KCk7XG4gICAgICAgIGlmIChkdXJhdGlvbiA8IDMyKSB7XG4gICAgICAgICAgICBpZiAoeSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZWwuc2Nyb2xsVG9wID0geTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh4ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBlbC5zY3JvbGxMZWZ0ID0geDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzb2x2ZTtcbiAgICAgICAgbGV0IHN0YXJ0VGltZSA9IDA7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocikgPT4gKHJlc29sdmUgPSByKSk7XG4gICAgICAgIGNvbnN0IGZyb21ZID0gZWwuc2Nyb2xsVG9wO1xuICAgICAgICBjb25zdCBmcm9tWCA9IGVsLnNjcm9sbExlZnQ7XG4gICAgICAgIGNvbnN0IGRlbHRhWSA9IHkgIT0gbnVsbCA/IHkgLSBmcm9tWSA6IDA7XG4gICAgICAgIGNvbnN0IGRlbHRhWCA9IHggIT0gbnVsbCA/IHggLSBmcm9tWCA6IDA7XG4gICAgICAgIC8vIHNjcm9sbCBsb29wXG4gICAgICAgIGNvbnN0IHN0ZXAgPSAodGltZVN0YW1wKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsaW5lYXJUaW1lID0gTWF0aC5taW4oMSwgKHRpbWVTdGFtcCAtIHN0YXJ0VGltZSkgLyBkdXJhdGlvbikgLSAxO1xuICAgICAgICAgICAgY29uc3QgZWFzZWRUID0gTWF0aC5wb3cobGluZWFyVGltZSwgMykgKyAxO1xuICAgICAgICAgICAgaWYgKGRlbHRhWSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGVsLnNjcm9sbFRvcCA9IE1hdGguZmxvb3IoZWFzZWRUICogZGVsdGFZICsgZnJvbVkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlbHRhWCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGVsLnNjcm9sbExlZnQgPSBNYXRoLmZsb29yKGVhc2VkVCAqIGRlbHRhWCArIGZyb21YKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlYXNlZFQgPCAxKSB7XG4gICAgICAgICAgICAgICAgLy8gZG8gbm90IHVzZSBEb21Db250cm9sbGVyIGhlcmVcbiAgICAgICAgICAgICAgICAvLyBtdXN0IHVzZSBuYXRpdmVSYWYgaW4gb3JkZXIgdG8gZmlyZSBpbiB0aGUgbmV4dCBmcmFtZVxuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gY2hpbGwgb3V0IGZvciBhIGZyYW1lIGZpcnN0XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgodHMpID0+IHtcbiAgICAgICAgICAgIHN0YXJ0VGltZSA9IHRzO1xuICAgICAgICAgICAgc3RlcCh0cyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgb25TY3JvbGxTdGFydCgpIHtcbiAgICAgICAgdGhpcy5pc1Njcm9sbGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuaW9uU2Nyb2xsU3RhcnQuZW1pdCh7XG4gICAgICAgICAgICBpc1Njcm9sbGluZzogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLndhdGNoRG9nKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMud2F0Y2hEb2cpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHdhdGNoZG9nXG4gICAgICAgIHRoaXMud2F0Y2hEb2cgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5sYXN0U2Nyb2xsIDwgRGF0ZS5ub3coKSAtIDEyMCkge1xuICAgICAgICAgICAgICAgIHRoaXMub25TY3JvbGxFbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMTAwKTtcbiAgICB9XG4gICAgb25TY3JvbGxFbmQoKSB7XG4gICAgICAgIGlmICh0aGlzLndhdGNoRG9nKVxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLndhdGNoRG9nKTtcbiAgICAgICAgdGhpcy53YXRjaERvZyA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLmlzU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmlzU2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlvblNjcm9sbEVuZC5lbWl0KHtcbiAgICAgICAgICAgICAgICBpc1Njcm9sbGluZzogZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgZml4ZWRTbG90UGxhY2VtZW50LCBpbmhlcml0ZWRBdHRyaWJ1dGVzLCBpc01haW5Db250ZW50LCBzY3JvbGxYLCBzY3JvbGxZLCBlbCB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgcnRsID0gaXNSVEwoZWwpID8gJ3J0bCcgOiAnbHRyJztcbiAgICAgICAgY29uc3QgbW9kZSA9IGdldElvbk1vZGUodGhpcyk7XG4gICAgICAgIGNvbnN0IGZvcmNlT3ZlcnNjcm9sbCA9IHRoaXMuc2hvdWxkRm9yY2VPdmVyc2Nyb2xsKCk7XG4gICAgICAgIGNvbnN0IHRyYW5zaXRpb25TaGFkb3cgPSBtb2RlID09PSAnaW9zJztcbiAgICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICAgICAgcmV0dXJuIChoKEhvc3QsIE9iamVjdC5hc3NpZ24oeyBrZXk6ICdmMmEyNGFhNjZkYmY1Yzc2ZjlkNGIwNmY3MDhlYjczY2FkYzIzOWRmJywgcm9sZTogaXNNYWluQ29udGVudCA/ICdtYWluJyA6IHVuZGVmaW5lZCwgY2xhc3M6IGNyZWF0ZUNvbG9yQ2xhc3Nlcyh0aGlzLmNvbG9yLCB7XG4gICAgICAgICAgICAgICAgW21vZGVdOiB0cnVlLFxuICAgICAgICAgICAgICAgICdjb250ZW50LXNpemluZyc6IGhvc3RDb250ZXh0KCdpb24tcG9wb3ZlcicsIHRoaXMuZWwpLFxuICAgICAgICAgICAgICAgIG92ZXJzY3JvbGw6IGZvcmNlT3ZlcnNjcm9sbCxcbiAgICAgICAgICAgICAgICBbYGNvbnRlbnQtJHtydGx9YF06IHRydWUsXG4gICAgICAgICAgICB9KSwgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAnLS1vZmZzZXQtdG9wJzogYCR7dGhpcy5jVG9wfXB4YCxcbiAgICAgICAgICAgICAgICAnLS1vZmZzZXQtYm90dG9tJzogYCR7dGhpcy5jQm90dG9tfXB4YCxcbiAgICAgICAgICAgIH0gfSwgaW5oZXJpdGVkQXR0cmlidXRlcyksIGgoXCJkaXZcIiwgeyBrZXk6ICc2NDgwY2E3NjQ4YjI3OGFiYjM2NDc3YjM4MzhiY2NiY2Q0OTk1ZTJhJywgcmVmOiAoZWwpID0+ICh0aGlzLmJhY2tncm91bmRDb250ZW50RWwgPSBlbCksIGlkOiBcImJhY2tncm91bmQtY29udGVudFwiLCBwYXJ0OiBcImJhY2tncm91bmRcIiB9KSwgZml4ZWRTbG90UGxhY2VtZW50ID09PSAnYmVmb3JlJyA/IGgoXCJzbG90XCIsIHsgbmFtZTogXCJmaXhlZFwiIH0pIDogbnVsbCwgaChcImRpdlwiLCB7IGtleTogJzI5YTIzYjY2M2Y1ZjAyMTViYjAwMDgyMGMwMWUxODE0YzBkNTU5ODUnLCBjbGFzczoge1xuICAgICAgICAgICAgICAgICdpbm5lci1zY3JvbGwnOiB0cnVlLFxuICAgICAgICAgICAgICAgICdzY3JvbGwteCc6IHNjcm9sbFgsXG4gICAgICAgICAgICAgICAgJ3Njcm9sbC15Jzogc2Nyb2xsWSxcbiAgICAgICAgICAgICAgICBvdmVyc2Nyb2xsOiAoc2Nyb2xsWCB8fCBzY3JvbGxZKSAmJiBmb3JjZU92ZXJzY3JvbGwsXG4gICAgICAgICAgICB9LCByZWY6IChzY3JvbGxFbCkgPT4gKHRoaXMuc2Nyb2xsRWwgPSBzY3JvbGxFbCksIG9uU2Nyb2xsOiB0aGlzLnNjcm9sbEV2ZW50cyA/IChldikgPT4gdGhpcy5vblNjcm9sbChldikgOiB1bmRlZmluZWQsIHBhcnQ6IFwic2Nyb2xsXCIgfSwgaChcInNsb3RcIiwgeyBrZXk6ICcwZmUxYmQwNTYwOWE0Yjg4YWUyY2U5YWRkZjVkNWRjNWRjMTgwNmYwJyB9KSksIHRyYW5zaXRpb25TaGFkb3cgPyAoaChcImRpdlwiLCB7IGNsYXNzOiBcInRyYW5zaXRpb24tZWZmZWN0XCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcInRyYW5zaXRpb24tY292ZXJcIiB9KSwgaChcImRpdlwiLCB7IGNsYXNzOiBcInRyYW5zaXRpb24tc2hhZG93XCIgfSkpKSA6IG51bGwsIGZpeGVkU2xvdFBsYWNlbWVudCA9PT0gJ2FmdGVyJyA/IGgoXCJzbG90XCIsIHsgbmFtZTogXCJmaXhlZFwiIH0pIDogbnVsbCkpO1xuICAgIH1cbiAgICBnZXQgZWwoKSB7IHJldHVybiB0aGlzOyB9XG4gICAgc3RhdGljIGdldCBzdHlsZSgpIHsgcmV0dXJuIGNvbnRlbnRDc3M7IH1cbn0sIFsyNTcsIFwiaW9uLWNvbnRlbnRcIiwge1xuICAgICAgICBcImNvbG9yXCI6IFs1MTNdLFxuICAgICAgICBcImZ1bGxzY3JlZW5cIjogWzRdLFxuICAgICAgICBcImZpeGVkU2xvdFBsYWNlbWVudFwiOiBbMSwgXCJmaXhlZC1zbG90LXBsYWNlbWVudFwiXSxcbiAgICAgICAgXCJmb3JjZU92ZXJzY3JvbGxcIjogWzEwMjgsIFwiZm9yY2Utb3ZlcnNjcm9sbFwiXSxcbiAgICAgICAgXCJzY3JvbGxYXCI6IFs0LCBcInNjcm9sbC14XCJdLFxuICAgICAgICBcInNjcm9sbFlcIjogWzQsIFwic2Nyb2xsLXlcIl0sXG4gICAgICAgIFwic2Nyb2xsRXZlbnRzXCI6IFs0LCBcInNjcm9sbC1ldmVudHNcIl0sXG4gICAgICAgIFwiZ2V0U2Nyb2xsRWxlbWVudFwiOiBbNjRdLFxuICAgICAgICBcImdldEJhY2tncm91bmRFbGVtZW50XCI6IFs2NF0sXG4gICAgICAgIFwic2Nyb2xsVG9Ub3BcIjogWzY0XSxcbiAgICAgICAgXCJzY3JvbGxUb0JvdHRvbVwiOiBbNjRdLFxuICAgICAgICBcInNjcm9sbEJ5UG9pbnRcIjogWzY0XSxcbiAgICAgICAgXCJzY3JvbGxUb1BvaW50XCI6IFs2NF1cbiAgICB9LCBbWzksIFwicmVzaXplXCIsIFwib25SZXNpemVcIl1dXSk7XG5jb25zdCBnZXRQYXJlbnRFbGVtZW50ID0gKGVsKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGlmIChlbC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIC8vIG5vcm1hbCBlbGVtZW50IHdpdGggYSBwYXJlbnQgZWxlbWVudFxuICAgICAgICByZXR1cm4gZWwucGFyZW50RWxlbWVudDtcbiAgICB9XG4gICAgaWYgKChfYSA9IGVsLnBhcmVudE5vZGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ob3N0KSB7XG4gICAgICAgIC8vIHNoYWRvdyBkb20ncyBkb2N1bWVudCBmcmFnbWVudFxuICAgICAgICByZXR1cm4gZWwucGFyZW50Tm9kZS5ob3N0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5jb25zdCBnZXRQYWdlRWxlbWVudCA9IChlbCkgPT4ge1xuICAgIGNvbnN0IHRhYnMgPSBlbC5jbG9zZXN0KCdpb24tdGFicycpO1xuICAgIGlmICh0YWJzKSB7XG4gICAgICAgIHJldHVybiB0YWJzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB3ZSdyZSBpbiBhIHBvcG92ZXIsIHdlIG5lZWQgdG8gdXNlIGl0cyB3cmFwcGVyIHNvIHdlIGNhbiBhY2NvdW50IGZvciBzcGFjZVxuICAgICAqIGJldHdlZW4gdGhlIHBvcG92ZXIgYW5kIHRoZSBlZGdlcyBvZiB0aGUgc2NyZWVuLiBCdXQgaWYgdGhlIHBvcG92ZXIgY29udGFpbnNcbiAgICAgKiBpdHMgb3duIHBhZ2UgZWxlbWVudCwgd2Ugc2hvdWxkIHVzZSB0aGF0IGluc3RlYWQuXG4gICAgICovXG4gICAgY29uc3QgcGFnZSA9IGVsLmNsb3Nlc3QoJ2lvbi1hcHAsIGlvbi1wYWdlLCAuaW9uLXBhZ2UsIHBhZ2UtaW5uZXIsIC5wb3BvdmVyLWNvbnRlbnQnKTtcbiAgICBpZiAocGFnZSkge1xuICAgICAgICByZXR1cm4gcGFnZTtcbiAgICB9XG4gICAgcmV0dXJuIGdldFBhcmVudEVsZW1lbnQoZWwpO1xufTtcbi8vICoqKioqKioqIERPTSBSRUFEICoqKioqKioqKioqKioqKipcbmNvbnN0IHVwZGF0ZVNjcm9sbERldGFpbCA9IChkZXRhaWwsIGVsLCB0aW1lc3RhbXAsIHNob3VsZFN0YXJ0KSA9PiB7XG4gICAgY29uc3QgcHJldlggPSBkZXRhaWwuY3VycmVudFg7XG4gICAgY29uc3QgcHJldlkgPSBkZXRhaWwuY3VycmVudFk7XG4gICAgY29uc3QgcHJldlQgPSBkZXRhaWwuY3VycmVudFRpbWU7XG4gICAgY29uc3QgY3VycmVudFggPSBlbC5zY3JvbGxMZWZ0O1xuICAgIGNvbnN0IGN1cnJlbnRZID0gZWwuc2Nyb2xsVG9wO1xuICAgIGNvbnN0IHRpbWVEZWx0YSA9IHRpbWVzdGFtcCAtIHByZXZUO1xuICAgIGlmIChzaG91bGRTdGFydCkge1xuICAgICAgICAvLyByZW1lbWJlciB0aGUgc3RhcnQgcG9zaXRpb25zXG4gICAgICAgIGRldGFpbC5zdGFydFRpbWUgPSB0aW1lc3RhbXA7XG4gICAgICAgIGRldGFpbC5zdGFydFggPSBjdXJyZW50WDtcbiAgICAgICAgZGV0YWlsLnN0YXJ0WSA9IGN1cnJlbnRZO1xuICAgICAgICBkZXRhaWwudmVsb2NpdHlYID0gZGV0YWlsLnZlbG9jaXR5WSA9IDA7XG4gICAgfVxuICAgIGRldGFpbC5jdXJyZW50VGltZSA9IHRpbWVzdGFtcDtcbiAgICBkZXRhaWwuY3VycmVudFggPSBkZXRhaWwuc2Nyb2xsTGVmdCA9IGN1cnJlbnRYO1xuICAgIGRldGFpbC5jdXJyZW50WSA9IGRldGFpbC5zY3JvbGxUb3AgPSBjdXJyZW50WTtcbiAgICBkZXRhaWwuZGVsdGFYID0gY3VycmVudFggLSBkZXRhaWwuc3RhcnRYO1xuICAgIGRldGFpbC5kZWx0YVkgPSBjdXJyZW50WSAtIGRldGFpbC5zdGFydFk7XG4gICAgaWYgKHRpbWVEZWx0YSA+IDAgJiYgdGltZURlbHRhIDwgMTAwKSB7XG4gICAgICAgIGNvbnN0IHZlbG9jaXR5WCA9IChjdXJyZW50WCAtIHByZXZYKSAvIHRpbWVEZWx0YTtcbiAgICAgICAgY29uc3QgdmVsb2NpdHlZID0gKGN1cnJlbnRZIC0gcHJldlkpIC8gdGltZURlbHRhO1xuICAgICAgICBkZXRhaWwudmVsb2NpdHlYID0gdmVsb2NpdHlYICogMC43ICsgZGV0YWlsLnZlbG9jaXR5WCAqIDAuMztcbiAgICAgICAgZGV0YWlsLnZlbG9jaXR5WSA9IHZlbG9jaXR5WSAqIDAuNyArIGRldGFpbC52ZWxvY2l0eVkgKiAwLjM7XG4gICAgfVxufTtcbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUVsZW1lbnQoKSB7XG4gICAgaWYgKHR5cGVvZiBjdXN0b21FbGVtZW50cyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbXBvbmVudHMgPSBbXCJpb24tY29udGVudFwiXTtcbiAgICBjb21wb25lbnRzLmZvckVhY2godGFnTmFtZSA9PiB7IHN3aXRjaCAodGFnTmFtZSkge1xuICAgICAgICBjYXNlIFwiaW9uLWNvbnRlbnRcIjpcbiAgICAgICAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgICAgICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKHRhZ05hbWUsIENvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfSB9KTtcbn1cblxuZXhwb3J0IHsgQ29udGVudCBhcyBDLCBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGQgfTtcbiIsIi8qIVxuICogKEMpIElvbmljIGh0dHA6Ly9pb25pY2ZyYW1ld29yay5jb20gLSBNSVQgTGljZW5zZVxuICovXG5pbXBvcnQgeyBDIGFzIENvbnRlbnQsIGQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQxIH0gZnJvbSAnLi9jb250ZW50LmpzJztcblxuY29uc3QgSW9uQ29udGVudCA9IENvbnRlbnQ7XG5jb25zdCBkZWZpbmVDdXN0b21FbGVtZW50ID0gZGVmaW5lQ3VzdG9tRWxlbWVudCQxO1xuXG5leHBvcnQgeyBJb25Db250ZW50LCBkZWZpbmVDdXN0b21FbGVtZW50IH07XG4iLCIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuY29uc3Qgd2luID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQ7XG5jb25zdCBkb2MgPSB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnID8gZG9jdW1lbnQgOiB1bmRlZmluZWQ7XG5cbmV4cG9ydCB7IGRvYyBhcyBkLCB3aW4gYXMgdyB9O1xuIiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IHcgYXMgd2luIH0gZnJvbSAnLi9pbmRleDkuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25maWcsIGEgYXMgcHJpbnRJb25FcnJvciB9IGZyb20gJy4vaW5kZXg0LmpzJztcblxuLyoqXG4gKiBDbG9zZVdhdGNoZXIgaXMgYSBuZXdlciBBUEkgdGhhdCBsZXRzXG4gKiB1c2UgZGV0ZWN0IHRoZSBoYXJkd2FyZSBiYWNrIGJ1dHRvbiBldmVudFxuICogaW4gYSB3ZWIgYnJvd3NlcjogaHR0cHM6Ly9jYW5pdXNlLmNvbS8/c2VhcmNoPWNsb3Nld2F0Y2hlclxuICogSG93ZXZlciwgbm90IGV2ZXJ5IGJyb3dzZXIgc3VwcG9ydHMgaXQgeWV0LlxuICpcbiAqIFRoaXMgbmVlZHMgdG8gYmUgYSBmdW5jdGlvbiBzbyB0aGF0IHdlIGNhblxuICogY2hlY2sgdGhlIGNvbmZpZyBvbmNlIGl0IGhhcyBiZWVuIHNldC5cbiAqIE90aGVyd2lzZSwgdGhpcyBjb2RlIHdvdWxkIGJlIGV2YWx1YXRlZCB0aGVcbiAqIG1vbWVudCB0aGlzIGZpbGUgaXMgZXZhbHVhdGVkIHdoaWNoIGNvdWxkIGJlXG4gKiBiZWZvcmUgdGhlIGNvbmZpZyBpcyBzZXQuXG4gKi9cbmNvbnN0IHNob3VsZFVzZUNsb3NlV2F0Y2hlciA9ICgpID0+IGNvbmZpZy5nZXQoJ2V4cGVyaW1lbnRhbENsb3NlV2F0Y2hlcicsIGZhbHNlKSAmJiB3aW4gIT09IHVuZGVmaW5lZCAmJiAnQ2xvc2VXYXRjaGVyJyBpbiB3aW47XG4vKipcbiAqIFdoZW4gaGFyZHdhcmVCYWNrQnV0dG9uOiBmYWxzZSBpbiBjb25maWcsXG4gKiB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB3ZSBhbHNvIGJsb2NrIHRoZSBkZWZhdWx0XG4gKiB3ZWJ2aWV3IGJlaGF2aW9yLiBJZiB3ZSBkb24ndCB0aGVuIGl0IHdpbGwgYmVcbiAqIHBvc3NpYmxlIGZvciB1c2VycyB0byBuYXZpZ2F0ZSBiYWNrd2FyZCB3aGlsZVxuICogYW4gb3ZlcmxheSBpcyBzdGlsbCBvcGVuLiBBZGRpdGlvbmFsbHksIGl0IHdpbGxcbiAqIGdpdmUgdGhlIGFwcGVhcmFuY2UgdGhhdCB0aGUgaGFyZHdhcmVCYWNrQnV0dG9uXG4gKiBjb25maWcgaXMgbm90IHdvcmtpbmcgYXMgdGhlIHBhZ2UgdHJhbnNpdGlvblxuICogd2lsbCBzdGlsbCBoYXBwZW4uXG4gKi9cbmNvbnN0IGJsb2NrSGFyZHdhcmVCYWNrQnV0dG9uID0gKCkgPT4ge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2JhY2tidXR0b24nLCAoKSA9PiB7IH0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG59O1xuY29uc3Qgc3RhcnRIYXJkd2FyZUJhY2tCdXR0b24gPSAoKSA9PiB7XG4gICAgY29uc3QgZG9jID0gZG9jdW1lbnQ7XG4gICAgbGV0IGJ1c3kgPSBmYWxzZTtcbiAgICBjb25zdCBiYWNrQnV0dG9uQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgIGlmIChidXN5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gW107XG4gICAgICAgIGNvbnN0IGV2ID0gbmV3IEN1c3RvbUV2ZW50KCdpb25CYWNrQnV0dG9uJywge1xuICAgICAgICAgICAgYnViYmxlczogZmFsc2UsXG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICByZWdpc3Rlcihwcmlvcml0eSwgaGFuZGxlcikge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVycy5wdXNoKHsgcHJpb3JpdHksIGhhbmRsZXIsIGlkOiBpbmRleCsrIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgZG9jLmRpc3BhdGNoRXZlbnQoZXYpO1xuICAgICAgICBjb25zdCBleGVjdXRlQWN0aW9uID0gYXN5bmMgKGhhbmRsZXJSZWdpc3RlcikgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlclJlZ2lzdGVyID09PSBudWxsIHx8IGhhbmRsZXJSZWdpc3RlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogaGFuZGxlclJlZ2lzdGVyLmhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gaGFuZGxlclJlZ2lzdGVyLmhhbmRsZXIocHJvY2Vzc0hhbmRsZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHByaW50SW9uRXJyb3IoJ1tpb24tYXBwXSAtIEV4Y2VwdGlvbiBpbiBzdGFydEhhcmR3YXJlQmFja0J1dHRvbjonLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc0hhbmRsZXJzID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGhhbmRsZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRIYW5kbGVyID0ge1xuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eTogTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6ICgpID0+IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IC0xLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaGFuZGxlcnMuZm9yRWFjaCgoaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5wcmlvcml0eSA+PSBzZWxlY3RlZEhhbmRsZXIucHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSGFuZGxlciA9IGhhbmRsZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBidXN5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBoYW5kbGVycyA9IGhhbmRsZXJzLmZpbHRlcigoaGFuZGxlcikgPT4gaGFuZGxlci5pZCAhPT0gc2VsZWN0ZWRIYW5kbGVyLmlkKTtcbiAgICAgICAgICAgICAgICBleGVjdXRlQWN0aW9uKHNlbGVjdGVkSGFuZGxlcikudGhlbigoKSA9PiAoYnVzeSA9IGZhbHNlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHByb2Nlc3NIYW5kbGVycygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSWYgdGhlIENsb3NlV2F0Y2hlciBpcyBkZWZpbmVkIHRoZW5cbiAgICAgKiB3ZSBkb24ndCB3YW50IHRvIGFsc28gbGlzdGVuIGZvciB0aGUgbmF0aXZlXG4gICAgICogYmFja2J1dHRvbiBldmVudCBvdGhlcndpc2Ugd2UgbWF5IGdldCBkdXBsaWNhdGVcbiAgICAgKiBldmVudHMgZmlyaW5nLlxuICAgICAqL1xuICAgIGlmIChzaG91bGRVc2VDbG9zZVdhdGNoZXIoKSkge1xuICAgICAgICBsZXQgd2F0Y2hlcjtcbiAgICAgICAgY29uc3QgY29uZmlndXJlV2F0Y2hlciA9ICgpID0+IHtcbiAgICAgICAgICAgIHdhdGNoZXIgPT09IG51bGwgfHwgd2F0Y2hlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2F0Y2hlci5kZXN0cm95KCk7XG4gICAgICAgICAgICB3YXRjaGVyID0gbmV3IHdpbi5DbG9zZVdhdGNoZXIoKTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogT25jZSBhIGNsb3NlIHJlcXVlc3QgaGFwcGVuc1xuICAgICAgICAgICAgICogdGhlIHdhdGNoZXIgZ2V0cyBkZXN0cm95ZWQuXG4gICAgICAgICAgICAgKiBBcyBhIHJlc3VsdCwgd2UgbmVlZCB0byByZS1jb25maWd1cmVcbiAgICAgICAgICAgICAqIHRoZSB3YXRjaGVyIHNvIHdlIGNhbiByZXNwb25kIHRvIG90aGVyXG4gICAgICAgICAgICAgKiBjbG9zZSByZXF1ZXN0cy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgd2F0Y2hlci5vbmNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGJhY2tCdXR0b25DYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIGNvbmZpZ3VyZVdhdGNoZXIoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIGNvbmZpZ3VyZVdhdGNoZXIoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdiYWNrYnV0dG9uJywgYmFja0J1dHRvbkNhbGxiYWNrKTtcbiAgICB9XG59O1xuY29uc3QgT1ZFUkxBWV9CQUNLX0JVVFRPTl9QUklPUklUWSA9IDEwMDtcbmNvbnN0IE1FTlVfQkFDS19CVVRUT05fUFJJT1JJVFkgPSA5OTsgLy8gMSBsZXNzIHRoYW4gb3ZlcmxheSBwcmlvcml0eSBzaW5jZSBtZW51IGlzIGRpc3BsYXllZCBiZWhpbmQgb3ZlcmxheXNcblxuZXhwb3J0IHsgTUVOVV9CQUNLX0JVVFRPTl9QUklPUklUWSwgT1ZFUkxBWV9CQUNLX0JVVFRPTl9QUklPUklUWSwgYmxvY2tIYXJkd2FyZUJhY2tCdXR0b24sIHNob3VsZFVzZUNsb3NlV2F0Y2hlciwgc3RhcnRIYXJkd2FyZUJhY2tCdXR0b24gfTtcbiIsIi8qIVxuICogKEMpIElvbmljIGh0dHA6Ly9pb25pY2ZyYW1ld29yay5jb20gLSBNSVQgTGljZW5zZVxuICovXG5pbXBvcnQgeyBjIGFzIGNvbXBvbmVudE9uUmVhZHkgfSBmcm9tICcuL2hlbHBlcnMuanMnO1xuXG4vLyBUT0RPKEZXLTI4MzIpOiB0eXBlc1xuY29uc3QgYXR0YWNoQ29tcG9uZW50ID0gYXN5bmMgKGRlbGVnYXRlLCBjb250YWluZXIsIGNvbXBvbmVudCwgY3NzQ2xhc3NlcywgY29tcG9uZW50UHJvcHMsIGlubGluZSkgPT4ge1xuICAgIHZhciBfYTtcbiAgICBpZiAoZGVsZWdhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRlbGVnYXRlLmF0dGFjaFZpZXdUb0RvbShjb250YWluZXIsIGNvbXBvbmVudCwgY29tcG9uZW50UHJvcHMsIGNzc0NsYXNzZXMpO1xuICAgIH1cbiAgICBpZiAoIWlubGluZSAmJiB0eXBlb2YgY29tcG9uZW50ICE9PSAnc3RyaW5nJyAmJiAhKGNvbXBvbmVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZyYW1ld29yayBkZWxlZ2F0ZSBpcyBtaXNzaW5nJyk7XG4gICAgfVxuICAgIGNvbnN0IGVsID0gdHlwZW9mIGNvbXBvbmVudCA9PT0gJ3N0cmluZycgPyAoX2EgPSBjb250YWluZXIub3duZXJEb2N1bWVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50KSA6IGNvbXBvbmVudDtcbiAgICBpZiAoY3NzQ2xhc3Nlcykge1xuICAgICAgICBjc3NDbGFzc2VzLmZvckVhY2goKGMpID0+IGVsLmNsYXNzTGlzdC5hZGQoYykpO1xuICAgIH1cbiAgICBpZiAoY29tcG9uZW50UHJvcHMpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihlbCwgY29tcG9uZW50UHJvcHMpO1xuICAgIH1cbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBjb21wb25lbnRPblJlYWR5KGVsLCByZXNvbHZlKSk7XG4gICAgcmV0dXJuIGVsO1xufTtcbmNvbnN0IGRldGFjaENvbXBvbmVudCA9IChkZWxlZ2F0ZSwgZWxlbWVudCkgPT4ge1xuICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlLnJlbW92ZVZpZXdGcm9tRG9tKGNvbnRhaW5lciwgZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xufTtcbmNvbnN0IENvcmVEZWxlZ2F0ZSA9ICgpID0+IHtcbiAgICBsZXQgQmFzZUNvbXBvbmVudDtcbiAgICBsZXQgUmVmZXJlbmNlO1xuICAgIGNvbnN0IGF0dGFjaFZpZXdUb0RvbSA9IGFzeW5jIChwYXJlbnRFbGVtZW50LCB1c2VyQ29tcG9uZW50LCB1c2VyQ29tcG9uZW50UHJvcHMgPSB7fSwgY3NzQ2xhc3NlcyA9IFtdKSA9PiB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIEJhc2VDb21wb25lbnQgPSBwYXJlbnRFbGVtZW50O1xuICAgICAgICBsZXQgQ2hpbGRDb21wb25lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBwYXNzaW5nIGluIGEgY29tcG9uZW50IHZpYSB0aGUgYGNvbXBvbmVudGAgcHJvcHNcbiAgICAgICAgICogd2UgbmVlZCB0byBhcHBlbmQgaXQgaW5zaWRlIG9mIG91ciBvdmVybGF5IGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIGlmICh1c2VyQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElmIHBhc3NpbmcgaW4gdGhlIHRhZyBuYW1lLCBjcmVhdGVcbiAgICAgICAgICAgICAqIHRoZSBlbGVtZW50IG90aGVyd2lzZSBqdXN0IGdldCBhIHJlZmVyZW5jZVxuICAgICAgICAgICAgICogdG8gdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29uc3QgZWwgPSB0eXBlb2YgdXNlckNvbXBvbmVudCA9PT0gJ3N0cmluZycgPyAoX2EgPSBCYXNlQ29tcG9uZW50Lm93bmVyRG9jdW1lbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jcmVhdGVFbGVtZW50KHVzZXJDb21wb25lbnQpIDogdXNlckNvbXBvbmVudDtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQWRkIGFueSBjc3MgY2xhc3NlcyBwYXNzZWQgaW5cbiAgICAgICAgICAgICAqIHZpYSB0aGUgY3NzQ2xhc3NlcyBwcm9wIG9uIHRoZSBvdmVybGF5LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjc3NDbGFzc2VzLmZvckVhY2goKGMpID0+IGVsLmNsYXNzTGlzdC5hZGQoYykpO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBBZGQgYW55IHByb3BzIHBhc3NlZCBpblxuICAgICAgICAgICAgICogdmlhIHRoZSBjb21wb25lbnRQcm9wcyBwcm9wIG9uIHRoZSBvdmVybGF5LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGVsLCB1c2VyQ29tcG9uZW50UHJvcHMpO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBGaW5hbGx5LCBhcHBlbmQgdGhlIGNvbXBvbmVudFxuICAgICAgICAgICAgICogaW5zaWRlIG9mIHRoZSBvdmVybGF5IGNvbXBvbmVudC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQmFzZUNvbXBvbmVudC5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgICAgICBDaGlsZENvbXBvbmVudCA9IGVsO1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IGNvbXBvbmVudE9uUmVhZHkoZWwsIHJlc29sdmUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChCYXNlQ29tcG9uZW50LmNoaWxkcmVuLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgIChCYXNlQ29tcG9uZW50LnRhZ05hbWUgPT09ICdJT04tTU9EQUwnIHx8IEJhc2VDb21wb25lbnQudGFnTmFtZSA9PT0gJ0lPTi1QT1BPVkVSJykpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGRlbGVnYXRlIGhvc3Qgd3JhcHBlciBlbCBpcyBvbmx5IG5lZWRlZCBmb3IgbW9kYWxzIGFuZCBwb3BvdmVyc1xuICAgICAgICAgICAgICogYmVjYXVzZSB0aGV5IGFsbG93IHRoZSBkZXYgdG8gcHJvdmlkZSBjdXN0b20gY29udGVudCB0byB0aGUgb3ZlcmxheS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29uc3Qgcm9vdCA9IChDaGlsZENvbXBvbmVudCA9IEJhc2VDb21wb25lbnQuY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgaWYgKCFyb290LmNsYXNzTGlzdC5jb250YWlucygnaW9uLWRlbGVnYXRlLWhvc3QnKSkge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIElmIHRoZSByb290IGVsZW1lbnQgaXMgbm90IGEgZGVsZWdhdGUgaG9zdCwgaXQgbWVhbnNcbiAgICAgICAgICAgICAgICAgKiB0aGF0IHRoZSBvdmVybGF5IGhhcyBub3QgYmVlbiBwcmVzZW50ZWQgeWV0IGFuZCB3ZSBuZWVkXG4gICAgICAgICAgICAgICAgICogdG8gY3JlYXRlIHRoZSBjb250YWluaW5nIGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIGNsYXNzZXMuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgY29uc3QgZWwgPSAoX2IgPSBCYXNlQ29tcG9uZW50Lm93bmVyRG9jdW1lbnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAvLyBBZGQgYSBjbGFzcyB0byB0cmFjayBpZiB0aGUgcm9vdCBlbGVtZW50IHdhcyBjcmVhdGVkIGJ5IHRoZSBkZWxlZ2F0ZS5cbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdpb24tZGVsZWdhdGUtaG9zdCcpO1xuICAgICAgICAgICAgICAgIGNzc0NsYXNzZXMuZm9yRWFjaCgoYykgPT4gZWwuY2xhc3NMaXN0LmFkZChjKSk7XG4gICAgICAgICAgICAgICAgLy8gTW92ZSBlYWNoIGNoaWxkIGZyb20gdGhlIG9yaWdpbmFsIHRlbXBsYXRlIHRvIHRoZSBuZXcgcGFyZW50IGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgZWwuYXBwZW5kKC4uLkJhc2VDb21wb25lbnQuY2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgbmV3IHBhcmVudCBlbGVtZW50IHRvIHRoZSBvcmlnaW5hbCBwYXJlbnQgZWxlbWVudC5cbiAgICAgICAgICAgICAgICBCYXNlQ29tcG9uZW50LmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGUgdGhlIENoaWxkQ29tcG9uZW50IHRvIGJlIHRoZVxuICAgICAgICAgICAgICAgICAqIG5ld2x5IGNyZWF0ZWQgZGl2IGluIHRoZSBldmVudCB0aGF0IG9uZVxuICAgICAgICAgICAgICAgICAqIGRvZXMgbm90IGFscmVhZHkgZXhpc3QuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ2hpbGRDb21wb25lbnQgPSBlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IHRoZSByb290IG9mIHRoZSBhcHAgYW5kXG4gICAgICAgICAqIGFkZCB0aGUgb3ZlcmxheSB0aGVyZS5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGFwcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lvbi1hcHAnKSB8fCBkb2N1bWVudC5ib2R5O1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlIGEgcGxhY2Vob2xkZXIgY29tbWVudCBzbyB0aGF0XG4gICAgICAgICAqIHdlIGNhbiByZXR1cm4gdGhpcyBjb21wb25lbnQgdG8gd2hlcmVcbiAgICAgICAgICogaXQgd2FzIHByZXZpb3VzbHkuXG4gICAgICAgICAqL1xuICAgICAgICBSZWZlcmVuY2UgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCdpb25pYyB0ZWxlcG9ydCcpO1xuICAgICAgICBCYXNlQ29tcG9uZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKFJlZmVyZW5jZSwgQmFzZUNvbXBvbmVudCk7XG4gICAgICAgIGFwcC5hcHBlbmRDaGlsZChCYXNlQ29tcG9uZW50KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdlIHJldHVybiB0aGUgY2hpbGQgY29tcG9uZW50IHJhdGhlciB0aGFuIHRoZSBvdmVybGF5XG4gICAgICAgICAqIHJlZmVyZW5jZSBpdHNlbGYgc2luY2UgbW9kYWwgYW5kIHBvcG92ZXIgd2lsbFxuICAgICAgICAgKiB1c2UgdGhpcyB0byB3YWl0IGZvciBhbnkgSW9uaWMgY29tcG9uZW50cyBpbiB0aGUgY2hpbGQgdmlld1xuICAgICAgICAgKiB0byBiZSByZWFkeSAoaS5lLiBjb21wb25lbnRPblJlYWR5KSB3aGVuIHVzaW5nIHRoZVxuICAgICAgICAgKiBsYXp5IGxvYWRlZCBjb21wb25lbnQgYnVuZGxlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBIb3dldmVyLCB3ZSBmYWxsIGJhY2sgdG8gcmV0dXJuaW5nIEJhc2VDb21wb25lbnRcbiAgICAgICAgICogaW4gdGhlIGV2ZW50IHRoYXQgYSBtb2RhbCBvciBwb3BvdmVyIGlzIHByZXNlbnRlZFxuICAgICAgICAgKiB3aXRoIG5vIGNoaWxkIGNvbnRlbnQuXG4gICAgICAgICAqL1xuICAgICAgICByZXR1cm4gQ2hpbGRDb21wb25lbnQgIT09IG51bGwgJiYgQ2hpbGRDb21wb25lbnQgIT09IHZvaWQgMCA/IENoaWxkQ29tcG9uZW50IDogQmFzZUNvbXBvbmVudDtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVZpZXdGcm9tRG9tID0gKCkgPT4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJuIGNvbXBvbmVudCB0byB3aGVyZSBpdCB3YXMgcHJldmlvdXNseSBpbiB0aGUgRE9NLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKEJhc2VDb21wb25lbnQgJiYgUmVmZXJlbmNlKSB7XG4gICAgICAgICAgICBSZWZlcmVuY2UucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoQmFzZUNvbXBvbmVudCwgUmVmZXJlbmNlKTtcbiAgICAgICAgICAgIFJlZmVyZW5jZS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfTtcbiAgICByZXR1cm4geyBhdHRhY2hWaWV3VG9Eb20sIHJlbW92ZVZpZXdGcm9tRG9tIH07XG59O1xuXG5leHBvcnQgeyBDb3JlRGVsZWdhdGUgYXMgQywgYXR0YWNoQ29tcG9uZW50IGFzIGEsIGRldGFjaENvbXBvbmVudCBhcyBkIH07XG4iLCIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgbG9jayBjb250cm9sbGVyLlxuICpcbiAqIENsYWltaW5nIGEgbG9jayBtZWFucyB0aGF0IG5vdGhpbmcgZWxzZSBjYW4gYWNxdWlyZSB0aGUgbG9jayB1bnRpbCBpdCBpcyByZWxlYXNlZC5cbiAqIFRoaXMgY2FuIG1vbWVudGFyaWx5IHByZXZlbnQgZXhlY3V0aW9uIG9mIGNvZGUgdGhhdCBuZWVkcyB0byB3YWl0IGZvciB0aGUgZWFybGllciBjb2RlIHRvIGZpbmlzaC5cbiAqIEZvciBleGFtcGxlLCB0aGlzIGNhbiBiZSB1c2VkIHRvIHByZXZlbnQgbXVsdGlwbGUgdHJhbnNpdGlvbnMgZnJvbSBvY2N1cnJpbmcgYXQgdGhlIHNhbWUgdGltZS5cbiAqL1xuY29uc3QgY3JlYXRlTG9ja0NvbnRyb2xsZXIgPSAoKSA9PiB7XG4gICAgbGV0IHdhaXRQcm9taXNlO1xuICAgIC8qKlxuICAgICAqIFdoZW4gbG9jaygpIGlzIGNhbGxlZCwgdGhlIGxvY2sgaXMgY2xhaW1lZC5cbiAgICAgKiBPbmNlIGEgbG9jayBoYXMgYmVlbiBjbGFpbWVkLCBpdCBjYW5ub3QgYmUgY2xhaW1lZCBhZ2FpbiB1bnRpbCBpdCBpcyByZWxlYXNlZC5cbiAgICAgKiBXaGVuIHRoaXMgZnVuY3Rpb24gZ2V0cyByZXNvbHZlZCwgdGhlIGxvY2sgaXMgcmVsZWFzZWQsIGFsbG93aW5nIGl0IHRvIGJlIGNsYWltZWQgYWdhaW4uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSBgYGB0c3hcbiAgICAgKiBjb25zdCB1bmxvY2sgPSBhd2FpdCB0aGlzLmxvY2tDb250cm9sbGVyLmxvY2soKTtcbiAgICAgKiAvLyBkbyBvdGhlciBzdHVmZlxuICAgICAqIHVubG9jaygpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNvbnN0IGxvY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHAgPSB3YWl0UHJvbWlzZTtcbiAgICAgICAgbGV0IHJlc29sdmU7XG4gICAgICAgIHdhaXRQcm9taXNlID0gbmV3IFByb21pc2UoKHIpID0+IChyZXNvbHZlID0gcikpO1xuICAgICAgICBpZiAocCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhd2FpdCBwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNvbHZlO1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbG9jayxcbiAgICB9O1xufTtcblxuZXhwb3J0IHsgY3JlYXRlTG9ja0NvbnRyb2xsZXIgYXMgYyB9O1xuIiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IGMgYXMgY29uZmlnLCBwIGFzIHByaW50SW9uV2FybmluZyB9IGZyb20gJy4vaW5kZXg0LmpzJztcbmltcG9ydCB7IHdyaXRlVGFzaywgQnVpbGQgfSBmcm9tICdAc3RlbmNpbC9jb3JlL2ludGVybmFsL2NsaWVudCc7XG5pbXBvcnQgeyByIGFzIHJhZiB9IGZyb20gJy4vaGVscGVycy5qcyc7XG5cbmNvbnN0IExJRkVDWUNMRV9XSUxMX0VOVEVSID0gJ2lvblZpZXdXaWxsRW50ZXInO1xuY29uc3QgTElGRUNZQ0xFX0RJRF9FTlRFUiA9ICdpb25WaWV3RGlkRW50ZXInO1xuY29uc3QgTElGRUNZQ0xFX1dJTExfTEVBVkUgPSAnaW9uVmlld1dpbGxMZWF2ZSc7XG5jb25zdCBMSUZFQ1lDTEVfRElEX0xFQVZFID0gJ2lvblZpZXdEaWRMZWF2ZSc7XG5jb25zdCBMSUZFQ1lDTEVfV0lMTF9VTkxPQUQgPSAnaW9uVmlld1dpbGxVbmxvYWQnO1xuXG4vKipcbiAqIE1vdmVzIGZvY3VzIHRvIGEgc3BlY2lmaWVkIGVsZW1lbnQuIE5vdGUgdGhhdCB3ZSBkbyBub3QgcmVtb3ZlIHRoZSB0YWJpbmRleFxuICogYmVjYXVzZSB0aGF0IGNhbiByZXN1bHQgaW4gYW4gdW5pbnRlbnRpb25hbCBibHVyLiBOb24tZm9jdXNhYmxlcyBjYW4ndCBiZVxuICogZm9jdXNlZCwgc28gdGhlIGJvZHkgd2lsbCBnZXQgZm9jdXNlZCBhZ2Fpbi5cbiAqL1xuY29uc3QgbW92ZUZvY3VzID0gKGVsKSA9PiB7XG4gICAgZWwudGFiSW5kZXggPSAtMTtcbiAgICBlbC5mb2N1cygpO1xufTtcbi8qKlxuICogRWxlbWVudHMgdGhhdCBhcmUgaGlkZGVuIHVzaW5nIGBkaXNwbGF5OiBub25lYCBzaG91bGQgbm90IGJlIGZvY3VzZWQgZXZlbiBpZlxuICogdGhleSBhcmUgcHJlc2VudCBpbiB0aGUgRE9NLlxuICovXG5jb25zdCBpc1Zpc2libGUgPSAoZWwpID0+IHtcbiAgICByZXR1cm4gZWwub2Zmc2V0UGFyZW50ICE9PSBudWxsO1xufTtcbi8qKlxuICogVGhlIGZvY3VzIGNvbnRyb2xsZXIgYWxsb3dzIHVzIHRvIG1hbmFnZSBmb2N1cyB3aXRoaW4gYSB2aWV3IHNvIGFzc2lzdGl2ZVxuICogdGVjaG5vbG9naWVzIGNhbiBpbmZvcm0gdXNlcnMgb2YgY2hhbmdlcyB0byB0aGUgbmF2aWdhdGlvbiBzdGF0ZS4gVHJhZGl0aW9uYWxcbiAqIG5hdGl2ZSBhcHBzIGhhdmUgYSB3YXkgb2YgaW5mb3JtaW5nIGFzc2lzdGl2ZSB0ZWNobm9sb2d5IGFib3V0IGEgbmF2aWdhdGlvblxuICogc3RhdGUgY2hhbmdlLiBNb2JpbGUgYnJvd3NlcnMgaGF2ZSB0aGlzIHRvbywgYnV0IG9ubHkgd2hlbiBkb2luZyBhIGZ1bGwgcGFnZVxuICogbG9hZC4gSW4gYSBzaW5nbGUgcGFnZSBhcHAgd2UgZG8gbm90IGRvIHRoYXQsIHNvIHdlIG5lZWQgdG8gYnVpbGQgdGhpc1xuICogaW50ZWdyYXRpb24gb3Vyc2VsdmVzLlxuICovXG5jb25zdCBjcmVhdGVGb2N1c0NvbnRyb2xsZXIgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2F2ZVZpZXdGb2N1cyA9IChyZWZlcmVuY2VFbCkgPT4ge1xuICAgICAgICBjb25zdCBmb2N1c01hbmFnZXJFbmFibGVkID0gY29uZmlnLmdldCgnZm9jdXNNYW5hZ2VyUHJpb3JpdHknLCBmYWxzZSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIGdvaW5nIGJhY2sgdG8gYSBwcmV2aW91c2x5IHZpc2l0ZWQgcGFnZSBmb2N1cyBzaG91bGQgdHlwaWNhbGx5IGJlIG1vdmVkXG4gICAgICAgICAqIGJhY2sgdG8gdGhlIGVsZW1lbnQgdGhhdCB3YXMgbGFzdCBmb2N1c2VkIHdoZW4gdGhlIHVzZXIgd2FzIG9uIHRoaXMgdmlldy5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChmb2N1c01hbmFnZXJFbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVFbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoYWN0aXZlRWwgIT09IG51bGwgJiYgKHJlZmVyZW5jZUVsID09PSBudWxsIHx8IHJlZmVyZW5jZUVsID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZWZlcmVuY2VFbC5jb250YWlucyhhY3RpdmVFbCkpKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlRWwuc2V0QXR0cmlidXRlKExBU1RfRk9DVVMsICd0cnVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldFZpZXdGb2N1cyA9IChyZWZlcmVuY2VFbCkgPT4ge1xuICAgICAgICBjb25zdCBmb2N1c01hbmFnZXJQcmlvcml0aWVzID0gY29uZmlnLmdldCgnZm9jdXNNYW5hZ2VyUHJpb3JpdHknLCBmYWxzZSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0aGUgZm9jdXNlZCBlbGVtZW50IGlzIGEgZGVzY2VuZGFudCBvZiB0aGUgcmVmZXJlbmNlRWwgdGhlbiBpdCdzIHBvc3NpYmxlXG4gICAgICAgICAqIHRoYXQgdGhlIGFwcCBkZXZlbG9wZXIgbWFudWFsbHkgbW92ZWQgZm9jdXMsIHNvIHdlIGRvIG5vdCB3YW50IHRvIG92ZXJyaWRlIHRoYXQuXG4gICAgICAgICAqIFRoaXMgY2FuIGhhcHBlbiB3aXRoIGlucHV0cyB0aGUgYXJlIGZvY3VzZWQgd2hlbiBhIHZpZXcgdHJhbnNpdGlvbnMgaW4uXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmb2N1c01hbmFnZXJQcmlvcml0aWVzKSAmJiAhcmVmZXJlbmNlRWwuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogV2hlbiBnb2luZyBiYWNrIHRvIGEgcHJldmlvdXNseSB2aXNpdGVkIHZpZXcgZm9jdXMgc2hvdWxkIGFsd2F5cyBiZSBtb3ZlZCBiYWNrXG4gICAgICAgICAgICAgKiB0byB0aGUgZWxlbWVudCB0aGF0IHRoZSB1c2VyIHdhcyBsYXN0IGZvY3VzZWQgb24gd2hlbiB0aGV5IHdlcmUgb24gdGhpcyB2aWV3LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb25zdCBsYXN0Rm9jdXMgPSByZWZlcmVuY2VFbC5xdWVyeVNlbGVjdG9yKGBbJHtMQVNUX0ZPQ1VTfV1gKTtcbiAgICAgICAgICAgIGlmIChsYXN0Rm9jdXMgJiYgaXNWaXNpYmxlKGxhc3RGb2N1cykpIHtcbiAgICAgICAgICAgICAgICBtb3ZlRm9jdXMobGFzdEZvY3VzKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHByaW9yaXR5IG9mIGZvY3VzTWFuYWdlclByaW9yaXRpZXMpIHtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBGb3IgZWFjaCByZWNvZ25pemVkIGNhc2UgKGV4Y2x1ZGluZyB0aGUgZGVmYXVsdCBjYXNlKSBtYWtlIHN1cmUgdG8gcmV0dXJuXG4gICAgICAgICAgICAgICAgICogc28gdGhhdCB0aGUgZmFsbGJhY2sgZm9jdXMgYmVoYXZpb3IgZG9lcyBub3QgcnVuLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogV2UgaW50ZW50aW9uYWxseSBxdWVyeSBmb3Igc3BlY2lmaWMgcm9sZXMvc2VtYW50aWMgZWxlbWVudHMgc28gdGhhdCB0aGVcbiAgICAgICAgICAgICAgICAgKiB0cmFuc2l0aW9uIG1hbmFnZXIgY2FuIHdvcmsgd2l0aCBib3RoIElvbmljIGFuZCBub24tSW9uaWMgVUkgY29tcG9uZW50cy5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIElmIG5ldyBzZWxlY3RvcnMgYXJlIGFkZGVkLCBiZSBzdXJlIHRvIHJlbW92ZSB0aGUgb3V0bGluZSByaW5nIGJ5IGFkZGluZ1xuICAgICAgICAgICAgICAgICAqIG5ldyBzZWxlY3RvcnMgdG8gcnVsZSBpbiBjb3JlLnNjc3MuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcmlvcml0eSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjb250ZW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSByZWZlcmVuY2VFbC5xdWVyeVNlbGVjdG9yKCdtYWluLCBbcm9sZT1cIm1haW5cIl0nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50ICYmIGlzVmlzaWJsZShjb250ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVGb2N1cyhjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGVhZGluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkaW5nT25lID0gcmVmZXJlbmNlRWwucXVlcnlTZWxlY3RvcignaDEsIFtyb2xlPVwiaGVhZGluZ1wiXVthcmlhLWxldmVsPVwiMVwiXScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRpbmdPbmUgJiYgaXNWaXNpYmxlKGhlYWRpbmdPbmUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZUZvY3VzKGhlYWRpbmdPbmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdiYW5uZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gcmVmZXJlbmNlRWwucXVlcnlTZWxlY3RvcignaGVhZGVyLCBbcm9sZT1cImJhbm5lclwiXScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlciAmJiBpc1Zpc2libGUoaGVhZGVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVGb2N1cyhoZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRJb25XYXJuaW5nKGBVbnJlY29nbml6ZWQgZm9jdXMgbWFuYWdlciBwcmlvcml0eSB2YWx1ZSAke3ByaW9yaXR5fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB0aGVyZSBpcyBub3RoaW5nIHRvIGZvY3VzIHRoZW4gZm9jdXMgdGhlIHBhZ2Ugc28gZm9jdXMgYXQgbGVhc3QgbW92ZXMgdG9cbiAgICAgICAgICAgICAqIHRoZSBjb3JyZWN0IHZpZXcuIFRoZSBicm93c2VyIHdpbGwgdGhlbiBkZXRlcm1pbmUgd2hlcmUgd2l0aGluIHRoZSBwYWdlIHRvXG4gICAgICAgICAgICAgKiBtb3ZlIGZvY3VzIHRvLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBtb3ZlRm9jdXMocmVmZXJlbmNlRWwpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzYXZlVmlld0ZvY3VzLFxuICAgICAgICBzZXRWaWV3Rm9jdXMsXG4gICAgfTtcbn07XG5jb25zdCBMQVNUX0ZPQ1VTID0gJ2lvbi1sYXN0LWZvY3VzJztcblxuY29uc3QgaW9zVHJhbnNpdGlvbkFuaW1hdGlvbiA9ICgpID0+IGltcG9ydCgnLi9pb3MudHJhbnNpdGlvbi5qcycpO1xuY29uc3QgbWRUcmFuc2l0aW9uQW5pbWF0aW9uID0gKCkgPT4gaW1wb3J0KCcuL21kLnRyYW5zaXRpb24uanMnKTtcbmNvbnN0IGZvY3VzQ29udHJvbGxlciA9IGNyZWF0ZUZvY3VzQ29udHJvbGxlcigpO1xuLy8gVE9ETyhGVy0yODMyKTogdHlwZXNcbi8qKlxuICogRXhlY3V0ZXMgdGhlIG1haW4gcGFnZSB0cmFuc2l0aW9uLlxuICogSXQgYWxzbyBtYW5hZ2VzIHRoZSBsaWZlY3ljbGUgb2YgaGVhZGVyIHZpc2liaWxpdHkgKGlmIGFueSlcbiAqIHRvIHByZXZlbnQgdmlzdWFsIGZsaWNrZXJpbmcgaW4gaU9TLiBUaGUgZmxpY2tlcmluZyBvbmx5XG4gKiBvY2N1cnMgZm9yIGEgY29uZGVuc2VkIGhlYWRlciB0aGF0IGlzIHBsYWNlZCBhYm92ZSB0aGUgY29udGVudC5cbiAqXG4gKiBAcGFyYW0gb3B0cyBPcHRpb25zIGZvciB0aGUgdHJhbnNpdGlvbi5cbiAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHRyYW5zaXRpb24gaXMgY29tcGxldGUuXG4gKi9cbmNvbnN0IHRyYW5zaXRpb24gPSAob3B0cykgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHdyaXRlVGFzaygoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2l0aW9uaW5nSW5hY3RpdmVIZWFkZXIgPSBnZXRJb3NJb25IZWFkZXIob3B0cyk7XG4gICAgICAgICAgICBiZWZvcmVUcmFuc2l0aW9uKG9wdHMsIHRyYW5zaXRpb25pbmdJbmFjdGl2ZUhlYWRlcik7XG4gICAgICAgICAgICBydW5UcmFuc2l0aW9uKG9wdHMpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hbmltYXRpb24uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhZnRlclRyYW5zaXRpb24ob3B0cyk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgYWZ0ZXJUcmFuc2l0aW9uKG9wdHMpO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdGhhdCB0aGUgaGVhZGVyIGlzIHJlc3RvcmVkIHRvIGl0cyBvcmlnaW5hbCBzdGF0ZS5cbiAgICAgICAgICAgICAgICBzZXRIZWFkZXJUcmFuc2l0aW9uQ2xhc3ModHJhbnNpdGlvbmluZ0luYWN0aXZlSGVhZGVyLCBmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuY29uc3QgYmVmb3JlVHJhbnNpdGlvbiA9IChvcHRzLCB0cmFuc2l0aW9uaW5nSW5hY3RpdmVIZWFkZXIpID0+IHtcbiAgICBjb25zdCBlbnRlcmluZ0VsID0gb3B0cy5lbnRlcmluZ0VsO1xuICAgIGNvbnN0IGxlYXZpbmdFbCA9IG9wdHMubGVhdmluZ0VsO1xuICAgIGZvY3VzQ29udHJvbGxlci5zYXZlVmlld0ZvY3VzKGxlYXZpbmdFbCk7XG4gICAgc2V0WkluZGV4KGVudGVyaW5nRWwsIGxlYXZpbmdFbCwgb3B0cy5kaXJlY3Rpb24pO1xuICAgIC8vIFByZXZlbnQgZmxpY2tlcmluZyBvZiB0aGUgaGVhZGVyIGJ5IGFkZGluZyBhIGNsYXNzLlxuICAgIHNldEhlYWRlclRyYW5zaXRpb25DbGFzcyh0cmFuc2l0aW9uaW5nSW5hY3RpdmVIZWFkZXIsIHRydWUpO1xuICAgIGlmIChvcHRzLnNob3dHb0JhY2spIHtcbiAgICAgICAgZW50ZXJpbmdFbC5jbGFzc0xpc3QuYWRkKCdjYW4tZ28tYmFjaycpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZW50ZXJpbmdFbC5jbGFzc0xpc3QucmVtb3ZlKCdjYW4tZ28tYmFjaycpO1xuICAgIH1cbiAgICBzZXRQYWdlSGlkZGVuKGVudGVyaW5nRWwsIGZhbHNlKTtcbiAgICAvKipcbiAgICAgKiBXaGVuIHRyYW5zaXRpb25pbmcsIHRoZSBwYWdlIHNob3VsZCBub3RcbiAgICAgKiByZXNwb25kIHRvIGNsaWNrIGV2ZW50cy4gVGhpcyByZXNvbHZlcyBzbWFsbFxuICAgICAqIGlzc3VlcyBsaWtlIHVzZXJzIGRvdWJsZSB0YXBwaW5nIHRoZSBpb24tYmFjay1idXR0b24uXG4gICAgICogVGhlc2UgcG9pbnRlciBldmVudHMgYXJlIHJlbW92ZWQgaW4gYGFmdGVyVHJhbnNpdGlvbmAuXG4gICAgICovXG4gICAgZW50ZXJpbmdFbC5zdHlsZS5zZXRQcm9wZXJ0eSgncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xuICAgIGlmIChsZWF2aW5nRWwpIHtcbiAgICAgICAgc2V0UGFnZUhpZGRlbihsZWF2aW5nRWwsIGZhbHNlKTtcbiAgICAgICAgbGVhdmluZ0VsLnN0eWxlLnNldFByb3BlcnR5KCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG4gICAgfVxufTtcbmNvbnN0IHJ1blRyYW5zaXRpb24gPSBhc3luYyAob3B0cykgPT4ge1xuICAgIGNvbnN0IGFuaW1hdGlvbkJ1aWxkZXIgPSBhd2FpdCBnZXRBbmltYXRpb25CdWlsZGVyKG9wdHMpO1xuICAgIGNvbnN0IGFuaSA9IGFuaW1hdGlvbkJ1aWxkZXIgJiYgQnVpbGQuaXNCcm93c2VyID8gYW5pbWF0aW9uKGFuaW1hdGlvbkJ1aWxkZXIsIG9wdHMpIDogbm9BbmltYXRpb24ob3B0cyk7IC8vIGZhc3QgcGF0aCBmb3Igbm8gYW5pbWF0aW9uXG4gICAgcmV0dXJuIGFuaTtcbn07XG5jb25zdCBhZnRlclRyYW5zaXRpb24gPSAob3B0cykgPT4ge1xuICAgIGNvbnN0IGVudGVyaW5nRWwgPSBvcHRzLmVudGVyaW5nRWw7XG4gICAgY29uc3QgbGVhdmluZ0VsID0gb3B0cy5sZWF2aW5nRWw7XG4gICAgZW50ZXJpbmdFbC5jbGFzc0xpc3QucmVtb3ZlKCdpb24tcGFnZS1pbnZpc2libGUnKTtcbiAgICBlbnRlcmluZ0VsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwb2ludGVyLWV2ZW50cycpO1xuICAgIGlmIChsZWF2aW5nRWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsZWF2aW5nRWwuY2xhc3NMaXN0LnJlbW92ZSgnaW9uLXBhZ2UtaW52aXNpYmxlJyk7XG4gICAgICAgIGxlYXZpbmdFbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncG9pbnRlci1ldmVudHMnKTtcbiAgICB9XG4gICAgZm9jdXNDb250cm9sbGVyLnNldFZpZXdGb2N1cyhlbnRlcmluZ0VsKTtcbn07XG5jb25zdCBnZXRBbmltYXRpb25CdWlsZGVyID0gYXN5bmMgKG9wdHMpID0+IHtcbiAgICBpZiAoIW9wdHMubGVhdmluZ0VsIHx8ICFvcHRzLmFuaW1hdGVkIHx8IG9wdHMuZHVyYXRpb24gPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKG9wdHMuYW5pbWF0aW9uQnVpbGRlcikge1xuICAgICAgICByZXR1cm4gb3B0cy5hbmltYXRpb25CdWlsZGVyO1xuICAgIH1cbiAgICBjb25zdCBnZXRBbmltYXRpb24gPSBvcHRzLm1vZGUgPT09ICdpb3MnXG4gICAgICAgID8gKGF3YWl0IGlvc1RyYW5zaXRpb25BbmltYXRpb24oKSkuaW9zVHJhbnNpdGlvbkFuaW1hdGlvblxuICAgICAgICA6IChhd2FpdCBtZFRyYW5zaXRpb25BbmltYXRpb24oKSkubWRUcmFuc2l0aW9uQW5pbWF0aW9uO1xuICAgIHJldHVybiBnZXRBbmltYXRpb247XG59O1xuY29uc3QgYW5pbWF0aW9uID0gYXN5bmMgKGFuaW1hdGlvbkJ1aWxkZXIsIG9wdHMpID0+IHtcbiAgICBhd2FpdCB3YWl0Rm9yUmVhZHkob3B0cywgdHJ1ZSk7XG4gICAgY29uc3QgdHJhbnMgPSBhbmltYXRpb25CdWlsZGVyKG9wdHMuYmFzZUVsLCBvcHRzKTtcbiAgICBmaXJlV2lsbEV2ZW50cyhvcHRzLmVudGVyaW5nRWwsIG9wdHMubGVhdmluZ0VsKTtcbiAgICBjb25zdCBkaWRDb21wbGV0ZSA9IGF3YWl0IHBsYXlUcmFuc2l0aW9uKHRyYW5zLCBvcHRzKTtcbiAgICBpZiAob3B0cy5wcm9ncmVzc0NhbGxiYWNrKSB7XG4gICAgICAgIG9wdHMucHJvZ3Jlc3NDYWxsYmFjayh1bmRlZmluZWQpO1xuICAgIH1cbiAgICBpZiAoZGlkQ29tcGxldGUpIHtcbiAgICAgICAgZmlyZURpZEV2ZW50cyhvcHRzLmVudGVyaW5nRWwsIG9wdHMubGVhdmluZ0VsKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaGFzQ29tcGxldGVkOiBkaWRDb21wbGV0ZSxcbiAgICAgICAgYW5pbWF0aW9uOiB0cmFucyxcbiAgICB9O1xufTtcbmNvbnN0IG5vQW5pbWF0aW9uID0gYXN5bmMgKG9wdHMpID0+IHtcbiAgICBjb25zdCBlbnRlcmluZ0VsID0gb3B0cy5lbnRlcmluZ0VsO1xuICAgIGNvbnN0IGxlYXZpbmdFbCA9IG9wdHMubGVhdmluZ0VsO1xuICAgIGNvbnN0IGZvY3VzTWFuYWdlckVuYWJsZWQgPSBjb25maWcuZ2V0KCdmb2N1c01hbmFnZXJQcmlvcml0eScsIGZhbHNlKTtcbiAgICAvKipcbiAgICAgKiBJZiB0aGUgZm9jdXMgbWFuYWdlciBpcyBlbmFibGVkIHRoZW4gd2UgbmVlZCB0byB3YWl0IGZvciBJb25pYyBjb21wb25lbnRzIHRvIGJlXG4gICAgICogcmVuZGVyZWQgb3RoZXJ3aXNlIHRoZSBjb21wb25lbnQgdG8gZm9jdXMgbWF5IG5vdCBiZSBmb2N1c2VkIGJlY2F1c2UgaXQgaXMgaGlkZGVuLlxuICAgICAqL1xuICAgIGF3YWl0IHdhaXRGb3JSZWFkeShvcHRzLCBmb2N1c01hbmFnZXJFbmFibGVkKTtcbiAgICBmaXJlV2lsbEV2ZW50cyhlbnRlcmluZ0VsLCBsZWF2aW5nRWwpO1xuICAgIGZpcmVEaWRFdmVudHMoZW50ZXJpbmdFbCwgbGVhdmluZ0VsKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBoYXNDb21wbGV0ZWQ6IHRydWUsXG4gICAgfTtcbn07XG5jb25zdCB3YWl0Rm9yUmVhZHkgPSBhc3luYyAob3B0cywgZGVmYXVsdERlZXApID0+IHtcbiAgICBjb25zdCBkZWVwID0gb3B0cy5kZWVwV2FpdCAhPT0gdW5kZWZpbmVkID8gb3B0cy5kZWVwV2FpdCA6IGRlZmF1bHREZWVwO1xuICAgIGlmIChkZWVwKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtkZWVwUmVhZHkob3B0cy5lbnRlcmluZ0VsKSwgZGVlcFJlYWR5KG9wdHMubGVhdmluZ0VsKV0pO1xuICAgIH1cbiAgICBhd2FpdCBub3RpZnlWaWV3UmVhZHkob3B0cy52aWV3SXNSZWFkeSwgb3B0cy5lbnRlcmluZ0VsKTtcbn07XG5jb25zdCBub3RpZnlWaWV3UmVhZHkgPSBhc3luYyAodmlld0lzUmVhZHksIGVudGVyaW5nRWwpID0+IHtcbiAgICBpZiAodmlld0lzUmVhZHkpIHtcbiAgICAgICAgYXdhaXQgdmlld0lzUmVhZHkoZW50ZXJpbmdFbCk7XG4gICAgfVxufTtcbmNvbnN0IHBsYXlUcmFuc2l0aW9uID0gKHRyYW5zLCBvcHRzKSA9PiB7XG4gICAgY29uc3QgcHJvZ3Jlc3NDYWxsYmFjayA9IG9wdHMucHJvZ3Jlc3NDYWxsYmFjaztcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgdHJhbnMub25GaW5pc2goKGN1cnJlbnRTdGVwKSA9PiByZXNvbHZlKGN1cnJlbnRTdGVwID09PSAxKSk7XG4gICAgfSk7XG4gICAgLy8gY29vbCwgbGV0J3MgZG8gdGhpcywgc3RhcnQgdGhlIHRyYW5zaXRpb25cbiAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xuICAgICAgICAvLyB0aGlzIGlzIGEgc3dpcGUgdG8gZ28gYmFjaywganVzdCBnZXQgdGhlIHRyYW5zaXRpb24gcHJvZ3Jlc3MgcmVhZHlcbiAgICAgICAgLy8ga2ljayBvZmYgdGhlIHN3aXBlIGFuaW1hdGlvbiBzdGFydFxuICAgICAgICB0cmFucy5wcm9ncmVzc1N0YXJ0KHRydWUpO1xuICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKHRyYW5zKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIG9ubHkgdGhlIHRvcCBsZXZlbCB0cmFuc2l0aW9uIHNob3VsZCBhY3R1YWxseSBzdGFydCBcInBsYXlcIlxuICAgICAgICAvLyBraWNrIGl0IG9mZiBhbmQgbGV0IGl0IHBsYXkgdGhyb3VnaFxuICAgICAgICAvLyAqKioqKioqKiBET00gV1JJVEUgKioqKioqKioqKioqKioqKlxuICAgICAgICB0cmFucy5wbGF5KCk7XG4gICAgfVxuICAgIC8vIGNyZWF0ZSBhIGNhbGxiYWNrIGZvciB3aGVuIHRoZSBhbmltYXRpb24gaXMgZG9uZVxuICAgIHJldHVybiBwcm9taXNlO1xufTtcbmNvbnN0IGZpcmVXaWxsRXZlbnRzID0gKGVudGVyaW5nRWwsIGxlYXZpbmdFbCkgPT4ge1xuICAgIGxpZmVjeWNsZShsZWF2aW5nRWwsIExJRkVDWUNMRV9XSUxMX0xFQVZFKTtcbiAgICBsaWZlY3ljbGUoZW50ZXJpbmdFbCwgTElGRUNZQ0xFX1dJTExfRU5URVIpO1xufTtcbmNvbnN0IGZpcmVEaWRFdmVudHMgPSAoZW50ZXJpbmdFbCwgbGVhdmluZ0VsKSA9PiB7XG4gICAgbGlmZWN5Y2xlKGVudGVyaW5nRWwsIExJRkVDWUNMRV9ESURfRU5URVIpO1xuICAgIGxpZmVjeWNsZShsZWF2aW5nRWwsIExJRkVDWUNMRV9ESURfTEVBVkUpO1xufTtcbmNvbnN0IGxpZmVjeWNsZSA9IChlbCwgZXZlbnROYW1lKSA9PiB7XG4gICAgaWYgKGVsKSB7XG4gICAgICAgIGNvbnN0IGV2ID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwge1xuICAgICAgICAgICAgYnViYmxlczogZmFsc2UsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGVsLmRpc3BhdGNoRXZlbnQoZXYpO1xuICAgIH1cbn07XG4vKipcbiAqIFdhaXQgdHdvIHJlcXVlc3QgYW5pbWF0aW9uIGZyYW1lIGxvb3BzLlxuICogVGhpcyBhbGxvd3MgdGhlIGZyYW1ld29yayBpbXBsZW1lbnRhdGlvbnMgZW5vdWdoIHRpbWUgdG8gbW91bnRcbiAqIHRoZSB1c2VyLWRlZmluZWQgY29udGVudHMuIFRoaXMgaXMgb2Z0ZW4gbmVlZGVkIHdoZW4gdXNpbmcgaW5saW5lXG4gKiBtb2RhbHMgYW5kIHBvcG92ZXJzIHRoYXQgYWNjZXB0IHVzZXIgY29tcG9uZW50cy4gRm9yIHBvcG92ZXIsXG4gKiB0aGUgY29udGVudHMgbXVzdCBiZSBtb3VudGVkIGZvciB0aGUgcG9wb3ZlciB0byBiZSBzaXplZCBjb3JyZWN0bHkuXG4gKiBGb3IgbW9kYWxzLCB0aGUgY29udGVudHMgbXVzdCBiZSBtb3VudGVkIGZvciBpT1MgdG8gcnVuIHRoZVxuICogdHJhbnNpdGlvbiBjb3JyZWN0bHkuXG4gKlxuICogT24gQW5ndWxhciBhbmQgUmVhY3QsIGEgc2luZ2xlIHJhZiBpcyBlbm91Z2ggdGltZSwgYnV0IGZvciBWdWVcbiAqIHdlIG5lZWQgdG8gd2FpdCB0d28gcmFmcy4gQXMgYSByZXN1bHQgd2UgYXJlIHVzaW5nIHR3byByYWZzIGZvclxuICogYWxsIGZyYW1ld29ya3MgdG8gZW5zdXJlIGNvbnRlbnRzIGFyZSBtb3VudGVkLlxuICovXG5jb25zdCB3YWl0Rm9yTW91bnQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByYWYoKCkgPT4gcmFmKCgpID0+IHJlc29sdmUoKSkpKTtcbn07XG5jb25zdCBkZWVwUmVhZHkgPSBhc3luYyAoZWwpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZWw7XG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQuY29tcG9uZW50T25SZWFkeSAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY3VzdG9tLXJ1bGVzL25vLWNvbXBvbmVudC1vbi1yZWFkeS1tZXRob2RcbiAgICAgICAgICAgIGNvbnN0IHN0ZW5jaWxFbCA9IGF3YWl0IGVsZW1lbnQuY29tcG9uZW50T25SZWFkeSgpO1xuICAgICAgICAgICAgaWYgKHN0ZW5jaWxFbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDdXN0b20gZWxlbWVudHMgaW4gU3RlbmNpbCB3aWxsIGhhdmUgX19yZWdpc3Rlckhvc3QuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlbGVtZW50Ll9fcmVnaXN0ZXJIb3N0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogTm9uLWxhenkgbG9hZGVkIGN1c3RvbSBlbGVtZW50cyBuZWVkIHRvIHdhaXRcbiAgICAgICAgICAgICAqIG9uZSBmcmFtZSBmb3IgY29tcG9uZW50IHRvIGJlIGxvYWRlZC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29uc3Qgd2FpdEZvckN1c3RvbUVsZW1lbnQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmFmKHJlc29sdmUpKTtcbiAgICAgICAgICAgIGF3YWl0IHdhaXRGb3JDdXN0b21FbGVtZW50O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKEFycmF5LmZyb20oZWxlbWVudC5jaGlsZHJlbikubWFwKGRlZXBSZWFkeSkpO1xuICAgIH1cbn07XG5jb25zdCBzZXRQYWdlSGlkZGVuID0gKGVsLCBoaWRkZW4pID0+IHtcbiAgICBpZiAoaGlkZGVuKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdpb24tcGFnZS1oaWRkZW4nKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGVsLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lvbi1wYWdlLWhpZGRlbicpO1xuICAgIH1cbn07XG5jb25zdCBzZXRaSW5kZXggPSAoZW50ZXJpbmdFbCwgbGVhdmluZ0VsLCBkaXJlY3Rpb24pID0+IHtcbiAgICBpZiAoZW50ZXJpbmdFbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGVudGVyaW5nRWwuc3R5bGUuekluZGV4ID0gZGlyZWN0aW9uID09PSAnYmFjaycgPyAnOTknIDogJzEwMSc7XG4gICAgfVxuICAgIGlmIChsZWF2aW5nRWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsZWF2aW5nRWwuc3R5bGUuekluZGV4ID0gJzEwMCc7XG4gICAgfVxufTtcbi8qKlxuICogQWRkIGEgY2xhc3MgdG8gZW5zdXJlIHRoYXQgdGhlIGhlYWRlciAoaWYgYW55KVxuICogZG9lcyBub3QgZmxpY2tlciBkdXJpbmcgdGhlIHRyYW5zaXRpb24uIEJ5IGFkZGluZyB0aGVcbiAqIHRyYW5zaXRpb25pbmcgY2xhc3MsIHdlIGVuc3VyZSB0aGF0IHRoZSBoZWFkZXIgaGFzXG4gKiB0aGUgbmVjZXNzYXJ5IHN0eWxlcyB0byBwcmV2ZW50IHRoZSBmb2xsb3dpbmcgZmxpY2tlcnM6XG4gKiAxLiBXaGVuIGVudGVyaW5nIGEgcGFnZSB3aXRoIGEgY29uZGVuc2VkIGhlYWRlciwgdGhlXG4gKiBoZWFkZXIgc2hvdWxkIG5ldmVyIGJlIHZpc2libGUuIEhvd2V2ZXIsXG4gKiBpdCBicmllZmx5IHJlbmRlcnMgdGhlIGJhY2tncm91bmQgY29sb3Igd2hpbGVcbiAqIHRoZSB0cmFuc2l0aW9uIGlzIG9jY3VycmluZy5cbiAqIDIuIFdoZW4gbGVhdmluZyBhIHBhZ2Ugd2l0aCBhIGNvbmRlbnNlZCBoZWFkZXIsIHRoZVxuICogaGVhZGVyIGhhcyBhbiBvcGFjaXR5IG9mIDAgYW5kIHRoZSBwYWdlc1xuICogaGF2ZSBhIHotaW5kZXggd2hpY2ggY2F1c2VzIHRoZSBlbnRlcmluZyBwYWdlIHRvXG4gKiBicmllZmx5IHNob3cgaXQncyBjb250ZW50IHVuZGVybmVhdGggdGhlIGxlYXZpbmcgcGFnZS5cbiAqIDMuIFdoZW4gZW50ZXJpbmcgYSBwYWdlIG9yIGxlYXZpbmcgYSBwYWdlIHdpdGggYSBmYWRlXG4gKiBoZWFkZXIsIHRoZSBoZWFkZXIgc2hvdWxkIG5vdCBoYXZlIGEgYmFja2dyb3VuZCBjb2xvci5cbiAqIEhvd2V2ZXIsIGl0IGJyaWVmbHkgc2hvd3MgdGhlIGJhY2tncm91bmQgY29sb3Igd2hpbGVcbiAqIHRoZSB0cmFuc2l0aW9uIGlzIG9jY3VycmluZy5cbiAqXG4gKiBAcGFyYW0gaGVhZGVyIFRoZSBoZWFkZXIgZWxlbWVudCB0byBtb2RpZnkuXG4gKiBAcGFyYW0gaXNUcmFuc2l0aW9uaW5nIFdoZXRoZXIgdGhlIHRyYW5zaXRpb24gaXMgb2NjdXJyaW5nLlxuICovXG5jb25zdCBzZXRIZWFkZXJUcmFuc2l0aW9uQ2xhc3MgPSAoaGVhZGVyLCBpc1RyYW5zaXRpb25pbmcpID0+IHtcbiAgICBpZiAoIWhlYWRlcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRyYW5zaXRpb25DbGFzcyA9ICdoZWFkZXItdHJhbnNpdGlvbmluZyc7XG4gICAgaWYgKGlzVHJhbnNpdGlvbmluZykge1xuICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZCh0cmFuc2l0aW9uQ2xhc3MpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUodHJhbnNpdGlvbkNsYXNzKTtcbiAgICB9XG59O1xuY29uc3QgZ2V0SW9uUGFnZUVsZW1lbnQgPSAoZWxlbWVudCkgPT4ge1xuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnaW9uLXBhZ2UnKSkge1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG4gICAgY29uc3QgaW9uUGFnZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLmlvbi1wYWdlLCA6c2NvcGUgPiBpb24tbmF2LCA6c2NvcGUgPiBpb24tdGFicycpO1xuICAgIGlmIChpb25QYWdlKSB7XG4gICAgICAgIHJldHVybiBpb25QYWdlO1xuICAgIH1cbiAgICAvLyBpZGssIHJldHVybiB0aGUgb3JpZ2luYWwgZWxlbWVudCBzbyBhdCBsZWFzdCBzb21ldGhpbmcgYW5pbWF0ZXMgYW5kIHdlIGRvbid0IGhhdmUgYSBudWxsIHBvaW50ZXJcbiAgICByZXR1cm4gZWxlbWVudDtcbn07XG4vKipcbiAqIFJldHJpZXZlcyB0aGUgaW9uLWhlYWRlciBlbGVtZW50IGZyb20gYSBwYWdlIGJhc2VkIG9uIHRoZVxuICogZGlyZWN0aW9uIG9mIHRoZSB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSBvcHRzIE9wdGlvbnMgZm9yIHRoZSB0cmFuc2l0aW9uLlxuICogQHJldHVybnMgVGhlIGlvbi1oZWFkZXIgZWxlbWVudCBvciBudWxsIGlmIG5vdCBmb3VuZCBvciBub3QgaW4gJ2lvcycgbW9kZS5cbiAqL1xuY29uc3QgZ2V0SW9zSW9uSGVhZGVyID0gKG9wdHMpID0+IHtcbiAgICBjb25zdCBlbnRlcmluZ0VsID0gb3B0cy5lbnRlcmluZ0VsO1xuICAgIGNvbnN0IGxlYXZpbmdFbCA9IG9wdHMubGVhdmluZ0VsO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IG9wdHMuZGlyZWN0aW9uO1xuICAgIGNvbnN0IG1vZGUgPSBvcHRzLm1vZGU7XG4gICAgaWYgKG1vZGUgIT09ICdpb3MnKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBlbGVtZW50ID0gZGlyZWN0aW9uID09PSAnYmFjaycgPyBsZWF2aW5nRWwgOiBlbnRlcmluZ0VsO1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGVsZW1lbnQucXVlcnlTZWxlY3RvcignaW9uLWhlYWRlcicpO1xufTtcblxuZXhwb3J0IHsgTElGRUNZQ0xFX1dJTExfRU5URVIgYXMgTCwgTElGRUNZQ0xFX0RJRF9FTlRFUiBhcyBhLCBMSUZFQ1lDTEVfV0lMTF9MRUFWRSBhcyBiLCBMSUZFQ1lDTEVfRElEX0xFQVZFIGFzIGMsIExJRkVDWUNMRV9XSUxMX1VOTE9BRCBhcyBkLCBkZWVwUmVhZHkgYXMgZSwgZ2V0SW9uUGFnZUVsZW1lbnQgYXMgZywgbGlmZWN5Y2xlIGFzIGwsIHNldFBhZ2VIaWRkZW4gYXMgcywgdHJhbnNpdGlvbiBhcyB0LCB3YWl0Rm9yTW91bnQgYXMgdyB9O1xuIiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IGMgYXMgY29tcG9uZW50T25SZWFkeSB9IGZyb20gJy4vaGVscGVycy5qcyc7XG5pbXBvcnQgeyBlIGFzIHByaW50UmVxdWlyZWRFbGVtZW50RXJyb3IgfSBmcm9tICcuL2luZGV4NC5qcyc7XG5cbmNvbnN0IElPTl9DT05URU5UX1RBR19OQU1FID0gJ0lPTi1DT05URU5UJztcbmNvbnN0IElPTl9DT05URU5UX0VMRU1FTlRfU0VMRUNUT1IgPSAnaW9uLWNvbnRlbnQnO1xuY29uc3QgSU9OX0NPTlRFTlRfQ0xBU1NfU0VMRUNUT1IgPSAnLmlvbi1jb250ZW50LXNjcm9sbC1ob3N0Jztcbi8qKlxuICogU2VsZWN0b3IgdXNlZCBmb3IgaW1wbGVtZW50YXRpb25zIHJlbGlhbnQgb24gYDxpb24tY29udGVudD5gIGZvciBzY3JvbGwgZXZlbnQgY2hhbmdlcy5cbiAqXG4gKiBEZXZlbG9wZXJzIHNob3VsZCB1c2UgdGhlIGAuaW9uLWNvbnRlbnQtc2Nyb2xsLWhvc3RgIHNlbGVjdG9yIHRvIHRhcmdldCB0aGUgZWxlbWVudCBlbWl0dGluZ1xuICogc2Nyb2xsIGV2ZW50cy4gV2l0aCB2aXJ0dWFsIHNjcm9sbCBpbXBsZW1lbnRhdGlvbnMgdGhpcyB3aWxsIGJlIHRoZSBob3N0IGVsZW1lbnQgZm9yXG4gKiB0aGUgc2Nyb2xsIHZpZXdwb3J0LlxuICovXG5jb25zdCBJT05fQ09OVEVOVF9TRUxFQ1RPUiA9IGAke0lPTl9DT05URU5UX0VMRU1FTlRfU0VMRUNUT1J9LCAke0lPTl9DT05URU5UX0NMQVNTX1NFTEVDVE9SfWA7XG5jb25zdCBpc0lvbkNvbnRlbnQgPSAoZWwpID0+IGVsLnRhZ05hbWUgPT09IElPTl9DT05URU5UX1RBR19OQU1FO1xuLyoqXG4gKiBXYWl0cyBmb3IgdGhlIGVsZW1lbnQgaG9zdCBmdWxseSBpbml0aWFsaXplIGJlZm9yZVxuICogcmV0dXJuaW5nIHRoZSBpbm5lciBzY3JvbGwgZWxlbWVudC5cbiAqXG4gKiBGb3IgYGlvbi1jb250ZW50YCB0aGUgc2Nyb2xsIHRhcmdldCB3aWxsIGJlIHRoZSByZXN1bHRcbiAqIG9mIHRoZSBgZ2V0U2Nyb2xsRWxlbWVudGAgZnVuY3Rpb24uXG4gKlxuICogRm9yIGN1c3RvbSBpbXBsZW1lbnRhdGlvbnMgaXQgd2lsbCBiZSB0aGUgZWxlbWVudCBob3N0XG4gKiBvciBhIHNlbGVjdG9yIHdpdGhpbiB0aGUgaG9zdCwgaWYgc3VwcGxpZWQgdGhyb3VnaCBgc2Nyb2xsVGFyZ2V0YC5cbiAqL1xuY29uc3QgZ2V0U2Nyb2xsRWxlbWVudCA9IGFzeW5jIChlbCkgPT4ge1xuICAgIGlmIChpc0lvbkNvbnRlbnQoZWwpKSB7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBjb21wb25lbnRPblJlYWR5KGVsLCByZXNvbHZlKSk7XG4gICAgICAgIHJldHVybiBlbC5nZXRTY3JvbGxFbGVtZW50KCk7XG4gICAgfVxuICAgIHJldHVybiBlbDtcbn07XG4vKipcbiAqIFF1ZXJpZXMgdGhlIGVsZW1lbnQgbWF0Y2hpbmcgdGhlIHNlbGVjdG9yIGZvciBJb25Db250ZW50LlxuICogU2VlIElPTl9DT05URU5UX1NFTEVDVE9SIGZvciB0aGUgc2VsZWN0b3IgdXNlZC5cbiAqL1xuY29uc3QgZmluZElvbkNvbnRlbnQgPSAoZWwpID0+IHtcbiAgICAvKipcbiAgICAgKiBGaXJzdCB3ZSB0cnkgdG8gcXVlcnkgdGhlIGN1c3RvbSBzY3JvbGwgaG9zdCBzZWxlY3RvciBpbiBjYXNlcyB3aGVyZVxuICAgICAqIHRoZSBpbXBsZW1lbnRhdGlvbiBpcyB1c2luZyBhbiBvdXRlciBgaW9uLWNvbnRlbnRgIHdpdGggYW4gaW5uZXIgY3VzdG9tXG4gICAgICogc2Nyb2xsIGNvbnRhaW5lci5cbiAgICAgKi9cbiAgICBjb25zdCBjdXN0b21Db250ZW50SG9zdCA9IGVsLnF1ZXJ5U2VsZWN0b3IoSU9OX0NPTlRFTlRfQ0xBU1NfU0VMRUNUT1IpO1xuICAgIGlmIChjdXN0b21Db250ZW50SG9zdCkge1xuICAgICAgICByZXR1cm4gY3VzdG9tQ29udGVudEhvc3Q7XG4gICAgfVxuICAgIHJldHVybiBlbC5xdWVyeVNlbGVjdG9yKElPTl9DT05URU5UX1NFTEVDVE9SKTtcbn07XG4vKipcbiAqIFF1ZXJpZXMgdGhlIGNsb3Nlc3QgZWxlbWVudCBtYXRjaGluZyB0aGUgc2VsZWN0b3IgZm9yIElvbkNvbnRlbnQuXG4gKi9cbmNvbnN0IGZpbmRDbG9zZXN0SW9uQ29udGVudCA9IChlbCkgPT4ge1xuICAgIHJldHVybiBlbC5jbG9zZXN0KElPTl9DT05URU5UX1NFTEVDVE9SKTtcbn07XG4vKipcbiAqIFNjcm9sbHMgdG8gdGhlIHRvcCBvZiB0aGUgZWxlbWVudC4gSWYgYW4gYGlvbi1jb250ZW50YCBpcyBmb3VuZCwgaXQgd2lsbCBzY3JvbGxcbiAqIHVzaW5nIHRoZSBwdWJsaWMgQVBJIGBzY3JvbGxUb1RvcGAgd2l0aCBhIGR1cmF0aW9uLlxuICovXG5jb25zdCBzY3JvbGxUb1RvcCA9IChlbCwgZHVyYXRpb25NcykgPT4ge1xuICAgIGlmIChpc0lvbkNvbnRlbnQoZWwpKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBlbDtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQuc2Nyb2xsVG9Ub3AoZHVyYXRpb25Ncyk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZWwuc2Nyb2xsVG8oe1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJyAsXG4gICAgfSkpO1xufTtcbi8qKlxuICogU2Nyb2xscyBieSBhIHNwZWNpZmllZCBYL1kgZGlzdGFuY2UgaW4gdGhlIGNvbXBvbmVudC4gSWYgYW4gYGlvbi1jb250ZW50YCBpcyBmb3VuZCwgaXQgd2lsbCBzY3JvbGxcbiAqIHVzaW5nIHRoZSBwdWJsaWMgQVBJIGBzY3JvbGxCeVBvaW50YCB3aXRoIGEgZHVyYXRpb24uXG4gKi9cbmNvbnN0IHNjcm9sbEJ5UG9pbnQgPSAoZWwsIHgsIHksIGR1cmF0aW9uTXMpID0+IHtcbiAgICBpZiAoaXNJb25Db250ZW50KGVsKSkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZWw7XG4gICAgICAgIHJldHVybiBjb250ZW50LnNjcm9sbEJ5UG9pbnQoeCwgeSwgZHVyYXRpb25Ncyk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZWwuc2Nyb2xsQnkoe1xuICAgICAgICB0b3A6IHksXG4gICAgICAgIGxlZnQ6IHgsXG4gICAgICAgIGJlaGF2aW9yOiBkdXJhdGlvbk1zID4gMCA/ICdzbW9vdGgnIDogJ2F1dG8nLFxuICAgIH0pKTtcbn07XG4vKipcbiAqIFByaW50cyBhbiBlcnJvciBpbmZvcm1pbmcgZGV2ZWxvcGVycyB0aGF0IGFuIGltcGxlbWVudGF0aW9uIHJlcXVpcmVzIGFuIGVsZW1lbnQgdG8gYmUgdXNlZFxuICogd2l0aGluIGVpdGhlciB0aGUgYGlvbi1jb250ZW50YCBzZWxlY3RvciBvciB0aGUgYC5pb24tY29udGVudC1zY3JvbGwtaG9zdGAgY2xhc3MuXG4gKi9cbmNvbnN0IHByaW50SW9uQ29udGVudEVycm9yTXNnID0gKGVsKSA9PiB7XG4gICAgcmV0dXJuIHByaW50UmVxdWlyZWRFbGVtZW50RXJyb3IoZWwsIElPTl9DT05URU5UX0VMRU1FTlRfU0VMRUNUT1IpO1xufTtcbi8qKlxuICogU2V2ZXJhbCBjb21wb25lbnRzIGluIElvbmljIG5lZWQgdG8gcHJldmVudCBzY3JvbGxpbmdcbiAqIGR1cmluZyBhIGdlc3R1cmUgKGNhcmQgbW9kYWwsIHJhbmdlLCBpdGVtIHNsaWRpbmcsIGV0YykuXG4gKiBVc2UgdGhpcyB1dGlsaXR5IHRvIGFjY291bnQgZm9yIGlvbi1jb250ZW50IGFuZCBjdXN0b20gY29udGVudCBob3N0cy5cbiAqL1xuY29uc3QgZGlzYWJsZUNvbnRlbnRTY3JvbGxZID0gKGNvbnRlbnRFbCkgPT4ge1xuICAgIGlmIChpc0lvbkNvbnRlbnQoY29udGVudEVsKSkge1xuICAgICAgICBjb25zdCBpb25Db250ZW50ID0gY29udGVudEVsO1xuICAgICAgICBjb25zdCBpbml0aWFsU2Nyb2xsWSA9IGlvbkNvbnRlbnQuc2Nyb2xsWTtcbiAgICAgICAgaW9uQ29udGVudC5zY3JvbGxZID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIHNob3VsZCBiZSBwYXNzZWQgaW50byByZXNldENvbnRlbnRTY3JvbGxZXG4gICAgICAgICAqIHNvIHRoYXQgd2UgY2FuIHJldmVydCBpb24tY29udGVudCdzIHNjcm9sbFkgdG8gdGhlXG4gICAgICAgICAqIGNvcnJlY3Qgc3RhdGUuIEZvciBleGFtcGxlLCBpZiBzY3JvbGxZID0gZmFsc2VcbiAgICAgICAgICogaW5pdGlhbGx5LCB3ZSBkbyBub3Qgd2FudCB0byBlbmFibGUgc2Nyb2xsaW5nXG4gICAgICAgICAqIHdoZW4gd2UgY2FsbCByZXNldENvbnRlbnRTY3JvbGxZLlxuICAgICAgICAgKi9cbiAgICAgICAgcmV0dXJuIGluaXRpYWxTY3JvbGxZO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCdvdmVyZmxvdycsICdoaWRkZW4nKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufTtcbmNvbnN0IHJlc2V0Q29udGVudFNjcm9sbFkgPSAoY29udGVudEVsLCBpbml0aWFsU2Nyb2xsWSkgPT4ge1xuICAgIGlmIChpc0lvbkNvbnRlbnQoY29udGVudEVsKSkge1xuICAgICAgICBjb250ZW50RWwuc2Nyb2xsWSA9IGluaXRpYWxTY3JvbGxZO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvdmVyZmxvdycpO1xuICAgIH1cbn07XG5cbmV4cG9ydCB7IElPTl9DT05URU5UX0NMQVNTX1NFTEVDVE9SIGFzIEksIGZpbmRDbG9zZXN0SW9uQ29udGVudCBhcyBhLCBJT05fQ09OVEVOVF9FTEVNRU5UX1NFTEVDVE9SIGFzIGIsIHNjcm9sbEJ5UG9pbnQgYXMgYywgZGlzYWJsZUNvbnRlbnRTY3JvbGxZIGFzIGQsIGZpbmRJb25Db250ZW50IGFzIGYsIGdldFNjcm9sbEVsZW1lbnQgYXMgZywgaXNJb25Db250ZW50IGFzIGksIHByaW50SW9uQ29udGVudEVycm9yTXNnIGFzIHAsIHJlc2V0Q29udGVudFNjcm9sbFkgYXMgciwgc2Nyb2xsVG9Ub3AgYXMgcyB9O1xuIiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IHJlYWRUYXNrLCB3cml0ZVRhc2ssIHByb3h5Q3VzdG9tRWxlbWVudCwgSFRNTEVsZW1lbnQsIGgsIEhvc3QgfSBmcm9tICdAc3RlbmNpbC9jb3JlL2ludGVybmFsL2NsaWVudCc7XG5pbXBvcnQgeyBnIGFzIGdldFNjcm9sbEVsZW1lbnQsIGYgYXMgZmluZElvbkNvbnRlbnQsIHAgYXMgcHJpbnRJb25Db250ZW50RXJyb3JNc2cgfSBmcm9tICcuL2luZGV4OC5qcyc7XG5pbXBvcnQgeyBmIGFzIGNsYW1wLCBpIGFzIGluaGVyaXRBcmlhQXR0cmlidXRlcyB9IGZyb20gJy4vaGVscGVycy5qcyc7XG5pbXBvcnQgeyBoIGFzIGhvc3RDb250ZXh0IH0gZnJvbSAnLi90aGVtZS5qcyc7XG5pbXBvcnQgeyBiIGFzIGdldElvbk1vZGUgfSBmcm9tICcuL2lvbmljLWdsb2JhbC5qcyc7XG5cbmNvbnN0IFRSQU5TSVRJT04gPSAnYWxsIDAuMnMgZWFzZS1pbi1vdXQnO1xuY29uc3QgUk9MRV9OT05FID0gJ25vbmUnO1xuY29uc3QgUk9MRV9CQU5ORVIgPSAnYmFubmVyJztcbmNvbnN0IGNsb25lRWxlbWVudCA9ICh0YWdOYW1lKSA9PiB7XG4gICAgY29uc3QgZ2V0Q2FjaGVkRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke3RhZ05hbWV9Lmlvbi1jbG9uZWQtZWxlbWVudGApO1xuICAgIGlmIChnZXRDYWNoZWRFbCAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZ2V0Q2FjaGVkRWw7XG4gICAgfVxuICAgIGNvbnN0IGNsb25lZEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcbiAgICBjbG9uZWRFbC5jbGFzc0xpc3QuYWRkKCdpb24tY2xvbmVkLWVsZW1lbnQnKTtcbiAgICBjbG9uZWRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdub25lJyk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjbG9uZWRFbCk7XG4gICAgcmV0dXJuIGNsb25lZEVsO1xufTtcbmNvbnN0IGNyZWF0ZUhlYWRlckluZGV4ID0gKGhlYWRlckVsKSA9PiB7XG4gICAgaWYgKCFoZWFkZXJFbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRvb2xiYXJzID0gaGVhZGVyRWwucXVlcnlTZWxlY3RvckFsbCgnaW9uLXRvb2xiYXInKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBlbDogaGVhZGVyRWwsXG4gICAgICAgIHRvb2xiYXJzOiBBcnJheS5mcm9tKHRvb2xiYXJzKS5tYXAoKHRvb2xiYXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlvblRpdGxlRWwgPSB0b29sYmFyLnF1ZXJ5U2VsZWN0b3IoJ2lvbi10aXRsZScpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBlbDogdG9vbGJhcixcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0b29sYmFyLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignLnRvb2xiYXItYmFja2dyb3VuZCcpLFxuICAgICAgICAgICAgICAgIGlvblRpdGxlRWwsXG4gICAgICAgICAgICAgICAgaW5uZXJUaXRsZUVsOiBpb25UaXRsZUVsID8gaW9uVGl0bGVFbC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy50b29sYmFyLXRpdGxlJykgOiBudWxsLFxuICAgICAgICAgICAgICAgIGlvbkJ1dHRvbnNFbDogQXJyYXkuZnJvbSh0b29sYmFyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lvbi1idXR0b25zJykpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgfTtcbn07XG5jb25zdCBoYW5kbGVDb250ZW50U2Nyb2xsID0gKHNjcm9sbEVsLCBzY3JvbGxIZWFkZXJJbmRleCwgY29udGVudEVsKSA9PiB7XG4gICAgcmVhZFRhc2soKCkgPT4ge1xuICAgICAgICBjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxFbC5zY3JvbGxUb3A7XG4gICAgICAgIGNvbnN0IHNjYWxlID0gY2xhbXAoMSwgMSArIC1zY3JvbGxUb3AgLyA1MDAsIDEuMSk7XG4gICAgICAgIC8vIE5hdGl2ZSByZWZyZXNoZXIgc2hvdWxkIG5vdCBjYXVzZSB0aXRsZXMgdG8gc2NhbGVcbiAgICAgICAgY29uc3QgbmF0aXZlUmVmcmVzaGVyID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJ2lvbi1yZWZyZXNoZXIucmVmcmVzaGVyLW5hdGl2ZScpO1xuICAgICAgICBpZiAobmF0aXZlUmVmcmVzaGVyID09PSBudWxsKSB7XG4gICAgICAgICAgICB3cml0ZVRhc2soKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNjYWxlTGFyZ2VUaXRsZXMoc2Nyb2xsSGVhZGVySW5kZXgudG9vbGJhcnMsIHNjYWxlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuY29uc3Qgc2V0VG9vbGJhckJhY2tncm91bmRPcGFjaXR5ID0gKGhlYWRlckVsLCBvcGFjaXR5KSA9PiB7XG4gICAgLyoqXG4gICAgICogRmFkaW5nIGluIHRoZSBiYWNrZHJvcCBvcGFjaXR5XG4gICAgICogc2hvdWxkIGhhcHBlbiBhZnRlciB0aGUgbGFyZ2UgdGl0bGVcbiAgICAgKiBoYXMgY29sbGFwc2VkLCBzbyBpdCBpcyBoYW5kbGVkXG4gICAgICogYnkgaGFuZGxlSGVhZGVyRmFkZSgpXG4gICAgICovXG4gICAgaWYgKGhlYWRlckVsLmNvbGxhcHNlID09PSAnZmFkZScpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAob3BhY2l0eSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGhlYWRlckVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLW9wYWNpdHktc2NhbGUnKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGhlYWRlckVsLnN0eWxlLnNldFByb3BlcnR5KCctLW9wYWNpdHktc2NhbGUnLCBvcGFjaXR5LnRvU3RyaW5nKCkpO1xuICAgIH1cbn07XG5jb25zdCBoYW5kbGVUb29sYmFyQm9yZGVySW50ZXJzZWN0aW9uID0gKGV2LCBtYWluSGVhZGVySW5kZXgsIHNjcm9sbFRvcCkgPT4ge1xuICAgIGlmICghZXZbMF0uaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGVyZSBpcyBhIGJ1ZyBpbiBTYWZhcmkgd2hlcmUgb3ZlcmZsb3cgc2Nyb2xsaW5nIG9uIGEgbm9uLWJvZHkgZWxlbWVudFxuICAgICAqIGRvZXMgbm90IGFsd2F5cyByZXNldCB0aGUgc2Nyb2xsVG9wIHBvc2l0aW9uIHRvIDAgd2hlbiBsZXR0aW5nIGdvLiBJdCB3aWxsXG4gICAgICogc2V0IHRvIDEgb25jZSB0aGUgcnViYmVyIGJhbmQgZWZmZWN0IGhhcyBlbmRlZC4gVGhpcyBjYXVzZXMgdGhlIGJhY2tncm91bmQgdG9cbiAgICAgKiBhcHBlYXIgc2xpZ2h0bHkgb24gY2VydGFpbiBhcHAgc2V0dXBzLlxuICAgICAqXG4gICAgICogQWRkaXRpb25hbGx5LCB3ZSBjaGVjayBpZiB1c2VyIGlzIHJ1YmJlciBiYW5kaW5nIChzY3JvbGxpbmcgaXMgbmVnYXRpdmUpXG4gICAgICogYXMgdGhpcyBjYW4gbWVhbiB0aGV5IGFyZSB1c2luZyBwdWxsIHRvIHJlZnJlc2guIE9uY2UgdGhlIHJlZnJlc2hlciBzdGFydHMsXG4gICAgICogdGhlIGNvbnRlbnQgaXMgdHJhbnNmb3JtZWQgd2hpY2ggY2FuIGNhdXNlIHRoZSBpbnRlcnNlY3Rpb24gb2JzZXJ2ZXIgdG8gZXJyb25lb3VzbHlcbiAgICAgKiBmaXJlIGhlcmUgYXMgd2VsbC5cbiAgICAgKi9cbiAgICBjb25zdCBzY2FsZSA9IGV2WzBdLmludGVyc2VjdGlvblJhdGlvID4gMC45IHx8IHNjcm9sbFRvcCA8PSAwID8gMCA6ICgoMSAtIGV2WzBdLmludGVyc2VjdGlvblJhdGlvKSAqIDEwMCkgLyA3NTtcbiAgICBzZXRUb29sYmFyQmFja2dyb3VuZE9wYWNpdHkobWFpbkhlYWRlckluZGV4LmVsLCBzY2FsZSA9PT0gMSA/IHVuZGVmaW5lZCA6IHNjYWxlKTtcbn07XG4vKipcbiAqIElmIHRvb2xiYXJzIGFyZSBpbnRlcnNlY3RpbmcsIGhpZGUgdGhlIHNjcm9sbGFibGUgdG9vbGJhciBjb250ZW50XG4gKiBhbmQgc2hvdyB0aGUgcHJpbWFyeSB0b29sYmFyIGNvbnRlbnQuIElmIHRoZSB0b29sYmFycyBhcmUgbm90IGludGVyc2VjdGluZyxcbiAqIGhpZGUgdGhlIHByaW1hcnkgdG9vbGJhciBjb250ZW50IGFuZCBzaG93IHRoZSBzY3JvbGxhYmxlIHRvb2xiYXIgY29udGVudFxuICovXG5jb25zdCBoYW5kbGVUb29sYmFySW50ZXJzZWN0aW9uID0gKGV2LCAvLyBUT0RPKEZXLTI4MzIpOiB0eXBlIChJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5W10gdHJpZ2dlcnMgZXJyb3JzIHdoaWNoIHNob3VsZCBiZSBzb3J0ZWQpXG5tYWluSGVhZGVySW5kZXgsIHNjcm9sbEhlYWRlckluZGV4LCBzY3JvbGxFbCkgPT4ge1xuICAgIHdyaXRlVGFzaygoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbEVsLnNjcm9sbFRvcDtcbiAgICAgICAgaGFuZGxlVG9vbGJhckJvcmRlckludGVyc2VjdGlvbihldiwgbWFpbkhlYWRlckluZGV4LCBzY3JvbGxUb3ApO1xuICAgICAgICBjb25zdCBldmVudCA9IGV2WzBdO1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb24gPSBldmVudC5pbnRlcnNlY3Rpb25SZWN0O1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb25BcmVhID0gaW50ZXJzZWN0aW9uLndpZHRoICogaW50ZXJzZWN0aW9uLmhlaWdodDtcbiAgICAgICAgY29uc3Qgcm9vdEFyZWEgPSBldmVudC5yb290Qm91bmRzLndpZHRoICogZXZlbnQucm9vdEJvdW5kcy5oZWlnaHQ7XG4gICAgICAgIGNvbnN0IGlzUGFnZUhpZGRlbiA9IGludGVyc2VjdGlvbkFyZWEgPT09IDAgJiYgcm9vdEFyZWEgPT09IDA7XG4gICAgICAgIGNvbnN0IGxlZnREaWZmID0gTWF0aC5hYnMoaW50ZXJzZWN0aW9uLmxlZnQgLSBldmVudC5ib3VuZGluZ0NsaWVudFJlY3QubGVmdCk7XG4gICAgICAgIGNvbnN0IHJpZ2h0RGlmZiA9IE1hdGguYWJzKGludGVyc2VjdGlvbi5yaWdodCAtIGV2ZW50LmJvdW5kaW5nQ2xpZW50UmVjdC5yaWdodCk7XG4gICAgICAgIGNvbnN0IGlzUGFnZVRyYW5zaXRpb25pbmcgPSBpbnRlcnNlY3Rpb25BcmVhID4gMCAmJiAobGVmdERpZmYgPj0gNSB8fCByaWdodERpZmYgPj0gNSk7XG4gICAgICAgIGlmIChpc1BhZ2VIaWRkZW4gfHwgaXNQYWdlVHJhbnNpdGlvbmluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudC5pc0ludGVyc2VjdGluZykge1xuICAgICAgICAgICAgc2V0SGVhZGVyQWN0aXZlKG1haW5IZWFkZXJJbmRleCwgZmFsc2UpO1xuICAgICAgICAgICAgc2V0SGVhZGVyQWN0aXZlKHNjcm9sbEhlYWRlckluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlcmUgaXMgYSBidWcgd2l0aCBJbnRlcnNlY3Rpb25PYnNlcnZlciBvbiBTYWZhcmlcbiAgICAgICAgICAgICAqIHdoZXJlIGBldmVudC5pc0ludGVyc2VjdGluZyA9PT0gZmFsc2VgIHdoZW4gY2FuY2VsbGluZ1xuICAgICAgICAgICAgICogYSBzd2lwZSB0byBnbyBiYWNrIGdlc3R1cmUuIENoZWNraW5nIHRoZSBpbnRlcnNlY3Rpb25cbiAgICAgICAgICAgICAqIHgsIHksIHdpZHRoLCBhbmQgaGVpZ2h0IHByb3ZpZGVzIGEgd29ya2Fyb3VuZC4gVGhpcyBidWdcbiAgICAgICAgICAgICAqIGRvZXMgbm90IGhhcHBlbiB3aGVuIHVzaW5nIFNhZmFyaSArIFdlYiBBbmltYXRpb25zLFxuICAgICAgICAgICAgICogb25seSBTYWZhcmkgKyBDU1MgQW5pbWF0aW9ucy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29uc3QgaGFzVmFsaWRJbnRlcnNlY3Rpb24gPSAoaW50ZXJzZWN0aW9uLnggPT09IDAgJiYgaW50ZXJzZWN0aW9uLnkgPT09IDApIHx8IChpbnRlcnNlY3Rpb24ud2lkdGggIT09IDAgJiYgaW50ZXJzZWN0aW9uLmhlaWdodCAhPT0gMCk7XG4gICAgICAgICAgICBpZiAoaGFzVmFsaWRJbnRlcnNlY3Rpb24gJiYgc2Nyb2xsVG9wID4gMCkge1xuICAgICAgICAgICAgICAgIHNldEhlYWRlckFjdGl2ZShtYWluSGVhZGVySW5kZXgpO1xuICAgICAgICAgICAgICAgIHNldEhlYWRlckFjdGl2ZShzY3JvbGxIZWFkZXJJbmRleCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldFRvb2xiYXJCYWNrZ3JvdW5kT3BhY2l0eShtYWluSGVhZGVySW5kZXguZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59O1xuY29uc3Qgc2V0SGVhZGVyQWN0aXZlID0gKGhlYWRlckluZGV4LCBhY3RpdmUgPSB0cnVlKSA9PiB7XG4gICAgY29uc3QgaGVhZGVyRWwgPSBoZWFkZXJJbmRleC5lbDtcbiAgICBjb25zdCB0b29sYmFycyA9IGhlYWRlckluZGV4LnRvb2xiYXJzO1xuICAgIGNvbnN0IGlvblRpdGxlcyA9IHRvb2xiYXJzLm1hcCgodG9vbGJhcikgPT4gdG9vbGJhci5pb25UaXRsZUVsKTtcbiAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgIGhlYWRlckVsLnNldEF0dHJpYnV0ZSgncm9sZScsIFJPTEVfQkFOTkVSKTtcbiAgICAgICAgaGVhZGVyRWwuY2xhc3NMaXN0LnJlbW92ZSgnaGVhZGVyLWNvbGxhcHNlLWNvbmRlbnNlLWluYWN0aXZlJyk7XG4gICAgICAgIGlvblRpdGxlcy5mb3JFYWNoKChpb25UaXRsZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGlvblRpdGxlKSB7XG4gICAgICAgICAgICAgICAgaW9uVGl0bGUucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGVyZSBjYW4gb25seSBiZSBvbmUgYmFubmVyIGxhbmRtYXJrIHBlciBwYWdlLlxuICAgICAgICAgKiBCeSBkZWZhdWx0LCBhbGwgaW9uLWhlYWRlcnMgaGF2ZSB0aGUgYmFubmVyIHJvbGUuXG4gICAgICAgICAqIFRoaXMgY2F1c2VzIGFuIGFjY2Vzc2liaWxpdHkgaXNzdWUgd2hlbiB1c2luZyBhXG4gICAgICAgICAqIGNvbmRlbnNlZCBoZWFkZXIgc2luY2UgdGhlcmUgYXJlIHR3byBpb24taGVhZGVyc1xuICAgICAgICAgKiBvbiB0aGUgcGFnZSBhdCBvbmNlIChhY3RpdmUgYW5kIGluYWN0aXZlKS5cbiAgICAgICAgICogVG8gc29sdmUgdGhpcywgdGhlIHJvbGUgbmVlZHMgdG8gYmUgdG9nZ2xlZFxuICAgICAgICAgKiBiYXNlZCBvbiB3aGljaCBoZWFkZXIgaXMgYWN0aXZlLlxuICAgICAgICAgKi9cbiAgICAgICAgaGVhZGVyRWwuc2V0QXR0cmlidXRlKCdyb2xlJywgUk9MRV9OT05FKTtcbiAgICAgICAgaGVhZGVyRWwuY2xhc3NMaXN0LmFkZCgnaGVhZGVyLWNvbGxhcHNlLWNvbmRlbnNlLWluYWN0aXZlJyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc21hbGwgdGl0bGUgc2hvdWxkIG9ubHkgYmUgYWNjZXNzZWQgYnkgc2NyZWVuIHJlYWRlcnNcbiAgICAgICAgICogd2hlbiB0aGUgbGFyZ2UgdGl0bGUgY29sbGFwc2VzIGludG8gdGhlIHNtYWxsIHRpdGxlIGR1ZVxuICAgICAgICAgKiB0byBzY3JvbGxpbmcuXG4gICAgICAgICAqXG4gICAgICAgICAqIE9yaWdpbmFsbHksIHRoZSBoZWFkZXIgd2FzIGdpdmVuIGBhcmlhLWhpZGRlbj1cInRydWVcImBcbiAgICAgICAgICogYnV0IHRoaXMgY2F1c2VkIGlzc3VlcyB3aXRoIHNjcmVlbiByZWFkZXJzIG5vdCBiZWluZ1xuICAgICAgICAgKiBhYmxlIHRvIGFjY2VzcyBhbnkgZm9jdXNhYmxlIGVsZW1lbnRzIHdpdGhpbiB0aGUgaGVhZGVyLlxuICAgICAgICAgKi9cbiAgICAgICAgaW9uVGl0bGVzLmZvckVhY2goKGlvblRpdGxlKSA9PiB7XG4gICAgICAgICAgICBpZiAoaW9uVGl0bGUpIHtcbiAgICAgICAgICAgICAgICBpb25UaXRsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufTtcbmNvbnN0IHNjYWxlTGFyZ2VUaXRsZXMgPSAodG9vbGJhcnMgPSBbXSwgc2NhbGUgPSAxLCB0cmFuc2l0aW9uID0gZmFsc2UpID0+IHtcbiAgICB0b29sYmFycy5mb3JFYWNoKCh0b29sYmFyKSA9PiB7XG4gICAgICAgIGNvbnN0IGlvblRpdGxlID0gdG9vbGJhci5pb25UaXRsZUVsO1xuICAgICAgICBjb25zdCB0aXRsZURpdiA9IHRvb2xiYXIuaW5uZXJUaXRsZUVsO1xuICAgICAgICBpZiAoIWlvblRpdGxlIHx8IGlvblRpdGxlLnNpemUgIT09ICdsYXJnZScpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aXRsZURpdi5zdHlsZS50cmFuc2l0aW9uID0gdHJhbnNpdGlvbiA/IFRSQU5TSVRJT04gOiAnJztcbiAgICAgICAgdGl0bGVEaXYuc3R5bGUudHJhbnNmb3JtID0gYHNjYWxlM2QoJHtzY2FsZX0sICR7c2NhbGV9LCAxKWA7XG4gICAgfSk7XG59O1xuY29uc3QgaGFuZGxlSGVhZGVyRmFkZSA9IChzY3JvbGxFbCwgYmFzZUVsLCBjb25kZW5zZUhlYWRlcikgPT4ge1xuICAgIHJlYWRUYXNrKCgpID0+IHtcbiAgICAgICAgY29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsRWwuc2Nyb2xsVG9wO1xuICAgICAgICBjb25zdCBiYXNlRWxIZWlnaHQgPSBiYXNlRWwuY2xpZW50SGVpZ2h0O1xuICAgICAgICBjb25zdCBmYWRlU3RhcnQgPSBjb25kZW5zZUhlYWRlciA/IGNvbmRlbnNlSGVhZGVyLmNsaWVudEhlaWdodCA6IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB3ZSBhcmUgdXNpbmcgZmFkZSBoZWFkZXIgd2l0aCBhIGNvbmRlbnNlXG4gICAgICAgICAqIGhlYWRlciwgdGhlbiB0aGUgdG9vbGJhciBiYWNrZ3JvdW5kcyBzaG91bGRcbiAgICAgICAgICogbm90IGJlZ2luIHRvIGZhZGUgaW4gdW50aWwgdGhlIGNvbmRlbnNlXG4gICAgICAgICAqIGhlYWRlciBoYXMgZnVsbHkgY29sbGFwc2VkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBBZGRpdGlvbmFsbHksIHRoZSBtYWluIGNvbnRlbnQgc2hvdWxkIG5vdFxuICAgICAgICAgKiBvdmVyZmxvdyBvdXQgb2YgdGhlIGNvbnRhaW5lciB1bnRpbCB0aGVcbiAgICAgICAgICogY29uZGVuc2UgaGVhZGVyIGhhcyBmdWxseSBjb2xsYXBzZWQuIFdoZW5cbiAgICAgICAgICogdXNpbmcganVzdCB0aGUgY29uZGVuc2UgaGVhZGVyIHRoZSBjb250ZW50XG4gICAgICAgICAqIHNob3VsZCBvdmVyZmxvdyBvdXQgb2YgdGhlIGNvbnRhaW5lci5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChjb25kZW5zZUhlYWRlciAhPT0gbnVsbCAmJiBzY3JvbGxUb3AgPCBmYWRlU3RhcnQpIHtcbiAgICAgICAgICAgIGJhc2VFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1vcGFjaXR5LXNjYWxlJywgJzAnKTtcbiAgICAgICAgICAgIHNjcm9sbEVsLnN0eWxlLnNldFByb3BlcnR5KCdjbGlwLXBhdGgnLCBgaW5zZXQoJHtiYXNlRWxIZWlnaHR9cHggMHB4IDBweCAwcHgpYCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGlzdGFuY2VUb1N0YXJ0ID0gc2Nyb2xsVG9wIC0gZmFkZVN0YXJ0O1xuICAgICAgICBjb25zdCBmYWRlRHVyYXRpb24gPSAxMDtcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBjbGFtcCgwLCBkaXN0YW5jZVRvU3RhcnQgLyBmYWRlRHVyYXRpb24sIDEpO1xuICAgICAgICB3cml0ZVRhc2soKCkgPT4ge1xuICAgICAgICAgICAgc2Nyb2xsRWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NsaXAtcGF0aCcpO1xuICAgICAgICAgICAgYmFzZUVsLnN0eWxlLnNldFByb3BlcnR5KCctLW9wYWNpdHktc2NhbGUnLCBzY2FsZS50b1N0cmluZygpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuLyoqXG4gKiBHZXQgdGhlIHJvbGUgdHlwZSBmb3IgdGhlIGlvbi1oZWFkZXIuXG4gKlxuICogQHBhcmFtIGlzSW5zaWRlTWVudSBJZiBpb24taGVhZGVyIGlzIGluc2lkZSBpb24tbWVudS5cbiAqIEBwYXJhbSBpc0NvbmRlbnNlZCBJZiBpb24taGVhZGVyIGhhcyBjb2xsYXBzZT1cImNvbmRlbnNlXCIuXG4gKiBAcGFyYW0gbW9kZSBUaGUgY3VycmVudCBtb2RlLlxuICogQHJldHVybnMgJ25vbmUnIGlmIGluc2lkZSBpb24tbWVudSBvciBpZiBjb25kZW5zZWQgaW4gbWRcbiAqIG1vZGUsIG90aGVyd2lzZSAnYmFubmVyJy5cbiAqL1xuY29uc3QgZ2V0Um9sZVR5cGUgPSAoaXNJbnNpZGVNZW51LCBpc0NvbmRlbnNlZCwgbW9kZSkgPT4ge1xuICAgIC8vIElmIHRoZSBoZWFkZXIgaXMgaW5zaWRlIGEgbWVudSwgaXQgc2hvdWxkIG5vdCBoYXZlIHRoZSBiYW5uZXIgcm9sZS5cbiAgICBpZiAoaXNJbnNpZGVNZW51KSB7XG4gICAgICAgIHJldHVybiBST0xFX05PTkU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9ubHkgYXBwbHkgcm9sZT1cIm5vbmVcIiB0byBgbWRgIG1vZGUgY29uZGVuc2VkIGhlYWRlcnNcbiAgICAgKiBzaW5jZSB0aGUgbGFyZ2UgaGVhZGVyIGlzIG5ldmVyIHNob3duLlxuICAgICAqL1xuICAgIGlmIChpc0NvbmRlbnNlZCAmJiBtb2RlID09PSAnbWQnKSB7XG4gICAgICAgIHJldHVybiBST0xFX05PTkU7XG4gICAgfVxuICAgIC8vIERlZmF1bHQgdG8gYmFubmVyIHJvbGUuXG4gICAgcmV0dXJuIFJPTEVfQkFOTkVSO1xufTtcblxuY29uc3QgaGVhZGVySW9zQ3NzID0gXCJpb24taGVhZGVye2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246cmVsYXRpdmU7LW1zLWZsZXgtb3JkZXI6LTE7b3JkZXI6LTE7d2lkdGg6MTAwJTt6LWluZGV4OjEwfWlvbi1oZWFkZXIgaW9uLXRvb2xiYXI6Zmlyc3Qtb2YtdHlwZXtwYWRkaW5nLXRvcDp2YXIoLS1pb24tc2FmZS1hcmVhLXRvcCwgMCl9LmhlYWRlci1pb3MgaW9uLXRvb2xiYXI6bGFzdC1vZi10eXBley0tYm9yZGVyLXdpZHRoOjAgMCAwLjU1cHh9QHN1cHBvcnRzICgoLXdlYmtpdC1iYWNrZHJvcC1maWx0ZXI6IGJsdXIoMCkpIG9yIChiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMCkpKXsuaGVhZGVyLWJhY2tncm91bmR7bGVmdDowO3JpZ2h0OjA7dG9wOjA7Ym90dG9tOjA7cG9zaXRpb246YWJzb2x1dGU7LXdlYmtpdC1iYWNrZHJvcC1maWx0ZXI6c2F0dXJhdGUoMTgwJSkgYmx1cigyMHB4KTtiYWNrZHJvcC1maWx0ZXI6c2F0dXJhdGUoMTgwJSkgYmx1cigyMHB4KX0uaGVhZGVyLXRyYW5zbHVjZW50LWlvcyBpb24tdG9vbGJhcnstLW9wYWNpdHk6Ljh9LmhlYWRlci1jb2xsYXBzZS1jb25kZW5zZS1pbmFjdGl2ZSAuaGVhZGVyLWJhY2tncm91bmR7LXdlYmtpdC1iYWNrZHJvcC1maWx0ZXI6Ymx1cigyMHB4KTtiYWNrZHJvcC1maWx0ZXI6Ymx1cigyMHB4KX19LmhlYWRlci1pb3MuaW9uLW5vLWJvcmRlciBpb24tdG9vbGJhcjpsYXN0LW9mLXR5cGV7LS1ib3JkZXItd2lkdGg6MH0uaGVhZGVyLWNvbGxhcHNlLWZhZGUgaW9uLXRvb2xiYXJ7LS1vcGFjaXR5LXNjYWxlOmluaGVyaXR9LmhlYWRlci1jb2xsYXBzZS1mYWRlLmhlYWRlci10cmFuc2l0aW9uaW5nIGlvbi10b29sYmFyey0tYmFja2dyb3VuZDp0cmFuc3BhcmVudDstLWJvcmRlci1zdHlsZTpub25lfS5oZWFkZXItY29sbGFwc2UtY29uZGVuc2V7ei1pbmRleDo5fS5oZWFkZXItY29sbGFwc2UtY29uZGVuc2UgaW9uLXRvb2xiYXJ7cG9zaXRpb246LXdlYmtpdC1zdGlja3k7cG9zaXRpb246c3RpY2t5O3RvcDowfS5oZWFkZXItY29sbGFwc2UtY29uZGVuc2UgaW9uLXRvb2xiYXI6Zmlyc3Qtb2YtdHlwZXtwYWRkaW5nLXRvcDowcHg7ei1pbmRleDoxfS5oZWFkZXItY29sbGFwc2UtY29uZGVuc2UgaW9uLXRvb2xiYXJ7ei1pbmRleDowfS5oZWFkZXItY29sbGFwc2UtY29uZGVuc2UgaW9uLXRvb2xiYXI6bGFzdC1vZi10eXBley0tYm9yZGVyLXdpZHRoOjBweH0uaGVhZGVyLWNvbGxhcHNlLWNvbmRlbnNlIGlvbi10b29sYmFyIGlvbi1zZWFyY2hiYXJ7cGFkZGluZy10b3A6MHB4O3BhZGRpbmctYm90dG9tOjEzcHh9LmhlYWRlci1jb2xsYXBzZS1tYWluey0tb3BhY2l0eS1zY2FsZToxfS5oZWFkZXItY29sbGFwc2UtbWFpbiBpb24tdG9vbGJhcnstLW9wYWNpdHktc2NhbGU6aW5oZXJpdH0uaGVhZGVyLWNvbGxhcHNlLW1haW4gaW9uLXRvb2xiYXIuaW4tdG9vbGJhciBpb24tdGl0bGUsLmhlYWRlci1jb2xsYXBzZS1tYWluIGlvbi10b29sYmFyLmluLXRvb2xiYXIgaW9uLWJ1dHRvbnN7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAwLjJzIGVhc2UtaW4tb3V0O3RyYW5zaXRpb246YWxsIDAuMnMgZWFzZS1pbi1vdXR9LmhlYWRlci1jb2xsYXBzZS1jb25kZW5zZSBpb24tdG9vbGJhciwuaGVhZGVyLWNvbGxhcHNlLWNvbmRlbnNlLWluYWN0aXZlLmhlYWRlci10cmFuc2l0aW9uaW5nOm5vdCguaGVhZGVyLWNvbGxhcHNlLWNvbmRlbnNlKSBpb24tdG9vbGJhcnstLWJhY2tncm91bmQ6dmFyKC0taW9uLWJhY2tncm91bmQtY29sb3IsICNmZmYpfS5oZWFkZXItY29sbGFwc2UtY29uZGVuc2UtaW5hY3RpdmUuaGVhZGVyLXRyYW5zaXRpb25pbmc6bm90KC5oZWFkZXItY29sbGFwc2UtY29uZGVuc2UpIGlvbi10b29sYmFyey0tYm9yZGVyLXN0eWxlOm5vbmU7LS1vcGFjaXR5LXNjYWxlOjF9LmhlYWRlci1jb2xsYXBzZS1jb25kZW5zZS1pbmFjdGl2ZTpub3QoLmhlYWRlci1jb2xsYXBzZS1jb25kZW5zZSkgaW9uLXRvb2xiYXIuaW4tdG9vbGJhciBpb24tdGl0bGUsLmhlYWRlci1jb2xsYXBzZS1jb25kZW5zZS1pbmFjdGl2ZTpub3QoLmhlYWRlci1jb2xsYXBzZS1jb25kZW5zZSkgaW9uLXRvb2xiYXIuaW4tdG9vbGJhciBpb24tYnV0dG9ucy5idXR0b25zLWNvbGxhcHNle29wYWNpdHk6MDtwb2ludGVyLWV2ZW50czpub25lfS5oZWFkZXItY29sbGFwc2UtY29uZGVuc2UtaW5hY3RpdmUuaGVhZGVyLWNvbGxhcHNlLWNvbmRlbnNlIGlvbi10b29sYmFyLmluLXRvb2xiYXIgaW9uLXRpdGxlLC5oZWFkZXItY29sbGFwc2UtY29uZGVuc2UtaW5hY3RpdmUuaGVhZGVyLWNvbGxhcHNlLWNvbmRlbnNlIGlvbi10b29sYmFyLmluLXRvb2xiYXIgaW9uLWJ1dHRvbnMuYnV0dG9ucy1jb2xsYXBzZXt2aXNpYmlsaXR5OmhpZGRlbn1pb24taGVhZGVyLmhlYWRlci1pb3M6bm90KC5oZWFkZXItY29sbGFwc2UtbWFpbik6aGFzKH5pb24tY29udGVudCBpb24taGVhZGVyLmhlYWRlci1pb3NbY29sbGFwc2U9Y29uZGVuc2VdLH5pb24tY29udGVudCBpb24taGVhZGVyLmhlYWRlci1pb3MuaGVhZGVyLWNvbGxhcHNlLWNvbmRlbnNlKXtvcGFjaXR5OjB9XCI7XG5cbmNvbnN0IGhlYWRlck1kQ3NzID0gXCJpb24taGVhZGVye2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246cmVsYXRpdmU7LW1zLWZsZXgtb3JkZXI6LTE7b3JkZXI6LTE7d2lkdGg6MTAwJTt6LWluZGV4OjEwfWlvbi1oZWFkZXIgaW9uLXRvb2xiYXI6Zmlyc3Qtb2YtdHlwZXtwYWRkaW5nLXRvcDp2YXIoLS1pb24tc2FmZS1hcmVhLXRvcCwgMCl9LmhlYWRlci1tZHstd2Via2l0LWJveC1zaGFkb3c6MCAycHggNHB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjIpLCAwIDRweCA1cHggMCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwIDFweCAxMHB4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKTtib3gtc2hhZG93OjAgMnB4IDRweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4yKSwgMCA0cHggNXB4IDAgcmdiYSgwLCAwLCAwLCAwLjE0KSwgMCAxcHggMTBweCAwIHJnYmEoMCwgMCwgMCwgMC4xMil9LmhlYWRlci1jb2xsYXBzZS1jb25kZW5zZXtkaXNwbGF5Om5vbmV9LmhlYWRlci1tZC5pb24tbm8tYm9yZGVyey13ZWJraXQtYm94LXNoYWRvdzpub25lO2JveC1zaGFkb3c6bm9uZX1cIjtcblxuY29uc3QgSGVhZGVyID0gLypAX19QVVJFX18qLyBwcm94eUN1c3RvbUVsZW1lbnQoY2xhc3MgSGVhZGVyIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKHJlZ2lzdGVySG9zdCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAocmVnaXN0ZXJIb3N0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5fX3JlZ2lzdGVySG9zdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5oZXJpdGVkQXR0cmlidXRlcyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgYHRydWVgLCB0aGUgaGVhZGVyIHdpbGwgYmUgdHJhbnNsdWNlbnQuXG4gICAgICAgICAqIE9ubHkgYXBwbGllcyB3aGVuIHRoZSBtb2RlIGlzIGBcImlvc1wiYCBhbmQgdGhlIGRldmljZSBzdXBwb3J0c1xuICAgICAgICAgKiBbYGJhY2tkcm9wLWZpbHRlcmBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9iYWNrZHJvcC1maWx0ZXIjQnJvd3Nlcl9jb21wYXRpYmlsaXR5KS5cbiAgICAgICAgICpcbiAgICAgICAgICogTm90ZTogSW4gb3JkZXIgdG8gc2Nyb2xsIGNvbnRlbnQgYmVoaW5kIHRoZSBoZWFkZXIsIHRoZSBgZnVsbHNjcmVlbmBcbiAgICAgICAgICogYXR0cmlidXRlIG5lZWRzIHRvIGJlIHNldCBvbiB0aGUgY29udGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJhbnNsdWNlbnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZXR1cEZhZGVIZWFkZXIgPSBhc3luYyAoY29udGVudEVsLCBjb25kZW5zZUhlYWRlcikgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsRWwgPSAodGhpcy5zY3JvbGxFbCA9IGF3YWl0IGdldFNjcm9sbEVsZW1lbnQoY29udGVudEVsKSk7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEhhbmRsZSBmYWRpbmcgb2YgdG9vbGJhcnMgb24gc2Nyb2xsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuY29udGVudFNjcm9sbENhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGhhbmRsZUhlYWRlckZhZGUodGhpcy5zY3JvbGxFbCwgdGhpcy5lbCwgY29uZGVuc2VIZWFkZXIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNjcm9sbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuY29udGVudFNjcm9sbENhbGxiYWNrKTtcbiAgICAgICAgICAgIGhhbmRsZUhlYWRlckZhZGUodGhpcy5zY3JvbGxFbCwgdGhpcy5lbCwgY29uZGVuc2VIZWFkZXIpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgdGhpcy5pbmhlcml0ZWRBdHRyaWJ1dGVzID0gaW5oZXJpdEFyaWFBdHRyaWJ1dGVzKHRoaXMuZWwpO1xuICAgIH1cbiAgICBjb21wb25lbnREaWRMb2FkKCkge1xuICAgICAgICB0aGlzLmNoZWNrQ29sbGFwc2libGVIZWFkZXIoKTtcbiAgICB9XG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICB0aGlzLmNoZWNrQ29sbGFwc2libGVIZWFkZXIoKTtcbiAgICB9XG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveUNvbGxhcHNpYmxlSGVhZGVyKCk7XG4gICAgfVxuICAgIGFzeW5jIGNoZWNrQ29sbGFwc2libGVIZWFkZXIoKSB7XG4gICAgICAgIGNvbnN0IG1vZGUgPSBnZXRJb25Nb2RlKHRoaXMpO1xuICAgICAgICBpZiAobW9kZSAhPT0gJ2lvcycpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGNvbGxhcHNlIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBoYXNDb25kZW5zZSA9IGNvbGxhcHNlID09PSAnY29uZGVuc2UnO1xuICAgICAgICBjb25zdCBoYXNGYWRlID0gY29sbGFwc2UgPT09ICdmYWRlJztcbiAgICAgICAgdGhpcy5kZXN0cm95Q29sbGFwc2libGVIZWFkZXIoKTtcbiAgICAgICAgaWYgKGhhc0NvbmRlbnNlKSB7XG4gICAgICAgICAgICBjb25zdCBwYWdlRWwgPSB0aGlzLmVsLmNsb3Nlc3QoJ2lvbi1hcHAsaW9uLXBhZ2UsLmlvbi1wYWdlLHBhZ2UtaW5uZXInKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IHBhZ2VFbCA/IGZpbmRJb25Db250ZW50KHBhZ2VFbCkgOiBudWxsO1xuICAgICAgICAgICAgLy8gQ2xvbmVkIGVsZW1lbnRzIGFyZSBhbHdheXMgbmVlZGVkIGluIGlPUyB0cmFuc2l0aW9uXG4gICAgICAgICAgICB3cml0ZVRhc2soKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gY2xvbmVFbGVtZW50KCdpb24tdGl0bGUnKTtcbiAgICAgICAgICAgICAgICB0aXRsZS5zaXplID0gJ2xhcmdlJztcbiAgICAgICAgICAgICAgICBjbG9uZUVsZW1lbnQoJ2lvbi1iYWNrLWJ1dHRvbicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldHVwQ29uZGVuc2VIZWFkZXIoY29udGVudEVsLCBwYWdlRWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGhhc0ZhZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VFbCA9IHRoaXMuZWwuY2xvc2VzdCgnaW9uLWFwcCxpb24tcGFnZSwuaW9uLXBhZ2UscGFnZS1pbm5lcicpO1xuICAgICAgICAgICAgY29uc3QgY29udGVudEVsID0gcGFnZUVsID8gZmluZElvbkNvbnRlbnQocGFnZUVsKSA6IG51bGw7XG4gICAgICAgICAgICBpZiAoIWNvbnRlbnRFbCkge1xuICAgICAgICAgICAgICAgIHByaW50SW9uQ29udGVudEVycm9yTXNnKHRoaXMuZWwpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbmRlbnNlSGVhZGVyID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJ2lvbi1oZWFkZXJbY29sbGFwc2U9XCJjb25kZW5zZVwiXScpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXR1cEZhZGVIZWFkZXIoY29udGVudEVsLCBjb25kZW5zZUhlYWRlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVzdHJveUNvbGxhcHNpYmxlSGVhZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcikge1xuICAgICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNjcm9sbEVsICYmIHRoaXMuY29udGVudFNjcm9sbENhbGxiYWNrKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuY29udGVudFNjcm9sbENhbGxiYWNrKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFNjcm9sbENhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbGxhcHNpYmxlTWFpbkhlYWRlcikge1xuICAgICAgICAgICAgdGhpcy5jb2xsYXBzaWJsZU1haW5IZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGVhZGVyLWNvbGxhcHNlLW1haW4nKTtcbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2libGVNYWluSGVhZGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNldHVwQ29uZGVuc2VIZWFkZXIoY29udGVudEVsLCBwYWdlRWwpIHtcbiAgICAgICAgaWYgKCFjb250ZW50RWwgfHwgIXBhZ2VFbCkge1xuICAgICAgICAgICAgcHJpbnRJb25Db250ZW50RXJyb3JNc2codGhpcy5lbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBJbnRlcnNlY3Rpb25PYnNlcnZlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjcm9sbEVsID0gYXdhaXQgZ2V0U2Nyb2xsRWxlbWVudChjb250ZW50RWwpO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gcGFnZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lvbi1oZWFkZXInKTtcbiAgICAgICAgdGhpcy5jb2xsYXBzaWJsZU1haW5IZWFkZXIgPSBBcnJheS5mcm9tKGhlYWRlcnMpLmZpbmQoKGhlYWRlcikgPT4gaGVhZGVyLmNvbGxhcHNlICE9PSAnY29uZGVuc2UnKTtcbiAgICAgICAgaWYgKCF0aGlzLmNvbGxhcHNpYmxlTWFpbkhlYWRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1haW5IZWFkZXJJbmRleCA9IGNyZWF0ZUhlYWRlckluZGV4KHRoaXMuY29sbGFwc2libGVNYWluSGVhZGVyKTtcbiAgICAgICAgY29uc3Qgc2Nyb2xsSGVhZGVySW5kZXggPSBjcmVhdGVIZWFkZXJJbmRleCh0aGlzLmVsKTtcbiAgICAgICAgaWYgKCFtYWluSGVhZGVySW5kZXggfHwgIXNjcm9sbEhlYWRlckluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2V0SGVhZGVyQWN0aXZlKG1haW5IZWFkZXJJbmRleCwgZmFsc2UpO1xuICAgICAgICBzZXRUb29sYmFyQmFja2dyb3VuZE9wYWNpdHkobWFpbkhlYWRlckluZGV4LmVsLCAwKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZSBpbnRlcmFjdGlvbiBiZXR3ZWVuIHRvb2xiYXIgY29sbGFwc2UgYW5kXG4gICAgICAgICAqIHNob3dpbmcvaGlkaW5nIGNvbnRlbnQgaW4gdGhlIHByaW1hcnkgaW9uLWhlYWRlclxuICAgICAgICAgKiBhcyB3ZWxsIGFzIHByb2dyZXNzaXZlbHkgc2hvd2luZy9oaWRpbmcgdGhlIG1haW4gaGVhZGVyXG4gICAgICAgICAqIGJvcmRlciBhcyB0aGUgdG9wLW1vc3QgdG9vbGJhciBjb2xsYXBzZXMgb3IgZXhwYW5kcy5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IHRvb2xiYXJJbnRlcnNlY3Rpb24gPSAoZXYpID0+IHtcbiAgICAgICAgICAgIGhhbmRsZVRvb2xiYXJJbnRlcnNlY3Rpb24oZXYsIG1haW5IZWFkZXJJbmRleCwgc2Nyb2xsSGVhZGVySW5kZXgsIHRoaXMuc2Nyb2xsRWwpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKHRvb2xiYXJJbnRlcnNlY3Rpb24sIHtcbiAgICAgICAgICAgIHJvb3Q6IGNvbnRlbnRFbCxcbiAgICAgICAgICAgIHRocmVzaG9sZDogWzAuMjUsIDAuMywgMC40LCAwLjUsIDAuNiwgMC43LCAwLjgsIDAuOSwgMV0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyLm9ic2VydmUoc2Nyb2xsSGVhZGVySW5kZXgudG9vbGJhcnNbc2Nyb2xsSGVhZGVySW5kZXgudG9vbGJhcnMubGVuZ3RoIC0gMV0uZWwpO1xuICAgICAgICAvKipcbiAgICAgICAgICogSGFuZGxlIHNjYWxpbmcgb2YgbGFyZ2UgaU9TIHRpdGxlcyBhbmRcbiAgICAgICAgICogc2hvd2luZy9oaWRpbmcgYm9yZGVyIG9uIGxhc3QgdG9vbGJhclxuICAgICAgICAgKiBpbiBwcmltYXJ5IGhlYWRlclxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb250ZW50U2Nyb2xsQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBoYW5kbGVDb250ZW50U2Nyb2xsKHRoaXMuc2Nyb2xsRWwsIHNjcm9sbEhlYWRlckluZGV4LCBjb250ZW50RWwpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNjcm9sbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuY29udGVudFNjcm9sbENhbGxiYWNrKTtcbiAgICAgICAgd3JpdGVUYXNrKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbGxhcHNpYmxlTWFpbkhlYWRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzaWJsZU1haW5IZWFkZXIuY2xhc3NMaXN0LmFkZCgnaGVhZGVyLWNvbGxhcHNlLW1haW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyB0cmFuc2x1Y2VudCwgaW5oZXJpdGVkQXR0cmlidXRlcyB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgbW9kZSA9IGdldElvbk1vZGUodGhpcyk7XG4gICAgICAgIGNvbnN0IGNvbGxhcHNlID0gdGhpcy5jb2xsYXBzZSB8fCAnbm9uZSc7XG4gICAgICAgIGNvbnN0IGlzQ29uZGVuc2VkID0gY29sbGFwc2UgPT09ICdjb25kZW5zZSc7XG4gICAgICAgIC8vIGJhbm5lciByb2xlIG11c3QgYmUgYXQgdG9wIGxldmVsLCBzbyByZW1vdmUgcm9sZSBpZiBpbnNpZGUgYSBtZW51XG4gICAgICAgIGNvbnN0IHJvbGVUeXBlID0gZ2V0Um9sZVR5cGUoaG9zdENvbnRleHQoJ2lvbi1tZW51JywgdGhpcy5lbCksIGlzQ29uZGVuc2VkLCBtb2RlKTtcbiAgICAgICAgcmV0dXJuIChoKEhvc3QsIE9iamVjdC5hc3NpZ24oeyBrZXk6ICc4NjNjNDU2OGNkN2I4YzBlYzU1MTA5ZjE5M2JiYmFlZDY4YTEzNDZlJywgcm9sZTogcm9sZVR5cGUsIGNsYXNzOiB7XG4gICAgICAgICAgICAgICAgW21vZGVdOiB0cnVlLFxuICAgICAgICAgICAgICAgIC8vIFVzZWQgaW50ZXJuYWxseSBmb3Igc3R5bGluZ1xuICAgICAgICAgICAgICAgIFtgaGVhZGVyLSR7bW9kZX1gXTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBbYGhlYWRlci10cmFuc2x1Y2VudGBdOiB0aGlzLnRyYW5zbHVjZW50LFxuICAgICAgICAgICAgICAgIFtgaGVhZGVyLWNvbGxhcHNlLSR7Y29sbGFwc2V9YF06IHRydWUsXG4gICAgICAgICAgICAgICAgW2BoZWFkZXItdHJhbnNsdWNlbnQtJHttb2RlfWBdOiB0aGlzLnRyYW5zbHVjZW50LFxuICAgICAgICAgICAgfSB9LCBpbmhlcml0ZWRBdHRyaWJ1dGVzKSwgbW9kZSA9PT0gJ2lvcycgJiYgdHJhbnNsdWNlbnQgJiYgaChcImRpdlwiLCB7IGtleTogJzI1YzNiZGNlMzI4YjBiMzU2MDdkMTU0YzhiODM3NDY3OTMxM2Q4ODEnLCBjbGFzczogXCJoZWFkZXItYmFja2dyb3VuZFwiIH0pLCBoKFwic2xvdFwiLCB7IGtleTogJ2I0NGZhYjBhOWJlNzkyMGI5NjUwZGEyNjExN2M3ODNlNzUxZTE3MDInIH0pKSk7XG4gICAgfVxuICAgIGdldCBlbCgpIHsgcmV0dXJuIHRoaXM7IH1cbiAgICBzdGF0aWMgZ2V0IHN0eWxlKCkgeyByZXR1cm4ge1xuICAgICAgICBpb3M6IGhlYWRlcklvc0NzcyxcbiAgICAgICAgbWQ6IGhlYWRlck1kQ3NzXG4gICAgfTsgfVxufSwgWzI5MiwgXCJpb24taGVhZGVyXCIsIHtcbiAgICAgICAgXCJjb2xsYXBzZVwiOiBbMV0sXG4gICAgICAgIFwidHJhbnNsdWNlbnRcIjogWzRdXG4gICAgfV0pO1xuZnVuY3Rpb24gZGVmaW5lQ3VzdG9tRWxlbWVudCgpIHtcbiAgICBpZiAodHlwZW9mIGN1c3RvbUVsZW1lbnRzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29tcG9uZW50cyA9IFtcImlvbi1oZWFkZXJcIl07XG4gICAgY29tcG9uZW50cy5mb3JFYWNoKHRhZ05hbWUgPT4geyBzd2l0Y2ggKHRhZ05hbWUpIHtcbiAgICAgICAgY2FzZSBcImlvbi1oZWFkZXJcIjpcbiAgICAgICAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgICAgICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKHRhZ05hbWUsIEhlYWRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICB9IH0pO1xufVxuXG5leHBvcnQgeyBIZWFkZXIgYXMgSCwgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkIH07XG4iLCIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgSCBhcyBIZWFkZXIsIGQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQxIH0gZnJvbSAnLi9oZWFkZXIuanMnO1xuXG5jb25zdCBJb25IZWFkZXIgPSBIZWFkZXI7XG5jb25zdCBkZWZpbmVDdXN0b21FbGVtZW50ID0gZGVmaW5lQ3VzdG9tRWxlbWVudCQxO1xuXG5leHBvcnQgeyBJb25IZWFkZXIsIGRlZmluZUN1c3RvbUVsZW1lbnQgfTtcbiIsIi8qIVxuICogKEMpIElvbmljIGh0dHA6Ly9pb25pY2ZyYW1ld29yay5jb20gLSBNSVQgTGljZW5zZVxuICovXG4vKipcbiAqIEJhc2VkIG9uOlxuICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzM0ODAwOS95LWNvb3JkaW5hdGUtZm9yLWEtZ2l2ZW4teC1jdWJpYy1iZXppZXJcbiAqIGh0dHBzOi8vbWF0aC5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvMjY4NDYvaXMtdGhlcmUtYW4tZXhwbGljaXQtZm9ybS1mb3ItY3ViaWMtYiVDMyVBOXppZXItY3VydmVzXG4gKi9cbi8qKlxuICogRVhQRVJJTUVOVEFMXG4gKiBHaXZlbiBhIGN1YmljLWJlemllciBjdXJ2ZSwgZ2V0IHRoZSB4IHZhbHVlICh0aW1lKSBnaXZlblxuICogdGhlIHkgdmFsdWUgKHByb2dyZXNzaW9uKS5cbiAqIEV4OiBjdWJpYy1iZXppZXIoMC4zMiwgMC43MiwgMCwgMSk7XG4gKiBQMDogKDAsIDApXG4gKiBQMTogKDAuMzIsIDAuNzIpXG4gKiBQMjogKDAsIDEpXG4gKiBQMzogKDEsIDEpXG4gKlxuICogSWYgeW91IGdpdmUgYSBjdWJpYyBiZXppZXIgY3VydmUgdGhhdCBuZXZlciByZWFjaGVzIHRoZVxuICogcHJvdmlkZWQgcHJvZ3Jlc3Npb24sIHRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gYW4gZW1wdHkgYXJyYXkuXG4gKi9cbmNvbnN0IGdldFRpbWVHaXZlblByb2dyZXNzaW9uID0gKHAwLCBwMSwgcDIsIHAzLCBwcm9ncmVzc2lvbikgPT4ge1xuICAgIHJldHVybiBzb2x2ZUN1YmljQmV6aWVyKHAwWzFdLCBwMVsxXSwgcDJbMV0sIHAzWzFdLCBwcm9ncmVzc2lvbikubWFwKCh0VmFsdWUpID0+IHtcbiAgICAgICAgcmV0dXJuIHNvbHZlQ3ViaWNQYXJhbWV0cmljRXF1YXRpb24ocDBbMF0sIHAxWzBdLCBwMlswXSwgcDNbMF0sIHRWYWx1ZSk7XG4gICAgfSk7XG59O1xuLyoqXG4gKiBTb2x2ZSBhIGN1YmljIGVxdWF0aW9uIGluIG9uZSBkaW1lbnNpb24gKHRpbWUpXG4gKi9cbmNvbnN0IHNvbHZlQ3ViaWNQYXJhbWV0cmljRXF1YXRpb24gPSAocDAsIHAxLCBwMiwgcDMsIHQpID0+IHtcbiAgICBjb25zdCBwYXJ0QSA9IDMgKiBwMSAqIE1hdGgucG93KHQgLSAxLCAyKTtcbiAgICBjb25zdCBwYXJ0QiA9IC0zICogcDIgKiB0ICsgMyAqIHAyICsgcDMgKiB0O1xuICAgIGNvbnN0IHBhcnRDID0gcDAgKiBNYXRoLnBvdyh0IC0gMSwgMyk7XG4gICAgcmV0dXJuIHQgKiAocGFydEEgKyB0ICogcGFydEIpIC0gcGFydEM7XG59O1xuLyoqXG4gKiBGaW5kIHRoZSBgdGAgdmFsdWUgZm9yIGEgY3ViaWMgYmV6aWVyIHVzaW5nIENhcmRhbm8ncyBmb3JtdWxhXG4gKi9cbmNvbnN0IHNvbHZlQ3ViaWNCZXppZXIgPSAocDAsIHAxLCBwMiwgcDMsIHJlZlBvaW50KSA9PiB7XG4gICAgcDAgLT0gcmVmUG9pbnQ7XG4gICAgcDEgLT0gcmVmUG9pbnQ7XG4gICAgcDIgLT0gcmVmUG9pbnQ7XG4gICAgcDMgLT0gcmVmUG9pbnQ7XG4gICAgY29uc3Qgcm9vdHMgPSBzb2x2ZUN1YmljRXF1YXRpb24ocDMgLSAzICogcDIgKyAzICogcDEgLSBwMCwgMyAqIHAyIC0gNiAqIHAxICsgMyAqIHAwLCAzICogcDEgLSAzICogcDAsIHAwKTtcbiAgICByZXR1cm4gcm9vdHMuZmlsdGVyKChyb290KSA9PiByb290ID49IDAgJiYgcm9vdCA8PSAxKTtcbn07XG5jb25zdCBzb2x2ZVF1YWRyYXRpY0VxdWF0aW9uID0gKGEsIGIsIGMpID0+IHtcbiAgICBjb25zdCBkaXNjcmltaW5hbnQgPSBiICogYiAtIDQgKiBhICogYztcbiAgICBpZiAoZGlzY3JpbWluYW50IDwgMCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gWygtYiArIE1hdGguc3FydChkaXNjcmltaW5hbnQpKSAvICgyICogYSksICgtYiAtIE1hdGguc3FydChkaXNjcmltaW5hbnQpKSAvICgyICogYSldO1xuICAgIH1cbn07XG5jb25zdCBzb2x2ZUN1YmljRXF1YXRpb24gPSAoYSwgYiwgYywgZCkgPT4ge1xuICAgIGlmIChhID09PSAwKSB7XG4gICAgICAgIHJldHVybiBzb2x2ZVF1YWRyYXRpY0VxdWF0aW9uKGIsIGMsIGQpO1xuICAgIH1cbiAgICBiIC89IGE7XG4gICAgYyAvPSBhO1xuICAgIGQgLz0gYTtcbiAgICBjb25zdCBwID0gKDMgKiBjIC0gYiAqIGIpIC8gMztcbiAgICBjb25zdCBxID0gKDIgKiBiICogYiAqIGIgLSA5ICogYiAqIGMgKyAyNyAqIGQpIC8gMjc7XG4gICAgaWYgKHAgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFtNYXRoLnBvdygtcSwgMSAvIDMpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAocSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW01hdGguc3FydCgtcCksIC1NYXRoLnNxcnQoLXApXTtcbiAgICB9XG4gICAgY29uc3QgZGlzY3JpbWluYW50ID0gTWF0aC5wb3cocSAvIDIsIDIpICsgTWF0aC5wb3cocCAvIDMsIDMpO1xuICAgIGlmIChkaXNjcmltaW5hbnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFtNYXRoLnBvdyhxIC8gMiwgMSAvIDIpIC0gYiAvIDNdO1xuICAgIH1cbiAgICBlbHNlIGlmIChkaXNjcmltaW5hbnQgPiAwKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBNYXRoLnBvdygtKHEgLyAyKSArIE1hdGguc3FydChkaXNjcmltaW5hbnQpLCAxIC8gMykgLSBNYXRoLnBvdyhxIC8gMiArIE1hdGguc3FydChkaXNjcmltaW5hbnQpLCAxIC8gMykgLSBiIC8gMyxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgY29uc3QgciA9IE1hdGguc3FydChNYXRoLnBvdygtKHAgLyAzKSwgMykpO1xuICAgIGNvbnN0IHBoaSA9IE1hdGguYWNvcygtKHEgLyAoMiAqIE1hdGguc3FydChNYXRoLnBvdygtKHAgLyAzKSwgMykpKSkpO1xuICAgIGNvbnN0IHMgPSAyICogTWF0aC5wb3cociwgMSAvIDMpO1xuICAgIHJldHVybiBbXG4gICAgICAgIHMgKiBNYXRoLmNvcyhwaGkgLyAzKSAtIGIgLyAzLFxuICAgICAgICBzICogTWF0aC5jb3MoKHBoaSArIDIgKiBNYXRoLlBJKSAvIDMpIC0gYiAvIDMsXG4gICAgICAgIHMgKiBNYXRoLmNvcygocGhpICsgNCAqIE1hdGguUEkpIC8gMykgLSBiIC8gMyxcbiAgICBdO1xufTtcblxuZXhwb3J0IHsgZ2V0VGltZUdpdmVuUHJvZ3Jlc3Npb24gYXMgZyB9O1xuIiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IHByb3h5Q3VzdG9tRWxlbWVudCwgSFRNTEVsZW1lbnQsIGNyZWF0ZUV2ZW50LCBoLCBIb3N0IH0gZnJvbSAnQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9jbGllbnQnO1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVDb2xvckNsYXNzZXMgfSBmcm9tICcuL3RoZW1lLmpzJztcbmltcG9ydCB7IGIgYXMgZ2V0SW9uTW9kZSB9IGZyb20gJy4vaW9uaWMtZ2xvYmFsLmpzJztcblxuY29uc3QgdGl0bGVJb3NDc3MgPSBcIjpob3N0ey0tY29sb3I6aW5pdGlhbDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstbXMtZmxleDoxO2ZsZXg6MTstbXMtZmxleC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVooMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVooMCk7Y29sb3I6dmFyKC0tY29sb3IpfTpob3N0KC5pb24tY29sb3Ipe2NvbG9yOnZhcigtLWlvbi1jb2xvci1iYXNlKX0udG9vbGJhci10aXRsZXtkaXNwbGF5OmJsb2NrO3dpZHRoOjEwMCU7dGV4dC1vdmVyZmxvdzplbGxpcHNpczt3aGl0ZS1zcGFjZTpub3dyYXA7b3ZlcmZsb3c6aGlkZGVuO3BvaW50ZXItZXZlbnRzOmF1dG99Omhvc3QoLnRpdGxlLXNtYWxsKSAudG9vbGJhci10aXRsZXt3aGl0ZS1zcGFjZTpub3JtYWx9Omhvc3R7dG9wOjA7LXdlYmtpdC1wYWRkaW5nLXN0YXJ0OjkwcHg7cGFkZGluZy1pbmxpbmUtc3RhcnQ6OTBweDstd2Via2l0LXBhZGRpbmctZW5kOjkwcHg7cGFkZGluZy1pbmxpbmUtZW5kOjkwcHg7cGFkZGluZy10b3A6dmFyKC0tcGFkZGluZy10b3ApO3BhZGRpbmctYm90dG9tOnZhcigtLXBhZGRpbmctYm90dG9tKTtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVooMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVooMCk7Zm9udC1zaXplOm1pbigxLjA2MjVyZW0sIDIwLjRweCk7Zm9udC13ZWlnaHQ6NjAwO3RleHQtYWxpZ246Y2VudGVyOy13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwb2ludGVyLWV2ZW50czpub25lfTpob3N0e2luc2V0LWlubGluZS1zdGFydDowfTpob3N0KC50aXRsZS1zbWFsbCl7LXdlYmtpdC1wYWRkaW5nLXN0YXJ0OjlweDtwYWRkaW5nLWlubGluZS1zdGFydDo5cHg7LXdlYmtpdC1wYWRkaW5nLWVuZDo5cHg7cGFkZGluZy1pbmxpbmUtZW5kOjlweDtwYWRkaW5nLXRvcDo2cHg7cGFkZGluZy1ib3R0b206MTZweDtwb3NpdGlvbjpyZWxhdGl2ZTtmb250LXNpemU6bWluKDAuODEyNXJlbSwgMjMuNHB4KTtmb250LXdlaWdodDpub3JtYWx9Omhvc3QoLnRpdGxlLWxhcmdlKXstd2Via2l0LXBhZGRpbmctc3RhcnQ6MTJweDtwYWRkaW5nLWlubGluZS1zdGFydDoxMnB4Oy13ZWJraXQtcGFkZGluZy1lbmQ6MTJweDtwYWRkaW5nLWlubGluZS1lbmQ6MTJweDtwYWRkaW5nLXRvcDoycHg7cGFkZGluZy1ib3R0b206NHB4Oy13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjpsZWZ0IGNlbnRlcjt0cmFuc2Zvcm0tb3JpZ2luOmxlZnQgY2VudGVyO3Bvc2l0aW9uOnN0YXRpYzstbXMtZmxleC1hbGlnbjplbmQ7YWxpZ24taXRlbXM6ZmxleC1lbmQ7bWluLXdpZHRoOjEwMCU7Zm9udC1zaXplOm1pbigyLjEyNXJlbSwgNjEuMnB4KTtmb250LXdlaWdodDo3MDA7dGV4dC1hbGlnbjpzdGFydH06aG9zdCgudGl0bGUtbGFyZ2UudGl0bGUtcnRsKXstd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46cmlnaHQgY2VudGVyO3RyYW5zZm9ybS1vcmlnaW46cmlnaHQgY2VudGVyfTpob3N0KC50aXRsZS1sYXJnZS5pb24tY2xvbmVkLWVsZW1lbnQpey0tY29sb3I6dmFyKC0taW9uLXRleHQtY29sb3IsICMwMDApO2ZvbnQtZmFtaWx5OnZhcigtLWlvbi1mb250LWZhbWlseSl9Omhvc3QoLnRpdGxlLWxhcmdlKSAudG9vbGJhci10aXRsZXstd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46aW5oZXJpdDt0cmFuc2Zvcm0tb3JpZ2luOmluaGVyaXQ7d2lkdGg6YXV0b306aG9zdC1jb250ZXh0KFtkaXI9cnRsXSk6aG9zdCgudGl0bGUtbGFyZ2UpIC50b29sYmFyLXRpdGxlLDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKS50aXRsZS1sYXJnZSAudG9vbGJhci10aXRsZXstd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46Y2FsYygxMDAlIC0gaW5oZXJpdCk7dHJhbnNmb3JtLW9yaWdpbjpjYWxjKDEwMCUgLSBpbmhlcml0KX1Ac3VwcG9ydHMgc2VsZWN0b3IoOmRpcihydGwpKXs6aG9zdCgudGl0bGUtbGFyZ2U6ZGlyKHJ0bCkpIC50b29sYmFyLXRpdGxley13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjpjYWxjKDEwMCUgLSBpbmhlcml0KTt0cmFuc2Zvcm0tb3JpZ2luOmNhbGMoMTAwJSAtIGluaGVyaXQpfX1cIjtcblxuY29uc3QgdGl0bGVNZENzcyA9IFwiOmhvc3R7LS1jb2xvcjppbml0aWFsO2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy1tcy1mbGV4OjE7ZmxleDoxOy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWigwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWigwKTtjb2xvcjp2YXIoLS1jb2xvcil9Omhvc3QoLmlvbi1jb2xvcil7Y29sb3I6dmFyKC0taW9uLWNvbG9yLWJhc2UpfS50b29sYmFyLXRpdGxle2Rpc3BsYXk6YmxvY2s7d2lkdGg6MTAwJTt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47cG9pbnRlci1ldmVudHM6YXV0b306aG9zdCgudGl0bGUtc21hbGwpIC50b29sYmFyLXRpdGxle3doaXRlLXNwYWNlOm5vcm1hbH06aG9zdHstd2Via2l0LXBhZGRpbmctc3RhcnQ6MjBweDtwYWRkaW5nLWlubGluZS1zdGFydDoyMHB4Oy13ZWJraXQtcGFkZGluZy1lbmQ6MjBweDtwYWRkaW5nLWlubGluZS1lbmQ6MjBweDtwYWRkaW5nLXRvcDowO3BhZGRpbmctYm90dG9tOjA7Zm9udC1zaXplOjEuMjVyZW07Zm9udC13ZWlnaHQ6NTAwO2xldHRlci1zcGFjaW5nOjAuMDEyNWVtfTpob3N0KC50aXRsZS1zbWFsbCl7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtmb250LXNpemU6MC45Mzc1cmVtO2ZvbnQtd2VpZ2h0Om5vcm1hbH1cIjtcblxuY29uc3QgVG9vbGJhclRpdGxlID0gLypAX19QVVJFX18qLyBwcm94eUN1c3RvbUVsZW1lbnQoY2xhc3MgVG9vbGJhclRpdGxlIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKHJlZ2lzdGVySG9zdCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAocmVnaXN0ZXJIb3N0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5fX3JlZ2lzdGVySG9zdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX19hdHRhY2hTaGFkb3coKTtcbiAgICAgICAgdGhpcy5pb25TdHlsZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiaW9uU3R5bGVcIiwgNyk7XG4gICAgfVxuICAgIHNpemVDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLmVtaXRTdHlsZSgpO1xuICAgIH1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5lbWl0U3R5bGUoKTtcbiAgICB9XG4gICAgZW1pdFN0eWxlKCkge1xuICAgICAgICBjb25zdCBzaXplID0gdGhpcy5nZXRTaXplKCk7XG4gICAgICAgIHRoaXMuaW9uU3R5bGUuZW1pdCh7XG4gICAgICAgICAgICBbYHRpdGxlLSR7c2l6ZX1gXTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldFNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgIT09IHVuZGVmaW5lZCA/IHRoaXMuc2l6ZSA6ICdkZWZhdWx0JztcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpO1xuICAgICAgICByZXR1cm4gKGgoSG9zdCwgeyBrZXk6ICdlNTk5YzBiZjFiMDgxN2RmM2ZhODM2MGJkY2Q2ZDc4N2Y3NTFjMzcxJywgY2xhc3M6IGNyZWF0ZUNvbG9yQ2xhc3Nlcyh0aGlzLmNvbG9yLCB7XG4gICAgICAgICAgICAgICAgW21vZGVdOiB0cnVlLFxuICAgICAgICAgICAgICAgIFtgdGl0bGUtJHtzaXplfWBdOiB0cnVlLFxuICAgICAgICAgICAgICAgICd0aXRsZS1ydGwnOiBkb2N1bWVudC5kaXIgPT09ICdydGwnLFxuICAgICAgICAgICAgfSkgfSwgaChcImRpdlwiLCB7IGtleTogJzZlN2VlZTkwNDdkNjc1OTg3NmJiMzFkNzMwNWI3NmVmYzdjNDMzOGMnLCBjbGFzczogXCJ0b29sYmFyLXRpdGxlXCIgfSwgaChcInNsb3RcIiwgeyBrZXk6ICdiZjc5MGViNGM4M2RkMGFmNGYyZmQxZjg1YWI0YWY1ODE5ZjQ2ZmY0JyB9KSkpKTtcbiAgICB9XG4gICAgZ2V0IGVsKCkgeyByZXR1cm4gdGhpczsgfVxuICAgIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgICAgIFwic2l6ZVwiOiBbXCJzaXplQ2hhbmdlZFwiXVxuICAgIH07IH1cbiAgICBzdGF0aWMgZ2V0IHN0eWxlKCkgeyByZXR1cm4ge1xuICAgICAgICBpb3M6IHRpdGxlSW9zQ3NzLFxuICAgICAgICBtZDogdGl0bGVNZENzc1xuICAgIH07IH1cbn0sIFsyODksIFwiaW9uLXRpdGxlXCIsIHtcbiAgICAgICAgXCJjb2xvclwiOiBbNTEzXSxcbiAgICAgICAgXCJzaXplXCI6IFsxXVxuICAgIH0sIHVuZGVmaW5lZCwge1xuICAgICAgICBcInNpemVcIjogW1wic2l6ZUNoYW5nZWRcIl1cbiAgICB9XSk7XG5mdW5jdGlvbiBkZWZpbmVDdXN0b21FbGVtZW50KCkge1xuICAgIGlmICh0eXBlb2YgY3VzdG9tRWxlbWVudHMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb21wb25lbnRzID0gW1wiaW9uLXRpdGxlXCJdO1xuICAgIGNvbXBvbmVudHMuZm9yRWFjaCh0YWdOYW1lID0+IHsgc3dpdGNoICh0YWdOYW1lKSB7XG4gICAgICAgIGNhc2UgXCJpb24tdGl0bGVcIjpcbiAgICAgICAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgICAgICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKHRhZ05hbWUsIFRvb2xiYXJUaXRsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICB9IH0pO1xufVxuXG5leHBvcnQgeyBUb29sYmFyVGl0bGUgYXMgVCwgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkIH07XG4iLCIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgcHJveHlDdXN0b21FbGVtZW50LCBIVE1MRWxlbWVudCwgZm9yY2VVcGRhdGUsIGgsIEhvc3QgfSBmcm9tICdAc3RlbmNpbC9jb3JlL2ludGVybmFsL2NsaWVudCc7XG5pbXBvcnQgeyBjIGFzIGNyZWF0ZUNvbG9yQ2xhc3NlcywgaCBhcyBob3N0Q29udGV4dCB9IGZyb20gJy4vdGhlbWUuanMnO1xuaW1wb3J0IHsgYiBhcyBnZXRJb25Nb2RlIH0gZnJvbSAnLi9pb25pYy1nbG9iYWwuanMnO1xuXG5jb25zdCB0b29sYmFySW9zQ3NzID0gXCI6aG9zdHstLWJvcmRlci13aWR0aDowOy0tYm9yZGVyLXN0eWxlOnNvbGlkOy0tb3BhY2l0eToxOy0tb3BhY2l0eS1zY2FsZToxOy1tb3otb3N4LWZvbnQtc21vb3RoaW5nOmdyYXlzY2FsZTstd2Via2l0LWZvbnQtc21vb3RoaW5nOmFudGlhbGlhc2VkO2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246cmVsYXRpdmU7d2lkdGg6MTAwJTtwYWRkaW5nLXJpZ2h0OnZhcigtLWlvbi1zYWZlLWFyZWEtcmlnaHQpO3BhZGRpbmctbGVmdDp2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpO2NvbG9yOnZhcigtLWNvbG9yKTtmb250LWZhbWlseTp2YXIoLS1pb24tZm9udC1mYW1pbHksIGluaGVyaXQpO2NvbnRhaW46Y29udGVudDt6LWluZGV4OjEwOy13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveH06aG9zdCguaW9uLWNvbG9yKXtjb2xvcjp2YXIoLS1pb24tY29sb3ItY29udHJhc3QpfTpob3N0KC5pb24tY29sb3IpIC50b29sYmFyLWJhY2tncm91bmR7YmFja2dyb3VuZDp2YXIoLS1pb24tY29sb3ItYmFzZSl9LnRvb2xiYXItY29udGFpbmVyey13ZWJraXQtcGFkZGluZy1zdGFydDp2YXIoLS1wYWRkaW5nLXN0YXJ0KTtwYWRkaW5nLWlubGluZS1zdGFydDp2YXIoLS1wYWRkaW5nLXN0YXJ0KTstd2Via2l0LXBhZGRpbmctZW5kOnZhcigtLXBhZGRpbmctZW5kKTtwYWRkaW5nLWlubGluZS1lbmQ6dmFyKC0tcGFkZGluZy1lbmQpO3BhZGRpbmctdG9wOnZhcigtLXBhZGRpbmctdG9wKTtwYWRkaW5nLWJvdHRvbTp2YXIoLS1wYWRkaW5nLWJvdHRvbSk7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7cG9zaXRpb246cmVsYXRpdmU7LW1zLWZsZXgtZGlyZWN0aW9uOnJvdztmbGV4LWRpcmVjdGlvbjpyb3c7LW1zLWZsZXgtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjstbXMtZmxleC1wYWNrOmp1c3RpZnk7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47d2lkdGg6MTAwJTttaW4taGVpZ2h0OnZhcigtLW1pbi1oZWlnaHQpO2NvbnRhaW46Y29udGVudDtvdmVyZmxvdzpoaWRkZW47ei1pbmRleDoxMDstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3h9LnRvb2xiYXItYmFja2dyb3VuZHtsZWZ0OjA7cmlnaHQ6MDt0b3A6MDtib3R0b206MDtwb3NpdGlvbjphYnNvbHV0ZTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVaKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVaKDApO2JvcmRlci13aWR0aDp2YXIoLS1ib3JkZXItd2lkdGgpO2JvcmRlci1zdHlsZTp2YXIoLS1ib3JkZXItc3R5bGUpO2JvcmRlci1jb2xvcjp2YXIoLS1ib3JkZXItY29sb3IpO2JhY2tncm91bmQ6dmFyKC0tYmFja2dyb3VuZCk7Y29udGFpbjpzdHJpY3Q7b3BhY2l0eTpjYWxjKHZhcigtLW9wYWNpdHkpICogdmFyKC0tb3BhY2l0eS1zY2FsZSkpO3otaW5kZXg6LTE7cG9pbnRlci1ldmVudHM6bm9uZX06OnNsb3R0ZWQoaW9uLXByb2dyZXNzLWJhcil7bGVmdDowO3JpZ2h0OjA7Ym90dG9tOjA7cG9zaXRpb246YWJzb2x1dGV9Omhvc3R7LS1iYWNrZ3JvdW5kOnZhcigtLWlvbi10b29sYmFyLWJhY2tncm91bmQsIHZhcigtLWlvbi1jb2xvci1zdGVwLTUwLCB2YXIoLS1pb24tYmFja2dyb3VuZC1jb2xvci1zdGVwLTUwLCAjZjdmN2Y3KSkpOy0tY29sb3I6dmFyKC0taW9uLXRvb2xiYXItY29sb3IsIHZhcigtLWlvbi10ZXh0LWNvbG9yLCAjMDAwKSk7LS1ib3JkZXItY29sb3I6dmFyKC0taW9uLXRvb2xiYXItYm9yZGVyLWNvbG9yLCB2YXIoLS1pb24tYm9yZGVyLWNvbG9yLCB2YXIoLS1pb24tY29sb3Itc3RlcC0xNTAsIHZhcigtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yLXN0ZXAtMTUwLCByZ2JhKDAsIDAsIDAsIDAuMikpKSkpOy0tcGFkZGluZy10b3A6M3B4Oy0tcGFkZGluZy1ib3R0b206M3B4Oy0tcGFkZGluZy1zdGFydDo0cHg7LS1wYWRkaW5nLWVuZDo0cHg7LS1taW4taGVpZ2h0OjQ0cHh9LnRvb2xiYXItY29udGVudHstbXMtZmxleDoxO2ZsZXg6MTstbXMtZmxleC1vcmRlcjo0O29yZGVyOjQ7bWluLXdpZHRoOjB9Omhvc3QoLnRvb2xiYXItc2VnbWVudCkgLnRvb2xiYXItY29udGVudHtkaXNwbGF5Oi1tcy1pbmxpbmUtZmxleGJveDtkaXNwbGF5OmlubGluZS1mbGV4fTpob3N0KC50b29sYmFyLXNlYXJjaGJhcikgLnRvb2xiYXItY29udGFpbmVye3BhZGRpbmctdG9wOjA7cGFkZGluZy1ib3R0b206MH06aG9zdCgudG9vbGJhci1zZWFyY2hiYXIpIDo6c2xvdHRlZCgqKXstbXMtZmxleC1pdGVtLWFsaWduOnN0YXJ0O2FsaWduLXNlbGY6c3RhcnR9Omhvc3QoLnRvb2xiYXItc2VhcmNoYmFyKSA6OnNsb3R0ZWQoaW9uLWNoaXApe21hcmdpbi10b3A6M3B4fTo6c2xvdHRlZChpb24tYnV0dG9ucyl7bWluLWhlaWdodDozOHB4fTo6c2xvdHRlZChbc2xvdD1zdGFydF0pey1tcy1mbGV4LW9yZGVyOjI7b3JkZXI6Mn06OnNsb3R0ZWQoW3Nsb3Q9c2Vjb25kYXJ5XSl7LW1zLWZsZXgtb3JkZXI6MztvcmRlcjozfTo6c2xvdHRlZChbc2xvdD1wcmltYXJ5XSl7LW1zLWZsZXgtb3JkZXI6NTtvcmRlcjo1O3RleHQtYWxpZ246ZW5kfTo6c2xvdHRlZChbc2xvdD1lbmRdKXstbXMtZmxleC1vcmRlcjo2O29yZGVyOjY7dGV4dC1hbGlnbjplbmR9Omhvc3QoLnRvb2xiYXItdGl0bGUtbGFyZ2UpIC50b29sYmFyLWNvbnRhaW5lcnstbXMtZmxleC13cmFwOndyYXA7ZmxleC13cmFwOndyYXA7LW1zLWZsZXgtYWxpZ246c3RhcnQ7YWxpZ24taXRlbXM6ZmxleC1zdGFydH06aG9zdCgudG9vbGJhci10aXRsZS1sYXJnZSkgLnRvb2xiYXItY29udGVudCBpb24tdGl0bGV7LW1zLWZsZXg6MTtmbGV4OjE7LW1zLWZsZXgtb3JkZXI6ODtvcmRlcjo4O21pbi13aWR0aDoxMDAlfVwiO1xuXG5jb25zdCB0b29sYmFyTWRDc3MgPSBcIjpob3N0ey0tYm9yZGVyLXdpZHRoOjA7LS1ib3JkZXItc3R5bGU6c29saWQ7LS1vcGFjaXR5OjE7LS1vcGFjaXR5LXNjYWxlOjE7LW1vei1vc3gtZm9udC1zbW9vdGhpbmc6Z3JheXNjYWxlOy13ZWJraXQtZm9udC1zbW9vdGhpbmc6YW50aWFsaWFzZWQ7ZGlzcGxheTpibG9jaztwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDoxMDAlO3BhZGRpbmctcmlnaHQ6dmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCk7cGFkZGluZy1sZWZ0OnZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCk7Y29sb3I6dmFyKC0tY29sb3IpO2ZvbnQtZmFtaWx5OnZhcigtLWlvbi1mb250LWZhbWlseSwgaW5oZXJpdCk7Y29udGFpbjpjb250ZW50O3otaW5kZXg6MTA7LXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94fTpob3N0KC5pb24tY29sb3Ipe2NvbG9yOnZhcigtLWlvbi1jb2xvci1jb250cmFzdCl9Omhvc3QoLmlvbi1jb2xvcikgLnRvb2xiYXItYmFja2dyb3VuZHtiYWNrZ3JvdW5kOnZhcigtLWlvbi1jb2xvci1iYXNlKX0udG9vbGJhci1jb250YWluZXJ7LXdlYmtpdC1wYWRkaW5nLXN0YXJ0OnZhcigtLXBhZGRpbmctc3RhcnQpO3BhZGRpbmctaW5saW5lLXN0YXJ0OnZhcigtLXBhZGRpbmctc3RhcnQpOy13ZWJraXQtcGFkZGluZy1lbmQ6dmFyKC0tcGFkZGluZy1lbmQpO3BhZGRpbmctaW5saW5lLWVuZDp2YXIoLS1wYWRkaW5nLWVuZCk7cGFkZGluZy10b3A6dmFyKC0tcGFkZGluZy10b3ApO3BhZGRpbmctYm90dG9tOnZhcigtLXBhZGRpbmctYm90dG9tKTtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDtwb3NpdGlvbjpyZWxhdGl2ZTstbXMtZmxleC1kaXJlY3Rpb246cm93O2ZsZXgtZGlyZWN0aW9uOnJvdzstbXMtZmxleC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyOy1tcy1mbGV4LXBhY2s6anVzdGlmeTtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbjt3aWR0aDoxMDAlO21pbi1oZWlnaHQ6dmFyKC0tbWluLWhlaWdodCk7Y29udGFpbjpjb250ZW50O292ZXJmbG93OmhpZGRlbjt6LWluZGV4OjEwOy13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveH0udG9vbGJhci1iYWNrZ3JvdW5ke2xlZnQ6MDtyaWdodDowO3RvcDowO2JvdHRvbTowO3Bvc2l0aW9uOmFic29sdXRlOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVooMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVooMCk7Ym9yZGVyLXdpZHRoOnZhcigtLWJvcmRlci13aWR0aCk7Ym9yZGVyLXN0eWxlOnZhcigtLWJvcmRlci1zdHlsZSk7Ym9yZGVyLWNvbG9yOnZhcigtLWJvcmRlci1jb2xvcik7YmFja2dyb3VuZDp2YXIoLS1iYWNrZ3JvdW5kKTtjb250YWluOnN0cmljdDtvcGFjaXR5OmNhbGModmFyKC0tb3BhY2l0eSkgKiB2YXIoLS1vcGFjaXR5LXNjYWxlKSk7ei1pbmRleDotMTtwb2ludGVyLWV2ZW50czpub25lfTo6c2xvdHRlZChpb24tcHJvZ3Jlc3MtYmFyKXtsZWZ0OjA7cmlnaHQ6MDtib3R0b206MDtwb3NpdGlvbjphYnNvbHV0ZX06aG9zdHstLWJhY2tncm91bmQ6dmFyKC0taW9uLXRvb2xiYXItYmFja2dyb3VuZCwgdmFyKC0taW9uLWJhY2tncm91bmQtY29sb3IsICNmZmYpKTstLWNvbG9yOnZhcigtLWlvbi10b29sYmFyLWNvbG9yLCB2YXIoLS1pb24tdGV4dC1jb2xvciwgIzQyNDI0MikpOy0tYm9yZGVyLWNvbG9yOnZhcigtLWlvbi10b29sYmFyLWJvcmRlci1jb2xvciwgdmFyKC0taW9uLWJvcmRlci1jb2xvciwgdmFyKC0taW9uLWNvbG9yLXN0ZXAtMTUwLCB2YXIoLS1pb24tYmFja2dyb3VuZC1jb2xvci1zdGVwLTE1MCwgI2MxYzRjZCkpKSk7LS1wYWRkaW5nLXRvcDowOy0tcGFkZGluZy1ib3R0b206MDstLXBhZGRpbmctc3RhcnQ6MDstLXBhZGRpbmctZW5kOjA7LS1taW4taGVpZ2h0OjU2cHh9LnRvb2xiYXItY29udGVudHstbXMtZmxleDoxO2ZsZXg6MTstbXMtZmxleC1vcmRlcjozO29yZGVyOjM7bWluLXdpZHRoOjA7bWF4LXdpZHRoOjEwMCV9OjpzbG90dGVkKC5idXR0b25zLWZpcnN0LXNsb3Qpey13ZWJraXQtbWFyZ2luLXN0YXJ0OjRweDttYXJnaW4taW5saW5lLXN0YXJ0OjRweH06OnNsb3R0ZWQoLmJ1dHRvbnMtbGFzdC1zbG90KXstd2Via2l0LW1hcmdpbi1lbmQ6NHB4O21hcmdpbi1pbmxpbmUtZW5kOjRweH06OnNsb3R0ZWQoW3Nsb3Q9c3RhcnRdKXstbXMtZmxleC1vcmRlcjoyO29yZGVyOjJ9OjpzbG90dGVkKFtzbG90PXNlY29uZGFyeV0pey1tcy1mbGV4LW9yZGVyOjQ7b3JkZXI6NH06OnNsb3R0ZWQoW3Nsb3Q9cHJpbWFyeV0pey1tcy1mbGV4LW9yZGVyOjU7b3JkZXI6NTt0ZXh0LWFsaWduOmVuZH06OnNsb3R0ZWQoW3Nsb3Q9ZW5kXSl7LW1zLWZsZXgtb3JkZXI6NjtvcmRlcjo2O3RleHQtYWxpZ246ZW5kfVwiO1xuXG5jb25zdCBUb29sYmFyID0gLypAX19QVVJFX18qLyBwcm94eUN1c3RvbUVsZW1lbnQoY2xhc3MgVG9vbGJhciBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihyZWdpc3Rlckhvc3QpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgaWYgKHJlZ2lzdGVySG9zdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMuX19yZWdpc3Rlckhvc3QoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9fYXR0YWNoU2hhZG93KCk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW5TdHlsZXMgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgICAgICBjb25zdCBidXR0b25zID0gQXJyYXkuZnJvbSh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lvbi1idXR0b25zJykpO1xuICAgICAgICBjb25zdCBmaXJzdEJ1dHRvbnMgPSBidXR0b25zLmZpbmQoKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbi5zbG90ID09PSAnc3RhcnQnO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGZpcnN0QnV0dG9ucykge1xuICAgICAgICAgICAgZmlyc3RCdXR0b25zLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbnMtZmlyc3Qtc2xvdCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ1dHRvbnNSZXZlcnNlZCA9IGJ1dHRvbnMucmV2ZXJzZSgpO1xuICAgICAgICBjb25zdCBsYXN0QnV0dG9ucyA9IGJ1dHRvbnNSZXZlcnNlZC5maW5kKChidXR0b24pID0+IGJ1dHRvbi5zbG90ID09PSAnZW5kJykgfHxcbiAgICAgICAgICAgIGJ1dHRvbnNSZXZlcnNlZC5maW5kKChidXR0b24pID0+IGJ1dHRvbi5zbG90ID09PSAncHJpbWFyeScpIHx8XG4gICAgICAgICAgICBidXR0b25zUmV2ZXJzZWQuZmluZCgoYnV0dG9uKSA9PiBidXR0b24uc2xvdCA9PT0gJ3NlY29uZGFyeScpO1xuICAgICAgICBpZiAobGFzdEJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGxhc3RCdXR0b25zLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbnMtbGFzdC1zbG90Jyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hpbGRyZW5TdHlsZShldikge1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgY29uc3QgdGFnTmFtZSA9IGV2LnRhcmdldC50YWdOYW1lO1xuICAgICAgICBjb25zdCB1cGRhdGVkU3R5bGVzID0gZXYuZGV0YWlsO1xuICAgICAgICBjb25zdCBuZXdTdHlsZXMgPSB7fTtcbiAgICAgICAgY29uc3QgY2hpbGRTdHlsZXMgPSB0aGlzLmNoaWxkcmVuU3R5bGVzLmdldCh0YWdOYW1lKSB8fCB7fTtcbiAgICAgICAgbGV0IGhhc1N0eWxlQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgIE9iamVjdC5rZXlzKHVwZGF0ZWRTdHlsZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRLZXkgPSBgdG9vbGJhci0ke2tleX1gO1xuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB1cGRhdGVkU3R5bGVzW2tleV07XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IGNoaWxkU3R5bGVzW2NoaWxkS2V5XSkge1xuICAgICAgICAgICAgICAgIGhhc1N0eWxlQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIG5ld1N0eWxlc1tjaGlsZEtleV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGhhc1N0eWxlQ2hhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuU3R5bGVzLnNldCh0YWdOYW1lLCBuZXdTdHlsZXMpO1xuICAgICAgICAgICAgZm9yY2VVcGRhdGUodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICAgICAgY29uc3QgY2hpbGRTdHlsZXMgPSB7fTtcbiAgICAgICAgdGhpcy5jaGlsZHJlblN0eWxlcy5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihjaGlsZFN0eWxlcywgdmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIChoKEhvc3QsIHsga2V5OiAnZjZjNGY2NjlhNmE2MWM1ZWFjNGNiYjVlYTBhYTk3YzQ4YWU1YmQ0NicsIGNsYXNzOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNoaWxkU3R5bGVzKSwgY3JlYXRlQ29sb3JDbGFzc2VzKHRoaXMuY29sb3IsIHtcbiAgICAgICAgICAgICAgICBbbW9kZV06IHRydWUsXG4gICAgICAgICAgICAgICAgJ2luLXRvb2xiYXInOiBob3N0Q29udGV4dCgnaW9uLXRvb2xiYXInLCB0aGlzLmVsKSxcbiAgICAgICAgICAgIH0pKSB9LCBoKFwiZGl2XCIsIHsga2V5OiAnOWM4MTc0MmZmYTAyZGU5YmE3NDE3MDI1YjA3N2QwNWU2NzMwNTA3NCcsIGNsYXNzOiBcInRvb2xiYXItYmFja2dyb3VuZFwiLCBwYXJ0OiBcImJhY2tncm91bmRcIiB9KSwgaChcImRpdlwiLCB7IGtleTogJzVmYzk2ZDE2NmZhNDc4OTRhMDYyZTQxNTQxYTliZWVlMzgwNzhhMzYnLCBjbGFzczogXCJ0b29sYmFyLWNvbnRhaW5lclwiLCBwYXJ0OiBcImNvbnRhaW5lclwiIH0sIGgoXCJzbG90XCIsIHsga2V5OiAnYjYyYzBkOWQ1OWE3MDE3NmJkYmY3NjlhZWM2MDkwZDdhMTY2ODUzYicsIG5hbWU6IFwic3RhcnRcIiB9KSwgaChcInNsb3RcIiwgeyBrZXk6ICdkMDFkM2NjMmM1MGU1YWFhNDljMzQ1YjIwOWZlOGRiZGYzZDQ4MTMxJywgbmFtZTogXCJzZWNvbmRhcnlcIiB9KSwgaChcImRpdlwiLCB7IGtleTogJzNhYWEzYTI4MTBhZWRkMzhjMzdlYjYxNjE1OGVjN2I5NjM4NTI4ZmMnLCBjbGFzczogXCJ0b29sYmFyLWNvbnRlbnRcIiwgcGFydDogXCJjb250ZW50XCIgfSwgaChcInNsb3RcIiwgeyBrZXk6ICczNTcyNDY2OTBmOGQ1ZTFjYzNjYTM2OTYxMWQ0ODQ1YTc5ZWRmNjEwJyB9KSksIGgoXCJzbG90XCIsIHsga2V5OiAnMDZlZDNjY2E0ZjdlYmZmNGE1NGNkODc3ZGFkM2NjOTI1Y2NmOWY3NScsIG5hbWU6IFwicHJpbWFyeVwiIH0pLCBoKFwic2xvdFwiLCB7IGtleTogJ2U0NTNkNDNkMTRhMjZiMGQ3MmY0MWUxYjgxYTU1NGJhYjhlY2U4MTEnLCBuYW1lOiBcImVuZFwiIH0pKSkpO1xuICAgIH1cbiAgICBnZXQgZWwoKSB7IHJldHVybiB0aGlzOyB9XG4gICAgc3RhdGljIGdldCBzdHlsZSgpIHsgcmV0dXJuIHtcbiAgICAgICAgaW9zOiB0b29sYmFySW9zQ3NzLFxuICAgICAgICBtZDogdG9vbGJhck1kQ3NzXG4gICAgfTsgfVxufSwgWzI4OSwgXCJpb24tdG9vbGJhclwiLCB7XG4gICAgICAgIFwiY29sb3JcIjogWzUxM11cbiAgICB9LCBbWzAsIFwiaW9uU3R5bGVcIiwgXCJjaGlsZHJlblN0eWxlXCJdXV0pO1xuZnVuY3Rpb24gZGVmaW5lQ3VzdG9tRWxlbWVudCgpIHtcbiAgICBpZiAodHlwZW9mIGN1c3RvbUVsZW1lbnRzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29tcG9uZW50cyA9IFtcImlvbi10b29sYmFyXCJdO1xuICAgIGNvbXBvbmVudHMuZm9yRWFjaCh0YWdOYW1lID0+IHsgc3dpdGNoICh0YWdOYW1lKSB7XG4gICAgICAgIGNhc2UgXCJpb24tdG9vbGJhclwiOlxuICAgICAgICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUodGFnTmFtZSwgVG9vbGJhcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICB9IH0pO1xufVxuXG5leHBvcnQgeyBUb29sYmFyIGFzIFQsIGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZCB9O1xuIiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IFQgYXMgVG9vbGJhclRpdGxlLCBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMSB9IGZyb20gJy4vdGl0bGUuanMnO1xuXG5jb25zdCBJb25UaXRsZSA9IFRvb2xiYXJUaXRsZTtcbmNvbnN0IGRlZmluZUN1c3RvbUVsZW1lbnQgPSBkZWZpbmVDdXN0b21FbGVtZW50JDE7XG5cbmV4cG9ydCB7IElvblRpdGxlLCBkZWZpbmVDdXN0b21FbGVtZW50IH07XG4iLCIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgVCBhcyBUb29sYmFyLCBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMSB9IGZyb20gJy4vdG9vbGJhci5qcyc7XG5cbmNvbnN0IElvblRvb2xiYXIgPSBUb29sYmFyO1xuY29uc3QgZGVmaW5lQ3VzdG9tRWxlbWVudCA9IGRlZmluZUN1c3RvbUVsZW1lbnQkMTtcblxuZXhwb3J0IHsgSW9uVG9vbGJhciwgZGVmaW5lQ3VzdG9tRWxlbWVudCB9O1xuIiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IHByb3h5Q3VzdG9tRWxlbWVudCwgSFRNTEVsZW1lbnQsIGNyZWF0ZUV2ZW50LCBoIH0gZnJvbSAnQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9jbGllbnQnO1xuaW1wb3J0IHsgZyBhcyBnZXRUaW1lR2l2ZW5Qcm9ncmVzc2lvbiB9IGZyb20gJy4vY3ViaWMtYmV6aWVyLmpzJztcbmltcG9ydCB7IGEgYXMgYXR0YWNoQ29tcG9uZW50LCBkIGFzIGRldGFjaENvbXBvbmVudCB9IGZyb20gJy4vZnJhbWV3b3JrLWRlbGVnYXRlLmpzJztcbmltcG9ydCB7IHMgYXMgc2hhbGxvd0VxdWFsU3RyaW5nTWFwLCBrIGFzIGhhc0xhenlCdWlsZCB9IGZyb20gJy4vaGVscGVycy5qcyc7XG5pbXBvcnQgeyBjIGFzIGNyZWF0ZUxvY2tDb250cm9sbGVyIH0gZnJvbSAnLi9sb2NrLWNvbnRyb2xsZXIuanMnO1xuaW1wb3J0IHsgYSBhcyBwcmludElvbkVycm9yLCBjIGFzIGNvbmZpZyB9IGZyb20gJy4vaW5kZXg0LmpzJztcbmltcG9ydCB7IHQgYXMgdHJhbnNpdGlvbiB9IGZyb20gJy4vaW5kZXgyLmpzJztcbmltcG9ydCB7IGIgYXMgZ2V0SW9uTW9kZSB9IGZyb20gJy4vaW9uaWMtZ2xvYmFsLmpzJztcblxuY29uc3Qgcm91dGVyT3V0bGV0Q3NzID0gXCI6aG9zdHtsZWZ0OjA7cmlnaHQ6MDt0b3A6MDtib3R0b206MDtwb3NpdGlvbjphYnNvbHV0ZTtjb250YWluOmxheW91dCBzaXplIHN0eWxlO3otaW5kZXg6MH1cIjtcblxuY29uc3QgUm91dGVyT3V0bGV0ID0gLypAX19QVVJFX18qLyBwcm94eUN1c3RvbUVsZW1lbnQoY2xhc3MgUm91dGVyT3V0bGV0IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKHJlZ2lzdGVySG9zdCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAocmVnaXN0ZXJIb3N0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5fX3JlZ2lzdGVySG9zdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX19hdHRhY2hTaGFkb3coKTtcbiAgICAgICAgdGhpcy5pb25OYXZXaWxsTG9hZCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiaW9uTmF2V2lsbExvYWRcIiwgNyk7XG4gICAgICAgIHRoaXMuaW9uTmF2V2lsbENoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiaW9uTmF2V2lsbENoYW5nZVwiLCAzKTtcbiAgICAgICAgdGhpcy5pb25OYXZEaWRDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvbk5hdkRpZENoYW5nZVwiLCAzKTtcbiAgICAgICAgdGhpcy5sb2NrQ29udHJvbGxlciA9IGNyZWF0ZUxvY2tDb250cm9sbGVyKCk7XG4gICAgICAgIHRoaXMuZ2VzdHVyZU9yQW5pbWF0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1vZGUgZGV0ZXJtaW5lcyB3aGljaCBwbGF0Zm9ybSBzdHlsZXMgdG8gdXNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGB0cnVlYCwgdGhlIHJvdXRlci1vdXRsZXQgc2hvdWxkIGFuaW1hdGUgdGhlIHRyYW5zaXRpb24gb2YgY29tcG9uZW50cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYW5pbWF0ZWQgPSB0cnVlO1xuICAgIH1cbiAgICBzd2lwZUhhbmRsZXJDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5nZXN0dXJlKSB7XG4gICAgICAgICAgICB0aGlzLmdlc3R1cmUuZW5hYmxlKHRoaXMuc3dpcGVIYW5kbGVyICE9PSB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBjb25zdCBvblN0YXJ0ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5nZXN0dXJlT3JBbmltYXRpb25JblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN3aXBlSGFuZGxlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc3dpcGVIYW5kbGVyLm9uU3RhcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXN0dXJlID0gKGF3YWl0IGltcG9ydCgnLi9zd2lwZS1iYWNrLmpzJykpLmNyZWF0ZVN3aXBlQmFja0dlc3R1cmUodGhpcy5lbCwgKCkgPT4gIXRoaXMuZ2VzdHVyZU9yQW5pbWF0aW9uSW5Qcm9ncmVzcyAmJiAhIXRoaXMuc3dpcGVIYW5kbGVyICYmIHRoaXMuc3dpcGVIYW5kbGVyLmNhblN0YXJ0KCksICgpID0+IG9uU3RhcnQoKSwgKHN0ZXApID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gdGhpcy5hbmkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wcm9ncmVzc1N0ZXAoc3RlcCk7IH0sIChzaG91bGRDb21wbGV0ZSwgc3RlcCwgZHVyKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5hbmkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaS5vbkZpbmlzaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VzdHVyZU9yQW5pbWF0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zd2lwZUhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpcGVIYW5kbGVyLm9uRW5kKHNob3VsZENvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHsgb25lVGltZUNhbGxiYWNrOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIC8vIEFjY291bnQgZm9yIHJvdW5kaW5nIGVycm9ycyBpbiBKU1xuICAgICAgICAgICAgICAgIGxldCBuZXdTdGVwVmFsdWUgPSBzaG91bGRDb21wbGV0ZSA/IC0xZS0zIDogMC4wMDE7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQW5pbWF0aW9uIHdpbGwgYmUgcmV2ZXJzZWQgaGVyZSwgc28gbmVlZCB0b1xuICAgICAgICAgICAgICAgICAqIHJldmVyc2UgdGhlIGVhc2luZyBjdXJ2ZSBhcyB3ZWxsXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBBZGRpdGlvbmFsbHksIHdlIG5lZWQgdG8gYWNjb3VudCBmb3IgdGhlIHRpbWUgcmVsYXRpdmVcbiAgICAgICAgICAgICAgICAgKiB0byB0aGUgbmV3IGVhc2luZyBjdXJ2ZSwgYXMgYHN0ZXBWYWx1ZWAgaXMgZ29pbmcgdG8gYmUgZ2l2ZW5cbiAgICAgICAgICAgICAgICAgKiBpbiB0ZXJtcyBvZiBhIGxpbmVhciBjdXJ2ZS5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAoIXNob3VsZENvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pLmVhc2luZygnY3ViaWMtYmV6aWVyKDEsIDAsIDAuNjgsIDAuMjgpJyk7XG4gICAgICAgICAgICAgICAgICAgIG5ld1N0ZXBWYWx1ZSArPSBnZXRUaW1lR2l2ZW5Qcm9ncmVzc2lvbihbMCwgMF0sIFsxLCAwXSwgWzAuNjgsIDAuMjhdLCBbMSwgMV0sIHN0ZXApWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RlcFZhbHVlICs9IGdldFRpbWVHaXZlblByb2dyZXNzaW9uKFswLCAwXSwgWzAuMzIsIDAuNzJdLCBbMCwgMV0sIFsxLCAxXSwgc3RlcClbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYW5pLnByb2dyZXNzRW5kKHNob3VsZENvbXBsZXRlID8gMSA6IDAsIG5ld1N0ZXBWYWx1ZSwgZHVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2VzdHVyZU9yQW5pbWF0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zd2lwZUhhbmRsZXJDaGFuZ2VkKCk7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgICAgICB0aGlzLmlvbk5hdldpbGxMb2FkLmVtaXQoKTtcbiAgICB9XG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmdlc3R1cmUpIHtcbiAgICAgICAgICAgIHRoaXMuZ2VzdHVyZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmdlc3R1cmUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGFzeW5jIGNvbW1pdChlbnRlcmluZ0VsLCBsZWF2aW5nRWwsIG9wdHMpIHtcbiAgICAgICAgY29uc3QgdW5sb2NrID0gYXdhaXQgdGhpcy5sb2NrQ29udHJvbGxlci5sb2NrKCk7XG4gICAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjaGFuZ2VkID0gYXdhaXQgdGhpcy50cmFuc2l0aW9uKGVudGVyaW5nRWwsIGxlYXZpbmdFbCwgb3B0cyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHByaW50SW9uRXJyb3IoJ1tpb24tcm91dGVyLW91dGxldF0gLSBFeGNlcHRpb24gaW4gY29tbWl0OicsIGUpO1xuICAgICAgICB9XG4gICAgICAgIHVubG9jaygpO1xuICAgICAgICByZXR1cm4gY2hhbmdlZDtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGFzeW5jIHNldFJvdXRlSWQoaWQsIHBhcmFtcywgZGlyZWN0aW9uLCBhbmltYXRpb24pIHtcbiAgICAgICAgY29uc3QgY2hhbmdlZCA9IGF3YWl0IHRoaXMuc2V0Um9vdChpZCwgcGFyYW1zLCB7XG4gICAgICAgICAgICBkdXJhdGlvbjogZGlyZWN0aW9uID09PSAncm9vdCcgPyAwIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb24gPT09ICdiYWNrJyA/ICdiYWNrJyA6ICdmb3J3YXJkJyxcbiAgICAgICAgICAgIGFuaW1hdGlvbkJ1aWxkZXI6IGFuaW1hdGlvbixcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjaGFuZ2VkLFxuICAgICAgICAgICAgZWxlbWVudDogdGhpcy5hY3RpdmVFbCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGFzeW5jIGdldFJvdXRlSWQoKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZSA9IHRoaXMuYWN0aXZlRWw7XG4gICAgICAgIHJldHVybiBhY3RpdmVcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGlkOiBhY3RpdmUudGFnTmFtZSxcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBhY3RpdmUsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB0aGlzLmFjdGl2ZVBhcmFtcyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBhc3luYyBzZXRSb290KGNvbXBvbmVudCwgcGFyYW1zLCBvcHRzKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUNvbXBvbmVudCA9PT0gY29tcG9uZW50ICYmIHNoYWxsb3dFcXVhbFN0cmluZ01hcChwYXJhbXMsIHRoaXMuYWN0aXZlUGFyYW1zKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGF0dGFjaCBlbnRlcmluZyB2aWV3IHRvIERPTVxuICAgICAgICBjb25zdCBsZWF2aW5nRWwgPSB0aGlzLmFjdGl2ZUVsO1xuICAgICAgICBjb25zdCBlbnRlcmluZ0VsID0gYXdhaXQgYXR0YWNoQ29tcG9uZW50KHRoaXMuZGVsZWdhdGUsIHRoaXMuZWwsIGNvbXBvbmVudCwgWydpb24tcGFnZScsICdpb24tcGFnZS1pbnZpc2libGUnXSwgcGFyYW1zKTtcbiAgICAgICAgdGhpcy5hY3RpdmVDb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgICAgIHRoaXMuYWN0aXZlRWwgPSBlbnRlcmluZ0VsO1xuICAgICAgICB0aGlzLmFjdGl2ZVBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgLy8gY29tbWl0IGFuaW1hdGlvblxuICAgICAgICBhd2FpdCB0aGlzLmNvbW1pdChlbnRlcmluZ0VsLCBsZWF2aW5nRWwsIG9wdHMpO1xuICAgICAgICBhd2FpdCBkZXRhY2hDb21wb25lbnQodGhpcy5kZWxlZ2F0ZSwgbGVhdmluZ0VsKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFzeW5jIHRyYW5zaXRpb24oZW50ZXJpbmdFbCwgbGVhdmluZ0VsLCBvcHRzID0ge30pIHtcbiAgICAgICAgaWYgKGxlYXZpbmdFbCA9PT0gZW50ZXJpbmdFbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVtaXQgbmF2IHdpbGwgY2hhbmdlIGV2ZW50XG4gICAgICAgIHRoaXMuaW9uTmF2V2lsbENoYW5nZS5lbWl0KCk7XG4gICAgICAgIGNvbnN0IHsgZWwsIG1vZGUgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGFuaW1hdGVkID0gdGhpcy5hbmltYXRlZCAmJiBjb25maWcuZ2V0Qm9vbGVhbignYW5pbWF0ZWQnLCB0cnVlKTtcbiAgICAgICAgY29uc3QgYW5pbWF0aW9uQnVpbGRlciA9IG9wdHMuYW5pbWF0aW9uQnVpbGRlciB8fCB0aGlzLmFuaW1hdGlvbiB8fCBjb25maWcuZ2V0KCduYXZBbmltYXRpb24nKTtcbiAgICAgICAgYXdhaXQgdHJhbnNpdGlvbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtb2RlLFxuICAgICAgICAgICAgYW5pbWF0ZWQsXG4gICAgICAgICAgICBlbnRlcmluZ0VsLFxuICAgICAgICAgICAgbGVhdmluZ0VsLCBiYXNlRWw6IGVsLFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBXZSBuZWVkIHRvIHdhaXQgZm9yIGFsbCBTdGVuY2lsIGNvbXBvbmVudHNcbiAgICAgICAgICAgICAqIHRvIGJlIHJlYWR5IG9ubHkgd2hlbiB1c2luZyB0aGUgbGF6eVxuICAgICAgICAgICAgICogbG9hZGVkIGJ1bmRsZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZGVlcFdhaXQ6IGhhc0xhenlCdWlsZChlbCksIHByb2dyZXNzQ2FsbGJhY2s6IG9wdHMucHJvZ3Jlc3NBbmltYXRpb25cbiAgICAgICAgICAgICAgICA/IChhbmkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIEJlY2F1c2UgdGhpcyBwcm9ncmVzcyBjYWxsYmFjayBpcyBjYWxsZWQgYXN5bmNocm9ub3VzbHlcbiAgICAgICAgICAgICAgICAgICAgICogaXQgaXMgcG9zc2libGUgZm9yIHRoZSBnZXN0dXJlIHRvIHN0YXJ0IGFuZCBlbmQgYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgICAqIHRoZSBhbmltYXRpb24gaXMgZXZlciBzZXQuIEluIHRoYXQgc2NlbmFyaW8sIHdlIHNob3VsZFxuICAgICAgICAgICAgICAgICAgICAgKiBpbW1lZGlhdGVseSBjYWxsIHByb2dyZXNzRW5kIHNvIHRoYXQgdGhlIHRyYW5zaXRpb24gcHJvbWlzZVxuICAgICAgICAgICAgICAgICAgICAgKiByZXNvbHZlcyBhbmQgdGhlIGdlc3R1cmUgZG9lcyBub3QgZ2V0IGxvY2tlZCB1cC5cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmkgIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5nZXN0dXJlT3JBbmltYXRpb25JblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdlc3R1cmVPckFuaW1hdGlvbkluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5pLm9uRmluaXNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdlc3R1cmVPckFuaW1hdGlvbkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zd2lwZUhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2lwZUhhbmRsZXIub25FbmQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgb25lVGltZUNhbGxiYWNrOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBQbGF5aW5nIGFuaW1hdGlvbiB0byBiZWdpbm5pbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIHdpdGggYSBkdXJhdGlvbiBvZiAwIHByZXZlbnRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBhbnkgZmxpY2tlcmluZyB3aGVuIHRoZSBhbmltYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAqIGlzIGxhdGVyIGNsZWFuZWQgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaS5wcm9ncmVzc0VuZCgwLCAwLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pID0gYW5pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkIH0sIG9wdHMpLCB7IGFuaW1hdGlvbkJ1aWxkZXIgfSkpO1xuICAgICAgICAvLyBlbWl0IG5hdiBjaGFuZ2VkIGV2ZW50XG4gICAgICAgIHRoaXMuaW9uTmF2RGlkQ2hhbmdlLmVtaXQoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIGgoXCJzbG90XCIsIHsga2V5OiAnODRiNTBmMTE1NWIwZDc4MGRmZjgwMmVlMTMyMjMyODcyNTlmZDUyNScgfSk7XG4gICAgfVxuICAgIGdldCBlbCgpIHsgcmV0dXJuIHRoaXM7IH1cbiAgICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgICAgICBcInN3aXBlSGFuZGxlclwiOiBbXCJzd2lwZUhhbmRsZXJDaGFuZ2VkXCJdXG4gICAgfTsgfVxuICAgIHN0YXRpYyBnZXQgc3R5bGUoKSB7IHJldHVybiByb3V0ZXJPdXRsZXRDc3M7IH1cbn0sIFsyNTcsIFwiaW9uLXJvdXRlci1vdXRsZXRcIiwge1xuICAgICAgICBcIm1vZGVcIjogWzEwMjVdLFxuICAgICAgICBcImRlbGVnYXRlXCI6IFsxNl0sXG4gICAgICAgIFwiYW5pbWF0ZWRcIjogWzRdLFxuICAgICAgICBcImFuaW1hdGlvblwiOiBbMTZdLFxuICAgICAgICBcInN3aXBlSGFuZGxlclwiOiBbMTZdLFxuICAgICAgICBcImNvbW1pdFwiOiBbNjRdLFxuICAgICAgICBcInNldFJvdXRlSWRcIjogWzY0XSxcbiAgICAgICAgXCJnZXRSb3V0ZUlkXCI6IFs2NF1cbiAgICB9LCB1bmRlZmluZWQsIHtcbiAgICAgICAgXCJzd2lwZUhhbmRsZXJcIjogW1wic3dpcGVIYW5kbGVyQ2hhbmdlZFwiXVxuICAgIH1dKTtcbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUVsZW1lbnQkMSgpIHtcbiAgICBpZiAodHlwZW9mIGN1c3RvbUVsZW1lbnRzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29tcG9uZW50cyA9IFtcImlvbi1yb3V0ZXItb3V0bGV0XCJdO1xuICAgIGNvbXBvbmVudHMuZm9yRWFjaCh0YWdOYW1lID0+IHsgc3dpdGNoICh0YWdOYW1lKSB7XG4gICAgICAgIGNhc2UgXCJpb24tcm91dGVyLW91dGxldFwiOlxuICAgICAgICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUodGFnTmFtZSwgUm91dGVyT3V0bGV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH0gfSk7XG59XG5cbmNvbnN0IElvblJvdXRlck91dGxldCA9IFJvdXRlck91dGxldDtcbmNvbnN0IGRlZmluZUN1c3RvbUVsZW1lbnQgPSBkZWZpbmVDdXN0b21FbGVtZW50JDE7XG5cbmV4cG9ydCB7IElvblJvdXRlck91dGxldCwgZGVmaW5lQ3VzdG9tRWxlbWVudCB9O1xuIiwiLyohXG4gKiB2dWUtcm91dGVyIHY0LjYuM1xuICogKGMpIDIwMjUgRWR1YXJkbyBTYW4gTWFydGluIE1vcm90ZVxuICogQGxpY2Vuc2UgTUlUXG4gKi9cbmltcG9ydCB7IGdldEN1cnJlbnRJbnN0YW5jZSwgaW5qZWN0LCBvbkFjdGl2YXRlZCwgb25EZWFjdGl2YXRlZCwgb25Vbm1vdW50ZWQsIHdhdGNoIH0gZnJvbSBcInZ1ZVwiO1xuaW1wb3J0IHsgc2V0dXBEZXZ0b29sc1BsdWdpbiB9IGZyb20gXCJAdnVlL2RldnRvb2xzLWFwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL2Vudi50c1xuY29uc3QgaXNCcm93c2VyID0gdHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvaW5kZXgudHNcbi8qKlxuKiBJZGVudGl0eSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHZhbHVlIGFzIGlzLlxuKlxuKiBAcGFyYW0gdiAtIHRoZSB2YWx1ZSB0byByZXR1cm5cbipcbiogQGludGVybmFsXG4qL1xuY29uc3QgaWRlbnRpdHlGbiA9ICh2KSA9PiB2O1xuLyoqXG4qIEFsbG93cyBkaWZmZXJlbnRpYXRpbmcgbGF6eSBjb21wb25lbnRzIGZyb20gZnVuY3Rpb25hbCBjb21wb25lbnRzIGFuZCB2dWUtY2xhc3MtY29tcG9uZW50XG4qIEBpbnRlcm5hbFxuKlxuKiBAcGFyYW0gY29tcG9uZW50XG4qL1xuZnVuY3Rpb24gaXNSb3V0ZUNvbXBvbmVudChjb21wb25lbnQpIHtcblx0cmV0dXJuIHR5cGVvZiBjb21wb25lbnQgPT09IFwib2JqZWN0XCIgfHwgXCJkaXNwbGF5TmFtZVwiIGluIGNvbXBvbmVudCB8fCBcInByb3BzXCIgaW4gY29tcG9uZW50IHx8IFwiX192Y2NPcHRzXCIgaW4gY29tcG9uZW50O1xufVxuZnVuY3Rpb24gaXNFU01vZHVsZShvYmopIHtcblx0cmV0dXJuIG9iai5fX2VzTW9kdWxlIHx8IG9ialtTeW1ib2wudG9TdHJpbmdUYWddID09PSBcIk1vZHVsZVwiIHx8IG9iai5kZWZhdWx0ICYmIGlzUm91dGVDb21wb25lbnQob2JqLmRlZmF1bHQpO1xufVxuY29uc3QgYXNzaWduID0gT2JqZWN0LmFzc2lnbjtcbmZ1bmN0aW9uIGFwcGx5VG9QYXJhbXMoZm4sIHBhcmFtcykge1xuXHRjb25zdCBuZXdQYXJhbXMgPSB7fTtcblx0Zm9yIChjb25zdCBrZXkgaW4gcGFyYW1zKSB7XG5cdFx0Y29uc3QgdmFsdWUgPSBwYXJhbXNba2V5XTtcblx0XHRuZXdQYXJhbXNba2V5XSA9IGlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKGZuKSA6IGZuKHZhbHVlKTtcblx0fVxuXHRyZXR1cm4gbmV3UGFyYW1zO1xufVxuY29uc3Qgbm9vcCA9ICgpID0+IHt9O1xuLyoqXG4qIFR5cGVzYWZlIGFsdGVybmF0aXZlIHRvIEFycmF5LmlzQXJyYXlcbiogaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L3B1bGwvNDgyMjhcbiovXG5jb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbmZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhkZWZhdWx0cywgcGFydGlhbE9wdGlvbnMpIHtcblx0Y29uc3Qgb3B0aW9ucyA9IHt9O1xuXHRmb3IgKGNvbnN0IGtleSBpbiBkZWZhdWx0cykgb3B0aW9uc1trZXldID0ga2V5IGluIHBhcnRpYWxPcHRpb25zID8gcGFydGlhbE9wdGlvbnNba2V5XSA6IGRlZmF1bHRzW2tleV07XG5cdHJldHVybiBvcHRpb25zO1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvd2FybmluZy50c1xuZnVuY3Rpb24gd2FybiQxKG1zZykge1xuXHRjb25zdCBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpLnNsaWNlKDEpO1xuXHRjb25zb2xlLndhcm4uYXBwbHkoY29uc29sZSwgW1wiW1Z1ZSBSb3V0ZXIgd2Fybl06IFwiICsgbXNnXS5jb25jYXQoYXJncykpO1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvZW5jb2RpbmcudHNcbi8qKlxuKiBFbmNvZGluZyBSdWxlcyAo4pCjID0gU3BhY2UpXG4qIC0gUGF0aDog4pCjIFwiIDwgPiAjID8geyB9XG4qIC0gUXVlcnk6IOKQoyBcIiA8ID4gIyAmID1cbiogLSBIYXNoOiDikKMgXCIgPCA+IGBcbipcbiogT24gdG9wIG9mIHRoYXQsIHRoZSBSRkMzOTg2IChodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzk4NiNzZWN0aW9uLTIuMilcbiogZGVmaW5lcyBzb21lIGV4dHJhIGNoYXJhY3RlcnMgdG8gYmUgZW5jb2RlZC4gTW9zdCBicm93c2VycyBkbyBub3QgZW5jb2RlIHRoZW1cbiogaW4gZW5jb2RlVVJJIGh0dHBzOi8vZ2l0aHViLmNvbS93aGF0d2cvdXJsL2lzc3Vlcy8zNjksIHNvIGl0IG1heSBiZSBzYWZlciB0b1xuKiBhbHNvIGVuY29kZSBgIScoKSpgLiBMZWF2aW5nIHVuLWVuY29kZWQgb25seSBBU0NJSSBhbHBoYW51bWVyaWMoYGEtekEtWjAtOWApXG4qIHBsdXMgYC0uX35gLiBUaGlzIGV4dHJhIHNhZmV0eSBzaG91bGQgYmUgYXBwbGllZCB0byBxdWVyeSBieSBwYXRjaGluZyB0aGVcbiogc3RyaW5nIHJldHVybmVkIGJ5IGVuY29kZVVSSUNvbXBvbmVudCBlbmNvZGVVUkkgYWxzbyBlbmNvZGVzIGBbXFxdXmAuIGBcXGBcbiogc2hvdWxkIGJlIGVuY29kZWQgdG8gYXZvaWQgYW1iaWd1aXR5LiBCcm93c2VycyAoSUUsIEZGLCBDKSB0cmFuc2Zvcm0gYSBgXFxgXG4qIGludG8gYSBgL2AgaWYgZGlyZWN0bHkgdHlwZWQgaW4uIFRoZSBfYmFja3RpY2tfIChgYGBgYCkgc2hvdWxkIGFsc28gYmVcbiogZW5jb2RlZCBldmVyeXdoZXJlIGJlY2F1c2Ugc29tZSBicm93c2VycyBsaWtlIEZGIGVuY29kZSBpdCB3aGVuIGRpcmVjdGx5XG4qIHdyaXR0ZW4gd2hpbGUgb3RoZXJzIGRvbid0LiBTYWZhcmkgYW5kIElFIGRvbid0IGVuY29kZSBgYFwiPD57fWBgYCBpbiBoYXNoLlxuKi9cbmNvbnN0IEhBU0hfUkUgPSAvIy9nO1xuY29uc3QgQU1QRVJTQU5EX1JFID0gLyYvZztcbmNvbnN0IFNMQVNIX1JFID0gL1xcLy9nO1xuY29uc3QgRVFVQUxfUkUgPSAvPS9nO1xuY29uc3QgSU1fUkUgPSAvXFw/L2c7XG5jb25zdCBQTFVTX1JFID0gL1xcKy9nO1xuLyoqXG4qIE5PVEU6IEl0J3Mgbm90IGNsZWFyIHRvIG1lIGlmIHdlIHNob3VsZCBlbmNvZGUgdGhlICsgc3ltYm9sIGluIHF1ZXJpZXMsIGl0XG4qIHNlZW1zIHRvIGJlIGxlc3MgZmxleGlibGUgdGhhbiBub3QgZG9pbmcgc28gYW5kIEkgY2FuJ3QgZmluZCBvdXQgdGhlIGxlZ2FjeVxuKiBzeXN0ZW1zIHJlcXVpcmluZyB0aGlzIGZvciByZWd1bGFyIHJlcXVlc3RzIGxpa2UgdGV4dC9odG1sLiBJbiB0aGUgc3RhbmRhcmQsXG4qIHRoZSBlbmNvZGluZyBvZiB0aGUgcGx1cyBjaGFyYWN0ZXIgaXMgb25seSBtZW50aW9uZWQgZm9yXG4qIGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFxuKiAoaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmxlbmNvZGVkLXBhcnNpbmcpIGFuZCBtb3N0IGJyb3dzZXJzIHNlZW1zIGxvXG4qIGxlYXZlIHRoZSBwbHVzIGNoYXJhY3RlciBhcyBpcyBpbiBxdWVyaWVzLiBUbyBiZSBtb3JlIGZsZXhpYmxlLCB3ZSBhbGxvdyB0aGVcbiogcGx1cyBjaGFyYWN0ZXIgb24gdGhlIHF1ZXJ5LCBidXQgaXQgY2FuIGFsc28gYmUgbWFudWFsbHkgZW5jb2RlZCBieSB0aGUgdXNlci5cbipcbiogUmVzb3VyY2VzOlxuKiAtIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsZW5jb2RlZC1wYXJzaW5nXG4qIC0gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTYzNDI3MS91cmwtZW5jb2RpbmctdGhlLXNwYWNlLWNoYXJhY3Rlci1vci0yMFxuKi9cbmNvbnN0IEVOQ19CUkFDS0VUX09QRU5fUkUgPSAvJTVCL2c7XG5jb25zdCBFTkNfQlJBQ0tFVF9DTE9TRV9SRSA9IC8lNUQvZztcbmNvbnN0IEVOQ19DQVJFVF9SRSA9IC8lNUUvZztcbmNvbnN0IEVOQ19CQUNLVElDS19SRSA9IC8lNjAvZztcbmNvbnN0IEVOQ19DVVJMWV9PUEVOX1JFID0gLyU3Qi9nO1xuY29uc3QgRU5DX1BJUEVfUkUgPSAvJTdDL2c7XG5jb25zdCBFTkNfQ1VSTFlfQ0xPU0VfUkUgPSAvJTdEL2c7XG5jb25zdCBFTkNfU1BBQ0VfUkUgPSAvJTIwL2c7XG4vKipcbiogRW5jb2RlIGNoYXJhY3RlcnMgdGhhdCBuZWVkIHRvIGJlIGVuY29kZWQgb24gdGhlIHBhdGgsIHNlYXJjaCBhbmQgaGFzaFxuKiBzZWN0aW9ucyBvZiB0aGUgVVJMLlxuKlxuKiBAaW50ZXJuYWxcbiogQHBhcmFtIHRleHQgLSBzdHJpbmcgdG8gZW5jb2RlXG4qIEByZXR1cm5zIGVuY29kZWQgc3RyaW5nXG4qL1xuZnVuY3Rpb24gY29tbW9uRW5jb2RlKHRleHQpIHtcblx0cmV0dXJuIHRleHQgPT0gbnVsbCA/IFwiXCIgOiBlbmNvZGVVUkkoXCJcIiArIHRleHQpLnJlcGxhY2UoRU5DX1BJUEVfUkUsIFwifFwiKS5yZXBsYWNlKEVOQ19CUkFDS0VUX09QRU5fUkUsIFwiW1wiKS5yZXBsYWNlKEVOQ19CUkFDS0VUX0NMT1NFX1JFLCBcIl1cIik7XG59XG4vKipcbiogRW5jb2RlIGNoYXJhY3RlcnMgdGhhdCBuZWVkIHRvIGJlIGVuY29kZWQgb24gdGhlIGhhc2ggc2VjdGlvbiBvZiB0aGUgVVJMLlxuKlxuKiBAcGFyYW0gdGV4dCAtIHN0cmluZyB0byBlbmNvZGVcbiogQHJldHVybnMgZW5jb2RlZCBzdHJpbmdcbiovXG5mdW5jdGlvbiBlbmNvZGVIYXNoKHRleHQpIHtcblx0cmV0dXJuIGNvbW1vbkVuY29kZSh0ZXh0KS5yZXBsYWNlKEVOQ19DVVJMWV9PUEVOX1JFLCBcIntcIikucmVwbGFjZShFTkNfQ1VSTFlfQ0xPU0VfUkUsIFwifVwiKS5yZXBsYWNlKEVOQ19DQVJFVF9SRSwgXCJeXCIpO1xufVxuLyoqXG4qIEVuY29kZSBjaGFyYWN0ZXJzIHRoYXQgbmVlZCB0byBiZSBlbmNvZGVkIHF1ZXJ5IHZhbHVlcyBvbiB0aGUgcXVlcnlcbiogc2VjdGlvbiBvZiB0aGUgVVJMLlxuKlxuKiBAcGFyYW0gdGV4dCAtIHN0cmluZyB0byBlbmNvZGVcbiogQHJldHVybnMgZW5jb2RlZCBzdHJpbmdcbiovXG5mdW5jdGlvbiBlbmNvZGVRdWVyeVZhbHVlKHRleHQpIHtcblx0cmV0dXJuIGNvbW1vbkVuY29kZSh0ZXh0KS5yZXBsYWNlKFBMVVNfUkUsIFwiJTJCXCIpLnJlcGxhY2UoRU5DX1NQQUNFX1JFLCBcIitcIikucmVwbGFjZShIQVNIX1JFLCBcIiUyM1wiKS5yZXBsYWNlKEFNUEVSU0FORF9SRSwgXCIlMjZcIikucmVwbGFjZShFTkNfQkFDS1RJQ0tfUkUsIFwiYFwiKS5yZXBsYWNlKEVOQ19DVVJMWV9PUEVOX1JFLCBcIntcIikucmVwbGFjZShFTkNfQ1VSTFlfQ0xPU0VfUkUsIFwifVwiKS5yZXBsYWNlKEVOQ19DQVJFVF9SRSwgXCJeXCIpO1xufVxuLyoqXG4qIExpa2UgYGVuY29kZVF1ZXJ5VmFsdWVgIGJ1dCBhbHNvIGVuY29kZXMgdGhlIGA9YCBjaGFyYWN0ZXIuXG4qXG4qIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxuKi9cbmZ1bmN0aW9uIGVuY29kZVF1ZXJ5S2V5KHRleHQpIHtcblx0cmV0dXJuIGVuY29kZVF1ZXJ5VmFsdWUodGV4dCkucmVwbGFjZShFUVVBTF9SRSwgXCIlM0RcIik7XG59XG4vKipcbiogRW5jb2RlIGNoYXJhY3RlcnMgdGhhdCBuZWVkIHRvIGJlIGVuY29kZWQgb24gdGhlIHBhdGggc2VjdGlvbiBvZiB0aGUgVVJMLlxuKlxuKiBAcGFyYW0gdGV4dCAtIHN0cmluZyB0byBlbmNvZGVcbiogQHJldHVybnMgZW5jb2RlZCBzdHJpbmdcbiovXG5mdW5jdGlvbiBlbmNvZGVQYXRoKHRleHQpIHtcblx0cmV0dXJuIGNvbW1vbkVuY29kZSh0ZXh0KS5yZXBsYWNlKEhBU0hfUkUsIFwiJTIzXCIpLnJlcGxhY2UoSU1fUkUsIFwiJTNGXCIpO1xufVxuLyoqXG4qIEVuY29kZSBjaGFyYWN0ZXJzIHRoYXQgbmVlZCB0byBiZSBlbmNvZGVkIG9uIHRoZSBwYXRoIHNlY3Rpb24gb2YgdGhlIFVSTCBhcyBhXG4qIHBhcmFtLiBUaGlzIGZ1bmN0aW9uIGVuY29kZXMgZXZlcnl0aGluZyB7QGxpbmsgZW5jb2RlUGF0aH0gZG9lcyBwbHVzIHRoZVxuKiBzbGFzaCAoYC9gKSBjaGFyYWN0ZXIuIElmIGB0ZXh0YCBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAsIHJldHVybnMgYW4gZW1wdHlcbiogc3RyaW5nIGluc3RlYWQuXG4qXG4qIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxuKiBAcmV0dXJucyBlbmNvZGVkIHN0cmluZ1xuKi9cbmZ1bmN0aW9uIGVuY29kZVBhcmFtKHRleHQpIHtcblx0cmV0dXJuIGVuY29kZVBhdGgodGV4dCkucmVwbGFjZShTTEFTSF9SRSwgXCIlMkZcIik7XG59XG5mdW5jdGlvbiBkZWNvZGUodGV4dCkge1xuXHRpZiAodGV4dCA9PSBudWxsKSByZXR1cm4gbnVsbDtcblx0dHJ5IHtcblx0XHRyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KFwiXCIgKyB0ZXh0KTtcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0cHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiICYmIHdhcm4kMShgRXJyb3IgZGVjb2RpbmcgXCIke3RleHR9XCIuIFVzaW5nIG9yaWdpbmFsIHZhbHVlYCk7XG5cdH1cblx0cmV0dXJuIFwiXCIgKyB0ZXh0O1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvbG9jYXRpb24udHNcbmNvbnN0IFRSQUlMSU5HX1NMQVNIX1JFID0gL1xcLyQvO1xuY29uc3QgcmVtb3ZlVHJhaWxpbmdTbGFzaCA9IChwYXRoKSA9PiBwYXRoLnJlcGxhY2UoVFJBSUxJTkdfU0xBU0hfUkUsIFwiXCIpO1xuLyoqXG4qIFRyYW5zZm9ybXMgYSBVUkkgaW50byBhIG5vcm1hbGl6ZWQgaGlzdG9yeSBsb2NhdGlvblxuKlxuKiBAcGFyYW0gcGFyc2VRdWVyeVxuKiBAcGFyYW0gbG9jYXRpb24gLSBVUkkgdG8gbm9ybWFsaXplXG4qIEBwYXJhbSBjdXJyZW50TG9jYXRpb24gLSBjdXJyZW50IGFic29sdXRlIGxvY2F0aW9uLiBBbGxvd3MgcmVzb2x2aW5nIHJlbGF0aXZlXG4qIHBhdGhzLiBNdXN0IHN0YXJ0IHdpdGggYC9gLiBEZWZhdWx0cyB0byBgL2BcbiogQHJldHVybnMgYSBub3JtYWxpemVkIGhpc3RvcnkgbG9jYXRpb25cbiovXG5mdW5jdGlvbiBwYXJzZVVSTChwYXJzZVF1ZXJ5JDEsIGxvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24gPSBcIi9cIikge1xuXHRsZXQgcGF0aCwgcXVlcnkgPSB7fSwgc2VhcmNoU3RyaW5nID0gXCJcIiwgaGFzaCA9IFwiXCI7XG5cdGNvbnN0IGhhc2hQb3MgPSBsb2NhdGlvbi5pbmRleE9mKFwiI1wiKTtcblx0bGV0IHNlYXJjaFBvcyA9IGxvY2F0aW9uLmluZGV4T2YoXCI/XCIpO1xuXHRzZWFyY2hQb3MgPSBoYXNoUG9zID49IDAgJiYgc2VhcmNoUG9zID4gaGFzaFBvcyA/IC0xIDogc2VhcmNoUG9zO1xuXHRpZiAoc2VhcmNoUG9zID49IDApIHtcblx0XHRwYXRoID0gbG9jYXRpb24uc2xpY2UoMCwgc2VhcmNoUG9zKTtcblx0XHRzZWFyY2hTdHJpbmcgPSBsb2NhdGlvbi5zbGljZShzZWFyY2hQb3MsIGhhc2hQb3MgPiAwID8gaGFzaFBvcyA6IGxvY2F0aW9uLmxlbmd0aCk7XG5cdFx0cXVlcnkgPSBwYXJzZVF1ZXJ5JDEoc2VhcmNoU3RyaW5nLnNsaWNlKDEpKTtcblx0fVxuXHRpZiAoaGFzaFBvcyA+PSAwKSB7XG5cdFx0cGF0aCA9IHBhdGggfHwgbG9jYXRpb24uc2xpY2UoMCwgaGFzaFBvcyk7XG5cdFx0aGFzaCA9IGxvY2F0aW9uLnNsaWNlKGhhc2hQb3MsIGxvY2F0aW9uLmxlbmd0aCk7XG5cdH1cblx0cGF0aCA9IHJlc29sdmVSZWxhdGl2ZVBhdGgocGF0aCAhPSBudWxsID8gcGF0aCA6IGxvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24pO1xuXHRyZXR1cm4ge1xuXHRcdGZ1bGxQYXRoOiBwYXRoICsgc2VhcmNoU3RyaW5nICsgaGFzaCxcblx0XHRwYXRoLFxuXHRcdHF1ZXJ5LFxuXHRcdGhhc2g6IGRlY29kZShoYXNoKVxuXHR9O1xufVxuZnVuY3Rpb24gTkVXX3N0cmluZ2lmeVVSTChzdHJpbmdpZnlRdWVyeSQxLCBwYXRoLCBxdWVyeSwgaGFzaCA9IFwiXCIpIHtcblx0Y29uc3Qgc2VhcmNoVGV4dCA9IHN0cmluZ2lmeVF1ZXJ5JDEocXVlcnkpO1xuXHRyZXR1cm4gcGF0aCArIChzZWFyY2hUZXh0ICYmIFwiP1wiKSArIHNlYXJjaFRleHQgKyBlbmNvZGVIYXNoKGhhc2gpO1xufVxuLyoqXG4qIFN0cmluZ2lmaWVzIGEgVVJMIG9iamVjdFxuKlxuKiBAcGFyYW0gc3RyaW5naWZ5UXVlcnlcbiogQHBhcmFtIGxvY2F0aW9uXG4qL1xuZnVuY3Rpb24gc3RyaW5naWZ5VVJMKHN0cmluZ2lmeVF1ZXJ5JDEsIGxvY2F0aW9uKSB7XG5cdGNvbnN0IHF1ZXJ5ID0gbG9jYXRpb24ucXVlcnkgPyBzdHJpbmdpZnlRdWVyeSQxKGxvY2F0aW9uLnF1ZXJ5KSA6IFwiXCI7XG5cdHJldHVybiBsb2NhdGlvbi5wYXRoICsgKHF1ZXJ5ICYmIFwiP1wiKSArIHF1ZXJ5ICsgKGxvY2F0aW9uLmhhc2ggfHwgXCJcIik7XG59XG4vKipcbiogU3RyaXBzIG9mZiB0aGUgYmFzZSBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgYSBsb2NhdGlvbi5wYXRobmFtZSBpbiBhIG5vbi1jYXNlLXNlbnNpdGl2ZSB3YXkuXG4qXG4qIEBwYXJhbSBwYXRobmFtZSAtIGxvY2F0aW9uLnBhdGhuYW1lXG4qIEBwYXJhbSBiYXNlIC0gYmFzZSB0byBzdHJpcCBvZmZcbiovXG5mdW5jdGlvbiBzdHJpcEJhc2UocGF0aG5hbWUsIGJhc2UpIHtcblx0aWYgKCFiYXNlIHx8ICFwYXRobmFtZS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoYmFzZS50b0xvd2VyQ2FzZSgpKSkgcmV0dXJuIHBhdGhuYW1lO1xuXHRyZXR1cm4gcGF0aG5hbWUuc2xpY2UoYmFzZS5sZW5ndGgpIHx8IFwiL1wiO1xufVxuLyoqXG4qIENoZWNrcyBpZiB0d28gUm91dGVMb2NhdGlvbiBhcmUgZXF1YWwuIFRoaXMgbWVhbnMgdGhhdCBib3RoIGxvY2F0aW9ucyBhcmVcbiogcG9pbnRpbmcgdG93YXJkcyB0aGUgc2FtZSB7QGxpbmsgUm91dGVSZWNvcmR9IGFuZCB0aGF0IGFsbCBgcGFyYW1zYCwgYHF1ZXJ5YFxuKiBwYXJhbWV0ZXJzIGFuZCBgaGFzaGAgYXJlIHRoZSBzYW1lXG4qXG4qIEBwYXJhbSBzdHJpbmdpZnlRdWVyeSAtIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHF1ZXJ5IG9iamVjdCBvZiB0eXBlIExvY2F0aW9uUXVlcnlSYXcgYW5kIHJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgaXQuXG4qIEBwYXJhbSBhIC0gZmlyc3Qge0BsaW5rIFJvdXRlTG9jYXRpb259XG4qIEBwYXJhbSBiIC0gc2Vjb25kIHtAbGluayBSb3V0ZUxvY2F0aW9ufVxuKi9cbmZ1bmN0aW9uIGlzU2FtZVJvdXRlTG9jYXRpb24oc3RyaW5naWZ5UXVlcnkkMSwgYSwgYikge1xuXHRjb25zdCBhTGFzdEluZGV4ID0gYS5tYXRjaGVkLmxlbmd0aCAtIDE7XG5cdGNvbnN0IGJMYXN0SW5kZXggPSBiLm1hdGNoZWQubGVuZ3RoIC0gMTtcblx0cmV0dXJuIGFMYXN0SW5kZXggPiAtMSAmJiBhTGFzdEluZGV4ID09PSBiTGFzdEluZGV4ICYmIGlzU2FtZVJvdXRlUmVjb3JkKGEubWF0Y2hlZFthTGFzdEluZGV4XSwgYi5tYXRjaGVkW2JMYXN0SW5kZXhdKSAmJiBpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zKGEucGFyYW1zLCBiLnBhcmFtcykgJiYgc3RyaW5naWZ5UXVlcnkkMShhLnF1ZXJ5KSA9PT0gc3RyaW5naWZ5UXVlcnkkMShiLnF1ZXJ5KSAmJiBhLmhhc2ggPT09IGIuaGFzaDtcbn1cbi8qKlxuKiBDaGVjayBpZiB0d28gYFJvdXRlUmVjb3Jkc2AgYXJlIGVxdWFsLiBUYWtlcyBpbnRvIGFjY291bnQgYWxpYXNlczogdGhleSBhcmVcbiogY29uc2lkZXJlZCBlcXVhbCB0byB0aGUgYFJvdXRlUmVjb3JkYCB0aGV5IGFyZSBhbGlhc2luZy5cbipcbiogQHBhcmFtIGEgLSBmaXJzdCB7QGxpbmsgUm91dGVSZWNvcmR9XG4qIEBwYXJhbSBiIC0gc2Vjb25kIHtAbGluayBSb3V0ZVJlY29yZH1cbiovXG5mdW5jdGlvbiBpc1NhbWVSb3V0ZVJlY29yZChhLCBiKSB7XG5cdHJldHVybiAoYS5hbGlhc09mIHx8IGEpID09PSAoYi5hbGlhc09mIHx8IGIpO1xufVxuZnVuY3Rpb24gaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtcyhhLCBiKSB7XG5cdGlmIChPYmplY3Qua2V5cyhhKS5sZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXHRmb3IgKGNvbnN0IGtleSBpbiBhKSBpZiAoIWlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXNWYWx1ZShhW2tleV0sIGJba2V5XSkpIHJldHVybiBmYWxzZTtcblx0cmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zVmFsdWUoYSwgYikge1xuXHRyZXR1cm4gaXNBcnJheShhKSA/IGlzRXF1aXZhbGVudEFycmF5KGEsIGIpIDogaXNBcnJheShiKSA/IGlzRXF1aXZhbGVudEFycmF5KGIsIGEpIDogYSA9PT0gYjtcbn1cbi8qKlxuKiBDaGVjayBpZiB0d28gYXJyYXlzIGFyZSB0aGUgc2FtZSBvciBpZiBhbiBhcnJheSB3aXRoIG9uZSBzaW5nbGUgZW50cnkgaXMgdGhlXG4qIHNhbWUgYXMgYW5vdGhlciBwcmltaXRpdmUgdmFsdWUuIFVzZWQgdG8gY2hlY2sgcXVlcnkgYW5kIHBhcmFtZXRlcnNcbipcbiogQHBhcmFtIGEgLSBhcnJheSBvZiB2YWx1ZXNcbiogQHBhcmFtIGIgLSBhcnJheSBvZiB2YWx1ZXMgb3IgYSBzaW5nbGUgdmFsdWVcbiovXG5mdW5jdGlvbiBpc0VxdWl2YWxlbnRBcnJheShhLCBiKSB7XG5cdHJldHVybiBpc0FycmF5KGIpID8gYS5sZW5ndGggPT09IGIubGVuZ3RoICYmIGEuZXZlcnkoKHZhbHVlLCBpKSA9PiB2YWx1ZSA9PT0gYltpXSkgOiBhLmxlbmd0aCA9PT0gMSAmJiBhWzBdID09PSBiO1xufVxuLyoqXG4qIFJlc29sdmVzIGEgcmVsYXRpdmUgcGF0aCB0aGF0IHN0YXJ0cyB3aXRoIGAuYC5cbipcbiogQHBhcmFtIHRvIC0gcGF0aCBsb2NhdGlvbiB3ZSBhcmUgcmVzb2x2aW5nXG4qIEBwYXJhbSBmcm9tIC0gY3VycmVudExvY2F0aW9uLnBhdGgsIHNob3VsZCBzdGFydCB3aXRoIGAvYFxuKi9cbmZ1bmN0aW9uIHJlc29sdmVSZWxhdGl2ZVBhdGgodG8sIGZyb20pIHtcblx0aWYgKHRvLnN0YXJ0c1dpdGgoXCIvXCIpKSByZXR1cm4gdG87XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgIWZyb20uc3RhcnRzV2l0aChcIi9cIikpIHtcblx0XHR3YXJuJDEoYENhbm5vdCByZXNvbHZlIGEgcmVsYXRpdmUgbG9jYXRpb24gd2l0aG91dCBhbiBhYnNvbHV0ZSBwYXRoLiBUcnlpbmcgdG8gcmVzb2x2ZSBcIiR7dG99XCIgZnJvbSBcIiR7ZnJvbX1cIi4gSXQgc2hvdWxkIGxvb2sgbGlrZSBcIi8ke2Zyb219XCIuYCk7XG5cdFx0cmV0dXJuIHRvO1xuXHR9XG5cdGlmICghdG8pIHJldHVybiBmcm9tO1xuXHRjb25zdCBmcm9tU2VnbWVudHMgPSBmcm9tLnNwbGl0KFwiL1wiKTtcblx0Y29uc3QgdG9TZWdtZW50cyA9IHRvLnNwbGl0KFwiL1wiKTtcblx0Y29uc3QgbGFzdFRvU2VnbWVudCA9IHRvU2VnbWVudHNbdG9TZWdtZW50cy5sZW5ndGggLSAxXTtcblx0aWYgKGxhc3RUb1NlZ21lbnQgPT09IFwiLi5cIiB8fCBsYXN0VG9TZWdtZW50ID09PSBcIi5cIikgdG9TZWdtZW50cy5wdXNoKFwiXCIpO1xuXHRsZXQgcG9zaXRpb24gPSBmcm9tU2VnbWVudHMubGVuZ3RoIC0gMTtcblx0bGV0IHRvUG9zaXRpb247XG5cdGxldCBzZWdtZW50O1xuXHRmb3IgKHRvUG9zaXRpb24gPSAwOyB0b1Bvc2l0aW9uIDwgdG9TZWdtZW50cy5sZW5ndGg7IHRvUG9zaXRpb24rKykge1xuXHRcdHNlZ21lbnQgPSB0b1NlZ21lbnRzW3RvUG9zaXRpb25dO1xuXHRcdGlmIChzZWdtZW50ID09PSBcIi5cIikgY29udGludWU7XG5cdFx0aWYgKHNlZ21lbnQgPT09IFwiLi5cIikge1xuXHRcdFx0aWYgKHBvc2l0aW9uID4gMSkgcG9zaXRpb24tLTtcblx0XHR9IGVsc2UgYnJlYWs7XG5cdH1cblx0cmV0dXJuIGZyb21TZWdtZW50cy5zbGljZSgwLCBwb3NpdGlvbikuam9pbihcIi9cIikgKyBcIi9cIiArIHRvU2VnbWVudHMuc2xpY2UodG9Qb3NpdGlvbikuam9pbihcIi9cIik7XG59XG4vKipcbiogSW5pdGlhbCByb3V0ZSBsb2NhdGlvbiB3aGVyZSB0aGUgcm91dGVyIGlzLiBDYW4gYmUgdXNlZCBpbiBuYXZpZ2F0aW9uIGd1YXJkc1xuKiB0byBkaWZmZXJlbnRpYXRlIHRoZSBpbml0aWFsIG5hdmlnYXRpb24uXG4qXG4qIEBleGFtcGxlXG4qIGBgYGpzXG4qIGltcG9ydCB7IFNUQVJUX0xPQ0FUSU9OIH0gZnJvbSAndnVlLXJvdXRlcidcbipcbiogcm91dGVyLmJlZm9yZUVhY2goKHRvLCBmcm9tKSA9PiB7XG4qICAgaWYgKGZyb20gPT09IFNUQVJUX0xPQ0FUSU9OKSB7XG4qICAgICAvLyBpbml0aWFsIG5hdmlnYXRpb25cbiogICB9XG4qIH0pXG4qIGBgYFxuKi9cbmNvbnN0IFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQgPSB7XG5cdHBhdGg6IFwiL1wiLFxuXHRuYW1lOiB2b2lkIDAsXG5cdHBhcmFtczoge30sXG5cdHF1ZXJ5OiB7fSxcblx0aGFzaDogXCJcIixcblx0ZnVsbFBhdGg6IFwiL1wiLFxuXHRtYXRjaGVkOiBbXSxcblx0bWV0YToge30sXG5cdHJlZGlyZWN0ZWRGcm9tOiB2b2lkIDBcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9oaXN0b3J5L2NvbW1vbi50c1xubGV0IE5hdmlnYXRpb25UeXBlID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKE5hdmlnYXRpb25UeXBlJDEpIHtcblx0TmF2aWdhdGlvblR5cGUkMVtcInBvcFwiXSA9IFwicG9wXCI7XG5cdE5hdmlnYXRpb25UeXBlJDFbXCJwdXNoXCJdID0gXCJwdXNoXCI7XG5cdHJldHVybiBOYXZpZ2F0aW9uVHlwZSQxO1xufSh7fSk7XG5sZXQgTmF2aWdhdGlvbkRpcmVjdGlvbiA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbihOYXZpZ2F0aW9uRGlyZWN0aW9uJDEpIHtcblx0TmF2aWdhdGlvbkRpcmVjdGlvbiQxW1wiYmFja1wiXSA9IFwiYmFja1wiO1xuXHROYXZpZ2F0aW9uRGlyZWN0aW9uJDFbXCJmb3J3YXJkXCJdID0gXCJmb3J3YXJkXCI7XG5cdE5hdmlnYXRpb25EaXJlY3Rpb24kMVtcInVua25vd25cIl0gPSBcIlwiO1xuXHRyZXR1cm4gTmF2aWdhdGlvbkRpcmVjdGlvbiQxO1xufSh7fSk7XG4vKipcbiogU3RhcnRpbmcgbG9jYXRpb24gZm9yIEhpc3Rvcmllc1xuKi9cbmNvbnN0IFNUQVJUID0gXCJcIjtcbi8qKlxuKiBOb3JtYWxpemVzIGEgYmFzZSBieSByZW1vdmluZyBhbnkgdHJhaWxpbmcgc2xhc2ggYW5kIHJlYWRpbmcgdGhlIGJhc2UgdGFnIGlmXG4qIHByZXNlbnQuXG4qXG4qIEBwYXJhbSBiYXNlIC0gYmFzZSB0byBub3JtYWxpemVcbiovXG5mdW5jdGlvbiBub3JtYWxpemVCYXNlKGJhc2UpIHtcblx0aWYgKCFiYXNlKSBpZiAoaXNCcm93c2VyKSB7XG5cdFx0Y29uc3QgYmFzZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJhc2VcIik7XG5cdFx0YmFzZSA9IGJhc2VFbCAmJiBiYXNlRWwuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSB8fCBcIi9cIjtcblx0XHRiYXNlID0gYmFzZS5yZXBsYWNlKC9eXFx3KzpcXC9cXC9bXlxcL10rLywgXCJcIik7XG5cdH0gZWxzZSBiYXNlID0gXCIvXCI7XG5cdGlmIChiYXNlWzBdICE9PSBcIi9cIiAmJiBiYXNlWzBdICE9PSBcIiNcIikgYmFzZSA9IFwiL1wiICsgYmFzZTtcblx0cmV0dXJuIHJlbW92ZVRyYWlsaW5nU2xhc2goYmFzZSk7XG59XG5jb25zdCBCRUZPUkVfSEFTSF9SRSA9IC9eW14jXSsjLztcbmZ1bmN0aW9uIGNyZWF0ZUhyZWYoYmFzZSwgbG9jYXRpb24pIHtcblx0cmV0dXJuIGJhc2UucmVwbGFjZShCRUZPUkVfSEFTSF9SRSwgXCIjXCIpICsgbG9jYXRpb247XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zY3JvbGxCZWhhdmlvci50c1xuZnVuY3Rpb24gZ2V0RWxlbWVudFBvc2l0aW9uKGVsLCBvZmZzZXQpIHtcblx0Y29uc3QgZG9jUmVjdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0Y29uc3QgZWxSZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdHJldHVybiB7XG5cdFx0YmVoYXZpb3I6IG9mZnNldC5iZWhhdmlvcixcblx0XHRsZWZ0OiBlbFJlY3QubGVmdCAtIGRvY1JlY3QubGVmdCAtIChvZmZzZXQubGVmdCB8fCAwKSxcblx0XHR0b3A6IGVsUmVjdC50b3AgLSBkb2NSZWN0LnRvcCAtIChvZmZzZXQudG9wIHx8IDApXG5cdH07XG59XG5jb25zdCBjb21wdXRlU2Nyb2xsUG9zaXRpb24gPSAoKSA9PiAoe1xuXHRsZWZ0OiB3aW5kb3cuc2Nyb2xsWCxcblx0dG9wOiB3aW5kb3cuc2Nyb2xsWVxufSk7XG5mdW5jdGlvbiBzY3JvbGxUb1Bvc2l0aW9uKHBvc2l0aW9uKSB7XG5cdGxldCBzY3JvbGxUb09wdGlvbnM7XG5cdGlmIChcImVsXCIgaW4gcG9zaXRpb24pIHtcblx0XHRjb25zdCBwb3NpdGlvbkVsID0gcG9zaXRpb24uZWw7XG5cdFx0Y29uc3QgaXNJZFNlbGVjdG9yID0gdHlwZW9mIHBvc2l0aW9uRWwgPT09IFwic3RyaW5nXCIgJiYgcG9zaXRpb25FbC5zdGFydHNXaXRoKFwiI1wiKTtcblx0XHQvKipcblx0XHQqIGBpZGBzIGNhbiBhY2NlcHQgcHJldHR5IG11Y2ggYW55IGNoYXJhY3RlcnMsIGluY2x1ZGluZyBDU1MgY29tYmluYXRvcnNcblx0XHQqIGxpa2UgYD5gIG9yIGB+YC4gSXQncyBzdGlsbCBwb3NzaWJsZSB0byByZXRyaWV2ZSBlbGVtZW50cyB1c2luZ1xuXHRcdCogYGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd+JylgIGJ1dCBpdCBuZWVkcyB0byBiZSBlc2NhcGVkIHdoZW4gdXNpbmdcblx0XHQqIGBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjXFxcXH4nKWAgZm9yIGl0IHRvIGJlIHZhbGlkLiBUaGUgb25seVxuXHRcdCogcmVxdWlyZW1lbnRzIGZvciBgaWRgcyBhcmUgdGhlbSB0byBiZSB1bmlxdWUgb24gdGhlIHBhZ2UgYW5kIHRvIG5vdCBiZVxuXHRcdCogZW1wdHkgKGBpZD1cIlwiYCkuIEJlY2F1c2Ugb2YgdGhhdCwgd2hlbiBwYXNzaW5nIGFuIGlkIHNlbGVjdG9yLCBpdCBzaG91bGRcblx0XHQqIGJlIHByb3Blcmx5IGVzY2FwZWQgZm9yIGl0IHRvIHdvcmsgd2l0aCBgcXVlcnlTZWxlY3RvcmAuIFdlIGNvdWxkIGNoZWNrXG5cdFx0KiBmb3IgdGhlIGlkIHNlbGVjdG9yIHRvIGJlIHNpbXBsZSAobm8gQ1NTIGNvbWJpbmF0b3JzIGArID5+YCkgYnV0IHRoYXRcblx0XHQqIHdvdWxkIG1ha2UgdGhpbmdzIGluY29uc2lzdGVudCBzaW5jZSB0aGV5IGFyZSB2YWxpZCBjaGFyYWN0ZXJzIGZvciBhblxuXHRcdCogYGlkYCBidXQgd291bGQgbmVlZCB0byBiZSBlc2NhcGVkIHdoZW4gdXNpbmcgYHF1ZXJ5U2VsZWN0b3JgLCBicmVha2luZ1xuXHRcdCogdGhlaXIgdXNhZ2UgYW5kIGVuZGluZyB1cCBpbiBubyBzZWxlY3RvciByZXR1cm5lZC4gU2VsZWN0b3JzIG5lZWQgdG8gYmVcblx0XHQqIGVzY2FwZWQ6XG5cdFx0KlxuXHRcdCogLSBgIzEtdGhpbmdgIGJlY29tZXMgYCNcXDMxIC10aGluZ2Bcblx0XHQqIC0gYCN3aXRofnN5bWJvbHNgIGJlY29tZXMgYCN3aXRoXFxcXH5zeW1ib2xzYFxuXHRcdCpcblx0XHQqIC0gTW9yZSBpbmZvcm1hdGlvbiBhYm91dCAgdGhlIHRvcGljIGNhbiBiZSBmb3VuZCBhdFxuXHRcdCogICBodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvaHRtbDUtaWQtY2xhc3MuXG5cdFx0KiAtIFByYWN0aWNhbCBleGFtcGxlOiBodHRwczovL21hdGhpYXNieW5lbnMuYmUvZGVtby9odG1sNS1pZFxuXHRcdCovXG5cdFx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiB0eXBlb2YgcG9zaXRpb24uZWwgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdGlmICghaXNJZFNlbGVjdG9yIHx8ICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb3NpdGlvbi5lbC5zbGljZSgxKSkpIHRyeSB7XG5cdFx0XHRcdGNvbnN0IGZvdW5kRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvc2l0aW9uLmVsKTtcblx0XHRcdFx0aWYgKGlzSWRTZWxlY3RvciAmJiBmb3VuZEVsKSB7XG5cdFx0XHRcdFx0d2FybiQxKGBUaGUgc2VsZWN0b3IgXCIke3Bvc2l0aW9uLmVsfVwiIHNob3VsZCBiZSBwYXNzZWQgYXMgXCJlbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignJHtwb3NpdGlvbi5lbH0nKVwiIGJlY2F1c2UgaXQgc3RhcnRzIHdpdGggXCIjXCIuYCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0d2FybiQxKGBUaGUgc2VsZWN0b3IgXCIke3Bvc2l0aW9uLmVsfVwiIGlzIGludmFsaWQuIElmIHlvdSBhcmUgdXNpbmcgYW4gaWQgc2VsZWN0b3IsIG1ha2Ugc3VyZSB0byBlc2NhcGUgaXQuIFlvdSBjYW4gZmluZCBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGVzY2FwaW5nIGNoYXJhY3RlcnMgaW4gc2VsZWN0b3JzIGF0IGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9jc3MtZXNjYXBlcyBvciB1c2UgQ1NTLmVzY2FwZSAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NTUy9lc2NhcGUpLmApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGVsID0gdHlwZW9mIHBvc2l0aW9uRWwgPT09IFwic3RyaW5nXCIgPyBpc0lkU2VsZWN0b3IgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb3NpdGlvbkVsLnNsaWNlKDEpKSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9zaXRpb25FbCkgOiBwb3NpdGlvbkVsO1xuXHRcdGlmICghZWwpIHtcblx0XHRcdHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiB3YXJuJDEoYENvdWxkbid0IGZpbmQgZWxlbWVudCB1c2luZyBzZWxlY3RvciBcIiR7cG9zaXRpb24uZWx9XCIgcmV0dXJuZWQgYnkgc2Nyb2xsQmVoYXZpb3IuYCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHNjcm9sbFRvT3B0aW9ucyA9IGdldEVsZW1lbnRQb3NpdGlvbihlbCwgcG9zaXRpb24pO1xuXHR9IGVsc2Ugc2Nyb2xsVG9PcHRpb25zID0gcG9zaXRpb247XG5cdGlmIChcInNjcm9sbEJlaGF2aW9yXCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlKSB3aW5kb3cuc2Nyb2xsVG8oc2Nyb2xsVG9PcHRpb25zKTtcblx0ZWxzZSB3aW5kb3cuc2Nyb2xsVG8oc2Nyb2xsVG9PcHRpb25zLmxlZnQgIT0gbnVsbCA/IHNjcm9sbFRvT3B0aW9ucy5sZWZ0IDogd2luZG93LnNjcm9sbFgsIHNjcm9sbFRvT3B0aW9ucy50b3AgIT0gbnVsbCA/IHNjcm9sbFRvT3B0aW9ucy50b3AgOiB3aW5kb3cuc2Nyb2xsWSk7XG59XG5mdW5jdGlvbiBnZXRTY3JvbGxLZXkocGF0aCwgZGVsdGEpIHtcblx0cmV0dXJuIChoaXN0b3J5LnN0YXRlID8gaGlzdG9yeS5zdGF0ZS5wb3NpdGlvbiAtIGRlbHRhIDogLTEpICsgcGF0aDtcbn1cbmNvbnN0IHNjcm9sbFBvc2l0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5mdW5jdGlvbiBzYXZlU2Nyb2xsUG9zaXRpb24oa2V5LCBzY3JvbGxQb3NpdGlvbikge1xuXHRzY3JvbGxQb3NpdGlvbnMuc2V0KGtleSwgc2Nyb2xsUG9zaXRpb24pO1xufVxuZnVuY3Rpb24gZ2V0U2F2ZWRTY3JvbGxQb3NpdGlvbihrZXkpIHtcblx0Y29uc3Qgc2Nyb2xsID0gc2Nyb2xsUG9zaXRpb25zLmdldChrZXkpO1xuXHRzY3JvbGxQb3NpdGlvbnMuZGVsZXRlKGtleSk7XG5cdHJldHVybiBzY3JvbGw7XG59XG4vKipcbiogU2Nyb2xsQmVoYXZpb3IgaW5zdGFuY2UgdXNlZCBieSB0aGUgcm91dGVyIHRvIGNvbXB1dGUgYW5kIHJlc3RvcmUgdGhlIHNjcm9sbFxuKiBwb3NpdGlvbiB3aGVuIG5hdmlnYXRpbmcuXG4qL1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvdHlwZXMvdHlwZUd1YXJkcy50c1xuZnVuY3Rpb24gaXNSb3V0ZUxvY2F0aW9uKHJvdXRlKSB7XG5cdHJldHVybiB0eXBlb2Ygcm91dGUgPT09IFwic3RyaW5nXCIgfHwgcm91dGUgJiYgdHlwZW9mIHJvdXRlID09PSBcIm9iamVjdFwiO1xufVxuZnVuY3Rpb24gaXNSb3V0ZU5hbWUobmFtZSkge1xuXHRyZXR1cm4gdHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG5hbWUgPT09IFwic3ltYm9sXCI7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9lcnJvcnMudHNcbi8qKlxuKiBGbGFncyBzbyB3ZSBjYW4gY29tYmluZSB0aGVtIHdoZW4gY2hlY2tpbmcgZm9yIG11bHRpcGxlIGVycm9ycy4gVGhpcyBpcyB0aGUgaW50ZXJuYWwgdmVyc2lvbiBvZlxuKiB7QGxpbmsgTmF2aWdhdGlvbkZhaWx1cmVUeXBlfS5cbipcbiogQGludGVybmFsXG4qL1xubGV0IEVycm9yVHlwZXMgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oRXJyb3JUeXBlcyQxKSB7XG5cdEVycm9yVHlwZXMkMVtFcnJvclR5cGVzJDFbXCJNQVRDSEVSX05PVF9GT1VORFwiXSA9IDFdID0gXCJNQVRDSEVSX05PVF9GT1VORFwiO1xuXHRFcnJvclR5cGVzJDFbRXJyb3JUeXBlcyQxW1wiTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVFwiXSA9IDJdID0gXCJOQVZJR0FUSU9OX0dVQVJEX1JFRElSRUNUXCI7XG5cdEVycm9yVHlwZXMkMVtFcnJvclR5cGVzJDFbXCJOQVZJR0FUSU9OX0FCT1JURURcIl0gPSA0XSA9IFwiTkFWSUdBVElPTl9BQk9SVEVEXCI7XG5cdEVycm9yVHlwZXMkMVtFcnJvclR5cGVzJDFbXCJOQVZJR0FUSU9OX0NBTkNFTExFRFwiXSA9IDhdID0gXCJOQVZJR0FUSU9OX0NBTkNFTExFRFwiO1xuXHRFcnJvclR5cGVzJDFbRXJyb3JUeXBlcyQxW1wiTkFWSUdBVElPTl9EVVBMSUNBVEVEXCJdID0gMTZdID0gXCJOQVZJR0FUSU9OX0RVUExJQ0FURURcIjtcblx0cmV0dXJuIEVycm9yVHlwZXMkMTtcbn0oe30pO1xuY29uc3QgTmF2aWdhdGlvbkZhaWx1cmVTeW1ib2wgPSBTeW1ib2wocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gXCJuYXZpZ2F0aW9uIGZhaWx1cmVcIiA6IFwiXCIpO1xuLyoqXG4qIEVudW1lcmF0aW9uIHdpdGggYWxsIHBvc3NpYmxlIHR5cGVzIGZvciBuYXZpZ2F0aW9uIGZhaWx1cmVzLiBDYW4gYmUgcGFzc2VkIHRvXG4qIHtAbGluayBpc05hdmlnYXRpb25GYWlsdXJlfSB0byBjaGVjayBmb3Igc3BlY2lmaWMgZmFpbHVyZXMuXG4qL1xubGV0IE5hdmlnYXRpb25GYWlsdXJlVHlwZSA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbihOYXZpZ2F0aW9uRmFpbHVyZVR5cGUkMSkge1xuXHQvKipcblx0KiBBbiBhYm9ydGVkIG5hdmlnYXRpb24gaXMgYSBuYXZpZ2F0aW9uIHRoYXQgZmFpbGVkIGJlY2F1c2UgYSBuYXZpZ2F0aW9uXG5cdCogZ3VhcmQgcmV0dXJuZWQgYGZhbHNlYCBvciBjYWxsZWQgYG5leHQoZmFsc2UpYFxuXHQqL1xuXHROYXZpZ2F0aW9uRmFpbHVyZVR5cGUkMVtOYXZpZ2F0aW9uRmFpbHVyZVR5cGUkMVtcImFib3J0ZWRcIl0gPSA0XSA9IFwiYWJvcnRlZFwiO1xuXHQvKipcblx0KiBBIGNhbmNlbGxlZCBuYXZpZ2F0aW9uIGlzIGEgbmF2aWdhdGlvbiB0aGF0IGZhaWxlZCBiZWNhdXNlIGEgbW9yZSByZWNlbnRcblx0KiBuYXZpZ2F0aW9uIGZpbmlzaGVkIHN0YXJ0ZWQgKG5vdCBuZWNlc3NhcmlseSBmaW5pc2hlZCkuXG5cdCovXG5cdE5hdmlnYXRpb25GYWlsdXJlVHlwZSQxW05hdmlnYXRpb25GYWlsdXJlVHlwZSQxW1wiY2FuY2VsbGVkXCJdID0gOF0gPSBcImNhbmNlbGxlZFwiO1xuXHQvKipcblx0KiBBIGR1cGxpY2F0ZWQgbmF2aWdhdGlvbiBpcyBhIG5hdmlnYXRpb24gdGhhdCBmYWlsZWQgYmVjYXVzZSBpdCB3YXNcblx0KiBpbml0aWF0ZWQgd2hpbGUgYWxyZWFkeSBiZWluZyBhdCB0aGUgZXhhY3Qgc2FtZSBsb2NhdGlvbi5cblx0Ki9cblx0TmF2aWdhdGlvbkZhaWx1cmVUeXBlJDFbTmF2aWdhdGlvbkZhaWx1cmVUeXBlJDFbXCJkdXBsaWNhdGVkXCJdID0gMTZdID0gXCJkdXBsaWNhdGVkXCI7XG5cdHJldHVybiBOYXZpZ2F0aW9uRmFpbHVyZVR5cGUkMTtcbn0oe30pO1xuY29uc3QgRXJyb3JUeXBlTWVzc2FnZXMgPSB7XG5cdFtFcnJvclR5cGVzLk1BVENIRVJfTk9UX0ZPVU5EXSh7IGxvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24gfSkge1xuXHRcdHJldHVybiBgTm8gbWF0Y2ggZm9yXFxuICR7SlNPTi5zdHJpbmdpZnkobG9jYXRpb24pfSR7Y3VycmVudExvY2F0aW9uID8gXCJcXG53aGlsZSBiZWluZyBhdFxcblwiICsgSlNPTi5zdHJpbmdpZnkoY3VycmVudExvY2F0aW9uKSA6IFwiXCJ9YDtcblx0fSxcblx0W0Vycm9yVHlwZXMuTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVF0oeyBmcm9tLCB0byB9KSB7XG5cdFx0cmV0dXJuIGBSZWRpcmVjdGVkIGZyb20gXCIke2Zyb20uZnVsbFBhdGh9XCIgdG8gXCIke3N0cmluZ2lmeVJvdXRlKHRvKX1cIiB2aWEgYSBuYXZpZ2F0aW9uIGd1YXJkLmA7XG5cdH0sXG5cdFtFcnJvclR5cGVzLk5BVklHQVRJT05fQUJPUlRFRF0oeyBmcm9tLCB0byB9KSB7XG5cdFx0cmV0dXJuIGBOYXZpZ2F0aW9uIGFib3J0ZWQgZnJvbSBcIiR7ZnJvbS5mdWxsUGF0aH1cIiB0byBcIiR7dG8uZnVsbFBhdGh9XCIgdmlhIGEgbmF2aWdhdGlvbiBndWFyZC5gO1xuXHR9LFxuXHRbRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0NBTkNFTExFRF0oeyBmcm9tLCB0byB9KSB7XG5cdFx0cmV0dXJuIGBOYXZpZ2F0aW9uIGNhbmNlbGxlZCBmcm9tIFwiJHtmcm9tLmZ1bGxQYXRofVwiIHRvIFwiJHt0by5mdWxsUGF0aH1cIiB3aXRoIGEgbmV3IG5hdmlnYXRpb24uYDtcblx0fSxcblx0W0Vycm9yVHlwZXMuTkFWSUdBVElPTl9EVVBMSUNBVEVEXSh7IGZyb20sIHRvIH0pIHtcblx0XHRyZXR1cm4gYEF2b2lkZWQgcmVkdW5kYW50IG5hdmlnYXRpb24gdG8gY3VycmVudCBsb2NhdGlvbjogXCIke2Zyb20uZnVsbFBhdGh9XCIuYDtcblx0fVxufTtcbi8qKlxuKiBDcmVhdGVzIGEgdHlwZWQgTmF2aWdhdGlvbkZhaWx1cmUgb2JqZWN0LlxuKiBAaW50ZXJuYWxcbiogQHBhcmFtIHR5cGUgLSBOYXZpZ2F0aW9uRmFpbHVyZVR5cGVcbiogQHBhcmFtIHBhcmFtcyAtIHsgZnJvbSwgdG8gfVxuKi9cbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlckVycm9yKHR5cGUsIHBhcmFtcykge1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiIHx8IGZhbHNlKSByZXR1cm4gYXNzaWduKG5ldyBFcnJvcihFcnJvclR5cGVNZXNzYWdlc1t0eXBlXShwYXJhbXMpKSwge1xuXHRcdHR5cGUsXG5cdFx0W05hdmlnYXRpb25GYWlsdXJlU3ltYm9sXTogdHJ1ZVxuXHR9LCBwYXJhbXMpO1xuXHRlbHNlIHJldHVybiBhc3NpZ24oLyogQF9fUFVSRV9fICovIG5ldyBFcnJvcigpLCB7XG5cdFx0dHlwZSxcblx0XHRbTmF2aWdhdGlvbkZhaWx1cmVTeW1ib2xdOiB0cnVlXG5cdH0sIHBhcmFtcyk7XG59XG5mdW5jdGlvbiBpc05hdmlnYXRpb25GYWlsdXJlKGVycm9yLCB0eXBlKSB7XG5cdHJldHVybiBlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIE5hdmlnYXRpb25GYWlsdXJlU3ltYm9sIGluIGVycm9yICYmICh0eXBlID09IG51bGwgfHwgISEoZXJyb3IudHlwZSAmIHR5cGUpKTtcbn1cbmNvbnN0IHByb3BlcnRpZXNUb0xvZyA9IFtcblx0XCJwYXJhbXNcIixcblx0XCJxdWVyeVwiLFxuXHRcImhhc2hcIlxuXTtcbmZ1bmN0aW9uIHN0cmluZ2lmeVJvdXRlKHRvKSB7XG5cdGlmICh0eXBlb2YgdG8gPT09IFwic3RyaW5nXCIpIHJldHVybiB0bztcblx0aWYgKHRvLnBhdGggIT0gbnVsbCkgcmV0dXJuIHRvLnBhdGg7XG5cdGNvbnN0IGxvY2F0aW9uID0ge307XG5cdGZvciAoY29uc3Qga2V5IG9mIHByb3BlcnRpZXNUb0xvZykgaWYgKGtleSBpbiB0bykgbG9jYXRpb25ba2V5XSA9IHRvW2tleV07XG5cdHJldHVybiBKU09OLnN0cmluZ2lmeShsb2NhdGlvbiwgbnVsbCwgMik7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9xdWVyeS50c1xuLyoqXG4qIFRyYW5zZm9ybXMgYSBxdWVyeVN0cmluZyBpbnRvIGEge0BsaW5rIExvY2F0aW9uUXVlcnl9IG9iamVjdC4gQWNjZXB0IGJvdGgsIGFcbiogdmVyc2lvbiB3aXRoIHRoZSBsZWFkaW5nIGA/YCBhbmQgd2l0aG91dCBTaG91bGQgd29yayBhcyBVUkxTZWFyY2hQYXJhbXNcblxuKiBAaW50ZXJuYWxcbipcbiogQHBhcmFtIHNlYXJjaCAtIHNlYXJjaCBzdHJpbmcgdG8gcGFyc2VcbiogQHJldHVybnMgYSBxdWVyeSBvYmplY3RcbiovXG5mdW5jdGlvbiBwYXJzZVF1ZXJ5KHNlYXJjaCkge1xuXHRjb25zdCBxdWVyeSA9IHt9O1xuXHRpZiAoc2VhcmNoID09PSBcIlwiIHx8IHNlYXJjaCA9PT0gXCI/XCIpIHJldHVybiBxdWVyeTtcblx0Y29uc3Qgc2VhcmNoUGFyYW1zID0gKHNlYXJjaFswXSA9PT0gXCI/XCIgPyBzZWFyY2guc2xpY2UoMSkgOiBzZWFyY2gpLnNwbGl0KFwiJlwiKTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzZWFyY2hQYXJhbXMubGVuZ3RoOyArK2kpIHtcblx0XHRjb25zdCBzZWFyY2hQYXJhbSA9IHNlYXJjaFBhcmFtc1tpXS5yZXBsYWNlKFBMVVNfUkUsIFwiIFwiKTtcblx0XHRjb25zdCBlcVBvcyA9IHNlYXJjaFBhcmFtLmluZGV4T2YoXCI9XCIpO1xuXHRcdGNvbnN0IGtleSA9IGRlY29kZShlcVBvcyA8IDAgPyBzZWFyY2hQYXJhbSA6IHNlYXJjaFBhcmFtLnNsaWNlKDAsIGVxUG9zKSk7XG5cdFx0Y29uc3QgdmFsdWUgPSBlcVBvcyA8IDAgPyBudWxsIDogZGVjb2RlKHNlYXJjaFBhcmFtLnNsaWNlKGVxUG9zICsgMSkpO1xuXHRcdGlmIChrZXkgaW4gcXVlcnkpIHtcblx0XHRcdGxldCBjdXJyZW50VmFsdWUgPSBxdWVyeVtrZXldO1xuXHRcdFx0aWYgKCFpc0FycmF5KGN1cnJlbnRWYWx1ZSkpIGN1cnJlbnRWYWx1ZSA9IHF1ZXJ5W2tleV0gPSBbY3VycmVudFZhbHVlXTtcblx0XHRcdGN1cnJlbnRWYWx1ZS5wdXNoKHZhbHVlKTtcblx0XHR9IGVsc2UgcXVlcnlba2V5XSA9IHZhbHVlO1xuXHR9XG5cdHJldHVybiBxdWVyeTtcbn1cbi8qKlxuKiBTdHJpbmdpZmllcyBhIHtAbGluayBMb2NhdGlvblF1ZXJ5UmF3fSBvYmplY3QuIExpa2UgYFVSTFNlYXJjaFBhcmFtc2AsIGl0XG4qIGRvZXNuJ3QgcHJlcGVuZCBhIGA/YFxuKlxuKiBAaW50ZXJuYWxcbipcbiogQHBhcmFtIHF1ZXJ5IC0gcXVlcnkgb2JqZWN0IHRvIHN0cmluZ2lmeVxuKiBAcmV0dXJucyBzdHJpbmcgdmVyc2lvbiBvZiB0aGUgcXVlcnkgd2l0aG91dCB0aGUgbGVhZGluZyBgP2BcbiovXG5mdW5jdGlvbiBzdHJpbmdpZnlRdWVyeShxdWVyeSkge1xuXHRsZXQgc2VhcmNoID0gXCJcIjtcblx0Zm9yIChsZXQga2V5IGluIHF1ZXJ5KSB7XG5cdFx0Y29uc3QgdmFsdWUgPSBxdWVyeVtrZXldO1xuXHRcdGtleSA9IGVuY29kZVF1ZXJ5S2V5KGtleSk7XG5cdFx0aWYgKHZhbHVlID09IG51bGwpIHtcblx0XHRcdGlmICh2YWx1ZSAhPT0gdm9pZCAwKSBzZWFyY2ggKz0gKHNlYXJjaC5sZW5ndGggPyBcIiZcIiA6IFwiXCIpICsga2V5O1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdChpc0FycmF5KHZhbHVlKSA/IHZhbHVlLm1hcCgodikgPT4gdiAmJiBlbmNvZGVRdWVyeVZhbHVlKHYpKSA6IFt2YWx1ZSAmJiBlbmNvZGVRdWVyeVZhbHVlKHZhbHVlKV0pLmZvckVhY2goKHZhbHVlJDEpID0+IHtcblx0XHRcdGlmICh2YWx1ZSQxICE9PSB2b2lkIDApIHtcblx0XHRcdFx0c2VhcmNoICs9IChzZWFyY2gubGVuZ3RoID8gXCImXCIgOiBcIlwiKSArIGtleTtcblx0XHRcdFx0aWYgKHZhbHVlJDEgIT0gbnVsbCkgc2VhcmNoICs9IFwiPVwiICsgdmFsdWUkMTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHRyZXR1cm4gc2VhcmNoO1xufVxuLyoqXG4qIFRyYW5zZm9ybXMgYSB7QGxpbmsgTG9jYXRpb25RdWVyeVJhd30gaW50byBhIHtAbGluayBMb2NhdGlvblF1ZXJ5fSBieSBjYXN0aW5nXG4qIG51bWJlcnMgaW50byBzdHJpbmdzLCByZW1vdmluZyBrZXlzIHdpdGggYW4gdW5kZWZpbmVkIHZhbHVlIGFuZCByZXBsYWNpbmdcbiogdW5kZWZpbmVkIHdpdGggbnVsbCBpbiBhcnJheXNcbipcbiogQHBhcmFtIHF1ZXJ5IC0gcXVlcnkgb2JqZWN0IHRvIG5vcm1hbGl6ZVxuKiBAcmV0dXJucyBhIG5vcm1hbGl6ZWQgcXVlcnkgb2JqZWN0XG4qL1xuZnVuY3Rpb24gbm9ybWFsaXplUXVlcnkocXVlcnkpIHtcblx0Y29uc3Qgbm9ybWFsaXplZFF1ZXJ5ID0ge307XG5cdGZvciAoY29uc3Qga2V5IGluIHF1ZXJ5KSB7XG5cdFx0Y29uc3QgdmFsdWUgPSBxdWVyeVtrZXldO1xuXHRcdGlmICh2YWx1ZSAhPT0gdm9pZCAwKSBub3JtYWxpemVkUXVlcnlba2V5XSA9IGlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKCh2KSA9PiB2ID09IG51bGwgPyBudWxsIDogXCJcIiArIHYpIDogdmFsdWUgPT0gbnVsbCA/IHZhbHVlIDogXCJcIiArIHZhbHVlO1xuXHR9XG5cdHJldHVybiBub3JtYWxpemVkUXVlcnk7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9pbmplY3Rpb25TeW1ib2xzLnRzXG4vKipcbiogUm91dGVSZWNvcmQgYmVpbmcgcmVuZGVyZWQgYnkgdGhlIGNsb3Nlc3QgYW5jZXN0b3IgUm91dGVyIFZpZXcuIFVzZWQgZm9yXG4qIGBvbkJlZm9yZVJvdXRlVXBkYXRlYCBhbmQgYG9uQmVmb3JlUm91dGVMZWF2ZWAuIHJ2bG0gc3RhbmRzIGZvciBSb3V0ZXIgVmlld1xuKiBMb2NhdGlvbiBNYXRjaGVkXG4qXG4qIEBpbnRlcm5hbFxuKi9cbmNvbnN0IG1hdGNoZWRSb3V0ZUtleSA9IFN5bWJvbChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyBcInJvdXRlciB2aWV3IGxvY2F0aW9uIG1hdGNoZWRcIiA6IFwiXCIpO1xuLyoqXG4qIEFsbG93cyBvdmVycmlkaW5nIHRoZSByb3V0ZXIgdmlldyBkZXB0aCB0byBjb250cm9sIHdoaWNoIGNvbXBvbmVudCBpblxuKiBgbWF0Y2hlZGAgaXMgcmVuZGVyZWQuIHJ2ZCBzdGFuZHMgZm9yIFJvdXRlciBWaWV3IERlcHRoXG4qXG4qIEBpbnRlcm5hbFxuKi9cbmNvbnN0IHZpZXdEZXB0aEtleSA9IFN5bWJvbChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyBcInJvdXRlciB2aWV3IGRlcHRoXCIgOiBcIlwiKTtcbi8qKlxuKiBBbGxvd3Mgb3ZlcnJpZGluZyB0aGUgcm91dGVyIGluc3RhbmNlIHJldHVybmVkIGJ5IGB1c2VSb3V0ZXJgIGluIHRlc3RzLiByXG4qIHN0YW5kcyBmb3Igcm91dGVyXG4qXG4qIEBpbnRlcm5hbFxuKi9cbmNvbnN0IHJvdXRlcktleSA9IFN5bWJvbChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyBcInJvdXRlclwiIDogXCJcIik7XG4vKipcbiogQWxsb3dzIG92ZXJyaWRpbmcgdGhlIGN1cnJlbnQgcm91dGUgcmV0dXJuZWQgYnkgYHVzZVJvdXRlYCBpbiB0ZXN0cy4gcmxcbiogc3RhbmRzIGZvciByb3V0ZSBsb2NhdGlvblxuKlxuKiBAaW50ZXJuYWxcbiovXG5jb25zdCByb3V0ZUxvY2F0aW9uS2V5ID0gU3ltYm9sKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IFwicm91dGUgbG9jYXRpb25cIiA6IFwiXCIpO1xuLyoqXG4qIEFsbG93cyBvdmVycmlkaW5nIHRoZSBjdXJyZW50IHJvdXRlIHVzZWQgYnkgcm91dGVyLXZpZXcuIEludGVybmFsbHkgdGhpcyBpc1xuKiB1c2VkIHdoZW4gdGhlIGByb3V0ZWAgcHJvcCBpcyBwYXNzZWQuXG4qXG4qIEBpbnRlcm5hbFxuKi9cbmNvbnN0IHJvdXRlclZpZXdMb2NhdGlvbktleSA9IFN5bWJvbChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyBcInJvdXRlciB2aWV3IGxvY2F0aW9uXCIgOiBcIlwiKTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3V0aWxzL2NhbGxiYWNrcy50c1xuLyoqXG4qIENyZWF0ZSBhIGxpc3Qgb2YgY2FsbGJhY2tzIHRoYXQgY2FuIGJlIHJlc2V0LiBVc2VkIHRvIGNyZWF0ZSBiZWZvcmUgYW5kIGFmdGVyIG5hdmlnYXRpb24gZ3VhcmRzIGxpc3RcbiovXG5mdW5jdGlvbiB1c2VDYWxsYmFja3MoKSB7XG5cdGxldCBoYW5kbGVycyA9IFtdO1xuXHRmdW5jdGlvbiBhZGQoaGFuZGxlcikge1xuXHRcdGhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdGNvbnN0IGkgPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xuXHRcdFx0aWYgKGkgPiAtMSkgaGFuZGxlcnMuc3BsaWNlKGksIDEpO1xuXHRcdH07XG5cdH1cblx0ZnVuY3Rpb24gcmVzZXQoKSB7XG5cdFx0aGFuZGxlcnMgPSBbXTtcblx0fVxuXHRyZXR1cm4ge1xuXHRcdGFkZCxcblx0XHRsaXN0OiAoKSA9PiBoYW5kbGVycy5zbGljZSgpLFxuXHRcdHJlc2V0XG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9uYXZpZ2F0aW9uR3VhcmRzLnRzXG5mdW5jdGlvbiByZWdpc3Rlckd1YXJkKHJlY29yZCwgbmFtZSwgZ3VhcmQpIHtcblx0Y29uc3QgcmVtb3ZlRnJvbUxpc3QgPSAoKSA9PiB7XG5cdFx0cmVjb3JkW25hbWVdLmRlbGV0ZShndWFyZCk7XG5cdH07XG5cdG9uVW5tb3VudGVkKHJlbW92ZUZyb21MaXN0KTtcblx0b25EZWFjdGl2YXRlZChyZW1vdmVGcm9tTGlzdCk7XG5cdG9uQWN0aXZhdGVkKCgpID0+IHtcblx0XHRyZWNvcmRbbmFtZV0uYWRkKGd1YXJkKTtcblx0fSk7XG5cdHJlY29yZFtuYW1lXS5hZGQoZ3VhcmQpO1xufVxuLyoqXG4qIEFkZCBhIG5hdmlnYXRpb24gZ3VhcmQgdGhhdCB0cmlnZ2VycyB3aGVuZXZlciB0aGUgY29tcG9uZW50IGZvciB0aGUgY3VycmVudFxuKiBsb2NhdGlvbiBpcyBhYm91dCB0byBiZSBsZWZ0LiBTaW1pbGFyIHRvIHtAbGluayBiZWZvcmVSb3V0ZUxlYXZlfSBidXQgY2FuIGJlXG4qIHVzZWQgaW4gYW55IGNvbXBvbmVudC4gVGhlIGd1YXJkIGlzIHJlbW92ZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVubW91bnRlZC5cbipcbiogQHBhcmFtIGxlYXZlR3VhcmQgLSB7QGxpbmsgTmF2aWdhdGlvbkd1YXJkfVxuKi9cbmZ1bmN0aW9uIG9uQmVmb3JlUm91dGVMZWF2ZShsZWF2ZUd1YXJkKSB7XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgIWdldEN1cnJlbnRJbnN0YW5jZSgpKSB7XG5cdFx0d2FybiQxKFwiZ2V0Q3VycmVudEluc3RhbmNlKCkgcmV0dXJuZWQgbnVsbC4gb25CZWZvcmVSb3V0ZUxlYXZlKCkgbXVzdCBiZSBjYWxsZWQgYXQgdGhlIHRvcCBvZiBhIHNldHVwIGZ1bmN0aW9uXCIpO1xuXHRcdHJldHVybjtcblx0fVxuXHRjb25zdCBhY3RpdmVSZWNvcmQgPSBpbmplY3QobWF0Y2hlZFJvdXRlS2V5LCB7fSkudmFsdWU7XG5cdGlmICghYWN0aXZlUmVjb3JkKSB7XG5cdFx0cHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiICYmIHdhcm4kMShcIk5vIGFjdGl2ZSByb3V0ZSByZWNvcmQgd2FzIGZvdW5kIHdoZW4gY2FsbGluZyBgb25CZWZvcmVSb3V0ZUxlYXZlKClgLiBNYWtlIHN1cmUgeW91IGNhbGwgdGhpcyBmdW5jdGlvbiBpbnNpZGUgYSBjb21wb25lbnQgY2hpbGQgb2YgPHJvdXRlci12aWV3Pi4gTWF5YmUgeW91IGNhbGxlZCBpdCBpbnNpZGUgb2YgQXBwLnZ1ZT9cIik7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHJlZ2lzdGVyR3VhcmQoYWN0aXZlUmVjb3JkLCBcImxlYXZlR3VhcmRzXCIsIGxlYXZlR3VhcmQpO1xufVxuLyoqXG4qIEFkZCBhIG5hdmlnYXRpb24gZ3VhcmQgdGhhdCB0cmlnZ2VycyB3aGVuZXZlciB0aGUgY3VycmVudCBsb2NhdGlvbiBpcyBhYm91dFxuKiB0byBiZSB1cGRhdGVkLiBTaW1pbGFyIHRvIHtAbGluayBiZWZvcmVSb3V0ZVVwZGF0ZX0gYnV0IGNhbiBiZSB1c2VkIGluIGFueVxuKiBjb21wb25lbnQuIFRoZSBndWFyZCBpcyByZW1vdmVkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQuXG4qXG4qIEBwYXJhbSB1cGRhdGVHdWFyZCAtIHtAbGluayBOYXZpZ2F0aW9uR3VhcmR9XG4qL1xuZnVuY3Rpb24gb25CZWZvcmVSb3V0ZVVwZGF0ZSh1cGRhdGVHdWFyZCkge1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiICYmICFnZXRDdXJyZW50SW5zdGFuY2UoKSkge1xuXHRcdHdhcm4kMShcImdldEN1cnJlbnRJbnN0YW5jZSgpIHJldHVybmVkIG51bGwuIG9uQmVmb3JlUm91dGVVcGRhdGUoKSBtdXN0IGJlIGNhbGxlZCBhdCB0aGUgdG9wIG9mIGEgc2V0dXAgZnVuY3Rpb25cIik7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdGNvbnN0IGFjdGl2ZVJlY29yZCA9IGluamVjdChtYXRjaGVkUm91dGVLZXksIHt9KS52YWx1ZTtcblx0aWYgKCFhY3RpdmVSZWNvcmQpIHtcblx0XHRwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgd2FybiQxKFwiTm8gYWN0aXZlIHJvdXRlIHJlY29yZCB3YXMgZm91bmQgd2hlbiBjYWxsaW5nIGBvbkJlZm9yZVJvdXRlVXBkYXRlKClgLiBNYWtlIHN1cmUgeW91IGNhbGwgdGhpcyBmdW5jdGlvbiBpbnNpZGUgYSBjb21wb25lbnQgY2hpbGQgb2YgPHJvdXRlci12aWV3Pi4gTWF5YmUgeW91IGNhbGxlZCBpdCBpbnNpZGUgb2YgQXBwLnZ1ZT9cIik7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHJlZ2lzdGVyR3VhcmQoYWN0aXZlUmVjb3JkLCBcInVwZGF0ZUd1YXJkc1wiLCB1cGRhdGVHdWFyZCk7XG59XG5mdW5jdGlvbiBndWFyZFRvUHJvbWlzZUZuKGd1YXJkLCB0bywgZnJvbSwgcmVjb3JkLCBuYW1lLCBydW5XaXRoQ29udGV4dCA9IChmbikgPT4gZm4oKSkge1xuXHRjb25zdCBlbnRlckNhbGxiYWNrQXJyYXkgPSByZWNvcmQgJiYgKHJlY29yZC5lbnRlckNhbGxiYWNrc1tuYW1lXSA9IHJlY29yZC5lbnRlckNhbGxiYWNrc1tuYW1lXSB8fCBbXSk7XG5cdHJldHVybiAoKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0Y29uc3QgbmV4dCA9ICh2YWxpZCkgPT4ge1xuXHRcdFx0aWYgKHZhbGlkID09PSBmYWxzZSkgcmVqZWN0KGNyZWF0ZVJvdXRlckVycm9yKEVycm9yVHlwZXMuTkFWSUdBVElPTl9BQk9SVEVELCB7XG5cdFx0XHRcdGZyb20sXG5cdFx0XHRcdHRvXG5cdFx0XHR9KSk7XG5cdFx0XHRlbHNlIGlmICh2YWxpZCBpbnN0YW5jZW9mIEVycm9yKSByZWplY3QodmFsaWQpO1xuXHRcdFx0ZWxzZSBpZiAoaXNSb3V0ZUxvY2F0aW9uKHZhbGlkKSkgcmVqZWN0KGNyZWF0ZVJvdXRlckVycm9yKEVycm9yVHlwZXMuTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVCwge1xuXHRcdFx0XHRmcm9tOiB0byxcblx0XHRcdFx0dG86IHZhbGlkXG5cdFx0XHR9KSk7XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0aWYgKGVudGVyQ2FsbGJhY2tBcnJheSAmJiByZWNvcmQuZW50ZXJDYWxsYmFja3NbbmFtZV0gPT09IGVudGVyQ2FsbGJhY2tBcnJheSAmJiB0eXBlb2YgdmFsaWQgPT09IFwiZnVuY3Rpb25cIikgZW50ZXJDYWxsYmFja0FycmF5LnB1c2godmFsaWQpO1xuXHRcdFx0XHRyZXNvbHZlKCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRjb25zdCBndWFyZFJldHVybiA9IHJ1bldpdGhDb250ZXh0KCgpID0+IGd1YXJkLmNhbGwocmVjb3JkICYmIHJlY29yZC5pbnN0YW5jZXNbbmFtZV0sIHRvLCBmcm9tLCBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyBjYW5Pbmx5QmVDYWxsZWRPbmNlKG5leHQsIHRvLCBmcm9tKSA6IG5leHQpKTtcblx0XHRsZXQgZ3VhcmRDYWxsID0gUHJvbWlzZS5yZXNvbHZlKGd1YXJkUmV0dXJuKTtcblx0XHRpZiAoZ3VhcmQubGVuZ3RoIDwgMykgZ3VhcmRDYWxsID0gZ3VhcmRDYWxsLnRoZW4obmV4dCk7XG5cdFx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiBndWFyZC5sZW5ndGggPiAyKSB7XG5cdFx0XHRjb25zdCBtZXNzYWdlID0gYFRoZSBcIm5leHRcIiBjYWxsYmFjayB3YXMgbmV2ZXIgY2FsbGVkIGluc2lkZSBvZiAke2d1YXJkLm5hbWUgPyBcIlxcXCJcIiArIGd1YXJkLm5hbWUgKyBcIlxcXCJcIiA6IFwiXCJ9OlxcbiR7Z3VhcmQudG9TdHJpbmcoKX1cXG4uIElmIHlvdSBhcmUgcmV0dXJuaW5nIGEgdmFsdWUgaW5zdGVhZCBvZiBjYWxsaW5nIFwibmV4dFwiLCBtYWtlIHN1cmUgdG8gcmVtb3ZlIHRoZSBcIm5leHRcIiBwYXJhbWV0ZXIgZnJvbSB5b3VyIGZ1bmN0aW9uLmA7XG5cdFx0XHRpZiAodHlwZW9mIGd1YXJkUmV0dXJuID09PSBcIm9iamVjdFwiICYmIFwidGhlblwiIGluIGd1YXJkUmV0dXJuKSBndWFyZENhbGwgPSBndWFyZENhbGwudGhlbigocmVzb2x2ZWRWYWx1ZSkgPT4ge1xuXHRcdFx0XHRpZiAoIW5leHQuX2NhbGxlZCkge1xuXHRcdFx0XHRcdHdhcm4kMShtZXNzYWdlKTtcblx0XHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoLyogQF9fUFVSRV9fICovIG5ldyBFcnJvcihcIkludmFsaWQgbmF2aWdhdGlvbiBndWFyZFwiKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJlc29sdmVkVmFsdWU7XG5cdFx0XHR9KTtcblx0XHRcdGVsc2UgaWYgKGd1YXJkUmV0dXJuICE9PSB2b2lkIDApIHtcblx0XHRcdFx0aWYgKCFuZXh0Ll9jYWxsZWQpIHtcblx0XHRcdFx0XHR3YXJuJDEobWVzc2FnZSk7XG5cdFx0XHRcdFx0cmVqZWN0KC8qIEBfX1BVUkVfXyAqLyBuZXcgRXJyb3IoXCJJbnZhbGlkIG5hdmlnYXRpb24gZ3VhcmRcIikpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRndWFyZENhbGwuY2F0Y2goKGVycikgPT4gcmVqZWN0KGVycikpO1xuXHR9KTtcbn1cbmZ1bmN0aW9uIGNhbk9ubHlCZUNhbGxlZE9uY2UobmV4dCwgdG8sIGZyb20pIHtcblx0bGV0IGNhbGxlZCA9IDA7XG5cdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRpZiAoY2FsbGVkKysgPT09IDEpIHdhcm4kMShgVGhlIFwibmV4dFwiIGNhbGxiYWNrIHdhcyBjYWxsZWQgbW9yZSB0aGFuIG9uY2UgaW4gb25lIG5hdmlnYXRpb24gZ3VhcmQgd2hlbiBnb2luZyBmcm9tIFwiJHtmcm9tLmZ1bGxQYXRofVwiIHRvIFwiJHt0by5mdWxsUGF0aH1cIi4gSXQgc2hvdWxkIGJlIGNhbGxlZCBleGFjdGx5IG9uZSB0aW1lIGluIGVhY2ggbmF2aWdhdGlvbiBndWFyZC4gVGhpcyB3aWxsIGZhaWwgaW4gcHJvZHVjdGlvbi5gKTtcblx0XHRuZXh0Ll9jYWxsZWQgPSB0cnVlO1xuXHRcdGlmIChjYWxsZWQgPT09IDEpIG5leHQuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcblx0fTtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RDb21wb25lbnRzR3VhcmRzKG1hdGNoZWQsIGd1YXJkVHlwZSwgdG8sIGZyb20sIHJ1bldpdGhDb250ZXh0ID0gKGZuKSA9PiBmbigpKSB7XG5cdGNvbnN0IGd1YXJkcyA9IFtdO1xuXHRmb3IgKGNvbnN0IHJlY29yZCBvZiBtYXRjaGVkKSB7XG5cdFx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiAhcmVjb3JkLmNvbXBvbmVudHMgJiYgcmVjb3JkLmNoaWxkcmVuICYmICFyZWNvcmQuY2hpbGRyZW4ubGVuZ3RoKSB3YXJuJDEoYFJlY29yZCB3aXRoIHBhdGggXCIke3JlY29yZC5wYXRofVwiIGlzIGVpdGhlciBtaXNzaW5nIGEgXCJjb21wb25lbnQocylcIiBvciBcImNoaWxkcmVuXCIgcHJvcGVydHkuYCk7XG5cdFx0Zm9yIChjb25zdCBuYW1lIGluIHJlY29yZC5jb21wb25lbnRzKSB7XG5cdFx0XHRsZXQgcmF3Q29tcG9uZW50ID0gcmVjb3JkLmNvbXBvbmVudHNbbmFtZV07XG5cdFx0XHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG5cdFx0XHRcdGlmICghcmF3Q29tcG9uZW50IHx8IHR5cGVvZiByYXdDb21wb25lbnQgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJhd0NvbXBvbmVudCAhPT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdFx0d2FybiQxKGBDb21wb25lbnQgXCIke25hbWV9XCIgaW4gcmVjb3JkIHdpdGggcGF0aCBcIiR7cmVjb3JkLnBhdGh9XCIgaXMgbm90IGEgdmFsaWQgY29tcG9uZW50LiBSZWNlaXZlZCBcIiR7U3RyaW5nKHJhd0NvbXBvbmVudCl9XCIuYCk7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCByb3V0ZSBjb21wb25lbnRcIik7XG5cdFx0XHRcdH0gZWxzZSBpZiAoXCJ0aGVuXCIgaW4gcmF3Q29tcG9uZW50KSB7XG5cdFx0XHRcdFx0d2FybiQxKGBDb21wb25lbnQgXCIke25hbWV9XCIgaW4gcmVjb3JkIHdpdGggcGF0aCBcIiR7cmVjb3JkLnBhdGh9XCIgaXMgYSBQcm9taXNlIGluc3RlYWQgb2YgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBQcm9taXNlLiBEaWQgeW91IHdyaXRlIFwiaW1wb3J0KCcuL015UGFnZS52dWUnKVwiIGluc3RlYWQgb2YgXCIoKSA9PiBpbXBvcnQoJy4vTXlQYWdlLnZ1ZScpXCIgPyBUaGlzIHdpbGwgYnJlYWsgaW4gcHJvZHVjdGlvbiBpZiBub3QgZml4ZWQuYCk7XG5cdFx0XHRcdFx0Y29uc3QgcHJvbWlzZSA9IHJhd0NvbXBvbmVudDtcblx0XHRcdFx0XHRyYXdDb21wb25lbnQgPSAoKSA9PiBwcm9taXNlO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHJhd0NvbXBvbmVudC5fX2FzeW5jTG9hZGVyICYmICFyYXdDb21wb25lbnQuX193YXJuZWREZWZpbmVBc3luYykge1xuXHRcdFx0XHRcdHJhd0NvbXBvbmVudC5fX3dhcm5lZERlZmluZUFzeW5jID0gdHJ1ZTtcblx0XHRcdFx0XHR3YXJuJDEoYENvbXBvbmVudCBcIiR7bmFtZX1cIiBpbiByZWNvcmQgd2l0aCBwYXRoIFwiJHtyZWNvcmQucGF0aH1cIiBpcyBkZWZpbmVkIHVzaW5nIFwiZGVmaW5lQXN5bmNDb21wb25lbnQoKVwiLiBXcml0ZSBcIigpID0+IGltcG9ydCgnLi9NeVBhZ2UudnVlJylcIiBpbnN0ZWFkIG9mIFwiZGVmaW5lQXN5bmNDb21wb25lbnQoKCkgPT4gaW1wb3J0KCcuL015UGFnZS52dWUnKSlcIi5gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKGd1YXJkVHlwZSAhPT0gXCJiZWZvcmVSb3V0ZUVudGVyXCIgJiYgIXJlY29yZC5pbnN0YW5jZXNbbmFtZV0pIGNvbnRpbnVlO1xuXHRcdFx0aWYgKGlzUm91dGVDb21wb25lbnQocmF3Q29tcG9uZW50KSkge1xuXHRcdFx0XHRjb25zdCBndWFyZCA9IChyYXdDb21wb25lbnQuX192Y2NPcHRzIHx8IHJhd0NvbXBvbmVudClbZ3VhcmRUeXBlXTtcblx0XHRcdFx0Z3VhcmQgJiYgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20sIHJlY29yZCwgbmFtZSwgcnVuV2l0aENvbnRleHQpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGxldCBjb21wb25lbnRQcm9taXNlID0gcmF3Q29tcG9uZW50KCk7XG5cdFx0XHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgIShcImNhdGNoXCIgaW4gY29tcG9uZW50UHJvbWlzZSkpIHtcblx0XHRcdFx0XHR3YXJuJDEoYENvbXBvbmVudCBcIiR7bmFtZX1cIiBpbiByZWNvcmQgd2l0aCBwYXRoIFwiJHtyZWNvcmQucGF0aH1cIiBpcyBhIGZ1bmN0aW9uIHRoYXQgZG9lcyBub3QgcmV0dXJuIGEgUHJvbWlzZS4gSWYgeW91IHdlcmUgcGFzc2luZyBhIGZ1bmN0aW9uYWwgY29tcG9uZW50LCBtYWtlIHN1cmUgdG8gYWRkIGEgXCJkaXNwbGF5TmFtZVwiIHRvIHRoZSBjb21wb25lbnQuIFRoaXMgd2lsbCBicmVhayBpbiBwcm9kdWN0aW9uIGlmIG5vdCBmaXhlZC5gKTtcblx0XHRcdFx0XHRjb21wb25lbnRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGNvbXBvbmVudFByb21pc2UpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGd1YXJkcy5wdXNoKCgpID0+IGNvbXBvbmVudFByb21pc2UudGhlbigocmVzb2x2ZWQpID0+IHtcblx0XHRcdFx0XHRpZiAoIXJlc29sdmVkKSB0aHJvdyBuZXcgRXJyb3IoYENvdWxkbid0IHJlc29sdmUgY29tcG9uZW50IFwiJHtuYW1lfVwiIGF0IFwiJHtyZWNvcmQucGF0aH1cImApO1xuXHRcdFx0XHRcdGNvbnN0IHJlc29sdmVkQ29tcG9uZW50ID0gaXNFU01vZHVsZShyZXNvbHZlZCkgPyByZXNvbHZlZC5kZWZhdWx0IDogcmVzb2x2ZWQ7XG5cdFx0XHRcdFx0cmVjb3JkLm1vZHNbbmFtZV0gPSByZXNvbHZlZDtcblx0XHRcdFx0XHRyZWNvcmQuY29tcG9uZW50c1tuYW1lXSA9IHJlc29sdmVkQ29tcG9uZW50O1xuXHRcdFx0XHRcdGNvbnN0IGd1YXJkID0gKHJlc29sdmVkQ29tcG9uZW50Ll9fdmNjT3B0cyB8fCByZXNvbHZlZENvbXBvbmVudClbZ3VhcmRUeXBlXTtcblx0XHRcdFx0XHRyZXR1cm4gZ3VhcmQgJiYgZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20sIHJlY29yZCwgbmFtZSwgcnVuV2l0aENvbnRleHQpKCk7XG5cdFx0XHRcdH0pKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIGd1YXJkcztcbn1cbi8qKlxuKiBFbnN1cmVzIGEgcm91dGUgaXMgbG9hZGVkLCBzbyBpdCBjYW4gYmUgcGFzc2VkIGFzIG8gcHJvcCB0byBgPFJvdXRlclZpZXc+YC5cbipcbiogQHBhcmFtIHJvdXRlIC0gcmVzb2x2ZWQgcm91dGUgdG8gbG9hZFxuKi9cbmZ1bmN0aW9uIGxvYWRSb3V0ZUxvY2F0aW9uKHJvdXRlKSB7XG5cdHJldHVybiByb3V0ZS5tYXRjaGVkLmV2ZXJ5KChyZWNvcmQpID0+IHJlY29yZC5yZWRpcmVjdCkgPyBQcm9taXNlLnJlamVjdCgvKiBAX19QVVJFX18gKi8gbmV3IEVycm9yKFwiQ2Fubm90IGxvYWQgYSByb3V0ZSB0aGF0IHJlZGlyZWN0cy5cIikpIDogUHJvbWlzZS5hbGwocm91dGUubWF0Y2hlZC5tYXAoKHJlY29yZCkgPT4gcmVjb3JkLmNvbXBvbmVudHMgJiYgUHJvbWlzZS5hbGwoT2JqZWN0LmtleXMocmVjb3JkLmNvbXBvbmVudHMpLnJlZHVjZSgocHJvbWlzZXMsIG5hbWUpID0+IHtcblx0XHRjb25zdCByYXdDb21wb25lbnQgPSByZWNvcmQuY29tcG9uZW50c1tuYW1lXTtcblx0XHRpZiAodHlwZW9mIHJhd0NvbXBvbmVudCA9PT0gXCJmdW5jdGlvblwiICYmICEoXCJkaXNwbGF5TmFtZVwiIGluIHJhd0NvbXBvbmVudCkpIHByb21pc2VzLnB1c2gocmF3Q29tcG9uZW50KCkudGhlbigocmVzb2x2ZWQpID0+IHtcblx0XHRcdGlmICghcmVzb2x2ZWQpIHJldHVybiBQcm9taXNlLnJlamVjdCgvKiBAX19QVVJFX18gKi8gbmV3IEVycm9yKGBDb3VsZG4ndCByZXNvbHZlIGNvbXBvbmVudCBcIiR7bmFtZX1cIiBhdCBcIiR7cmVjb3JkLnBhdGh9XCIuIEVuc3VyZSB5b3UgcGFzc2VkIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcHJvbWlzZS5gKSk7XG5cdFx0XHRjb25zdCByZXNvbHZlZENvbXBvbmVudCA9IGlzRVNNb2R1bGUocmVzb2x2ZWQpID8gcmVzb2x2ZWQuZGVmYXVsdCA6IHJlc29sdmVkO1xuXHRcdFx0cmVjb3JkLm1vZHNbbmFtZV0gPSByZXNvbHZlZDtcblx0XHRcdHJlY29yZC5jb21wb25lbnRzW25hbWVdID0gcmVzb2x2ZWRDb21wb25lbnQ7XG5cdFx0fSkpO1xuXHRcdHJldHVybiBwcm9taXNlcztcblx0fSwgW10pKSkpLnRoZW4oKCkgPT4gcm91dGUpO1xufVxuLyoqXG4qIFNwbGl0IHRoZSBsZWF2aW5nLCB1cGRhdGluZywgYW5kIGVudGVyaW5nIHJlY29yZHMuXG4qIEBpbnRlcm5hbFxuKlxuKiBAcGFyYW0gIHRvIC0gTG9jYXRpb24gd2UgYXJlIG5hdmlnYXRpbmcgdG9cbiogQHBhcmFtIGZyb20gLSBMb2NhdGlvbiB3ZSBhcmUgbmF2aWdhdGluZyBmcm9tXG4qL1xuZnVuY3Rpb24gZXh0cmFjdENoYW5naW5nUmVjb3Jkcyh0bywgZnJvbSkge1xuXHRjb25zdCBsZWF2aW5nUmVjb3JkcyA9IFtdO1xuXHRjb25zdCB1cGRhdGluZ1JlY29yZHMgPSBbXTtcblx0Y29uc3QgZW50ZXJpbmdSZWNvcmRzID0gW107XG5cdGNvbnN0IGxlbiA9IE1hdGgubWF4KGZyb20ubWF0Y2hlZC5sZW5ndGgsIHRvLm1hdGNoZWQubGVuZ3RoKTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHRcdGNvbnN0IHJlY29yZEZyb20gPSBmcm9tLm1hdGNoZWRbaV07XG5cdFx0aWYgKHJlY29yZEZyb20pIGlmICh0by5tYXRjaGVkLmZpbmQoKHJlY29yZCkgPT4gaXNTYW1lUm91dGVSZWNvcmQocmVjb3JkLCByZWNvcmRGcm9tKSkpIHVwZGF0aW5nUmVjb3Jkcy5wdXNoKHJlY29yZEZyb20pO1xuXHRcdGVsc2UgbGVhdmluZ1JlY29yZHMucHVzaChyZWNvcmRGcm9tKTtcblx0XHRjb25zdCByZWNvcmRUbyA9IHRvLm1hdGNoZWRbaV07XG5cdFx0aWYgKHJlY29yZFRvKSB7XG5cdFx0XHRpZiAoIWZyb20ubWF0Y2hlZC5maW5kKChyZWNvcmQpID0+IGlzU2FtZVJvdXRlUmVjb3JkKHJlY29yZCwgcmVjb3JkVG8pKSkgZW50ZXJpbmdSZWNvcmRzLnB1c2gocmVjb3JkVG8pO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gW1xuXHRcdGxlYXZpbmdSZWNvcmRzLFxuXHRcdHVwZGF0aW5nUmVjb3Jkcyxcblx0XHRlbnRlcmluZ1JlY29yZHNcblx0XTtcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2RldnRvb2xzLnRzXG4vKipcbiogQ29waWVzIGEgcm91dGUgbG9jYXRpb24gYW5kIHJlbW92ZXMgYW55IHByb2JsZW1hdGljIHByb3BlcnRpZXMgdGhhdCBjYW5ub3QgYmUgc2hvd24gaW4gZGV2dG9vbHMgKGUuZy4gVnVlIGluc3RhbmNlcykuXG4qXG4qIEBwYXJhbSByb3V0ZUxvY2F0aW9uIC0gcm91dGVMb2NhdGlvbiB0byBmb3JtYXRcbiogQHBhcmFtIHRvb2x0aXAgLSBvcHRpb25hbCB0b29sdGlwXG4qIEByZXR1cm5zIGEgY29weSBvZiB0aGUgcm91dGVMb2NhdGlvblxuKi9cbmZ1bmN0aW9uIGZvcm1hdFJvdXRlTG9jYXRpb24ocm91dGVMb2NhdGlvbiwgdG9vbHRpcCkge1xuXHRjb25zdCBjb3B5ID0gYXNzaWduKHt9LCByb3V0ZUxvY2F0aW9uLCB7IG1hdGNoZWQ6IHJvdXRlTG9jYXRpb24ubWF0Y2hlZC5tYXAoKG1hdGNoZWQpID0+IG9taXQobWF0Y2hlZCwgW1xuXHRcdFwiaW5zdGFuY2VzXCIsXG5cdFx0XCJjaGlsZHJlblwiLFxuXHRcdFwiYWxpYXNPZlwiXG5cdF0pKSB9KTtcblx0cmV0dXJuIHsgX2N1c3RvbToge1xuXHRcdHR5cGU6IG51bGwsXG5cdFx0cmVhZE9ubHk6IHRydWUsXG5cdFx0ZGlzcGxheTogcm91dGVMb2NhdGlvbi5mdWxsUGF0aCxcblx0XHR0b29sdGlwLFxuXHRcdHZhbHVlOiBjb3B5XG5cdH0gfTtcbn1cbmZ1bmN0aW9uIGZvcm1hdERpc3BsYXkoZGlzcGxheSkge1xuXHRyZXR1cm4geyBfY3VzdG9tOiB7IGRpc3BsYXkgfSB9O1xufVxubGV0IHJvdXRlcklkID0gMDtcbmZ1bmN0aW9uIGFkZERldnRvb2xzKGFwcCwgcm91dGVyLCBtYXRjaGVyKSB7XG5cdGlmIChyb3V0ZXIuX19oYXNEZXZ0b29scykgcmV0dXJuO1xuXHRyb3V0ZXIuX19oYXNEZXZ0b29scyA9IHRydWU7XG5cdGNvbnN0IGlkID0gcm91dGVySWQrKztcblx0c2V0dXBEZXZ0b29sc1BsdWdpbih7XG5cdFx0aWQ6IFwib3JnLnZ1ZWpzLnJvdXRlclwiICsgKGlkID8gXCIuXCIgKyBpZCA6IFwiXCIpLFxuXHRcdGxhYmVsOiBcIlZ1ZSBSb3V0ZXJcIixcblx0XHRwYWNrYWdlTmFtZTogXCJ2dWUtcm91dGVyXCIsXG5cdFx0aG9tZXBhZ2U6IFwiaHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnXCIsXG5cdFx0bG9nbzogXCJodHRwczovL3JvdXRlci52dWVqcy5vcmcvbG9nby5wbmdcIixcblx0XHRjb21wb25lbnRTdGF0ZVR5cGVzOiBbXCJSb3V0aW5nXCJdLFxuXHRcdGFwcFxuXHR9LCAoYXBpKSA9PiB7XG5cdFx0aWYgKHR5cGVvZiBhcGkubm93ICE9PSBcImZ1bmN0aW9uXCIpIHdhcm4kMShcIltWdWUgUm91dGVyXTogWW91IHNlZW0gdG8gYmUgdXNpbmcgYW4gb3V0ZGF0ZWQgdmVyc2lvbiBvZiBWdWUgRGV2dG9vbHMuIEFyZSB5b3Ugc3RpbGwgdXNpbmcgdGhlIEJldGEgcmVsZWFzZSBpbnN0ZWFkIG9mIHRoZSBzdGFibGUgb25lPyBZb3UgY2FuIGZpbmQgdGhlIGxpbmtzIGF0IGh0dHBzOi8vZGV2dG9vbHMudnVlanMub3JnL2d1aWRlL2luc3RhbGxhdGlvbi5odG1sLlwiKTtcblx0XHRhcGkub24uaW5zcGVjdENvbXBvbmVudCgocGF5bG9hZCwgY3R4KSA9PiB7XG5cdFx0XHRpZiAocGF5bG9hZC5pbnN0YW5jZURhdGEpIHBheWxvYWQuaW5zdGFuY2VEYXRhLnN0YXRlLnB1c2goe1xuXHRcdFx0XHR0eXBlOiBcIlJvdXRpbmdcIixcblx0XHRcdFx0a2V5OiBcIiRyb3V0ZVwiLFxuXHRcdFx0XHRlZGl0YWJsZTogZmFsc2UsXG5cdFx0XHRcdHZhbHVlOiBmb3JtYXRSb3V0ZUxvY2F0aW9uKHJvdXRlci5jdXJyZW50Um91dGUudmFsdWUsIFwiQ3VycmVudCBSb3V0ZVwiKVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0YXBpLm9uLnZpc2l0Q29tcG9uZW50VHJlZSgoeyB0cmVlTm9kZTogbm9kZSwgY29tcG9uZW50SW5zdGFuY2UgfSkgPT4ge1xuXHRcdFx0aWYgKGNvbXBvbmVudEluc3RhbmNlLl9fdnJ2X2RldnRvb2xzKSB7XG5cdFx0XHRcdGNvbnN0IGluZm8gPSBjb21wb25lbnRJbnN0YW5jZS5fX3Zydl9kZXZ0b29scztcblx0XHRcdFx0bm9kZS50YWdzLnB1c2goe1xuXHRcdFx0XHRcdGxhYmVsOiAoaW5mby5uYW1lID8gYCR7aW5mby5uYW1lLnRvU3RyaW5nKCl9OiBgIDogXCJcIikgKyBpbmZvLnBhdGgsXG5cdFx0XHRcdFx0dGV4dENvbG9yOiAwLFxuXHRcdFx0XHRcdHRvb2x0aXA6IFwiVGhpcyBjb21wb25lbnQgaXMgcmVuZGVyZWQgYnkgJmx0O3JvdXRlci12aWV3Jmd0O1wiLFxuXHRcdFx0XHRcdGJhY2tncm91bmRDb2xvcjogUElOS181MDBcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoaXNBcnJheShjb21wb25lbnRJbnN0YW5jZS5fX3ZybF9kZXZ0b29scykpIHtcblx0XHRcdFx0Y29tcG9uZW50SW5zdGFuY2UuX19kZXZ0b29sc0FwaSA9IGFwaTtcblx0XHRcdFx0Y29tcG9uZW50SW5zdGFuY2UuX192cmxfZGV2dG9vbHMuZm9yRWFjaCgoZGV2dG9vbHNEYXRhKSA9PiB7XG5cdFx0XHRcdFx0bGV0IGxhYmVsID0gZGV2dG9vbHNEYXRhLnJvdXRlLnBhdGg7XG5cdFx0XHRcdFx0bGV0IGJhY2tncm91bmRDb2xvciA9IE9SQU5HRV80MDA7XG5cdFx0XHRcdFx0bGV0IHRvb2x0aXAgPSBcIlwiO1xuXHRcdFx0XHRcdGxldCB0ZXh0Q29sb3IgPSAwO1xuXHRcdFx0XHRcdGlmIChkZXZ0b29sc0RhdGEuZXJyb3IpIHtcblx0XHRcdFx0XHRcdGxhYmVsID0gZGV2dG9vbHNEYXRhLmVycm9yO1xuXHRcdFx0XHRcdFx0YmFja2dyb3VuZENvbG9yID0gUkVEXzEwMDtcblx0XHRcdFx0XHRcdHRleHRDb2xvciA9IFJFRF83MDA7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChkZXZ0b29sc0RhdGEuaXNFeGFjdEFjdGl2ZSkge1xuXHRcdFx0XHRcdFx0YmFja2dyb3VuZENvbG9yID0gTElNRV81MDA7XG5cdFx0XHRcdFx0XHR0b29sdGlwID0gXCJUaGlzIGlzIGV4YWN0bHkgYWN0aXZlXCI7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChkZXZ0b29sc0RhdGEuaXNBY3RpdmUpIHtcblx0XHRcdFx0XHRcdGJhY2tncm91bmRDb2xvciA9IEJMVUVfNjAwO1xuXHRcdFx0XHRcdFx0dG9vbHRpcCA9IFwiVGhpcyBsaW5rIGlzIGFjdGl2ZVwiO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRub2RlLnRhZ3MucHVzaCh7XG5cdFx0XHRcdFx0XHRsYWJlbCxcblx0XHRcdFx0XHRcdHRleHRDb2xvcixcblx0XHRcdFx0XHRcdHRvb2x0aXAsXG5cdFx0XHRcdFx0XHRiYWNrZ3JvdW5kQ29sb3Jcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0d2F0Y2gocm91dGVyLmN1cnJlbnRSb3V0ZSwgKCkgPT4ge1xuXHRcdFx0cmVmcmVzaFJvdXRlc1ZpZXcoKTtcblx0XHRcdGFwaS5ub3RpZnlDb21wb25lbnRVcGRhdGUoKTtcblx0XHRcdGFwaS5zZW5kSW5zcGVjdG9yVHJlZShyb3V0ZXJJbnNwZWN0b3JJZCk7XG5cdFx0XHRhcGkuc2VuZEluc3BlY3RvclN0YXRlKHJvdXRlckluc3BlY3RvcklkKTtcblx0XHR9KTtcblx0XHRjb25zdCBuYXZpZ2F0aW9uc0xheWVySWQgPSBcInJvdXRlcjpuYXZpZ2F0aW9uczpcIiArIGlkO1xuXHRcdGFwaS5hZGRUaW1lbGluZUxheWVyKHtcblx0XHRcdGlkOiBuYXZpZ2F0aW9uc0xheWVySWQsXG5cdFx0XHRsYWJlbDogYFJvdXRlciR7aWQgPyBcIiBcIiArIGlkIDogXCJcIn0gTmF2aWdhdGlvbnNgLFxuXHRcdFx0Y29sb3I6IDQyMzc1MDhcblx0XHR9KTtcblx0XHRyb3V0ZXIub25FcnJvcigoZXJyb3IsIHRvKSA9PiB7XG5cdFx0XHRhcGkuYWRkVGltZWxpbmVFdmVudCh7XG5cdFx0XHRcdGxheWVySWQ6IG5hdmlnYXRpb25zTGF5ZXJJZCxcblx0XHRcdFx0ZXZlbnQ6IHtcblx0XHRcdFx0XHR0aXRsZTogXCJFcnJvciBkdXJpbmcgTmF2aWdhdGlvblwiLFxuXHRcdFx0XHRcdHN1YnRpdGxlOiB0by5mdWxsUGF0aCxcblx0XHRcdFx0XHRsb2dUeXBlOiBcImVycm9yXCIsXG5cdFx0XHRcdFx0dGltZTogYXBpLm5vdygpLFxuXHRcdFx0XHRcdGRhdGE6IHsgZXJyb3IgfSxcblx0XHRcdFx0XHRncm91cElkOiB0by5tZXRhLl9fbmF2aWdhdGlvbklkXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdGxldCBuYXZpZ2F0aW9uSWQgPSAwO1xuXHRcdHJvdXRlci5iZWZvcmVFYWNoKCh0bywgZnJvbSkgPT4ge1xuXHRcdFx0Y29uc3QgZGF0YSA9IHtcblx0XHRcdFx0Z3VhcmQ6IGZvcm1hdERpc3BsYXkoXCJiZWZvcmVFYWNoXCIpLFxuXHRcdFx0XHRmcm9tOiBmb3JtYXRSb3V0ZUxvY2F0aW9uKGZyb20sIFwiQ3VycmVudCBMb2NhdGlvbiBkdXJpbmcgdGhpcyBuYXZpZ2F0aW9uXCIpLFxuXHRcdFx0XHR0bzogZm9ybWF0Um91dGVMb2NhdGlvbih0bywgXCJUYXJnZXQgbG9jYXRpb25cIilcblx0XHRcdH07XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkodG8ubWV0YSwgXCJfX25hdmlnYXRpb25JZFwiLCB7IHZhbHVlOiBuYXZpZ2F0aW9uSWQrKyB9KTtcblx0XHRcdGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcblx0XHRcdFx0bGF5ZXJJZDogbmF2aWdhdGlvbnNMYXllcklkLFxuXHRcdFx0XHRldmVudDoge1xuXHRcdFx0XHRcdHRpbWU6IGFwaS5ub3coKSxcblx0XHRcdFx0XHR0aXRsZTogXCJTdGFydCBvZiBuYXZpZ2F0aW9uXCIsXG5cdFx0XHRcdFx0c3VidGl0bGU6IHRvLmZ1bGxQYXRoLFxuXHRcdFx0XHRcdGRhdGEsXG5cdFx0XHRcdFx0Z3JvdXBJZDogdG8ubWV0YS5fX25hdmlnYXRpb25JZFxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XHRyb3V0ZXIuYWZ0ZXJFYWNoKCh0bywgZnJvbSwgZmFpbHVyZSkgPT4ge1xuXHRcdFx0Y29uc3QgZGF0YSA9IHsgZ3VhcmQ6IGZvcm1hdERpc3BsYXkoXCJhZnRlckVhY2hcIikgfTtcblx0XHRcdGlmIChmYWlsdXJlKSB7XG5cdFx0XHRcdGRhdGEuZmFpbHVyZSA9IHsgX2N1c3RvbToge1xuXHRcdFx0XHRcdHR5cGU6IEVycm9yLFxuXHRcdFx0XHRcdHJlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHRcdGRpc3BsYXk6IGZhaWx1cmUgPyBmYWlsdXJlLm1lc3NhZ2UgOiBcIlwiLFxuXHRcdFx0XHRcdHRvb2x0aXA6IFwiTmF2aWdhdGlvbiBGYWlsdXJlXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGZhaWx1cmVcblx0XHRcdFx0fSB9O1xuXHRcdFx0XHRkYXRhLnN0YXR1cyA9IGZvcm1hdERpc3BsYXkoXCLinYxcIik7XG5cdFx0XHR9IGVsc2UgZGF0YS5zdGF0dXMgPSBmb3JtYXREaXNwbGF5KFwi4pyFXCIpO1xuXHRcdFx0ZGF0YS5mcm9tID0gZm9ybWF0Um91dGVMb2NhdGlvbihmcm9tLCBcIkN1cnJlbnQgTG9jYXRpb24gZHVyaW5nIHRoaXMgbmF2aWdhdGlvblwiKTtcblx0XHRcdGRhdGEudG8gPSBmb3JtYXRSb3V0ZUxvY2F0aW9uKHRvLCBcIlRhcmdldCBsb2NhdGlvblwiKTtcblx0XHRcdGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcblx0XHRcdFx0bGF5ZXJJZDogbmF2aWdhdGlvbnNMYXllcklkLFxuXHRcdFx0XHRldmVudDoge1xuXHRcdFx0XHRcdHRpdGxlOiBcIkVuZCBvZiBuYXZpZ2F0aW9uXCIsXG5cdFx0XHRcdFx0c3VidGl0bGU6IHRvLmZ1bGxQYXRoLFxuXHRcdFx0XHRcdHRpbWU6IGFwaS5ub3coKSxcblx0XHRcdFx0XHRkYXRhLFxuXHRcdFx0XHRcdGxvZ1R5cGU6IGZhaWx1cmUgPyBcIndhcm5pbmdcIiA6IFwiZGVmYXVsdFwiLFxuXHRcdFx0XHRcdGdyb3VwSWQ6IHRvLm1ldGEuX19uYXZpZ2F0aW9uSWRcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0LyoqXG5cdFx0KiBJbnNwZWN0b3Igb2YgRXhpc3Rpbmcgcm91dGVzXG5cdFx0Ki9cblx0XHRjb25zdCByb3V0ZXJJbnNwZWN0b3JJZCA9IFwicm91dGVyLWluc3BlY3RvcjpcIiArIGlkO1xuXHRcdGFwaS5hZGRJbnNwZWN0b3Ioe1xuXHRcdFx0aWQ6IHJvdXRlckluc3BlY3RvcklkLFxuXHRcdFx0bGFiZWw6IFwiUm91dGVzXCIgKyAoaWQgPyBcIiBcIiArIGlkIDogXCJcIiksXG5cdFx0XHRpY29uOiBcImJvb2tcIixcblx0XHRcdHRyZWVGaWx0ZXJQbGFjZWhvbGRlcjogXCJTZWFyY2ggcm91dGVzXCJcblx0XHR9KTtcblx0XHRmdW5jdGlvbiByZWZyZXNoUm91dGVzVmlldygpIHtcblx0XHRcdGlmICghYWN0aXZlUm91dGVzUGF5bG9hZCkgcmV0dXJuO1xuXHRcdFx0Y29uc3QgcGF5bG9hZCA9IGFjdGl2ZVJvdXRlc1BheWxvYWQ7XG5cdFx0XHRsZXQgcm91dGVzID0gbWF0Y2hlci5nZXRSb3V0ZXMoKS5maWx0ZXIoKHJvdXRlKSA9PiAhcm91dGUucGFyZW50IHx8ICFyb3V0ZS5wYXJlbnQucmVjb3JkLmNvbXBvbmVudHMpO1xuXHRcdFx0cm91dGVzLmZvckVhY2gocmVzZXRNYXRjaFN0YXRlT25Sb3V0ZVJlY29yZCk7XG5cdFx0XHRpZiAocGF5bG9hZC5maWx0ZXIpIHJvdXRlcyA9IHJvdXRlcy5maWx0ZXIoKHJvdXRlKSA9PiBpc1JvdXRlTWF0Y2hpbmcocm91dGUsIHBheWxvYWQuZmlsdGVyLnRvTG93ZXJDYXNlKCkpKTtcblx0XHRcdHJvdXRlcy5mb3JFYWNoKChyb3V0ZSkgPT4gbWFya1JvdXRlUmVjb3JkQWN0aXZlKHJvdXRlLCByb3V0ZXIuY3VycmVudFJvdXRlLnZhbHVlKSk7XG5cdFx0XHRwYXlsb2FkLnJvb3ROb2RlcyA9IHJvdXRlcy5tYXAoZm9ybWF0Um91dGVSZWNvcmRGb3JJbnNwZWN0b3IpO1xuXHRcdH1cblx0XHRsZXQgYWN0aXZlUm91dGVzUGF5bG9hZDtcblx0XHRhcGkub24uZ2V0SW5zcGVjdG9yVHJlZSgocGF5bG9hZCkgPT4ge1xuXHRcdFx0YWN0aXZlUm91dGVzUGF5bG9hZCA9IHBheWxvYWQ7XG5cdFx0XHRpZiAocGF5bG9hZC5hcHAgPT09IGFwcCAmJiBwYXlsb2FkLmluc3BlY3RvcklkID09PSByb3V0ZXJJbnNwZWN0b3JJZCkgcmVmcmVzaFJvdXRlc1ZpZXcoKTtcblx0XHR9KTtcblx0XHQvKipcblx0XHQqIERpc3BsYXkgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCByb3V0ZSByZWNvcmRcblx0XHQqL1xuXHRcdGFwaS5vbi5nZXRJbnNwZWN0b3JTdGF0ZSgocGF5bG9hZCkgPT4ge1xuXHRcdFx0aWYgKHBheWxvYWQuYXBwID09PSBhcHAgJiYgcGF5bG9hZC5pbnNwZWN0b3JJZCA9PT0gcm91dGVySW5zcGVjdG9ySWQpIHtcblx0XHRcdFx0Y29uc3Qgcm91dGUgPSBtYXRjaGVyLmdldFJvdXRlcygpLmZpbmQoKHJvdXRlJDEpID0+IHJvdXRlJDEucmVjb3JkLl9fdmRfaWQgPT09IHBheWxvYWQubm9kZUlkKTtcblx0XHRcdFx0aWYgKHJvdXRlKSBwYXlsb2FkLnN0YXRlID0geyBvcHRpb25zOiBmb3JtYXRSb3V0ZVJlY29yZE1hdGNoZXJGb3JTdGF0ZUluc3BlY3Rvcihyb3V0ZSkgfTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRhcGkuc2VuZEluc3BlY3RvclRyZWUocm91dGVySW5zcGVjdG9ySWQpO1xuXHRcdGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUocm91dGVySW5zcGVjdG9ySWQpO1xuXHR9KTtcbn1cbmZ1bmN0aW9uIG1vZGlmaWVyRm9yS2V5KGtleSkge1xuXHRpZiAoa2V5Lm9wdGlvbmFsKSByZXR1cm4ga2V5LnJlcGVhdGFibGUgPyBcIipcIiA6IFwiP1wiO1xuXHRlbHNlIHJldHVybiBrZXkucmVwZWF0YWJsZSA/IFwiK1wiIDogXCJcIjtcbn1cbmZ1bmN0aW9uIGZvcm1hdFJvdXRlUmVjb3JkTWF0Y2hlckZvclN0YXRlSW5zcGVjdG9yKHJvdXRlKSB7XG5cdGNvbnN0IHsgcmVjb3JkIH0gPSByb3V0ZTtcblx0Y29uc3QgZmllbGRzID0gW3tcblx0XHRlZGl0YWJsZTogZmFsc2UsXG5cdFx0a2V5OiBcInBhdGhcIixcblx0XHR2YWx1ZTogcmVjb3JkLnBhdGhcblx0fV07XG5cdGlmIChyZWNvcmQubmFtZSAhPSBudWxsKSBmaWVsZHMucHVzaCh7XG5cdFx0ZWRpdGFibGU6IGZhbHNlLFxuXHRcdGtleTogXCJuYW1lXCIsXG5cdFx0dmFsdWU6IHJlY29yZC5uYW1lXG5cdH0pO1xuXHRmaWVsZHMucHVzaCh7XG5cdFx0ZWRpdGFibGU6IGZhbHNlLFxuXHRcdGtleTogXCJyZWdleHBcIixcblx0XHR2YWx1ZTogcm91dGUucmVcblx0fSk7XG5cdGlmIChyb3V0ZS5rZXlzLmxlbmd0aCkgZmllbGRzLnB1c2goe1xuXHRcdGVkaXRhYmxlOiBmYWxzZSxcblx0XHRrZXk6IFwia2V5c1wiLFxuXHRcdHZhbHVlOiB7IF9jdXN0b206IHtcblx0XHRcdHR5cGU6IG51bGwsXG5cdFx0XHRyZWFkT25seTogdHJ1ZSxcblx0XHRcdGRpc3BsYXk6IHJvdXRlLmtleXMubWFwKChrZXkpID0+IGAke2tleS5uYW1lfSR7bW9kaWZpZXJGb3JLZXkoa2V5KX1gKS5qb2luKFwiIFwiKSxcblx0XHRcdHRvb2x0aXA6IFwiUGFyYW0ga2V5c1wiLFxuXHRcdFx0dmFsdWU6IHJvdXRlLmtleXNcblx0XHR9IH1cblx0fSk7XG5cdGlmIChyZWNvcmQucmVkaXJlY3QgIT0gbnVsbCkgZmllbGRzLnB1c2goe1xuXHRcdGVkaXRhYmxlOiBmYWxzZSxcblx0XHRrZXk6IFwicmVkaXJlY3RcIixcblx0XHR2YWx1ZTogcmVjb3JkLnJlZGlyZWN0XG5cdH0pO1xuXHRpZiAocm91dGUuYWxpYXMubGVuZ3RoKSBmaWVsZHMucHVzaCh7XG5cdFx0ZWRpdGFibGU6IGZhbHNlLFxuXHRcdGtleTogXCJhbGlhc2VzXCIsXG5cdFx0dmFsdWU6IHJvdXRlLmFsaWFzLm1hcCgoYWxpYXMpID0+IGFsaWFzLnJlY29yZC5wYXRoKVxuXHR9KTtcblx0aWYgKE9iamVjdC5rZXlzKHJvdXRlLnJlY29yZC5tZXRhKS5sZW5ndGgpIGZpZWxkcy5wdXNoKHtcblx0XHRlZGl0YWJsZTogZmFsc2UsXG5cdFx0a2V5OiBcIm1ldGFcIixcblx0XHR2YWx1ZTogcm91dGUucmVjb3JkLm1ldGFcblx0fSk7XG5cdGZpZWxkcy5wdXNoKHtcblx0XHRrZXk6IFwic2NvcmVcIixcblx0XHRlZGl0YWJsZTogZmFsc2UsXG5cdFx0dmFsdWU6IHsgX2N1c3RvbToge1xuXHRcdFx0dHlwZTogbnVsbCxcblx0XHRcdHJlYWRPbmx5OiB0cnVlLFxuXHRcdFx0ZGlzcGxheTogcm91dGUuc2NvcmUubWFwKChzY29yZSkgPT4gc2NvcmUuam9pbihcIiwgXCIpKS5qb2luKFwiIHwgXCIpLFxuXHRcdFx0dG9vbHRpcDogXCJTY29yZSB1c2VkIHRvIHNvcnQgcm91dGVzXCIsXG5cdFx0XHR2YWx1ZTogcm91dGUuc2NvcmVcblx0XHR9IH1cblx0fSk7XG5cdHJldHVybiBmaWVsZHM7XG59XG4vKipcbiogRXh0cmFjdGVkIGZyb20gdGFpbHdpbmQgcGFsZXR0ZVxuKi9cbmNvbnN0IFBJTktfNTAwID0gMTU0ODUwODE7XG5jb25zdCBCTFVFXzYwMCA9IDI0NTA0MTE7XG5jb25zdCBMSU1FXzUwMCA9IDg3MDI5OTg7XG5jb25zdCBDWUFOXzQwMCA9IDIyODI0Nzg7XG5jb25zdCBPUkFOR0VfNDAwID0gMTY0ODY5NzI7XG5jb25zdCBEQVJLID0gNjcxMDg4NjtcbmNvbnN0IFJFRF8xMDAgPSAxNjcwNDIyNjtcbmNvbnN0IFJFRF83MDAgPSAxMjEzMTM1NjtcbmZ1bmN0aW9uIGZvcm1hdFJvdXRlUmVjb3JkRm9ySW5zcGVjdG9yKHJvdXRlKSB7XG5cdGNvbnN0IHRhZ3MgPSBbXTtcblx0Y29uc3QgeyByZWNvcmQgfSA9IHJvdXRlO1xuXHRpZiAocmVjb3JkLm5hbWUgIT0gbnVsbCkgdGFncy5wdXNoKHtcblx0XHRsYWJlbDogU3RyaW5nKHJlY29yZC5uYW1lKSxcblx0XHR0ZXh0Q29sb3I6IDAsXG5cdFx0YmFja2dyb3VuZENvbG9yOiBDWUFOXzQwMFxuXHR9KTtcblx0aWYgKHJlY29yZC5hbGlhc09mKSB0YWdzLnB1c2goe1xuXHRcdGxhYmVsOiBcImFsaWFzXCIsXG5cdFx0dGV4dENvbG9yOiAwLFxuXHRcdGJhY2tncm91bmRDb2xvcjogT1JBTkdFXzQwMFxuXHR9KTtcblx0aWYgKHJvdXRlLl9fdmRfbWF0Y2gpIHRhZ3MucHVzaCh7XG5cdFx0bGFiZWw6IFwibWF0Y2hlc1wiLFxuXHRcdHRleHRDb2xvcjogMCxcblx0XHRiYWNrZ3JvdW5kQ29sb3I6IFBJTktfNTAwXG5cdH0pO1xuXHRpZiAocm91dGUuX192ZF9leGFjdEFjdGl2ZSkgdGFncy5wdXNoKHtcblx0XHRsYWJlbDogXCJleGFjdFwiLFxuXHRcdHRleHRDb2xvcjogMCxcblx0XHRiYWNrZ3JvdW5kQ29sb3I6IExJTUVfNTAwXG5cdH0pO1xuXHRpZiAocm91dGUuX192ZF9hY3RpdmUpIHRhZ3MucHVzaCh7XG5cdFx0bGFiZWw6IFwiYWN0aXZlXCIsXG5cdFx0dGV4dENvbG9yOiAwLFxuXHRcdGJhY2tncm91bmRDb2xvcjogQkxVRV82MDBcblx0fSk7XG5cdGlmIChyZWNvcmQucmVkaXJlY3QpIHRhZ3MucHVzaCh7XG5cdFx0bGFiZWw6IHR5cGVvZiByZWNvcmQucmVkaXJlY3QgPT09IFwic3RyaW5nXCIgPyBgcmVkaXJlY3Q6ICR7cmVjb3JkLnJlZGlyZWN0fWAgOiBcInJlZGlyZWN0c1wiLFxuXHRcdHRleHRDb2xvcjogMTY3NzcyMTUsXG5cdFx0YmFja2dyb3VuZENvbG9yOiBEQVJLXG5cdH0pO1xuXHRsZXQgaWQgPSByZWNvcmQuX192ZF9pZDtcblx0aWYgKGlkID09IG51bGwpIHtcblx0XHRpZCA9IFN0cmluZyhyb3V0ZVJlY29yZElkKyspO1xuXHRcdHJlY29yZC5fX3ZkX2lkID0gaWQ7XG5cdH1cblx0cmV0dXJuIHtcblx0XHRpZCxcblx0XHRsYWJlbDogcmVjb3JkLnBhdGgsXG5cdFx0dGFncyxcblx0XHRjaGlsZHJlbjogcm91dGUuY2hpbGRyZW4ubWFwKGZvcm1hdFJvdXRlUmVjb3JkRm9ySW5zcGVjdG9yKVxuXHR9O1xufVxubGV0IHJvdXRlUmVjb3JkSWQgPSAwO1xuY29uc3QgRVhUUkFDVF9SRUdFWFBfUkUgPSAvXlxcLyguKilcXC8oW2Etel0qKSQvO1xuZnVuY3Rpb24gbWFya1JvdXRlUmVjb3JkQWN0aXZlKHJvdXRlLCBjdXJyZW50Um91dGUpIHtcblx0Y29uc3QgaXNFeGFjdEFjdGl2ZSA9IGN1cnJlbnRSb3V0ZS5tYXRjaGVkLmxlbmd0aCAmJiBpc1NhbWVSb3V0ZVJlY29yZChjdXJyZW50Um91dGUubWF0Y2hlZFtjdXJyZW50Um91dGUubWF0Y2hlZC5sZW5ndGggLSAxXSwgcm91dGUucmVjb3JkKTtcblx0cm91dGUuX192ZF9leGFjdEFjdGl2ZSA9IHJvdXRlLl9fdmRfYWN0aXZlID0gaXNFeGFjdEFjdGl2ZTtcblx0aWYgKCFpc0V4YWN0QWN0aXZlKSByb3V0ZS5fX3ZkX2FjdGl2ZSA9IGN1cnJlbnRSb3V0ZS5tYXRjaGVkLnNvbWUoKG1hdGNoKSA9PiBpc1NhbWVSb3V0ZVJlY29yZChtYXRjaCwgcm91dGUucmVjb3JkKSk7XG5cdHJvdXRlLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkUm91dGUpID0+IG1hcmtSb3V0ZVJlY29yZEFjdGl2ZShjaGlsZFJvdXRlLCBjdXJyZW50Um91dGUpKTtcbn1cbmZ1bmN0aW9uIHJlc2V0TWF0Y2hTdGF0ZU9uUm91dGVSZWNvcmQocm91dGUpIHtcblx0cm91dGUuX192ZF9tYXRjaCA9IGZhbHNlO1xuXHRyb3V0ZS5jaGlsZHJlbi5mb3JFYWNoKHJlc2V0TWF0Y2hTdGF0ZU9uUm91dGVSZWNvcmQpO1xufVxuZnVuY3Rpb24gaXNSb3V0ZU1hdGNoaW5nKHJvdXRlLCBmaWx0ZXIpIHtcblx0Y29uc3QgZm91bmQgPSBTdHJpbmcocm91dGUucmUpLm1hdGNoKEVYVFJBQ1RfUkVHRVhQX1JFKTtcblx0cm91dGUuX192ZF9tYXRjaCA9IGZhbHNlO1xuXHRpZiAoIWZvdW5kIHx8IGZvdW5kLmxlbmd0aCA8IDMpIHJldHVybiBmYWxzZTtcblx0aWYgKG5ldyBSZWdFeHAoZm91bmRbMV0ucmVwbGFjZSgvXFwkJC8sIFwiXCIpLCBmb3VuZFsyXSkudGVzdChmaWx0ZXIpKSB7XG5cdFx0cm91dGUuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IGlzUm91dGVNYXRjaGluZyhjaGlsZCwgZmlsdGVyKSk7XG5cdFx0aWYgKHJvdXRlLnJlY29yZC5wYXRoICE9PSBcIi9cIiB8fCBmaWx0ZXIgPT09IFwiL1wiKSB7XG5cdFx0XHRyb3V0ZS5fX3ZkX21hdGNoID0gcm91dGUucmUudGVzdChmaWx0ZXIpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRjb25zdCBwYXRoID0gcm91dGUucmVjb3JkLnBhdGgudG9Mb3dlckNhc2UoKTtcblx0Y29uc3QgZGVjb2RlZFBhdGggPSBkZWNvZGUocGF0aCk7XG5cdGlmICghZmlsdGVyLnN0YXJ0c1dpdGgoXCIvXCIpICYmIChkZWNvZGVkUGF0aC5pbmNsdWRlcyhmaWx0ZXIpIHx8IHBhdGguaW5jbHVkZXMoZmlsdGVyKSkpIHJldHVybiB0cnVlO1xuXHRpZiAoZGVjb2RlZFBhdGguc3RhcnRzV2l0aChmaWx0ZXIpIHx8IHBhdGguc3RhcnRzV2l0aChmaWx0ZXIpKSByZXR1cm4gdHJ1ZTtcblx0aWYgKHJvdXRlLnJlY29yZC5uYW1lICYmIFN0cmluZyhyb3V0ZS5yZWNvcmQubmFtZSkuaW5jbHVkZXMoZmlsdGVyKSkgcmV0dXJuIHRydWU7XG5cdHJldHVybiByb3V0ZS5jaGlsZHJlbi5zb21lKChjaGlsZCkgPT4gaXNSb3V0ZU1hdGNoaW5nKGNoaWxkLCBmaWx0ZXIpKTtcbn1cbmZ1bmN0aW9uIG9taXQob2JqLCBrZXlzKSB7XG5cdGNvbnN0IHJldCA9IHt9O1xuXHRmb3IgKGNvbnN0IGtleSBpbiBvYmopIGlmICgha2V5cy5pbmNsdWRlcyhrZXkpKSByZXRba2V5XSA9IG9ialtrZXldO1xuXHRyZXR1cm4gcmV0O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEVycm9yVHlwZXMsIE5FV19zdHJpbmdpZnlVUkwsIE5hdmlnYXRpb25EaXJlY3Rpb24sIE5hdmlnYXRpb25GYWlsdXJlVHlwZSwgTmF2aWdhdGlvblR5cGUsIFNUQVJULCBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVELCBhZGREZXZ0b29scywgYXBwbHlUb1BhcmFtcywgYXNzaWduLCBjb21wdXRlU2Nyb2xsUG9zaXRpb24sIGNyZWF0ZUhyZWYsIGNyZWF0ZVJvdXRlckVycm9yLCBkZWNvZGUsIGVuY29kZUhhc2gsIGVuY29kZVBhcmFtLCBlbmNvZGVQYXRoLCBleHRyYWN0Q2hhbmdpbmdSZWNvcmRzLCBleHRyYWN0Q29tcG9uZW50c0d1YXJkcywgZ2V0U2F2ZWRTY3JvbGxQb3NpdGlvbiwgZ2V0U2Nyb2xsS2V5LCBndWFyZFRvUHJvbWlzZUZuLCBpZGVudGl0eUZuLCBpc0FycmF5LCBpc0Jyb3dzZXIsIGlzTmF2aWdhdGlvbkZhaWx1cmUsIGlzUm91dGVMb2NhdGlvbiwgaXNSb3V0ZU5hbWUsIGlzU2FtZVJvdXRlTG9jYXRpb24sIGlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXMsIGlzU2FtZVJvdXRlUmVjb3JkLCBsb2FkUm91dGVMb2NhdGlvbiwgbWF0Y2hlZFJvdXRlS2V5LCBtZXJnZU9wdGlvbnMsIG5vb3AsIG5vcm1hbGl6ZUJhc2UsIG5vcm1hbGl6ZVF1ZXJ5LCBvbkJlZm9yZVJvdXRlTGVhdmUsIG9uQmVmb3JlUm91dGVVcGRhdGUsIHBhcnNlUXVlcnksIHBhcnNlVVJMLCByZXNvbHZlUmVsYXRpdmVQYXRoLCByb3V0ZUxvY2F0aW9uS2V5LCByb3V0ZXJLZXksIHJvdXRlclZpZXdMb2NhdGlvbktleSwgc2F2ZVNjcm9sbFBvc2l0aW9uLCBzY3JvbGxUb1Bvc2l0aW9uLCBzdHJpbmdpZnlRdWVyeSwgc3RyaW5naWZ5VVJMLCBzdHJpcEJhc2UsIHVzZUNhbGxiYWNrcywgdmlld0RlcHRoS2V5LCB3YXJuJDEgYXMgd2FybiB9OyIsIi8qIVxuICogdnVlLXJvdXRlciB2NC42LjNcbiAqIChjKSAyMDI1IEVkdWFyZG8gU2FuIE1hcnRpbiBNb3JvdGVcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5pbXBvcnQgeyBFcnJvclR5cGVzLCBOYXZpZ2F0aW9uRGlyZWN0aW9uLCBOYXZpZ2F0aW9uRmFpbHVyZVR5cGUsIE5hdmlnYXRpb25UeXBlLCBTVEFSVCwgU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRCwgYWRkRGV2dG9vbHMsIGFwcGx5VG9QYXJhbXMsIGFzc2lnbiwgY29tcHV0ZVNjcm9sbFBvc2l0aW9uLCBjcmVhdGVIcmVmLCBjcmVhdGVSb3V0ZXJFcnJvciwgZGVjb2RlLCBlbmNvZGVIYXNoLCBlbmNvZGVQYXJhbSwgZXh0cmFjdENoYW5naW5nUmVjb3JkcywgZXh0cmFjdENvbXBvbmVudHNHdWFyZHMsIGdldFNhdmVkU2Nyb2xsUG9zaXRpb24sIGdldFNjcm9sbEtleSwgZ3VhcmRUb1Byb21pc2VGbiwgaXNBcnJheSwgaXNCcm93c2VyLCBpc05hdmlnYXRpb25GYWlsdXJlLCBpc1JvdXRlTG9jYXRpb24sIGlzUm91dGVOYW1lLCBpc1NhbWVSb3V0ZUxvY2F0aW9uLCBpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zLCBpc1NhbWVSb3V0ZVJlY29yZCwgbG9hZFJvdXRlTG9jYXRpb24sIG1hdGNoZWRSb3V0ZUtleSwgbWVyZ2VPcHRpb25zLCBub29wLCBub3JtYWxpemVCYXNlLCBub3JtYWxpemVRdWVyeSwgb25CZWZvcmVSb3V0ZUxlYXZlLCBvbkJlZm9yZVJvdXRlVXBkYXRlLCBwYXJzZVF1ZXJ5LCBwYXJzZVVSTCwgcm91dGVMb2NhdGlvbktleSwgcm91dGVyS2V5LCByb3V0ZXJWaWV3TG9jYXRpb25LZXksIHNhdmVTY3JvbGxQb3NpdGlvbiwgc2Nyb2xsVG9Qb3NpdGlvbiwgc3RyaW5naWZ5UXVlcnksIHN0cmluZ2lmeVVSTCwgc3RyaXBCYXNlLCB1c2VDYWxsYmFja3MsIHZpZXdEZXB0aEtleSwgd2FybiBhcyB3YXJuJDEgfSBmcm9tIFwiLi9kZXZ0b29scy1CTEN1bVV3TC5tanNcIjtcbmltcG9ydCB7IGNvbXB1dGVkLCBkZWZpbmVDb21wb25lbnQsIGdldEN1cnJlbnRJbnN0YW5jZSwgaCwgaW5qZWN0LCBuZXh0VGljaywgcHJvdmlkZSwgcmVhY3RpdmUsIHJlZiwgc2hhbGxvd1JlYWN0aXZlLCBzaGFsbG93UmVmLCB1bnJlZiwgd2F0Y2gsIHdhdGNoRWZmZWN0IH0gZnJvbSBcInZ1ZVwiO1xuXG4vLyNyZWdpb24gc3JjL2hpc3RvcnkvaHRtbDUudHNcbmxldCBjcmVhdGVCYXNlTG9jYXRpb24gPSAoKSA9PiBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIGxvY2F0aW9uLmhvc3Q7XG4vKipcbiogQ3JlYXRlcyBhIG5vcm1hbGl6ZWQgaGlzdG9yeSBsb2NhdGlvbiBmcm9tIGEgd2luZG93LmxvY2F0aW9uIG9iamVjdFxuKiBAcGFyYW0gYmFzZSAtIFRoZSBiYXNlIHBhdGhcbiogQHBhcmFtIGxvY2F0aW9uIC0gVGhlIHdpbmRvdy5sb2NhdGlvbiBvYmplY3RcbiovXG5mdW5jdGlvbiBjcmVhdGVDdXJyZW50TG9jYXRpb24oYmFzZSwgbG9jYXRpb24kMSkge1xuXHRjb25zdCB7IHBhdGhuYW1lLCBzZWFyY2gsIGhhc2ggfSA9IGxvY2F0aW9uJDE7XG5cdGNvbnN0IGhhc2hQb3MgPSBiYXNlLmluZGV4T2YoXCIjXCIpO1xuXHRpZiAoaGFzaFBvcyA+IC0xKSB7XG5cdFx0bGV0IHNsaWNlUG9zID0gaGFzaC5pbmNsdWRlcyhiYXNlLnNsaWNlKGhhc2hQb3MpKSA/IGJhc2Uuc2xpY2UoaGFzaFBvcykubGVuZ3RoIDogMTtcblx0XHRsZXQgcGF0aEZyb21IYXNoID0gaGFzaC5zbGljZShzbGljZVBvcyk7XG5cdFx0aWYgKHBhdGhGcm9tSGFzaFswXSAhPT0gXCIvXCIpIHBhdGhGcm9tSGFzaCA9IFwiL1wiICsgcGF0aEZyb21IYXNoO1xuXHRcdHJldHVybiBzdHJpcEJhc2UocGF0aEZyb21IYXNoLCBcIlwiKTtcblx0fVxuXHRyZXR1cm4gc3RyaXBCYXNlKHBhdGhuYW1lLCBiYXNlKSArIHNlYXJjaCArIGhhc2g7XG59XG5mdW5jdGlvbiB1c2VIaXN0b3J5TGlzdGVuZXJzKGJhc2UsIGhpc3RvcnlTdGF0ZSwgY3VycmVudExvY2F0aW9uLCByZXBsYWNlKSB7XG5cdGxldCBsaXN0ZW5lcnMgPSBbXTtcblx0bGV0IHRlYXJkb3ducyA9IFtdO1xuXHRsZXQgcGF1c2VTdGF0ZSA9IG51bGw7XG5cdGNvbnN0IHBvcFN0YXRlSGFuZGxlciA9ICh7IHN0YXRlIH0pID0+IHtcblx0XHRjb25zdCB0byA9IGNyZWF0ZUN1cnJlbnRMb2NhdGlvbihiYXNlLCBsb2NhdGlvbik7XG5cdFx0Y29uc3QgZnJvbSA9IGN1cnJlbnRMb2NhdGlvbi52YWx1ZTtcblx0XHRjb25zdCBmcm9tU3RhdGUgPSBoaXN0b3J5U3RhdGUudmFsdWU7XG5cdFx0bGV0IGRlbHRhID0gMDtcblx0XHRpZiAoc3RhdGUpIHtcblx0XHRcdGN1cnJlbnRMb2NhdGlvbi52YWx1ZSA9IHRvO1xuXHRcdFx0aGlzdG9yeVN0YXRlLnZhbHVlID0gc3RhdGU7XG5cdFx0XHRpZiAocGF1c2VTdGF0ZSAmJiBwYXVzZVN0YXRlID09PSBmcm9tKSB7XG5cdFx0XHRcdHBhdXNlU3RhdGUgPSBudWxsO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRkZWx0YSA9IGZyb21TdGF0ZSA/IHN0YXRlLnBvc2l0aW9uIC0gZnJvbVN0YXRlLnBvc2l0aW9uIDogMDtcblx0XHR9IGVsc2UgcmVwbGFjZSh0byk7XG5cdFx0bGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7XG5cdFx0XHRsaXN0ZW5lcihjdXJyZW50TG9jYXRpb24udmFsdWUsIGZyb20sIHtcblx0XHRcdFx0ZGVsdGEsXG5cdFx0XHRcdHR5cGU6IE5hdmlnYXRpb25UeXBlLnBvcCxcblx0XHRcdFx0ZGlyZWN0aW9uOiBkZWx0YSA/IGRlbHRhID4gMCA/IE5hdmlnYXRpb25EaXJlY3Rpb24uZm9yd2FyZCA6IE5hdmlnYXRpb25EaXJlY3Rpb24uYmFjayA6IE5hdmlnYXRpb25EaXJlY3Rpb24udW5rbm93blxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cdGZ1bmN0aW9uIHBhdXNlTGlzdGVuZXJzKCkge1xuXHRcdHBhdXNlU3RhdGUgPSBjdXJyZW50TG9jYXRpb24udmFsdWU7XG5cdH1cblx0ZnVuY3Rpb24gbGlzdGVuKGNhbGxiYWNrKSB7XG5cdFx0bGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuXHRcdGNvbnN0IHRlYXJkb3duID0gKCkgPT4ge1xuXHRcdFx0Y29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihjYWxsYmFjayk7XG5cdFx0XHRpZiAoaW5kZXggPiAtMSkgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0fTtcblx0XHR0ZWFyZG93bnMucHVzaCh0ZWFyZG93bik7XG5cdFx0cmV0dXJuIHRlYXJkb3duO1xuXHR9XG5cdGZ1bmN0aW9uIGJlZm9yZVVubG9hZExpc3RlbmVyKCkge1xuXHRcdGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09IFwiaGlkZGVuXCIpIHtcblx0XHRcdGNvbnN0IHsgaGlzdG9yeTogaGlzdG9yeSQxIH0gPSB3aW5kb3c7XG5cdFx0XHRpZiAoIWhpc3RvcnkkMS5zdGF0ZSkgcmV0dXJuO1xuXHRcdFx0aGlzdG9yeSQxLnJlcGxhY2VTdGF0ZShhc3NpZ24oe30sIGhpc3RvcnkkMS5zdGF0ZSwgeyBzY3JvbGw6IGNvbXB1dGVTY3JvbGxQb3NpdGlvbigpIH0pLCBcIlwiKTtcblx0XHR9XG5cdH1cblx0ZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRmb3IgKGNvbnN0IHRlYXJkb3duIG9mIHRlYXJkb3ducykgdGVhcmRvd24oKTtcblx0XHR0ZWFyZG93bnMgPSBbXTtcblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsIHBvcFN0YXRlSGFuZGxlcik7XG5cdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCBiZWZvcmVVbmxvYWRMaXN0ZW5lcik7XG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgYmVmb3JlVW5sb2FkTGlzdGVuZXIpO1xuXHR9XG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgcG9wU3RhdGVIYW5kbGVyKTtcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCBiZWZvcmVVbmxvYWRMaXN0ZW5lcik7XG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIGJlZm9yZVVubG9hZExpc3RlbmVyKTtcblx0cmV0dXJuIHtcblx0XHRwYXVzZUxpc3RlbmVycyxcblx0XHRsaXN0ZW4sXG5cdFx0ZGVzdHJveVxuXHR9O1xufVxuLyoqXG4qIENyZWF0ZXMgYSBzdGF0ZSBvYmplY3RcbiovXG5mdW5jdGlvbiBidWlsZFN0YXRlKGJhY2ssIGN1cnJlbnQsIGZvcndhcmQsIHJlcGxhY2VkID0gZmFsc2UsIGNvbXB1dGVTY3JvbGwgPSBmYWxzZSkge1xuXHRyZXR1cm4ge1xuXHRcdGJhY2ssXG5cdFx0Y3VycmVudCxcblx0XHRmb3J3YXJkLFxuXHRcdHJlcGxhY2VkLFxuXHRcdHBvc2l0aW9uOiB3aW5kb3cuaGlzdG9yeS5sZW5ndGgsXG5cdFx0c2Nyb2xsOiBjb21wdXRlU2Nyb2xsID8gY29tcHV0ZVNjcm9sbFBvc2l0aW9uKCkgOiBudWxsXG5cdH07XG59XG5mdW5jdGlvbiB1c2VIaXN0b3J5U3RhdGVOYXZpZ2F0aW9uKGJhc2UpIHtcblx0Y29uc3QgeyBoaXN0b3J5OiBoaXN0b3J5JDEsIGxvY2F0aW9uOiBsb2NhdGlvbiQxIH0gPSB3aW5kb3c7XG5cdGNvbnN0IGN1cnJlbnRMb2NhdGlvbiA9IHsgdmFsdWU6IGNyZWF0ZUN1cnJlbnRMb2NhdGlvbihiYXNlLCBsb2NhdGlvbiQxKSB9O1xuXHRjb25zdCBoaXN0b3J5U3RhdGUgPSB7IHZhbHVlOiBoaXN0b3J5JDEuc3RhdGUgfTtcblx0aWYgKCFoaXN0b3J5U3RhdGUudmFsdWUpIGNoYW5nZUxvY2F0aW9uKGN1cnJlbnRMb2NhdGlvbi52YWx1ZSwge1xuXHRcdGJhY2s6IG51bGwsXG5cdFx0Y3VycmVudDogY3VycmVudExvY2F0aW9uLnZhbHVlLFxuXHRcdGZvcndhcmQ6IG51bGwsXG5cdFx0cG9zaXRpb246IGhpc3RvcnkkMS5sZW5ndGggLSAxLFxuXHRcdHJlcGxhY2VkOiB0cnVlLFxuXHRcdHNjcm9sbDogbnVsbFxuXHR9LCB0cnVlKTtcblx0ZnVuY3Rpb24gY2hhbmdlTG9jYXRpb24odG8sIHN0YXRlLCByZXBsYWNlJDEpIHtcblx0XHQvKipcblx0XHQqIGlmIGEgYmFzZSB0YWcgaXMgcHJvdmlkZWQsIGFuZCB3ZSBhcmUgb24gYSBub3JtYWwgZG9tYWluLCB3ZSBoYXZlIHRvXG5cdFx0KiByZXNwZWN0IHRoZSBwcm92aWRlZCBgYmFzZWAgYXR0cmlidXRlIGJlY2F1c2UgcHVzaFN0YXRlKCkgd2lsbCB1c2UgaXQgYW5kXG5cdFx0KiBwb3RlbnRpYWxseSBlcmFzZSBhbnl0aGluZyBiZWZvcmUgdGhlIGAjYCBsaWtlIGF0XG5cdFx0KiBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvcm91dGVyL2lzc3Vlcy82ODUgd2hlcmUgYSBiYXNlIG9mXG5cdFx0KiBgL2ZvbGRlci8jYCBidXQgYSBiYXNlIG9mIGAvYCB3b3VsZCBlcmFzZSB0aGUgYC9mb2xkZXIvYCBzZWN0aW9uLiBJZlxuXHRcdCogdGhlcmUgaXMgbm8gaG9zdCwgdGhlIGA8YmFzZT5gIHRhZyBtYWtlcyBubyBzZW5zZSBhbmQgaWYgdGhlcmUgaXNuJ3QgYVxuXHRcdCogYmFzZSB0YWcgd2UgY2FuIGp1c3QgdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGAjYC5cblx0XHQqL1xuXHRcdGNvbnN0IGhhc2hJbmRleCA9IGJhc2UuaW5kZXhPZihcIiNcIik7XG5cdFx0Y29uc3QgdXJsID0gaGFzaEluZGV4ID4gLTEgPyAobG9jYXRpb24kMS5ob3N0ICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJiYXNlXCIpID8gYmFzZSA6IGJhc2Uuc2xpY2UoaGFzaEluZGV4KSkgKyB0byA6IGNyZWF0ZUJhc2VMb2NhdGlvbigpICsgYmFzZSArIHRvO1xuXHRcdHRyeSB7XG5cdFx0XHRoaXN0b3J5JDFbcmVwbGFjZSQxID8gXCJyZXBsYWNlU3RhdGVcIiA6IFwicHVzaFN0YXRlXCJdKHN0YXRlLCBcIlwiLCB1cmwpO1xuXHRcdFx0aGlzdG9yeVN0YXRlLnZhbHVlID0gc3RhdGU7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB3YXJuJDEoXCJFcnJvciB3aXRoIHB1c2gvcmVwbGFjZSBTdGF0ZVwiLCBlcnIpO1xuXHRcdFx0ZWxzZSBjb25zb2xlLmVycm9yKGVycik7XG5cdFx0XHRsb2NhdGlvbiQxW3JlcGxhY2UkMSA/IFwicmVwbGFjZVwiIDogXCJhc3NpZ25cIl0odXJsKTtcblx0XHR9XG5cdH1cblx0ZnVuY3Rpb24gcmVwbGFjZSh0bywgZGF0YSkge1xuXHRcdGNoYW5nZUxvY2F0aW9uKHRvLCBhc3NpZ24oe30sIGhpc3RvcnkkMS5zdGF0ZSwgYnVpbGRTdGF0ZShoaXN0b3J5U3RhdGUudmFsdWUuYmFjaywgdG8sIGhpc3RvcnlTdGF0ZS52YWx1ZS5mb3J3YXJkLCB0cnVlKSwgZGF0YSwgeyBwb3NpdGlvbjogaGlzdG9yeVN0YXRlLnZhbHVlLnBvc2l0aW9uIH0pLCB0cnVlKTtcblx0XHRjdXJyZW50TG9jYXRpb24udmFsdWUgPSB0bztcblx0fVxuXHRmdW5jdGlvbiBwdXNoKHRvLCBkYXRhKSB7XG5cdFx0Y29uc3QgY3VycmVudFN0YXRlID0gYXNzaWduKHt9LCBoaXN0b3J5U3RhdGUudmFsdWUsIGhpc3RvcnkkMS5zdGF0ZSwge1xuXHRcdFx0Zm9yd2FyZDogdG8sXG5cdFx0XHRzY3JvbGw6IGNvbXB1dGVTY3JvbGxQb3NpdGlvbigpXG5cdFx0fSk7XG5cdFx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiAhaGlzdG9yeSQxLnN0YXRlKSB3YXJuJDEoXCJoaXN0b3J5LnN0YXRlIHNlZW1zIHRvIGhhdmUgYmVlbiBtYW51YWxseSByZXBsYWNlZCB3aXRob3V0IHByZXNlcnZpbmcgdGhlIG5lY2Vzc2FyeSB2YWx1ZXMuIE1ha2Ugc3VyZSB0byBwcmVzZXJ2ZSBleGlzdGluZyBoaXN0b3J5IHN0YXRlIGlmIHlvdSBhcmUgbWFudWFsbHkgY2FsbGluZyBoaXN0b3J5LnJlcGxhY2VTdGF0ZTpcXG5cXG5oaXN0b3J5LnJlcGxhY2VTdGF0ZShoaXN0b3J5LnN0YXRlLCAnJywgdXJsKVxcblxcbllvdSBjYW4gZmluZCBtb3JlIGluZm9ybWF0aW9uIGF0IGh0dHBzOi8vcm91dGVyLnZ1ZWpzLm9yZy9ndWlkZS9taWdyYXRpb24vI1VzYWdlLW9mLWhpc3Rvcnktc3RhdGVcIik7XG5cdFx0Y2hhbmdlTG9jYXRpb24oY3VycmVudFN0YXRlLmN1cnJlbnQsIGN1cnJlbnRTdGF0ZSwgdHJ1ZSk7XG5cdFx0Y2hhbmdlTG9jYXRpb24odG8sIGFzc2lnbih7fSwgYnVpbGRTdGF0ZShjdXJyZW50TG9jYXRpb24udmFsdWUsIHRvLCBudWxsKSwgeyBwb3NpdGlvbjogY3VycmVudFN0YXRlLnBvc2l0aW9uICsgMSB9LCBkYXRhKSwgZmFsc2UpO1xuXHRcdGN1cnJlbnRMb2NhdGlvbi52YWx1ZSA9IHRvO1xuXHR9XG5cdHJldHVybiB7XG5cdFx0bG9jYXRpb246IGN1cnJlbnRMb2NhdGlvbixcblx0XHRzdGF0ZTogaGlzdG9yeVN0YXRlLFxuXHRcdHB1c2gsXG5cdFx0cmVwbGFjZVxuXHR9O1xufVxuLyoqXG4qIENyZWF0ZXMgYW4gSFRNTDUgaGlzdG9yeS4gTW9zdCBjb21tb24gaGlzdG9yeSBmb3Igc2luZ2xlIHBhZ2UgYXBwbGljYXRpb25zLlxuKlxuKiBAcGFyYW0gYmFzZSAtXG4qL1xuZnVuY3Rpb24gY3JlYXRlV2ViSGlzdG9yeShiYXNlKSB7XG5cdGJhc2UgPSBub3JtYWxpemVCYXNlKGJhc2UpO1xuXHRjb25zdCBoaXN0b3J5TmF2aWdhdGlvbiA9IHVzZUhpc3RvcnlTdGF0ZU5hdmlnYXRpb24oYmFzZSk7XG5cdGNvbnN0IGhpc3RvcnlMaXN0ZW5lcnMgPSB1c2VIaXN0b3J5TGlzdGVuZXJzKGJhc2UsIGhpc3RvcnlOYXZpZ2F0aW9uLnN0YXRlLCBoaXN0b3J5TmF2aWdhdGlvbi5sb2NhdGlvbiwgaGlzdG9yeU5hdmlnYXRpb24ucmVwbGFjZSk7XG5cdGZ1bmN0aW9uIGdvKGRlbHRhLCB0cmlnZ2VyTGlzdGVuZXJzID0gdHJ1ZSkge1xuXHRcdGlmICghdHJpZ2dlckxpc3RlbmVycykgaGlzdG9yeUxpc3RlbmVycy5wYXVzZUxpc3RlbmVycygpO1xuXHRcdGhpc3RvcnkuZ28oZGVsdGEpO1xuXHR9XG5cdGNvbnN0IHJvdXRlckhpc3RvcnkgPSBhc3NpZ24oe1xuXHRcdGxvY2F0aW9uOiBcIlwiLFxuXHRcdGJhc2UsXG5cdFx0Z28sXG5cdFx0Y3JlYXRlSHJlZjogY3JlYXRlSHJlZi5iaW5kKG51bGwsIGJhc2UpXG5cdH0sIGhpc3RvcnlOYXZpZ2F0aW9uLCBoaXN0b3J5TGlzdGVuZXJzKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHJvdXRlckhpc3RvcnksIFwibG9jYXRpb25cIiwge1xuXHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0Z2V0OiAoKSA9PiBoaXN0b3J5TmF2aWdhdGlvbi5sb2NhdGlvbi52YWx1ZVxuXHR9KTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHJvdXRlckhpc3RvcnksIFwic3RhdGVcIiwge1xuXHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0Z2V0OiAoKSA9PiBoaXN0b3J5TmF2aWdhdGlvbi5zdGF0ZS52YWx1ZVxuXHR9KTtcblx0cmV0dXJuIHJvdXRlckhpc3Rvcnk7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9oaXN0b3J5L21lbW9yeS50c1xuLyoqXG4qIENyZWF0ZXMgYW4gaW4tbWVtb3J5IGJhc2VkIGhpc3RvcnkuIFRoZSBtYWluIHB1cnBvc2Ugb2YgdGhpcyBoaXN0b3J5IGlzIHRvIGhhbmRsZSBTU1IuIEl0IHN0YXJ0cyBpbiBhIHNwZWNpYWwgbG9jYXRpb24gdGhhdCBpcyBub3doZXJlLlxuKiBJdCdzIHVwIHRvIHRoZSB1c2VyIHRvIHJlcGxhY2UgdGhhdCBsb2NhdGlvbiB3aXRoIHRoZSBzdGFydGVyIGxvY2F0aW9uIGJ5IGVpdGhlciBjYWxsaW5nIGByb3V0ZXIucHVzaGAgb3IgYHJvdXRlci5yZXBsYWNlYC5cbipcbiogQHBhcmFtIGJhc2UgLSBCYXNlIGFwcGxpZWQgdG8gYWxsIHVybHMsIGRlZmF1bHRzIHRvICcvJ1xuKiBAcmV0dXJucyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgY2FuIGJlIHBhc3NlZCB0byB0aGUgcm91dGVyIGNvbnN0cnVjdG9yXG4qL1xuZnVuY3Rpb24gY3JlYXRlTWVtb3J5SGlzdG9yeShiYXNlID0gXCJcIikge1xuXHRsZXQgbGlzdGVuZXJzID0gW107XG5cdGxldCBxdWV1ZSA9IFtbU1RBUlQsIHt9XV07XG5cdGxldCBwb3NpdGlvbiA9IDA7XG5cdGJhc2UgPSBub3JtYWxpemVCYXNlKGJhc2UpO1xuXHRmdW5jdGlvbiBzZXRMb2NhdGlvbihsb2NhdGlvbiQxLCBzdGF0ZSA9IHt9KSB7XG5cdFx0cG9zaXRpb24rKztcblx0XHRpZiAocG9zaXRpb24gIT09IHF1ZXVlLmxlbmd0aCkgcXVldWUuc3BsaWNlKHBvc2l0aW9uKTtcblx0XHRxdWV1ZS5wdXNoKFtsb2NhdGlvbiQxLCBzdGF0ZV0pO1xuXHR9XG5cdGZ1bmN0aW9uIHRyaWdnZXJMaXN0ZW5lcnModG8sIGZyb20sIHsgZGlyZWN0aW9uLCBkZWx0YSB9KSB7XG5cdFx0Y29uc3QgaW5mbyA9IHtcblx0XHRcdGRpcmVjdGlvbixcblx0XHRcdGRlbHRhLFxuXHRcdFx0dHlwZTogTmF2aWdhdGlvblR5cGUucG9wXG5cdFx0fTtcblx0XHRmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGxpc3RlbmVycykgY2FsbGJhY2sodG8sIGZyb20sIGluZm8pO1xuXHR9XG5cdGNvbnN0IHJvdXRlckhpc3RvcnkgPSB7XG5cdFx0bG9jYXRpb246IFNUQVJULFxuXHRcdHN0YXRlOiB7fSxcblx0XHRiYXNlLFxuXHRcdGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYuYmluZChudWxsLCBiYXNlKSxcblx0XHRyZXBsYWNlKHRvLCBzdGF0ZSkge1xuXHRcdFx0cXVldWUuc3BsaWNlKHBvc2l0aW9uLS0sIDEpO1xuXHRcdFx0c2V0TG9jYXRpb24odG8sIHN0YXRlKTtcblx0XHR9LFxuXHRcdHB1c2godG8sIHN0YXRlKSB7XG5cdFx0XHRzZXRMb2NhdGlvbih0bywgc3RhdGUpO1xuXHRcdH0sXG5cdFx0bGlzdGVuKGNhbGxiYWNrKSB7XG5cdFx0XHRsaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG5cdFx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGNhbGxiYWNrKTtcblx0XHRcdFx0aWYgKGluZGV4ID4gLTEpIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0fTtcblx0XHR9LFxuXHRcdGRlc3Ryb3koKSB7XG5cdFx0XHRsaXN0ZW5lcnMgPSBbXTtcblx0XHRcdHF1ZXVlID0gW1tTVEFSVCwge31dXTtcblx0XHRcdHBvc2l0aW9uID0gMDtcblx0XHR9LFxuXHRcdGdvKGRlbHRhLCBzaG91bGRUcmlnZ2VyID0gdHJ1ZSkge1xuXHRcdFx0Y29uc3QgZnJvbSA9IHRoaXMubG9jYXRpb247XG5cdFx0XHRjb25zdCBkaXJlY3Rpb24gPSBkZWx0YSA8IDAgPyBOYXZpZ2F0aW9uRGlyZWN0aW9uLmJhY2sgOiBOYXZpZ2F0aW9uRGlyZWN0aW9uLmZvcndhcmQ7XG5cdFx0XHRwb3NpdGlvbiA9IE1hdGgubWF4KDAsIE1hdGgubWluKHBvc2l0aW9uICsgZGVsdGEsIHF1ZXVlLmxlbmd0aCAtIDEpKTtcblx0XHRcdGlmIChzaG91bGRUcmlnZ2VyKSB0cmlnZ2VyTGlzdGVuZXJzKHRoaXMubG9jYXRpb24sIGZyb20sIHtcblx0XHRcdFx0ZGlyZWN0aW9uLFxuXHRcdFx0XHRkZWx0YVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkocm91dGVySGlzdG9yeSwgXCJsb2NhdGlvblwiLCB7XG5cdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRnZXQ6ICgpID0+IHF1ZXVlW3Bvc2l0aW9uXVswXVxuXHR9KTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHJvdXRlckhpc3RvcnksIFwic3RhdGVcIiwge1xuXHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0Z2V0OiAoKSA9PiBxdWV1ZVtwb3NpdGlvbl1bMV1cblx0fSk7XG5cdHJldHVybiByb3V0ZXJIaXN0b3J5O1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvaGlzdG9yeS9oYXNoLnRzXG4vKipcbiogQ3JlYXRlcyBhIGhhc2ggaGlzdG9yeS4gVXNlZnVsIGZvciB3ZWIgYXBwbGljYXRpb25zIHdpdGggbm8gaG9zdCAoZS5nLiBgZmlsZTovL2ApIG9yIHdoZW4gY29uZmlndXJpbmcgYSBzZXJ2ZXIgdG9cbiogaGFuZGxlIGFueSBVUkwgaXMgbm90IHBvc3NpYmxlLlxuKlxuKiBAcGFyYW0gYmFzZSAtIG9wdGlvbmFsIGJhc2UgdG8gcHJvdmlkZS4gRGVmYXVsdHMgdG8gYGxvY2F0aW9uLnBhdGhuYW1lICsgbG9jYXRpb24uc2VhcmNoYCBJZiB0aGVyZSBpcyBhIGA8YmFzZT5gIHRhZ1xuKiBpbiB0aGUgYGhlYWRgLCBpdHMgdmFsdWUgd2lsbCBiZSBpZ25vcmVkIGluIGZhdm9yIG9mIHRoaXMgcGFyYW1ldGVyICoqYnV0IG5vdGUgaXQgYWZmZWN0cyBhbGwgdGhlIGhpc3RvcnkucHVzaFN0YXRlKClcbiogY2FsbHMqKiwgbWVhbmluZyB0aGF0IGlmIHlvdSB1c2UgYSBgPGJhc2U+YCB0YWcsIGl0J3MgYGhyZWZgIHZhbHVlICoqaGFzIHRvIG1hdGNoIHRoaXMgcGFyYW1ldGVyKiogKGlnbm9yaW5nIGFueXRoaW5nXG4qIGFmdGVyIHRoZSBgI2ApLlxuKlxuKiBAZXhhbXBsZVxuKiBgYGBqc1xuKiAvLyBhdCBodHRwczovL2V4YW1wbGUuY29tL2ZvbGRlclxuKiBjcmVhdGVXZWJIYXNoSGlzdG9yeSgpIC8vIGdpdmVzIGEgdXJsIG9mIGBodHRwczovL2V4YW1wbGUuY29tL2ZvbGRlciNgXG4qIGNyZWF0ZVdlYkhhc2hIaXN0b3J5KCcvZm9sZGVyLycpIC8vIGdpdmVzIGEgdXJsIG9mIGBodHRwczovL2V4YW1wbGUuY29tL2ZvbGRlci8jYFxuKiAvLyBpZiB0aGUgYCNgIGlzIHByb3ZpZGVkIGluIHRoZSBiYXNlLCBpdCB3b24ndCBiZSBhZGRlZCBieSBgY3JlYXRlV2ViSGFzaEhpc3RvcnlgXG4qIGNyZWF0ZVdlYkhhc2hIaXN0b3J5KCcvZm9sZGVyLyMvYXBwLycpIC8vIGdpdmVzIGEgdXJsIG9mIGBodHRwczovL2V4YW1wbGUuY29tL2ZvbGRlci8jL2FwcC9gXG4qIC8vIHlvdSBzaG91bGQgYXZvaWQgZG9pbmcgdGhpcyBiZWNhdXNlIGl0IGNoYW5nZXMgdGhlIG9yaWdpbmFsIHVybCBhbmQgYnJlYWtzIGNvcHlpbmcgdXJsc1xuKiBjcmVhdGVXZWJIYXNoSGlzdG9yeSgnL290aGVyLWZvbGRlci8nKSAvLyBnaXZlcyBhIHVybCBvZiBgaHR0cHM6Ly9leGFtcGxlLmNvbS9vdGhlci1mb2xkZXIvI2BcbipcbiogLy8gYXQgZmlsZTovLy91c3IvZXRjL2ZvbGRlci9pbmRleC5odG1sXG4qIC8vIGZvciBsb2NhdGlvbnMgd2l0aCBubyBgaG9zdGAsIHRoZSBiYXNlIGlzIGlnbm9yZWRcbiogY3JlYXRlV2ViSGFzaEhpc3RvcnkoJy9pQW1JZ25vcmVkJykgLy8gZ2l2ZXMgYSB1cmwgb2YgYGZpbGU6Ly8vdXNyL2V0Yy9mb2xkZXIvaW5kZXguaHRtbCNgXG4qIGBgYFxuKi9cbmZ1bmN0aW9uIGNyZWF0ZVdlYkhhc2hIaXN0b3J5KGJhc2UpIHtcblx0YmFzZSA9IGxvY2F0aW9uLmhvc3QgPyBiYXNlIHx8IGxvY2F0aW9uLnBhdGhuYW1lICsgbG9jYXRpb24uc2VhcmNoIDogXCJcIjtcblx0aWYgKCFiYXNlLmluY2x1ZGVzKFwiI1wiKSkgYmFzZSArPSBcIiNcIjtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiAhYmFzZS5lbmRzV2l0aChcIiMvXCIpICYmICFiYXNlLmVuZHNXaXRoKFwiI1wiKSkgd2FybiQxKGBBIGhhc2ggYmFzZSBtdXN0IGVuZCB3aXRoIGEgXCIjXCI6XFxuXCIke2Jhc2V9XCIgc2hvdWxkIGJlIFwiJHtiYXNlLnJlcGxhY2UoLyMuKiQvLCBcIiNcIil9XCIuYCk7XG5cdHJldHVybiBjcmVhdGVXZWJIaXN0b3J5KGJhc2UpO1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvbWF0Y2hlci9wYXRoVG9rZW5pemVyLnRzXG5sZXQgVG9rZW5UeXBlID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKFRva2VuVHlwZSQxKSB7XG5cdFRva2VuVHlwZSQxW1Rva2VuVHlwZSQxW1wiU3RhdGljXCJdID0gMF0gPSBcIlN0YXRpY1wiO1xuXHRUb2tlblR5cGUkMVtUb2tlblR5cGUkMVtcIlBhcmFtXCJdID0gMV0gPSBcIlBhcmFtXCI7XG5cdFRva2VuVHlwZSQxW1Rva2VuVHlwZSQxW1wiR3JvdXBcIl0gPSAyXSA9IFwiR3JvdXBcIjtcblx0cmV0dXJuIFRva2VuVHlwZSQxO1xufSh7fSk7XG52YXIgVG9rZW5pemVyU3RhdGUgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oVG9rZW5pemVyU3RhdGUkMSkge1xuXHRUb2tlbml6ZXJTdGF0ZSQxW1Rva2VuaXplclN0YXRlJDFbXCJTdGF0aWNcIl0gPSAwXSA9IFwiU3RhdGljXCI7XG5cdFRva2VuaXplclN0YXRlJDFbVG9rZW5pemVyU3RhdGUkMVtcIlBhcmFtXCJdID0gMV0gPSBcIlBhcmFtXCI7XG5cdFRva2VuaXplclN0YXRlJDFbVG9rZW5pemVyU3RhdGUkMVtcIlBhcmFtUmVnRXhwXCJdID0gMl0gPSBcIlBhcmFtUmVnRXhwXCI7XG5cdFRva2VuaXplclN0YXRlJDFbVG9rZW5pemVyU3RhdGUkMVtcIlBhcmFtUmVnRXhwRW5kXCJdID0gM10gPSBcIlBhcmFtUmVnRXhwRW5kXCI7XG5cdFRva2VuaXplclN0YXRlJDFbVG9rZW5pemVyU3RhdGUkMVtcIkVzY2FwZU5leHRcIl0gPSA0XSA9IFwiRXNjYXBlTmV4dFwiO1xuXHRyZXR1cm4gVG9rZW5pemVyU3RhdGUkMTtcbn0oVG9rZW5pemVyU3RhdGUgfHwge30pO1xuY29uc3QgUk9PVF9UT0tFTiA9IHtcblx0dHlwZTogVG9rZW5UeXBlLlN0YXRpYyxcblx0dmFsdWU6IFwiXCJcbn07XG5jb25zdCBWQUxJRF9QQVJBTV9SRSA9IC9bYS16QS1aMC05X10vO1xuZnVuY3Rpb24gdG9rZW5pemVQYXRoKHBhdGgpIHtcblx0aWYgKCFwYXRoKSByZXR1cm4gW1tdXTtcblx0aWYgKHBhdGggPT09IFwiL1wiKSByZXR1cm4gW1tST09UX1RPS0VOXV07XG5cdGlmICghcGF0aC5zdGFydHNXaXRoKFwiL1wiKSkgdGhyb3cgbmV3IEVycm9yKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IGBSb3V0ZSBwYXRocyBzaG91bGQgc3RhcnQgd2l0aCBhIFwiL1wiOiBcIiR7cGF0aH1cIiBzaG91bGQgYmUgXCIvJHtwYXRofVwiLmAgOiBgSW52YWxpZCBwYXRoIFwiJHtwYXRofVwiYCk7XG5cdGZ1bmN0aW9uIGNyYXNoKG1lc3NhZ2UpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYEVSUiAoJHtzdGF0ZX0pL1wiJHtidWZmZXJ9XCI6ICR7bWVzc2FnZX1gKTtcblx0fVxuXHRsZXQgc3RhdGUgPSBUb2tlbml6ZXJTdGF0ZS5TdGF0aWM7XG5cdGxldCBwcmV2aW91c1N0YXRlID0gc3RhdGU7XG5cdGNvbnN0IHRva2VucyA9IFtdO1xuXHRsZXQgc2VnbWVudDtcblx0ZnVuY3Rpb24gZmluYWxpemVTZWdtZW50KCkge1xuXHRcdGlmIChzZWdtZW50KSB0b2tlbnMucHVzaChzZWdtZW50KTtcblx0XHRzZWdtZW50ID0gW107XG5cdH1cblx0bGV0IGkgPSAwO1xuXHRsZXQgY2hhcjtcblx0bGV0IGJ1ZmZlciA9IFwiXCI7XG5cdGxldCBjdXN0b21SZSA9IFwiXCI7XG5cdGZ1bmN0aW9uIGNvbnN1bWVCdWZmZXIoKSB7XG5cdFx0aWYgKCFidWZmZXIpIHJldHVybjtcblx0XHRpZiAoc3RhdGUgPT09IFRva2VuaXplclN0YXRlLlN0YXRpYykgc2VnbWVudC5wdXNoKHtcblx0XHRcdHR5cGU6IFRva2VuVHlwZS5TdGF0aWMsXG5cdFx0XHR2YWx1ZTogYnVmZmVyXG5cdFx0fSk7XG5cdFx0ZWxzZSBpZiAoc3RhdGUgPT09IFRva2VuaXplclN0YXRlLlBhcmFtIHx8IHN0YXRlID09PSBUb2tlbml6ZXJTdGF0ZS5QYXJhbVJlZ0V4cCB8fCBzdGF0ZSA9PT0gVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHBFbmQpIHtcblx0XHRcdGlmIChzZWdtZW50Lmxlbmd0aCA+IDEgJiYgKGNoYXIgPT09IFwiKlwiIHx8IGNoYXIgPT09IFwiK1wiKSkgY3Jhc2goYEEgcmVwZWF0YWJsZSBwYXJhbSAoJHtidWZmZXJ9KSBtdXN0IGJlIGFsb25lIGluIGl0cyBzZWdtZW50LiBlZzogJy86aWRzKy5gKTtcblx0XHRcdHNlZ21lbnQucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFRva2VuVHlwZS5QYXJhbSxcblx0XHRcdFx0dmFsdWU6IGJ1ZmZlcixcblx0XHRcdFx0cmVnZXhwOiBjdXN0b21SZSxcblx0XHRcdFx0cmVwZWF0YWJsZTogY2hhciA9PT0gXCIqXCIgfHwgY2hhciA9PT0gXCIrXCIsXG5cdFx0XHRcdG9wdGlvbmFsOiBjaGFyID09PSBcIipcIiB8fCBjaGFyID09PSBcIj9cIlxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIGNyYXNoKFwiSW52YWxpZCBzdGF0ZSB0byBjb25zdW1lIGJ1ZmZlclwiKTtcblx0XHRidWZmZXIgPSBcIlwiO1xuXHR9XG5cdGZ1bmN0aW9uIGFkZENoYXJUb0J1ZmZlcigpIHtcblx0XHRidWZmZXIgKz0gY2hhcjtcblx0fVxuXHR3aGlsZSAoaSA8IHBhdGgubGVuZ3RoKSB7XG5cdFx0Y2hhciA9IHBhdGhbaSsrXTtcblx0XHRpZiAoY2hhciA9PT0gXCJcXFxcXCIgJiYgc3RhdGUgIT09IFRva2VuaXplclN0YXRlLlBhcmFtUmVnRXhwKSB7XG5cdFx0XHRwcmV2aW91c1N0YXRlID0gc3RhdGU7XG5cdFx0XHRzdGF0ZSA9IFRva2VuaXplclN0YXRlLkVzY2FwZU5leHQ7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0c3dpdGNoIChzdGF0ZSkge1xuXHRcdFx0Y2FzZSBUb2tlbml6ZXJTdGF0ZS5TdGF0aWM6XG5cdFx0XHRcdGlmIChjaGFyID09PSBcIi9cIikge1xuXHRcdFx0XHRcdGlmIChidWZmZXIpIGNvbnN1bWVCdWZmZXIoKTtcblx0XHRcdFx0XHRmaW5hbGl6ZVNlZ21lbnQoKTtcblx0XHRcdFx0fSBlbHNlIGlmIChjaGFyID09PSBcIjpcIikge1xuXHRcdFx0XHRcdGNvbnN1bWVCdWZmZXIoKTtcblx0XHRcdFx0XHRzdGF0ZSA9IFRva2VuaXplclN0YXRlLlBhcmFtO1xuXHRcdFx0XHR9IGVsc2UgYWRkQ2hhclRvQnVmZmVyKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBUb2tlbml6ZXJTdGF0ZS5Fc2NhcGVOZXh0OlxuXHRcdFx0XHRhZGRDaGFyVG9CdWZmZXIoKTtcblx0XHRcdFx0c3RhdGUgPSBwcmV2aW91c1N0YXRlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgVG9rZW5pemVyU3RhdGUuUGFyYW06XG5cdFx0XHRcdGlmIChjaGFyID09PSBcIihcIikgc3RhdGUgPSBUb2tlbml6ZXJTdGF0ZS5QYXJhbVJlZ0V4cDtcblx0XHRcdFx0ZWxzZSBpZiAoVkFMSURfUEFSQU1fUkUudGVzdChjaGFyKSkgYWRkQ2hhclRvQnVmZmVyKCk7XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGNvbnN1bWVCdWZmZXIoKTtcblx0XHRcdFx0XHRzdGF0ZSA9IFRva2VuaXplclN0YXRlLlN0YXRpYztcblx0XHRcdFx0XHRpZiAoY2hhciAhPT0gXCIqXCIgJiYgY2hhciAhPT0gXCI/XCIgJiYgY2hhciAhPT0gXCIrXCIpIGktLTtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHA6XG5cdFx0XHRcdGlmIChjaGFyID09PSBcIilcIikgaWYgKGN1c3RvbVJlW2N1c3RvbVJlLmxlbmd0aCAtIDFdID09IFwiXFxcXFwiKSBjdXN0b21SZSA9IGN1c3RvbVJlLnNsaWNlKDAsIC0xKSArIGNoYXI7XG5cdFx0XHRcdGVsc2Ugc3RhdGUgPSBUb2tlbml6ZXJTdGF0ZS5QYXJhbVJlZ0V4cEVuZDtcblx0XHRcdFx0ZWxzZSBjdXN0b21SZSArPSBjaGFyO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHBFbmQ6XG5cdFx0XHRcdGNvbnN1bWVCdWZmZXIoKTtcblx0XHRcdFx0c3RhdGUgPSBUb2tlbml6ZXJTdGF0ZS5TdGF0aWM7XG5cdFx0XHRcdGlmIChjaGFyICE9PSBcIipcIiAmJiBjaGFyICE9PSBcIj9cIiAmJiBjaGFyICE9PSBcIitcIikgaS0tO1xuXHRcdFx0XHRjdXN0b21SZSA9IFwiXCI7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0Y3Jhc2goXCJVbmtub3duIHN0YXRlXCIpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblx0aWYgKHN0YXRlID09PSBUb2tlbml6ZXJTdGF0ZS5QYXJhbVJlZ0V4cCkgY3Jhc2goYFVuZmluaXNoZWQgY3VzdG9tIFJlZ0V4cCBmb3IgcGFyYW0gXCIke2J1ZmZlcn1cImApO1xuXHRjb25zdW1lQnVmZmVyKCk7XG5cdGZpbmFsaXplU2VnbWVudCgpO1xuXHRyZXR1cm4gdG9rZW5zO1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvbWF0Y2hlci9wYXRoUGFyc2VyUmFua2VyLnRzXG5jb25zdCBCQVNFX1BBUkFNX1BBVFRFUk4gPSBcIlteL10rP1wiO1xuY29uc3QgQkFTRV9QQVRIX1BBUlNFUl9PUFRJT05TID0ge1xuXHRzZW5zaXRpdmU6IGZhbHNlLFxuXHRzdHJpY3Q6IGZhbHNlLFxuXHRzdGFydDogdHJ1ZSxcblx0ZW5kOiB0cnVlXG59O1xudmFyIFBhdGhTY29yZSA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbihQYXRoU2NvcmUkMSkge1xuXHRQYXRoU2NvcmUkMVtQYXRoU2NvcmUkMVtcIl9tdWx0aXBsaWVyXCJdID0gMTBdID0gXCJfbXVsdGlwbGllclwiO1xuXHRQYXRoU2NvcmUkMVtQYXRoU2NvcmUkMVtcIlJvb3RcIl0gPSA5MF0gPSBcIlJvb3RcIjtcblx0UGF0aFNjb3JlJDFbUGF0aFNjb3JlJDFbXCJTZWdtZW50XCJdID0gNDBdID0gXCJTZWdtZW50XCI7XG5cdFBhdGhTY29yZSQxW1BhdGhTY29yZSQxW1wiU3ViU2VnbWVudFwiXSA9IDMwXSA9IFwiU3ViU2VnbWVudFwiO1xuXHRQYXRoU2NvcmUkMVtQYXRoU2NvcmUkMVtcIlN0YXRpY1wiXSA9IDQwXSA9IFwiU3RhdGljXCI7XG5cdFBhdGhTY29yZSQxW1BhdGhTY29yZSQxW1wiRHluYW1pY1wiXSA9IDIwXSA9IFwiRHluYW1pY1wiO1xuXHRQYXRoU2NvcmUkMVtQYXRoU2NvcmUkMVtcIkJvbnVzQ3VzdG9tUmVnRXhwXCJdID0gMTBdID0gXCJCb251c0N1c3RvbVJlZ0V4cFwiO1xuXHRQYXRoU2NvcmUkMVtQYXRoU2NvcmUkMVtcIkJvbnVzV2lsZGNhcmRcIl0gPSAtNTBdID0gXCJCb251c1dpbGRjYXJkXCI7XG5cdFBhdGhTY29yZSQxW1BhdGhTY29yZSQxW1wiQm9udXNSZXBlYXRhYmxlXCJdID0gLTIwXSA9IFwiQm9udXNSZXBlYXRhYmxlXCI7XG5cdFBhdGhTY29yZSQxW1BhdGhTY29yZSQxW1wiQm9udXNPcHRpb25hbFwiXSA9IC04XSA9IFwiQm9udXNPcHRpb25hbFwiO1xuXHRQYXRoU2NvcmUkMVtQYXRoU2NvcmUkMVtcIkJvbnVzU3RyaWN0XCJdID0gLjcwMDAwMDAwMDAwMDAwMDFdID0gXCJCb251c1N0cmljdFwiO1xuXHRQYXRoU2NvcmUkMVtQYXRoU2NvcmUkMVtcIkJvbnVzQ2FzZVNlbnNpdGl2ZVwiXSA9IC4yNV0gPSBcIkJvbnVzQ2FzZVNlbnNpdGl2ZVwiO1xuXHRyZXR1cm4gUGF0aFNjb3JlJDE7XG59KFBhdGhTY29yZSB8fCB7fSk7XG5jb25zdCBSRUdFWF9DSEFSU19SRSA9IC9bLisqP14ke30oKVtcXF0vXFxcXF0vZztcbi8qKlxuKiBDcmVhdGVzIGEgcGF0aCBwYXJzZXIgZnJvbSBhbiBhcnJheSBvZiBTZWdtZW50cyAoYSBzZWdtZW50IGlzIGFuIGFycmF5IG9mIFRva2VucylcbipcbiogQHBhcmFtIHNlZ21lbnRzIC0gYXJyYXkgb2Ygc2VnbWVudHMgcmV0dXJuZWQgYnkgdG9rZW5pemVQYXRoXG4qIEBwYXJhbSBleHRyYU9wdGlvbnMgLSBvcHRpb25hbCBvcHRpb25zIGZvciB0aGUgcmVnZXhwXG4qIEByZXR1cm5zIGEgUGF0aFBhcnNlclxuKi9cbmZ1bmN0aW9uIHRva2Vuc1RvUGFyc2VyKHNlZ21lbnRzLCBleHRyYU9wdGlvbnMpIHtcblx0Y29uc3Qgb3B0aW9ucyA9IGFzc2lnbih7fSwgQkFTRV9QQVRIX1BBUlNFUl9PUFRJT05TLCBleHRyYU9wdGlvbnMpO1xuXHRjb25zdCBzY29yZSA9IFtdO1xuXHRsZXQgcGF0dGVybiA9IG9wdGlvbnMuc3RhcnQgPyBcIl5cIiA6IFwiXCI7XG5cdGNvbnN0IGtleXMgPSBbXTtcblx0Zm9yIChjb25zdCBzZWdtZW50IG9mIHNlZ21lbnRzKSB7XG5cdFx0Y29uc3Qgc2VnbWVudFNjb3JlcyA9IHNlZ21lbnQubGVuZ3RoID8gW10gOiBbUGF0aFNjb3JlLlJvb3RdO1xuXHRcdGlmIChvcHRpb25zLnN0cmljdCAmJiAhc2VnbWVudC5sZW5ndGgpIHBhdHRlcm4gKz0gXCIvXCI7XG5cdFx0Zm9yIChsZXQgdG9rZW5JbmRleCA9IDA7IHRva2VuSW5kZXggPCBzZWdtZW50Lmxlbmd0aDsgdG9rZW5JbmRleCsrKSB7XG5cdFx0XHRjb25zdCB0b2tlbiA9IHNlZ21lbnRbdG9rZW5JbmRleF07XG5cdFx0XHRsZXQgc3ViU2VnbWVudFNjb3JlID0gUGF0aFNjb3JlLlNlZ21lbnQgKyAob3B0aW9ucy5zZW5zaXRpdmUgPyBQYXRoU2NvcmUuQm9udXNDYXNlU2Vuc2l0aXZlIDogMCk7XG5cdFx0XHRpZiAodG9rZW4udHlwZSA9PT0gVG9rZW5UeXBlLlN0YXRpYykge1xuXHRcdFx0XHRpZiAoIXRva2VuSW5kZXgpIHBhdHRlcm4gKz0gXCIvXCI7XG5cdFx0XHRcdHBhdHRlcm4gKz0gdG9rZW4udmFsdWUucmVwbGFjZShSRUdFWF9DSEFSU19SRSwgXCJcXFxcJCZcIik7XG5cdFx0XHRcdHN1YlNlZ21lbnRTY29yZSArPSBQYXRoU2NvcmUuU3RhdGljO1xuXHRcdFx0fSBlbHNlIGlmICh0b2tlbi50eXBlID09PSBUb2tlblR5cGUuUGFyYW0pIHtcblx0XHRcdFx0Y29uc3QgeyB2YWx1ZSwgcmVwZWF0YWJsZSwgb3B0aW9uYWwsIHJlZ2V4cCB9ID0gdG9rZW47XG5cdFx0XHRcdGtleXMucHVzaCh7XG5cdFx0XHRcdFx0bmFtZTogdmFsdWUsXG5cdFx0XHRcdFx0cmVwZWF0YWJsZSxcblx0XHRcdFx0XHRvcHRpb25hbFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgcmUkMSA9IHJlZ2V4cCA/IHJlZ2V4cCA6IEJBU0VfUEFSQU1fUEFUVEVSTjtcblx0XHRcdFx0aWYgKHJlJDEgIT09IEJBU0VfUEFSQU1fUEFUVEVSTikge1xuXHRcdFx0XHRcdHN1YlNlZ21lbnRTY29yZSArPSBQYXRoU2NvcmUuQm9udXNDdXN0b21SZWdFeHA7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGAke3JlJDF9YDtcblx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjdXN0b20gUmVnRXhwIGZvciBwYXJhbSBcIiR7dmFsdWV9XCIgKCR7cmUkMX0pOiBgICsgZXJyLm1lc3NhZ2UpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRsZXQgc3ViUGF0dGVybiA9IHJlcGVhdGFibGUgPyBgKCg/OiR7cmUkMX0pKD86Lyg/OiR7cmUkMX0pKSopYCA6IGAoJHtyZSQxfSlgO1xuXHRcdFx0XHRpZiAoIXRva2VuSW5kZXgpIHN1YlBhdHRlcm4gPSBvcHRpb25hbCAmJiBzZWdtZW50Lmxlbmd0aCA8IDIgPyBgKD86LyR7c3ViUGF0dGVybn0pYCA6IFwiL1wiICsgc3ViUGF0dGVybjtcblx0XHRcdFx0aWYgKG9wdGlvbmFsKSBzdWJQYXR0ZXJuICs9IFwiP1wiO1xuXHRcdFx0XHRwYXR0ZXJuICs9IHN1YlBhdHRlcm47XG5cdFx0XHRcdHN1YlNlZ21lbnRTY29yZSArPSBQYXRoU2NvcmUuRHluYW1pYztcblx0XHRcdFx0aWYgKG9wdGlvbmFsKSBzdWJTZWdtZW50U2NvcmUgKz0gUGF0aFNjb3JlLkJvbnVzT3B0aW9uYWw7XG5cdFx0XHRcdGlmIChyZXBlYXRhYmxlKSBzdWJTZWdtZW50U2NvcmUgKz0gUGF0aFNjb3JlLkJvbnVzUmVwZWF0YWJsZTtcblx0XHRcdFx0aWYgKHJlJDEgPT09IFwiLipcIikgc3ViU2VnbWVudFNjb3JlICs9IFBhdGhTY29yZS5Cb251c1dpbGRjYXJkO1xuXHRcdFx0fVxuXHRcdFx0c2VnbWVudFNjb3Jlcy5wdXNoKHN1YlNlZ21lbnRTY29yZSk7XG5cdFx0fVxuXHRcdHNjb3JlLnB1c2goc2VnbWVudFNjb3Jlcyk7XG5cdH1cblx0aWYgKG9wdGlvbnMuc3RyaWN0ICYmIG9wdGlvbnMuZW5kKSB7XG5cdFx0Y29uc3QgaSA9IHNjb3JlLmxlbmd0aCAtIDE7XG5cdFx0c2NvcmVbaV1bc2NvcmVbaV0ubGVuZ3RoIC0gMV0gKz0gUGF0aFNjb3JlLkJvbnVzU3RyaWN0O1xuXHR9XG5cdGlmICghb3B0aW9ucy5zdHJpY3QpIHBhdHRlcm4gKz0gXCIvP1wiO1xuXHRpZiAob3B0aW9ucy5lbmQpIHBhdHRlcm4gKz0gXCIkXCI7XG5cdGVsc2UgaWYgKG9wdGlvbnMuc3RyaWN0ICYmICFwYXR0ZXJuLmVuZHNXaXRoKFwiL1wiKSkgcGF0dGVybiArPSBcIig/Oi98JClcIjtcblx0Y29uc3QgcmUgPSBuZXcgUmVnRXhwKHBhdHRlcm4sIG9wdGlvbnMuc2Vuc2l0aXZlID8gXCJcIiA6IFwiaVwiKTtcblx0ZnVuY3Rpb24gcGFyc2UocGF0aCkge1xuXHRcdGNvbnN0IG1hdGNoID0gcGF0aC5tYXRjaChyZSk7XG5cdFx0Y29uc3QgcGFyYW1zID0ge307XG5cdFx0aWYgKCFtYXRjaCkgcmV0dXJuIG51bGw7XG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPCBtYXRjaC5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgdmFsdWUgPSBtYXRjaFtpXSB8fCBcIlwiO1xuXHRcdFx0Y29uc3Qga2V5ID0ga2V5c1tpIC0gMV07XG5cdFx0XHRwYXJhbXNba2V5Lm5hbWVdID0gdmFsdWUgJiYga2V5LnJlcGVhdGFibGUgPyB2YWx1ZS5zcGxpdChcIi9cIikgOiB2YWx1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIHBhcmFtcztcblx0fVxuXHRmdW5jdGlvbiBzdHJpbmdpZnkocGFyYW1zKSB7XG5cdFx0bGV0IHBhdGggPSBcIlwiO1xuXHRcdGxldCBhdm9pZER1cGxpY2F0ZWRTbGFzaCA9IGZhbHNlO1xuXHRcdGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xuXHRcdFx0aWYgKCFhdm9pZER1cGxpY2F0ZWRTbGFzaCB8fCAhcGF0aC5lbmRzV2l0aChcIi9cIikpIHBhdGggKz0gXCIvXCI7XG5cdFx0XHRhdm9pZER1cGxpY2F0ZWRTbGFzaCA9IGZhbHNlO1xuXHRcdFx0Zm9yIChjb25zdCB0b2tlbiBvZiBzZWdtZW50KSBpZiAodG9rZW4udHlwZSA9PT0gVG9rZW5UeXBlLlN0YXRpYykgcGF0aCArPSB0b2tlbi52YWx1ZTtcblx0XHRcdGVsc2UgaWYgKHRva2VuLnR5cGUgPT09IFRva2VuVHlwZS5QYXJhbSkge1xuXHRcdFx0XHRjb25zdCB7IHZhbHVlLCByZXBlYXRhYmxlLCBvcHRpb25hbCB9ID0gdG9rZW47XG5cdFx0XHRcdGNvbnN0IHBhcmFtID0gdmFsdWUgaW4gcGFyYW1zID8gcGFyYW1zW3ZhbHVlXSA6IFwiXCI7XG5cdFx0XHRcdGlmIChpc0FycmF5KHBhcmFtKSAmJiAhcmVwZWF0YWJsZSkgdGhyb3cgbmV3IEVycm9yKGBQcm92aWRlZCBwYXJhbSBcIiR7dmFsdWV9XCIgaXMgYW4gYXJyYXkgYnV0IGl0IGlzIG5vdCByZXBlYXRhYmxlICgqIG9yICsgbW9kaWZpZXJzKWApO1xuXHRcdFx0XHRjb25zdCB0ZXh0ID0gaXNBcnJheShwYXJhbSkgPyBwYXJhbS5qb2luKFwiL1wiKSA6IHBhcmFtO1xuXHRcdFx0XHRpZiAoIXRleHQpIGlmIChvcHRpb25hbCkge1xuXHRcdFx0XHRcdGlmIChzZWdtZW50Lmxlbmd0aCA8IDIpIGlmIChwYXRoLmVuZHNXaXRoKFwiL1wiKSkgcGF0aCA9IHBhdGguc2xpY2UoMCwgLTEpO1xuXHRcdFx0XHRcdGVsc2UgYXZvaWREdXBsaWNhdGVkU2xhc2ggPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2UgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIHBhcmFtIFwiJHt2YWx1ZX1cImApO1xuXHRcdFx0XHRwYXRoICs9IHRleHQ7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBwYXRoIHx8IFwiL1wiO1xuXHR9XG5cdHJldHVybiB7XG5cdFx0cmUsXG5cdFx0c2NvcmUsXG5cdFx0a2V5cyxcblx0XHRwYXJzZSxcblx0XHRzdHJpbmdpZnlcblx0fTtcbn1cbi8qKlxuKiBDb21wYXJlcyBhbiBhcnJheSBvZiBudW1iZXJzIGFzIHVzZWQgaW4gUGF0aFBhcnNlci5zY29yZSBhbmQgcmV0dXJucyBhXG4qIG51bWJlci4gVGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBgc29ydGAgYW4gYXJyYXlcbipcbiogQHBhcmFtIGEgLSBmaXJzdCBhcnJheSBvZiBudW1iZXJzXG4qIEBwYXJhbSBiIC0gc2Vjb25kIGFycmF5IG9mIG51bWJlcnNcbiogQHJldHVybnMgMCBpZiBib3RoIGFyZSBlcXVhbCwgPCAwIGlmIGEgc2hvdWxkIGJlIHNvcnRlZCBmaXJzdCwgPiAwIGlmIGJcbiogc2hvdWxkIGJlIHNvcnRlZCBmaXJzdFxuKi9cbmZ1bmN0aW9uIGNvbXBhcmVTY29yZUFycmF5KGEsIGIpIHtcblx0bGV0IGkgPSAwO1xuXHR3aGlsZSAoaSA8IGEubGVuZ3RoICYmIGkgPCBiLmxlbmd0aCkge1xuXHRcdGNvbnN0IGRpZmYgPSBiW2ldIC0gYVtpXTtcblx0XHRpZiAoZGlmZikgcmV0dXJuIGRpZmY7XG5cdFx0aSsrO1xuXHR9XG5cdGlmIChhLmxlbmd0aCA8IGIubGVuZ3RoKSByZXR1cm4gYS5sZW5ndGggPT09IDEgJiYgYVswXSA9PT0gUGF0aFNjb3JlLlN0YXRpYyArIFBhdGhTY29yZS5TZWdtZW50ID8gLTEgOiAxO1xuXHRlbHNlIGlmIChhLmxlbmd0aCA+IGIubGVuZ3RoKSByZXR1cm4gYi5sZW5ndGggPT09IDEgJiYgYlswXSA9PT0gUGF0aFNjb3JlLlN0YXRpYyArIFBhdGhTY29yZS5TZWdtZW50ID8gMSA6IC0xO1xuXHRyZXR1cm4gMDtcbn1cbi8qKlxuKiBDb21wYXJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCBgc29ydGAgdG8gc29ydCBhbiBhcnJheSBvZiBQYXRoUGFyc2VyXG4qXG4qIEBwYXJhbSBhIC0gZmlyc3QgUGF0aFBhcnNlclxuKiBAcGFyYW0gYiAtIHNlY29uZCBQYXRoUGFyc2VyXG4qIEByZXR1cm5zIDAgaWYgYm90aCBhcmUgZXF1YWwsIDwgMCBpZiBhIHNob3VsZCBiZSBzb3J0ZWQgZmlyc3QsID4gMCBpZiBiXG4qL1xuZnVuY3Rpb24gY29tcGFyZVBhdGhQYXJzZXJTY29yZShhLCBiKSB7XG5cdGxldCBpID0gMDtcblx0Y29uc3QgYVNjb3JlID0gYS5zY29yZTtcblx0Y29uc3QgYlNjb3JlID0gYi5zY29yZTtcblx0d2hpbGUgKGkgPCBhU2NvcmUubGVuZ3RoICYmIGkgPCBiU2NvcmUubGVuZ3RoKSB7XG5cdFx0Y29uc3QgY29tcCA9IGNvbXBhcmVTY29yZUFycmF5KGFTY29yZVtpXSwgYlNjb3JlW2ldKTtcblx0XHRpZiAoY29tcCkgcmV0dXJuIGNvbXA7XG5cdFx0aSsrO1xuXHR9XG5cdGlmIChNYXRoLmFicyhiU2NvcmUubGVuZ3RoIC0gYVNjb3JlLmxlbmd0aCkgPT09IDEpIHtcblx0XHRpZiAoaXNMYXN0U2NvcmVOZWdhdGl2ZShhU2NvcmUpKSByZXR1cm4gMTtcblx0XHRpZiAoaXNMYXN0U2NvcmVOZWdhdGl2ZShiU2NvcmUpKSByZXR1cm4gLTE7XG5cdH1cblx0cmV0dXJuIGJTY29yZS5sZW5ndGggLSBhU2NvcmUubGVuZ3RoO1xufVxuLyoqXG4qIFRoaXMgYWxsb3dzIGRldGVjdGluZyBzcGxhdHMgYXQgdGhlIGVuZCBvZiBhIHBhdGg6IC9ob21lLzppZCguKikqXG4qXG4qIEBwYXJhbSBzY29yZSAtIHNjb3JlIHRvIGNoZWNrXG4qIEByZXR1cm5zIHRydWUgaWYgdGhlIGxhc3QgZW50cnkgaXMgbmVnYXRpdmVcbiovXG5mdW5jdGlvbiBpc0xhc3RTY29yZU5lZ2F0aXZlKHNjb3JlKSB7XG5cdGNvbnN0IGxhc3QgPSBzY29yZVtzY29yZS5sZW5ndGggLSAxXTtcblx0cmV0dXJuIHNjb3JlLmxlbmd0aCA+IDAgJiYgbGFzdFtsYXN0Lmxlbmd0aCAtIDFdIDwgMDtcbn1cbmNvbnN0IFBBVEhfUEFSU0VSX09QVElPTlNfREVGQVVMVFMgPSB7XG5cdHN0cmljdDogZmFsc2UsXG5cdGVuZDogdHJ1ZSxcblx0c2Vuc2l0aXZlOiBmYWxzZVxufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL21hdGNoZXIvcGF0aE1hdGNoZXIudHNcbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlUmVjb3JkTWF0Y2hlcihyZWNvcmQsIHBhcmVudCwgb3B0aW9ucykge1xuXHRjb25zdCBwYXJzZXIgPSB0b2tlbnNUb1BhcnNlcih0b2tlbml6ZVBhdGgocmVjb3JkLnBhdGgpLCBvcHRpb25zKTtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuXHRcdGNvbnN0IGV4aXN0aW5nS2V5cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdFx0Zm9yIChjb25zdCBrZXkgb2YgcGFyc2VyLmtleXMpIHtcblx0XHRcdGlmIChleGlzdGluZ0tleXMuaGFzKGtleS5uYW1lKSkgd2FybiQxKGBGb3VuZCBkdXBsaWNhdGVkIHBhcmFtcyB3aXRoIG5hbWUgXCIke2tleS5uYW1lfVwiIGZvciBwYXRoIFwiJHtyZWNvcmQucGF0aH1cIi4gT25seSB0aGUgbGFzdCBvbmUgd2lsbCBiZSBhdmFpbGFibGUgb24gXCIkcm91dGUucGFyYW1zXCIuYCk7XG5cdFx0XHRleGlzdGluZ0tleXMuYWRkKGtleS5uYW1lKTtcblx0XHR9XG5cdH1cblx0Y29uc3QgbWF0Y2hlciA9IGFzc2lnbihwYXJzZXIsIHtcblx0XHRyZWNvcmQsXG5cdFx0cGFyZW50LFxuXHRcdGNoaWxkcmVuOiBbXSxcblx0XHRhbGlhczogW11cblx0fSk7XG5cdGlmIChwYXJlbnQpIHtcblx0XHRpZiAoIW1hdGNoZXIucmVjb3JkLmFsaWFzT2YgPT09ICFwYXJlbnQucmVjb3JkLmFsaWFzT2YpIHBhcmVudC5jaGlsZHJlbi5wdXNoKG1hdGNoZXIpO1xuXHR9XG5cdHJldHVybiBtYXRjaGVyO1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvbWF0Y2hlci9pbmRleC50c1xuLyoqXG4qIENyZWF0ZXMgYSBSb3V0ZXIgTWF0Y2hlci5cbipcbiogQGludGVybmFsXG4qIEBwYXJhbSByb3V0ZXMgLSBhcnJheSBvZiBpbml0aWFsIHJvdXRlc1xuKiBAcGFyYW0gZ2xvYmFsT3B0aW9ucyAtIGdsb2JhbCByb3V0ZSBvcHRpb25zXG4qL1xuZnVuY3Rpb24gY3JlYXRlUm91dGVyTWF0Y2hlcihyb3V0ZXMsIGdsb2JhbE9wdGlvbnMpIHtcblx0Y29uc3QgbWF0Y2hlcnMgPSBbXTtcblx0Y29uc3QgbWF0Y2hlck1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdGdsb2JhbE9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoUEFUSF9QQVJTRVJfT1BUSU9OU19ERUZBVUxUUywgZ2xvYmFsT3B0aW9ucyk7XG5cdGZ1bmN0aW9uIGdldFJlY29yZE1hdGNoZXIobmFtZSkge1xuXHRcdHJldHVybiBtYXRjaGVyTWFwLmdldChuYW1lKTtcblx0fVxuXHRmdW5jdGlvbiBhZGRSb3V0ZShyZWNvcmQsIHBhcmVudCwgb3JpZ2luYWxSZWNvcmQpIHtcblx0XHRjb25zdCBpc1Jvb3RBZGQgPSAhb3JpZ2luYWxSZWNvcmQ7XG5cdFx0Y29uc3QgbWFpbk5vcm1hbGl6ZWRSZWNvcmQgPSBub3JtYWxpemVSb3V0ZVJlY29yZChyZWNvcmQpO1xuXHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIGNoZWNrQ2hpbGRNaXNzaW5nTmFtZVdpdGhFbXB0eVBhdGgobWFpbk5vcm1hbGl6ZWRSZWNvcmQsIHBhcmVudCk7XG5cdFx0bWFpbk5vcm1hbGl6ZWRSZWNvcmQuYWxpYXNPZiA9IG9yaWdpbmFsUmVjb3JkICYmIG9yaWdpbmFsUmVjb3JkLnJlY29yZDtcblx0XHRjb25zdCBvcHRpb25zID0gbWVyZ2VPcHRpb25zKGdsb2JhbE9wdGlvbnMsIHJlY29yZCk7XG5cdFx0Y29uc3Qgbm9ybWFsaXplZFJlY29yZHMgPSBbbWFpbk5vcm1hbGl6ZWRSZWNvcmRdO1xuXHRcdGlmIChcImFsaWFzXCIgaW4gcmVjb3JkKSB7XG5cdFx0XHRjb25zdCBhbGlhc2VzID0gdHlwZW9mIHJlY29yZC5hbGlhcyA9PT0gXCJzdHJpbmdcIiA/IFtyZWNvcmQuYWxpYXNdIDogcmVjb3JkLmFsaWFzO1xuXHRcdFx0Zm9yIChjb25zdCBhbGlhcyBvZiBhbGlhc2VzKSBub3JtYWxpemVkUmVjb3Jkcy5wdXNoKG5vcm1hbGl6ZVJvdXRlUmVjb3JkKGFzc2lnbih7fSwgbWFpbk5vcm1hbGl6ZWRSZWNvcmQsIHtcblx0XHRcdFx0Y29tcG9uZW50czogb3JpZ2luYWxSZWNvcmQgPyBvcmlnaW5hbFJlY29yZC5yZWNvcmQuY29tcG9uZW50cyA6IG1haW5Ob3JtYWxpemVkUmVjb3JkLmNvbXBvbmVudHMsXG5cdFx0XHRcdHBhdGg6IGFsaWFzLFxuXHRcdFx0XHRhbGlhc09mOiBvcmlnaW5hbFJlY29yZCA/IG9yaWdpbmFsUmVjb3JkLnJlY29yZCA6IG1haW5Ob3JtYWxpemVkUmVjb3JkXG5cdFx0XHR9KSkpO1xuXHRcdH1cblx0XHRsZXQgbWF0Y2hlcjtcblx0XHRsZXQgb3JpZ2luYWxNYXRjaGVyO1xuXHRcdGZvciAoY29uc3Qgbm9ybWFsaXplZFJlY29yZCBvZiBub3JtYWxpemVkUmVjb3Jkcykge1xuXHRcdFx0Y29uc3QgeyBwYXRoIH0gPSBub3JtYWxpemVkUmVjb3JkO1xuXHRcdFx0aWYgKHBhcmVudCAmJiBwYXRoWzBdICE9PSBcIi9cIikge1xuXHRcdFx0XHRjb25zdCBwYXJlbnRQYXRoID0gcGFyZW50LnJlY29yZC5wYXRoO1xuXHRcdFx0XHRjb25zdCBjb25uZWN0aW5nU2xhc2ggPSBwYXJlbnRQYXRoW3BhcmVudFBhdGgubGVuZ3RoIC0gMV0gPT09IFwiL1wiID8gXCJcIiA6IFwiL1wiO1xuXHRcdFx0XHRub3JtYWxpemVkUmVjb3JkLnBhdGggPSBwYXJlbnQucmVjb3JkLnBhdGggKyAocGF0aCAmJiBjb25uZWN0aW5nU2xhc2ggKyBwYXRoKTtcblx0XHRcdH1cblx0XHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgbm9ybWFsaXplZFJlY29yZC5wYXRoID09PSBcIipcIikgdGhyb3cgbmV3IEVycm9yKFwiQ2F0Y2ggYWxsIHJvdXRlcyAoXFxcIipcXFwiKSBtdXN0IG5vdyBiZSBkZWZpbmVkIHVzaW5nIGEgcGFyYW0gd2l0aCBhIGN1c3RvbSByZWdleHAuXFxuU2VlIG1vcmUgYXQgaHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2d1aWRlL21pZ3JhdGlvbi8jUmVtb3ZlZC1zdGFyLW9yLWNhdGNoLWFsbC1yb3V0ZXMuXCIpO1xuXHRcdFx0bWF0Y2hlciA9IGNyZWF0ZVJvdXRlUmVjb3JkTWF0Y2hlcihub3JtYWxpemVkUmVjb3JkLCBwYXJlbnQsIG9wdGlvbnMpO1xuXHRcdFx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiBwYXJlbnQgJiYgcGF0aFswXSA9PT0gXCIvXCIpIGNoZWNrTWlzc2luZ1BhcmFtc0luQWJzb2x1dGVQYXRoKG1hdGNoZXIsIHBhcmVudCk7XG5cdFx0XHRpZiAob3JpZ2luYWxSZWNvcmQpIHtcblx0XHRcdFx0b3JpZ2luYWxSZWNvcmQuYWxpYXMucHVzaChtYXRjaGVyKTtcblx0XHRcdFx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgY2hlY2tTYW1lUGFyYW1zKG9yaWdpbmFsUmVjb3JkLCBtYXRjaGVyKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG9yaWdpbmFsTWF0Y2hlciA9IG9yaWdpbmFsTWF0Y2hlciB8fCBtYXRjaGVyO1xuXHRcdFx0XHRpZiAob3JpZ2luYWxNYXRjaGVyICE9PSBtYXRjaGVyKSBvcmlnaW5hbE1hdGNoZXIuYWxpYXMucHVzaChtYXRjaGVyKTtcblx0XHRcdFx0aWYgKGlzUm9vdEFkZCAmJiByZWNvcmQubmFtZSAmJiAhaXNBbGlhc1JlY29yZChtYXRjaGVyKSkge1xuXHRcdFx0XHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIGNoZWNrU2FtZU5hbWVBc0FuY2VzdG9yKHJlY29yZCwgcGFyZW50KTtcblx0XHRcdFx0XHRyZW1vdmVSb3V0ZShyZWNvcmQubmFtZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChpc01hdGNoYWJsZShtYXRjaGVyKSkgaW5zZXJ0TWF0Y2hlcihtYXRjaGVyKTtcblx0XHRcdGlmIChtYWluTm9ybWFsaXplZFJlY29yZC5jaGlsZHJlbikge1xuXHRcdFx0XHRjb25zdCBjaGlsZHJlbiA9IG1haW5Ob3JtYWxpemVkUmVjb3JkLmNoaWxkcmVuO1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSBhZGRSb3V0ZShjaGlsZHJlbltpXSwgbWF0Y2hlciwgb3JpZ2luYWxSZWNvcmQgJiYgb3JpZ2luYWxSZWNvcmQuY2hpbGRyZW5baV0pO1xuXHRcdFx0fVxuXHRcdFx0b3JpZ2luYWxSZWNvcmQgPSBvcmlnaW5hbFJlY29yZCB8fCBtYXRjaGVyO1xuXHRcdH1cblx0XHRyZXR1cm4gb3JpZ2luYWxNYXRjaGVyID8gKCkgPT4ge1xuXHRcdFx0cmVtb3ZlUm91dGUob3JpZ2luYWxNYXRjaGVyKTtcblx0XHR9IDogbm9vcDtcblx0fVxuXHRmdW5jdGlvbiByZW1vdmVSb3V0ZShtYXRjaGVyUmVmKSB7XG5cdFx0aWYgKGlzUm91dGVOYW1lKG1hdGNoZXJSZWYpKSB7XG5cdFx0XHRjb25zdCBtYXRjaGVyID0gbWF0Y2hlck1hcC5nZXQobWF0Y2hlclJlZik7XG5cdFx0XHRpZiAobWF0Y2hlcikge1xuXHRcdFx0XHRtYXRjaGVyTWFwLmRlbGV0ZShtYXRjaGVyUmVmKTtcblx0XHRcdFx0bWF0Y2hlcnMuc3BsaWNlKG1hdGNoZXJzLmluZGV4T2YobWF0Y2hlciksIDEpO1xuXHRcdFx0XHRtYXRjaGVyLmNoaWxkcmVuLmZvckVhY2gocmVtb3ZlUm91dGUpO1xuXHRcdFx0XHRtYXRjaGVyLmFsaWFzLmZvckVhY2gocmVtb3ZlUm91dGUpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBpbmRleCA9IG1hdGNoZXJzLmluZGV4T2YobWF0Y2hlclJlZik7XG5cdFx0XHRpZiAoaW5kZXggPiAtMSkge1xuXHRcdFx0XHRtYXRjaGVycy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0XHRpZiAobWF0Y2hlclJlZi5yZWNvcmQubmFtZSkgbWF0Y2hlck1hcC5kZWxldGUobWF0Y2hlclJlZi5yZWNvcmQubmFtZSk7XG5cdFx0XHRcdG1hdGNoZXJSZWYuY2hpbGRyZW4uZm9yRWFjaChyZW1vdmVSb3V0ZSk7XG5cdFx0XHRcdG1hdGNoZXJSZWYuYWxpYXMuZm9yRWFjaChyZW1vdmVSb3V0ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGZ1bmN0aW9uIGdldFJvdXRlcygpIHtcblx0XHRyZXR1cm4gbWF0Y2hlcnM7XG5cdH1cblx0ZnVuY3Rpb24gaW5zZXJ0TWF0Y2hlcihtYXRjaGVyKSB7XG5cdFx0Y29uc3QgaW5kZXggPSBmaW5kSW5zZXJ0aW9uSW5kZXgobWF0Y2hlciwgbWF0Y2hlcnMpO1xuXHRcdG1hdGNoZXJzLnNwbGljZShpbmRleCwgMCwgbWF0Y2hlcik7XG5cdFx0aWYgKG1hdGNoZXIucmVjb3JkLm5hbWUgJiYgIWlzQWxpYXNSZWNvcmQobWF0Y2hlcikpIG1hdGNoZXJNYXAuc2V0KG1hdGNoZXIucmVjb3JkLm5hbWUsIG1hdGNoZXIpO1xuXHR9XG5cdGZ1bmN0aW9uIHJlc29sdmUobG9jYXRpb24kMSwgY3VycmVudExvY2F0aW9uKSB7XG5cdFx0bGV0IG1hdGNoZXI7XG5cdFx0bGV0IHBhcmFtcyA9IHt9O1xuXHRcdGxldCBwYXRoO1xuXHRcdGxldCBuYW1lO1xuXHRcdGlmIChcIm5hbWVcIiBpbiBsb2NhdGlvbiQxICYmIGxvY2F0aW9uJDEubmFtZSkge1xuXHRcdFx0bWF0Y2hlciA9IG1hdGNoZXJNYXAuZ2V0KGxvY2F0aW9uJDEubmFtZSk7XG5cdFx0XHRpZiAoIW1hdGNoZXIpIHRocm93IGNyZWF0ZVJvdXRlckVycm9yKEVycm9yVHlwZXMuTUFUQ0hFUl9OT1RfRk9VTkQsIHsgbG9jYXRpb246IGxvY2F0aW9uJDEgfSk7XG5cdFx0XHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG5cdFx0XHRcdGNvbnN0IGludmFsaWRQYXJhbXMgPSBPYmplY3Qua2V5cyhsb2NhdGlvbiQxLnBhcmFtcyB8fCB7fSkuZmlsdGVyKChwYXJhbU5hbWUpID0+ICFtYXRjaGVyLmtleXMuZmluZCgoaykgPT4gay5uYW1lID09PSBwYXJhbU5hbWUpKTtcblx0XHRcdFx0aWYgKGludmFsaWRQYXJhbXMubGVuZ3RoKSB3YXJuJDEoYERpc2NhcmRlZCBpbnZhbGlkIHBhcmFtKHMpIFwiJHtpbnZhbGlkUGFyYW1zLmpvaW4oXCJcXFwiLCBcXFwiXCIpfVwiIHdoZW4gbmF2aWdhdGluZy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9yb3V0ZXIvYmxvYi9tYWluL3BhY2thZ2VzL3JvdXRlci9DSEFOR0VMT0cubWQjNDE0LTIwMjItMDgtMjIgZm9yIG1vcmUgZGV0YWlscy5gKTtcblx0XHRcdH1cblx0XHRcdG5hbWUgPSBtYXRjaGVyLnJlY29yZC5uYW1lO1xuXHRcdFx0cGFyYW1zID0gYXNzaWduKHBpY2tQYXJhbXMoY3VycmVudExvY2F0aW9uLnBhcmFtcywgbWF0Y2hlci5rZXlzLmZpbHRlcigoaykgPT4gIWsub3B0aW9uYWwpLmNvbmNhdChtYXRjaGVyLnBhcmVudCA/IG1hdGNoZXIucGFyZW50LmtleXMuZmlsdGVyKChrKSA9PiBrLm9wdGlvbmFsKSA6IFtdKS5tYXAoKGspID0+IGsubmFtZSkpLCBsb2NhdGlvbiQxLnBhcmFtcyAmJiBwaWNrUGFyYW1zKGxvY2F0aW9uJDEucGFyYW1zLCBtYXRjaGVyLmtleXMubWFwKChrKSA9PiBrLm5hbWUpKSk7XG5cdFx0XHRwYXRoID0gbWF0Y2hlci5zdHJpbmdpZnkocGFyYW1zKTtcblx0XHR9IGVsc2UgaWYgKGxvY2F0aW9uJDEucGF0aCAhPSBudWxsKSB7XG5cdFx0XHRwYXRoID0gbG9jYXRpb24kMS5wYXRoO1xuXHRcdFx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiAhcGF0aC5zdGFydHNXaXRoKFwiL1wiKSkgd2FybiQxKGBUaGUgTWF0Y2hlciBjYW5ub3QgcmVzb2x2ZSByZWxhdGl2ZSBwYXRocyBidXQgcmVjZWl2ZWQgXCIke3BhdGh9XCIuIFVubGVzcyB5b3UgZGlyZWN0bHkgY2FsbGVkIFxcYG1hdGNoZXIucmVzb2x2ZShcIiR7cGF0aH1cIilcXGAsIHRoaXMgaXMgcHJvYmFibHkgYSBidWcgaW4gdnVlLXJvdXRlci4gUGxlYXNlIG9wZW4gYW4gaXNzdWUgYXQgaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3JvdXRlci9pc3N1ZXMvbmV3L2Nob29zZS5gKTtcblx0XHRcdG1hdGNoZXIgPSBtYXRjaGVycy5maW5kKChtKSA9PiBtLnJlLnRlc3QocGF0aCkpO1xuXHRcdFx0aWYgKG1hdGNoZXIpIHtcblx0XHRcdFx0cGFyYW1zID0gbWF0Y2hlci5wYXJzZShwYXRoKTtcblx0XHRcdFx0bmFtZSA9IG1hdGNoZXIucmVjb3JkLm5hbWU7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXIgPSBjdXJyZW50TG9jYXRpb24ubmFtZSA/IG1hdGNoZXJNYXAuZ2V0KGN1cnJlbnRMb2NhdGlvbi5uYW1lKSA6IG1hdGNoZXJzLmZpbmQoKG0pID0+IG0ucmUudGVzdChjdXJyZW50TG9jYXRpb24ucGF0aCkpO1xuXHRcdFx0aWYgKCFtYXRjaGVyKSB0aHJvdyBjcmVhdGVSb3V0ZXJFcnJvcihFcnJvclR5cGVzLk1BVENIRVJfTk9UX0ZPVU5ELCB7XG5cdFx0XHRcdGxvY2F0aW9uOiBsb2NhdGlvbiQxLFxuXHRcdFx0XHRjdXJyZW50TG9jYXRpb25cblx0XHRcdH0pO1xuXHRcdFx0bmFtZSA9IG1hdGNoZXIucmVjb3JkLm5hbWU7XG5cdFx0XHRwYXJhbXMgPSBhc3NpZ24oe30sIGN1cnJlbnRMb2NhdGlvbi5wYXJhbXMsIGxvY2F0aW9uJDEucGFyYW1zKTtcblx0XHRcdHBhdGggPSBtYXRjaGVyLnN0cmluZ2lmeShwYXJhbXMpO1xuXHRcdH1cblx0XHRjb25zdCBtYXRjaGVkID0gW107XG5cdFx0bGV0IHBhcmVudE1hdGNoZXIgPSBtYXRjaGVyO1xuXHRcdHdoaWxlIChwYXJlbnRNYXRjaGVyKSB7XG5cdFx0XHRtYXRjaGVkLnVuc2hpZnQocGFyZW50TWF0Y2hlci5yZWNvcmQpO1xuXHRcdFx0cGFyZW50TWF0Y2hlciA9IHBhcmVudE1hdGNoZXIucGFyZW50O1xuXHRcdH1cblx0XHRyZXR1cm4ge1xuXHRcdFx0bmFtZSxcblx0XHRcdHBhdGgsXG5cdFx0XHRwYXJhbXMsXG5cdFx0XHRtYXRjaGVkLFxuXHRcdFx0bWV0YTogbWVyZ2VNZXRhRmllbGRzKG1hdGNoZWQpXG5cdFx0fTtcblx0fVxuXHRyb3V0ZXMuZm9yRWFjaCgocm91dGUpID0+IGFkZFJvdXRlKHJvdXRlKSk7XG5cdGZ1bmN0aW9uIGNsZWFyUm91dGVzKCkge1xuXHRcdG1hdGNoZXJzLmxlbmd0aCA9IDA7XG5cdFx0bWF0Y2hlck1hcC5jbGVhcigpO1xuXHR9XG5cdHJldHVybiB7XG5cdFx0YWRkUm91dGUsXG5cdFx0cmVzb2x2ZSxcblx0XHRyZW1vdmVSb3V0ZSxcblx0XHRjbGVhclJvdXRlcyxcblx0XHRnZXRSb3V0ZXMsXG5cdFx0Z2V0UmVjb3JkTWF0Y2hlclxuXHR9O1xufVxuLyoqXG4qIFBpY2tzIGFuIG9iamVjdCBwYXJhbSB0byBjb250YWluIG9ubHkgc3BlY2lmaWVkIGtleXMuXG4qXG4qIEBwYXJhbSBwYXJhbXMgLSBwYXJhbXMgb2JqZWN0IHRvIHBpY2sgZnJvbVxuKiBAcGFyYW0ga2V5cyAtIGtleXMgdG8gcGlja1xuKi9cbmZ1bmN0aW9uIHBpY2tQYXJhbXMocGFyYW1zLCBrZXlzKSB7XG5cdGNvbnN0IG5ld1BhcmFtcyA9IHt9O1xuXHRmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSBpZiAoa2V5IGluIHBhcmFtcykgbmV3UGFyYW1zW2tleV0gPSBwYXJhbXNba2V5XTtcblx0cmV0dXJuIG5ld1BhcmFtcztcbn1cbi8qKlxuKiBOb3JtYWxpemVzIGEgUm91dGVSZWNvcmRSYXcuIENyZWF0ZXMgYSBjb3B5XG4qXG4qIEBwYXJhbSByZWNvcmRcbiogQHJldHVybnMgdGhlIG5vcm1hbGl6ZWQgdmVyc2lvblxuKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVJvdXRlUmVjb3JkKHJlY29yZCkge1xuXHRjb25zdCBub3JtYWxpemVkID0ge1xuXHRcdHBhdGg6IHJlY29yZC5wYXRoLFxuXHRcdHJlZGlyZWN0OiByZWNvcmQucmVkaXJlY3QsXG5cdFx0bmFtZTogcmVjb3JkLm5hbWUsXG5cdFx0bWV0YTogcmVjb3JkLm1ldGEgfHwge30sXG5cdFx0YWxpYXNPZjogcmVjb3JkLmFsaWFzT2YsXG5cdFx0YmVmb3JlRW50ZXI6IHJlY29yZC5iZWZvcmVFbnRlcixcblx0XHRwcm9wczogbm9ybWFsaXplUmVjb3JkUHJvcHMocmVjb3JkKSxcblx0XHRjaGlsZHJlbjogcmVjb3JkLmNoaWxkcmVuIHx8IFtdLFxuXHRcdGluc3RhbmNlczoge30sXG5cdFx0bGVhdmVHdWFyZHM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCksXG5cdFx0dXBkYXRlR3VhcmRzOiAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpLFxuXHRcdGVudGVyQ2FsbGJhY2tzOiB7fSxcblx0XHRjb21wb25lbnRzOiBcImNvbXBvbmVudHNcIiBpbiByZWNvcmQgPyByZWNvcmQuY29tcG9uZW50cyB8fCBudWxsIDogcmVjb3JkLmNvbXBvbmVudCAmJiB7IGRlZmF1bHQ6IHJlY29yZC5jb21wb25lbnQgfVxuXHR9O1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkobm9ybWFsaXplZCwgXCJtb2RzXCIsIHsgdmFsdWU6IHt9IH0pO1xuXHRyZXR1cm4gbm9ybWFsaXplZDtcbn1cbi8qKlxuKiBOb3JtYWxpemUgdGhlIG9wdGlvbmFsIGBwcm9wc2AgaW4gYSByZWNvcmQgdG8gYWx3YXlzIGJlIGFuIG9iamVjdCBzaW1pbGFyIHRvXG4qIGNvbXBvbmVudHMuIEFsc28gYWNjZXB0IGEgYm9vbGVhbiBmb3IgY29tcG9uZW50cy5cbiogQHBhcmFtIHJlY29yZFxuKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVJlY29yZFByb3BzKHJlY29yZCkge1xuXHRjb25zdCBwcm9wc09iamVjdCA9IHt9O1xuXHRjb25zdCBwcm9wcyA9IHJlY29yZC5wcm9wcyB8fCBmYWxzZTtcblx0aWYgKFwiY29tcG9uZW50XCIgaW4gcmVjb3JkKSBwcm9wc09iamVjdC5kZWZhdWx0ID0gcHJvcHM7XG5cdGVsc2UgZm9yIChjb25zdCBuYW1lIGluIHJlY29yZC5jb21wb25lbnRzKSBwcm9wc09iamVjdFtuYW1lXSA9IHR5cGVvZiBwcm9wcyA9PT0gXCJvYmplY3RcIiA/IHByb3BzW25hbWVdIDogcHJvcHM7XG5cdHJldHVybiBwcm9wc09iamVjdDtcbn1cbi8qKlxuKiBDaGVja3MgaWYgYSByZWNvcmQgb3IgYW55IG9mIGl0cyBwYXJlbnQgaXMgYW4gYWxpYXNcbiogQHBhcmFtIHJlY29yZFxuKi9cbmZ1bmN0aW9uIGlzQWxpYXNSZWNvcmQocmVjb3JkKSB7XG5cdHdoaWxlIChyZWNvcmQpIHtcblx0XHRpZiAocmVjb3JkLnJlY29yZC5hbGlhc09mKSByZXR1cm4gdHJ1ZTtcblx0XHRyZWNvcmQgPSByZWNvcmQucGFyZW50O1xuXHR9XG5cdHJldHVybiBmYWxzZTtcbn1cbi8qKlxuKiBNZXJnZSBtZXRhIGZpZWxkcyBvZiBhbiBhcnJheSBvZiByZWNvcmRzXG4qXG4qIEBwYXJhbSBtYXRjaGVkIC0gYXJyYXkgb2YgbWF0Y2hlZCByZWNvcmRzXG4qL1xuZnVuY3Rpb24gbWVyZ2VNZXRhRmllbGRzKG1hdGNoZWQpIHtcblx0cmV0dXJuIG1hdGNoZWQucmVkdWNlKChtZXRhLCByZWNvcmQpID0+IGFzc2lnbihtZXRhLCByZWNvcmQubWV0YSksIHt9KTtcbn1cbmZ1bmN0aW9uIGlzU2FtZVBhcmFtKGEsIGIpIHtcblx0cmV0dXJuIGEubmFtZSA9PT0gYi5uYW1lICYmIGEub3B0aW9uYWwgPT09IGIub3B0aW9uYWwgJiYgYS5yZXBlYXRhYmxlID09PSBiLnJlcGVhdGFibGU7XG59XG4vKipcbiogQ2hlY2sgaWYgYSBwYXRoIGFuZCBpdHMgYWxpYXMgaGF2ZSB0aGUgc2FtZSByZXF1aXJlZCBwYXJhbXNcbipcbiogQHBhcmFtIGEgLSBvcmlnaW5hbCByZWNvcmRcbiogQHBhcmFtIGIgLSBhbGlhcyByZWNvcmRcbiovXG5mdW5jdGlvbiBjaGVja1NhbWVQYXJhbXMoYSwgYikge1xuXHRmb3IgKGNvbnN0IGtleSBvZiBhLmtleXMpIGlmICgha2V5Lm9wdGlvbmFsICYmICFiLmtleXMuZmluZChpc1NhbWVQYXJhbS5iaW5kKG51bGwsIGtleSkpKSByZXR1cm4gd2FybiQxKGBBbGlhcyBcIiR7Yi5yZWNvcmQucGF0aH1cIiBhbmQgdGhlIG9yaWdpbmFsIHJlY29yZDogXCIke2EucmVjb3JkLnBhdGh9XCIgbXVzdCBoYXZlIHRoZSBleGFjdCBzYW1lIHBhcmFtIG5hbWVkIFwiJHtrZXkubmFtZX1cImApO1xuXHRmb3IgKGNvbnN0IGtleSBvZiBiLmtleXMpIGlmICgha2V5Lm9wdGlvbmFsICYmICFhLmtleXMuZmluZChpc1NhbWVQYXJhbS5iaW5kKG51bGwsIGtleSkpKSByZXR1cm4gd2FybiQxKGBBbGlhcyBcIiR7Yi5yZWNvcmQucGF0aH1cIiBhbmQgdGhlIG9yaWdpbmFsIHJlY29yZDogXCIke2EucmVjb3JkLnBhdGh9XCIgbXVzdCBoYXZlIHRoZSBleGFjdCBzYW1lIHBhcmFtIG5hbWVkIFwiJHtrZXkubmFtZX1cImApO1xufVxuLyoqXG4qIEEgcm91dGUgd2l0aCBhIG5hbWUgYW5kIGEgY2hpbGQgd2l0aCBhbiBlbXB0eSBwYXRoIHdpdGhvdXQgYSBuYW1lIHNob3VsZCB3YXJuIHdoZW4gYWRkaW5nIHRoZSByb3V0ZVxuKlxuKiBAcGFyYW0gbWFpbk5vcm1hbGl6ZWRSZWNvcmQgLSBSb3V0ZVJlY29yZE5vcm1hbGl6ZWRcbiogQHBhcmFtIHBhcmVudCAtIFJvdXRlUmVjb3JkTWF0Y2hlclxuKi9cbmZ1bmN0aW9uIGNoZWNrQ2hpbGRNaXNzaW5nTmFtZVdpdGhFbXB0eVBhdGgobWFpbk5vcm1hbGl6ZWRSZWNvcmQsIHBhcmVudCkge1xuXHRpZiAocGFyZW50ICYmIHBhcmVudC5yZWNvcmQubmFtZSAmJiAhbWFpbk5vcm1hbGl6ZWRSZWNvcmQubmFtZSAmJiAhbWFpbk5vcm1hbGl6ZWRSZWNvcmQucGF0aCkgd2FybiQxKGBUaGUgcm91dGUgbmFtZWQgXCIke1N0cmluZyhwYXJlbnQucmVjb3JkLm5hbWUpfVwiIGhhcyBhIGNoaWxkIHdpdGhvdXQgYSBuYW1lIGFuZCBhbiBlbXB0eSBwYXRoLiBVc2luZyB0aGF0IG5hbWUgd29uJ3QgcmVuZGVyIHRoZSBlbXB0eSBwYXRoIGNoaWxkIHNvIHlvdSBwcm9iYWJseSB3YW50IHRvIG1vdmUgdGhlIG5hbWUgdG8gdGhlIGNoaWxkIGluc3RlYWQuIElmIHRoaXMgaXMgaW50ZW50aW9uYWwsIGFkZCBhIG5hbWUgdG8gdGhlIGNoaWxkIHJvdXRlIHRvIHJlbW92ZSB0aGUgd2FybmluZy5gKTtcbn1cbmZ1bmN0aW9uIGNoZWNrU2FtZU5hbWVBc0FuY2VzdG9yKHJlY29yZCwgcGFyZW50KSB7XG5cdGZvciAobGV0IGFuY2VzdG9yID0gcGFyZW50OyBhbmNlc3RvcjsgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnQpIGlmIChhbmNlc3Rvci5yZWNvcmQubmFtZSA9PT0gcmVjb3JkLm5hbWUpIHRocm93IG5ldyBFcnJvcihgQSByb3V0ZSBuYW1lZCBcIiR7U3RyaW5nKHJlY29yZC5uYW1lKX1cIiBoYXMgYmVlbiBhZGRlZCBhcyBhICR7cGFyZW50ID09PSBhbmNlc3RvciA/IFwiY2hpbGRcIiA6IFwiZGVzY2VuZGFudFwifSBvZiBhIHJvdXRlIHdpdGggdGhlIHNhbWUgbmFtZS4gUm91dGUgbmFtZXMgbXVzdCBiZSB1bmlxdWUgYW5kIGEgbmVzdGVkIHJvdXRlIGNhbm5vdCB1c2UgdGhlIHNhbWUgbmFtZSBhcyBhbiBhbmNlc3Rvci5gKTtcbn1cbmZ1bmN0aW9uIGNoZWNrTWlzc2luZ1BhcmFtc0luQWJzb2x1dGVQYXRoKHJlY29yZCwgcGFyZW50KSB7XG5cdGZvciAoY29uc3Qga2V5IG9mIHBhcmVudC5rZXlzKSBpZiAoIXJlY29yZC5rZXlzLmZpbmQoaXNTYW1lUGFyYW0uYmluZChudWxsLCBrZXkpKSkgcmV0dXJuIHdhcm4kMShgQWJzb2x1dGUgcGF0aCBcIiR7cmVjb3JkLnJlY29yZC5wYXRofVwiIG11c3QgaGF2ZSB0aGUgZXhhY3Qgc2FtZSBwYXJhbSBuYW1lZCBcIiR7a2V5Lm5hbWV9XCIgYXMgaXRzIHBhcmVudCBcIiR7cGFyZW50LnJlY29yZC5wYXRofVwiLmApO1xufVxuLyoqXG4qIFBlcmZvcm1zIGEgYmluYXJ5IHNlYXJjaCB0byBmaW5kIHRoZSBjb3JyZWN0IGluc2VydGlvbiBpbmRleCBmb3IgYSBuZXcgbWF0Y2hlci5cbipcbiogTWF0Y2hlcnMgYXJlIHByaW1hcmlseSBzb3J0ZWQgYnkgdGhlaXIgc2NvcmUuIElmIHNjb3JlcyBhcmUgdGllZCB0aGVuIHdlIGFsc28gY29uc2lkZXIgcGFyZW50L2NoaWxkIHJlbGF0aW9uc2hpcHMsXG4qIHdpdGggZGVzY2VuZGFudHMgY29taW5nIGJlZm9yZSBhbmNlc3RvcnMuIElmIHRoZXJlJ3Mgc3RpbGwgYSB0aWUsIG5ldyByb3V0ZXMgYXJlIGluc2VydGVkIGFmdGVyIGV4aXN0aW5nIHJvdXRlcy5cbipcbiogQHBhcmFtIG1hdGNoZXIgLSBuZXcgbWF0Y2hlciB0byBiZSBpbnNlcnRlZFxuKiBAcGFyYW0gbWF0Y2hlcnMgLSBleGlzdGluZyBtYXRjaGVyc1xuKi9cbmZ1bmN0aW9uIGZpbmRJbnNlcnRpb25JbmRleChtYXRjaGVyLCBtYXRjaGVycykge1xuXHRsZXQgbG93ZXIgPSAwO1xuXHRsZXQgdXBwZXIgPSBtYXRjaGVycy5sZW5ndGg7XG5cdHdoaWxlIChsb3dlciAhPT0gdXBwZXIpIHtcblx0XHRjb25zdCBtaWQgPSBsb3dlciArIHVwcGVyID4+IDE7XG5cdFx0aWYgKGNvbXBhcmVQYXRoUGFyc2VyU2NvcmUobWF0Y2hlciwgbWF0Y2hlcnNbbWlkXSkgPCAwKSB1cHBlciA9IG1pZDtcblx0XHRlbHNlIGxvd2VyID0gbWlkICsgMTtcblx0fVxuXHRjb25zdCBpbnNlcnRpb25BbmNlc3RvciA9IGdldEluc2VydGlvbkFuY2VzdG9yKG1hdGNoZXIpO1xuXHRpZiAoaW5zZXJ0aW9uQW5jZXN0b3IpIHtcblx0XHR1cHBlciA9IG1hdGNoZXJzLmxhc3RJbmRleE9mKGluc2VydGlvbkFuY2VzdG9yLCB1cHBlciAtIDEpO1xuXHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgdXBwZXIgPCAwKSB3YXJuJDEoYEZpbmRpbmcgYW5jZXN0b3Igcm91dGUgXCIke2luc2VydGlvbkFuY2VzdG9yLnJlY29yZC5wYXRofVwiIGZhaWxlZCBmb3IgXCIke21hdGNoZXIucmVjb3JkLnBhdGh9XCJgKTtcblx0fVxuXHRyZXR1cm4gdXBwZXI7XG59XG5mdW5jdGlvbiBnZXRJbnNlcnRpb25BbmNlc3RvcihtYXRjaGVyKSB7XG5cdGxldCBhbmNlc3RvciA9IG1hdGNoZXI7XG5cdHdoaWxlIChhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudCkgaWYgKGlzTWF0Y2hhYmxlKGFuY2VzdG9yKSAmJiBjb21wYXJlUGF0aFBhcnNlclNjb3JlKG1hdGNoZXIsIGFuY2VzdG9yKSA9PT0gMCkgcmV0dXJuIGFuY2VzdG9yO1xufVxuLyoqXG4qIENoZWNrcyBpZiBhIG1hdGNoZXIgY2FuIGJlIHJlYWNoYWJsZS4gVGhpcyBtZWFucyBpZiBpdCdzIHBvc3NpYmxlIHRvIHJlYWNoIGl0IGFzIGEgcm91dGUuIEZvciBleGFtcGxlLCByb3V0ZXMgd2l0aG91dFxuKiBhIGNvbXBvbmVudCwgb3IgbmFtZSwgb3IgcmVkaXJlY3QsIGFyZSBqdXN0IHVzZWQgdG8gZ3JvdXAgb3RoZXIgcm91dGVzLlxuKiBAcGFyYW0gbWF0Y2hlclxuKiBAcGFyYW0gbWF0Y2hlci5yZWNvcmQgcmVjb3JkIG9mIHRoZSBtYXRjaGVyXG4qIEByZXR1cm5zXG4qL1xuZnVuY3Rpb24gaXNNYXRjaGFibGUoeyByZWNvcmQgfSkge1xuXHRyZXR1cm4gISEocmVjb3JkLm5hbWUgfHwgcmVjb3JkLmNvbXBvbmVudHMgJiYgT2JqZWN0LmtleXMocmVjb3JkLmNvbXBvbmVudHMpLmxlbmd0aCB8fCByZWNvcmQucmVkaXJlY3QpO1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvUm91dGVyTGluay50c1xuLyoqXG4qIFJldHVybnMgdGhlIGludGVybmFsIGJlaGF2aW9yIG9mIGEge0BsaW5rIFJvdXRlckxpbmt9IHdpdGhvdXQgdGhlIHJlbmRlcmluZyBwYXJ0LlxuKlxuKiBAcGFyYW0gcHJvcHMgLSBhIGB0b2AgbG9jYXRpb24gYW5kIGFuIG9wdGlvbmFsIGByZXBsYWNlYCBmbGFnXG4qL1xuZnVuY3Rpb24gdXNlTGluayhwcm9wcykge1xuXHRjb25zdCByb3V0ZXIgPSBpbmplY3Qocm91dGVyS2V5KTtcblx0Y29uc3QgY3VycmVudFJvdXRlID0gaW5qZWN0KHJvdXRlTG9jYXRpb25LZXkpO1xuXHRsZXQgaGFzUHJldmlvdXMgPSBmYWxzZTtcblx0bGV0IHByZXZpb3VzVG8gPSBudWxsO1xuXHRjb25zdCByb3V0ZSA9IGNvbXB1dGVkKCgpID0+IHtcblx0XHRjb25zdCB0byA9IHVucmVmKHByb3BzLnRvKTtcblx0XHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiICYmICghaGFzUHJldmlvdXMgfHwgdG8gIT09IHByZXZpb3VzVG8pKSB7XG5cdFx0XHRpZiAoIWlzUm91dGVMb2NhdGlvbih0bykpIGlmIChoYXNQcmV2aW91cykgd2FybiQxKGBJbnZhbGlkIHZhbHVlIGZvciBwcm9wIFwidG9cIiBpbiB1c2VMaW5rKClcXG4tIHRvOmAsIHRvLCBgXFxuLSBwcmV2aW91cyB0bzpgLCBwcmV2aW91c1RvLCBgXFxuLSBwcm9wczpgLCBwcm9wcyk7XG5cdFx0XHRlbHNlIHdhcm4kMShgSW52YWxpZCB2YWx1ZSBmb3IgcHJvcCBcInRvXCIgaW4gdXNlTGluaygpXFxuLSB0bzpgLCB0bywgYFxcbi0gcHJvcHM6YCwgcHJvcHMpO1xuXHRcdFx0cHJldmlvdXNUbyA9IHRvO1xuXHRcdFx0aGFzUHJldmlvdXMgPSB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gcm91dGVyLnJlc29sdmUodG8pO1xuXHR9KTtcblx0Y29uc3QgYWN0aXZlUmVjb3JkSW5kZXggPSBjb21wdXRlZCgoKSA9PiB7XG5cdFx0Y29uc3QgeyBtYXRjaGVkIH0gPSByb3V0ZS52YWx1ZTtcblx0XHRjb25zdCB7IGxlbmd0aCB9ID0gbWF0Y2hlZDtcblx0XHRjb25zdCByb3V0ZU1hdGNoZWQgPSBtYXRjaGVkW2xlbmd0aCAtIDFdO1xuXHRcdGNvbnN0IGN1cnJlbnRNYXRjaGVkID0gY3VycmVudFJvdXRlLm1hdGNoZWQ7XG5cdFx0aWYgKCFyb3V0ZU1hdGNoZWQgfHwgIWN1cnJlbnRNYXRjaGVkLmxlbmd0aCkgcmV0dXJuIC0xO1xuXHRcdGNvbnN0IGluZGV4ID0gY3VycmVudE1hdGNoZWQuZmluZEluZGV4KGlzU2FtZVJvdXRlUmVjb3JkLmJpbmQobnVsbCwgcm91dGVNYXRjaGVkKSk7XG5cdFx0aWYgKGluZGV4ID4gLTEpIHJldHVybiBpbmRleDtcblx0XHRjb25zdCBwYXJlbnRSZWNvcmRQYXRoID0gZ2V0T3JpZ2luYWxQYXRoKG1hdGNoZWRbbGVuZ3RoIC0gMl0pO1xuXHRcdHJldHVybiBsZW5ndGggPiAxICYmIGdldE9yaWdpbmFsUGF0aChyb3V0ZU1hdGNoZWQpID09PSBwYXJlbnRSZWNvcmRQYXRoICYmIGN1cnJlbnRNYXRjaGVkW2N1cnJlbnRNYXRjaGVkLmxlbmd0aCAtIDFdLnBhdGggIT09IHBhcmVudFJlY29yZFBhdGggPyBjdXJyZW50TWF0Y2hlZC5maW5kSW5kZXgoaXNTYW1lUm91dGVSZWNvcmQuYmluZChudWxsLCBtYXRjaGVkW2xlbmd0aCAtIDJdKSkgOiBpbmRleDtcblx0fSk7XG5cdGNvbnN0IGlzQWN0aXZlID0gY29tcHV0ZWQoKCkgPT4gYWN0aXZlUmVjb3JkSW5kZXgudmFsdWUgPiAtMSAmJiBpbmNsdWRlc1BhcmFtcyhjdXJyZW50Um91dGUucGFyYW1zLCByb3V0ZS52YWx1ZS5wYXJhbXMpKTtcblx0Y29uc3QgaXNFeGFjdEFjdGl2ZSA9IGNvbXB1dGVkKCgpID0+IGFjdGl2ZVJlY29yZEluZGV4LnZhbHVlID4gLTEgJiYgYWN0aXZlUmVjb3JkSW5kZXgudmFsdWUgPT09IGN1cnJlbnRSb3V0ZS5tYXRjaGVkLmxlbmd0aCAtIDEgJiYgaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtcyhjdXJyZW50Um91dGUucGFyYW1zLCByb3V0ZS52YWx1ZS5wYXJhbXMpKTtcblx0ZnVuY3Rpb24gbmF2aWdhdGUoZSA9IHt9KSB7XG5cdFx0aWYgKGd1YXJkRXZlbnQoZSkpIHtcblx0XHRcdGNvbnN0IHAgPSByb3V0ZXJbdW5yZWYocHJvcHMucmVwbGFjZSkgPyBcInJlcGxhY2VcIiA6IFwicHVzaFwiXSh1bnJlZihwcm9wcy50bykpLmNhdGNoKG5vb3ApO1xuXHRcdFx0aWYgKHByb3BzLnZpZXdUcmFuc2l0aW9uICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBcInN0YXJ0Vmlld1RyYW5zaXRpb25cIiBpbiBkb2N1bWVudCkgZG9jdW1lbnQuc3RhcnRWaWV3VHJhbnNpdGlvbigoKSA9PiBwKTtcblx0XHRcdHJldHVybiBwO1xuXHRcdH1cblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cdH1cblx0aWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSAmJiBpc0Jyb3dzZXIpIHtcblx0XHRjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuXHRcdGlmIChpbnN0YW5jZSkge1xuXHRcdFx0Y29uc3QgbGlua0NvbnRleHREZXZ0b29scyA9IHtcblx0XHRcdFx0cm91dGU6IHJvdXRlLnZhbHVlLFxuXHRcdFx0XHRpc0FjdGl2ZTogaXNBY3RpdmUudmFsdWUsXG5cdFx0XHRcdGlzRXhhY3RBY3RpdmU6IGlzRXhhY3RBY3RpdmUudmFsdWUsXG5cdFx0XHRcdGVycm9yOiBudWxsXG5cdFx0XHR9O1xuXHRcdFx0aW5zdGFuY2UuX192cmxfZGV2dG9vbHMgPSBpbnN0YW5jZS5fX3ZybF9kZXZ0b29scyB8fCBbXTtcblx0XHRcdGluc3RhbmNlLl9fdnJsX2RldnRvb2xzLnB1c2gobGlua0NvbnRleHREZXZ0b29scyk7XG5cdFx0XHR3YXRjaEVmZmVjdCgoKSA9PiB7XG5cdFx0XHRcdGxpbmtDb250ZXh0RGV2dG9vbHMucm91dGUgPSByb3V0ZS52YWx1ZTtcblx0XHRcdFx0bGlua0NvbnRleHREZXZ0b29scy5pc0FjdGl2ZSA9IGlzQWN0aXZlLnZhbHVlO1xuXHRcdFx0XHRsaW5rQ29udGV4dERldnRvb2xzLmlzRXhhY3RBY3RpdmUgPSBpc0V4YWN0QWN0aXZlLnZhbHVlO1xuXHRcdFx0XHRsaW5rQ29udGV4dERldnRvb2xzLmVycm9yID0gaXNSb3V0ZUxvY2F0aW9uKHVucmVmKHByb3BzLnRvKSkgPyBudWxsIDogXCJJbnZhbGlkIFxcXCJ0b1xcXCIgdmFsdWVcIjtcblx0XHRcdH0sIHsgZmx1c2g6IFwicG9zdFwiIH0pO1xuXHRcdH1cblx0fVxuXHQvKipcblx0KiBOT1RFOiB1cGRhdGUge0BsaW5rIF9Sb3V0ZXJMaW5rSX0ncyBgJHNsb3RzYCB0eXBlIHdoZW4gdXBkYXRpbmcgdGhpc1xuXHQqL1xuXHRyZXR1cm4ge1xuXHRcdHJvdXRlLFxuXHRcdGhyZWY6IGNvbXB1dGVkKCgpID0+IHJvdXRlLnZhbHVlLmhyZWYpLFxuXHRcdGlzQWN0aXZlLFxuXHRcdGlzRXhhY3RBY3RpdmUsXG5cdFx0bmF2aWdhdGVcblx0fTtcbn1cbmZ1bmN0aW9uIHByZWZlclNpbmdsZVZOb2RlKHZub2Rlcykge1xuXHRyZXR1cm4gdm5vZGVzLmxlbmd0aCA9PT0gMSA/IHZub2Rlc1swXSA6IHZub2Rlcztcbn1cbmNvbnN0IFJvdXRlckxpbmtJbXBsID0gLyogQF9fUFVSRV9fICovIGRlZmluZUNvbXBvbmVudCh7XG5cdG5hbWU6IFwiUm91dGVyTGlua1wiLFxuXHRjb21wYXRDb25maWc6IHsgTU9ERTogMyB9LFxuXHRwcm9wczoge1xuXHRcdHRvOiB7XG5cdFx0XHR0eXBlOiBbU3RyaW5nLCBPYmplY3RdLFxuXHRcdFx0cmVxdWlyZWQ6IHRydWVcblx0XHR9LFxuXHRcdHJlcGxhY2U6IEJvb2xlYW4sXG5cdFx0YWN0aXZlQ2xhc3M6IFN0cmluZyxcblx0XHRleGFjdEFjdGl2ZUNsYXNzOiBTdHJpbmcsXG5cdFx0Y3VzdG9tOiBCb29sZWFuLFxuXHRcdGFyaWFDdXJyZW50VmFsdWU6IHtcblx0XHRcdHR5cGU6IFN0cmluZyxcblx0XHRcdGRlZmF1bHQ6IFwicGFnZVwiXG5cdFx0fSxcblx0XHR2aWV3VHJhbnNpdGlvbjogQm9vbGVhblxuXHR9LFxuXHR1c2VMaW5rLFxuXHRzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG5cdFx0Y29uc3QgbGluayA9IHJlYWN0aXZlKHVzZUxpbmsocHJvcHMpKTtcblx0XHRjb25zdCB7IG9wdGlvbnMgfSA9IGluamVjdChyb3V0ZXJLZXkpO1xuXHRcdGNvbnN0IGVsQ2xhc3MgPSBjb21wdXRlZCgoKSA9PiAoe1xuXHRcdFx0W2dldExpbmtDbGFzcyhwcm9wcy5hY3RpdmVDbGFzcywgb3B0aW9ucy5saW5rQWN0aXZlQ2xhc3MsIFwicm91dGVyLWxpbmstYWN0aXZlXCIpXTogbGluay5pc0FjdGl2ZSxcblx0XHRcdFtnZXRMaW5rQ2xhc3MocHJvcHMuZXhhY3RBY3RpdmVDbGFzcywgb3B0aW9ucy5saW5rRXhhY3RBY3RpdmVDbGFzcywgXCJyb3V0ZXItbGluay1leGFjdC1hY3RpdmVcIildOiBsaW5rLmlzRXhhY3RBY3RpdmVcblx0XHR9KSk7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdGNvbnN0IGNoaWxkcmVuID0gc2xvdHMuZGVmYXVsdCAmJiBwcmVmZXJTaW5nbGVWTm9kZShzbG90cy5kZWZhdWx0KGxpbmspKTtcblx0XHRcdHJldHVybiBwcm9wcy5jdXN0b20gPyBjaGlsZHJlbiA6IGgoXCJhXCIsIHtcblx0XHRcdFx0XCJhcmlhLWN1cnJlbnRcIjogbGluay5pc0V4YWN0QWN0aXZlID8gcHJvcHMuYXJpYUN1cnJlbnRWYWx1ZSA6IG51bGwsXG5cdFx0XHRcdGhyZWY6IGxpbmsuaHJlZixcblx0XHRcdFx0b25DbGljazogbGluay5uYXZpZ2F0ZSxcblx0XHRcdFx0Y2xhc3M6IGVsQ2xhc3MudmFsdWVcblx0XHRcdH0sIGNoaWxkcmVuKTtcblx0XHR9O1xuXHR9XG59KTtcbi8qKlxuKiBDb21wb25lbnQgdG8gcmVuZGVyIGEgbGluayB0aGF0IHRyaWdnZXJzIGEgbmF2aWdhdGlvbiBvbiBjbGljay5cbiovXG5jb25zdCBSb3V0ZXJMaW5rID0gUm91dGVyTGlua0ltcGw7XG5mdW5jdGlvbiBndWFyZEV2ZW50KGUpIHtcblx0aWYgKGUubWV0YUtleSB8fCBlLmFsdEtleSB8fCBlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSkgcmV0dXJuO1xuXHRpZiAoZS5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG5cdGlmIChlLmJ1dHRvbiAhPT0gdm9pZCAwICYmIGUuYnV0dG9uICE9PSAwKSByZXR1cm47XG5cdGlmIChlLmN1cnJlbnRUYXJnZXQgJiYgZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSkge1xuXHRcdGNvbnN0IHRhcmdldCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIik7XG5cdFx0aWYgKC9cXGJfYmxhbmtcXGIvaS50ZXN0KHRhcmdldCkpIHJldHVybjtcblx0fVxuXHRpZiAoZS5wcmV2ZW50RGVmYXVsdCkgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRyZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGluY2x1ZGVzUGFyYW1zKG91dGVyLCBpbm5lcikge1xuXHRmb3IgKGNvbnN0IGtleSBpbiBpbm5lcikge1xuXHRcdGNvbnN0IGlubmVyVmFsdWUgPSBpbm5lcltrZXldO1xuXHRcdGNvbnN0IG91dGVyVmFsdWUgPSBvdXRlcltrZXldO1xuXHRcdGlmICh0eXBlb2YgaW5uZXJWYWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0aWYgKGlubmVyVmFsdWUgIT09IG91dGVyVmFsdWUpIHJldHVybiBmYWxzZTtcblx0XHR9IGVsc2UgaWYgKCFpc0FycmF5KG91dGVyVmFsdWUpIHx8IG91dGVyVmFsdWUubGVuZ3RoICE9PSBpbm5lclZhbHVlLmxlbmd0aCB8fCBpbm5lclZhbHVlLnNvbWUoKHZhbHVlLCBpKSA9PiB2YWx1ZSAhPT0gb3V0ZXJWYWx1ZVtpXSkpIHJldHVybiBmYWxzZTtcblx0fVxuXHRyZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuKiBHZXQgdGhlIG9yaWdpbmFsIHBhdGggdmFsdWUgb2YgYSByZWNvcmQgYnkgZm9sbG93aW5nIGl0cyBhbGlhc09mXG4qIEBwYXJhbSByZWNvcmRcbiovXG5mdW5jdGlvbiBnZXRPcmlnaW5hbFBhdGgocmVjb3JkKSB7XG5cdHJldHVybiByZWNvcmQgPyByZWNvcmQuYWxpYXNPZiA/IHJlY29yZC5hbGlhc09mLnBhdGggOiByZWNvcmQucGF0aCA6IFwiXCI7XG59XG4vKipcbiogVXRpbGl0eSBjbGFzcyB0byBnZXQgdGhlIGFjdGl2ZSBjbGFzcyBiYXNlZCBvbiBkZWZhdWx0cy5cbiogQHBhcmFtIHByb3BDbGFzc1xuKiBAcGFyYW0gZ2xvYmFsQ2xhc3NcbiogQHBhcmFtIGRlZmF1bHRDbGFzc1xuKi9cbmNvbnN0IGdldExpbmtDbGFzcyA9IChwcm9wQ2xhc3MsIGdsb2JhbENsYXNzLCBkZWZhdWx0Q2xhc3MpID0+IHByb3BDbGFzcyAhPSBudWxsID8gcHJvcENsYXNzIDogZ2xvYmFsQ2xhc3MgIT0gbnVsbCA/IGdsb2JhbENsYXNzIDogZGVmYXVsdENsYXNzO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvUm91dGVyVmlldy50c1xuY29uc3QgUm91dGVyVmlld0ltcGwgPSAvKiBAX19QVVJFX18gKi8gZGVmaW5lQ29tcG9uZW50KHtcblx0bmFtZTogXCJSb3V0ZXJWaWV3XCIsXG5cdGluaGVyaXRBdHRyczogZmFsc2UsXG5cdHByb3BzOiB7XG5cdFx0bmFtZToge1xuXHRcdFx0dHlwZTogU3RyaW5nLFxuXHRcdFx0ZGVmYXVsdDogXCJkZWZhdWx0XCJcblx0XHR9LFxuXHRcdHJvdXRlOiBPYmplY3Rcblx0fSxcblx0Y29tcGF0Q29uZmlnOiB7IE1PREU6IDMgfSxcblx0c2V0dXAocHJvcHMsIHsgYXR0cnMsIHNsb3RzIH0pIHtcblx0XHRwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgd2FybkRlcHJlY2F0ZWRVc2FnZSgpO1xuXHRcdGNvbnN0IGluamVjdGVkUm91dGUgPSBpbmplY3Qocm91dGVyVmlld0xvY2F0aW9uS2V5KTtcblx0XHRjb25zdCByb3V0ZVRvRGlzcGxheSA9IGNvbXB1dGVkKCgpID0+IHByb3BzLnJvdXRlIHx8IGluamVjdGVkUm91dGUudmFsdWUpO1xuXHRcdGNvbnN0IGluamVjdGVkRGVwdGggPSBpbmplY3Qodmlld0RlcHRoS2V5LCAwKTtcblx0XHRjb25zdCBkZXB0aCA9IGNvbXB1dGVkKCgpID0+IHtcblx0XHRcdGxldCBpbml0aWFsRGVwdGggPSB1bnJlZihpbmplY3RlZERlcHRoKTtcblx0XHRcdGNvbnN0IHsgbWF0Y2hlZCB9ID0gcm91dGVUb0Rpc3BsYXkudmFsdWU7XG5cdFx0XHRsZXQgbWF0Y2hlZFJvdXRlO1xuXHRcdFx0d2hpbGUgKChtYXRjaGVkUm91dGUgPSBtYXRjaGVkW2luaXRpYWxEZXB0aF0pICYmICFtYXRjaGVkUm91dGUuY29tcG9uZW50cykgaW5pdGlhbERlcHRoKys7XG5cdFx0XHRyZXR1cm4gaW5pdGlhbERlcHRoO1xuXHRcdH0pO1xuXHRcdGNvbnN0IG1hdGNoZWRSb3V0ZVJlZiA9IGNvbXB1dGVkKCgpID0+IHJvdXRlVG9EaXNwbGF5LnZhbHVlLm1hdGNoZWRbZGVwdGgudmFsdWVdKTtcblx0XHRwcm92aWRlKHZpZXdEZXB0aEtleSwgY29tcHV0ZWQoKCkgPT4gZGVwdGgudmFsdWUgKyAxKSk7XG5cdFx0cHJvdmlkZShtYXRjaGVkUm91dGVLZXksIG1hdGNoZWRSb3V0ZVJlZik7XG5cdFx0cHJvdmlkZShyb3V0ZXJWaWV3TG9jYXRpb25LZXksIHJvdXRlVG9EaXNwbGF5KTtcblx0XHRjb25zdCB2aWV3UmVmID0gcmVmKCk7XG5cdFx0d2F0Y2goKCkgPT4gW1xuXHRcdFx0dmlld1JlZi52YWx1ZSxcblx0XHRcdG1hdGNoZWRSb3V0ZVJlZi52YWx1ZSxcblx0XHRcdHByb3BzLm5hbWVcblx0XHRdLCAoW2luc3RhbmNlLCB0bywgbmFtZV0sIFtvbGRJbnN0YW5jZSwgZnJvbSwgb2xkTmFtZV0pID0+IHtcblx0XHRcdGlmICh0bykge1xuXHRcdFx0XHR0by5pbnN0YW5jZXNbbmFtZV0gPSBpbnN0YW5jZTtcblx0XHRcdFx0aWYgKGZyb20gJiYgZnJvbSAhPT0gdG8gJiYgaW5zdGFuY2UgJiYgaW5zdGFuY2UgPT09IG9sZEluc3RhbmNlKSB7XG5cdFx0XHRcdFx0aWYgKCF0by5sZWF2ZUd1YXJkcy5zaXplKSB0by5sZWF2ZUd1YXJkcyA9IGZyb20ubGVhdmVHdWFyZHM7XG5cdFx0XHRcdFx0aWYgKCF0by51cGRhdGVHdWFyZHMuc2l6ZSkgdG8udXBkYXRlR3VhcmRzID0gZnJvbS51cGRhdGVHdWFyZHM7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChpbnN0YW5jZSAmJiB0byAmJiAoIWZyb20gfHwgIWlzU2FtZVJvdXRlUmVjb3JkKHRvLCBmcm9tKSB8fCAhb2xkSW5zdGFuY2UpKSAodG8uZW50ZXJDYWxsYmFja3NbbmFtZV0gfHwgW10pLmZvckVhY2goKGNhbGxiYWNrKSA9PiBjYWxsYmFjayhpbnN0YW5jZSkpO1xuXHRcdH0sIHsgZmx1c2g6IFwicG9zdFwiIH0pO1xuXHRcdHJldHVybiAoKSA9PiB7XG5cdFx0XHRjb25zdCByb3V0ZSA9IHJvdXRlVG9EaXNwbGF5LnZhbHVlO1xuXHRcdFx0Y29uc3QgY3VycmVudE5hbWUgPSBwcm9wcy5uYW1lO1xuXHRcdFx0Y29uc3QgbWF0Y2hlZFJvdXRlID0gbWF0Y2hlZFJvdXRlUmVmLnZhbHVlO1xuXHRcdFx0Y29uc3QgVmlld0NvbXBvbmVudCA9IG1hdGNoZWRSb3V0ZSAmJiBtYXRjaGVkUm91dGUuY29tcG9uZW50c1tjdXJyZW50TmFtZV07XG5cdFx0XHRpZiAoIVZpZXdDb21wb25lbnQpIHJldHVybiBub3JtYWxpemVTbG90KHNsb3RzLmRlZmF1bHQsIHtcblx0XHRcdFx0Q29tcG9uZW50OiBWaWV3Q29tcG9uZW50LFxuXHRcdFx0XHRyb3V0ZVxuXHRcdFx0fSk7XG5cdFx0XHRjb25zdCByb3V0ZVByb3BzT3B0aW9uID0gbWF0Y2hlZFJvdXRlLnByb3BzW2N1cnJlbnROYW1lXTtcblx0XHRcdGNvbnN0IHJvdXRlUHJvcHMgPSByb3V0ZVByb3BzT3B0aW9uID8gcm91dGVQcm9wc09wdGlvbiA9PT0gdHJ1ZSA/IHJvdXRlLnBhcmFtcyA6IHR5cGVvZiByb3V0ZVByb3BzT3B0aW9uID09PSBcImZ1bmN0aW9uXCIgPyByb3V0ZVByb3BzT3B0aW9uKHJvdXRlKSA6IHJvdXRlUHJvcHNPcHRpb24gOiBudWxsO1xuXHRcdFx0Y29uc3Qgb25Wbm9kZVVubW91bnRlZCA9ICh2bm9kZSkgPT4ge1xuXHRcdFx0XHRpZiAodm5vZGUuY29tcG9uZW50LmlzVW5tb3VudGVkKSBtYXRjaGVkUm91dGUuaW5zdGFuY2VzW2N1cnJlbnROYW1lXSA9IG51bGw7XG5cdFx0XHR9O1xuXHRcdFx0Y29uc3QgY29tcG9uZW50ID0gaChWaWV3Q29tcG9uZW50LCBhc3NpZ24oe30sIHJvdXRlUHJvcHMsIGF0dHJzLCB7XG5cdFx0XHRcdG9uVm5vZGVVbm1vdW50ZWQsXG5cdFx0XHRcdHJlZjogdmlld1JlZlxuXHRcdFx0fSkpO1xuXHRcdFx0aWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSAmJiBpc0Jyb3dzZXIgJiYgY29tcG9uZW50LnJlZikge1xuXHRcdFx0XHRjb25zdCBpbmZvID0ge1xuXHRcdFx0XHRcdGRlcHRoOiBkZXB0aC52YWx1ZSxcblx0XHRcdFx0XHRuYW1lOiBtYXRjaGVkUm91dGUubmFtZSxcblx0XHRcdFx0XHRwYXRoOiBtYXRjaGVkUm91dGUucGF0aCxcblx0XHRcdFx0XHRtZXRhOiBtYXRjaGVkUm91dGUubWV0YVxuXHRcdFx0XHR9O1xuXHRcdFx0XHQoaXNBcnJheShjb21wb25lbnQucmVmKSA/IGNvbXBvbmVudC5yZWYubWFwKChyKSA9PiByLmkpIDogW2NvbXBvbmVudC5yZWYuaV0pLmZvckVhY2goKGluc3RhbmNlKSA9PiB7XG5cdFx0XHRcdFx0aW5zdGFuY2UuX192cnZfZGV2dG9vbHMgPSBpbmZvO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBub3JtYWxpemVTbG90KHNsb3RzLmRlZmF1bHQsIHtcblx0XHRcdFx0Q29tcG9uZW50OiBjb21wb25lbnQsXG5cdFx0XHRcdHJvdXRlXG5cdFx0XHR9KSB8fCBjb21wb25lbnQ7XG5cdFx0fTtcblx0fVxufSk7XG5mdW5jdGlvbiBub3JtYWxpemVTbG90KHNsb3QsIGRhdGEpIHtcblx0aWYgKCFzbG90KSByZXR1cm4gbnVsbDtcblx0Y29uc3Qgc2xvdENvbnRlbnQgPSBzbG90KGRhdGEpO1xuXHRyZXR1cm4gc2xvdENvbnRlbnQubGVuZ3RoID09PSAxID8gc2xvdENvbnRlbnRbMF0gOiBzbG90Q29udGVudDtcbn1cbi8qKlxuKiBDb21wb25lbnQgdG8gZGlzcGxheSB0aGUgY3VycmVudCByb3V0ZSB0aGUgdXNlciBpcyBhdC5cbiovXG5jb25zdCBSb3V0ZXJWaWV3ID0gUm91dGVyVmlld0ltcGw7XG5mdW5jdGlvbiB3YXJuRGVwcmVjYXRlZFVzYWdlKCkge1xuXHRjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuXHRjb25zdCBwYXJlbnROYW1lID0gaW5zdGFuY2UucGFyZW50ICYmIGluc3RhbmNlLnBhcmVudC50eXBlLm5hbWU7XG5cdGNvbnN0IHBhcmVudFN1YlRyZWVUeXBlID0gaW5zdGFuY2UucGFyZW50ICYmIGluc3RhbmNlLnBhcmVudC5zdWJUcmVlICYmIGluc3RhbmNlLnBhcmVudC5zdWJUcmVlLnR5cGU7XG5cdGlmIChwYXJlbnROYW1lICYmIChwYXJlbnROYW1lID09PSBcIktlZXBBbGl2ZVwiIHx8IHBhcmVudE5hbWUuaW5jbHVkZXMoXCJUcmFuc2l0aW9uXCIpKSAmJiB0eXBlb2YgcGFyZW50U3ViVHJlZVR5cGUgPT09IFwib2JqZWN0XCIgJiYgcGFyZW50U3ViVHJlZVR5cGUubmFtZSA9PT0gXCJSb3V0ZXJWaWV3XCIpIHtcblx0XHRjb25zdCBjb21wID0gcGFyZW50TmFtZSA9PT0gXCJLZWVwQWxpdmVcIiA/IFwia2VlcC1hbGl2ZVwiIDogXCJ0cmFuc2l0aW9uXCI7XG5cdFx0d2FybiQxKGA8cm91dGVyLXZpZXc+IGNhbiBubyBsb25nZXIgYmUgdXNlZCBkaXJlY3RseSBpbnNpZGUgPHRyYW5zaXRpb24+IG9yIDxrZWVwLWFsaXZlPi5cblVzZSBzbG90IHByb3BzIGluc3RlYWQ6XG5cbjxyb3V0ZXItdmlldyB2LXNsb3Q9XCJ7IENvbXBvbmVudCB9XCI+XG4gIDwke2NvbXB9PlxcbiAgICA8Y29tcG9uZW50IDppcz1cIkNvbXBvbmVudFwiIC8+XFxuICA8LyR7Y29tcH0+XFxuPC9yb3V0ZXItdmlldz5gKTtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvcm91dGVyLnRzXG4vKipcbiogQ3JlYXRlcyBhIFJvdXRlciBpbnN0YW5jZSB0aGF0IGNhbiBiZSB1c2VkIGJ5IGEgVnVlIGFwcC5cbipcbiogQHBhcmFtIG9wdGlvbnMgLSB7QGxpbmsgUm91dGVyT3B0aW9uc31cbiovXG5mdW5jdGlvbiBjcmVhdGVSb3V0ZXIob3B0aW9ucykge1xuXHRjb25zdCBtYXRjaGVyID0gY3JlYXRlUm91dGVyTWF0Y2hlcihvcHRpb25zLnJvdXRlcywgb3B0aW9ucyk7XG5cdGNvbnN0IHBhcnNlUXVlcnkkMSA9IG9wdGlvbnMucGFyc2VRdWVyeSB8fCBwYXJzZVF1ZXJ5O1xuXHRjb25zdCBzdHJpbmdpZnlRdWVyeSQxID0gb3B0aW9ucy5zdHJpbmdpZnlRdWVyeSB8fCBzdHJpbmdpZnlRdWVyeTtcblx0Y29uc3Qgcm91dGVySGlzdG9yeSA9IG9wdGlvbnMuaGlzdG9yeTtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiAhcm91dGVySGlzdG9yeSkgdGhyb3cgbmV3IEVycm9yKFwiUHJvdmlkZSB0aGUgXFxcImhpc3RvcnlcXFwiIG9wdGlvbiB3aGVuIGNhbGxpbmcgXFxcImNyZWF0ZVJvdXRlcigpXFxcIjogaHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2FwaS9pbnRlcmZhY2VzL1JvdXRlck9wdGlvbnMuaHRtbCNoaXN0b3J5XCIpO1xuXHRjb25zdCBiZWZvcmVHdWFyZHMgPSB1c2VDYWxsYmFja3MoKTtcblx0Y29uc3QgYmVmb3JlUmVzb2x2ZUd1YXJkcyA9IHVzZUNhbGxiYWNrcygpO1xuXHRjb25zdCBhZnRlckd1YXJkcyA9IHVzZUNhbGxiYWNrcygpO1xuXHRjb25zdCBjdXJyZW50Um91dGUgPSBzaGFsbG93UmVmKFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQpO1xuXHRsZXQgcGVuZGluZ0xvY2F0aW9uID0gU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRDtcblx0aWYgKGlzQnJvd3NlciAmJiBvcHRpb25zLnNjcm9sbEJlaGF2aW9yICYmIFwic2Nyb2xsUmVzdG9yYXRpb25cIiBpbiBoaXN0b3J5KSBoaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uID0gXCJtYW51YWxcIjtcblx0Y29uc3Qgbm9ybWFsaXplUGFyYW1zID0gYXBwbHlUb1BhcmFtcy5iaW5kKG51bGwsIChwYXJhbVZhbHVlKSA9PiBcIlwiICsgcGFyYW1WYWx1ZSk7XG5cdGNvbnN0IGVuY29kZVBhcmFtcyA9IGFwcGx5VG9QYXJhbXMuYmluZChudWxsLCBlbmNvZGVQYXJhbSk7XG5cdGNvbnN0IGRlY29kZVBhcmFtcyA9IGFwcGx5VG9QYXJhbXMuYmluZChudWxsLCBkZWNvZGUpO1xuXHRmdW5jdGlvbiBhZGRSb3V0ZShwYXJlbnRPclJvdXRlLCByb3V0ZSkge1xuXHRcdGxldCBwYXJlbnQ7XG5cdFx0bGV0IHJlY29yZDtcblx0XHRpZiAoaXNSb3V0ZU5hbWUocGFyZW50T3JSb3V0ZSkpIHtcblx0XHRcdHBhcmVudCA9IG1hdGNoZXIuZ2V0UmVjb3JkTWF0Y2hlcihwYXJlbnRPclJvdXRlKTtcblx0XHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgIXBhcmVudCkgd2FybiQxKGBQYXJlbnQgcm91dGUgXCIke1N0cmluZyhwYXJlbnRPclJvdXRlKX1cIiBub3QgZm91bmQgd2hlbiBhZGRpbmcgY2hpbGQgcm91dGVgLCByb3V0ZSk7XG5cdFx0XHRyZWNvcmQgPSByb3V0ZTtcblx0XHR9IGVsc2UgcmVjb3JkID0gcGFyZW50T3JSb3V0ZTtcblx0XHRyZXR1cm4gbWF0Y2hlci5hZGRSb3V0ZShyZWNvcmQsIHBhcmVudCk7XG5cdH1cblx0ZnVuY3Rpb24gcmVtb3ZlUm91dGUobmFtZSkge1xuXHRcdGNvbnN0IHJlY29yZE1hdGNoZXIgPSBtYXRjaGVyLmdldFJlY29yZE1hdGNoZXIobmFtZSk7XG5cdFx0aWYgKHJlY29yZE1hdGNoZXIpIG1hdGNoZXIucmVtb3ZlUm91dGUocmVjb3JkTWF0Y2hlcik7XG5cdFx0ZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB3YXJuJDEoYENhbm5vdCByZW1vdmUgbm9uLWV4aXN0ZW50IHJvdXRlIFwiJHtTdHJpbmcobmFtZSl9XCJgKTtcblx0fVxuXHRmdW5jdGlvbiBnZXRSb3V0ZXMoKSB7XG5cdFx0cmV0dXJuIG1hdGNoZXIuZ2V0Um91dGVzKCkubWFwKChyb3V0ZU1hdGNoZXIpID0+IHJvdXRlTWF0Y2hlci5yZWNvcmQpO1xuXHR9XG5cdGZ1bmN0aW9uIGhhc1JvdXRlKG5hbWUpIHtcblx0XHRyZXR1cm4gISFtYXRjaGVyLmdldFJlY29yZE1hdGNoZXIobmFtZSk7XG5cdH1cblx0ZnVuY3Rpb24gcmVzb2x2ZShyYXdMb2NhdGlvbiwgY3VycmVudExvY2F0aW9uKSB7XG5cdFx0Y3VycmVudExvY2F0aW9uID0gYXNzaWduKHt9LCBjdXJyZW50TG9jYXRpb24gfHwgY3VycmVudFJvdXRlLnZhbHVlKTtcblx0XHRpZiAodHlwZW9mIHJhd0xvY2F0aW9uID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRjb25zdCBsb2NhdGlvbk5vcm1hbGl6ZWQgPSBwYXJzZVVSTChwYXJzZVF1ZXJ5JDEsIHJhd0xvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24ucGF0aCk7XG5cdFx0XHRjb25zdCBtYXRjaGVkUm91dGUkMSA9IG1hdGNoZXIucmVzb2x2ZSh7IHBhdGg6IGxvY2F0aW9uTm9ybWFsaXplZC5wYXRoIH0sIGN1cnJlbnRMb2NhdGlvbik7XG5cdFx0XHRjb25zdCBocmVmJDEgPSByb3V0ZXJIaXN0b3J5LmNyZWF0ZUhyZWYobG9jYXRpb25Ob3JtYWxpemVkLmZ1bGxQYXRoKTtcblx0XHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcblx0XHRcdFx0aWYgKGhyZWYkMS5zdGFydHNXaXRoKFwiLy9cIikpIHdhcm4kMShgTG9jYXRpb24gXCIke3Jhd0xvY2F0aW9ufVwiIHJlc29sdmVkIHRvIFwiJHtocmVmJDF9XCIuIEEgcmVzb2x2ZWQgbG9jYXRpb24gY2Fubm90IHN0YXJ0IHdpdGggbXVsdGlwbGUgc2xhc2hlcy5gKTtcblx0XHRcdFx0ZWxzZSBpZiAoIW1hdGNoZWRSb3V0ZSQxLm1hdGNoZWQubGVuZ3RoKSB3YXJuJDEoYE5vIG1hdGNoIGZvdW5kIGZvciBsb2NhdGlvbiB3aXRoIHBhdGggXCIke3Jhd0xvY2F0aW9ufVwiYCk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gYXNzaWduKGxvY2F0aW9uTm9ybWFsaXplZCwgbWF0Y2hlZFJvdXRlJDEsIHtcblx0XHRcdFx0cGFyYW1zOiBkZWNvZGVQYXJhbXMobWF0Y2hlZFJvdXRlJDEucGFyYW1zKSxcblx0XHRcdFx0aGFzaDogZGVjb2RlKGxvY2F0aW9uTm9ybWFsaXplZC5oYXNoKSxcblx0XHRcdFx0cmVkaXJlY3RlZEZyb206IHZvaWQgMCxcblx0XHRcdFx0aHJlZjogaHJlZiQxXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiAhaXNSb3V0ZUxvY2F0aW9uKHJhd0xvY2F0aW9uKSkge1xuXHRcdFx0d2FybiQxKGByb3V0ZXIucmVzb2x2ZSgpIHdhcyBwYXNzZWQgYW4gaW52YWxpZCBsb2NhdGlvbi4gVGhpcyB3aWxsIGZhaWwgaW4gcHJvZHVjdGlvbi5cXG4tIExvY2F0aW9uOmAsIHJhd0xvY2F0aW9uKTtcblx0XHRcdHJldHVybiByZXNvbHZlKHt9KTtcblx0XHR9XG5cdFx0bGV0IG1hdGNoZXJMb2NhdGlvbjtcblx0XHRpZiAocmF3TG9jYXRpb24ucGF0aCAhPSBudWxsKSB7XG5cdFx0XHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiICYmIFwicGFyYW1zXCIgaW4gcmF3TG9jYXRpb24gJiYgIShcIm5hbWVcIiBpbiByYXdMb2NhdGlvbikgJiYgT2JqZWN0LmtleXMocmF3TG9jYXRpb24ucGFyYW1zKS5sZW5ndGgpIHdhcm4kMShgUGF0aCBcIiR7cmF3TG9jYXRpb24ucGF0aH1cIiB3YXMgcGFzc2VkIHdpdGggcGFyYW1zIGJ1dCB0aGV5IHdpbGwgYmUgaWdub3JlZC4gVXNlIGEgbmFtZWQgcm91dGUgYWxvbmdzaWRlIHBhcmFtcyBpbnN0ZWFkLmApO1xuXHRcdFx0bWF0Y2hlckxvY2F0aW9uID0gYXNzaWduKHt9LCByYXdMb2NhdGlvbiwgeyBwYXRoOiBwYXJzZVVSTChwYXJzZVF1ZXJ5JDEsIHJhd0xvY2F0aW9uLnBhdGgsIGN1cnJlbnRMb2NhdGlvbi5wYXRoKS5wYXRoIH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCB0YXJnZXRQYXJhbXMgPSBhc3NpZ24oe30sIHJhd0xvY2F0aW9uLnBhcmFtcyk7XG5cdFx0XHRmb3IgKGNvbnN0IGtleSBpbiB0YXJnZXRQYXJhbXMpIGlmICh0YXJnZXRQYXJhbXNba2V5XSA9PSBudWxsKSBkZWxldGUgdGFyZ2V0UGFyYW1zW2tleV07XG5cdFx0XHRtYXRjaGVyTG9jYXRpb24gPSBhc3NpZ24oe30sIHJhd0xvY2F0aW9uLCB7IHBhcmFtczogZW5jb2RlUGFyYW1zKHRhcmdldFBhcmFtcykgfSk7XG5cdFx0XHRjdXJyZW50TG9jYXRpb24ucGFyYW1zID0gZW5jb2RlUGFyYW1zKGN1cnJlbnRMb2NhdGlvbi5wYXJhbXMpO1xuXHRcdH1cblx0XHRjb25zdCBtYXRjaGVkUm91dGUgPSBtYXRjaGVyLnJlc29sdmUobWF0Y2hlckxvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24pO1xuXHRcdGNvbnN0IGhhc2ggPSByYXdMb2NhdGlvbi5oYXNoIHx8IFwiXCI7XG5cdFx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiBoYXNoICYmICFoYXNoLnN0YXJ0c1dpdGgoXCIjXCIpKSB3YXJuJDEoYEEgXFxgaGFzaFxcYCBzaG91bGQgYWx3YXlzIHN0YXJ0IHdpdGggdGhlIGNoYXJhY3RlciBcIiNcIi4gUmVwbGFjZSBcIiR7aGFzaH1cIiB3aXRoIFwiIyR7aGFzaH1cIi5gKTtcblx0XHRtYXRjaGVkUm91dGUucGFyYW1zID0gbm9ybWFsaXplUGFyYW1zKGRlY29kZVBhcmFtcyhtYXRjaGVkUm91dGUucGFyYW1zKSk7XG5cdFx0Y29uc3QgZnVsbFBhdGggPSBzdHJpbmdpZnlVUkwoc3RyaW5naWZ5UXVlcnkkMSwgYXNzaWduKHt9LCByYXdMb2NhdGlvbiwge1xuXHRcdFx0aGFzaDogZW5jb2RlSGFzaChoYXNoKSxcblx0XHRcdHBhdGg6IG1hdGNoZWRSb3V0ZS5wYXRoXG5cdFx0fSkpO1xuXHRcdGNvbnN0IGhyZWYgPSByb3V0ZXJIaXN0b3J5LmNyZWF0ZUhyZWYoZnVsbFBhdGgpO1xuXHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcblx0XHRcdGlmIChocmVmLnN0YXJ0c1dpdGgoXCIvL1wiKSkgd2FybiQxKGBMb2NhdGlvbiBcIiR7cmF3TG9jYXRpb259XCIgcmVzb2x2ZWQgdG8gXCIke2hyZWZ9XCIuIEEgcmVzb2x2ZWQgbG9jYXRpb24gY2Fubm90IHN0YXJ0IHdpdGggbXVsdGlwbGUgc2xhc2hlcy5gKTtcblx0XHRcdGVsc2UgaWYgKCFtYXRjaGVkUm91dGUubWF0Y2hlZC5sZW5ndGgpIHdhcm4kMShgTm8gbWF0Y2ggZm91bmQgZm9yIGxvY2F0aW9uIHdpdGggcGF0aCBcIiR7cmF3TG9jYXRpb24ucGF0aCAhPSBudWxsID8gcmF3TG9jYXRpb24ucGF0aCA6IHJhd0xvY2F0aW9ufVwiYCk7XG5cdFx0fVxuXHRcdHJldHVybiBhc3NpZ24oe1xuXHRcdFx0ZnVsbFBhdGgsXG5cdFx0XHRoYXNoLFxuXHRcdFx0cXVlcnk6IHN0cmluZ2lmeVF1ZXJ5JDEgPT09IHN0cmluZ2lmeVF1ZXJ5ID8gbm9ybWFsaXplUXVlcnkocmF3TG9jYXRpb24ucXVlcnkpIDogcmF3TG9jYXRpb24ucXVlcnkgfHwge31cblx0XHR9LCBtYXRjaGVkUm91dGUsIHtcblx0XHRcdHJlZGlyZWN0ZWRGcm9tOiB2b2lkIDAsXG5cdFx0XHRocmVmXG5cdFx0fSk7XG5cdH1cblx0ZnVuY3Rpb24gbG9jYXRpb25Bc09iamVjdCh0bykge1xuXHRcdHJldHVybiB0eXBlb2YgdG8gPT09IFwic3RyaW5nXCIgPyBwYXJzZVVSTChwYXJzZVF1ZXJ5JDEsIHRvLCBjdXJyZW50Um91dGUudmFsdWUucGF0aCkgOiBhc3NpZ24oe30sIHRvKTtcblx0fVxuXHRmdW5jdGlvbiBjaGVja0NhbmNlbGVkTmF2aWdhdGlvbih0bywgZnJvbSkge1xuXHRcdGlmIChwZW5kaW5nTG9jYXRpb24gIT09IHRvKSByZXR1cm4gY3JlYXRlUm91dGVyRXJyb3IoRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0NBTkNFTExFRCwge1xuXHRcdFx0ZnJvbSxcblx0XHRcdHRvXG5cdFx0fSk7XG5cdH1cblx0ZnVuY3Rpb24gcHVzaCh0bykge1xuXHRcdHJldHVybiBwdXNoV2l0aFJlZGlyZWN0KHRvKTtcblx0fVxuXHRmdW5jdGlvbiByZXBsYWNlKHRvKSB7XG5cdFx0cmV0dXJuIHB1c2goYXNzaWduKGxvY2F0aW9uQXNPYmplY3QodG8pLCB7IHJlcGxhY2U6IHRydWUgfSkpO1xuXHR9XG5cdGZ1bmN0aW9uIGhhbmRsZVJlZGlyZWN0UmVjb3JkKHRvLCBmcm9tKSB7XG5cdFx0Y29uc3QgbGFzdE1hdGNoZWQgPSB0by5tYXRjaGVkW3RvLm1hdGNoZWQubGVuZ3RoIC0gMV07XG5cdFx0aWYgKGxhc3RNYXRjaGVkICYmIGxhc3RNYXRjaGVkLnJlZGlyZWN0KSB7XG5cdFx0XHRjb25zdCB7IHJlZGlyZWN0IH0gPSBsYXN0TWF0Y2hlZDtcblx0XHRcdGxldCBuZXdUYXJnZXRMb2NhdGlvbiA9IHR5cGVvZiByZWRpcmVjdCA9PT0gXCJmdW5jdGlvblwiID8gcmVkaXJlY3QodG8sIGZyb20pIDogcmVkaXJlY3Q7XG5cdFx0XHRpZiAodHlwZW9mIG5ld1RhcmdldExvY2F0aW9uID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdG5ld1RhcmdldExvY2F0aW9uID0gbmV3VGFyZ2V0TG9jYXRpb24uaW5jbHVkZXMoXCI/XCIpIHx8IG5ld1RhcmdldExvY2F0aW9uLmluY2x1ZGVzKFwiI1wiKSA/IG5ld1RhcmdldExvY2F0aW9uID0gbG9jYXRpb25Bc09iamVjdChuZXdUYXJnZXRMb2NhdGlvbikgOiB7IHBhdGg6IG5ld1RhcmdldExvY2F0aW9uIH07XG5cdFx0XHRcdG5ld1RhcmdldExvY2F0aW9uLnBhcmFtcyA9IHt9O1xuXHRcdFx0fVxuXHRcdFx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiBuZXdUYXJnZXRMb2NhdGlvbi5wYXRoID09IG51bGwgJiYgIShcIm5hbWVcIiBpbiBuZXdUYXJnZXRMb2NhdGlvbikpIHtcblx0XHRcdFx0d2FybiQxKGBJbnZhbGlkIHJlZGlyZWN0IGZvdW5kOlxcbiR7SlNPTi5zdHJpbmdpZnkobmV3VGFyZ2V0TG9jYXRpb24sIG51bGwsIDIpfVxcbiB3aGVuIG5hdmlnYXRpbmcgdG8gXCIke3RvLmZ1bGxQYXRofVwiLiBBIHJlZGlyZWN0IG11c3QgY29udGFpbiBhIG5hbWUgb3IgcGF0aC4gVGhpcyB3aWxsIGJyZWFrIGluIHByb2R1Y3Rpb24uYCk7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcmVkaXJlY3RcIik7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gYXNzaWduKHtcblx0XHRcdFx0cXVlcnk6IHRvLnF1ZXJ5LFxuXHRcdFx0XHRoYXNoOiB0by5oYXNoLFxuXHRcdFx0XHRwYXJhbXM6IG5ld1RhcmdldExvY2F0aW9uLnBhdGggIT0gbnVsbCA/IHt9IDogdG8ucGFyYW1zXG5cdFx0XHR9LCBuZXdUYXJnZXRMb2NhdGlvbik7XG5cdFx0fVxuXHR9XG5cdGZ1bmN0aW9uIHB1c2hXaXRoUmVkaXJlY3QodG8sIHJlZGlyZWN0ZWRGcm9tKSB7XG5cdFx0Y29uc3QgdGFyZ2V0TG9jYXRpb24gPSBwZW5kaW5nTG9jYXRpb24gPSByZXNvbHZlKHRvKTtcblx0XHRjb25zdCBmcm9tID0gY3VycmVudFJvdXRlLnZhbHVlO1xuXHRcdGNvbnN0IGRhdGEgPSB0by5zdGF0ZTtcblx0XHRjb25zdCBmb3JjZSA9IHRvLmZvcmNlO1xuXHRcdGNvbnN0IHJlcGxhY2UkMSA9IHRvLnJlcGxhY2UgPT09IHRydWU7XG5cdFx0Y29uc3Qgc2hvdWxkUmVkaXJlY3QgPSBoYW5kbGVSZWRpcmVjdFJlY29yZCh0YXJnZXRMb2NhdGlvbiwgZnJvbSk7XG5cdFx0aWYgKHNob3VsZFJlZGlyZWN0KSByZXR1cm4gcHVzaFdpdGhSZWRpcmVjdChhc3NpZ24obG9jYXRpb25Bc09iamVjdChzaG91bGRSZWRpcmVjdCksIHtcblx0XHRcdHN0YXRlOiB0eXBlb2Ygc2hvdWxkUmVkaXJlY3QgPT09IFwib2JqZWN0XCIgPyBhc3NpZ24oe30sIGRhdGEsIHNob3VsZFJlZGlyZWN0LnN0YXRlKSA6IGRhdGEsXG5cdFx0XHRmb3JjZSxcblx0XHRcdHJlcGxhY2U6IHJlcGxhY2UkMVxuXHRcdH0pLCByZWRpcmVjdGVkRnJvbSB8fCB0YXJnZXRMb2NhdGlvbik7XG5cdFx0Y29uc3QgdG9Mb2NhdGlvbiA9IHRhcmdldExvY2F0aW9uO1xuXHRcdHRvTG9jYXRpb24ucmVkaXJlY3RlZEZyb20gPSByZWRpcmVjdGVkRnJvbTtcblx0XHRsZXQgZmFpbHVyZTtcblx0XHRpZiAoIWZvcmNlICYmIGlzU2FtZVJvdXRlTG9jYXRpb24oc3RyaW5naWZ5UXVlcnkkMSwgZnJvbSwgdGFyZ2V0TG9jYXRpb24pKSB7XG5cdFx0XHRmYWlsdXJlID0gY3JlYXRlUm91dGVyRXJyb3IoRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0RVUExJQ0FURUQsIHtcblx0XHRcdFx0dG86IHRvTG9jYXRpb24sXG5cdFx0XHRcdGZyb21cblx0XHRcdH0pO1xuXHRcdFx0aGFuZGxlU2Nyb2xsKGZyb20sIGZyb20sIHRydWUsIGZhbHNlKTtcblx0XHR9XG5cdFx0cmV0dXJuIChmYWlsdXJlID8gUHJvbWlzZS5yZXNvbHZlKGZhaWx1cmUpIDogbmF2aWdhdGUodG9Mb2NhdGlvbiwgZnJvbSkpLmNhdGNoKChlcnJvcikgPT4gaXNOYXZpZ2F0aW9uRmFpbHVyZShlcnJvcikgPyBpc05hdmlnYXRpb25GYWlsdXJlKGVycm9yLCBFcnJvclR5cGVzLk5BVklHQVRJT05fR1VBUkRfUkVESVJFQ1QpID8gZXJyb3IgOiBtYXJrQXNSZWFkeShlcnJvcikgOiB0cmlnZ2VyRXJyb3IoZXJyb3IsIHRvTG9jYXRpb24sIGZyb20pKS50aGVuKChmYWlsdXJlJDEpID0+IHtcblx0XHRcdGlmIChmYWlsdXJlJDEpIHtcblx0XHRcdFx0aWYgKGlzTmF2aWdhdGlvbkZhaWx1cmUoZmFpbHVyZSQxLCBFcnJvclR5cGVzLk5BVklHQVRJT05fR1VBUkRfUkVESVJFQ1QpKSB7XG5cdFx0XHRcdFx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiBpc1NhbWVSb3V0ZUxvY2F0aW9uKHN0cmluZ2lmeVF1ZXJ5JDEsIHJlc29sdmUoZmFpbHVyZSQxLnRvKSwgdG9Mb2NhdGlvbikgJiYgcmVkaXJlY3RlZEZyb20gJiYgKHJlZGlyZWN0ZWRGcm9tLl9jb3VudCA9IHJlZGlyZWN0ZWRGcm9tLl9jb3VudCA/IHJlZGlyZWN0ZWRGcm9tLl9jb3VudCArIDEgOiAxKSA+IDMwKSB7XG5cdFx0XHRcdFx0XHR3YXJuJDEoYERldGVjdGVkIGEgcG9zc2libHkgaW5maW5pdGUgcmVkaXJlY3Rpb24gaW4gYSBuYXZpZ2F0aW9uIGd1YXJkIHdoZW4gZ29pbmcgZnJvbSBcIiR7ZnJvbS5mdWxsUGF0aH1cIiB0byBcIiR7dG9Mb2NhdGlvbi5mdWxsUGF0aH1cIi4gQWJvcnRpbmcgdG8gYXZvaWQgYSBTdGFjayBPdmVyZmxvdy5cXG4gQXJlIHlvdSBhbHdheXMgcmV0dXJuaW5nIGEgbmV3IGxvY2F0aW9uIHdpdGhpbiBhIG5hdmlnYXRpb24gZ3VhcmQ/IFRoYXQgd291bGQgbGVhZCB0byB0aGlzIGVycm9yLiBPbmx5IHJldHVybiB3aGVuIHJlZGlyZWN0aW5nIG9yIGFib3J0aW5nLCB0aGF0IHNob3VsZCBmaXggdGhpcy4gVGhpcyBtaWdodCBicmVhayBpbiBwcm9kdWN0aW9uIGlmIG5vdCBmaXhlZC5gKTtcblx0XHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdCgvKiBAX19QVVJFX18gKi8gbmV3IEVycm9yKFwiSW5maW5pdGUgcmVkaXJlY3QgaW4gbmF2aWdhdGlvbiBndWFyZFwiKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBwdXNoV2l0aFJlZGlyZWN0KGFzc2lnbih7IHJlcGxhY2U6IHJlcGxhY2UkMSB9LCBsb2NhdGlvbkFzT2JqZWN0KGZhaWx1cmUkMS50byksIHtcblx0XHRcdFx0XHRcdHN0YXRlOiB0eXBlb2YgZmFpbHVyZSQxLnRvID09PSBcIm9iamVjdFwiID8gYXNzaWduKHt9LCBkYXRhLCBmYWlsdXJlJDEudG8uc3RhdGUpIDogZGF0YSxcblx0XHRcdFx0XHRcdGZvcmNlXG5cdFx0XHRcdFx0fSksIHJlZGlyZWN0ZWRGcm9tIHx8IHRvTG9jYXRpb24pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgZmFpbHVyZSQxID0gZmluYWxpemVOYXZpZ2F0aW9uKHRvTG9jYXRpb24sIGZyb20sIHRydWUsIHJlcGxhY2UkMSwgZGF0YSk7XG5cdFx0XHR0cmlnZ2VyQWZ0ZXJFYWNoKHRvTG9jYXRpb24sIGZyb20sIGZhaWx1cmUkMSk7XG5cdFx0XHRyZXR1cm4gZmFpbHVyZSQxO1xuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqIEhlbHBlciB0byByZWplY3QgYW5kIHNraXAgYWxsIG5hdmlnYXRpb24gZ3VhcmRzIGlmIGEgbmV3IG5hdmlnYXRpb24gaGFwcGVuZWRcblx0KiBAcGFyYW0gdG9cblx0KiBAcGFyYW0gZnJvbVxuXHQqL1xuXHRmdW5jdGlvbiBjaGVja0NhbmNlbGVkTmF2aWdhdGlvbkFuZFJlamVjdCh0bywgZnJvbSkge1xuXHRcdGNvbnN0IGVycm9yID0gY2hlY2tDYW5jZWxlZE5hdmlnYXRpb24odG8sIGZyb20pO1xuXHRcdHJldHVybiBlcnJvciA/IFByb21pc2UucmVqZWN0KGVycm9yKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuXHR9XG5cdGZ1bmN0aW9uIHJ1bldpdGhDb250ZXh0KGZuKSB7XG5cdFx0Y29uc3QgYXBwID0gaW5zdGFsbGVkQXBwcy52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG5cdFx0cmV0dXJuIGFwcCAmJiB0eXBlb2YgYXBwLnJ1bldpdGhDb250ZXh0ID09PSBcImZ1bmN0aW9uXCIgPyBhcHAucnVuV2l0aENvbnRleHQoZm4pIDogZm4oKTtcblx0fVxuXHRmdW5jdGlvbiBuYXZpZ2F0ZSh0bywgZnJvbSkge1xuXHRcdGxldCBndWFyZHM7XG5cdFx0Y29uc3QgW2xlYXZpbmdSZWNvcmRzLCB1cGRhdGluZ1JlY29yZHMsIGVudGVyaW5nUmVjb3Jkc10gPSBleHRyYWN0Q2hhbmdpbmdSZWNvcmRzKHRvLCBmcm9tKTtcblx0XHRndWFyZHMgPSBleHRyYWN0Q29tcG9uZW50c0d1YXJkcyhsZWF2aW5nUmVjb3Jkcy5yZXZlcnNlKCksIFwiYmVmb3JlUm91dGVMZWF2ZVwiLCB0bywgZnJvbSk7XG5cdFx0Zm9yIChjb25zdCByZWNvcmQgb2YgbGVhdmluZ1JlY29yZHMpIHJlY29yZC5sZWF2ZUd1YXJkcy5mb3JFYWNoKChndWFyZCkgPT4ge1xuXHRcdFx0Z3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20pKTtcblx0XHR9KTtcblx0XHRjb25zdCBjYW5jZWxlZE5hdmlnYXRpb25DaGVjayA9IGNoZWNrQ2FuY2VsZWROYXZpZ2F0aW9uQW5kUmVqZWN0LmJpbmQobnVsbCwgdG8sIGZyb20pO1xuXHRcdGd1YXJkcy5wdXNoKGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrKTtcblx0XHRyZXR1cm4gcnVuR3VhcmRRdWV1ZShndWFyZHMpLnRoZW4oKCkgPT4ge1xuXHRcdFx0Z3VhcmRzID0gW107XG5cdFx0XHRmb3IgKGNvbnN0IGd1YXJkIG9mIGJlZm9yZUd1YXJkcy5saXN0KCkpIGd1YXJkcy5wdXNoKGd1YXJkVG9Qcm9taXNlRm4oZ3VhcmQsIHRvLCBmcm9tKSk7XG5cdFx0XHRndWFyZHMucHVzaChjYW5jZWxlZE5hdmlnYXRpb25DaGVjayk7XG5cdFx0XHRyZXR1cm4gcnVuR3VhcmRRdWV1ZShndWFyZHMpO1xuXHRcdH0pLnRoZW4oKCkgPT4ge1xuXHRcdFx0Z3VhcmRzID0gZXh0cmFjdENvbXBvbmVudHNHdWFyZHModXBkYXRpbmdSZWNvcmRzLCBcImJlZm9yZVJvdXRlVXBkYXRlXCIsIHRvLCBmcm9tKTtcblx0XHRcdGZvciAoY29uc3QgcmVjb3JkIG9mIHVwZGF0aW5nUmVjb3JkcykgcmVjb3JkLnVwZGF0ZUd1YXJkcy5mb3JFYWNoKChndWFyZCkgPT4ge1xuXHRcdFx0XHRndWFyZHMucHVzaChndWFyZFRvUHJvbWlzZUZuKGd1YXJkLCB0bywgZnJvbSkpO1xuXHRcdFx0fSk7XG5cdFx0XHRndWFyZHMucHVzaChjYW5jZWxlZE5hdmlnYXRpb25DaGVjayk7XG5cdFx0XHRyZXR1cm4gcnVuR3VhcmRRdWV1ZShndWFyZHMpO1xuXHRcdH0pLnRoZW4oKCkgPT4ge1xuXHRcdFx0Z3VhcmRzID0gW107XG5cdFx0XHRmb3IgKGNvbnN0IHJlY29yZCBvZiBlbnRlcmluZ1JlY29yZHMpIGlmIChyZWNvcmQuYmVmb3JlRW50ZXIpIGlmIChpc0FycmF5KHJlY29yZC5iZWZvcmVFbnRlcikpIGZvciAoY29uc3QgYmVmb3JlRW50ZXIgb2YgcmVjb3JkLmJlZm9yZUVudGVyKSBndWFyZHMucHVzaChndWFyZFRvUHJvbWlzZUZuKGJlZm9yZUVudGVyLCB0bywgZnJvbSkpO1xuXHRcdFx0ZWxzZSBndWFyZHMucHVzaChndWFyZFRvUHJvbWlzZUZuKHJlY29yZC5iZWZvcmVFbnRlciwgdG8sIGZyb20pKTtcblx0XHRcdGd1YXJkcy5wdXNoKGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrKTtcblx0XHRcdHJldHVybiBydW5HdWFyZFF1ZXVlKGd1YXJkcyk7XG5cdFx0fSkudGhlbigoKSA9PiB7XG5cdFx0XHR0by5tYXRjaGVkLmZvckVhY2goKHJlY29yZCkgPT4gcmVjb3JkLmVudGVyQ2FsbGJhY2tzID0ge30pO1xuXHRcdFx0Z3VhcmRzID0gZXh0cmFjdENvbXBvbmVudHNHdWFyZHMoZW50ZXJpbmdSZWNvcmRzLCBcImJlZm9yZVJvdXRlRW50ZXJcIiwgdG8sIGZyb20sIHJ1bldpdGhDb250ZXh0KTtcblx0XHRcdGd1YXJkcy5wdXNoKGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrKTtcblx0XHRcdHJldHVybiBydW5HdWFyZFF1ZXVlKGd1YXJkcyk7XG5cdFx0fSkudGhlbigoKSA9PiB7XG5cdFx0XHRndWFyZHMgPSBbXTtcblx0XHRcdGZvciAoY29uc3QgZ3VhcmQgb2YgYmVmb3JlUmVzb2x2ZUd1YXJkcy5saXN0KCkpIGd1YXJkcy5wdXNoKGd1YXJkVG9Qcm9taXNlRm4oZ3VhcmQsIHRvLCBmcm9tKSk7XG5cdFx0XHRndWFyZHMucHVzaChjYW5jZWxlZE5hdmlnYXRpb25DaGVjayk7XG5cdFx0XHRyZXR1cm4gcnVuR3VhcmRRdWV1ZShndWFyZHMpO1xuXHRcdH0pLmNhdGNoKChlcnIpID0+IGlzTmF2aWdhdGlvbkZhaWx1cmUoZXJyLCBFcnJvclR5cGVzLk5BVklHQVRJT05fQ0FOQ0VMTEVEKSA/IGVyciA6IFByb21pc2UucmVqZWN0KGVycikpO1xuXHR9XG5cdGZ1bmN0aW9uIHRyaWdnZXJBZnRlckVhY2godG8sIGZyb20sIGZhaWx1cmUpIHtcblx0XHRhZnRlckd1YXJkcy5saXN0KCkuZm9yRWFjaCgoZ3VhcmQpID0+IHJ1bldpdGhDb250ZXh0KCgpID0+IGd1YXJkKHRvLCBmcm9tLCBmYWlsdXJlKSkpO1xuXHR9XG5cdC8qKlxuXHQqIC0gQ2xlYW5zIHVwIGFueSBuYXZpZ2F0aW9uIGd1YXJkc1xuXHQqIC0gQ2hhbmdlcyB0aGUgdXJsIGlmIG5lY2Vzc2FyeVxuXHQqIC0gQ2FsbHMgdGhlIHNjcm9sbEJlaGF2aW9yXG5cdCovXG5cdGZ1bmN0aW9uIGZpbmFsaXplTmF2aWdhdGlvbih0b0xvY2F0aW9uLCBmcm9tLCBpc1B1c2gsIHJlcGxhY2UkMSwgZGF0YSkge1xuXHRcdGNvbnN0IGVycm9yID0gY2hlY2tDYW5jZWxlZE5hdmlnYXRpb24odG9Mb2NhdGlvbiwgZnJvbSk7XG5cdFx0aWYgKGVycm9yKSByZXR1cm4gZXJyb3I7XG5cdFx0Y29uc3QgaXNGaXJzdE5hdmlnYXRpb24gPSBmcm9tID09PSBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEO1xuXHRcdGNvbnN0IHN0YXRlID0gIWlzQnJvd3NlciA/IHt9IDogaGlzdG9yeS5zdGF0ZTtcblx0XHRpZiAoaXNQdXNoKSBpZiAocmVwbGFjZSQxIHx8IGlzRmlyc3ROYXZpZ2F0aW9uKSByb3V0ZXJIaXN0b3J5LnJlcGxhY2UodG9Mb2NhdGlvbi5mdWxsUGF0aCwgYXNzaWduKHsgc2Nyb2xsOiBpc0ZpcnN0TmF2aWdhdGlvbiAmJiBzdGF0ZSAmJiBzdGF0ZS5zY3JvbGwgfSwgZGF0YSkpO1xuXHRcdGVsc2Ugcm91dGVySGlzdG9yeS5wdXNoKHRvTG9jYXRpb24uZnVsbFBhdGgsIGRhdGEpO1xuXHRcdGN1cnJlbnRSb3V0ZS52YWx1ZSA9IHRvTG9jYXRpb247XG5cdFx0aGFuZGxlU2Nyb2xsKHRvTG9jYXRpb24sIGZyb20sIGlzUHVzaCwgaXNGaXJzdE5hdmlnYXRpb24pO1xuXHRcdG1hcmtBc1JlYWR5KCk7XG5cdH1cblx0bGV0IHJlbW92ZUhpc3RvcnlMaXN0ZW5lcjtcblx0ZnVuY3Rpb24gc2V0dXBMaXN0ZW5lcnMoKSB7XG5cdFx0aWYgKHJlbW92ZUhpc3RvcnlMaXN0ZW5lcikgcmV0dXJuO1xuXHRcdHJlbW92ZUhpc3RvcnlMaXN0ZW5lciA9IHJvdXRlckhpc3RvcnkubGlzdGVuKCh0bywgX2Zyb20sIGluZm8pID0+IHtcblx0XHRcdGlmICghcm91dGVyLmxpc3RlbmluZykgcmV0dXJuO1xuXHRcdFx0Y29uc3QgdG9Mb2NhdGlvbiA9IHJlc29sdmUodG8pO1xuXHRcdFx0Y29uc3Qgc2hvdWxkUmVkaXJlY3QgPSBoYW5kbGVSZWRpcmVjdFJlY29yZCh0b0xvY2F0aW9uLCByb3V0ZXIuY3VycmVudFJvdXRlLnZhbHVlKTtcblx0XHRcdGlmIChzaG91bGRSZWRpcmVjdCkge1xuXHRcdFx0XHRwdXNoV2l0aFJlZGlyZWN0KGFzc2lnbihzaG91bGRSZWRpcmVjdCwge1xuXHRcdFx0XHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0XHRcdFx0Zm9yY2U6IHRydWVcblx0XHRcdFx0fSksIHRvTG9jYXRpb24pLmNhdGNoKG5vb3ApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRwZW5kaW5nTG9jYXRpb24gPSB0b0xvY2F0aW9uO1xuXHRcdFx0Y29uc3QgZnJvbSA9IGN1cnJlbnRSb3V0ZS52YWx1ZTtcblx0XHRcdGlmIChpc0Jyb3dzZXIpIHNhdmVTY3JvbGxQb3NpdGlvbihnZXRTY3JvbGxLZXkoZnJvbS5mdWxsUGF0aCwgaW5mby5kZWx0YSksIGNvbXB1dGVTY3JvbGxQb3NpdGlvbigpKTtcblx0XHRcdG5hdmlnYXRlKHRvTG9jYXRpb24sIGZyb20pLmNhdGNoKChlcnJvcikgPT4ge1xuXHRcdFx0XHRpZiAoaXNOYXZpZ2F0aW9uRmFpbHVyZShlcnJvciwgRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0FCT1JURUQgfCBFcnJvclR5cGVzLk5BVklHQVRJT05fQ0FOQ0VMTEVEKSkgcmV0dXJuIGVycm9yO1xuXHRcdFx0XHRpZiAoaXNOYXZpZ2F0aW9uRmFpbHVyZShlcnJvciwgRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0dVQVJEX1JFRElSRUNUKSkge1xuXHRcdFx0XHRcdHB1c2hXaXRoUmVkaXJlY3QoYXNzaWduKGxvY2F0aW9uQXNPYmplY3QoZXJyb3IudG8pLCB7IGZvcmNlOiB0cnVlIH0pLCB0b0xvY2F0aW9uKS50aGVuKChmYWlsdXJlKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoaXNOYXZpZ2F0aW9uRmFpbHVyZShmYWlsdXJlLCBFcnJvclR5cGVzLk5BVklHQVRJT05fQUJPUlRFRCB8IEVycm9yVHlwZXMuTkFWSUdBVElPTl9EVVBMSUNBVEVEKSAmJiAhaW5mby5kZWx0YSAmJiBpbmZvLnR5cGUgPT09IE5hdmlnYXRpb25UeXBlLnBvcCkgcm91dGVySGlzdG9yeS5nbygtMSwgZmFsc2UpO1xuXHRcdFx0XHRcdH0pLmNhdGNoKG5vb3ApO1xuXHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChpbmZvLmRlbHRhKSByb3V0ZXJIaXN0b3J5LmdvKC1pbmZvLmRlbHRhLCBmYWxzZSk7XG5cdFx0XHRcdHJldHVybiB0cmlnZ2VyRXJyb3IoZXJyb3IsIHRvTG9jYXRpb24sIGZyb20pO1xuXHRcdFx0fSkudGhlbigoZmFpbHVyZSkgPT4ge1xuXHRcdFx0XHRmYWlsdXJlID0gZmFpbHVyZSB8fCBmaW5hbGl6ZU5hdmlnYXRpb24odG9Mb2NhdGlvbiwgZnJvbSwgZmFsc2UpO1xuXHRcdFx0XHRpZiAoZmFpbHVyZSkge1xuXHRcdFx0XHRcdGlmIChpbmZvLmRlbHRhICYmICFpc05hdmlnYXRpb25GYWlsdXJlKGZhaWx1cmUsIEVycm9yVHlwZXMuTkFWSUdBVElPTl9DQU5DRUxMRUQpKSByb3V0ZXJIaXN0b3J5LmdvKC1pbmZvLmRlbHRhLCBmYWxzZSk7XG5cdFx0XHRcdFx0ZWxzZSBpZiAoaW5mby50eXBlID09PSBOYXZpZ2F0aW9uVHlwZS5wb3AgJiYgaXNOYXZpZ2F0aW9uRmFpbHVyZShmYWlsdXJlLCBFcnJvclR5cGVzLk5BVklHQVRJT05fQUJPUlRFRCB8IEVycm9yVHlwZXMuTkFWSUdBVElPTl9EVVBMSUNBVEVEKSkgcm91dGVySGlzdG9yeS5nbygtMSwgZmFsc2UpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRyaWdnZXJBZnRlckVhY2godG9Mb2NhdGlvbiwgZnJvbSwgZmFpbHVyZSk7XG5cdFx0XHR9KS5jYXRjaChub29wKTtcblx0XHR9KTtcblx0fVxuXHRsZXQgcmVhZHlIYW5kbGVycyA9IHVzZUNhbGxiYWNrcygpO1xuXHRsZXQgZXJyb3JMaXN0ZW5lcnMgPSB1c2VDYWxsYmFja3MoKTtcblx0bGV0IHJlYWR5O1xuXHQvKipcblx0KiBUcmlnZ2VyIGVycm9yTGlzdGVuZXJzIGFkZGVkIHZpYSBvbkVycm9yIGFuZCB0aHJvd3MgdGhlIGVycm9yIGFzIHdlbGxcblx0KlxuXHQqIEBwYXJhbSBlcnJvciAtIGVycm9yIHRvIHRocm93XG5cdCogQHBhcmFtIHRvIC0gbG9jYXRpb24gd2Ugd2VyZSBuYXZpZ2F0aW5nIHRvIHdoZW4gdGhlIGVycm9yIGhhcHBlbmVkXG5cdCogQHBhcmFtIGZyb20gLSBsb2NhdGlvbiB3ZSB3ZXJlIG5hdmlnYXRpbmcgZnJvbSB3aGVuIHRoZSBlcnJvciBoYXBwZW5lZFxuXHQqIEByZXR1cm5zIHRoZSBlcnJvciBhcyBhIHJlamVjdGVkIHByb21pc2Vcblx0Ki9cblx0ZnVuY3Rpb24gdHJpZ2dlckVycm9yKGVycm9yLCB0bywgZnJvbSkge1xuXHRcdG1hcmtBc1JlYWR5KGVycm9yKTtcblx0XHRjb25zdCBsaXN0ID0gZXJyb3JMaXN0ZW5lcnMubGlzdCgpO1xuXHRcdGlmIChsaXN0Lmxlbmd0aCkgbGlzdC5mb3JFYWNoKChoYW5kbGVyKSA9PiBoYW5kbGVyKGVycm9yLCB0bywgZnJvbSkpO1xuXHRcdGVsc2Uge1xuXHRcdFx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgd2FybiQxKFwidW5jYXVnaHQgZXJyb3IgZHVyaW5nIHJvdXRlIG5hdmlnYXRpb246XCIpO1xuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0fVxuXHRcdHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG5cdH1cblx0ZnVuY3Rpb24gaXNSZWFkeSgpIHtcblx0XHRpZiAocmVhZHkgJiYgY3VycmVudFJvdXRlLnZhbHVlICE9PSBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlJDEsIHJlamVjdCkgPT4ge1xuXHRcdFx0cmVhZHlIYW5kbGVycy5hZGQoW3Jlc29sdmUkMSwgcmVqZWN0XSk7XG5cdFx0fSk7XG5cdH1cblx0ZnVuY3Rpb24gbWFya0FzUmVhZHkoZXJyKSB7XG5cdFx0aWYgKCFyZWFkeSkge1xuXHRcdFx0cmVhZHkgPSAhZXJyO1xuXHRcdFx0c2V0dXBMaXN0ZW5lcnMoKTtcblx0XHRcdHJlYWR5SGFuZGxlcnMubGlzdCgpLmZvckVhY2goKFtyZXNvbHZlJDEsIHJlamVjdF0pID0+IGVyciA/IHJlamVjdChlcnIpIDogcmVzb2x2ZSQxKCkpO1xuXHRcdFx0cmVhZHlIYW5kbGVycy5yZXNldCgpO1xuXHRcdH1cblx0XHRyZXR1cm4gZXJyO1xuXHR9XG5cdGZ1bmN0aW9uIGhhbmRsZVNjcm9sbCh0bywgZnJvbSwgaXNQdXNoLCBpc0ZpcnN0TmF2aWdhdGlvbikge1xuXHRcdGNvbnN0IHsgc2Nyb2xsQmVoYXZpb3IgfSA9IG9wdGlvbnM7XG5cdFx0aWYgKCFpc0Jyb3dzZXIgfHwgIXNjcm9sbEJlaGF2aW9yKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cdFx0Y29uc3Qgc2Nyb2xsUG9zaXRpb24gPSAhaXNQdXNoICYmIGdldFNhdmVkU2Nyb2xsUG9zaXRpb24oZ2V0U2Nyb2xsS2V5KHRvLmZ1bGxQYXRoLCAwKSkgfHwgKGlzRmlyc3ROYXZpZ2F0aW9uIHx8ICFpc1B1c2gpICYmIGhpc3Rvcnkuc3RhdGUgJiYgaGlzdG9yeS5zdGF0ZS5zY3JvbGwgfHwgbnVsbDtcblx0XHRyZXR1cm4gbmV4dFRpY2soKS50aGVuKCgpID0+IHNjcm9sbEJlaGF2aW9yKHRvLCBmcm9tLCBzY3JvbGxQb3NpdGlvbikpLnRoZW4oKHBvc2l0aW9uKSA9PiBwb3NpdGlvbiAmJiBzY3JvbGxUb1Bvc2l0aW9uKHBvc2l0aW9uKSkuY2F0Y2goKGVycikgPT4gdHJpZ2dlckVycm9yKGVyciwgdG8sIGZyb20pKTtcblx0fVxuXHRjb25zdCBnbyA9IChkZWx0YSkgPT4gcm91dGVySGlzdG9yeS5nbyhkZWx0YSk7XG5cdGxldCBzdGFydGVkO1xuXHRjb25zdCBpbnN0YWxsZWRBcHBzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0Y29uc3Qgcm91dGVyID0ge1xuXHRcdGN1cnJlbnRSb3V0ZSxcblx0XHRsaXN0ZW5pbmc6IHRydWUsXG5cdFx0YWRkUm91dGUsXG5cdFx0cmVtb3ZlUm91dGUsXG5cdFx0Y2xlYXJSb3V0ZXM6IG1hdGNoZXIuY2xlYXJSb3V0ZXMsXG5cdFx0aGFzUm91dGUsXG5cdFx0Z2V0Um91dGVzLFxuXHRcdHJlc29sdmUsXG5cdFx0b3B0aW9ucyxcblx0XHRwdXNoLFxuXHRcdHJlcGxhY2UsXG5cdFx0Z28sXG5cdFx0YmFjazogKCkgPT4gZ28oLTEpLFxuXHRcdGZvcndhcmQ6ICgpID0+IGdvKDEpLFxuXHRcdGJlZm9yZUVhY2g6IGJlZm9yZUd1YXJkcy5hZGQsXG5cdFx0YmVmb3JlUmVzb2x2ZTogYmVmb3JlUmVzb2x2ZUd1YXJkcy5hZGQsXG5cdFx0YWZ0ZXJFYWNoOiBhZnRlckd1YXJkcy5hZGQsXG5cdFx0b25FcnJvcjogZXJyb3JMaXN0ZW5lcnMuYWRkLFxuXHRcdGlzUmVhZHksXG5cdFx0aW5zdGFsbChhcHApIHtcblx0XHRcdGFwcC5jb21wb25lbnQoXCJSb3V0ZXJMaW5rXCIsIFJvdXRlckxpbmspO1xuXHRcdFx0YXBwLmNvbXBvbmVudChcIlJvdXRlclZpZXdcIiwgUm91dGVyVmlldyk7XG5cdFx0XHRhcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMuJHJvdXRlciA9IHJvdXRlcjtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMsIFwiJHJvdXRlXCIsIHtcblx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdFx0Z2V0OiAoKSA9PiB1bnJlZihjdXJyZW50Um91dGUpXG5cdFx0XHR9KTtcblx0XHRcdGlmIChpc0Jyb3dzZXIgJiYgIXN0YXJ0ZWQgJiYgY3VycmVudFJvdXRlLnZhbHVlID09PSBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEKSB7XG5cdFx0XHRcdHN0YXJ0ZWQgPSB0cnVlO1xuXHRcdFx0XHRwdXNoKHJvdXRlckhpc3RvcnkubG9jYXRpb24pLmNhdGNoKChlcnIpID0+IHtcblx0XHRcdFx0XHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB3YXJuJDEoXCJVbmV4cGVjdGVkIGVycm9yIHdoZW4gc3RhcnRpbmcgdGhlIHJvdXRlcjpcIiwgZXJyKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCByZWFjdGl2ZVJvdXRlID0ge307XG5cdFx0XHRmb3IgKGNvbnN0IGtleSBpbiBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEKSBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVhY3RpdmVSb3V0ZSwga2V5LCB7XG5cdFx0XHRcdGdldDogKCkgPT4gY3VycmVudFJvdXRlLnZhbHVlW2tleV0sXG5cdFx0XHRcdGVudW1lcmFibGU6IHRydWVcblx0XHRcdH0pO1xuXHRcdFx0YXBwLnByb3ZpZGUocm91dGVyS2V5LCByb3V0ZXIpO1xuXHRcdFx0YXBwLnByb3ZpZGUocm91dGVMb2NhdGlvbktleSwgc2hhbGxvd1JlYWN0aXZlKHJlYWN0aXZlUm91dGUpKTtcblx0XHRcdGFwcC5wcm92aWRlKHJvdXRlclZpZXdMb2NhdGlvbktleSwgY3VycmVudFJvdXRlKTtcblx0XHRcdGNvbnN0IHVubW91bnRBcHAgPSBhcHAudW5tb3VudDtcblx0XHRcdGluc3RhbGxlZEFwcHMuYWRkKGFwcCk7XG5cdFx0XHRhcHAudW5tb3VudCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpbnN0YWxsZWRBcHBzLmRlbGV0ZShhcHApO1xuXHRcdFx0XHRpZiAoaW5zdGFsbGVkQXBwcy5zaXplIDwgMSkge1xuXHRcdFx0XHRcdHBlbmRpbmdMb2NhdGlvbiA9IFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQ7XG5cdFx0XHRcdFx0cmVtb3ZlSGlzdG9yeUxpc3RlbmVyICYmIHJlbW92ZUhpc3RvcnlMaXN0ZW5lcigpO1xuXHRcdFx0XHRcdHJlbW92ZUhpc3RvcnlMaXN0ZW5lciA9IG51bGw7XG5cdFx0XHRcdFx0Y3VycmVudFJvdXRlLnZhbHVlID0gU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRDtcblx0XHRcdFx0XHRzdGFydGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0cmVhZHkgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHR1bm1vdW50QXBwKCk7XG5cdFx0XHR9O1xuXHRcdFx0aWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSAmJiBpc0Jyb3dzZXIpIGFkZERldnRvb2xzKGFwcCwgcm91dGVyLCBtYXRjaGVyKTtcblx0XHR9XG5cdH07XG5cdGZ1bmN0aW9uIHJ1bkd1YXJkUXVldWUoZ3VhcmRzKSB7XG5cdFx0cmV0dXJuIGd1YXJkcy5yZWR1Y2UoKHByb21pc2UsIGd1YXJkKSA9PiBwcm9taXNlLnRoZW4oKCkgPT4gcnVuV2l0aENvbnRleHQoZ3VhcmQpKSwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuXHR9XG5cdHJldHVybiByb3V0ZXI7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy91c2VBcGkudHNcbi8qKlxuKiBSZXR1cm5zIHRoZSByb3V0ZXIgaW5zdGFuY2UuIEVxdWl2YWxlbnQgdG8gdXNpbmcgYCRyb3V0ZXJgIGluc2lkZVxuKiB0ZW1wbGF0ZXMuXG4qL1xuZnVuY3Rpb24gdXNlUm91dGVyKCkge1xuXHRyZXR1cm4gaW5qZWN0KHJvdXRlcktleSk7XG59XG4vKipcbiogUmV0dXJucyB0aGUgY3VycmVudCByb3V0ZSBsb2NhdGlvbi4gRXF1aXZhbGVudCB0byB1c2luZyBgJHJvdXRlYCBpbnNpZGVcbiogdGVtcGxhdGVzLlxuKi9cbmZ1bmN0aW9uIHVzZVJvdXRlKF9uYW1lKSB7XG5cdHJldHVybiBpbmplY3Qocm91dGVMb2NhdGlvbktleSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgTmF2aWdhdGlvbkZhaWx1cmVUeXBlLCBSb3V0ZXJMaW5rLCBSb3V0ZXJWaWV3LCBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEIGFzIFNUQVJUX0xPQ0FUSU9OLCBjcmVhdGVNZW1vcnlIaXN0b3J5LCBjcmVhdGVSb3V0ZXIsIGNyZWF0ZVJvdXRlck1hdGNoZXIsIGNyZWF0ZVdlYkhhc2hIaXN0b3J5LCBjcmVhdGVXZWJIaXN0b3J5LCBpc05hdmlnYXRpb25GYWlsdXJlLCBsb2FkUm91dGVMb2NhdGlvbiwgbWF0Y2hlZFJvdXRlS2V5LCBvbkJlZm9yZVJvdXRlTGVhdmUsIG9uQmVmb3JlUm91dGVVcGRhdGUsIHBhcnNlUXVlcnksIHJvdXRlTG9jYXRpb25LZXksIHJvdXRlcktleSwgcm91dGVyVmlld0xvY2F0aW9uS2V5LCBzdHJpbmdpZnlRdWVyeSwgdXNlTGluaywgdXNlUm91dGUsIHVzZVJvdXRlciwgdmlld0RlcHRoS2V5IH07IiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IHByb3h5Q3VzdG9tRWxlbWVudCwgSFRNTEVsZW1lbnQsIEJ1aWxkLCBoLCBIb3N0IH0gZnJvbSAnQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9jbGllbnQnO1xuaW1wb3J0IHsgc2hvdWxkVXNlQ2xvc2VXYXRjaGVyIH0gZnJvbSAnLi9oYXJkd2FyZS1iYWNrLWJ1dHRvbi5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbmZpZywgcCBhcyBwcmludElvbldhcm5pbmcgfSBmcm9tICcuL2luZGV4NC5qcyc7XG5pbXBvcnQgeyBiIGFzIGdldElvbk1vZGUsIGEgYXMgaXNQbGF0Zm9ybSB9IGZyb20gJy4vaW9uaWMtZ2xvYmFsLmpzJztcblxuY29uc3QgYXBwQ3NzID0gXCJodG1sLnBsdC1tb2JpbGUgaW9uLWFwcHstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmV9aHRtbC5wbHQtbW9iaWxlIGlvbi1hcHAgW2NvbnRlbnRlZGl0YWJsZV17LXdlYmtpdC11c2VyLXNlbGVjdDp0ZXh0Oy1tb3otdXNlci1zZWxlY3Q6dGV4dDstbXMtdXNlci1zZWxlY3Q6dGV4dDt1c2VyLXNlbGVjdDp0ZXh0fWlvbi1hcHAuZm9yY2Utc3RhdHVzYmFyLXBhZGRpbmd7LS1pb24tc2FmZS1hcmVhLXRvcDoyMHB4fVwiO1xuXG5jb25zdCBBcHAgPSAvKkBfX1BVUkVfXyovIHByb3h5Q3VzdG9tRWxlbWVudChjbGFzcyBBcHAgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IocmVnaXN0ZXJIb3N0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGlmIChyZWdpc3Rlckhvc3QgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLl9fcmVnaXN0ZXJIb3N0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICAgICAgaWYgKEJ1aWxkLmlzQnJvd3Nlcikge1xuICAgICAgICAgICAgcklDKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0h5YnJpZCA9IGlzUGxhdGZvcm0od2luZG93LCAnaHlicmlkJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFjb25maWcuZ2V0Qm9vbGVhbignX3Rlc3RpbmcnKSkge1xuICAgICAgICAgICAgICAgICAgICBpbXBvcnQoJy4vaW5kZXg3LmpzJykudGhlbigobW9kdWxlKSA9PiBtb2R1bGUuc3RhcnRUYXBDbGljayhjb25maWcpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5nZXRCb29sZWFuKCdzdGF0dXNUYXAnLCBpc0h5YnJpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1wb3J0KCcuL3N0YXR1cy10YXAuanMnKS50aGVuKChtb2R1bGUpID0+IG1vZHVsZS5zdGFydFN0YXR1c1RhcCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5nZXRCb29sZWFuKCdpbnB1dFNoaW1zJywgbmVlZElucHV0U2hpbXMoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIG5lZWRJbnB1dFNoaW1zKCkgZW5zdXJlcyB0aGF0IG9ubHkgaU9TIGFuZCBBbmRyb2lkXG4gICAgICAgICAgICAgICAgICAgICAqIHBsYXRmb3JtcyBwcm9jZWVkIGludG8gdGhpcyBibG9jay5cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBsYXRmb3JtID0gaXNQbGF0Zm9ybSh3aW5kb3csICdpb3MnKSA/ICdpb3MnIDogJ2FuZHJvaWQnO1xuICAgICAgICAgICAgICAgICAgICBpbXBvcnQoJy4vaW5wdXQtc2hpbXMuanMnKS50aGVuKChtb2R1bGUpID0+IG1vZHVsZS5zdGFydElucHV0U2hpbXMoY29uZmlnLCBwbGF0Zm9ybSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBoYXJkd2FyZUJhY2tCdXR0b25Nb2R1bGUgPSBhd2FpdCBpbXBvcnQoJy4vaGFyZHdhcmUtYmFjay1idXR0b24uanMnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdXBwb3J0c0hhcmR3YXJlQmFja0J1dHRvbkV2ZW50cyA9IGlzSHlicmlkIHx8IHNob3VsZFVzZUNsb3NlV2F0Y2hlcigpO1xuICAgICAgICAgICAgICAgIGlmIChjb25maWcuZ2V0Qm9vbGVhbignaGFyZHdhcmVCYWNrQnV0dG9uJywgc3VwcG9ydHNIYXJkd2FyZUJhY2tCdXR0b25FdmVudHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhcmR3YXJlQmFja0J1dHRvbk1vZHVsZS5zdGFydEhhcmR3YXJlQmFja0J1dHRvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIElmIGFuIGFwcCBzZXRzIGhhcmR3YXJlQmFja0J1dHRvbjogZmFsc2UgYW5kIGV4cGVyaW1lbnRhbENsb3NlV2F0Y2hlcjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgKiB0aGVuIHRoZSBjbG9zZSB3YXRjaGVyIHdpbGwgbm90IGJlIHVzZWQuXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkVXNlQ2xvc2VXYXRjaGVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50SW9uV2FybmluZygnW2lvbi1hcHBdIC0gZXhwZXJpbWVudGFsQ2xvc2VXYXRjaGVyIHdhcyBzZXQgdG8gYHRydWVgLCBidXQgaGFyZHdhcmVCYWNrQnV0dG9uIHdhcyBzZXQgdG8gYGZhbHNlYC4gQm90aCBjb25maWcgb3B0aW9ucyBtdXN0IGJlIGB0cnVlYCBmb3IgdGhlIENsb3NlIFdhdGNoZXIgQVBJIHRvIGJlIHVzZWQuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaGFyZHdhcmVCYWNrQnV0dG9uTW9kdWxlLmJsb2NrSGFyZHdhcmVCYWNrQnV0dG9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBpbXBvcnQoJy4va2V5Ym9hcmQuanMnKS50aGVuKChtb2R1bGUpID0+IG1vZHVsZS5zdGFydEtleWJvYXJkQXNzaXN0KHdpbmRvdykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbXBvcnQoJy4vZm9jdXMtdmlzaWJsZS5qcycpLnRoZW4oKG1vZHVsZSkgPT4gKHRoaXMuZm9jdXNWaXNpYmxlID0gbW9kdWxlLnN0YXJ0Rm9jdXNWaXNpYmxlKCkpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gc2V0IGZvY3VzIG9uIGFuIGVsZW1lbnQgdGhhdCB1c2VzIGBpb24tZm9jdXNhYmxlYC5cbiAgICAgKiBEbyBub3QgdXNlIHRoaXMgaWYgZm9jdXNpbmcgdGhlIGVsZW1lbnQgYXMgYSByZXN1bHQgb2YgYSBrZXlib2FyZFxuICAgICAqIGV2ZW50IGFzIHRoZSBmb2N1cyB1dGlsaXR5IHNob3VsZCBoYW5kbGUgdGhpcyBmb3IgdXMuIFRoaXMgbWV0aG9kXG4gICAgICogc2hvdWxkIGJlIHVzZWQgd2hlbiB3ZSB3YW50IHRvIHByb2dyYW1tYXRpY2FsbHkgZm9jdXMgYW4gZWxlbWVudCBhc1xuICAgICAqIGEgcmVzdWx0IG9mIGFub3RoZXIgdXNlciBhY3Rpb24uIChFeDogV2UgZm9jdXMgdGhlIGZpcnN0IGVsZW1lbnRcbiAgICAgKiBpbnNpZGUgb2YgYSBwb3BvdmVyIHdoZW4gdGhlIHVzZXIgcHJlc2VudHMgaXQsIGJ1dCB0aGUgcG9wb3ZlciBpcyBub3QgYWx3YXlzXG4gICAgICogcHJlc2VudGVkIGFzIGEgcmVzdWx0IG9mIGtleWJvYXJkIGFjdGlvbi4pXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudHMgQW4gYXJyYXkgb2YgSFRNTCBlbGVtZW50cyB0byBzZXQgZm9jdXMgb24uXG4gICAgICovXG4gICAgYXN5bmMgc2V0Rm9jdXMoZWxlbWVudHMpIHtcbiAgICAgICAgaWYgKHRoaXMuZm9jdXNWaXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzVmlzaWJsZS5zZXRGb2N1cyhlbGVtZW50cyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIChoKEhvc3QsIHsga2V5OiAnOWJlNDQwYzY1ODE5ZTRmYTY3YzJjM2M2NDc3YWI0MGIzYWQzZWVkMycsIGNsYXNzOiB7XG4gICAgICAgICAgICAgICAgW21vZGVdOiB0cnVlLFxuICAgICAgICAgICAgICAgICdpb24tcGFnZSc6IHRydWUsXG4gICAgICAgICAgICAgICAgJ2ZvcmNlLXN0YXR1c2Jhci1wYWRkaW5nJzogY29uZmlnLmdldEJvb2xlYW4oJ19mb3JjZVN0YXR1c2JhclBhZGRpbmcnKSxcbiAgICAgICAgICAgIH0gfSkpO1xuICAgIH1cbiAgICBnZXQgZWwoKSB7IHJldHVybiB0aGlzOyB9XG4gICAgc3RhdGljIGdldCBzdHlsZSgpIHsgcmV0dXJuIGFwcENzczsgfVxufSwgWzI1NiwgXCJpb24tYXBwXCIsIHtcbiAgICAgICAgXCJzZXRGb2N1c1wiOiBbNjRdXG4gICAgfV0pO1xuY29uc3QgbmVlZElucHV0U2hpbXMgPSAoKSA9PiB7XG4gICAgLyoqXG4gICAgICogaU9TIGFsd2F5cyBuZWVkcyBpbnB1dCBzaGltc1xuICAgICAqL1xuICAgIGNvbnN0IG5lZWRzU2hpbXNJT1MgPSBpc1BsYXRmb3JtKHdpbmRvdywgJ2lvcycpICYmIGlzUGxhdGZvcm0od2luZG93LCAnbW9iaWxlJyk7XG4gICAgaWYgKG5lZWRzU2hpbXNJT1MpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFuZHJvaWQgb25seSBuZWVkcyBpbnB1dCBzaGltcyB3aGVuIHJ1bm5pbmdcbiAgICAgKiBpbiB0aGUgYnJvd3NlciBhbmQgb25seSBpZiB0aGUgYnJvd3NlciBpcyB1c2luZyB0aGVcbiAgICAgKiBuZXcgQ2hyb21lIDEwOCsgcmVzaXplIGJlaGF2aW9yOiBodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2Jsb2cvdmlld3BvcnQtcmVzaXplLWJlaGF2aW9yL1xuICAgICAqL1xuICAgIGNvbnN0IGlzQW5kcm9pZE1vYmlsZVdlYiA9IGlzUGxhdGZvcm0od2luZG93LCAnYW5kcm9pZCcpICYmIGlzUGxhdGZvcm0od2luZG93LCAnbW9iaWxld2ViJyk7XG4gICAgaWYgKGlzQW5kcm9pZE1vYmlsZVdlYikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbmNvbnN0IHJJQyA9IChjYWxsYmFjaykgPT4ge1xuICAgIGlmICgncmVxdWVzdElkbGVDYWxsYmFjaycgaW4gd2luZG93KSB7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0SWRsZUNhbGxiYWNrKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIDMyKTtcbiAgICB9XG59O1xuZnVuY3Rpb24gZGVmaW5lQ3VzdG9tRWxlbWVudCQxKCkge1xuICAgIGlmICh0eXBlb2YgY3VzdG9tRWxlbWVudHMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb21wb25lbnRzID0gW1wiaW9uLWFwcFwiXTtcbiAgICBjb21wb25lbnRzLmZvckVhY2godGFnTmFtZSA9PiB7IHN3aXRjaCAodGFnTmFtZSkge1xuICAgICAgICBjYXNlIFwiaW9uLWFwcFwiOlxuICAgICAgICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUodGFnTmFtZSwgQXBwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH0gfSk7XG59XG5cbmNvbnN0IElvbkFwcCA9IEFwcDtcbmNvbnN0IGRlZmluZUN1c3RvbUVsZW1lbnQgPSBkZWZpbmVDdXN0b21FbGVtZW50JDE7XG5cbmV4cG9ydCB7IElvbkFwcCwgZGVmaW5lQ3VzdG9tRWxlbWVudCB9O1xuIiwiaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCByZWYsIG9uTW91bnRlZCwgZ2V0Q3VycmVudEluc3RhbmNlLCBpbmplY3QsIGgsIHdpdGhEaXJlY3RpdmVzLCBjb21wdXRlZCwgcHJvdmlkZSwgc2hhbGxvd1JlZiwgd2F0Y2gsIG9uVW5tb3VudGVkLCBGcmFnbWVudCwgaXNWTm9kZSwgVGVsZXBvcnQgfSBmcm9tICd2dWUnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWFjY29yZGlvbi5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMSB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWFjY29yZGlvbi1ncm91cC5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMiB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWF2YXRhci5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMyB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWJhY2tkcm9wLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQ0IH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tYmFkZ2UuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDUgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1icmVhZGNydW1iLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQ2IH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tYnJlYWRjcnVtYnMuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDcgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1idXR0b24uanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDggfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1idXR0b25zLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQ5IH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tY2FyZC5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkYSB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWNhcmQtY29udGVudC5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkYiB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWNhcmQtaGVhZGVyLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCRjIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tY2FyZC1zdWJ0aXRsZS5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkZCB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWNhcmQtdGl0bGUuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JGUgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1jaGVja2JveC5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkZiB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWNoaXAuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JGcgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1jb2wuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JGggfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1jb250ZW50LmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCRpIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tZGF0ZXRpbWUuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JGogfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1kYXRldGltZS1idXR0b24uanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JGsgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1mYWIuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JGwgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1mYWItYnV0dG9uLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCRtIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tZmFiLWxpc3QuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JG4gfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1mb290ZXIuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JG8gfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1ncmlkLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCRwIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24taGVhZGVyLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCRxIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24taW1nLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCRyIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24taW5maW5pdGUtc2Nyb2xsLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCRzIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24taW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JHQgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1pbnB1dC5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkdSB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWlucHV0LW90cC5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkdiB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWlucHV0LXBhc3N3b3JkLXRvZ2dsZS5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkdyB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWl0ZW0uanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JHggfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1pdGVtLWRpdmlkZXIuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JHkgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1pdGVtLWdyb3VwLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCR6IH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24taXRlbS1vcHRpb24uanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JEEgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1pdGVtLW9wdGlvbnMuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JEIgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1pdGVtLXNsaWRpbmcuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JEMgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1sYWJlbC5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkRCB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWxpc3QuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JEUgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1saXN0LWhlYWRlci5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkRiB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLW1lbnUuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JEcgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1tZW51LWJ1dHRvbi5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkSCB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLW1lbnUtdG9nZ2xlLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQxaiB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLW5hdi5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkSSB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLW5hdi1saW5rLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCRKIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tbm90ZS5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkSyB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLXBpY2tlci5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkTCB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLXBpY2tlci1jb2x1bW4uanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JE0gfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1waWNrZXItY29sdW1uLW9wdGlvbi5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkTiB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLXByb2dyZXNzLWJhci5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkTyB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLXJhZGlvLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCRQIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tcmFkaW8tZ3JvdXAuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JFEgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1yYW5nZS5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkUiB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLXJlZnJlc2hlci5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkUyB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLXJlZnJlc2hlci1jb250ZW50LmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCRUIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tcmVvcmRlci5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkVSB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLXJlb3JkZXItZ3JvdXAuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JFYgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1yaXBwbGUtZWZmZWN0LmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCRXIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tcm93LmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCRYIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tc2VhcmNoYmFyLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCRZIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tc2VnbWVudC5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkWiB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLXNlZ21lbnQtYnV0dG9uLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCRfIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tc2VnbWVudC1jb250ZW50LmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQkIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tc2VnbWVudC12aWV3LmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQxMCB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLXNlbGVjdC5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMTEgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1zZWxlY3QtbW9kYWwuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDEyIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tc2VsZWN0LW9wdGlvbi5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMTMgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1za2VsZXRvbi10ZXh0LmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQxNCB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLXNwaW5uZXIuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDE1IH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tc3BsaXQtcGFuZS5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMTYgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi10YWIuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDE3IH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tdGV4dC5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMTggfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi10ZXh0YXJlYS5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMTkgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi10aHVtYm5haWwuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDFhIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tdGl0bGUuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDFiIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tdG9nZ2xlLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQxYyB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLXRvb2xiYXIuanMnO1xuaW1wb3J0IHsgTElGRUNZQ0xFX1dJTExfRU5URVIsIExJRkVDWUNMRV9ESURfRU5URVIsIExJRkVDWUNMRV9XSUxMX0xFQVZFLCBMSUZFQ1lDTEVfRElEX0xFQVZFLCBpbml0aWFsaXplLCBtb2RhbENvbnRyb2xsZXIgYXMgbW9kYWxDb250cm9sbGVyJDEsIHBvcG92ZXJDb250cm9sbGVyIGFzIHBvcG92ZXJDb250cm9sbGVyJDEsIGFsZXJ0Q29udHJvbGxlciBhcyBhbGVydENvbnRyb2xsZXIkMSwgYWN0aW9uU2hlZXRDb250cm9sbGVyIGFzIGFjdGlvblNoZWV0Q29udHJvbGxlciQxLCBsb2FkaW5nQ29udHJvbGxlciBhcyBsb2FkaW5nQ29udHJvbGxlciQxLCBwaWNrZXJDb250cm9sbGVyIGFzIHBpY2tlckNvbnRyb2xsZXIkMSwgdG9hc3RDb250cm9sbGVyIGFzIHRvYXN0Q29udHJvbGxlciQxIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cyc7XG5leHBvcnQgeyBJb25pY1NhZmVTdHJpbmcsIElvbmljU2xpZGVzLCBjcmVhdGVBbmltYXRpb24sIGNyZWF0ZUdlc3R1cmUsIGdldElvblBhZ2VFbGVtZW50LCBnZXRQbGF0Zm9ybXMsIGdldFRpbWVHaXZlblByb2dyZXNzaW9uLCBpb3NUcmFuc2l0aW9uQW5pbWF0aW9uLCBpc1BsYXRmb3JtLCBtZFRyYW5zaXRpb25BbmltYXRpb24sIG1lbnVDb250cm9sbGVyLCBvcGVuVVJMIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMWQgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1iYWNrLWJ1dHRvbi5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMWUgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1yb3V0ZXItb3V0bGV0LmpzJztcbmltcG9ydCB7IHJvdXRlTG9jYXRpb25LZXksIHVzZVJvdXRlLCBtYXRjaGVkUm91dGVLZXkgfSBmcm9tICd2dWUtcm91dGVyJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQxZiB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLXRhYi1idXR0b24uanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDFnIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tdGFicy5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMWggfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi10YWItYmFyLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQxaSB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWFwcC5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMWsgfSBmcm9tICdpb25pY29ucy9jb21wb25lbnRzL2lvbi1pY29uLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQxbCB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLWFjdGlvbi1zaGVldC5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMW0gfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1hbGVydC5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMW4gfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi1sb2FkaW5nLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQxbyB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLW1vZGFsLmpzJztcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQxcCB9IGZyb20gJ0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW9uLXBpY2tlci1sZWdhY3kuanMnO1xuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDFxIH0gZnJvbSAnQGlvbmljL2NvcmUvY29tcG9uZW50cy9pb24tcG9wb3Zlci5qcyc7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMXIgfSBmcm9tICdAaW9uaWMvY29yZS9jb21wb25lbnRzL2lvbi10b2FzdC5qcyc7XG5cbmNvbnN0IFVQREFURV9WQUxVRV9FVkVOVCA9ICd1cGRhdGU6bW9kZWxWYWx1ZSc7XG5jb25zdCBNT0RFTF9WQUxVRSA9ICdtb2RlbFZhbHVlJztcbmNvbnN0IFJPVVRFUl9MSU5LX1ZBTFVFID0gJ3JvdXRlckxpbmsnO1xuY29uc3QgTkFWX01BTkFHRVIgPSAnbmF2TWFuYWdlcic7XG5jb25zdCBST1VURVJfUFJPUF9QUkVGSVggPSAncm91dGVyJztcbmNvbnN0IEFSSUFfUFJPUF9QUkVGSVggPSAnYXJpYSc7XG4vKipcbiAqIFN0YXJ0aW5nIGluIFZ1ZSAzLjEuMCwgYWxsIHByb3BlcnRpZXMgYXJlXG4gKiBhZGRlZCBhcyBrZXlzIHRvIHRoZSBwcm9wcyBvYmplY3QsIGV2ZW4gaWZcbiAqIHRoZXkgYXJlIG5vdCBiZWluZyB1c2VkLiBJbiBvcmRlciB0byBjb3JyZWN0bHlcbiAqIGFjY291bnQgZm9yIGJvdGggdmFsdWUgcHJvcHMgYW5kIHYtbW9kZWwgcHJvcHMsXG4gKiB3ZSBuZWVkIHRvIGNoZWNrIGlmIHRoZSBrZXkgZXhpc3RzIGZvciBWdWUgPDMuMS4wXG4gKiBhbmQgdGhlbiBjaGVjayBpZiBpdCBpcyBub3QgdW5kZWZpbmVkIGZvciBWdWUgPj0gMy4xLjAuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1uZXh0L2lzc3Vlcy8zODg5XG4gKi9cbmNvbnN0IEVNUFRZX1BST1AkMSA9IFN5bWJvbCgpO1xuY29uc3QgREVGQVVMVF9FTVBUWV9QUk9QJDEgPSB7IGRlZmF1bHQ6IEVNUFRZX1BST1AkMSB9O1xuY29uc3QgZ2V0Q29tcG9uZW50Q2xhc3NlcyA9IChjbGFzc2VzKSA9PiB7XG4gICAgcmV0dXJuIGNsYXNzZXM/LnNwbGl0KCcgJykgfHwgW107XG59O1xuY29uc3QgZ2V0RWxlbWVudENsYXNzZXMgPSAocmVmLCBjb21wb25lbnRDbGFzc2VzLCBkZWZhdWx0Q2xhc3NlcyA9IFtdKSA9PiB7XG4gICAgcmV0dXJuIFsuLi5BcnJheS5mcm9tKHJlZi52YWx1ZT8uY2xhc3NMaXN0IHx8IFtdKSwgLi4uZGVmYXVsdENsYXNzZXNdLmZpbHRlcigoYywgaSwgc2VsZikgPT4gIWNvbXBvbmVudENsYXNzZXMuaGFzKGMpICYmIHNlbGYuaW5kZXhPZihjKSA9PT0gaSk7XG59O1xuLyoqXG4gKiBDcmVhdGUgYSBjYWxsYmFjayB0byBkZWZpbmUgYSBWdWUgY29tcG9uZW50IHdyYXBwZXIgYXJvdW5kIGEgV2ViIENvbXBvbmVudC5cbiAqXG4gKiBAcHJvcCBuYW1lIC0gVGhlIGNvbXBvbmVudCB0YWcgbmFtZSAoaS5lLiBgaW9uLWJ1dHRvbmApXG4gKiBAcHJvcCBjb21wb25lbnRQcm9wcyAtIEFuIGFycmF5IG9mIHByb3BlcnRpZXMgb24gdGhlXG4gKiBjb21wb25lbnQuIFRoZXNlIHVzdWFsbHkgbWF0Y2ggdXAgd2l0aCB0aGUgQFByb3AgZGVmaW5pdGlvbnNcbiAqIGluIGVhY2ggY29tcG9uZW50J3MgVFNYIGZpbGUuXG4gKiBAcHJvcCBlbWl0UHJvcHMgLSBBbiBhcnJheSBvZiBmb3IgZXZlbnQgbGlzdGVuZXIgb24gdGhlIENvbXBvbmVudC5cbiAqIHRoZXNlIHVzdWFsbHkgbWF0Y2ggdXAgd2l0aCB0aGUgQEV2ZW50IGRlZmluaXRpb25zXG4gKiBpbiBlYWNoIGNvbXBvbnQncyBUU1ggZmlsZS5cbiAqIEBwcm9wIGN1c3RvbUVsZW1lbnQgLSBBbiBvcHRpb24gY3VzdG9tIGVsZW1lbnQgaW5zdGFuY2UgdG8gcGFzc1xuICogdG8gY3VzdG9tRWxlbWVudHMuZGVmaW5lLiBPbmx5IHNldCBpZiBgaW5jbHVkZUltcG9ydEN1c3RvbUVsZW1lbnRzOiB0cnVlYCBpbiB5b3VyIGNvbmZpZy5cbiAqIEBwcm9wIG1vZGVsUHJvcCAtIFRoZSBwcm9wIHRoYXQgdi1tb2RlbCBiaW5kcyB0byAoaS5lLiB2YWx1ZSlcbiAqIEBwcm9wIG1vZGVsVXBkYXRlRXZlbnQgLSBUaGUgZXZlbnQgdGhhdCBpcyBmaXJlZCBmcm9tIHlvdXIgV2ViIENvbXBvbmVudCB3aGVuIHRoZSB2YWx1ZSBjaGFuZ2VzIChpLmUuIGlvbkNoYW5nZSlcbiAqL1xuY29uc3QgZGVmaW5lQ29udGFpbmVyID0gKG5hbWUsIGRlZmluZUN1c3RvbUVsZW1lbnQsIGNvbXBvbmVudFByb3BzID0gW10sIGVtaXRQcm9wcyA9IFtdLCBtb2RlbFByb3AsIG1vZGVsVXBkYXRlRXZlbnQpID0+IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBWdWUgY29tcG9uZW50IHdyYXBwZXIgYXJvdW5kIGEgV2ViIENvbXBvbmVudC5cbiAgICAgKiBOb3RlOiBUaGUgYHByb3BzYCBoZXJlIGFyZSBub3QgYWxsIHByb3BlcnRpZXMgb24gYSBjb21wb25lbnQuXG4gICAgICogVGhleSByZWZlciB0byB3aGF0ZXZlciBwcm9wZXJ0aWVzIGFyZSBzZXQgb24gYW4gaW5zdGFuY2Ugb2YgYSBjb21wb25lbnQuXG4gICAgICovXG4gICAgaWYgKGRlZmluZUN1c3RvbUVsZW1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50KCk7XG4gICAgfVxuICAgIGNvbnN0IGVtaXRzID0gZW1pdFByb3BzO1xuICAgIGNvbnN0IHByb3BzID0gW1JPVVRFUl9MSU5LX1ZBTFVFLCAuLi5jb21wb25lbnRQcm9wc10ucmVkdWNlKChhY2MsIHByb3ApID0+IHtcbiAgICAgICAgYWNjW3Byb3BdID0gREVGQVVMVF9FTVBUWV9QUk9QJDE7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICAgIGlmIChtb2RlbFByb3ApIHtcbiAgICAgICAgZW1pdHMucHVzaChVUERBVEVfVkFMVUVfRVZFTlQpO1xuICAgICAgICBwcm9wc1tNT0RFTF9WQUxVRV0gPSBERUZBVUxUX0VNUFRZX1BST1AkMTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmluZUNvbXBvbmVudCgocHJvcHMsIHsgYXR0cnMsIHNsb3RzLCBlbWl0IH0pID0+IHtcbiAgICAgICAgbGV0IG1vZGVsUHJvcFZhbHVlID0gbW9kZWxQcm9wID8gcHJvcHNbbW9kZWxQcm9wXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgY29udGFpbmVyUmVmID0gcmVmKCk7XG4gICAgICAgIGNvbnN0IGNsYXNzZXMgPSBuZXcgU2V0KGdldENvbXBvbmVudENsYXNzZXMoYXR0cnMuY2xhc3MpKTtcbiAgICAgICAgb25Nb3VudGVkKCgpID0+IHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogd2UgcmVnaXN0ZXIgdGhlIGV2ZW50IGVtbWl0ZXIgZm9yIEBFdmVudCBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICogc28gd2UgY2FuIHVzZSBAZXZlbnRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZW1pdFByb3BzLmZvckVhY2goKGV2ZW50TmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lclJlZi52YWx1ZT8uYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVtaXQoZXZlbnROYW1lLCBlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgZGlyZWN0aXZlIGlzIHJlc3BvbnNpYmxlIGZvciB1cGRhdGluZyBhbnkgcmVhY3RpdmVcbiAgICAgICAgICogcmVmZXJlbmNlIGFzc29jaWF0ZWQgd2l0aCB2LW1vZGVsIG9uIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqIFRoaXMgY29kZSBtdXN0IGJlIHJ1biBpbnNpZGUgb2YgdGhlIFwiY3JlYXRlZFwiIGNhbGxiYWNrLlxuICAgICAgICAgKiBTaW5jZSB0aGUgZm9sbG93aW5nIGxpc3RlbmVyIGNhbGxiYWNrcyBhcyB3ZWxsIGFzIGFueSBwb3RlbnRpYWxcbiAgICAgICAgICogZXZlbnQgY2FsbGJhY2sgZGVmaW5lZCBpbiB0aGUgZGV2ZWxvcGVyJ3MgYXBwIGFyZSBzZXQgb25cbiAgICAgICAgICogdGhlIHNhbWUgZWxlbWVudCwgd2UgbmVlZCB0byBtYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBjYWxsYmFja3NcbiAgICAgICAgICogYXJlIHNldCBmaXJzdCBzbyB0aGV5IGZpcmUgZmlyc3QuIElmIHRoZSBkZXZlbG9wZXIncyBjYWxsYmFjayBmaXJlcyBmaXJzdFxuICAgICAgICAgKiB0aGVuIHRoZSByZWFjdGl2ZSByZWZlcmVuY2Ugd2lsbCBub3QgaGF2ZSBiZWVuIHVwZGF0ZWQgeWV0LlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3Qgdk1vZGVsRGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgY3JlYXRlZDogKGVsKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnRzTmFtZXMgPSAoQXJyYXkuaXNBcnJheShtb2RlbFVwZGF0ZUV2ZW50KSA/IG1vZGVsVXBkYXRlRXZlbnQgOiBbbW9kZWxVcGRhdGVFdmVudF0pLm1hcCgoZXYpID0+IGV2LnJlcGxhY2UoLy0oW2Etel0pL2csIChnKSA9PiBnWzFdLnRvVXBwZXJDYXNlKCkpKTtcbiAgICAgICAgICAgICAgICBldmVudHNOYW1lcy5mb3JFYWNoKChldmVudE5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIE9ubHkgdXBkYXRlIHRoZSB2LW1vZGVsIGJpbmRpbmcgaWYgdGhlIGV2ZW50J3MgdGFyZ2V0IGlzIHRoZSBlbGVtZW50IHdlIGFyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICogbGlzdGVuaW5nIG9uLiBGb3IgZXhhbXBsZSwgQ29tcG9uZW50IEEgY291bGQgZW1pdCBpb25DaGFuZ2UsIGJ1dCBpdCBjb3VsZCBhbHNvXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBoYXZlIGEgZGVzY2VuZGFudCBDb21wb25lbnQgQiB0aGF0IGFsc28gZW1pdHMgaW9uQ2hhbmdlLiBXZSBvbmx5IHdhbnQgdG8gdXBkYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiB0aGUgdi1tb2RlbCBmb3IgQ29tcG9uZW50IEEgd2hlbiBpb25DaGFuZ2Ugb3JpZ2luYXRlcyBmcm9tIHRoYXQgZWxlbWVudCBhbmQgbm90XG4gICAgICAgICAgICAgICAgICAgICAgICAgKiB3aGVuIGlvbkNoYW5nZSBidWJibGVzIHVwIGZyb20gQ29tcG9uZW50IEIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lID09PSBlbC50YWdOYW1lICYmIG1vZGVsUHJvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsUHJvcFZhbHVlID0gKGU/LnRhcmdldClbbW9kZWxQcm9wXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWl0KFVQREFURV9WQUxVRV9FVkVOVCwgbW9kZWxQcm9wVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGN1cnJlbnRJbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgICAgICBjb25zdCBoYXNSb3V0ZXIgPSBjdXJyZW50SW5zdGFuY2U/LmFwcENvbnRleHQ/LnByb3ZpZGVzW05BVl9NQU5BR0VSXTtcbiAgICAgICAgY29uc3QgbmF2TWFuYWdlciA9IGhhc1JvdXRlciA/IGluamVjdChOQVZfTUFOQUdFUikgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGhhbmRsZVJvdXRlckxpbmsgPSAoZXYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgcm91dGVyTGluayB9ID0gcHJvcHM7XG4gICAgICAgICAgICBpZiAocm91dGVyTGluayA9PT0gRU1QVFlfUFJPUCQxKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmIChuYXZNYW5hZ2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUaGlzIHByZXZlbnRzIHRoZSBicm93c2VyIGZyb21cbiAgICAgICAgICAgICAgICAgKiBwZXJmb3JtaW5nIGEgcGFnZSByZWxvYWQgd2hlbiBwcmVzc2luZ1xuICAgICAgICAgICAgICAgICAqIGFuIElvbmljIGNvbXBvbmVudCB3aXRoIHJvdXRlckxpbmsuXG4gICAgICAgICAgICAgICAgICogVGhlIHBhZ2UgcmVsb2FkIGludGVyZmVyZXMgd2l0aCByb3V0aW5nXG4gICAgICAgICAgICAgICAgICogYW5kIGNhdXNlcyBpb24tYmFjay1idXR0b24gdG8gZGlzYXBwZWFyXG4gICAgICAgICAgICAgICAgICogc2luY2UgdGhlIGxvY2FsIGhpc3RvcnkgaXMgd2lwZWQgb24gcmVsb2FkLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgbGV0IG5hdmlnYXRpb25QYXlsb2FkID0geyBldmVudDogZXYgfTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHByb3BzW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGtleS5zdGFydHNXaXRoKFJPVVRFUl9QUk9QX1BSRUZJWCkgJiYgdmFsdWUgIT09IEVNUFRZX1BST1AkMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvblBheWxvYWRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5hdk1hbmFnZXIubmF2aWdhdGUobmF2aWdhdGlvblBheWxvYWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdUcmllZCB0byBuYXZpZ2F0ZSwgYnV0IG5vIHJvdXRlciB3YXMgZm91bmQuIE1ha2Ugc3VyZSB5b3UgaGF2ZSBtb3VudGVkIFZ1ZSBSb3V0ZXIuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBtb2RlbFByb3BWYWx1ZSA9IHByb3BzW21vZGVsUHJvcF07XG4gICAgICAgICAgICBnZXRDb21wb25lbnRDbGFzc2VzKGF0dHJzLmNsYXNzKS5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgY29uc3Qgb2xkQ2xpY2sgPSBwcm9wcy5vbkNsaWNrO1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoZXYpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob2xkQ2xpY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBvbGRDbGljayhldik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZXYuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVSb3V0ZXJMaW5rKGV2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcHJvcHNUb0FkZCA9IHtcbiAgICAgICAgICAgICAgICByZWY6IGNvbnRhaW5lclJlZixcbiAgICAgICAgICAgICAgICBjbGFzczogZ2V0RWxlbWVudENsYXNzZXMoY29udGFpbmVyUmVmLCBjbGFzc2VzKSxcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiBoYW5kbGVDbGljayxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFdlIGNhbiB1c2UgT2JqZWN0LmVudHJpZXMgaGVyZVxuICAgICAgICAgICAgICogdG8gYXZvaWQgdGhlIGhhc093blByb3BlcnR5IGNoZWNrLFxuICAgICAgICAgICAgICogYnV0IHRoYXQgd291bGQgcmVxdWlyZSAyIGl0ZXJhdGlvbnNcbiAgICAgICAgICAgICAqIHdoZXJlIGFzIHRoaXMgb25seSByZXF1aXJlcyAxLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcHJvcHNba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAoKHByb3BzLmhhc093blByb3BlcnR5KGtleSkgJiYgdmFsdWUgIT09IEVNUFRZX1BST1AkMSkgfHwga2V5LnN0YXJ0c1dpdGgoQVJJQV9QUk9QX1BSRUZJWCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHNUb0FkZFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIHJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzIG9uIHRoZSBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBjb25zdCBldmVudEhhbmRsZXJLZXkgPSAnb24nICsga2V5LnNsaWNlKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBrZXkuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnRIYW5kbGVyID0gYXR0cnNbZXZlbnRIYW5kbGVyS2V5XTtcbiAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyUmVmLnZhbHVlICYmIGF0dHJzLmhhc093blByb3BlcnR5KGV2ZW50SGFuZGxlcktleSkgJiYgJ2FkZEV2ZW50TGlzdGVuZXInIGluIGNvbnRhaW5lclJlZi52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJSZWYudmFsdWUuYWRkRXZlbnRMaXN0ZW5lcihrZXksIGV2ZW50SGFuZGxlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vZGVsUHJvcCkge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIElmIGZvcm0gdmFsdWUgcHJvcGVydHkgd2FzIHNldCB1c2luZyB2LW1vZGVsXG4gICAgICAgICAgICAgICAgICogdGhlbiB3ZSBzaG91bGQgdXNlIHRoYXQgdmFsdWUuXG4gICAgICAgICAgICAgICAgICogT3RoZXJ3aXNlLCBjaGVjayB0byBzZWUgaWYgZm9ybSB2YWx1ZSBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgICAqIHdhcyBzZXQgYXMgYSBzdGF0aWMgdmFsdWUgKGkuZS4gbm8gdi1tb2RlbCkuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgaWYgKHByb3BzW01PREVMX1ZBTFVFXSAhPT0gRU1QVFlfUFJPUCQxKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzVG9BZGRbbW9kZWxQcm9wXSA9IHByb3BzW01PREVMX1ZBTFVFXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kZWxQcm9wVmFsdWUgIT09IEVNUFRZX1BST1AkMSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wc1RvQWRkW21vZGVsUHJvcF0gPSBtb2RlbFByb3BWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiByb3V0ZXIgbGluayBpcyBkZWZpbmVkLCBhZGQgaHJlZiB0byBwcm9wc1xuICAgICAgICAgICAgLy8gaW4gb3JkZXIgdG8gcHJvcGVybHkgcmVuZGVyIGFuIGFuY2hvciB0YWcgaW5zaWRlXG4gICAgICAgICAgICAvLyBvZiBjb21wb25lbnRzIHRoYXQgc2hvdWxkIGJlY29tZSBhY3RpdmF0YWJsZSBhbmRcbiAgICAgICAgICAgIC8vIGZvY3VzYWJsZSB3aXRoIHJvdXRlciBsaW5rLlxuICAgICAgICAgICAgaWYgKFJPVVRFUl9MSU5LX1ZBTFVFIGluIHByb3BzICYmIHByb3BzW1JPVVRFUl9MSU5LX1ZBTFVFXSAhPT0gRU1QVFlfUFJPUCQxKSB7XG4gICAgICAgICAgICAgICAgcHJvcHNUb0FkZC5ocmVmID0gcHJvcHNbUk9VVEVSX0xJTktfVkFMVUVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiB2TW9kZWxEaXJlY3RpdmUgaXMgb25seSBuZWVkZWQgb24gY29tcG9uZW50cyB0aGF0IHN1cHBvcnQgdi1tb2RlbC5cbiAgICAgICAgICAgICAqIEFzIGEgcmVzdWx0LCB3ZSBjb25kaXRpb25hbGx5IGNhbGwgd2l0aERpcmVjdGl2ZXMgd2l0aCB2LW1vZGVsIGNvbXBvbmVudHMuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBoKG5hbWUsIHByb3BzVG9BZGQsIHNsb3RzLmRlZmF1bHQgJiYgc2xvdHMuZGVmYXVsdCgpKTtcbiAgICAgICAgICAgIHJldHVybiBtb2RlbFByb3AgPT09IHVuZGVmaW5lZCA/IG5vZGUgOiB3aXRoRGlyZWN0aXZlcyhub2RlLCBbW3ZNb2RlbERpcmVjdGl2ZV1dKTtcbiAgICAgICAgfTtcbiAgICB9LCB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIHByb3BzLFxuICAgICAgICBlbWl0cyxcbiAgICB9KTtcbn07XG5cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogYXV0by1nZW5lcmF0ZWQgdnVlIHByb3hpZXMgKi9cbmNvbnN0IElvbkFjY29yZGlvbiA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tYWNjb3JkaW9uJywgZGVmaW5lQ3VzdG9tRWxlbWVudCwgW1xuICAgICd2YWx1ZScsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAncmVhZG9ubHknLFxuICAgICd0b2dnbGVJY29uJyxcbiAgICAndG9nZ2xlSWNvblNsb3QnXG5dKTtcbmNvbnN0IElvbkFjY29yZGlvbkdyb3VwID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1hY2NvcmRpb24tZ3JvdXAnLCBkZWZpbmVDdXN0b21FbGVtZW50JDEsIFtcbiAgICAnYW5pbWF0ZWQnLFxuICAgICdtdWx0aXBsZScsXG4gICAgJ3ZhbHVlJyxcbiAgICAnZGlzYWJsZWQnLFxuICAgICdyZWFkb25seScsXG4gICAgJ2V4cGFuZCcsXG4gICAgJ2lvbkNoYW5nZScsXG4gICAgJ2lvblZhbHVlQ2hhbmdlJ1xuXSwgW1xuICAgICdpb25DaGFuZ2UnLFxuICAgICdpb25WYWx1ZUNoYW5nZSdcbl0sICd2YWx1ZScsICdpb24tY2hhbmdlJyk7XG5jb25zdCBJb25BdmF0YXIgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWF2YXRhcicsIGRlZmluZUN1c3RvbUVsZW1lbnQkMik7XG5jb25zdCBJb25CYWNrZHJvcCA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tYmFja2Ryb3AnLCBkZWZpbmVDdXN0b21FbGVtZW50JDMsIFtcbiAgICAndmlzaWJsZScsXG4gICAgJ3RhcHBhYmxlJyxcbiAgICAnc3RvcFByb3BhZ2F0aW9uJyxcbiAgICAnaW9uQmFja2Ryb3BUYXAnXG5dLCBbXG4gICAgJ2lvbkJhY2tkcm9wVGFwJ1xuXSk7XG5jb25zdCBJb25CYWRnZSA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tYmFkZ2UnLCBkZWZpbmVDdXN0b21FbGVtZW50JDQsIFtcbiAgICAnY29sb3InXG5dKTtcbmNvbnN0IElvbkJyZWFkY3J1bWIgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWJyZWFkY3J1bWInLCBkZWZpbmVDdXN0b21FbGVtZW50JDUsIFtcbiAgICAnY29sbGFwc2VkJyxcbiAgICAnbGFzdCcsXG4gICAgJ3Nob3dDb2xsYXBzZWRJbmRpY2F0b3InLFxuICAgICdjb2xvcicsXG4gICAgJ2FjdGl2ZScsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAnZG93bmxvYWQnLFxuICAgICdocmVmJyxcbiAgICAncmVsJyxcbiAgICAnc2VwYXJhdG9yJyxcbiAgICAndGFyZ2V0JyxcbiAgICAncm91dGVyRGlyZWN0aW9uJyxcbiAgICAncm91dGVyQW5pbWF0aW9uJyxcbiAgICAnaW9uRm9jdXMnLFxuICAgICdpb25CbHVyJyxcbiAgICAnY29sbGFwc2VkQ2xpY2snXG5dLCBbXG4gICAgJ2lvbkZvY3VzJyxcbiAgICAnaW9uQmx1cicsXG4gICAgJ2NvbGxhcHNlZENsaWNrJ1xuXSk7XG5jb25zdCBJb25CcmVhZGNydW1icyA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tYnJlYWRjcnVtYnMnLCBkZWZpbmVDdXN0b21FbGVtZW50JDYsIFtcbiAgICAnY29sb3InLFxuICAgICdtYXhJdGVtcycsXG4gICAgJ2l0ZW1zQmVmb3JlQ29sbGFwc2UnLFxuICAgICdpdGVtc0FmdGVyQ29sbGFwc2UnLFxuICAgICdpb25Db2xsYXBzZWRDbGljaydcbl0sIFtcbiAgICAnaW9uQ29sbGFwc2VkQ2xpY2snXG5dKTtcbmNvbnN0IElvbkJ1dHRvbiA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tYnV0dG9uJywgZGVmaW5lQ3VzdG9tRWxlbWVudCQ3LCBbXG4gICAgJ2NvbG9yJyxcbiAgICAnYnV0dG9uVHlwZScsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAnZXhwYW5kJyxcbiAgICAnZmlsbCcsXG4gICAgJ3JvdXRlckRpcmVjdGlvbicsXG4gICAgJ3JvdXRlckFuaW1hdGlvbicsXG4gICAgJ2Rvd25sb2FkJyxcbiAgICAnaHJlZicsXG4gICAgJ3JlbCcsXG4gICAgJ3NoYXBlJyxcbiAgICAnc2l6ZScsXG4gICAgJ3N0cm9uZycsXG4gICAgJ3RhcmdldCcsXG4gICAgJ3R5cGUnLFxuICAgICdmb3JtJyxcbiAgICAnaW9uRm9jdXMnLFxuICAgICdpb25CbHVyJ1xuXSwgW1xuICAgICdpb25Gb2N1cycsXG4gICAgJ2lvbkJsdXInXG5dKTtcbmNvbnN0IElvbkJ1dHRvbnMgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWJ1dHRvbnMnLCBkZWZpbmVDdXN0b21FbGVtZW50JDgsIFtcbiAgICAnY29sbGFwc2UnXG5dKTtcbmNvbnN0IElvbkNhcmQgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWNhcmQnLCBkZWZpbmVDdXN0b21FbGVtZW50JDksIFtcbiAgICAnY29sb3InLFxuICAgICdidXR0b24nLFxuICAgICd0eXBlJyxcbiAgICAnZGlzYWJsZWQnLFxuICAgICdkb3dubG9hZCcsXG4gICAgJ2hyZWYnLFxuICAgICdyZWwnLFxuICAgICdyb3V0ZXJEaXJlY3Rpb24nLFxuICAgICdyb3V0ZXJBbmltYXRpb24nLFxuICAgICd0YXJnZXQnXG5dKTtcbmNvbnN0IElvbkNhcmRDb250ZW50ID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1jYXJkLWNvbnRlbnQnLCBkZWZpbmVDdXN0b21FbGVtZW50JGEpO1xuY29uc3QgSW9uQ2FyZEhlYWRlciA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tY2FyZC1oZWFkZXInLCBkZWZpbmVDdXN0b21FbGVtZW50JGIsIFtcbiAgICAnY29sb3InLFxuICAgICd0cmFuc2x1Y2VudCdcbl0pO1xuY29uc3QgSW9uQ2FyZFN1YnRpdGxlID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1jYXJkLXN1YnRpdGxlJywgZGVmaW5lQ3VzdG9tRWxlbWVudCRjLCBbXG4gICAgJ2NvbG9yJ1xuXSk7XG5jb25zdCBJb25DYXJkVGl0bGUgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWNhcmQtdGl0bGUnLCBkZWZpbmVDdXN0b21FbGVtZW50JGQsIFtcbiAgICAnY29sb3InXG5dKTtcbmNvbnN0IElvbkNoZWNrYm94ID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1jaGVja2JveCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkZSwgW1xuICAgICdjb2xvcicsXG4gICAgJ25hbWUnLFxuICAgICdjaGVja2VkJyxcbiAgICAnaW5kZXRlcm1pbmF0ZScsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAnZXJyb3JUZXh0JyxcbiAgICAnaGVscGVyVGV4dCcsXG4gICAgJ3ZhbHVlJyxcbiAgICAnbGFiZWxQbGFjZW1lbnQnLFxuICAgICdqdXN0aWZ5JyxcbiAgICAnYWxpZ25tZW50JyxcbiAgICAncmVxdWlyZWQnLFxuICAgICdpb25DaGFuZ2UnLFxuICAgICdpb25Gb2N1cycsXG4gICAgJ2lvbkJsdXInXG5dLCBbXG4gICAgJ2lvbkNoYW5nZScsXG4gICAgJ2lvbkZvY3VzJyxcbiAgICAnaW9uQmx1cidcbl0sICdjaGVja2VkJywgJ2lvbi1jaGFuZ2UnKTtcbmNvbnN0IElvbkNoaXAgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWNoaXAnLCBkZWZpbmVDdXN0b21FbGVtZW50JGYsIFtcbiAgICAnY29sb3InLFxuICAgICdvdXRsaW5lJyxcbiAgICAnZGlzYWJsZWQnXG5dKTtcbmNvbnN0IElvbkNvbCA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tY29sJywgZGVmaW5lQ3VzdG9tRWxlbWVudCRnLCBbXG4gICAgJ29mZnNldCcsXG4gICAgJ29mZnNldFhzJyxcbiAgICAnb2Zmc2V0U20nLFxuICAgICdvZmZzZXRNZCcsXG4gICAgJ29mZnNldExnJyxcbiAgICAnb2Zmc2V0WGwnLFxuICAgICdwdWxsJyxcbiAgICAncHVsbFhzJyxcbiAgICAncHVsbFNtJyxcbiAgICAncHVsbE1kJyxcbiAgICAncHVsbExnJyxcbiAgICAncHVsbFhsJyxcbiAgICAncHVzaCcsXG4gICAgJ3B1c2hYcycsXG4gICAgJ3B1c2hTbScsXG4gICAgJ3B1c2hNZCcsXG4gICAgJ3B1c2hMZycsXG4gICAgJ3B1c2hYbCcsXG4gICAgJ3NpemUnLFxuICAgICdzaXplWHMnLFxuICAgICdzaXplU20nLFxuICAgICdzaXplTWQnLFxuICAgICdzaXplTGcnLFxuICAgICdzaXplWGwnXG5dKTtcbmNvbnN0IElvbkNvbnRlbnQgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWNvbnRlbnQnLCBkZWZpbmVDdXN0b21FbGVtZW50JGgsIFtcbiAgICAnY29sb3InLFxuICAgICdmdWxsc2NyZWVuJyxcbiAgICAnZml4ZWRTbG90UGxhY2VtZW50JyxcbiAgICAnZm9yY2VPdmVyc2Nyb2xsJyxcbiAgICAnc2Nyb2xsWCcsXG4gICAgJ3Njcm9sbFknLFxuICAgICdzY3JvbGxFdmVudHMnLFxuICAgICdpb25TY3JvbGxTdGFydCcsXG4gICAgJ2lvblNjcm9sbCcsXG4gICAgJ2lvblNjcm9sbEVuZCdcbl0sIFtcbiAgICAnaW9uU2Nyb2xsU3RhcnQnLFxuICAgICdpb25TY3JvbGwnLFxuICAgICdpb25TY3JvbGxFbmQnXG5dKTtcbmNvbnN0IElvbkRhdGV0aW1lID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1kYXRldGltZScsIGRlZmluZUN1c3RvbUVsZW1lbnQkaSwgW1xuICAgICdjb2xvcicsXG4gICAgJ25hbWUnLFxuICAgICdkaXNhYmxlZCcsXG4gICAgJ2Zvcm1hdE9wdGlvbnMnLFxuICAgICdyZWFkb25seScsXG4gICAgJ2lzRGF0ZUVuYWJsZWQnLFxuICAgICdzaG93QWRqYWNlbnREYXlzJyxcbiAgICAnbWluJyxcbiAgICAnbWF4JyxcbiAgICAncHJlc2VudGF0aW9uJyxcbiAgICAnY2FuY2VsVGV4dCcsXG4gICAgJ2RvbmVUZXh0JyxcbiAgICAnY2xlYXJUZXh0JyxcbiAgICAneWVhclZhbHVlcycsXG4gICAgJ21vbnRoVmFsdWVzJyxcbiAgICAnZGF5VmFsdWVzJyxcbiAgICAnaG91clZhbHVlcycsXG4gICAgJ21pbnV0ZVZhbHVlcycsXG4gICAgJ2xvY2FsZScsXG4gICAgJ2ZpcnN0RGF5T2ZXZWVrJyxcbiAgICAndGl0bGVTZWxlY3RlZERhdGVzRm9ybWF0dGVyJyxcbiAgICAnbXVsdGlwbGUnLFxuICAgICdoaWdobGlnaHRlZERhdGVzJyxcbiAgICAndmFsdWUnLFxuICAgICdzaG93RGVmYXVsdFRpdGxlJyxcbiAgICAnc2hvd0RlZmF1bHRCdXR0b25zJyxcbiAgICAnc2hvd0NsZWFyQnV0dG9uJyxcbiAgICAnc2hvd0RlZmF1bHRUaW1lTGFiZWwnLFxuICAgICdob3VyQ3ljbGUnLFxuICAgICdzaXplJyxcbiAgICAncHJlZmVyV2hlZWwnLFxuICAgICdpb25DYW5jZWwnLFxuICAgICdpb25DaGFuZ2UnLFxuICAgICdpb25WYWx1ZUNoYW5nZScsXG4gICAgJ2lvbkZvY3VzJyxcbiAgICAnaW9uQmx1cicsXG4gICAgJ2lvblN0eWxlJyxcbiAgICAnaW9uUmVuZGVyJ1xuXSwgW1xuICAgICdpb25DYW5jZWwnLFxuICAgICdpb25DaGFuZ2UnLFxuICAgICdpb25WYWx1ZUNoYW5nZScsXG4gICAgJ2lvbkZvY3VzJyxcbiAgICAnaW9uQmx1cicsXG4gICAgJ2lvblN0eWxlJyxcbiAgICAnaW9uUmVuZGVyJ1xuXSwgJ3ZhbHVlJywgJ2lvbi1jaGFuZ2UnKTtcbmNvbnN0IElvbkRhdGV0aW1lQnV0dG9uID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1kYXRldGltZS1idXR0b24nLCBkZWZpbmVDdXN0b21FbGVtZW50JGosIFtcbiAgICAnY29sb3InLFxuICAgICdkaXNhYmxlZCcsXG4gICAgJ2RhdGV0aW1lJ1xuXSk7XG5jb25zdCBJb25GYWIgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWZhYicsIGRlZmluZUN1c3RvbUVsZW1lbnQkaywgW1xuICAgICdob3Jpem9udGFsJyxcbiAgICAndmVydGljYWwnLFxuICAgICdlZGdlJyxcbiAgICAnYWN0aXZhdGVkJ1xuXSk7XG5jb25zdCBJb25GYWJCdXR0b24gPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWZhYi1idXR0b24nLCBkZWZpbmVDdXN0b21FbGVtZW50JGwsIFtcbiAgICAnY29sb3InLFxuICAgICdhY3RpdmF0ZWQnLFxuICAgICdkaXNhYmxlZCcsXG4gICAgJ2Rvd25sb2FkJyxcbiAgICAnaHJlZicsXG4gICAgJ3JlbCcsXG4gICAgJ3JvdXRlckRpcmVjdGlvbicsXG4gICAgJ3JvdXRlckFuaW1hdGlvbicsXG4gICAgJ3RhcmdldCcsXG4gICAgJ3Nob3cnLFxuICAgICd0cmFuc2x1Y2VudCcsXG4gICAgJ3R5cGUnLFxuICAgICdzaXplJyxcbiAgICAnY2xvc2VJY29uJyxcbiAgICAnaW9uRm9jdXMnLFxuICAgICdpb25CbHVyJ1xuXSwgW1xuICAgICdpb25Gb2N1cycsXG4gICAgJ2lvbkJsdXInXG5dKTtcbmNvbnN0IElvbkZhYkxpc3QgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWZhYi1saXN0JywgZGVmaW5lQ3VzdG9tRWxlbWVudCRtLCBbXG4gICAgJ2FjdGl2YXRlZCcsXG4gICAgJ3NpZGUnXG5dKTtcbmNvbnN0IElvbkZvb3RlciA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tZm9vdGVyJywgZGVmaW5lQ3VzdG9tRWxlbWVudCRuLCBbXG4gICAgJ2NvbGxhcHNlJyxcbiAgICAndHJhbnNsdWNlbnQnXG5dKTtcbmNvbnN0IElvbkdyaWQgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWdyaWQnLCBkZWZpbmVDdXN0b21FbGVtZW50JG8sIFtcbiAgICAnZml4ZWQnXG5dKTtcbmNvbnN0IElvbkhlYWRlciA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24taGVhZGVyJywgZGVmaW5lQ3VzdG9tRWxlbWVudCRwLCBbXG4gICAgJ2NvbGxhcHNlJyxcbiAgICAndHJhbnNsdWNlbnQnXG5dKTtcbmNvbnN0IElvbkltZyA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24taW1nJywgZGVmaW5lQ3VzdG9tRWxlbWVudCRxLCBbXG4gICAgJ2FsdCcsXG4gICAgJ3NyYycsXG4gICAgJ2lvbkltZ1dpbGxMb2FkJyxcbiAgICAnaW9uSW1nRGlkTG9hZCcsXG4gICAgJ2lvbkVycm9yJ1xuXSwgW1xuICAgICdpb25JbWdXaWxsTG9hZCcsXG4gICAgJ2lvbkltZ0RpZExvYWQnLFxuICAgICdpb25FcnJvcidcbl0pO1xuY29uc3QgSW9uSW5maW5pdGVTY3JvbGwgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWluZmluaXRlLXNjcm9sbCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkciwgW1xuICAgICd0aHJlc2hvbGQnLFxuICAgICdkaXNhYmxlZCcsXG4gICAgJ3Bvc2l0aW9uJyxcbiAgICAnaW9uSW5maW5pdGUnXG5dLCBbXG4gICAgJ2lvbkluZmluaXRlJ1xuXSk7XG5jb25zdCBJb25JbmZpbml0ZVNjcm9sbENvbnRlbnQgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWluZmluaXRlLXNjcm9sbC1jb250ZW50JywgZGVmaW5lQ3VzdG9tRWxlbWVudCRzLCBbXG4gICAgJ2xvYWRpbmdTcGlubmVyJyxcbiAgICAnbG9hZGluZ1RleHQnXG5dKTtcbmNvbnN0IElvbklucHV0ID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1pbnB1dCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkdCwgW1xuICAgICdjb2xvcicsXG4gICAgJ2F1dG9jYXBpdGFsaXplJyxcbiAgICAnYXV0b2NvbXBsZXRlJyxcbiAgICAnYXV0b2NvcnJlY3QnLFxuICAgICdhdXRvZm9jdXMnLFxuICAgICdjbGVhcklucHV0JyxcbiAgICAnY2xlYXJJbnB1dEljb24nLFxuICAgICdjbGVhck9uRWRpdCcsXG4gICAgJ2NvdW50ZXInLFxuICAgICdjb3VudGVyRm9ybWF0dGVyJyxcbiAgICAnZGVib3VuY2UnLFxuICAgICdkaXNhYmxlZCcsXG4gICAgJ2VudGVya2V5aGludCcsXG4gICAgJ2Vycm9yVGV4dCcsXG4gICAgJ2ZpbGwnLFxuICAgICdpbnB1dG1vZGUnLFxuICAgICdoZWxwZXJUZXh0JyxcbiAgICAnbGFiZWwnLFxuICAgICdsYWJlbFBsYWNlbWVudCcsXG4gICAgJ21heCcsXG4gICAgJ21heGxlbmd0aCcsXG4gICAgJ21pbicsXG4gICAgJ21pbmxlbmd0aCcsXG4gICAgJ211bHRpcGxlJyxcbiAgICAnbmFtZScsXG4gICAgJ3BhdHRlcm4nLFxuICAgICdwbGFjZWhvbGRlcicsXG4gICAgJ3JlYWRvbmx5JyxcbiAgICAncmVxdWlyZWQnLFxuICAgICdzaGFwZScsXG4gICAgJ3NwZWxsY2hlY2snLFxuICAgICdzdGVwJyxcbiAgICAndHlwZScsXG4gICAgJ3ZhbHVlJyxcbiAgICAnaW9uSW5wdXQnLFxuICAgICdpb25DaGFuZ2UnLFxuICAgICdpb25CbHVyJyxcbiAgICAnaW9uRm9jdXMnXG5dLCBbXG4gICAgJ2lvbklucHV0JyxcbiAgICAnaW9uQ2hhbmdlJyxcbiAgICAnaW9uQmx1cicsXG4gICAgJ2lvbkZvY3VzJ1xuXSwgJ3ZhbHVlJywgJ2lvbi1pbnB1dCcpO1xuY29uc3QgSW9uSW5wdXRPdHAgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWlucHV0LW90cCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkdSwgW1xuICAgICdhdXRvY2FwaXRhbGl6ZScsXG4gICAgJ2NvbG9yJyxcbiAgICAnZGlzYWJsZWQnLFxuICAgICdmaWxsJyxcbiAgICAnaW5wdXRtb2RlJyxcbiAgICAnbGVuZ3RoJyxcbiAgICAncGF0dGVybicsXG4gICAgJ3JlYWRvbmx5JyxcbiAgICAnc2VwYXJhdG9ycycsXG4gICAgJ3NoYXBlJyxcbiAgICAnc2l6ZScsXG4gICAgJ3R5cGUnLFxuICAgICd2YWx1ZScsXG4gICAgJ2lvbklucHV0JyxcbiAgICAnaW9uQ2hhbmdlJyxcbiAgICAnaW9uQ29tcGxldGUnLFxuICAgICdpb25CbHVyJyxcbiAgICAnaW9uRm9jdXMnXG5dLCBbXG4gICAgJ2lvbklucHV0JyxcbiAgICAnaW9uQ2hhbmdlJyxcbiAgICAnaW9uQ29tcGxldGUnLFxuICAgICdpb25CbHVyJyxcbiAgICAnaW9uRm9jdXMnXG5dLCAndmFsdWUnLCAnaW9uLWlucHV0Jyk7XG5jb25zdCBJb25JbnB1dFBhc3N3b3JkVG9nZ2xlID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1pbnB1dC1wYXNzd29yZC10b2dnbGUnLCBkZWZpbmVDdXN0b21FbGVtZW50JHYsIFtcbiAgICAnY29sb3InLFxuICAgICdzaG93SWNvbicsXG4gICAgJ2hpZGVJY29uJyxcbiAgICAndHlwZSdcbl0pO1xuY29uc3QgSW9uSXRlbSA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24taXRlbScsIGRlZmluZUN1c3RvbUVsZW1lbnQkdywgW1xuICAgICdjb2xvcicsXG4gICAgJ2J1dHRvbicsXG4gICAgJ2RldGFpbCcsXG4gICAgJ2RldGFpbEljb24nLFxuICAgICdkaXNhYmxlZCcsXG4gICAgJ2Rvd25sb2FkJyxcbiAgICAnaHJlZicsXG4gICAgJ3JlbCcsXG4gICAgJ2xpbmVzJyxcbiAgICAncm91dGVyQW5pbWF0aW9uJyxcbiAgICAncm91dGVyRGlyZWN0aW9uJyxcbiAgICAndGFyZ2V0JyxcbiAgICAndHlwZSdcbl0pO1xuY29uc3QgSW9uSXRlbURpdmlkZXIgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWl0ZW0tZGl2aWRlcicsIGRlZmluZUN1c3RvbUVsZW1lbnQkeCwgW1xuICAgICdjb2xvcicsXG4gICAgJ3N0aWNreSdcbl0pO1xuY29uc3QgSW9uSXRlbUdyb3VwID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1pdGVtLWdyb3VwJywgZGVmaW5lQ3VzdG9tRWxlbWVudCR5KTtcbmNvbnN0IElvbkl0ZW1PcHRpb24gPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWl0ZW0tb3B0aW9uJywgZGVmaW5lQ3VzdG9tRWxlbWVudCR6LCBbXG4gICAgJ2NvbG9yJyxcbiAgICAnZGlzYWJsZWQnLFxuICAgICdkb3dubG9hZCcsXG4gICAgJ2V4cGFuZGFibGUnLFxuICAgICdocmVmJyxcbiAgICAncmVsJyxcbiAgICAndGFyZ2V0JyxcbiAgICAndHlwZSdcbl0pO1xuY29uc3QgSW9uSXRlbU9wdGlvbnMgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWl0ZW0tb3B0aW9ucycsIGRlZmluZUN1c3RvbUVsZW1lbnQkQSwgW1xuICAgICdzaWRlJyxcbiAgICAnaW9uU3dpcGUnXG5dLCBbXG4gICAgJ2lvblN3aXBlJ1xuXSk7XG5jb25zdCBJb25JdGVtU2xpZGluZyA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24taXRlbS1zbGlkaW5nJywgZGVmaW5lQ3VzdG9tRWxlbWVudCRCLCBbXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAnaW9uRHJhZydcbl0sIFtcbiAgICAnaW9uRHJhZydcbl0pO1xuY29uc3QgSW9uTGFiZWwgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWxhYmVsJywgZGVmaW5lQ3VzdG9tRWxlbWVudCRDLCBbXG4gICAgJ2NvbG9yJyxcbiAgICAncG9zaXRpb24nLFxuICAgICdpb25Db2xvcicsXG4gICAgJ2lvblN0eWxlJ1xuXSwgW1xuICAgICdpb25Db2xvcicsXG4gICAgJ2lvblN0eWxlJ1xuXSk7XG5jb25zdCBJb25MaXN0ID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1saXN0JywgZGVmaW5lQ3VzdG9tRWxlbWVudCRELCBbXG4gICAgJ2xpbmVzJyxcbiAgICAnaW5zZXQnXG5dKTtcbmNvbnN0IElvbkxpc3RIZWFkZXIgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLWxpc3QtaGVhZGVyJywgZGVmaW5lQ3VzdG9tRWxlbWVudCRFLCBbXG4gICAgJ2NvbG9yJyxcbiAgICAnbGluZXMnXG5dKTtcbmNvbnN0IElvbk1lbnUgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLW1lbnUnLCBkZWZpbmVDdXN0b21FbGVtZW50JEYsIFtcbiAgICAnY29udGVudElkJyxcbiAgICAnbWVudUlkJyxcbiAgICAndHlwZScsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAnc2lkZScsXG4gICAgJ3N3aXBlR2VzdHVyZScsXG4gICAgJ21heEVkZ2VTdGFydCcsXG4gICAgJ2lvbldpbGxPcGVuJyxcbiAgICAnaW9uV2lsbENsb3NlJyxcbiAgICAnaW9uRGlkT3BlbicsXG4gICAgJ2lvbkRpZENsb3NlJyxcbiAgICAnaW9uTWVudUNoYW5nZSdcbl0sIFtcbiAgICAnaW9uV2lsbE9wZW4nLFxuICAgICdpb25XaWxsQ2xvc2UnLFxuICAgICdpb25EaWRPcGVuJyxcbiAgICAnaW9uRGlkQ2xvc2UnLFxuICAgICdpb25NZW51Q2hhbmdlJ1xuXSk7XG5jb25zdCBJb25NZW51QnV0dG9uID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1tZW51LWJ1dHRvbicsIGRlZmluZUN1c3RvbUVsZW1lbnQkRywgW1xuICAgICdjb2xvcicsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAnbWVudScsXG4gICAgJ2F1dG9IaWRlJyxcbiAgICAndHlwZSdcbl0pO1xuY29uc3QgSW9uTWVudVRvZ2dsZSA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tbWVudS10b2dnbGUnLCBkZWZpbmVDdXN0b21FbGVtZW50JEgsIFtcbiAgICAnbWVudScsXG4gICAgJ2F1dG9IaWRlJ1xuXSk7XG5jb25zdCBJb25OYXZMaW5rID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1uYXYtbGluaycsIGRlZmluZUN1c3RvbUVsZW1lbnQkSSwgW1xuICAgICdjb21wb25lbnQnLFxuICAgICdjb21wb25lbnRQcm9wcycsXG4gICAgJ3JvdXRlckRpcmVjdGlvbicsXG4gICAgJ3JvdXRlckFuaW1hdGlvbidcbl0pO1xuY29uc3QgSW9uTm90ZSA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tbm90ZScsIGRlZmluZUN1c3RvbUVsZW1lbnQkSiwgW1xuICAgICdjb2xvcidcbl0pO1xuY29uc3QgSW9uUGlja2VyID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1waWNrZXInLCBkZWZpbmVDdXN0b21FbGVtZW50JEssIFtcbiAgICAnaW9uSW5wdXRNb2RlQ2hhbmdlJ1xuXSwgW1xuICAgICdpb25JbnB1dE1vZGVDaGFuZ2UnXG5dKTtcbmNvbnN0IElvblBpY2tlckNvbHVtbiA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tcGlja2VyLWNvbHVtbicsIGRlZmluZUN1c3RvbUVsZW1lbnQkTCwgW1xuICAgICdkaXNhYmxlZCcsXG4gICAgJ3ZhbHVlJyxcbiAgICAnY29sb3InLFxuICAgICdudW1lcmljSW5wdXQnLFxuICAgICdpb25DaGFuZ2UnXG5dLCBbXG4gICAgJ2lvbkNoYW5nZSdcbl0pO1xuY29uc3QgSW9uUGlja2VyQ29sdW1uT3B0aW9uID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1waWNrZXItY29sdW1uLW9wdGlvbicsIGRlZmluZUN1c3RvbUVsZW1lbnQkTSwgW1xuICAgICdkaXNhYmxlZCcsXG4gICAgJ3ZhbHVlJyxcbiAgICAnY29sb3InXG5dKTtcbmNvbnN0IElvblByb2dyZXNzQmFyID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1wcm9ncmVzcy1iYXInLCBkZWZpbmVDdXN0b21FbGVtZW50JE4sIFtcbiAgICAndHlwZScsXG4gICAgJ3JldmVyc2VkJyxcbiAgICAndmFsdWUnLFxuICAgICdidWZmZXInLFxuICAgICdjb2xvcidcbl0pO1xuY29uc3QgSW9uUmFkaW8gPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLXJhZGlvJywgZGVmaW5lQ3VzdG9tRWxlbWVudCRPLCBbXG4gICAgJ2NvbG9yJyxcbiAgICAnbmFtZScsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAndmFsdWUnLFxuICAgICdsYWJlbFBsYWNlbWVudCcsXG4gICAgJ2p1c3RpZnknLFxuICAgICdhbGlnbm1lbnQnLFxuICAgICdpb25Gb2N1cycsXG4gICAgJ2lvbkJsdXInXG5dLCBbXG4gICAgJ2lvbkZvY3VzJyxcbiAgICAnaW9uQmx1cidcbl0sICd2YWx1ZScsICdpb24tY2hhbmdlJyk7XG5jb25zdCBJb25SYWRpb0dyb3VwID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1yYWRpby1ncm91cCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkUCwgW1xuICAgICdhbGxvd0VtcHR5U2VsZWN0aW9uJyxcbiAgICAnY29tcGFyZVdpdGgnLFxuICAgICduYW1lJyxcbiAgICAndmFsdWUnLFxuICAgICdoZWxwZXJUZXh0JyxcbiAgICAnZXJyb3JUZXh0JyxcbiAgICAnaW9uQ2hhbmdlJyxcbiAgICAnaW9uVmFsdWVDaGFuZ2UnXG5dLCBbXG4gICAgJ2lvbkNoYW5nZScsXG4gICAgJ2lvblZhbHVlQ2hhbmdlJ1xuXSwgJ3ZhbHVlJywgJ2lvbi1jaGFuZ2UnKTtcbmNvbnN0IElvblJhbmdlID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1yYW5nZScsIGRlZmluZUN1c3RvbUVsZW1lbnQkUSwgW1xuICAgICdjb2xvcicsXG4gICAgJ2RlYm91bmNlJyxcbiAgICAnbmFtZScsXG4gICAgJ2xhYmVsJyxcbiAgICAnZHVhbEtub2JzJyxcbiAgICAnbWluJyxcbiAgICAnbWF4JyxcbiAgICAncGluJyxcbiAgICAncGluRm9ybWF0dGVyJyxcbiAgICAnc25hcHMnLFxuICAgICdzdGVwJyxcbiAgICAndGlja3MnLFxuICAgICdhY3RpdmVCYXJTdGFydCcsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAndmFsdWUnLFxuICAgICdsYWJlbFBsYWNlbWVudCcsXG4gICAgJ2lvbkNoYW5nZScsXG4gICAgJ2lvbklucHV0JyxcbiAgICAnaW9uRm9jdXMnLFxuICAgICdpb25CbHVyJyxcbiAgICAnaW9uS25vYk1vdmVTdGFydCcsXG4gICAgJ2lvbktub2JNb3ZlRW5kJ1xuXSwgW1xuICAgICdpb25DaGFuZ2UnLFxuICAgICdpb25JbnB1dCcsXG4gICAgJ2lvbkZvY3VzJyxcbiAgICAnaW9uQmx1cicsXG4gICAgJ2lvbktub2JNb3ZlU3RhcnQnLFxuICAgICdpb25Lbm9iTW92ZUVuZCdcbl0sICd2YWx1ZScsICdpb24taW5wdXQnKTtcbmNvbnN0IElvblJlZnJlc2hlciA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tcmVmcmVzaGVyJywgZGVmaW5lQ3VzdG9tRWxlbWVudCRSLCBbXG4gICAgJ3B1bGxNaW4nLFxuICAgICdwdWxsTWF4JyxcbiAgICAnY2xvc2VEdXJhdGlvbicsXG4gICAgJ3NuYXBiYWNrRHVyYXRpb24nLFxuICAgICdwdWxsRmFjdG9yJyxcbiAgICAnZGlzYWJsZWQnLFxuICAgICdpb25SZWZyZXNoJyxcbiAgICAnaW9uUHVsbCcsXG4gICAgJ2lvblN0YXJ0J1xuXSwgW1xuICAgICdpb25SZWZyZXNoJyxcbiAgICAnaW9uUHVsbCcsXG4gICAgJ2lvblN0YXJ0J1xuXSk7XG5jb25zdCBJb25SZWZyZXNoZXJDb250ZW50ID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1yZWZyZXNoZXItY29udGVudCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkUywgW1xuICAgICdwdWxsaW5nSWNvbicsXG4gICAgJ3B1bGxpbmdUZXh0JyxcbiAgICAncmVmcmVzaGluZ1NwaW5uZXInLFxuICAgICdyZWZyZXNoaW5nVGV4dCdcbl0pO1xuY29uc3QgSW9uUmVvcmRlciA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tcmVvcmRlcicsIGRlZmluZUN1c3RvbUVsZW1lbnQkVCk7XG5jb25zdCBJb25SZW9yZGVyR3JvdXAgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLXJlb3JkZXItZ3JvdXAnLCBkZWZpbmVDdXN0b21FbGVtZW50JFUsIFtcbiAgICAnZGlzYWJsZWQnLFxuICAgICdpb25JdGVtUmVvcmRlcicsXG4gICAgJ2lvblJlb3JkZXJTdGFydCcsXG4gICAgJ2lvblJlb3JkZXJNb3ZlJyxcbiAgICAnaW9uUmVvcmRlckVuZCdcbl0sIFtcbiAgICAnaW9uSXRlbVJlb3JkZXInLFxuICAgICdpb25SZW9yZGVyU3RhcnQnLFxuICAgICdpb25SZW9yZGVyTW92ZScsXG4gICAgJ2lvblJlb3JkZXJFbmQnXG5dKTtcbmNvbnN0IElvblJpcHBsZUVmZmVjdCA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tcmlwcGxlLWVmZmVjdCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkViwgW1xuICAgICd0eXBlJ1xuXSk7XG5jb25zdCBJb25Sb3cgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLXJvdycsIGRlZmluZUN1c3RvbUVsZW1lbnQkVyk7XG5jb25zdCBJb25TZWFyY2hiYXIgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLXNlYXJjaGJhcicsIGRlZmluZUN1c3RvbUVsZW1lbnQkWCwgW1xuICAgICdjb2xvcicsXG4gICAgJ2FuaW1hdGVkJyxcbiAgICAnYXV0b2NhcGl0YWxpemUnLFxuICAgICdhdXRvY29tcGxldGUnLFxuICAgICdhdXRvY29ycmVjdCcsXG4gICAgJ2NhbmNlbEJ1dHRvbkljb24nLFxuICAgICdjYW5jZWxCdXR0b25UZXh0JyxcbiAgICAnY2xlYXJJY29uJyxcbiAgICAnZGVib3VuY2UnLFxuICAgICdkaXNhYmxlZCcsXG4gICAgJ2lucHV0bW9kZScsXG4gICAgJ2VudGVya2V5aGludCcsXG4gICAgJ21heGxlbmd0aCcsXG4gICAgJ21pbmxlbmd0aCcsXG4gICAgJ25hbWUnLFxuICAgICdwbGFjZWhvbGRlcicsXG4gICAgJ3NlYXJjaEljb24nLFxuICAgICdzaG93Q2FuY2VsQnV0dG9uJyxcbiAgICAnc2hvd0NsZWFyQnV0dG9uJyxcbiAgICAnc3BlbGxjaGVjaycsXG4gICAgJ3R5cGUnLFxuICAgICd2YWx1ZScsXG4gICAgJ2lvbklucHV0JyxcbiAgICAnaW9uQ2hhbmdlJyxcbiAgICAnaW9uQ2FuY2VsJyxcbiAgICAnaW9uQ2xlYXInLFxuICAgICdpb25CbHVyJyxcbiAgICAnaW9uRm9jdXMnLFxuICAgICdpb25TdHlsZSdcbl0sIFtcbiAgICAnaW9uSW5wdXQnLFxuICAgICdpb25DaGFuZ2UnLFxuICAgICdpb25DYW5jZWwnLFxuICAgICdpb25DbGVhcicsXG4gICAgJ2lvbkJsdXInLFxuICAgICdpb25Gb2N1cycsXG4gICAgJ2lvblN0eWxlJ1xuXSwgJ3ZhbHVlJywgJ2lvbi1pbnB1dCcpO1xuY29uc3QgSW9uU2VnbWVudCA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tc2VnbWVudCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkWSwgW1xuICAgICdjb2xvcicsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAnc2Nyb2xsYWJsZScsXG4gICAgJ3N3aXBlR2VzdHVyZScsXG4gICAgJ3ZhbHVlJyxcbiAgICAnc2VsZWN0T25Gb2N1cycsXG4gICAgJ2lvbkNoYW5nZScsXG4gICAgJ2lvblNlbGVjdCcsXG4gICAgJ2lvblN0eWxlJ1xuXSwgW1xuICAgICdpb25DaGFuZ2UnLFxuICAgICdpb25TZWxlY3QnLFxuICAgICdpb25TdHlsZSdcbl0sICd2YWx1ZScsICdpb24tY2hhbmdlJyk7XG5jb25zdCBJb25TZWdtZW50QnV0dG9uID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi1zZWdtZW50LWJ1dHRvbicsIGRlZmluZUN1c3RvbUVsZW1lbnQkWiwgW1xuICAgICdjb250ZW50SWQnLFxuICAgICdkaXNhYmxlZCcsXG4gICAgJ2xheW91dCcsXG4gICAgJ3R5cGUnLFxuICAgICd2YWx1ZSdcbl0sIFtdLCAndmFsdWUnLCAnaW9uLWNoYW5nZScpO1xuY29uc3QgSW9uU2VnbWVudENvbnRlbnQgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLXNlZ21lbnQtY29udGVudCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkXyk7XG5jb25zdCBJb25TZWdtZW50VmlldyA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tc2VnbWVudC12aWV3JywgZGVmaW5lQ3VzdG9tRWxlbWVudCQkLCBbXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAnaW9uU2VnbWVudFZpZXdTY3JvbGwnXG5dLCBbXG4gICAgJ2lvblNlZ21lbnRWaWV3U2Nyb2xsJ1xuXSk7XG5jb25zdCBJb25TZWxlY3QgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLXNlbGVjdCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkMTAsIFtcbiAgICAnY2FuY2VsVGV4dCcsXG4gICAgJ2NvbG9yJyxcbiAgICAnY29tcGFyZVdpdGgnLFxuICAgICdkaXNhYmxlZCcsXG4gICAgJ2ZpbGwnLFxuICAgICdlcnJvclRleHQnLFxuICAgICdoZWxwZXJUZXh0JyxcbiAgICAnaW50ZXJmYWNlJyxcbiAgICAnaW50ZXJmYWNlT3B0aW9ucycsXG4gICAgJ2p1c3RpZnknLFxuICAgICdsYWJlbCcsXG4gICAgJ2xhYmVsUGxhY2VtZW50JyxcbiAgICAnbXVsdGlwbGUnLFxuICAgICduYW1lJyxcbiAgICAnb2tUZXh0JyxcbiAgICAncGxhY2Vob2xkZXInLFxuICAgICdzZWxlY3RlZFRleHQnLFxuICAgICd0b2dnbGVJY29uJyxcbiAgICAnZXhwYW5kZWRJY29uJyxcbiAgICAnc2hhcGUnLFxuICAgICd2YWx1ZScsXG4gICAgJ3JlcXVpcmVkJyxcbiAgICAnaW9uQ2hhbmdlJyxcbiAgICAnaW9uQ2FuY2VsJyxcbiAgICAnaW9uRGlzbWlzcycsXG4gICAgJ2lvbkZvY3VzJyxcbiAgICAnaW9uQmx1cicsXG4gICAgJ2lvblN0eWxlJ1xuXSwgW1xuICAgICdpb25DaGFuZ2UnLFxuICAgICdpb25DYW5jZWwnLFxuICAgICdpb25EaXNtaXNzJyxcbiAgICAnaW9uRm9jdXMnLFxuICAgICdpb25CbHVyJyxcbiAgICAnaW9uU3R5bGUnXG5dLCAndmFsdWUnLCAnaW9uLWNoYW5nZScpO1xuY29uc3QgSW9uU2VsZWN0TW9kYWwgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLXNlbGVjdC1tb2RhbCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkMTEsIFtcbiAgICAnaGVhZGVyJyxcbiAgICAnbXVsdGlwbGUnLFxuICAgICdvcHRpb25zJ1xuXSk7XG5jb25zdCBJb25TZWxlY3RPcHRpb24gPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLXNlbGVjdC1vcHRpb24nLCBkZWZpbmVDdXN0b21FbGVtZW50JDEyLCBbXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAndmFsdWUnXG5dKTtcbmNvbnN0IElvblNrZWxldG9uVGV4dCA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tc2tlbGV0b24tdGV4dCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkMTMsIFtcbiAgICAnYW5pbWF0ZWQnLFxuICAgICdpb25TdHlsZSdcbl0sIFtcbiAgICAnaW9uU3R5bGUnXG5dKTtcbmNvbnN0IElvblNwaW5uZXIgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLXNwaW5uZXInLCBkZWZpbmVDdXN0b21FbGVtZW50JDE0LCBbXG4gICAgJ2NvbG9yJyxcbiAgICAnZHVyYXRpb24nLFxuICAgICduYW1lJyxcbiAgICAncGF1c2VkJ1xuXSk7XG5jb25zdCBJb25TcGxpdFBhbmUgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLXNwbGl0LXBhbmUnLCBkZWZpbmVDdXN0b21FbGVtZW50JDE1LCBbXG4gICAgJ2NvbnRlbnRJZCcsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAnd2hlbicsXG4gICAgJ2lvblNwbGl0UGFuZVZpc2libGUnXG5dLCBbXG4gICAgJ2lvblNwbGl0UGFuZVZpc2libGUnXG5dKTtcbmNvbnN0IElvblRhYiA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tdGFiJywgZGVmaW5lQ3VzdG9tRWxlbWVudCQxNiwgW1xuICAgICdhY3RpdmUnLFxuICAgICdkZWxlZ2F0ZScsXG4gICAgJ3RhYicsXG4gICAgJ2NvbXBvbmVudCdcbl0pO1xuY29uc3QgSW9uVGV4dCA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tdGV4dCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkMTcsIFtcbiAgICAnY29sb3InXG5dKTtcbmNvbnN0IElvblRleHRhcmVhID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi10ZXh0YXJlYScsIGRlZmluZUN1c3RvbUVsZW1lbnQkMTgsIFtcbiAgICAnY29sb3InLFxuICAgICdhdXRvY2FwaXRhbGl6ZScsXG4gICAgJ2F1dG9mb2N1cycsXG4gICAgJ2NsZWFyT25FZGl0JyxcbiAgICAnZGVib3VuY2UnLFxuICAgICdkaXNhYmxlZCcsXG4gICAgJ2ZpbGwnLFxuICAgICdpbnB1dG1vZGUnLFxuICAgICdlbnRlcmtleWhpbnQnLFxuICAgICdtYXhsZW5ndGgnLFxuICAgICdtaW5sZW5ndGgnLFxuICAgICduYW1lJyxcbiAgICAncGxhY2Vob2xkZXInLFxuICAgICdyZWFkb25seScsXG4gICAgJ3JlcXVpcmVkJyxcbiAgICAnc3BlbGxjaGVjaycsXG4gICAgJ2NvbHMnLFxuICAgICdyb3dzJyxcbiAgICAnd3JhcCcsXG4gICAgJ2F1dG9Hcm93JyxcbiAgICAndmFsdWUnLFxuICAgICdjb3VudGVyJyxcbiAgICAnY291bnRlckZvcm1hdHRlcicsXG4gICAgJ2Vycm9yVGV4dCcsXG4gICAgJ2hlbHBlclRleHQnLFxuICAgICdsYWJlbCcsXG4gICAgJ2xhYmVsUGxhY2VtZW50JyxcbiAgICAnc2hhcGUnLFxuICAgICdpb25DaGFuZ2UnLFxuICAgICdpb25JbnB1dCcsXG4gICAgJ2lvbkJsdXInLFxuICAgICdpb25Gb2N1cydcbl0sIFtcbiAgICAnaW9uQ2hhbmdlJyxcbiAgICAnaW9uSW5wdXQnLFxuICAgICdpb25CbHVyJyxcbiAgICAnaW9uRm9jdXMnXG5dLCAndmFsdWUnLCAnaW9uLWlucHV0Jyk7XG5jb25zdCBJb25UaHVtYm5haWwgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLXRodW1ibmFpbCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkMTkpO1xuY29uc3QgSW9uVGl0bGUgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbnRhaW5lcignaW9uLXRpdGxlJywgZGVmaW5lQ3VzdG9tRWxlbWVudCQxYSwgW1xuICAgICdjb2xvcicsXG4gICAgJ3NpemUnLFxuICAgICdpb25TdHlsZSdcbl0sIFtcbiAgICAnaW9uU3R5bGUnXG5dKTtcbmNvbnN0IElvblRvZ2dsZSA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29udGFpbmVyKCdpb24tdG9nZ2xlJywgZGVmaW5lQ3VzdG9tRWxlbWVudCQxYiwgW1xuICAgICdjb2xvcicsXG4gICAgJ25hbWUnLFxuICAgICdjaGVja2VkJyxcbiAgICAnZGlzYWJsZWQnLFxuICAgICdlcnJvclRleHQnLFxuICAgICdoZWxwZXJUZXh0JyxcbiAgICAndmFsdWUnLFxuICAgICdlbmFibGVPbk9mZkxhYmVscycsXG4gICAgJ2xhYmVsUGxhY2VtZW50JyxcbiAgICAnanVzdGlmeScsXG4gICAgJ2FsaWdubWVudCcsXG4gICAgJ3JlcXVpcmVkJyxcbiAgICAnaW9uQ2hhbmdlJyxcbiAgICAnaW9uRm9jdXMnLFxuICAgICdpb25CbHVyJ1xuXSwgW1xuICAgICdpb25DaGFuZ2UnLFxuICAgICdpb25Gb2N1cycsXG4gICAgJ2lvbkJsdXInXG5dLCAnY2hlY2tlZCcsICdpb24tY2hhbmdlJyk7XG5jb25zdCBJb25Ub29sYmFyID0gLypAX19QVVJFX18qLyBkZWZpbmVDb250YWluZXIoJ2lvbi10b29sYmFyJywgZGVmaW5lQ3VzdG9tRWxlbWVudCQxYywgW1xuICAgICdjb2xvcidcbl0pO1xuXG5jb25zdCB1c2VCYWNrQnV0dG9uID0gKHByaW9yaXR5LCBoYW5kbGVyKSA9PiB7XG4gICAgY29uc3QgY2FsbGJhY2sgPSAoZXYpID0+IGV2LmRldGFpbC5yZWdpc3Rlcihwcmlvcml0eSwgaGFuZGxlcik7XG4gICAgY29uc3QgdW5yZWdpc3RlciA9ICgpID0+IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpb25CYWNrQnV0dG9uXCIsIGNhbGxiYWNrKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW9uQmFja0J1dHRvblwiLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHsgdW5yZWdpc3RlciB9O1xufTtcblxuY29uc3QgdXNlS2V5Ym9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgaXNPcGVuID0gcmVmKGZhbHNlKTtcbiAgICBjb25zdCBrZXlib2FyZEhlaWdodCA9IHJlZigwKTtcbiAgICBjb25zdCBzaG93Q2FsbGJhY2sgPSAoZXYpID0+IHtcbiAgICAgICAgaXNPcGVuLnZhbHVlID0gdHJ1ZTtcbiAgICAgICAga2V5Ym9hcmRIZWlnaHQudmFsdWUgPSBldi5kZXRhaWwua2V5Ym9hcmRIZWlnaHQ7XG4gICAgfTtcbiAgICBjb25zdCBoaWRlQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgIGlzT3Blbi52YWx1ZSA9IGZhbHNlO1xuICAgICAgICBrZXlib2FyZEhlaWdodC52YWx1ZSA9IDA7XG4gICAgfTtcbiAgICBjb25zdCB1bnJlZ2lzdGVyID0gKCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpb25LZXlib2FyZERpZFNob3dcIiwgc2hvd0NhbGxiYWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiaW9uS2V5Ym9hcmREaWRIaWRlXCIsIGhpZGVDYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiaW9uS2V5Ym9hcmREaWRTaG93XCIsIHNob3dDYWxsYmFjayk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiaW9uS2V5Ym9hcmREaWRIaWRlXCIsIGhpZGVDYWxsYmFjayk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGlzT3BlbixcbiAgICAgICAga2V5Ym9hcmRIZWlnaHQsXG4gICAgICAgIHVucmVnaXN0ZXIsXG4gICAgfTtcbn07XG5cbi8vIFRPRE8oRlctMjk2OSk6IHR5cGVzXG52YXIgTGlmZWN5Y2xlSG9va3M7XG4oZnVuY3Rpb24gKExpZmVjeWNsZUhvb2tzKSB7XG4gICAgTGlmZWN5Y2xlSG9va3NbXCJXaWxsRW50ZXJcIl0gPSBcIm9uSW9uVmlld1dpbGxFbnRlclwiO1xuICAgIExpZmVjeWNsZUhvb2tzW1wiRGlkRW50ZXJcIl0gPSBcIm9uSW9uVmlld0RpZEVudGVyXCI7XG4gICAgTGlmZWN5Y2xlSG9va3NbXCJXaWxsTGVhdmVcIl0gPSBcIm9uSW9uVmlld1dpbGxMZWF2ZVwiO1xuICAgIExpZmVjeWNsZUhvb2tzW1wiRGlkTGVhdmVcIl0gPSBcIm9uSW9uVmlld0RpZExlYXZlXCI7XG59KShMaWZlY3ljbGVIb29rcyB8fCAoTGlmZWN5Y2xlSG9va3MgPSB7fSkpO1xuY29uc3QgaG9va05hbWVzID0ge1xuICAgIFtMSUZFQ1lDTEVfV0lMTF9FTlRFUl06IExpZmVjeWNsZUhvb2tzLldpbGxFbnRlcixcbiAgICBbTElGRUNZQ0xFX0RJRF9FTlRFUl06IExpZmVjeWNsZUhvb2tzLkRpZEVudGVyLFxuICAgIFtMSUZFQ1lDTEVfV0lMTF9MRUFWRV06IExpZmVjeWNsZUhvb2tzLldpbGxMZWF2ZSxcbiAgICBbTElGRUNZQ0xFX0RJRF9MRUFWRV06IExpZmVjeWNsZUhvb2tzLkRpZExlYXZlLFxufTtcbmNvbnN0IGlkcyA9IHsgbWFpbjogMCB9O1xuY29uc3QgZ2VuZXJhdGVJZCA9ICh0eXBlID0gXCJtYWluXCIpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgaWQgPSAoKF9hID0gaWRzW3R5cGVdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwKSArIDE7XG4gICAgaWRzW3R5cGVdID0gaWQ7XG4gICAgcmV0dXJuIGlkLnRvU3RyaW5nKCk7XG59O1xuY29uc3QgZmlyZUxpZmVjeWNsZSA9ICh2dWVDb21wb25lbnQsIHZ1ZUluc3RhbmNlLCBsaWZlY3ljbGUpID0+IHtcbiAgICBpZiAodnVlQ29tcG9uZW50ID09PSBudWxsIHx8IHZ1ZUNvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdnVlQ29tcG9uZW50W2xpZmVjeWNsZV0pIHtcbiAgICAgICAgdnVlQ29tcG9uZW50W2xpZmVjeWNsZV0uYmluZCh2dWVJbnN0YW5jZSA9PT0gbnVsbCB8fCB2dWVJbnN0YW5jZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdnVlSW5zdGFuY2UudmFsdWUpKCk7XG4gICAgfVxuICAgIGNvbnN0IGluc3RhbmNlID0gdnVlSW5zdGFuY2UgPT09IG51bGwgfHwgdnVlSW5zdGFuY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZ1ZUluc3RhbmNlLnZhbHVlO1xuICAgIGlmIChpbnN0YW5jZSA9PT0gbnVsbCB8fCBpbnN0YW5jZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW5zdGFuY2VbbGlmZWN5Y2xlXSkge1xuICAgICAgICBpbnN0YW5jZVtsaWZlY3ljbGVdKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpcmUgYW55IENvbXBvc2l0aW9uIEFQSVxuICAgICAqIElvbmljIExpZmVjeWNsZSBob29rc1xuICAgICAqL1xuICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICBjb25zdCBob29rID0gaG9va05hbWVzW2xpZmVjeWNsZV07XG4gICAgICAgIGNvbnN0IGhvb2tzID0gaW5zdGFuY2VbaG9va107XG4gICAgICAgIGlmIChob29rcykge1xuICAgICAgICAgICAgaG9va3MuZm9yRWFjaCgoaG9vaykgPT4gaG9vaygpKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5jb25zdCBnZXRDb25maWcgPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgY29uc3QgSW9uaWMgPSB3aW5kb3cuSW9uaWM7XG4gICAgICAgIGlmIChJb25pYyAmJiBJb25pYy5jb25maWcpIHtcbiAgICAgICAgICAgIHJldHVybiBJb25pYy5jb25maWc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXRcbiAqIGNhbiBiZSB1c2VkIHRvIHByb3ZpZGUgYSBsaWZlY3ljbGUgaG9vay5cbiAqL1xuY29uc3QgaW5qZWN0SG9vayA9IChsaWZlY3ljbGVUeXBlLCBob29rLCBjb21wb25lbnQpID0+IHtcbiAgICBpZiAoY29tcG9uZW50KSB7XG4gICAgICAgIC8vIEFkZCB0byBwdWJsaWMgaW5zdGFuY2Ugc28gaXQgaXMgYWNjZXNzaWJsZSB0byBJb25Sb3V0ZXJPdXRsZXRcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gY29tcG9uZW50O1xuICAgICAgICBjb25zdCBob29rcyA9IHRhcmdldC5wcm94eVtsaWZlY3ljbGVUeXBlXSB8fCAodGFyZ2V0LnByb3h5W2xpZmVjeWNsZVR5cGVdID0gW10pO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lIHByb3BlcnR5IG9uIHB1YmxpYyBpbnN0YW5jZXMgdXNpbmcgYHNldHVwYCBzeW50YXggaW4gVnVlIDMueFxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHRhcmdldC5leHBvc2VkKSB7XG4gICAgICAgICAgICB0YXJnZXQuZXhwb3NlZFtsaWZlY3ljbGVUeXBlXSA9IGhvb2tzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdyYXBwZWRIb29rID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuaXNVbm1vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXJncyA/IGhvb2soLi4uYXJncykgOiBob29rKCk7XG4gICAgICAgIH07XG4gICAgICAgIGhvb2tzLnB1c2god3JhcHBlZEhvb2spO1xuICAgICAgICByZXR1cm4gd3JhcHBlZEhvb2s7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJbQGlvbmljL3Z1ZV06IElvbmljIExpZmVjeWNsZSBIb29rcyBjYW4gb25seSBiZSB1c2VkIGR1cmluZyBleGVjdXRpb24gb2Ygc2V0dXAoKS5cIik7XG4gICAgfVxufTtcbmNvbnN0IGNyZWF0ZUhvb2sgPSAobGlmZWN5Y2xlKSA9PiB7XG4gICAgcmV0dXJuIChob29rLCB0YXJnZXQgPSBnZXRDdXJyZW50SW5zdGFuY2UoKSkgPT4gaW5qZWN0SG9vayhsaWZlY3ljbGUsIGhvb2ssIHRhcmdldCk7XG59O1xuY29uc3Qgb25Jb25WaWV3V2lsbEVudGVyID0gY3JlYXRlSG9vayhMaWZlY3ljbGVIb29rcy5XaWxsRW50ZXIpO1xuY29uc3Qgb25Jb25WaWV3RGlkRW50ZXIgPSBjcmVhdGVIb29rKExpZmVjeWNsZUhvb2tzLkRpZEVudGVyKTtcbmNvbnN0IG9uSW9uVmlld1dpbGxMZWF2ZSA9IGNyZWF0ZUhvb2soTGlmZWN5Y2xlSG9va3MuV2lsbExlYXZlKTtcbmNvbnN0IG9uSW9uVmlld0RpZExlYXZlID0gY3JlYXRlSG9vayhMaWZlY3ljbGVIb29rcy5EaWRMZWF2ZSk7XG5cbi8qKlxuICogVXNlZCB0byBuYXZpZ2F0ZSB3aXRoaW4gVnVlIFJvdXRlclxuICogd2hpbGUgY29udHJvbGxpbmcgdGhlIGFuaW1hdGlvbi5cbiAqL1xuY29uc3QgdXNlSW9uUm91dGVyID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY2FuR29CYWNrLCBnb0JhY2ssIGdvRm9yd2FyZCwgaGFuZGxlTmF2aWdhdGUgfSA9IGluamVjdChcIm5hdk1hbmFnZXJcIik7XG4gICAgY29uc3QgbmF2aWdhdGUgPSAobG9jYXRpb24sIHJvdXRlckRpcmVjdGlvbiwgcm91dGVyQWN0aW9uLCByb3V0ZXJBbmltYXRpb24pID0+IGhhbmRsZU5hdmlnYXRlKGxvY2F0aW9uLCByb3V0ZXJBY3Rpb24sIHJvdXRlckRpcmVjdGlvbiwgcm91dGVyQW5pbWF0aW9uKTtcbiAgICBjb25zdCBwdXNoID0gKGxvY2F0aW9uLCByb3V0ZXJBbmltYXRpb24pID0+IG5hdmlnYXRlKGxvY2F0aW9uLCBcImZvcndhcmRcIiwgXCJwdXNoXCIsIHJvdXRlckFuaW1hdGlvbik7XG4gICAgY29uc3QgcmVwbGFjZSA9IChsb2NhdGlvbiwgcm91dGVyQW5pbWF0aW9uKSA9PiBuYXZpZ2F0ZShsb2NhdGlvbiwgXCJyb290XCIsIFwicmVwbGFjZVwiLCByb3V0ZXJBbmltYXRpb24pO1xuICAgIGNvbnN0IGJhY2sgPSAocm91dGVyQW5pbWF0aW9uKSA9PiBnb0JhY2socm91dGVyQW5pbWF0aW9uKTtcbiAgICBjb25zdCBmb3J3YXJkID0gKHJvdXRlckFuaW1hdGlvbikgPT4gZ29Gb3J3YXJkKHJvdXRlckFuaW1hdGlvbik7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2FuR29CYWNrLFxuICAgICAgICBwdXNoLFxuICAgICAgICByZXBsYWNlLFxuICAgICAgICBiYWNrLFxuICAgICAgICBmb3J3YXJkLFxuICAgICAgICBuYXZpZ2F0ZSxcbiAgICB9O1xufTtcblxuY29uc3QgSW9uaWNWdWUgPSB7XG4gICAgYXN5bmMgaW5zdGFsbChfLCBjb25maWcgPSB7fSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQnkgZGVmYXVsdCBJb25pYyBGcmFtZXdvcmsgaGlkZXMgZWxlbWVudHMgdGhhdFxuICAgICAgICAgKiBhcmUgbm90IGh5ZHJhdGVkLCBidXQgaW4gdGhlIENFIGJ1aWxkIHRoZXJlIGlzIG5vXG4gICAgICAgICAqIGh5ZHJhdGlvbi5cbiAgICAgICAgICogVE9ETyBGVy0yNzk3OiBSZW1vdmUgd2hlbiBhbGwgaW50ZWdyYXRpb25zIGhhdmUgYmVlblxuICAgICAgICAgKiBtaWdyYXRlZCB0byBDRSBidWlsZC5cbiAgICAgICAgICovXG4gICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW9uLWNlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGluaXRpYWxpemUoY29uZmlnKTtcbiAgICB9LFxufTtcblxuY29uc3QgSW9uQmFja0J1dHRvbiA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29tcG9uZW50KChfLCB7IGF0dHJzLCBzbG90cyB9KSA9PiB7XG4gICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQxZCgpO1xuICAgIC8vIFRPRE8oRlctMjk2OSk6IHR5cGVcbiAgICBjb25zdCBpb25Sb3V0ZXIgPSBpbmplY3QoXCJuYXZNYW5hZ2VyXCIpO1xuICAgIGNvbnN0IG9uQ2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIHVzaW5nIGlvbi1iYWNrLWJ1dHRvbiBvdXRzaWRlIG9mXG4gICAgICAgICAqIGEgcm91dGluZyBjb250ZXh0LCBpb25Sb3V0ZXIgaXMgdW5kZWZpbmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKGlvblJvdXRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmYXVsdEhyZWYgPSBhdHRyc1tcImRlZmF1bHQtaHJlZlwiXSB8fCBhdHRyc1tcImRlZmF1bHRIcmVmXCJdO1xuICAgICAgICBjb25zdCByb3V0ZXJBbmltYXRpb24gPSBhdHRyc1tcInJvdXRlci1hbmltYXRpb25cIl0gfHwgYXR0cnNbXCJyb3V0ZXJBbmltYXRpb25cIl07XG4gICAgICAgIGlvblJvdXRlci5oYW5kbGVOYXZpZ2F0ZUJhY2soZGVmYXVsdEhyZWYsIHJvdXRlckFuaW1hdGlvbik7XG4gICAgfTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICByZXR1cm4gaChcImlvbi1iYWNrLWJ1dHRvblwiLCBPYmplY3QuYXNzaWduKHsgb25DbGljayB9LCBhdHRycyksIHNsb3RzLmRlZmF1bHQgJiYgc2xvdHMuZGVmYXVsdCgpKTtcbiAgICB9O1xufSwge1xuICAgIG5hbWU6IFwiSW9uQmFja0J1dHRvblwiLFxufSk7XG5cbmNvbnN0IElvblBhZ2UgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbXBvbmVudCh7XG4gICAgbmFtZTogXCJJb25QYWdlXCIsXG4gICAgcHJvcHM6IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgICAgICByZWdpc3RlcklvblBhZ2U6IHsgdHlwZTogRnVuY3Rpb24sIGRlZmF1bHQ6ICgpID0+IHsgfSB9LFxuICAgIH0sXG4gICAgbW91bnRlZCgpIHtcbiAgICAgICAgdGhpcy4kcHJvcHMucmVnaXN0ZXJJb25QYWdlKHRoaXMuJHJlZnMuaW9uUGFnZSk7XG4gICAgfSxcbiAgICBzZXR1cChfLCB7IGF0dHJzLCBzbG90cyB9KSB7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaChcImRpdlwiLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGF0dHJzKSwgeyBbXCJjbGFzc1wiXTogXCJpb24tcGFnZVwiLCByZWY6IFwiaW9uUGFnZVwiIH0pLCBzbG90cy5kZWZhdWx0ICYmIHNsb3RzLmRlZmF1bHQoKSk7XG4gICAgICAgIH07XG4gICAgfSxcbn0pO1xuXG4vLyBUT0RPKEZXLTI5NjkpOiB0eXBlc1xuY29uc3QgaXNWaWV3VmlzaWJsZSA9IChlbnRlcmluZ0VsKSA9PiB7XG4gICAgcmV0dXJuICghZW50ZXJpbmdFbC5jbGFzc0xpc3QuY29udGFpbnMoXCJpb24tcGFnZS1oaWRkZW5cIikgJiZcbiAgICAgICAgIWVudGVyaW5nRWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaW9uLXBhZ2UtaW52aXNpYmxlXCIpKTtcbn07XG5jb25zdCB2aWV3RGVwdGhLZXkgPSBTeW1ib2woMCk7XG5jb25zdCBJb25Sb3V0ZXJPdXRsZXQgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbXBvbmVudCh7XG4gICAgbmFtZTogXCJJb25Sb3V0ZXJPdXRsZXRcIixcbiAgICBzZXR1cCgpIHtcbiAgICAgICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQxZSgpO1xuICAgICAgICBjb25zdCBpbmplY3RlZFJvdXRlID0gaW5qZWN0KHJvdXRlTG9jYXRpb25LZXkpO1xuICAgICAgICBjb25zdCByb3V0ZSA9IHVzZVJvdXRlKCk7XG4gICAgICAgIGNvbnN0IGRlcHRoID0gaW5qZWN0KHZpZXdEZXB0aEtleSwgMCk7XG4gICAgICAgIGNvbnN0IG1hdGNoZWRSb3V0ZVJlZiA9IGNvbXB1dGVkKCgpID0+IHJvdXRlLm1hdGNoZWRbZGVwdGhdKTtcbiAgICAgICAgbGV0IHByZXZpb3VzTWF0Y2hlZFJvdXRlUmVmO1xuICAgICAgICBsZXQgcHJldmlvdXNNYXRjaGVkUGF0aDtcbiAgICAgICAgcHJvdmlkZSh2aWV3RGVwdGhLZXksIChkZXB0aCArIDEpKTtcbiAgICAgICAgcHJvdmlkZShtYXRjaGVkUm91dGVLZXksIG1hdGNoZWRSb3V0ZVJlZik7XG4gICAgICAgIGNvbnN0IGlvblJvdXRlck91dGxldCA9IHJlZigpO1xuICAgICAgICBjb25zdCBpZCA9IGdlbmVyYXRlSWQoXCJpb24tcm91dGVyLW91dGxldFwiKTtcbiAgICAgICAgY29uc3QgaW9uUm91dGVyID0gaW5qZWN0KFwibmF2TWFuYWdlclwiKTtcbiAgICAgICAgY29uc3Qgdmlld1N0YWNrcyA9IGluamVjdChcInZpZXdTdGFja3NcIik7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSBzaGFsbG93UmVmKFtdKTtcbiAgICAgICAgbGV0IHNraXBUcmFuc2l0aW9uID0gZmFsc2U7XG4gICAgICAgIC8vIFRoZSBiYXNlIHVybCBmb3IgdGhpcyByb3V0ZXIgb3V0bGV0XG4gICAgICAgIGxldCBwYXJlbnRPdXRsZXRQYXRoO1xuICAgICAgICAvKipcbiAgICAgICAgICogTm90ZTogRG8gbm90IGxpc3RlbiBmb3IgbWF0Y2hlZFJvdXRlUmVmIGJ5IGl0c2VsZiBoZXJlXG4gICAgICAgICAqIGFzIHRoZSBjYWxsYmFjayB3aWxsIG5vdCBmaXJlIGZvciBwYXJhbWV0ZXJpemVkIHJvdXRlcyAoaS5lLiAvcGFnZS86aWQpLlxuICAgICAgICAgKiBTbyBnb2luZyBmcm9tIC9wYWdlLzEgdG8gL3BhZ2UvMiB3b3VsZCBub3QgZmlyZSB0aGlzIGNhbGxiYWNrIGlmIHdlXG4gICAgICAgICAqIG9ubHkgbGlzdGVuZWQgZm9yIGNoYW5nZXMgdG8gbWF0Y2hlZFJvdXRlUmVmLlxuICAgICAgICAgKi9cbiAgICAgICAgd2F0Y2goKCkgPT4gW3JvdXRlLCBtYXRjaGVkUm91dGVSZWYudmFsdWVdLCAoW2N1cnJlbnRSb3V0ZSwgY3VycmVudE1hdGNoZWRSb3V0ZVJlZl0pID0+IHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhpcyBjYWxsYmFjayBjaGVja3Mgd2hldGhlciBvciBub3QgYSByb3V0ZXIgb3V0bGV0XG4gICAgICAgICAgICAgKiBuZWVkcyB0byByZXNwb25kIHRvIGEgY2hhbmdlIGluIHRoZSBtYXRjaGVkIHJvdXRlLlxuICAgICAgICAgICAgICogSXQgaGFuZGxlcyBhIGZldyBjYXNlczpcbiAgICAgICAgICAgICAqIDEuIFRoZSBtYXRjaGVkIHJvdXRlIGlzIHVuZGVmaW5lZC4gVGhpcyBtZWFucyB0aGF0XG4gICAgICAgICAgICAgKiB0aGUgbWF0Y2hlZCByb3V0ZSBpcyBub3QgYXBwbGljYWJsZSB0byB0aGlzIG91dGxldC5cbiAgICAgICAgICAgICAqIEZvciBleGFtcGxlLCBhIC9zZXR0aW5ncyByb3V0ZSBpcyBub3QgYXBwbGljYWJsZVxuICAgICAgICAgICAgICogdG8gYSAvdGFicy8uLi4gcm91dGUuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogTm90ZTogV2hlbiBnb2luZyBiYWNrIHRvIGEgdGFicyBvdXRsZXQgZnJvbSBhIG5vbi10YWJzIG91dGxldCxcbiAgICAgICAgICAgICAqIHRoZSB0YWJzIG91dGxldCBzaG91bGQgTk9UIGF0dGVtcHQgYSBwYWdlIHRyYW5zaXRpb24gZnJvbSB0aGVcbiAgICAgICAgICAgICAqIHByZXZpb3VzIHRhYiB0byB0aGUgYWN0aXZlIHRhYi4gVG8gZG8gdGhpcyB3ZSBjb21wYXJlIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgKiByb3V0ZSB3aXRoIHRoZSBwcmV2aW91cyByb3V0ZS4gVW5mb3J0dW5hdGVseSwgd2UgY2Fubm90IHJlbHkgb24gdGhlXG4gICAgICAgICAgICAgKiBwcmV2aW91cyB2YWx1ZSBwcm92aWRlZCBieSBWdWUgaW4gdGhlIHdhdGNoIGNhbGxiYWNrLiBUaGlzIGlzIGJlY2F1c2VcbiAgICAgICAgICAgICAqIHdoZW4gY29taW5nIGJhY2sgdG8gdGhlIHRhYnMgY29udGV4dCwgdGhlIHByZXZpb3VzIG1hdGNoZWQgcm91dGUgd2lsbFxuICAgICAgICAgICAgICogYmUgdW5kZWZpbmVkIChiZWNhdXNlIG5vdGhpbmcgaW4gdGhlIHRhYnMgY29udGV4dCBtYXRjaGVzIC9zZXR0aW5ncylcbiAgICAgICAgICAgICAqIGJ1dCB0aGUgY3VycmVudCBtYXRjaGVkIHJvdXRlIHdpbGwgYmUgZGVmaW5lZCBhbmQgc28gYSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgKiB3aWxsIGFsd2F5cyBvY2N1ci5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiAyLiBUaGUgbWF0Y2hlZCByb3V0ZSBpcyBkZWZpbmVkIGFuZCBpcyBkaWZmZXJlbnQgdGhhblxuICAgICAgICAgICAgICogdGhlIHByZXZpb3VzbHkgbWF0Y2hlZCByb3V0ZS4gVGhpcyBpcyB0aGUgbW9zdFxuICAgICAgICAgICAgICogY29tbW9uIGNhc2Ugc3VjaCBhcyB3aGVuIHlvdSBnbyBmcm9tIC9wYWdlMSB0byAvcGFnZTIuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogMy4gVGhlIG1hdGNoZWQgcm91dGUgaXMgdGhlIHNhbWUgYnV0IHRoZSBwYXJhbWV0ZXJzIGFyZSBkaWZmZXJlbnQuXG4gICAgICAgICAgICAgKiBUaGlzIGlzIGEgc3BlY2lhbCBjYXNlIGZvciBwYXJhbWV0ZXJpemVkIHJvdXRlcyAoaS5lLiAvcGFnZS86aWQpLlxuICAgICAgICAgICAgICogV2hlbiBnb2luZyBmcm9tIC9wYWdlLzEgdG8gL3BhZ2UvMiwgdGhlIG1hdGNoZWQgcm91dGUgb2JqZWN0IHdpbGxcbiAgICAgICAgICAgICAqIGJlIHRoZSBzYW1lLCBidXQgd2Ugc3RpbGwgbmVlZCB0byBwZXJmb3JtIGEgcGFnZSB0cmFuc2l0aW9uLiBUbyBkbyB0aGlzXG4gICAgICAgICAgICAgKiB3ZSBjaGVjayBpZiB0aGUgcGFyYW1ldGVycyBhcmUgZGlmZmVyZW50IChpLmUuIDEgdnMgMikuIFRvIGF2b2lkIGVudW1lcmF0aW5nXG4gICAgICAgICAgICAgKiBhbGwgb2YgdGhlIGtleXMgaW4gdGhlIHBhcmFtcyBvYmplY3QsIHdlIGNoZWNrIHRoZSB1cmwgcGF0aCB0b1xuICAgICAgICAgICAgICogc2VlIGlmIHRoZXkgYXJlIGRpZmZlcmVudCBhZnRlciBlbnN1cmluZyB3ZSBhcmUgaW4gYSBwYXJhbWV0ZXJpemVkIHJvdXRlLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoY3VycmVudE1hdGNoZWRSb3V0ZVJlZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlZERpZmZlcmVudFJvdXRlcyA9IGN1cnJlbnRNYXRjaGVkUm91dGVSZWYgIT09IHByZXZpb3VzTWF0Y2hlZFJvdXRlUmVmO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZWREaWZmZXJlbnRQYXJhbWV0ZXJSb3V0ZXMgPSBjdXJyZW50Um91dGUubWF0Y2hlZFtjdXJyZW50Um91dGUubWF0Y2hlZC5sZW5ndGggLSAxXSA9PT1cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE1hdGNoZWRSb3V0ZVJlZiAmJlxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Um91dGUucGF0aCAhPT0gcHJldmlvdXNNYXRjaGVkUGF0aDtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZERpZmZlcmVudFJvdXRlcyB8fCBtYXRjaGVkRGlmZmVyZW50UGFyYW1ldGVyUm91dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldHVwVmlld0l0ZW0obWF0Y2hlZFJvdXRlUmVmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmV2aW91c01hdGNoZWRSb3V0ZVJlZiA9IGN1cnJlbnRNYXRjaGVkUm91dGVSZWY7XG4gICAgICAgICAgICBwcmV2aW91c01hdGNoZWRQYXRoID0gY3VycmVudFJvdXRlLnBhdGg7XG4gICAgICAgIH0sIFxuICAgICAgICAvKipcbiAgICAgICAgICogRnV0dXJlIHZlcnNpb25zIG9mIFZ1ZSBtYXkgZGVmYXVsdCB3YXRjaGluZyBuZXN0ZWRcbiAgICAgICAgICogcmVhY3RpdmUgb2JqZWN0cyB0byBcImRlZXA6IGZhbHNlXCIuXG4gICAgICAgICAqIFdlIGV4cGxpY2l0bHkgc2V0IHRoaXMgd2F0Y2hlciB0byBcImRlZXA6IHRydWVcIiB0b1xuICAgICAgICAgKiBhY2NvdW50IGZvciB0aGF0LlxuICAgICAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvY29yZS9pc3N1ZXMvOTk2NSNpc3N1ZWNvbW1lbnQtMTg3NTA2NzQ5OVxuICAgICAgICAgKi9cbiAgICAgICAgeyBkZWVwOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCBjYW5TdGFydCA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IGdldENvbmZpZygpO1xuICAgICAgICAgICAgY29uc3Qgc3dpcGVFbmFibGVkID0gY29uZmlnICYmXG4gICAgICAgICAgICAgICAgY29uZmlnLmdldChcInN3aXBlQmFja0VuYWJsZWRcIiwgaW9uUm91dGVyT3V0bGV0LnZhbHVlLm1vZGUgPT09IFwiaW9zXCIpO1xuICAgICAgICAgICAgaWYgKCFzd2lwZUVuYWJsZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY29uc3Qgc3RhY2sgPSB2aWV3U3RhY2tzLmdldFZpZXdTdGFjayhpZCk7XG4gICAgICAgICAgICBpZiAoIXN0YWNrIHx8IHN0YWNrLmxlbmd0aCA8PSAxKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogV2Ugb25seSB3YW50IHRvIG91dGxldCBvZiB0aGUgZW50ZXJpbmcgdmlld1xuICAgICAgICAgICAgICogdG8gcmVzcG9uZCB0byB0aGlzIGdlc3R1cmUsIHNvIGNoZWNrXG4gICAgICAgICAgICAgKiB0byBtYWtlIHN1cmUgdGhlIHZpZXcgaXMgaW4gdGhlIG91dGxldCB3ZSB3YW50LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb25zdCByb3V0ZUluZm8gPSBpb25Sb3V0ZXIuZ2V0TGVhdmluZ1JvdXRlSW5mbygpO1xuICAgICAgICAgICAgY29uc3QgZW50ZXJpbmdWaWV3SXRlbSA9IHZpZXdTdGFja3MuZmluZFZpZXdJdGVtQnlSb3V0ZUluZm8oeyBwYXRobmFtZTogcm91dGVJbmZvLnB1c2hlZEJ5Um91dGUgfHwgXCJcIiB9LCBpZCk7XG4gICAgICAgICAgICByZXR1cm4gISFlbnRlcmluZ1ZpZXdJdGVtO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvblN0YXJ0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm91dGVJbmZvID0gaW9uUm91dGVyLmdldExlYXZpbmdSb3V0ZUluZm8oKTtcbiAgICAgICAgICAgIGNvbnN0IHsgcm91dGVyQW5pbWF0aW9uIH0gPSByb3V0ZUluZm87XG4gICAgICAgICAgICBjb25zdCBlbnRlcmluZ1ZpZXdJdGVtID0gdmlld1N0YWNrcy5maW5kVmlld0l0ZW1CeVJvdXRlSW5mbyh7IHBhdGhuYW1lOiByb3V0ZUluZm8ucHVzaGVkQnlSb3V0ZSB8fCBcIlwiIH0sIGlkKTtcbiAgICAgICAgICAgIGNvbnN0IGxlYXZpbmdWaWV3SXRlbSA9IHZpZXdTdGFja3MuZmluZFZpZXdJdGVtQnlSb3V0ZUluZm8ocm91dGVJbmZvLCBpZCk7XG4gICAgICAgICAgICBpZiAobGVhdmluZ1ZpZXdJdGVtKSB7XG4gICAgICAgICAgICAgICAgbGV0IGFuaW1hdGlvbkJ1aWxkZXIgPSByb3V0ZXJBbmltYXRpb247XG4gICAgICAgICAgICAgICAgY29uc3QgZW50ZXJpbmdFbCA9IGVudGVyaW5nVmlld0l0ZW0uaW9uUGFnZUVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVhdmluZ0VsID0gbGVhdmluZ1ZpZXdJdGVtLmlvblBhZ2VFbGVtZW50O1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIElmIHdlIGFyZSBnb2luZyBiYWNrIGZyb20gYSBwYWdlIHRoYXRcbiAgICAgICAgICAgICAgICAgKiB3YXMgcHJlc2VudGVkIHVzaW5nIGEgY3VzdG9tIGFuaW1hdGlvblxuICAgICAgICAgICAgICAgICAqIHdlIHNob3VsZCBkZWZhdWx0IHRvIHVzaW5nIHRoYXRcbiAgICAgICAgICAgICAgICAgKiB1bmxlc3MgdGhlIGRldmVsb3BlciBleHBsaWNpdGx5XG4gICAgICAgICAgICAgICAgICogcHJvdmlkZWQgYW5vdGhlciBhbmltYXRpb24uXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgY29uc3QgY3VzdG9tQW5pbWF0aW9uID0gZW50ZXJpbmdWaWV3SXRlbS5yb3V0ZXJBbmltYXRpb247XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbkJ1aWxkZXIgPT09IHVuZGVmaW5lZCAmJiBjdXN0b21BbmltYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25CdWlsZGVyID0gY3VzdG9tQW5pbWF0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZWF2aW5nVmlld0l0ZW0ucm91dGVyQW5pbWF0aW9uID0gYW5pbWF0aW9uQnVpbGRlcjtcbiAgICAgICAgICAgICAgICBhd2FpdCB0cmFuc2l0aW9uKGVudGVyaW5nRWwsIGxlYXZpbmdFbCwgXCJiYWNrXCIsIGlvblJvdXRlci5jYW5Hb0JhY2soMiksIHRydWUsIGFuaW1hdGlvbkJ1aWxkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvbkVuZCA9IChzaG91bGRDb250aW51ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHNob3VsZENvbnRpbnVlKSB7XG4gICAgICAgICAgICAgICAgc2tpcFRyYW5zaXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVzZSB0aGUgc2FtZSBsb2dpYyBhcyBjbGlja2luZ1xuICAgICAgICAgICAgICAgICAqIGlvbi1iYWNrLWJ1dHRvbiB0byBkZXRlcm1pbmUgd2hlcmVcbiAgICAgICAgICAgICAgICAgKiB0byBnbyBiYWNrIHRvLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGlvblJvdXRlci5oYW5kbGVOYXZpZ2F0ZUJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEluIHRoZSBldmVudCB0aGF0IHRoZSBzd2lwZVxuICAgICAgICAgICAgICAgICAqIGdlc3R1cmUgd2FzIGFib3J0ZWQsIHdlIHNob3VsZFxuICAgICAgICAgICAgICAgICAqIHJlLWhpZGUgdGhlIHBhZ2UgdGhhdCB3YXMgZ29pbmcgdG8gZW50ZXIuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGVJbmZvID0gaW9uUm91dGVyLmdldEN1cnJlbnRSb3V0ZUluZm8oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlbnRlcmluZ1ZpZXdJdGVtID0gdmlld1N0YWNrcy5maW5kVmlld0l0ZW1CeVJvdXRlSW5mbyh7IHBhdGhuYW1lOiByb3V0ZUluZm8ucHVzaGVkQnlSb3V0ZSB8fCBcIlwiIH0sIGlkKTtcbiAgICAgICAgICAgICAgICBlbnRlcmluZ1ZpZXdJdGVtLmlvblBhZ2VFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICBlbnRlcmluZ1ZpZXdJdGVtLmlvblBhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpb24tcGFnZS1oaWRkZW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHdhdGNoKGlvblJvdXRlck91dGxldCwgKCkgPT4ge1xuICAgICAgICAgICAgaW9uUm91dGVyT3V0bGV0LnZhbHVlLnN3aXBlSGFuZGxlciA9IHtcbiAgICAgICAgICAgICAgICBjYW5TdGFydCxcbiAgICAgICAgICAgICAgICBvblN0YXJ0LFxuICAgICAgICAgICAgICAgIG9uRW5kLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHRyYW5zaXRpb24gPSBhc3luYyAoZW50ZXJpbmdFbCwgbGVhdmluZ0VsLCBkaXJlY3Rpb24sIHNob3dHb0JhY2ssIHByb2dyZXNzQW5pbWF0aW9uLCBhbmltYXRpb25CdWlsZGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2tpcFRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBza2lwVHJhbnNpdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVudGVyaW5nRWwgPT09IGxlYXZpbmdFbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZW50ZXJpbmdFbC5jbGFzc0xpc3QuYWRkKFwiaW9uLXBhZ2UtaW52aXNpYmxlXCIpO1xuICAgICAgICAgICAgY29uc3QgaGFzUm9vdERpcmVjdGlvbiA9IGRpcmVjdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGRpcmVjdGlvbiA9PT0gXCJyb290XCIgfHwgZGlyZWN0aW9uID09PSBcIm5vbmVcIjtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGlvblJvdXRlck91dGxldC52YWx1ZS5jb21taXQoZW50ZXJpbmdFbCwgbGVhdmluZ0VsLCB7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogcmVwbGFjZSBvcGVyYXRpb25zIHJlc3VsdCBpbiBhIGRpcmVjdGlvbiBvZiBub25lLlxuICAgICAgICAgICAgICAgICAqIFRoZXNlIHR5cGljYWxseSBkbyBub3QgaGF2ZSBuZWVkIGFuaW1hdGlvbnMsIHNvIHdlIHNldFxuICAgICAgICAgICAgICAgICAqIHRoZSBkdXJhdGlvbiB0byAwLiBIb3dldmVyLCBpZiBhIGRldmVsb3BlciBleHBsaWNpdGx5XG4gICAgICAgICAgICAgICAgICogcGFzc2VzIGFuIGFuaW1hdGlvbkJ1aWxkZXIsIHdlIHNob3VsZCBhc3N1bWUgdGhhdFxuICAgICAgICAgICAgICAgICAqIHRoZXkgd2FudCBhbiBhbmltYXRpb24gdG8gYmUgcGxheWVkIGV2ZW5cbiAgICAgICAgICAgICAgICAgKiB0aG91Z2ggaXQgaXMgYSByZXBsYWNlIG9wZXJhdGlvbi5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogaGFzUm9vdERpcmVjdGlvbiAmJiBhbmltYXRpb25CdWlsZGVyID09PSB1bmRlZmluZWQgPyAwIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICAgICAgICBzaG93R29CYWNrLFxuICAgICAgICAgICAgICAgIHByb2dyZXNzQW5pbWF0aW9uLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkJ1aWxkZXIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGhhbmRsZVBhZ2VUcmFuc2l0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm91dGVJbmZvID0gaW9uUm91dGVyLmdldEN1cnJlbnRSb3V0ZUluZm8oKTtcbiAgICAgICAgICAgIGNvbnN0IHsgcm91dGVyRGlyZWN0aW9uLCByb3V0ZXJBY3Rpb24sIHJvdXRlckFuaW1hdGlvbiwgcHJldlJvdXRlTGFzdFBhdGhuYW1lLCBkZWx0YSwgfSA9IHJvdXRlSW5mbztcbiAgICAgICAgICAgIGNvbnN0IGVudGVyaW5nVmlld0l0ZW0gPSB2aWV3U3RhY2tzLmZpbmRWaWV3SXRlbUJ5Um91dGVJbmZvKHJvdXRlSW5mbywgaWQpO1xuICAgICAgICAgICAgbGV0IGxlYXZpbmdWaWV3SXRlbSA9IHZpZXdTdGFja3MuZmluZExlYXZpbmdWaWV3SXRlbUJ5Um91dGVJbmZvKHJvdXRlSW5mbywgaWQpO1xuICAgICAgICAgICAgY29uc3QgZW50ZXJpbmdFbCA9IGVudGVyaW5nVmlld0l0ZW0uaW9uUGFnZUVsZW1lbnQ7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEFsbCB2aWV3cyB0aGF0IGNhbiBiZSB0cmFuc2l0aW9uZWQgdG8gbXVzdCBoYXZlXG4gICAgICAgICAgICAgKiBhbiBgPGlvbi1wYWdlPmAgZWxlbWVudCBmb3IgdHJhbnNpdGlvbnMgYW5kIGxpZmVjeWNsZVxuICAgICAgICAgICAgICogbWV0aG9kcyB0byB3b3JrIHByb3Blcmx5LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoZW50ZXJpbmdFbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBbQGlvbmljL3Z1ZSBXYXJuaW5nXTogVGhlIHZpZXcgeW91IGFyZSB0cnlpbmcgdG8gcmVuZGVyIGZvciBwYXRoICR7cm91dGVJbmZvLnBhdGhuYW1lfSBkb2VzIG5vdCBoYXZlIHRoZSByZXF1aXJlZCA8aW9uLXBhZ2U+IGNvbXBvbmVudC4gVHJhbnNpdGlvbnMgYW5kIGxpZmVjeWNsZSBtZXRob2RzIG1heSBub3Qgd29yayBhcyBleHBlY3RlZC5cblxuU2VlIGh0dHBzOi8vaW9uaWNmcmFtZXdvcmsuY29tL2RvY3MvdnVlL25hdmlnYXRpb24jaW9ucGFnZSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbnRlcmluZ1ZpZXdJdGVtID09PSBsZWF2aW5nVmlld0l0ZW0pXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKCFsZWF2aW5nVmlld0l0ZW0gJiYgcHJldlJvdXRlTGFzdFBhdGhuYW1lKSB7XG4gICAgICAgICAgICAgICAgbGVhdmluZ1ZpZXdJdGVtID0gdmlld1N0YWNrcy5maW5kVmlld0l0ZW1CeVBhdGhuYW1lKHByZXZSb3V0ZUxhc3RQYXRobmFtZSwgaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB0aGUgZW50ZXJpbmcgdmlldyBpcyBhbHJlYWR5XG4gICAgICAgICAgICAgKiB2aXNpYmxlLCB0aGVuIG5vIHRyYW5zaXRpb24gaXMgbmVlZGVkLlxuICAgICAgICAgICAgICogVGhpcyBpcyBtb3N0IGNvbW1vbiB3aGVuIG5hdmlnYXRpbmdcbiAgICAgICAgICAgICAqIGZyb20gYSB0YWJzIHBhZ2UgdG8gYSBub24tdGFicyBwYWdlXG4gICAgICAgICAgICAgKiBhbmQgdGhlbiBiYWNrIHRvIHRoZSB0YWJzIHBhZ2UuXG4gICAgICAgICAgICAgKiBFdmVuIHdoZW4gdGhlIHRhYnMgY29udGV4dCBuYXZpZ2F0ZWQgYXdheSxcbiAgICAgICAgICAgICAqIHRoZSBpbm5lciB0YWJzIHBhZ2Ugd2FzIHN0aWxsIGFjdGl2ZS5cbiAgICAgICAgICAgICAqIFRoaXMgYWxzbyBhdm9pZHMgYW4gaXNzdWUgd2hlcmVcbiAgICAgICAgICAgICAqIHRoZSBwcmV2aW91cyB0YWJzIHBhZ2UgaXMgaW5jb3JyZWN0bHlcbiAgICAgICAgICAgICAqIHVubW91bnRlZCBzaW5jZSBpdCB3b3VsZCBhdXRvbWF0aWNhbGx5XG4gICAgICAgICAgICAgKiB1bm1vdW50IHRoZSBwcmV2aW91cyB2aWV3LlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIFRoaXMgc2hvdWxkIGFsc28gb25seSBhcHBseSB0byBlbnRlcmluZyBhbmRcbiAgICAgICAgICAgICAqIGxlYXZpbmcgaXRlbXMgaW4gdGhlIHNhbWUgcm91dGVyIG91dGxldCAoaS5lLlxuICAgICAgICAgICAgICogVGFiMSBhbmQgVGFiMiksIG90aGVyd2lzZSB0aGlzIHdpbGxcbiAgICAgICAgICAgICAqIHJldHVybiBlYXJseSBmb3Igc3dpcGUgdG8gZ28gYmFjayB3aGVuXG4gICAgICAgICAgICAgKiBnb2luZyBmcm9tIGEgbm9uLXRhYnMgcGFnZSB0byBhIHRhYnMgcGFnZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKGlzVmlld1Zpc2libGUoZW50ZXJpbmdFbCkgJiZcbiAgICAgICAgICAgICAgICAobGVhdmluZ1ZpZXdJdGVtID09PSBudWxsIHx8IGxlYXZpbmdWaWV3SXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbGVhdmluZ1ZpZXdJdGVtLmlvblBhZ2VFbGVtZW50KSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgIWlzVmlld1Zpc2libGUobGVhdmluZ1ZpZXdJdGVtLmlvblBhZ2VFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpcmVMaWZlY3ljbGUoZW50ZXJpbmdWaWV3SXRlbS52dWVDb21wb25lbnQsIGVudGVyaW5nVmlld0l0ZW0udnVlQ29tcG9uZW50UmVmLCBMSUZFQ1lDTEVfV0lMTF9FTlRFUik7XG4gICAgICAgICAgICBpZiAoKGxlYXZpbmdWaWV3SXRlbSA9PT0gbnVsbCB8fCBsZWF2aW5nVmlld0l0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxlYXZpbmdWaWV3SXRlbS5pb25QYWdlRWxlbWVudCkgJiZcbiAgICAgICAgICAgICAgICBlbnRlcmluZ1ZpZXdJdGVtICE9PSBsZWF2aW5nVmlld0l0ZW0pIHtcbiAgICAgICAgICAgICAgICBsZXQgYW5pbWF0aW9uQnVpbGRlciA9IHJvdXRlckFuaW1hdGlvbjtcbiAgICAgICAgICAgICAgICBjb25zdCBsZWF2aW5nRWwgPSBsZWF2aW5nVmlld0l0ZW0uaW9uUGFnZUVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgZmlyZUxpZmVjeWNsZShsZWF2aW5nVmlld0l0ZW0udnVlQ29tcG9uZW50LCBsZWF2aW5nVmlld0l0ZW0udnVlQ29tcG9uZW50UmVmLCBMSUZFQ1lDTEVfV0lMTF9MRUFWRSk7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogSWYgd2UgYXJlIGdvaW5nIGJhY2sgZnJvbSBhIHBhZ2UgdGhhdFxuICAgICAgICAgICAgICAgICAqIHdhcyBwcmVzZW50ZWQgdXNpbmcgYSBjdXN0b20gYW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICogd2Ugc2hvdWxkIGRlZmF1bHQgdG8gdXNpbmcgdGhhdFxuICAgICAgICAgICAgICAgICAqIHVubGVzcyB0aGUgZGV2ZWxvcGVyIGV4cGxpY2l0bHlcbiAgICAgICAgICAgICAgICAgKiBwcm92aWRlZCBhbm90aGVyIGFuaW1hdGlvbi5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBjb25zdCBjdXN0b21BbmltYXRpb24gPSBlbnRlcmluZ1ZpZXdJdGVtLnJvdXRlckFuaW1hdGlvbjtcbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uQnVpbGRlciA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIHJvdXRlckRpcmVjdGlvbiA9PT0gXCJiYWNrXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tQW5pbWF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uQnVpbGRlciA9IGN1c3RvbUFuaW1hdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGVhdmluZ1ZpZXdJdGVtLnJvdXRlckFuaW1hdGlvbiA9IGFuaW1hdGlvbkJ1aWxkZXI7XG4gICAgICAgICAgICAgICAgYXdhaXQgdHJhbnNpdGlvbihlbnRlcmluZ0VsLCBsZWF2aW5nRWwsIHJvdXRlckRpcmVjdGlvbiwgISFyb3V0ZUluZm8ucHVzaGVkQnlSb3V0ZSwgZmFsc2UsIGFuaW1hdGlvbkJ1aWxkZXIpO1xuICAgICAgICAgICAgICAgIGxlYXZpbmdFbC5jbGFzc0xpc3QuYWRkKFwiaW9uLXBhZ2UtaGlkZGVuXCIpO1xuICAgICAgICAgICAgICAgIGxlYXZpbmdFbC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBcInRydWVcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNpbmdMaW5lYXJOYXZpZ2F0aW9uID0gdmlld1N0YWNrcy5zaXplKCkgPT09IDE7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlckFjdGlvbiA9PT0gXCJyZXBsYWNlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVhdmluZ1ZpZXdJdGVtLm1vdW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGxlYXZpbmdWaWV3SXRlbS5pb25QYWdlRWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgbGVhdmluZ1ZpZXdJdGVtLmlvblJvdXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCEocm91dGVyQWN0aW9uID09PSBcInB1c2hcIiAmJiByb3V0ZXJEaXJlY3Rpb24gPT09IFwiZm9yd2FyZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRMZWF2aW5nVmlld0JlUmVtb3ZlZCA9IHJvdXRlckRpcmVjdGlvbiAhPT0gXCJub25lXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlYXZpbmdWaWV3SXRlbSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZW50ZXJpbmdWaWV3SXRlbSAhPT0gbGVhdmluZ1ZpZXdJdGVtO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkTGVhdmluZ1ZpZXdCZVJlbW92ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlYXZpbmdWaWV3SXRlbS5tb3VudCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVhdmluZ1ZpZXdJdGVtLmlvblBhZ2VFbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVhdmluZ1ZpZXdJdGVtLmlvblJvdXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIHJvdXRlci5nbygpIGV4cGVjdHMgbmF2aWdhdGlvbiB0byBiZVxuICAgICAgICAgICAgICAgICAgICAgICAgICogbGluZWFyLiBJZiBhbiBhcHAgaXMgdXNpbmcgbXVsdGlwbGUgc3RhY2tzIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAqIGl0IGlzIG5vdCB1c2luZyBsaW5lYXIgbmF2aWdhdGlvbi4gQXMgYSByZXN1bHQsIHJvdXRlci5nbygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiB3aWxsIG5vdCBnaXZlIHRoZSByZXN1bHRzIHRoYXQgZGV2ZWxvcGVycyBhcmUgZXhwZWN0aW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNpbmdMaW5lYXJOYXZpZ2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld1N0YWNrcy51bm1vdW50TGVhdmluZ1ZpZXdzKGlkLCBlbnRlcmluZ1ZpZXdJdGVtLCBkZWx0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodXNpbmdMaW5lYXJOYXZpZ2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXdTdGFja3MubW91bnRJbnRlcm1lZGlhcnlWaWV3cyhpZCwgbGVhdmluZ1ZpZXdJdGVtLCBkZWx0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpcmVMaWZlY3ljbGUobGVhdmluZ1ZpZXdJdGVtLnZ1ZUNvbXBvbmVudCwgbGVhdmluZ1ZpZXdJdGVtLnZ1ZUNvbXBvbmVudFJlZiwgTElGRUNZQ0xFX0RJRF9MRUFWRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBJZiB0aGVyZSBpcyBubyBsZWF2aW5nIGVsZW1lbnQsIGp1c3Qgc2hvd1xuICAgICAgICAgICAgICAgICAqIHRoZSBlbnRlcmluZyBlbGVtZW50LiBXcmFwIGl0IGluIGFuIHJhZlxuICAgICAgICAgICAgICAgICAqIGluIGNhc2UgaW9uLWNvbnRlbnQncyBmdWxsc2NyZWVuIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICogaXMgcnVubmluZy4gT3RoZXJ3aXNlIHdlJ2QgaGF2ZSBhIGZsaWNrZXIuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IGVudGVyaW5nRWwuY2xhc3NMaXN0LnJlbW92ZShcImlvbi1wYWdlLWludmlzaWJsZVwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaXJlTGlmZWN5Y2xlKGVudGVyaW5nVmlld0l0ZW0udnVlQ29tcG9uZW50LCBlbnRlcmluZ1ZpZXdJdGVtLnZ1ZUNvbXBvbmVudFJlZiwgTElGRUNZQ0xFX0RJRF9FTlRFUik7XG4gICAgICAgICAgICBjb21wb25lbnRzLnZhbHVlID0gdmlld1N0YWNrcy5nZXRDaGlsZHJlblRvUmVuZGVyKGlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc2V0dXBWaWV3SXRlbSA9IChtYXRjaGVkUm91dGVSZWYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0TWF0Y2hlZFJvdXRlID0gcm91dGUubWF0Y2hlZFswXTtcbiAgICAgICAgICAgIGlmICghcGFyZW50T3V0bGV0UGF0aCkge1xuICAgICAgICAgICAgICAgIHBhcmVudE91dGxldFBhdGggPSBmaXJzdE1hdGNoZWRSb3V0ZS5wYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiBubyBtYXRjaGVkIHJvdXRlLCBkbyBub3QgZG8gYW55dGhpbmcgaW4gdGhpcyBvdXRsZXQuXG4gICAgICAgICAgICAgKiBJZiB0aGVyZSBpcyBhIG1hdGNoLCBidXQgaXQgdGhlIGZpcnN0IG1hdGNoZWQgcGF0aFxuICAgICAgICAgICAgICogaXMgbm90IHRoZSByb290IHBhdGggZm9yIHRoaXMgb3V0bGV0LCB0aGVuIHRoaXMgdmlld1xuICAgICAgICAgICAgICogY2hhbmdlIG5lZWRzIHRvIGJlIHJlbmRlcmVkIGluIGEgZGlmZmVyZW50IG91dGxldC5cbiAgICAgICAgICAgICAqIFdlIGFsc28gYWRkIGFuIGV4Y2VwdGlvbiBmb3Igd2hlbiB0aGUgbWF0Y2hlZFJvdXRlUmVmIGlzXG4gICAgICAgICAgICAgKiBlcXVhbCB0byB0aGUgZmlyc3QgbWF0Y2hlZCByb3V0ZSAoaS5lLiB0aGUgYmFzZSByb3V0ZXIgb3V0bGV0KS5cbiAgICAgICAgICAgICAqIFRoaXMgbG9naWMgaXMgbWFpbmx5IHRvIGhlbHAgbmVzdGVkIG91dGxldHMvbXVsdGktdGFiXG4gICAgICAgICAgICAgKiBzZXR1cHMgd29yayBiZXR0ZXIuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICghbWF0Y2hlZFJvdXRlUmVmLnZhbHVlIHx8XG4gICAgICAgICAgICAgICAgKG1hdGNoZWRSb3V0ZVJlZi52YWx1ZSAhPT0gZmlyc3RNYXRjaGVkUm91dGUgJiZcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RNYXRjaGVkUm91dGUucGF0aCAhPT0gcGFyZW50T3V0bGV0UGF0aCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Um91dGUgPSBpb25Sb3V0ZXIuZ2V0Q3VycmVudFJvdXRlSW5mbygpO1xuICAgICAgICAgICAgbGV0IGVudGVyaW5nVmlld0l0ZW0gPSB2aWV3U3RhY2tzLmZpbmRWaWV3SXRlbUJ5Um91dGVJbmZvKGN1cnJlbnRSb3V0ZSwgaWQpO1xuICAgICAgICAgICAgaWYgKCFlbnRlcmluZ1ZpZXdJdGVtKSB7XG4gICAgICAgICAgICAgICAgZW50ZXJpbmdWaWV3SXRlbSA9IHZpZXdTdGFja3MuY3JlYXRlVmlld0l0ZW0oaWQsIG1hdGNoZWRSb3V0ZVJlZi52YWx1ZS5jb21wb25lbnRzLmRlZmF1bHQsIG1hdGNoZWRSb3V0ZVJlZi52YWx1ZSwgY3VycmVudFJvdXRlKTtcbiAgICAgICAgICAgICAgICB2aWV3U3RhY2tzLmFkZChlbnRlcmluZ1ZpZXdJdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZW50ZXJpbmdWaWV3SXRlbS5tb3VudCkge1xuICAgICAgICAgICAgICAgIGVudGVyaW5nVmlld0l0ZW0ubW91bnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVudGVyaW5nVmlld0l0ZW0ucmVnaXN0ZXJDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlUGFnZVRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgZW50ZXJpbmdWaWV3SXRlbS5yZWdpc3RlckNhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVQYWdlVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9uZW50cy52YWx1ZSA9IHZpZXdTdGFja3MuZ2V0Q2hpbGRyZW5Ub1JlbmRlcihpZCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChtYXRjaGVkUm91dGVSZWYudmFsdWUpIHtcbiAgICAgICAgICAgIHNldHVwVmlld0l0ZW0obWF0Y2hlZFJvdXRlUmVmKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogUmVtb3ZlIHN0YWNrIGRhdGEgZm9yIHRoaXMgb3V0bGV0XG4gICAgICAgICAqIHdoZW4gb3V0bGV0IGlzIGRlc3Ryb3llZCBvdGhlcndpc2VcbiAgICAgICAgICogd2Ugd2lsbCBzZWUgY2FjaGVkIHZpZXcgZGF0YS5cbiAgICAgICAgICovXG4gICAgICAgIG9uVW5tb3VudGVkKCgpID0+IHZpZXdTdGFja3MuY2xlYXIoaWQpKTtcbiAgICAgICAgY29uc3QgcmVnaXN0ZXJJb25QYWdlID0gKHZpZXdJdGVtLCBpb25QYWdlRWwpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9sZElvblBhZ2VFbCA9IHZpZXdJdGVtLmlvblBhZ2VFbGVtZW50O1xuICAgICAgICAgICAgdmlld1N0YWNrcy5yZWdpc3RlcklvblBhZ2Uodmlld0l0ZW0sIGlvblBhZ2VFbCk7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElmIHRoZXJlIGlzIGEgcmVnaXN0ZXJDYWxsYmFjayxcbiAgICAgICAgICAgICAqIHRoZW4gdGhpcyBjb21wb25lbnQgaXMgYmVpbmcgcmVnaXN0ZXJlZFxuICAgICAgICAgICAgICogYXMgYSByZXN1bHQgb2YgYSBuYXZpZ2F0aW9uIGNoYW5nZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKHZpZXdJdGVtLnJlZ2lzdGVyQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQYWdlIHNob3VsZCBiZSBoaWRkZW4gaW5pdGlhbGx5XG4gICAgICAgICAgICAgICAgICogdG8gYXZvaWQgZmxpY2tlcmluZy5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpb25QYWdlRWwuY2xhc3NMaXN0LmFkZChcImlvbi1wYWdlLWludmlzaWJsZVwiKTtcbiAgICAgICAgICAgICAgICB2aWV3SXRlbS5yZWdpc3RlckNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogSWYgdGhlcmUgaXMgbm8gcmVnaXN0ZXJDYWxsYmFjaywgdGhlblxuICAgICAgICAgICAgICAgICAqIHRoaXMgY29tcG9uZW50IGlzIGxpa2VseSBiZWluZyByZS1yZWdpc3RlcmVkXG4gICAgICAgICAgICAgICAgICogYXMgYSByZXN1bHQgb2YgYSBob3QgbW9kdWxlIHJlcGxhY2VtZW50LlxuICAgICAgICAgICAgICAgICAqIFdlIG5lZWQgdG8gc2VlIGlmIHRoZSBvbGRJb25QYWdlRWwgaGFzXG4gICAgICAgICAgICAgICAgICogLmlvbi1wYWdlLWludmlzaWJsZS4gSWYgaXQgZG9lcyBub3QgdGhlbiB3ZVxuICAgICAgICAgICAgICAgICAqIG5lZWQgdG8gcmVtb3ZlIGl0IGZyb20gdGhlIG5ldyBpb25QYWdlRWwgb3RoZXJ3aXNlXG4gICAgICAgICAgICAgICAgICogdGhlIHBhZ2Ugd2lsbCBiZSBoaWRkZW4gd2hlbiBpdCBpcyByZXBsYWNlZC5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9sZElvblBhZ2VFbCAmJlxuICAgICAgICAgICAgICAgICFvbGRJb25QYWdlRWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaW9uLXBhZ2UtaW52aXNpYmxlXCIpKSB7XG4gICAgICAgICAgICAgICAgaW9uUGFnZUVsLmNsYXNzTGlzdC5yZW1vdmUoXCJpb24tcGFnZS1pbnZpc2libGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIGNvbXBvbmVudHMsXG4gICAgICAgICAgICBpbmplY3RlZFJvdXRlLFxuICAgICAgICAgICAgaW9uUm91dGVyT3V0bGV0LFxuICAgICAgICAgICAgcmVnaXN0ZXJJb25QYWdlLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGNvbXBvbmVudHMsIHJlZ2lzdGVySW9uUGFnZSwgaW5qZWN0ZWRSb3V0ZSB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGgoXCJpb24tcm91dGVyLW91dGxldFwiLCB7IHJlZjogXCJpb25Sb3V0ZXJPdXRsZXRcIiB9LCBjb21wb25lbnRzICYmXG4gICAgICAgICAgICBjb21wb25lbnRzLm1hcCgoYykgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICAgICAgbGV0IHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICByZWY6IGMudnVlQ29tcG9uZW50UmVmLFxuICAgICAgICAgICAgICAgICAgICBrZXk6IGMucGF0aG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVySW9uUGFnZTogKGlvblBhZ2VFbCkgPT4gcmVnaXN0ZXJJb25QYWdlKGMsIGlvblBhZ2VFbCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBJb25Sb3V0ZXJPdXRsZXQgZG9lcyBub3Qgc3VwcG9ydCBuYW1lZCBvdXRsZXRzLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlUHJvcHNPcHRpb24gPSAoX2IgPSAoX2EgPSBjLm1hdGNoZWRSb3V0ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnByb3BzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZGVmYXVsdDtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTaW5jZSBJb25Sb3V0ZXJPdXRsZXQgcmVuZGVycyBtdWx0aXBsZSBjb21wb25lbnRzLFxuICAgICAgICAgICAgICAgICAqIGVhY2ggcmVuZGVyIHdpbGwgY2F1c2UgYWxsIHByb3BzIGZ1bmN0aW9ucyB0byBiZVxuICAgICAgICAgICAgICAgICAqIGNhbGxlZCBhZ2Fpbi4gQXMgYSByZXN1bHQsIHdlIG5lZWQgdG8gY2FjaGUgdGhlIGZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgICogcmVzdWx0IGFuZCBwcm92aWRlIGl0IG9uIGVhY2ggcmVuZGVyIHNvIHRoYXQgdGhlIHByb3BzXG4gICAgICAgICAgICAgICAgICogYXJlIG5vdCBsb3N0IHdoZW4gbmF2aWdhdGluZyBmcm9tIGFuZCBiYWNrIHRvIGEgcGFnZS5cbiAgICAgICAgICAgICAgICAgKiBXaGVuIGEgY29tcG9uZW50IGlzIGRlc3Ryb3llZCBhbmQgcmUtY3JlYXRlZCwgdGhlXG4gICAgICAgICAgICAgICAgICogZnVuY3Rpb24gaXMgY2FsbGVkIGFnYWluLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IGdldFByb3BzRnVuY3Rpb25SZXN1bHQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVkUHJvcHNSZXN1bHQgPSAoX2EgPSBjLnZ1ZUNvbXBvbmVudERhdGEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wcm9wc0Z1bmN0aW9uUmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVkUHJvcHNSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZWRQcm9wc1Jlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzRnVuY3Rpb25SZXN1bHQgPSByb3V0ZVByb3BzT3B0aW9uKGluamVjdGVkUm91dGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYy52dWVDb21wb25lbnREYXRhID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjLnZ1ZUNvbXBvbmVudERhdGEpLCB7IHByb3BzRnVuY3Rpb25SZXN1bHQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvcHNGdW5jdGlvblJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGVQcm9wcyA9IHJvdXRlUHJvcHNPcHRpb25cbiAgICAgICAgICAgICAgICAgICAgPyByb3V0ZVByb3BzT3B0aW9uID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGMucGFyYW1zXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiByb3V0ZVByb3BzT3B0aW9uID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdldFByb3BzRnVuY3Rpb25SZXN1bHQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcm91dGVQcm9wc09wdGlvblxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgcHJvcHMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHByb3BzKSwgcm91dGVQcm9wcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGgoYy52dWVDb21wb25lbnQsIHByb3BzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICB9LFxufSk7XG5cbmNvbnN0IElvblRhYkJ1dHRvbiA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lQ29tcG9uZW50KHtcbiAgICBuYW1lOiBcIklvblRhYkJ1dHRvblwiLFxuICAgIHByb3BzOiB7XG4gICAgICAgIF9nZXRUYWJTdGF0ZToge1xuICAgICAgICAgICAgdHlwZTogRnVuY3Rpb24sXG4gICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgZGlzYWJsZWQ6IEJvb2xlYW4sXG4gICAgICAgIGRvd25sb2FkOiBTdHJpbmcsXG4gICAgICAgIGhyZWY6IFN0cmluZyxcbiAgICAgICAgcmVsOiBTdHJpbmcsXG4gICAgICAgIGxheW91dDogU3RyaW5nLFxuICAgICAgICBzZWxlY3RlZDogQm9vbGVhbixcbiAgICAgICAgdGFiOiBTdHJpbmcsXG4gICAgICAgIHRhcmdldDogU3RyaW5nLFxuICAgICAgICBfb25DbGljazoge1xuICAgICAgICAgICAgdHlwZTogRnVuY3Rpb24sXG4gICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgICAgIGRlZmluZUN1c3RvbUVsZW1lbnQkMWYoKTtcbiAgICAgICAgLy8gVE9ETyhGVy0yOTY5KTogdHlwZVxuICAgICAgICBjb25zdCBpb25Sb3V0ZXIgPSBpbmplY3QoXCJuYXZNYW5hZ2VyXCIsIG51bGwpO1xuICAgICAgICBjb25zdCBvbkNsaWNrID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXYuY2FuY2VsYWJsZSkge1xuICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEtlZXBpbmcgdHJhY2sgb2YgdGhlIG9yaWdpbmFsSHJlZlxuICAgICAgICAgICAgICogKGkuZS4gL3RhYnMvdGFiMSkgbGV0cyB1cyByZWRpcmVjdFxuICAgICAgICAgICAgICogdXNlcnMgYmFjayB0byBhIGNoaWxkIHBhZ2UgdXNpbmcgY3VycmVudEhyZWZcbiAgICAgICAgICAgICAqIChpLmUuIC90YWJzL3RhYjEvY2hpbGQpLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb25zdCB7IHRhYiwgaHJlZiwgX2dldFRhYlN0YXRlIH0gPSBwcm9wcztcbiAgICAgICAgICAgIGNvbnN0IHRhYlN0YXRlID0gX2dldFRhYlN0YXRlKCk7XG4gICAgICAgICAgICBjb25zdCBoYXNSb3V0ZXJPdXRsZXQgPSB0YWJTdGF0ZS5oYXNSb3V0ZXJPdXRsZXQ7XG4gICAgICAgICAgICBjb25zdCB0YXBwZWRUYWIgPSB0YWJTdGF0ZS50YWJzW3RhYl0gfHwge307XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbEhyZWYgPSB0YXBwZWRUYWIub3JpZ2luYWxIcmVmIHx8IGhyZWY7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElmIHRoZSByb3V0ZXIgb3V0bGV0IGlzIG5vdCBkZWZpbmVkLCB0aGVuIHRoZSB0YWJzIGlzIGJlaW5nIHVzZWRcbiAgICAgICAgICAgICAqIGFzIGEgYmFzaWMgdGFiIG5hdmlnYXRpb24gd2l0aG91dCB0aGUgcm91dGVyLiBJbiB0aGlzIGNhc2UsIHdlXG4gICAgICAgICAgICAgKiBkb24ndCB3YW50IHRvIHVwZGF0ZSB0aGUgaHJlZiBlbHNlIHRoZSBVUkwgd2lsbCBjaGFuZ2UuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRIcmVmID0gaGFzUm91dGVyT3V0bGV0ID8gdGFwcGVkVGFiLmN1cnJlbnRIcmVmIHx8IGhyZWYgOiBcIlwiO1xuICAgICAgICAgICAgY29uc3QgcHJldkFjdGl2ZVRhYiA9IHRhYlN0YXRlLmFjdGl2ZVRhYjtcbiAgICAgICAgICAgIGlmICghaGFzUm91dGVyT3V0bGV0ICYmIHByb3BzLl9vbkNsaWNrKSB7XG4gICAgICAgICAgICAgICAgcHJvcHMuX29uQ2xpY2sobmV3IEN1c3RvbUV2ZW50KFwiaW9uVGFiQnV0dG9uQ2xpY2tcIiwge1xuICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY6IGN1cnJlbnRIcmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHRhYiA9PT0gcHJldkFjdGl2ZVRhYixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElmIHdlIGFyZSBzdGlsbCBvbiB0aGUgc2FtZVxuICAgICAgICAgICAgICogdGFiIGFzIGJlZm9yZSwgYnV0IHRoZSBiYXNlIGhyZWZcbiAgICAgICAgICAgICAqIGRvZXMgbm90IGVxdWFsIHRoZSBjdXJyZW50IGhyZWYsXG4gICAgICAgICAgICAgKiB0aGVuIHdlIG11c3QgYmUgb24gYSBjaGlsZCBwYWdlIGFuZFxuICAgICAgICAgICAgICogc2hvdWxkIGRpcmVjdCB1c2VycyBiYWNrIHRvIHRoZSByb290XG4gICAgICAgICAgICAgKiBvZiB0aGUgdGFiLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoaW9uUm91dGVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByZXZBY3RpdmVUYWIgPT09IHRhYikge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxIcmVmICE9PSBjdXJyZW50SHJlZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW9uUm91dGVyLnJlc2V0VGFiKHRhYik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlvblJvdXRlci5jaGFuZ2VUYWIodGFiLCBjdXJyZW50SHJlZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGgoXCJpb24tdGFiLWJ1dHRvblwiLCBPYmplY3QuYXNzaWduKHsgb25DbGljayB9LCBwcm9wcyksIHNsb3RzLmRlZmF1bHQgJiYgc2xvdHMuZGVmYXVsdCgpKTtcbiAgICAgICAgfTtcbiAgICB9LFxufSk7XG5cbmNvbnN0IFdJTExfQ0hBTkdFID0gXCJpb25UYWJzV2lsbENoYW5nZVwiO1xuY29uc3QgRElEX0NIQU5HRSA9IFwiaW9uVGFic0RpZENoYW5nZVwiO1xuLyoqXG4gKiBWdWUgMy4yLjM4IGZpeGVkIGFuIGlzc3VlIHdoZXJlIFdlYiBDb21wb25lbnRcbiAqIG5hbWVzIGFyZSByZXNwZWN0ZWQgdXNpbmcga2ViYWIgY2FzZSBpbnN0ZWFkIG9mIHBhc2NhbCBjYXNlLlxuICogQXMgYSByZXN1bHQsIHdlIG5lZWQgdG8gYWNjb3VudCBmb3IgYm90aCBoZXJlIHNpbmNlIHdlIHN1cHBvcnRcbiAqIHZlcnNpb25zIG9mIFZ1ZSA8IDMuMi4zOC5cbiAqL1xuLy8gVE9ETyBGVy01OTA0XG5jb25zdCBpc1JvdXRlck91dGxldCA9IChub2RlKSA9PiB7XG4gICAgcmV0dXJuIChub2RlLnR5cGUgJiZcbiAgICAgICAgKG5vZGUudHlwZS5uYW1lID09PSBcIklvblJvdXRlck91dGxldFwiIHx8XG4gICAgICAgICAgICBub2RlLnR5cGUgPT09IFwiaW9uLXJvdXRlci1vdXRsZXRcIikpO1xufTtcbmNvbnN0IGlzVGFiID0gKG5vZGUpID0+IHtcbiAgICAvLyBUaGUgYGlvbi10YWJgIGNvbXBvbmVudCB3YXMgY3JlYXRlZCB3aXRoIHRoZSBgdi1mb3JgIGRpcmVjdGl2ZS5cbiAgICBpZiAobm9kZS50eXBlID09PSBGcmFnbWVudCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub2RlLmNoaWxkcmVuKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuY2hpbGRyZW4uc29tZSgoY2hpbGQpID0+IGlzVk5vZGUoY2hpbGQpICYmIGlzVGFiKGNoaWxkKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBJbiBjYXNlIHRoZSBmcmFnbWVudCBoYXMgbm8gY2hpbGRyZW4uXG4gICAgfVxuICAgIHJldHVybiAobm9kZS50eXBlICYmIChub2RlLnR5cGUubmFtZSA9PT0gXCJpb24tdGFiXCIgfHwgbm9kZS50eXBlID09PSBJb25UYWIpKTtcbn07XG5jb25zdCBJb25UYWJzID0gLypAX19QVVJFX18qLyBkZWZpbmVDb21wb25lbnQoe1xuICAgIG5hbWU6IFwiSW9uVGFic1wiLFxuICAgIGVtaXRzOiBbV0lMTF9DSEFOR0UsIERJRF9DSEFOR0VdLFxuICAgIGRhdGEoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoYXNSb3V0ZXJPdXRsZXQ6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgc2V0dXAocHJvcHMsIHsgc2xvdHMsIGVtaXQgfSkge1xuICAgICAgICBjb25zdCBzbG90dGVkQ29udGVudCA9IHNsb3RzLmRlZmF1bHQgJiYgc2xvdHMuZGVmYXVsdCgpO1xuICAgICAgICBsZXQgcm91dGVyT3V0bGV0ID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc2xvdHRlZENvbnRlbnQgJiYgc2xvdHRlZENvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZXZlbG9wZXJzIG11c3QgcGFzcyBhbiBpb24tcm91dGVyLW91dGxldFxuICAgICAgICAgICAgICogaW5zaWRlIG9mIGlvbi10YWJzIGlmIHRoZXkgd2FudCB0byB1c2VcbiAgICAgICAgICAgICAqIHRoZSBoaXN0b3J5IHN0YWNrIG9yIFVSTCB1cGRhdGVzIGFzc29jaWF0ZWRcbiAgICAgICAgICAgICAqIHdpdGggdGhlIHJvdXRlci5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcm91dGVyT3V0bGV0ID0gc2xvdHRlZENvbnRlbnQuZmluZCgoY2hpbGQpID0+IGlzUm91dGVyT3V0bGV0KGNoaWxkKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRhYiBiYXIgY2FuIGJlIHVzZWQgYXMgYSBzdGFuZGFsb25lIGNvbXBvbmVudCxcbiAgICAgICAgICogc28gaXQgY2Fubm90IGJlIG1vZGlmaWVkIGRpcmVjdGx5IHRocm91Z2hcbiAgICAgICAgICogSW9uVGFicy4gSW5zdGVhZCwgZGF0YSB3aWxsIGJlIHBhc3NlZCB0aHJvdWdoXG4gICAgICAgICAqIHRoZSBwcm92aWRlL2luamVjdC5cbiAgICAgICAgICovXG4gICAgICAgIHByb3ZpZGUoXCJ0YWJCYXJEYXRhXCIsIHNoYWxsb3dSZWYoe1xuICAgICAgICAgICAgaGFzUm91dGVyT3V0bGV0OiAhIXJvdXRlck91dGxldCxcbiAgICAgICAgICAgIF90YWJzV2lsbENoYW5nZTogKHRhYikgPT4gZW1pdChXSUxMX0NIQU5HRSwgeyB0YWIgfSksXG4gICAgICAgICAgICBfdGFic0RpZENoYW5nZTogKHRhYikgPT4gZW1pdChESURfQ0hBTkdFLCB7IHRhYiB9KSxcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJvcHMsXG4gICAgICAgICAgICBzbG90cyxcbiAgICAgICAgICAgIGVtaXQsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBtb3VudGVkKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogYGRlZmluZUN1c3RvbUVsZW1lbnRgIG11c3QgYmUgY2FsbGVkIGluIHRoZSBgbW91bnRlZGAgaG9va1xuICAgICAgICAgKiB0byBlbnN1cmUgdGhhdCB0aGUgY3VzdG9tIGVsZW1lbnQgaXMgZGVmaW5lZCBhZnRlciB0aGVcbiAgICAgICAgICogY29tcG9uZW50IGhhcyBiZWVuIGZ1bGx5IHJlbmRlcmVkIGFuZCBpbml0aWFsaXplZC5cbiAgICAgICAgICogVGhpcyBwcmV2ZW50cyBpc3N1ZXMgd2l0aCB1bmRlZmluZWQgcHJvcGVydGllcywgbGlrZVxuICAgICAgICAgKiBgc2VsZWN0ZWRUYWJgIGZyb20gY29yZSwgd2hpY2ggbWF5IG9jY3VyIGlmIHRoZSBjdXN0b21cbiAgICAgICAgICogZWxlbWVudCBpcyBkZWZpbmVkIHRvbyBlYXJseSBpbiB0aGUgY29tcG9uZW50J3MgbGlmZWN5Y2xlLlxuICAgICAgICAgKi9cbiAgICAgICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQxZygpO1xuICAgIH0sXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IHNsb3RzLCBwcm9wcyB9ID0gdGhpcztcbiAgICAgICAgY29uc3Qgc2xvdHRlZENvbnRlbnQgPSBzbG90cy5kZWZhdWx0ICYmIHNsb3RzLmRlZmF1bHQoKTtcbiAgICAgICAgbGV0IHJvdXRlck91dGxldCA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGhhc1RhYiA9IGZhbHNlO1xuICAgICAgICBpZiAoc2xvdHRlZENvbnRlbnQgJiYgc2xvdHRlZENvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZXZlbG9wZXJzIG11c3QgcGFzcyBhbiBpb24tcm91dGVyLW91dGxldFxuICAgICAgICAgICAgICogaW5zaWRlIG9mIGlvbi10YWJzIGlmIHRoZXkgd2FudCB0byB1c2VcbiAgICAgICAgICAgICAqIHRoZSBoaXN0b3J5IHN0YWNrIG9yIFVSTCB1cGRhdGVzIGFzc29jaWF0ZWRcbiAgICAgICAgICAgICAqIHdpdGggdGhlIHJvdXRlci5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcm91dGVyT3V0bGV0ID0gc2xvdHRlZENvbnRlbnQuZmluZCgoY2hpbGQpID0+IGlzUm91dGVyT3V0bGV0KGNoaWxkKSk7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERldmVsb3BlcnMgbXVzdCBwYXNzIGF0IGxlYXN0IG9uZSBpb24tdGFiXG4gICAgICAgICAgICAgKiBpbnNpZGUgb2YgaW9uLXRhYnMgaWYgdGhleSB3YW50IHRvIHVzZSBhXG4gICAgICAgICAgICAgKiBiYXNpYyB0YWItYmFzZWQgbmF2aWdhdGlvbiB3aXRob3V0IHRoZVxuICAgICAgICAgICAgICogaGlzdG9yeSBzdGFjayBvciBVUkwgdXBkYXRlcyBhc3NvY2lhdGVkXG4gICAgICAgICAgICAgKiB3aXRoIHRoZSByb3V0ZXIuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGhhc1RhYiA9IHNsb3R0ZWRDb250ZW50LnNvbWUoKGNoaWxkKSA9PiBpc1RhYihjaGlsZCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcm91dGVyT3V0bGV0ICYmICFoYXNUYWIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIklvblRhYnMgbXVzdCBjb250YWluIGFuIElvblJvdXRlck91dGxldCBvciBhbiBJb25UYWIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyb3V0ZXJPdXRsZXQgJiYgaGFzVGFiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJb25UYWJzIGNhbm5vdCBjb250YWluIGFuIElvblJvdXRlck91dGxldCBhbmQgSW9uVGFiIGF0IHRoZSBzYW1lIHRpbWUuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNUYWIpIHtcbiAgICAgICAgICAgIHJldHVybiBoKFwiaW9uLXRhYnNcIiwgT2JqZWN0LmFzc2lnbih7fSwgcHJvcHMpLCBzbG90dGVkQ29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRPRE8oUk9VLTExMDU2KVxuICAgICAgICAgKlxuICAgICAgICAgKiBWdWUgaGFuZGxlcyB0aGUgZXJyb3IgY2FzZSBmb3Igd2hlbiB0aGVyZSBpcyBub1xuICAgICAgICAgKiBhc3NvY2lhdGVkIHBhZ2UgbWF0Y2hpbmcgdGhlIHRhYiBgaHJlZmAuXG4gICAgICAgICAqXG4gICAgICAgICAqIE1vcmUgaW52ZXN0aWdhdGlvbiBpcyBuZWVkZWQgdG8gZGV0ZXJtaW5lIGlmIHdlXG4gICAgICAgICAqIG92ZXJyaWRlIHRoZSBlcnJvciBoYW5kbGluZyBhbmQgcHJvdmlkZSBvdXIgb3duXG4gICAgICAgICAqIGVycm9yIG1lc3NhZ2UuXG4gICAgICAgICAqL1xuICAgICAgICByZXR1cm4gaChcImlvbi10YWJzXCIsIHtcbiAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgICAgICB0b3A6IFwiMFwiLFxuICAgICAgICAgICAgICAgIGxlZnQ6IFwiMFwiLFxuICAgICAgICAgICAgICAgIHJpZ2h0OiBcIjBcIixcbiAgICAgICAgICAgICAgICBib3R0b206IFwiMFwiLFxuICAgICAgICAgICAgICAgIFwiZmxleC1kaXJlY3Rpb25cIjogXCJjb2x1bW5cIixcbiAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgICAgICAgICBjb250YWluOiBcImxheW91dCBzaXplIHN0eWxlXCIsXG4gICAgICAgICAgICAgICAgXCJ6LWluZGV4XCI6IFwiMFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSwgc2xvdHRlZENvbnRlbnQpO1xuICAgIH0sXG59KTtcblxuY29uc3QgaXNUYWJCdXR0b24gPSAoY2hpbGQpID0+IHsgdmFyIF9hOyByZXR1cm4gKChfYSA9IGNoaWxkLnR5cGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uYW1lKSA9PT0gXCJJb25UYWJCdXR0b25cIjsgfTtcbmNvbnN0IGdldFRhYnMgPSAobm9kZXMpID0+IHtcbiAgICBsZXQgdGFicyA9IFtdO1xuICAgIG5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgaWYgKGlzVGFiQnV0dG9uKG5vZGUpKSB7XG4gICAgICAgICAgICB0YWJzLnB1c2gobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShub2RlLmNoaWxkcmVuKSAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkVGFicyA9IGdldFRhYnMobm9kZS5jaGlsZHJlbik7XG4gICAgICAgICAgICB0YWJzID0gWy4uLnRhYnMsIC4uLmNoaWxkVGFic107XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGFicztcbn07XG5jb25zdCBJb25UYWJCYXIgPSBkZWZpbmVDb21wb25lbnQoe1xuICAgIG5hbWU6IFwiSW9uVGFiQmFyXCIsXG4gICAgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRhYlN0YXRlOiB7XG4gICAgICAgICAgICAgICAgYWN0aXZlVGFiOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgdGFiczoge30sXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUGFzc2luZyB0aGlzIHByb3AgdG8gZWFjaCB0YWIgYnV0dG9uXG4gICAgICAgICAgICAgICAgICogbGV0cyBpdCBiZSBhd2FyZSBvZiB0aGUgcHJlc2VuY2Ugb2ZcbiAgICAgICAgICAgICAgICAgKiB0aGUgcm91dGVyIG91dGxldC5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBoYXNSb3V0ZXJPdXRsZXQ6IGZhbHNlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRhYlZub2RlczogW10sXG4gICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb24gKi9cbiAgICAgICAgICAgIF90YWJzV2lsbENoYW5nZTogeyB0eXBlOiBGdW5jdGlvbiwgZGVmYXVsdDogKCkgPT4geyB9IH0sXG4gICAgICAgICAgICBfdGFic0RpZENoYW5nZTogeyB0eXBlOiBGdW5jdGlvbiwgZGVmYXVsdDogKCkgPT4geyB9IH0sXG4gICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvbiAqL1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgdXBkYXRlZCgpIHtcbiAgICAgICAgdGhpcy5zZXR1cFRhYlN0YXRlKGluamVjdChcIm5hdk1hbmFnZXJcIiwgbnVsbCkpO1xuICAgIH0sXG4gICAgbWV0aG9kczoge1xuICAgICAgICBzZXR1cFRhYlN0YXRlKGlvblJvdXRlcikge1xuICAgICAgICAgICAgY29uc3QgaGFzUm91dGVyT3V0bGV0ID0gdGhpcy4kZGF0YS50YWJTdGF0ZS5oYXNSb3V0ZXJPdXRsZXQ7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZvciBlYWNoIHRhYiwgd2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIGl0c1xuICAgICAgICAgICAgICogYmFzZSBocmVmIGFzIHdlbGwgYXMgYW55IGNoaWxkIHBhZ2UgdGhhdFxuICAgICAgICAgICAgICogaXMgYWN0aXZlIGluIGl0cyBzdGFjayBzbyB0aGF0IHdoZW4gd2UgZ28gYmFja1xuICAgICAgICAgICAgICogdG8gYSB0YWIgZnJvbSBhbm90aGVyIHRhYiwgd2UgY2FuIGNvcnJlY3RseVxuICAgICAgICAgICAgICogc2hvdyBhbnkgY2hpbGQgcGFnZXMgaWYgbmVjZXNzYXJ5LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb25zdCB0YWJTdGF0ZSA9IHRoaXMuJGRhdGEudGFiU3RhdGU7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICAgICAgICAgIGNvbnN0IHRhYnMgPSAodGhpcy4kZGF0YS50YWJWbm9kZXMgPSBnZXRUYWJzKChjdXJyZW50SW5zdGFuY2Uuc3ViVHJlZS5jaGlsZHJlbiB8fCBbXSkpKTtcbiAgICAgICAgICAgIHRhYnMuZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgICAgICAgICB0YWJTdGF0ZS50YWJzW2NoaWxkLnByb3BzLnRhYl0gPSB7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsSHJlZjogY2hpbGQucHJvcHMuaHJlZixcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEhyZWY6IGNoaWxkLnByb3BzLmhyZWYsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogY2hpbGQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQYXNzaW5nIHRoaXMgcHJvcCB0byBlYWNoIHRhYiBidXR0b25cbiAgICAgICAgICAgICAgICAgKiBsZXRzIGl0IGJlIGF3YXJlIG9mIHRoZSBzdGF0ZSB0aGF0XG4gICAgICAgICAgICAgICAgICogaW9uLXRhYi1iYXIgaXMgbWFuYWdpbmcgZm9yIGl0LlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNoaWxkLmNvbXBvbmVudC5wcm9wcy5fZ2V0VGFiU3RhdGUgPSAoKSA9PiB0YWJTdGF0ZTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBJZiB0aGUgcm91dGVyIG91dGxldCBpcyBub3QgZGVmaW5lZCwgdGhlbiB0aGUgdGFicyBhcmUgYmVpbmcgdXNlZFxuICAgICAgICAgICAgICAgICAqIGFzIGEgYmFzaWMgdGFiIG5hdmlnYXRpb24gd2l0aG91dCB0aGUgcm91dGVyLiBJbiB0aGlzIGNhc2UsIHRoZVxuICAgICAgICAgICAgICAgICAqIHRhYnMgd2lsbCBub3QgZW1pdCB0aGUgYGlvblRhYnNEaWRDaGFuZ2VgIGFuZCBgaW9uVGFic1dpbGxDaGFuZ2VgXG4gICAgICAgICAgICAgICAgICogZXZlbnRzIHRocm91Z2ggdGhlIGBjaGVja0FjdGl2ZVRhYmAgbWV0aG9kLiBJbnN0ZWFkLCB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAgICAgICogaGFuZGxlIHRob3NlIGV2ZW50cyB0aHJvdWdoIHRoZSB0YWIgYnV0dG9ucy5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAoIWhhc1JvdXRlck91dGxldCkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZC5jb21wb25lbnQucHJvcHMuX29uQ2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlSW9uVGFiQnV0dG9uQ2xpY2soZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jaGVja0FjdGl2ZVRhYihpb25Sb3V0ZXIpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHVwb24gc2V0dXAgYW5kIHdoZW4gdGhlXG4gICAgICAgICAqIGhpc3RvcnkgY2hhbmdlcy4gSXQgY2hlY2tzIHRoZSBjdXJyZW50IHJvdXRlXG4gICAgICAgICAqIGFuZCB1cGRhdGVzIHRoZSBhY3RpdmUgdGFiIGFjY29yZGluZ2x5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBIaXN0b3J5IGNoYW5nZXMgb25seSBvY2N1ciB3aGVuIHRoZSByb3V0ZXJcbiAgICAgICAgICogb3V0bGV0IGlzIHByZXNlbnQuIER1ZSB0byB0aGlzLCB0aGVcbiAgICAgICAgICogYGlvblRhYnNEaWRDaGFuZ2VgIGFuZCBgaW9uVGFic1dpbGxDaGFuZ2VgXG4gICAgICAgICAqIGV2ZW50cyBhcmUgb25seSBlbWl0dGVkIHdoZW4gdGhlIHJvdXRlclxuICAgICAgICAgKiBvdXRsZXQgaXMgcHJlc2VudC4gQSBkaWZmZXJlbnQgYXBwcm9hY2ggbXVzdFxuICAgICAgICAgKiBiZSB0YWtlbiBmb3IgdGFicyB3aXRob3V0IGEgcm91dGVyIG91dGxldC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGlvblJvdXRlclxuICAgICAgICAgKi9cbiAgICAgICAgY2hlY2tBY3RpdmVUYWIoaW9uUm91dGVyKSB7XG4gICAgICAgICAgICBjb25zdCBoYXNSb3V0ZXJPdXRsZXQgPSB0aGlzLiRkYXRhLnRhYlN0YXRlLmhhc1JvdXRlck91dGxldDtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRSb3V0ZSA9IGlvblJvdXRlciA9PT0gbnVsbCB8fCBpb25Sb3V0ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlvblJvdXRlci5nZXRDdXJyZW50Um91dGVJbmZvKCk7XG4gICAgICAgICAgICBjb25zdCBjaGlsZE5vZGVzID0gdGhpcy4kZGF0YS50YWJWbm9kZXM7XG4gICAgICAgICAgICBjb25zdCB7IHRhYnMsIGFjdGl2ZVRhYjogcHJldkFjdGl2ZVRhYiB9ID0gdGhpcy4kZGF0YS50YWJTdGF0ZTtcbiAgICAgICAgICAgIGNvbnN0IHRhYktleXMgPSBPYmplY3Qua2V5cyh0YWJzKTtcbiAgICAgICAgICAgIGxldCBhY3RpdmVUYWIgPSB0YWJLZXlzLmZpbmQoKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhyZWYgPSB0YWJzW2tleV0ub3JpZ2luYWxIcmVmO1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50Um91dGUgPT09IG51bGwgfHwgY3VycmVudFJvdXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50Um91dGUucGF0aG5hbWUuc3RhcnRzV2l0aChocmVmKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUYWJzIGlzIGJlaW5nIHVzZWQgYXMgYSBiYXNpYyB0YWIgbmF2aWdhdGlvbixcbiAgICAgICAgICAgICAqIHNvIHdlIG5lZWQgdG8gc2V0IHRoZSBmaXJzdCB0YWIgYXMgYWN0aXZlIHNpbmNlXG4gICAgICAgICAgICAgKiBgY2hlY2tBY3RpdmVUYWJgIHdpbGwgbm90IGJlIGNhbGxlZCBhZnRlciBzZXR1cC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKCFhY3RpdmVUYWIgJiYgIWhhc1JvdXRlck91dGxldCkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZVRhYiA9IHRhYktleXNbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZvciBlYWNoIHRhYiwgY2hlY2sgdG8gc2VlIGlmIHRoZVxuICAgICAgICAgICAgICogYmFzZSBocmVmIGhhcyBjaGFuZ2VkLiBJZiBzbywgdXBkYXRlXG4gICAgICAgICAgICAgKiBpdCBpbiB0aGUgdGFicyBzdGF0ZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhYiA9IHRhYnNbY2hpbGQucHJvcHMudGFiXTtcbiAgICAgICAgICAgICAgICBpZiAoIXRhYiB8fCB0YWIub3JpZ2luYWxIcmVmICE9PSBjaGlsZC5wcm9wcy5ocmVmKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhYnNbY2hpbGQucHJvcHMudGFiXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsSHJlZjogY2hpbGQucHJvcHMuaHJlZixcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRIcmVmOiBjaGlsZC5wcm9wcy5ocmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiBjaGlsZCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChhY3RpdmVUYWIgJiYgcHJldkFjdGl2ZVRhYikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZIcmVmID0gdGhpcy4kZGF0YS50YWJTdGF0ZS50YWJzW3ByZXZBY3RpdmVUYWJdLmN1cnJlbnRIcmVmO1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIElmIHRoZSB0YWJzIGNoYW5nZSBvciB0aGUgdXJsIGNoYW5nZXMsXG4gICAgICAgICAgICAgICAgICogdXBkYXRlIHRoZSBjdXJyZW50SHJlZiBmb3IgdGhlIGFjdGl2ZSB0YWIuXG4gICAgICAgICAgICAgICAgICogRXg6IHVybCBjaGFuZ2VzIGZyb20gL3RhYnMvdGFiMSAtLT4gL3RhYnMvdGFiMS9jaGlsZFxuICAgICAgICAgICAgICAgICAqIElmIHdlIHdlbnQgdG8gdGFiMiB0aGVuIGJhY2sgdG8gdGFiMSwgd2Ugc2hvdWxkXG4gICAgICAgICAgICAgICAgICogbGFuZCBvbiAvdGFicy90YWIxL2NoaWxkIGluc3RlYWQgb2YgL3RhYnMvdGFiMS5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlVGFiICE9PSBwcmV2QWN0aXZlVGFiIHx8XG4gICAgICAgICAgICAgICAgICAgIHByZXZIcmVmICE9PSAoY3VycmVudFJvdXRlID09PSBudWxsIHx8IGN1cnJlbnRSb3V0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudFJvdXRlLnBhdGhuYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQnkgZGVmYXVsdCB0aGUgc2VhcmNoIGlzIGB1bmRlZmluZWRgIGluIElvbmljIFZ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICogYnV0IFZ1ZSBSb3V0ZXIgY2FuIHNldCB0aGUgc2VhcmNoIHRvIHRoZSBlbXB0eSBzdHJpbmcuXG4gICAgICAgICAgICAgICAgICAgICAqIFdlIGNoZWNrIGZvciB0cnV0aHkgaGVyZSBiZWNhdXNlIGVtcHR5IHN0cmluZyBpcyBmYWxzeVxuICAgICAgICAgICAgICAgICAgICAgKiBhbmQgY3VycmVudFJvdXRlLnNlYXJjaCBjYW5ub3QgZXZlciBiZSBhIGJvb2xlYW4uXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWFyY2ggPSAoY3VycmVudFJvdXRlID09PSBudWxsIHx8IGN1cnJlbnRSb3V0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudFJvdXRlLnNlYXJjaCkgPyBgPyR7Y3VycmVudFJvdXRlLnNlYXJjaH1gIDogXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgdGFic1thY3RpdmVUYWJdID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0YWJzW2FjdGl2ZVRhYl0pLCB7IGN1cnJlbnRIcmVmOiAoY3VycmVudFJvdXRlID09PSBudWxsIHx8IGN1cnJlbnRSb3V0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudFJvdXRlLnBhdGhuYW1lKSArIHNlYXJjaCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogSWYgbmF2aWdhdGluZyBiYWNrIGFuZCB0aGUgdGFicyBjaGFuZ2UsXG4gICAgICAgICAgICAgICAgICogc2V0IHRoZSBwcmV2aW91cyB0YWIgYmFjayB0byBpdHMgb3JpZ2luYWwgaHJlZi5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAoKGN1cnJlbnRSb3V0ZSA9PT0gbnVsbCB8fCBjdXJyZW50Um91dGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnRSb3V0ZS5yb3V0ZXJBY3Rpb24pID09PSBcInBvcFwiICYmXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhYiAhPT0gcHJldkFjdGl2ZVRhYikge1xuICAgICAgICAgICAgICAgICAgICB0YWJzW3ByZXZBY3RpdmVUYWJdID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0YWJzW3ByZXZBY3RpdmVUYWJdKSwgeyBjdXJyZW50SHJlZjogdGFic1twcmV2QWN0aXZlVGFiXS5vcmlnaW5hbEhyZWYgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YWJTd2l0Y2goYWN0aXZlVGFiLCBpb25Sb3V0ZXIpO1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVJb25UYWJCdXR0b25DbGljayhldmVudCkge1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlVGFiID0gZXZlbnQuZGV0YWlsLnRhYjtcbiAgICAgICAgICAgIHRoaXMudGFiU3dpdGNoKGFjdGl2ZVRhYik7XG4gICAgICAgIH0sXG4gICAgICAgIHRhYlN3aXRjaChhY3RpdmVUYWIsIGlvblJvdXRlcikge1xuICAgICAgICAgICAgY29uc3QgaGFzUm91dGVyT3V0bGV0ID0gdGhpcy4kZGF0YS50YWJTdGF0ZS5oYXNSb3V0ZXJPdXRsZXQ7XG4gICAgICAgICAgICBjb25zdCBjaGlsZE5vZGVzID0gdGhpcy4kZGF0YS50YWJWbm9kZXM7XG4gICAgICAgICAgICBjb25zdCB7IGFjdGl2ZVRhYjogcHJldkFjdGl2ZVRhYiB9ID0gdGhpcy4kZGF0YS50YWJTdGF0ZTtcbiAgICAgICAgICAgIGNvbnN0IHRhYlN0YXRlID0gdGhpcy4kZGF0YS50YWJTdGF0ZTtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUNoaWxkID0gY2hpbGROb2Rlcy5maW5kKChjaGlsZCkgPT4geyB2YXIgX2E7IHJldHVybiBpc1RhYkJ1dHRvbihjaGlsZCkgJiYgKChfYSA9IGNoaWxkLnByb3BzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudGFiKSA9PT0gYWN0aXZlVGFiOyB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRhYkJhciA9IHRoaXMuJHJlZnMuaW9uVGFiQmFyO1xuICAgICAgICAgICAgY29uc3QgdGFiRGlkQ2hhbmdlID0gYWN0aXZlVGFiICE9PSBwcmV2QWN0aXZlVGFiO1xuICAgICAgICAgICAgaWYgKHRhYkJhcikge1xuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICB0YWJEaWRDaGFuZ2UgJiYgdGhpcy4kZGF0YS5fdGFic1dpbGxDaGFuZ2UoYWN0aXZlVGFiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1JvdXRlck91dGxldCAmJiBpb25Sb3V0ZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlvblJvdXRlci5oYW5kbGVTZXRDdXJyZW50VGFiKGFjdGl2ZVRhYik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGFiQmFyLnNlbGVjdGVkVGFiID0gdGFiU3RhdGUuYWN0aXZlVGFiID0gYWN0aXZlVGFiO1xuICAgICAgICAgICAgICAgICAgICB0YWJEaWRDaGFuZ2UgJiYgdGhpcy4kZGF0YS5fdGFic0RpZENoYW5nZShhY3RpdmVUYWIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFdoZW4gZ29pbmcgdG8gYSB0YWIgdGhhdCBkb2VzXG4gICAgICAgICAgICAgICAgICAgICAqIG5vdCBoYXZlIGFuIGFzc29jaWF0ZWQgaW9uLXRhYi1idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICogd2UgbmVlZCB0byByZW1vdmUgdGhlIHNlbGVjdGVkIHN0YXRlIGZyb21cbiAgICAgICAgICAgICAgICAgICAgICogdGhlIG9sZCB0YWIuXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICB0YWJCYXIuc2VsZWN0ZWRUYWIgPSB0YWJTdGF0ZS5hY3RpdmVUYWIgPSBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9LFxuICAgIG1vdW50ZWQoKSB7XG4gICAgICAgIGNvbnN0IGlvblJvdXRlciA9IGluamVjdChcIm5hdk1hbmFnZXJcIiwgbnVsbCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUYWIgYmFyIGNhbiBiZSB1c2VkIGFzIGEgc3RhbmRhbG9uZSBjb21wb25lbnQsXG4gICAgICAgICAqIHNvIGl0IGNhbm5vdCBiZSBtb2RpZmllZCBkaXJlY3RseSB0aHJvdWdoXG4gICAgICAgICAqIElvblRhYnMuIEluc3RlYWQsIGRhdGEgd2lsbCBiZSBwYXNzZWQgdGhyb3VnaFxuICAgICAgICAgKiB0aGUgcHJvdmlkZS9pbmplY3QuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCB0YWJCYXJEYXRhID0gaW5qZWN0KFwidGFiQmFyRGF0YVwiKTtcbiAgICAgICAgdGhpcy4kZGF0YS50YWJTdGF0ZS5oYXNSb3V0ZXJPdXRsZXQgPSB0YWJCYXJEYXRhLnZhbHVlLmhhc1JvdXRlck91dGxldDtcbiAgICAgICAgdGhpcy4kZGF0YS5fdGFic1dpbGxDaGFuZ2UgPSB0YWJCYXJEYXRhLnZhbHVlLl90YWJzV2lsbENoYW5nZTtcbiAgICAgICAgdGhpcy4kZGF0YS5fdGFic0RpZENoYW5nZSA9IHRhYkJhckRhdGEudmFsdWUuX3RhYnNEaWRDaGFuZ2U7XG4gICAgICAgIHRoaXMuc2V0dXBUYWJTdGF0ZShpb25Sb3V0ZXIpO1xuICAgICAgICBpb25Sb3V0ZXIgPT09IG51bGwgfHwgaW9uUm91dGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpb25Sb3V0ZXIucmVnaXN0ZXJIaXN0b3J5Q2hhbmdlTGlzdGVuZXIoKCkgPT4gdGhpcy5jaGVja0FjdGl2ZVRhYihpb25Sb3V0ZXIpKTtcbiAgICB9LFxuICAgIHNldHVwKF8sIHsgc2xvdHMgfSkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50JDFoKCk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaChcImlvbi10YWItYmFyXCIsIHsgcmVmOiBcImlvblRhYkJhclwiIH0sIHNsb3RzLmRlZmF1bHQgJiYgc2xvdHMuZGVmYXVsdCgpKTtcbiAgICAgICAgfTtcbiAgICB9LFxufSk7XG5cbmNvbnN0IHVzZXJDb21wb25lbnRzID0gc2hhbGxvd1JlZihbXSk7XG5jb25zdCBJb25BcHAgPSAvKkBfX1BVUkVfXyovIGRlZmluZUNvbXBvbmVudCgoXywgeyBhdHRycywgc2xvdHMgfSkgPT4ge1xuICAgIGRlZmluZUN1c3RvbUVsZW1lbnQkMWkoKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICByZXR1cm4gaChcImlvbi1hcHBcIiwgT2JqZWN0LmFzc2lnbih7IG5hbWU6IFwiSW9uQXBwXCIgfSwgYXR0cnMpLCBbc2xvdHMuZGVmYXVsdCAmJiBzbG90cy5kZWZhdWx0KCksIC4uLnVzZXJDb21wb25lbnRzLnZhbHVlXSk7XG4gICAgfTtcbn0sIHtcbiAgICBuYW1lOiBcIklvbkFwcFwiLFxufSk7XG4vKipcbiAqIFdoZW4gcmVuZGVyaW5nIHVzZXIgY29tcG9uZW50cyBpbnNpZGUgb2ZcbiAqIGlvbi1tb2RhbCwgb3IgaW9uLXBvcG92ZXIgdGhlIGNvbXBvbmVudFxuICogbmVlZHMgdG8gYmUgY3JlYXRlZCBpbnNpZGUgb2YgdGhlIGN1cnJlbnQgYXBwbGljYXRpb25cbiAqIGNvbnRleHQgb3RoZXJ3aXNlIGxpYnJhcmllcyBzdWNoIGFzIHZ1ZS1pMThuIG9yIHZ1ZXhcbiAqIHdpbGwgbm90IHdvcmsgcHJvcGVybHkuXG4gKlxuICogYHVzZXJDb21wb25lbnRzYCByZW5kZXJzIHRlbGVwb3J0ZWQgY29tcG9uZW50cyBhcyBjaGlsZHJlblxuICogb2YgYGlvbi1hcHBgIHdpdGhpbiB0aGUgY3VycmVudCBhcHBsaWNhdGlvbiBjb250ZXh0LlxuICovXG5jb25zdCBhZGRUZWxlcG9ydGVkVXNlckNvbXBvbmVudCA9IChjb21wb25lbnQpID0+IHtcbiAgICB1c2VyQ29tcG9uZW50cy52YWx1ZSA9IFsuLi51c2VyQ29tcG9uZW50cy52YWx1ZSwgY29tcG9uZW50XTtcbn07XG5jb25zdCByZW1vdmVUZWxlcG9ydGVkVXNlckNvbXBvbmVudCA9IChjb21wb25lbnQpID0+IHtcbiAgICB1c2VyQ29tcG9uZW50cy52YWx1ZSA9IHVzZXJDb21wb25lbnRzLnZhbHVlLmZpbHRlcigoY21wKSA9PiBjbXAgIT09IGNvbXBvbmVudCk7XG59O1xuXG5jb25zdCBWdWVEZWxlZ2F0ZSA9IChhZGRGbiA9IGFkZFRlbGVwb3J0ZWRVc2VyQ29tcG9uZW50LCByZW1vdmVGbiA9IHJlbW92ZVRlbGVwb3J0ZWRVc2VyQ29tcG9uZW50KSA9PiB7XG4gICAgLy8gYGhgIGRvZXNuJ3QgcHJvdmlkZSBhIHR5cGUgZm9yIHRoZSBjb21wb25lbnQgYXJndW1lbnRcbiAgICBjb25zdCByZWZNYXAgPSBuZXcgV2Vha01hcCgpO1xuICAgIC8vIFRPRE8oRlctMjk2OSk6IHR5cGVzXG4gICAgY29uc3QgYXR0YWNoVmlld1RvRG9tID0gKHBhcmVudEVsZW1lbnQsIGNvbXBvbmVudE9yVGFnTmFtZSwgY29tcG9uZW50UHJvcHMgPSB7fSwgY2xhc3NlcykgPT4ge1xuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjbGFzc2VzICYmIGRpdi5jbGFzc0xpc3QuYWRkKC4uLmNsYXNzZXMpO1xuICAgICAgICBwYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIGNvbnN0IGhvc3RDb21wb25lbnQgPSBoKFRlbGVwb3J0LCB7IHRvOiBkaXYgfSwgaChjb21wb25lbnRPclRhZ05hbWUsIE9iamVjdC5hc3NpZ24oe30sIGNvbXBvbmVudFByb3BzKSkpO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW9uaWMgRnJhbWV3b3JrIHdpbGwgdXNlIHdoYXQgaXMgcmV0dXJuZWQgZnJvbSBgYXR0YWNoVmlld1RvRG9tYFxuICAgICAgICAgKiBhcyB0aGUgYGNvbXBvbmVudGAgYXJndW1lbnQgaW4gYHJlbW92ZVZpZXdGcm9tRG9tYC5cbiAgICAgICAgICpcbiAgICAgICAgICogV2Ugd2lsbCBzdG9yZSBhIHJlZmVyZW5jZSB0byB0aGUgZGl2IGVsZW1lbnQgYW5kIHRoZSBob3N0IGNvbXBvbmVudCxcbiAgICAgICAgICogc28gd2UgY2FuIGxhdGVyIGxvb2stdXAgYW5kIHVubW91bnQgdGhlIGNvcnJlY3QgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICByZWZNYXAuc2V0KGRpdiwgaG9zdENvbXBvbmVudCk7XG4gICAgICAgIGFkZEZuKGhvc3RDb21wb25lbnQpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRpdik7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVWaWV3RnJvbURvbSA9IChfY29udGFpbmVyLCBjb21wb25lbnQpID0+IHtcbiAgICAgICAgY29uc3QgaG9zdENvbXBvbmVudCA9IHJlZk1hcC5nZXQoY29tcG9uZW50KTtcbiAgICAgICAgaG9zdENvbXBvbmVudCAmJiByZW1vdmVGbihob3N0Q29tcG9uZW50KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIHsgYXR0YWNoVmlld1RvRG9tLCByZW1vdmVWaWV3RnJvbURvbSB9O1xufTtcblxuY29uc3QgSW9uTmF2ID0gLypAX19QVVJFX18qLyBkZWZpbmVDb21wb25lbnQoKHByb3BzKSA9PiB7XG4gICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQxaigpO1xuICAgIGNvbnN0IHZpZXdzID0gc2hhbGxvd1JlZihbXSk7XG4gICAgLyoqXG4gICAgICogQWxsb3dzIHVzIHRvIGNyZWF0ZSB0aGUgY29tcG9uZW50XG4gICAgICogd2l0aGluIHRoZSBWdWUgYXBwbGljYXRpb24gY29udGV4dC5cbiAgICAgKi9cbiAgICBjb25zdCBhZGRWaWV3ID0gKGNvbXBvbmVudCkgPT4gKHZpZXdzLnZhbHVlID0gWy4uLnZpZXdzLnZhbHVlLCBjb21wb25lbnRdKTtcbiAgICBjb25zdCByZW1vdmVWaWV3ID0gKGNvbXBvbmVudCkgPT4gKHZpZXdzLnZhbHVlID0gdmlld3MudmFsdWUuZmlsdGVyKChjbXApID0+IGNtcCAhPT0gY29tcG9uZW50KSk7XG4gICAgY29uc3QgZGVsZWdhdGUgPSBWdWVEZWxlZ2F0ZShhZGRWaWV3LCByZW1vdmVWaWV3KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICByZXR1cm4gaChcImlvbi1uYXZcIiwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwcm9wcyksIHsgZGVsZWdhdGUgfSksIHZpZXdzLnZhbHVlKTtcbiAgICB9O1xufSwge1xuICAgIG5hbWU6IFwiSW9uTmF2XCIsXG4gICAgLyoqXG4gICAgICogVGhlIGRlZmF1bHQgdmFsdWVzIGZvbGxvdyB3aGF0IGlzIGRlZmluZWQgYXRcbiAgICAgKiBodHRwczovL2lvbmljZnJhbWV3b3JrLmNvbS9kb2NzL2FwaS9uYXYjcHJvcGVydGllc1xuICAgICAqIG90aGVyd2lzZSB0aGUgZGVmYXVsdCB2YWx1ZXMgb24gdGhlIFdlYiBDb21wb25lbnRcbiAgICAgKiBtYXkgYmUgb3ZlcnJpZGRlbi4gRm9yIGV4YW1wbGUsIGlmIHRoZSBkZWZhdWx0IGFuaW1hdGVkIHZhbHVlXG4gICAgICogaXMgbm90IGB0cnVlYCBiZWxvdywgdGhlbiBWdWUgd291bGQgZGVmYXVsdCB0aGUgcHJvcCB0byBgZmFsc2VgXG4gICAgICogd2hpY2ggd291bGQgb3ZlcnJpZGUgdGhlIFdlYiBDb21wb25lbnQgZGVmYXVsdCBvZiBgdHJ1ZWAuXG4gICAgICovXG4gICAgcHJvcHM6IHtcbiAgICAgICAgYW5pbWF0ZWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgICBkZWZhdWx0OiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBhbmltYXRpb246IHtcbiAgICAgICAgICAgIHR5cGU6IEZ1bmN0aW9uLFxuICAgICAgICAgICAgZGVmYXVsdDogdW5kZWZpbmVkLFxuICAgICAgICB9LFxuICAgICAgICByb290OiB7XG4gICAgICAgICAgICB0eXBlOiBbRnVuY3Rpb24sIE9iamVjdCwgU3RyaW5nXSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZCxcbiAgICAgICAgfSxcbiAgICAgICAgcm9vdFBhcmFtczoge1xuICAgICAgICAgICAgdHlwZTogT2JqZWN0LFxuICAgICAgICAgICAgZGVmYXVsdDogdW5kZWZpbmVkLFxuICAgICAgICB9LFxuICAgICAgICBzd2lwZUdlc3R1cmU6IHtcbiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgICBkZWZhdWx0OiB1bmRlZmluZWQsXG4gICAgICAgIH0sXG4gICAgfSxcbn0pO1xuXG5jb25zdCBJb25JY29uID0gLypAX19QVVJFX18qLyBkZWZpbmVDb21wb25lbnQoKHByb3BzLCB7IHNsb3RzIH0pID0+IHtcbiAgICBkZWZpbmVDdXN0b21FbGVtZW50JDFrKCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgeyBpY29uLCBpb3MsIG1kLCBtb2RlIH0gPSBwcm9wcztcbiAgICAgICAgbGV0IGljb25Ub1VzZTtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZ2V0Q29uZmlnKCk7XG4gICAgICAgIGNvbnN0IGljb25Nb2RlID0gbW9kZSB8fCAoY29uZmlnID09PSBudWxsIHx8IGNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29uZmlnLmdldChcIm1vZGVcIikpO1xuICAgICAgICBpZiAoaW9zIHx8IG1kKSB7XG4gICAgICAgICAgICBpZiAoaWNvbk1vZGUgPT09IFwiaW9zXCIpIHtcbiAgICAgICAgICAgICAgICBpY29uVG9Vc2UgPSAoX2EgPSBpb3MgIT09IG51bGwgJiYgaW9zICE9PSB2b2lkIDAgPyBpb3MgOiBtZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogaWNvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGljb25Ub1VzZSA9IChfYiA9IG1kICE9PSBudWxsICYmIG1kICE9PSB2b2lkIDAgPyBtZCA6IGlvcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogaWNvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGljb25Ub1VzZSA9IGljb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGgoXCJpb24taWNvblwiLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHByb3BzKSwgeyBpY29uOiBpY29uVG9Vc2UgfSksIHNsb3RzKTtcbiAgICB9O1xufSwge1xuICAgIG5hbWU6IFwiSW9uSWNvblwiLFxuICAgIHByb3BzOiB7XG4gICAgICAgIGNvbG9yOiB7IHR5cGU6IFN0cmluZyB9LFxuICAgICAgICBmbGlwUnRsOiB7IHR5cGU6IEJvb2xlYW4gfSxcbiAgICAgICAgaWNvbjogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICAgICAgaW9zOiB7IHR5cGU6IFN0cmluZyB9LFxuICAgICAgICBsYXp5OiB7IHR5cGU6IEJvb2xlYW4gfSxcbiAgICAgICAgbWQ6IHsgdHlwZTogU3RyaW5nIH0sXG4gICAgICAgIG1vZGU6IHsgdHlwZTogU3RyaW5nIH0sXG4gICAgICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nIH0sXG4gICAgICAgIHNpemU6IHsgdHlwZTogU3RyaW5nIH0sXG4gICAgICAgIHNyYzogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICB9LFxufSk7XG5cbmNvbnN0IEVNUFRZX1BST1AgPSBTeW1ib2woKTtcbmNvbnN0IERFRkFVTFRfRU1QVFlfUFJPUCA9IHsgZGVmYXVsdDogRU1QVFlfUFJPUCB9O1xuY29uc3QgZGVmaW5lT3ZlcmxheUNvbnRhaW5lciA9IChuYW1lLCBkZWZpbmVDdXN0b21FbGVtZW50LCBjb21wb25lbnRQcm9wcyA9IFtdLCBoYXNEZWxlZ2F0ZUhvc3QsIGNvbnRyb2xsZXIpID0+IHtcbiAgICBjb25zdCBjcmVhdGVDb250cm9sbGVyQ29tcG9uZW50ID0gKG9wdGlvbnMpID0+IHtcbiAgICAgICAgcmV0dXJuIGRlZmluZUNvbXBvbmVudCgocHJvcHMsIHsgc2xvdHMsIGVtaXQgfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXZlbnRMaXN0ZW5lcnMgPSBbXG4gICAgICAgICAgICAgICAgeyBjb21wb25lbnRFdjogYCR7bmFtZX1XaWxsUHJlc2VudGAsIGZyYW1ld29ya0V2OiBcIndpbGxQcmVzZW50XCIgfSxcbiAgICAgICAgICAgICAgICB7IGNvbXBvbmVudEV2OiBgJHtuYW1lfURpZFByZXNlbnRgLCBmcmFtZXdvcmtFdjogXCJkaWRQcmVzZW50XCIgfSxcbiAgICAgICAgICAgICAgICB7IGNvbXBvbmVudEV2OiBgJHtuYW1lfVdpbGxEaXNtaXNzYCwgZnJhbWV3b3JrRXY6IFwid2lsbERpc21pc3NcIiB9LFxuICAgICAgICAgICAgICAgIHsgY29tcG9uZW50RXY6IGAke25hbWV9RGlkRGlzbWlzc2AsIGZyYW1ld29ya0V2OiBcImRpZERpc21pc3NcIiB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGlmIChkZWZpbmVDdXN0b21FbGVtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gcmVmKCk7XG4gICAgICAgICAgICBjb25zdCBvblZub2RlTW91bnRlZCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc09wZW4gPSBwcm9wcy5pc09wZW47XG4gICAgICAgICAgICAgICAgaXNPcGVuICYmIChhd2FpdCBwcmVzZW50KHByb3BzKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3Qgb25Wbm9kZVVwZGF0ZWQgPSBhc3luYyAobm9kZSwgcHJldk5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc09wZW4gPSBub2RlLnByb3BzLmlzT3BlbjtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2SXNPcGVuID0gcHJldk5vZGUucHJvcHMuaXNPcGVuO1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERvIG5vdCBkbyBhbnl0aGluZyBpZiB0aGlzIHByb3BcbiAgICAgICAgICAgICAgICAgKiBkaWQgbm90IGNoYW5nZS5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAoaXNPcGVuID09PSBwcmV2SXNPcGVuKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwcmVzZW50KHByb3BzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGRpc21pc3MoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3Qgb25Wbm9kZUJlZm9yZVVubW91bnQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZGlzbWlzcygpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGRpc21pc3MgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFvdmVybGF5LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgYXdhaXQgb3ZlcmxheS52YWx1ZTtcbiAgICAgICAgICAgICAgICBvdmVybGF5LnZhbHVlID0gb3ZlcmxheS52YWx1ZS5kaXNtaXNzKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgb3ZlcmxheS52YWx1ZTtcbiAgICAgICAgICAgICAgICBvdmVybGF5LnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHByZXNlbnQgPSBhc3luYyAocHJvcHMpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRG8gbm90IG9wZW4gYW5vdGhlciBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqIGlmIG9uZSBpcyBhbHJlYWR5IG9wZW5lZC5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheS52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBvdmVybGF5LnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKF9hID0gb3ZlcmxheS52YWx1ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnByZXNlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgb3ZlcmxheS52YWx1ZS5wcmVzZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdE9mUHJvcHMgPSB7fTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBXZSBjYW4gdXNlIE9iamVjdC5lbnRyaWVzIGhlcmVcbiAgICAgICAgICAgICAgICAgKiB0byBhdm9pZCB0aGUgaGFzT3duUHJvcGVydHkgY2hlY2ssXG4gICAgICAgICAgICAgICAgICogYnV0IHRoYXQgd291bGQgcmVxdWlyZSAyIGl0ZXJhdGlvbnNcbiAgICAgICAgICAgICAgICAgKiB3aGVyZSBhcyB0aGlzIG9ubHkgcmVxdWlyZXMgMS5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHByb3BzW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvcHMsIGtleSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBFTVBUWV9QUk9QKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN0T2ZQcm9wc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVGhlc2UgYXJlIGdldHRpbmcgcGFzc2VkIGFzIHByb3BzLlxuICAgICAgICAgICAgICAgICAqIFBvdGVudGlhbGx5IGEgVnVlIGJ1ZyB3aXRoIFdlYiBDb21wb25lbnRzP1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGRlbGV0ZSByZXN0T2ZQcm9wcy5vbldpbGxQcmVzZW50O1xuICAgICAgICAgICAgICAgIGRlbGV0ZSByZXN0T2ZQcm9wcy5vbkRpZFByZXNlbnQ7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlc3RPZlByb3BzLm9uV2lsbERpc21pc3M7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlc3RPZlByb3BzLm9uRGlkRGlzbWlzcztcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBzbG90cy5kZWZhdWx0ICYmIHNsb3RzLmRlZmF1bHQoKVswXTtcbiAgICAgICAgICAgICAgICBvdmVybGF5LnZhbHVlID0gY29udHJvbGxlci5jcmVhdGUoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXN0T2ZQcm9wcyksIHsgY29tcG9uZW50IH0pKTtcbiAgICAgICAgICAgICAgICBvdmVybGF5LnZhbHVlID0gYXdhaXQgb3ZlcmxheS52YWx1ZTtcbiAgICAgICAgICAgICAgICBldmVudExpc3RlbmVycy5mb3JFYWNoKChldmVudExpc3RlbmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXkudmFsdWUuYWRkRXZlbnRMaXN0ZW5lcihldmVudExpc3RlbmVyLmNvbXBvbmVudEV2LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0KGV2ZW50TGlzdGVuZXIuZnJhbWV3b3JrRXYpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCBvdmVybGF5LnZhbHVlLnByZXNlbnQoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBoKFwiZGl2XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsgZGlzcGxheTogXCJub25lXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgb25Wbm9kZU1vdW50ZWQsXG4gICAgICAgICAgICAgICAgICAgIG9uVm5vZGVVcGRhdGVkLFxuICAgICAgICAgICAgICAgICAgICBvblZub2RlQmVmb3JlVW5tb3VudCxcbiAgICAgICAgICAgICAgICAgICAgaXNPcGVuOiBwcm9wcy5pc09wZW4gPT09IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCBvcHRpb25zKTtcbiAgICB9O1xuICAgIGNvbnN0IGNyZWF0ZUlubGluZUNvbXBvbmVudCA9IChvcHRpb25zKSA9PiB7XG4gICAgICAgIHJldHVybiBkZWZpbmVDb21wb25lbnQoKHByb3BzLCB7IHNsb3RzLCBlbWl0IH0pID0+IHtcbiAgICAgICAgICAgIGlmIChkZWZpbmVDdXN0b21FbGVtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpc09wZW4gPSByZWYoZmFsc2UpO1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudFJlZiA9IHJlZigpO1xuICAgICAgICAgICAgb25Nb3VudGVkKCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IG5hbWUgZnJvbSBrZWJhYi1jYXNlIHRvIGNhbWVsQ2FzZVxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBuYW1lLnJlcGxhY2UoLy0oW2Etel0pL2csIChfLCBsZXR0ZXIpID0+IGxldHRlci50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50UmVmLnZhbHVlLmFkZEV2ZW50TGlzdGVuZXIoXCJpb25Nb3VudFwiLCAoZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZW1pdChcImlvbk1vdW50XCIsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgZW1pdChjb21wb25lbnROYW1lICsgXCJJb25Nb3VudFwiLCBldik7XG4gICAgICAgICAgICAgICAgICAgIGlzT3Blbi52YWx1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZWxlbWVudFJlZi52YWx1ZS5hZGRFdmVudExpc3RlbmVyKFwid2lsbFByZXNlbnRcIiwgKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVtaXQoXCJ3aWxsUHJlc2VudFwiLCBldik7XG4gICAgICAgICAgICAgICAgICAgIGVtaXQoY29tcG9uZW50TmFtZSArIFwiV2lsbFByZXNlbnRcIiwgZXYpO1xuICAgICAgICAgICAgICAgICAgICBpc09wZW4udmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGVsZW1lbnRSZWYudmFsdWUuYWRkRXZlbnRMaXN0ZW5lcihcImRpZERpc21pc3NcIiwgKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVtaXQoXCJkaWREaXNtaXNzXCIsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgZW1pdChjb21wb25lbnROYW1lICsgXCJEaWREaXNtaXNzXCIsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgaXNPcGVuLnZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZWxlbWVudFJlZi52YWx1ZS5hZGRFdmVudExpc3RlbmVyKFwid2lsbERpc21pc3NcIiwgKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVtaXQoXCJ3aWxsRGlzbWlzc1wiLCBldik7XG4gICAgICAgICAgICAgICAgICAgIGVtaXQoY29tcG9uZW50TmFtZSArIFwiV2lsbERpc21pc3NcIiwgZXYpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGVsZW1lbnRSZWYudmFsdWUuYWRkRXZlbnRMaXN0ZW5lcihcImRpZFByZXNlbnRcIiwgKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVtaXQoXCJkaWRQcmVzZW50XCIsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgZW1pdChjb21wb25lbnROYW1lICsgXCJEaWRQcmVzZW50XCIsIGV2KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN0T2ZQcm9wcyA9IHt9O1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFdlIGNhbiB1c2UgT2JqZWN0LmVudHJpZXMgaGVyZVxuICAgICAgICAgICAgICAgICAqIHRvIGF2b2lkIHRoZSBoYXNPd25Qcm9wZXJ0eSBjaGVjayxcbiAgICAgICAgICAgICAgICAgKiBidXQgdGhhdCB3b3VsZCByZXF1aXJlIDIgaXRlcmF0aW9uc1xuICAgICAgICAgICAgICAgICAqIHdoZXJlIGFzIHRoaXMgb25seSByZXF1aXJlcyAxLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcHJvcHNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm9wcywga2V5KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgIT09IEVNUFRZX1BST1ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3RPZlByb3BzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTb21lIG92ZXJsYXlzIG5lZWQgYSB3cmFwcGVyIGVsZW1lbnQgc28gY29udGVudFxuICAgICAgICAgICAgICAgICAqIHRha2VzIHVwIHRoZSBmdWxsIHNpemUgb2YgdGhlIHBhcmVudCBvdmVybGF5LlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbmRlckNoaWxkcmVuID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzRGVsZWdhdGVIb3N0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJpb24tZGVsZWdhdGUtaG9zdCBpb24tcGFnZVwiIH0sIHNsb3RzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2xvdHM7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaChuYW1lLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3RPZlByb3BzKSwgeyByZWY6IGVsZW1lbnRSZWYgfSksIFxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFdoZW4gYmluZGluZyBrZWVwQ29udGVudHNNb3VudGVkIGFzIGFuIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICAqIGkuZS4gPGlvbi1tb2RhbCBrZWVwLWNvbnRlbnRzLW1vdW50ZWQ+PC9pb24tbW9kYWw+XG4gICAgICAgICAgICAgICAgICogdGhlIHZhbHVlIG9mIHRoZSBwcm9wIHdpbGwgYmUgdGhlIGVtcHR5IHN0cmluZyB3aGljaCBpc1xuICAgICAgICAgICAgICAgICAqIHdoeSB3ZSBzdGlsbCBjYWxsIHJlbmRlckNoaWxkcmVuKCkgaW4gdGhhdCBjYXNlLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGlzT3Blbi52YWx1ZSB8fFxuICAgICAgICAgICAgICAgICAgICByZXN0T2ZQcm9wcy5rZWVwQ29udGVudHNNb3VudGVkIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlc3RPZlByb3BzLmtlZXBDb250ZW50c01vdW50ZWQgPT09IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZW5kZXJDaGlsZHJlbigpXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sIG9wdGlvbnMpO1xuICAgIH07XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgcHJvcHM6IE9iamVjdC5hc3NpZ24oeyBpc09wZW46IERFRkFVTFRfRU1QVFlfUFJPUCB9LCBjb21wb25lbnRQcm9wcy5yZWR1Y2UoKGFjYywgcHJvcCkgPT4ge1xuICAgICAgICAgICAgYWNjW3Byb3BdID0gREVGQVVMVF9FTVBUWV9QUk9QO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pKSxcbiAgICAgICAgZW1pdHM6IHR5cGVvZiBjb250cm9sbGVyICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgICA/IFtcIndpbGxQcmVzZW50XCIsIFwiZGlkUHJlc2VudFwiLCBcIndpbGxEaXNtaXNzXCIsIFwiZGlkRGlzbWlzc1wiXVxuICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgfTtcbiAgICByZXR1cm4gY29udHJvbGxlciAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gY3JlYXRlQ29udHJvbGxlckNvbXBvbmVudChvcHRpb25zKVxuICAgICAgICA6IGNyZWF0ZUlubGluZUNvbXBvbmVudChvcHRpb25zKTtcbn07XG5cbi8qKlxuICogVGhpcyBpcyBhbiBhdXRvZ2VuZXJhdGVkIGZpbGUgY3JlYXRlZCBieSAnc2NyaXB0cy9jb3B5LW92ZXJsYXlzLmpzJy5cbiAqIENoYW5nZXMgbWFkZSB0byB0aGlzIGZpbGUgd2lsbCBiZSBvdmVyd3JpdHRlbiBvbiBidWlsZC5cbiAqL1xuY29uc3QgSW9uQWN0aW9uU2hlZXQgPSAvKkBfX1BVUkVfXyovIGRlZmluZU92ZXJsYXlDb250YWluZXIoJ2lvbi1hY3Rpb24tc2hlZXQnLCBkZWZpbmVDdXN0b21FbGVtZW50JDFsLCBbJ2FuaW1hdGVkJywgJ2JhY2tkcm9wRGlzbWlzcycsICdidXR0b25zJywgJ2Nzc0NsYXNzJywgJ2VudGVyQW5pbWF0aW9uJywgJ2hlYWRlcicsICdodG1sQXR0cmlidXRlcycsICdpc09wZW4nLCAna2V5Ym9hcmRDbG9zZScsICdsZWF2ZUFuaW1hdGlvbicsICdtb2RlJywgJ3N1YkhlYWRlcicsICd0cmFuc2x1Y2VudCcsICd0cmlnZ2VyJ10pO1xuY29uc3QgSW9uQWxlcnQgPSAvKkBfX1BVUkVfXyovIGRlZmluZU92ZXJsYXlDb250YWluZXIoJ2lvbi1hbGVydCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkMW0sIFsnYW5pbWF0ZWQnLCAnYmFja2Ryb3BEaXNtaXNzJywgJ2J1dHRvbnMnLCAnY3NzQ2xhc3MnLCAnZW50ZXJBbmltYXRpb24nLCAnaGVhZGVyJywgJ2h0bWxBdHRyaWJ1dGVzJywgJ2lucHV0cycsICdpc09wZW4nLCAna2V5Ym9hcmRDbG9zZScsICdsZWF2ZUFuaW1hdGlvbicsICdtZXNzYWdlJywgJ21vZGUnLCAnc3ViSGVhZGVyJywgJ3RyYW5zbHVjZW50JywgJ3RyaWdnZXInXSk7XG5jb25zdCBJb25Mb2FkaW5nID0gLypAX19QVVJFX18qLyBkZWZpbmVPdmVybGF5Q29udGFpbmVyKCdpb24tbG9hZGluZycsIGRlZmluZUN1c3RvbUVsZW1lbnQkMW4sIFsnYW5pbWF0ZWQnLCAnYmFja2Ryb3BEaXNtaXNzJywgJ2Nzc0NsYXNzJywgJ2R1cmF0aW9uJywgJ2VudGVyQW5pbWF0aW9uJywgJ2h0bWxBdHRyaWJ1dGVzJywgJ2lzT3BlbicsICdrZXlib2FyZENsb3NlJywgJ2xlYXZlQW5pbWF0aW9uJywgJ21lc3NhZ2UnLCAnbW9kZScsICdzaG93QmFja2Ryb3AnLCAnc3Bpbm5lcicsICd0cmFuc2x1Y2VudCcsICd0cmlnZ2VyJ10pO1xuY29uc3QgSW9uTW9kYWwgPSAvKkBfX1BVUkVfXyovIGRlZmluZU92ZXJsYXlDb250YWluZXIoJ2lvbi1tb2RhbCcsIGRlZmluZUN1c3RvbUVsZW1lbnQkMW8sIFsnYW5pbWF0ZWQnLCAnYmFja2Ryb3BCcmVha3BvaW50JywgJ2JhY2tkcm9wRGlzbWlzcycsICdicmVha3BvaW50cycsICdjYW5EaXNtaXNzJywgJ2VudGVyQW5pbWF0aW9uJywgJ2V4cGFuZFRvU2Nyb2xsJywgJ2ZvY3VzVHJhcCcsICdoYW5kbGUnLCAnaGFuZGxlQmVoYXZpb3InLCAnaHRtbEF0dHJpYnV0ZXMnLCAnaW5pdGlhbEJyZWFrcG9pbnQnLCAnaXNPcGVuJywgJ2tlZXBDb250ZW50c01vdW50ZWQnLCAna2V5Ym9hcmRDbG9zZScsICdsZWF2ZUFuaW1hdGlvbicsICdtb2RlJywgJ3ByZXNlbnRpbmdFbGVtZW50JywgJ3Nob3dCYWNrZHJvcCcsICd0cmlnZ2VyJ10sIHRydWUpO1xuY29uc3QgSW9uUGlja2VyTGVnYWN5ID0gLypAX19QVVJFX18qLyBkZWZpbmVPdmVybGF5Q29udGFpbmVyKCdpb24tcGlja2VyLWxlZ2FjeScsIGRlZmluZUN1c3RvbUVsZW1lbnQkMXAsIFsnYW5pbWF0ZWQnLCAnYmFja2Ryb3BEaXNtaXNzJywgJ2J1dHRvbnMnLCAnY29sdW1ucycsICdjc3NDbGFzcycsICdkdXJhdGlvbicsICdlbnRlckFuaW1hdGlvbicsICdodG1sQXR0cmlidXRlcycsICdpc09wZW4nLCAna2V5Ym9hcmRDbG9zZScsICdsZWF2ZUFuaW1hdGlvbicsICdtb2RlJywgJ3Nob3dCYWNrZHJvcCcsICd0cmlnZ2VyJ10pO1xuY29uc3QgSW9uUG9wb3ZlciA9IC8qQF9fUFVSRV9fKi8gZGVmaW5lT3ZlcmxheUNvbnRhaW5lcignaW9uLXBvcG92ZXInLCBkZWZpbmVDdXN0b21FbGVtZW50JDFxLCBbJ2FsaWdubWVudCcsICdhbmltYXRlZCcsICdhcnJvdycsICdiYWNrZHJvcERpc21pc3MnLCAnY29tcG9uZW50JywgJ2NvbXBvbmVudFByb3BzJywgJ2Rpc21pc3NPblNlbGVjdCcsICdlbnRlckFuaW1hdGlvbicsICdldmVudCcsICdmb2N1c1RyYXAnLCAnaHRtbEF0dHJpYnV0ZXMnLCAnaXNPcGVuJywgJ2tlZXBDb250ZW50c01vdW50ZWQnLCAna2V5Ym9hcmRDbG9zZScsICdsZWF2ZUFuaW1hdGlvbicsICdtb2RlJywgJ3JlZmVyZW5jZScsICdzaG93QmFja2Ryb3AnLCAnc2lkZScsICdzaXplJywgJ3RyYW5zbHVjZW50JywgJ3RyaWdnZXInLCAndHJpZ2dlckFjdGlvbiddKTtcbmNvbnN0IElvblRvYXN0ID0gLypAX19QVVJFX18qLyBkZWZpbmVPdmVybGF5Q29udGFpbmVyKCdpb24tdG9hc3QnLCBkZWZpbmVDdXN0b21FbGVtZW50JDFyLCBbJ2FuaW1hdGVkJywgJ2J1dHRvbnMnLCAnY29sb3InLCAnY3NzQ2xhc3MnLCAnZHVyYXRpb24nLCAnZW50ZXJBbmltYXRpb24nLCAnaGVhZGVyJywgJ2h0bWxBdHRyaWJ1dGVzJywgJ2ljb24nLCAnaXNPcGVuJywgJ2tleWJvYXJkQ2xvc2UnLCAnbGF5b3V0JywgJ2xlYXZlQW5pbWF0aW9uJywgJ21lc3NhZ2UnLCAnbW9kZScsICdwb3NpdGlvbicsICdwb3NpdGlvbkFuY2hvcicsICdzd2lwZUdlc3R1cmUnLCAndHJhbnNsdWNlbnQnLCAndHJpZ2dlciddKTtcblxuLy8gVE9ETyhGVy0yOTY5KTogdHlwZXNcbi8qKlxuICogV3JhcCB0aGUgY29udHJvbGxlcnMgZXhwb3J0IGZyb20gQGlvbmljL2NvcmVcbiAqIHJlZ2lzdGVyIHRoZSB1bmRlcmx5aW5nIFdlYiBDb21wb25lbnQgYW5kXG4gKiAob3B0aW9uYWxseSkgcHJvdmlkZSBhIGZyYW1ld29yayBkZWxlZ2F0ZS5cbiAqL1xuY29uc3QgY3JlYXRlQ29udHJvbGxlciA9IChkZWZpbmVDdXN0b21FbGVtZW50LCBvbGRDb250cm9sbGVyLCB1c2VEZWxlZ2F0ZSA9IGZhbHNlKSA9PiB7XG4gICAgY29uc3QgZGVsZWdhdGUgPSB1c2VEZWxlZ2F0ZSA/IFZ1ZURlbGVnYXRlKCkgOiB1bmRlZmluZWQ7XG4gICAgY29uc3Qgb2xkQ3JlYXRlID0gb2xkQ29udHJvbGxlci5jcmVhdGUuYmluZChvbGRDb250cm9sbGVyKTtcbiAgICBvbGRDb250cm9sbGVyLmNyZWF0ZSA9IChvcHRpb25zKSA9PiB7XG4gICAgICAgIGRlZmluZUN1c3RvbUVsZW1lbnQoKTtcbiAgICAgICAgcmV0dXJuIG9sZENyZWF0ZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGRlbGVnYXRlIH0pKTtcbiAgICB9O1xuICAgIHJldHVybiBvbGRDb250cm9sbGVyO1xufTtcbmNvbnN0IG1vZGFsQ29udHJvbGxlciA9IC8qQF9fUFVSRV9fKi8gY3JlYXRlQ29udHJvbGxlcihkZWZpbmVDdXN0b21FbGVtZW50JDFvLCBtb2RhbENvbnRyb2xsZXIkMSwgdHJ1ZSk7XG5jb25zdCBwb3BvdmVyQ29udHJvbGxlciA9IC8qQF9fUFVSRV9fKi8gY3JlYXRlQ29udHJvbGxlcihkZWZpbmVDdXN0b21FbGVtZW50JDFxLCBwb3BvdmVyQ29udHJvbGxlciQxLCB0cnVlKTtcbmNvbnN0IGFsZXJ0Q29udHJvbGxlciA9IC8qQF9fUFVSRV9fKi8gY3JlYXRlQ29udHJvbGxlcihkZWZpbmVDdXN0b21FbGVtZW50JDFtLCBhbGVydENvbnRyb2xsZXIkMSk7XG5jb25zdCBhY3Rpb25TaGVldENvbnRyb2xsZXIgPSAvKkBfX1BVUkVfXyovIGNyZWF0ZUNvbnRyb2xsZXIoZGVmaW5lQ3VzdG9tRWxlbWVudCQxbCwgYWN0aW9uU2hlZXRDb250cm9sbGVyJDEpO1xuY29uc3QgbG9hZGluZ0NvbnRyb2xsZXIgPSAvKkBfX1BVUkVfXyovIGNyZWF0ZUNvbnRyb2xsZXIoZGVmaW5lQ3VzdG9tRWxlbWVudCQxbiwgbG9hZGluZ0NvbnRyb2xsZXIkMSk7XG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSB0aGUgaW5saW5lIGlvbi1waWNrZXIgY29tcG9uZW50IGluc3RlYWQuXG4gKi9cbmNvbnN0IHBpY2tlckNvbnRyb2xsZXIgPSAvKkBfX1BVUkVfXyovIGNyZWF0ZUNvbnRyb2xsZXIoZGVmaW5lQ3VzdG9tRWxlbWVudCQxcCwgcGlja2VyQ29udHJvbGxlciQxKTtcbmNvbnN0IHRvYXN0Q29udHJvbGxlciA9IC8qQF9fUFVSRV9fKi8gY3JlYXRlQ29udHJvbGxlcihkZWZpbmVDdXN0b21FbGVtZW50JDFyLCB0b2FzdENvbnRyb2xsZXIkMSk7XG5cbmV4cG9ydCB7IElvbkFjY29yZGlvbiwgSW9uQWNjb3JkaW9uR3JvdXAsIElvbkFjdGlvblNoZWV0LCBJb25BbGVydCwgSW9uQXBwLCBJb25BdmF0YXIsIElvbkJhY2tCdXR0b24sIElvbkJhY2tkcm9wLCBJb25CYWRnZSwgSW9uQnJlYWRjcnVtYiwgSW9uQnJlYWRjcnVtYnMsIElvbkJ1dHRvbiwgSW9uQnV0dG9ucywgSW9uQ2FyZCwgSW9uQ2FyZENvbnRlbnQsIElvbkNhcmRIZWFkZXIsIElvbkNhcmRTdWJ0aXRsZSwgSW9uQ2FyZFRpdGxlLCBJb25DaGVja2JveCwgSW9uQ2hpcCwgSW9uQ29sLCBJb25Db250ZW50LCBJb25EYXRldGltZSwgSW9uRGF0ZXRpbWVCdXR0b24sIElvbkZhYiwgSW9uRmFiQnV0dG9uLCBJb25GYWJMaXN0LCBJb25Gb290ZXIsIElvbkdyaWQsIElvbkhlYWRlciwgSW9uSWNvbiwgSW9uSW1nLCBJb25JbmZpbml0ZVNjcm9sbCwgSW9uSW5maW5pdGVTY3JvbGxDb250ZW50LCBJb25JbnB1dCwgSW9uSW5wdXRPdHAsIElvbklucHV0UGFzc3dvcmRUb2dnbGUsIElvbkl0ZW0sIElvbkl0ZW1EaXZpZGVyLCBJb25JdGVtR3JvdXAsIElvbkl0ZW1PcHRpb24sIElvbkl0ZW1PcHRpb25zLCBJb25JdGVtU2xpZGluZywgSW9uTGFiZWwsIElvbkxpc3QsIElvbkxpc3RIZWFkZXIsIElvbkxvYWRpbmcsIElvbk1lbnUsIElvbk1lbnVCdXR0b24sIElvbk1lbnVUb2dnbGUsIElvbk1vZGFsLCBJb25OYXYsIElvbk5hdkxpbmssIElvbk5vdGUsIElvblBhZ2UsIElvblBpY2tlciwgSW9uUGlja2VyQ29sdW1uLCBJb25QaWNrZXJDb2x1bW5PcHRpb24sIElvblBpY2tlckxlZ2FjeSwgSW9uUG9wb3ZlciwgSW9uUHJvZ3Jlc3NCYXIsIElvblJhZGlvLCBJb25SYWRpb0dyb3VwLCBJb25SYW5nZSwgSW9uUmVmcmVzaGVyLCBJb25SZWZyZXNoZXJDb250ZW50LCBJb25SZW9yZGVyLCBJb25SZW9yZGVyR3JvdXAsIElvblJpcHBsZUVmZmVjdCwgSW9uUm91dGVyT3V0bGV0LCBJb25Sb3csIElvblNlYXJjaGJhciwgSW9uU2VnbWVudCwgSW9uU2VnbWVudEJ1dHRvbiwgSW9uU2VnbWVudENvbnRlbnQsIElvblNlZ21lbnRWaWV3LCBJb25TZWxlY3QsIElvblNlbGVjdE1vZGFsLCBJb25TZWxlY3RPcHRpb24sIElvblNrZWxldG9uVGV4dCwgSW9uU3Bpbm5lciwgSW9uU3BsaXRQYW5lLCBJb25UYWIsIElvblRhYkJhciwgSW9uVGFiQnV0dG9uLCBJb25UYWJzLCBJb25UZXh0LCBJb25UZXh0YXJlYSwgSW9uVGh1bWJuYWlsLCBJb25UaXRsZSwgSW9uVG9hc3QsIElvblRvZ2dsZSwgSW9uVG9vbGJhciwgSW9uaWNWdWUsIGFjdGlvblNoZWV0Q29udHJvbGxlciwgYWxlcnRDb250cm9sbGVyLCBsb2FkaW5nQ29udHJvbGxlciwgbW9kYWxDb250cm9sbGVyLCBvbklvblZpZXdEaWRFbnRlciwgb25Jb25WaWV3RGlkTGVhdmUsIG9uSW9uVmlld1dpbGxFbnRlciwgb25Jb25WaWV3V2lsbExlYXZlLCBwaWNrZXJDb250cm9sbGVyLCBwb3BvdmVyQ29udHJvbGxlciwgdG9hc3RDb250cm9sbGVyLCB1c2VCYWNrQnV0dG9uLCB1c2VJb25Sb3V0ZXIsIHVzZUtleWJvYXJkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiIsIjx0ZW1wbGF0ZT5cbiAgPGlvbi1hcHA+XG4gICAgPGlvbi1yb3V0ZXItb3V0bGV0IC8+XG4gIDwvaW9uLWFwcD5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgc2V0dXAgbGFuZz1cInRzXCI+XG5pbXBvcnQgeyBJb25BcHAsIElvblJvdXRlck91dGxldCB9IGZyb20gJ0Bpb25pYy92dWUnO1xuPC9zY3JpcHQ+XG4iLCJpbXBvcnQgeyBwYXJzZVF1ZXJ5LCBjcmVhdGVSb3V0ZXIgYXMgY3JlYXRlUm91dGVyJDEsIGNyZWF0ZVdlYkhpc3RvcnkgYXMgY3JlYXRlV2ViSGlzdG9yeSQxLCBjcmVhdGVXZWJIYXNoSGlzdG9yeSBhcyBjcmVhdGVXZWJIYXNoSGlzdG9yeSQxLCBjcmVhdGVNZW1vcnlIaXN0b3J5IGFzIGNyZWF0ZU1lbW9yeUhpc3RvcnkkMSB9IGZyb20gJ3Z1ZS1yb3V0ZXInO1xuaW1wb3J0IHsgc2hhbGxvd1JlZiB9IGZyb20gJ3Z1ZSc7XG5cbmNvbnN0IGNyZWF0ZUxvY2F0aW9uSGlzdG9yeSA9ICgpID0+IHtcbiAgICBjb25zdCBsb2NhdGlvbkhpc3RvcnkgPSBbXTtcbiAgICBjb25zdCB0YWJzSGlzdG9yeSA9IHt9O1xuICAgIGNvbnN0IGFkZCA9IChyb3V0ZUluZm8pID0+IHtcbiAgICAgICAgc3dpdGNoIChyb3V0ZUluZm8ucm91dGVyQWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIFwicG9wXCI6XG4gICAgICAgICAgICAgICAgcG9wKHJvdXRlSW5mbyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGFkZFJvdXRlKHJvdXRlSW5mbyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvdXRlSW5mby5yb3V0ZXJEaXJlY3Rpb24gPT09IFwicm9vdFwiKSB7XG4gICAgICAgICAgICBjbGVhckhpc3RvcnkoKTtcbiAgICAgICAgICAgIGFkZFJvdXRlKHJvdXRlSW5mbyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHVwZGF0ZSA9IChyb3V0ZUluZm8pID0+IHtcbiAgICAgICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9uSGlzdG9yeS5maW5kSW5kZXgoKHgpID0+IHguaWQgPT09IHJvdXRlSW5mby5pZCk7XG4gICAgICAgIGlmIChsb2NhdGlvbkluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIGxvY2F0aW9uSGlzdG9yeS5zcGxpY2UobG9jYXRpb25JbmRleCwgMSwgcm91dGVJbmZvKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0YWJBcnJheSA9IHRhYnNIaXN0b3J5W3JvdXRlSW5mby50YWIgfHwgXCJcIl07XG4gICAgICAgIGlmICh0YWJBcnJheSkge1xuICAgICAgICAgICAgY29uc3QgdGFiSW5kZXggPSB0YWJBcnJheS5maW5kSW5kZXgoKHgpID0+IHguaWQgPT09IHJvdXRlSW5mby5pZCk7XG4gICAgICAgICAgICBpZiAodGFiSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIHRhYkFycmF5LnNwbGljZSh0YWJJbmRleCwgMSwgcm91dGVJbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhYkFycmF5LnB1c2gocm91dGVJbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyb3V0ZUluZm8udGFiKSB7XG4gICAgICAgICAgICB0YWJzSGlzdG9yeVtyb3V0ZUluZm8udGFiXSA9IFtyb3V0ZUluZm9dO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwb3AgPSAocm91dGVJbmZvKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkhpc3RvcnkgPSBnZXRUYWJzSGlzdG9yeShyb3V0ZUluZm8udGFiKTtcbiAgICAgICAgbGV0IHJpO1xuICAgICAgICBpZiAodGFiSGlzdG9yeSkge1xuICAgICAgICAgICAgLy8gUG9wIGFsbCByb3V0ZXMgdW50aWwgd2UgYXJlIGJhY2tcbiAgICAgICAgICAgIHJpID0gdGFiSGlzdG9yeVt0YWJIaXN0b3J5Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgd2hpbGUgKHJpICYmIHJpLmlkICE9PSByb3V0ZUluZm8uaWQpIHtcbiAgICAgICAgICAgICAgICB0YWJIaXN0b3J5LnBvcCgpO1xuICAgICAgICAgICAgICAgIHJpID0gdGFiSGlzdG9yeVt0YWJIaXN0b3J5Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVwbGFjZSB3aXRoIHVwZGF0ZWQgcm91dGVcbiAgICAgICAgICAgIHRhYkhpc3RvcnkucG9wKCk7XG4gICAgICAgICAgICB0YWJIaXN0b3J5LnB1c2gocm91dGVJbmZvKTtcbiAgICAgICAgfVxuICAgICAgICByaSA9IGxvY2F0aW9uSGlzdG9yeVtsb2NhdGlvbkhpc3RvcnkubGVuZ3RoIC0gMV07XG4gICAgICAgIHdoaWxlIChyaSAmJiByaS5pZCAhPT0gcm91dGVJbmZvLmlkKSB7XG4gICAgICAgICAgICBsb2NhdGlvbkhpc3RvcnkucG9wKCk7XG4gICAgICAgICAgICByaSA9IGxvY2F0aW9uSGlzdG9yeVtsb2NhdGlvbkhpc3RvcnkubGVuZ3RoIC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVwbGFjZSB3aXRoIHVwZGF0ZWQgcm91dGVcbiAgICAgICAgbG9jYXRpb25IaXN0b3J5LnBvcCgpO1xuICAgICAgICBsb2NhdGlvbkhpc3RvcnkucHVzaChyb3V0ZUluZm8pO1xuICAgIH07XG4gICAgY29uc3QgYWRkUm91dGUgPSAocm91dGVJbmZvKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYkhpc3RvcnkgPSBnZXRUYWJzSGlzdG9yeShyb3V0ZUluZm8udGFiKTtcbiAgICAgICAgaWYgKHRhYkhpc3RvcnkpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBsYXRlc3Qgcm91dGVJbmZvIGlzIHRoZSBzYW1lIChnb2luZyBiYWNrIGFuZCBmb3J0aCBiZXR3ZWVuIHRhYnMpLCByZXBsYWNlIGl0XG4gICAgICAgICAgICBpZiAodGFiSGlzdG9yeVt0YWJIaXN0b3J5Lmxlbmd0aCAtIDFdICYmXG4gICAgICAgICAgICAgICAgdGFiSGlzdG9yeVt0YWJIaXN0b3J5Lmxlbmd0aCAtIDFdLmlkID09PSByb3V0ZUluZm8uaWQpIHtcbiAgICAgICAgICAgICAgICB0YWJIaXN0b3J5LnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFiSGlzdG9yeS5wdXNoKHJvdXRlSW5mbyk7XG4gICAgICAgIH1cbiAgICAgICAgbG9jYXRpb25IaXN0b3J5LnB1c2gocm91dGVJbmZvKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdpcGVzIHRoZSBsb2NhdGlvbiBoaXN0b3J5IGFycmF5cy5cbiAgICAgKiBZb3UgY2FuIG9wdGlvbmFsbHkgcHJvdmlkZSBhIHJvdXRlSW5mb1xuICAgICAqIG9iamVjdCB3aGljaCB3aWxsIHdpcGUgdGhhdCBlbnRyeVxuICAgICAqIGFuZCBldmVyeSBlbnRyeSB0aGF0IGFwcGVhcnMgYWZ0ZXIgaXQuXG4gICAgICovXG4gICAgY29uc3QgY2xlYXJIaXN0b3J5ID0gKHJvdXRlSW5mbykgPT4ge1xuICAgICAgICBpZiAocm91dGVJbmZvKSB7XG4gICAgICAgICAgICBjb25zdCB7IHBvc2l0aW9uLCB0YWIgfSA9IHJvdXRlSW5mbztcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSWYgdGhlcmUgaXMgbm8gcm91dGUgaW5kZXggaW4gbG9jYXRpb25IaXN0b3J5XG4gICAgICAgICAgICAgKiB0aGVuIHRoZXJlIHdpbGwgbm90IGJlIGFueSByb3V0ZSBpbmRleCBpblxuICAgICAgICAgICAgICogdGFicyBlaXRoZXIuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nUm91dGVJbmRleCA9IGxvY2F0aW9uSGlzdG9yeS5maW5kSW5kZXgoKHIpID0+IHIucG9zaXRpb24gPT09IHBvc2l0aW9uKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1JvdXRlSW5kZXggPT09IC0xKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGxvY2F0aW9uSGlzdG9yeS5zcGxpY2UoZXhpc3RpbmdSb3V0ZUluZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IGNsZWFyVGFiSGlzdG9yeSA9ICh0YWIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1RhYlJvdXRlSW5kZXggPSB0YWJzSGlzdG9yeVt0YWJdLmZpbmRJbmRleCgocikgPT4gci5wb3NpdGlvbiA9PT0gcG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1RhYlJvdXRlSW5kZXggPT09IC0xKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgdGFic0hpc3RvcnlbdGFiXS5zcGxpY2UoZXhpc3RpbmdUYWJSb3V0ZUluZGV4KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFdlIGFsc28gbmVlZCB0byBzZWFyY2ggdGhlIGN1cnJlbnQgdGFiXG4gICAgICAgICAgICAgKiB0byBjb3JyZWN0bHkgcmVzZXQgdGhlIGluZGl2aWR1YWwgdGFiXG4gICAgICAgICAgICAgKiBzdGFjay4gV2Ugc2hvdWxkIG5vdCBjbGVhciB0aGUgZW50aXJlXG4gICAgICAgICAgICAgKiB0YWIgc3RhY2sgYXMgdGhhdCBtZWFucyB3ZSB3aWxsIGxvc2VcbiAgICAgICAgICAgICAqIGEgcmVmZXJlbmNlIHRvIHRoZSByb290IHRhYiByb3V0ZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29uc3QgdGFiSGlzdG9yeSA9IHRhYnNIaXN0b3J5W3RhYl07XG4gICAgICAgICAgICBpZiAodGFiICYmIHRhYkhpc3RvcnkpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRhYkhpc3RvcnkodGFiKTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBJZiB3ZSBhcmUgbm90IGNsZWFyaW5nIGl0ZW1zIGFmdGVyXG4gICAgICAgICAgICAgICAgICogYSB0YWJzIHBhZ2UsIGl0IGlzIHN0aWxsIHBvc3NpYmxlXG4gICAgICAgICAgICAgICAgICogdGhhdCB0aGVyZSBhcmUgZnV0dXJlIHRhYnMgcGFnZXMgdG8gY2xlYXIuXG4gICAgICAgICAgICAgICAgICogQXMgYSByZXN1bHQsIHdlIG5lZWQgdG8gc2VhcmNoIHRocm91Z2hcbiAgICAgICAgICAgICAgICAgKiBhbGwgdGhlIHRhYiBzdGFja3MgYW5kIHJlbW92ZSB2aWV3cyB0aGF0IGFwcGVhclxuICAgICAgICAgICAgICAgICAqIGFmdGVyIHRoZSBnaXZlbiByb3V0ZUluZm8uXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBFeGFtcGxlOiAvbm9uLXRhYnMtcGFnZSAtLT4gL3RhYnMvdGFiMSAtLT4gL25vbi10YWJzLXBhZ2VcbiAgICAgICAgICAgICAgICAgKiAodmlhIHJvdXRlci5nbygtMSkpIC0tPiAvdGFicy90YWIyLiBUaGUgL3RhYnMvdGFiMSBoaXN0b3J5XG4gICAgICAgICAgICAgICAgICogaGFzIGJlZW4gb3ZlcndyaXR0ZW4gd2l0aCAvdGFicy90YWIyLiBBcyBhIHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgKiB0aGUgL3RhYnMvdGFiMSByb3V0ZSBpbmZvIGluIHRoZSBUYWIgMSBzdGFjayBzaG91bGQgYmUgcmVtb3ZlZC5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdGFiIGluIHRhYnNIaXN0b3J5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGFiSGlzdG9yeSh0YWIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGFiIGluIHRhYnNIaXN0b3J5KSB7XG4gICAgICAgICAgICAgICAgdGFic0hpc3RvcnlbdGFiXSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYXRpb25IaXN0b3J5Lmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGdldFRhYnNIaXN0b3J5ID0gKHRhYikgPT4ge1xuICAgICAgICBsZXQgaGlzdG9yeTtcbiAgICAgICAgaWYgKHRhYikge1xuICAgICAgICAgICAgaGlzdG9yeSA9IHRhYnNIaXN0b3J5W3RhYl07XG4gICAgICAgICAgICBpZiAoIWhpc3RvcnkpIHtcbiAgICAgICAgICAgICAgICBoaXN0b3J5ID0gdGFic0hpc3RvcnlbdGFiXSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoaXN0b3J5O1xuICAgIH07XG4gICAgY29uc3Qgc2l6ZSA9ICgpID0+IGxvY2F0aW9uSGlzdG9yeS5sZW5ndGg7XG4gICAgLyoqXG4gICAgICogRmluZHMgYW5kIHJldHVybnMgdGhlIGxvY2F0aW9uIGhpc3RvcnkgaXRlbVxuICAgICAqIGdpdmVuIHRoZSBzdGF0ZSBvZiBicm93c2VyJ3MgaGlzdG9yeSBBUEkuXG4gICAgICogVGhpcyBpcyB1c2VmdWwgd2hlbiBqdW1waW5nIGFyb3VuZCBpbiBicm93c2VyXG4gICAgICogaGlzdG9yeSB1c2luZyByb3V0ZXIuZ28uXG4gICAgICovXG4gICAgY29uc3QgY3VycmVudCA9IChpbml0aWFsSGlzdG9yeSwgY3VycmVudEhpc3RvcnkpID0+IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGluaXRpYWxIaXN0b3J5IGRvZXMgbm90IGFsd2F5cyBzdGFydCBhdCAwIGlmIHVzZXJzIG5hdmlnYXRlZFxuICAgICAgICAgKiB0byBhcHAgZnJvbSBhbm90aGVyIHdlYnNpdGUsIHNvIGRvaW5nIHRoaXMgbWF0aCBsZXRzIHVzXG4gICAgICAgICAqIGZpbmQgdGhlIGNvcnJlY3QgaW5kZXggaW4gb3VyIGxvY2F0aW9uSGlzdG9yeSBhcnJheS5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGluZGV4ID0gY3VycmVudEhpc3RvcnkgLSBpbml0aWFsSGlzdG9yeTtcbiAgICAgICAgcmV0dXJuIGxvY2F0aW9uSGlzdG9yeVtpbmRleF0gfHwgbGFzdCgpO1xuICAgIH07XG4gICAgY29uc3QgbGFzdCA9ICgpID0+IGxvY2F0aW9uSGlzdG9yeVtsb2NhdGlvbkhpc3RvcnkubGVuZ3RoIC0gMV07XG4gICAgLyoqXG4gICAgICogV2l0aCB0aGUgaW50cm9kdWN0aW9uIG9mIHJvdXRlci5nbyBzdXBwb3J0LCB3ZSBubyBsb25nZXIgcmVtb3ZlXG4gICAgICogaXRlbXMgZnJvbSBsb2NhdGlvbkhpc3RvcnkgYXMgdGhleSBtYXkgYmUgbmVlZGVkIGFnYWluIGluIHRoZSBmdXR1cmUuXG4gICAgICogQXMgYSByZXN1bHQsIHdlIG5lZWQgdG8gbG9vayBhdCB0aGUgY3VycmVudCBwb3NpdGlvbiBpbiBsb2NhdGlvbiBoaXN0b3J5XG4gICAgICogdG8gc2VlIGlmIHVzZXJzIGNhbiBuYXZpZ2F0ZSBiYWNrIG4gcGFnZXMuIFByZXZpb3VzbHkgd2Ugd2VyZSBjaGVja2luZ1xuICAgICAqIHRoZSBsZW5ndGggb2YgbG9jYXRpb25IaXN0b3J5LCBidXQgdGhhdCBvbmx5IHdvcmtlZCBzaW5jZSB3ZSB3ZXJlIHBydW5pbmdcbiAgICAgKiB0aGUgYXJyYXkuXG4gICAgICovXG4gICAgY29uc3QgY2FuR29CYWNrID0gKGRlZXAgPSAxLCBpbml0aWFsSGlzdG9yeSwgY3VycmVudEhpc3RvcnkpID0+IHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRIaXN0b3J5IC0gZGVlcCA+PSBpbml0aWFsSGlzdG9yeTtcbiAgICB9O1xuICAgIGNvbnN0IGdldEZpcnN0Um91dGVJbmZvRm9yVGFiID0gKHRhYikgPT4ge1xuICAgICAgICBjb25zdCB0YWJIaXN0b3J5ID0gZ2V0VGFic0hpc3RvcnkodGFiKTtcbiAgICAgICAgaWYgKHRhYkhpc3RvcnkpIHtcbiAgICAgICAgICAgIHJldHVybiB0YWJIaXN0b3J5WzBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBjb25zdCBnZXRDdXJyZW50Um91dGVJbmZvRm9yVGFiID0gKHRhYikgPT4ge1xuICAgICAgICBjb25zdCB0YWJIaXN0b3J5ID0gZ2V0VGFic0hpc3RvcnkodGFiKTtcbiAgICAgICAgaWYgKHRhYkhpc3RvcnkpIHtcbiAgICAgICAgICAgIHJldHVybiB0YWJIaXN0b3J5W3RhYkhpc3RvcnkubGVuZ3RoIC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZpbmRzIGFuZCByZXR1cm5zIHRoZSBwcmV2aW91cyB2aWV3IGJhc2VkIHVwb25cbiAgICAgKiB3aGF0IG9yaWdpbmFsbHkgcHVzaGVkIGl0IChwdXNoZWRCeVJvdXRlKS5cbiAgICAgKiBXaGVuIGBkZWx0YWAgPCAtMSB0aGVuIHdlIHNob3VsZCBqdXN0IGluZGV4IGludG9cbiAgICAgKiB0byBhcnJheSBiZWNhdXNlIHRoZSBwcmV2aW91cyB2aWV3IHRoYXQgd2Ugd2FudCBpcyBub3RcbiAgICAgKiBuZWNlc3NhcmlseSB0aGUgdmlldyB0aGF0IHB1c2hlZCBvdXIgY3VycmVudCB2aWV3LlxuICAgICAqIEFkZGl0aW9uYWxseSwgd2hlbiBqdW1waW5nIGFyb3VuZCBpbiBoaXN0b3J5LCB3ZVxuICAgICAqIGRvIG5vdCBtb2RpZnkgdGhlIGxvY2F0aW9uSGlzdG9yeSBzdGFjayBzbyB3ZSB3b3VsZFxuICAgICAqIG5vdCB1cGRhdGUgcHVzaGVkQnlSb3V0ZSBhbnl3YXlzLlxuICAgICAqL1xuICAgIGNvbnN0IGZpbmRMYXN0TG9jYXRpb24gPSAocm91dGVJbmZvLCBkZWx0YSA9IC0xKSA9PiB7XG4gICAgICAgIGNvbnN0IHJvdXRlSW5mb3MgPSBnZXRUYWJzSGlzdG9yeShyb3V0ZUluZm8udGFiKTtcbiAgICAgICAgaWYgKHJvdXRlSW5mb3MpIHtcbiAgICAgICAgICAgIGlmIChkZWx0YSA8IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlSW5mb3Nbcm91dGVJbmZvcy5sZW5ndGggLSAxICsgZGVsdGFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHJvdXRlSW5mb3MubGVuZ3RoIC0gMjsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmkgPSByb3V0ZUluZm9zW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyaS5wYXRobmFtZSA9PT0gcm91dGVJbmZvLnB1c2hlZEJ5Um91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IGxvY2F0aW9uSGlzdG9yeS5sZW5ndGggLSAyOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3QgcmkgPSBsb2NhdGlvbkhpc3RvcnlbaV07XG4gICAgICAgICAgICBpZiAocmkpIHtcbiAgICAgICAgICAgICAgICBpZiAocmkucGF0aG5hbWUgPT09IHJvdXRlSW5mby5wdXNoZWRCeVJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbkhpc3RvcnlbaSArIDEgKyBkZWx0YV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjdXJyZW50LFxuICAgICAgICBzaXplLFxuICAgICAgICBsYXN0LFxuICAgICAgICBhZGQsXG4gICAgICAgIGNhbkdvQmFjayxcbiAgICAgICAgdXBkYXRlLFxuICAgICAgICBnZXRGaXJzdFJvdXRlSW5mb0ZvclRhYixcbiAgICAgICAgZ2V0Q3VycmVudFJvdXRlSW5mb0ZvclRhYixcbiAgICAgICAgZmluZExhc3RMb2NhdGlvbixcbiAgICAgICAgY2xlYXJIaXN0b3J5LFxuICAgIH07XG59O1xuXG5jb25zdCBpZHMgPSB7IG1haW46IDAgfTtcbmNvbnN0IGdlbmVyYXRlSWQgPSAodHlwZSA9IFwibWFpblwiKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGlkID0gKChfYSA9IGlkc1t0eXBlXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMCkgKyAxO1xuICAgIGlkc1t0eXBlXSA9IGlkO1xuICAgIHJldHVybiBpZC50b1N0cmluZygpO1xufTtcblxuLy8gVE9ETyhGVy0yOTY5KTogdHlwZXNcbmNvbnN0IGNyZWF0ZUlvblJvdXRlciA9IChvcHRzLCByb3V0ZXIpID0+IHtcbiAgICBsZXQgY3VycmVudE5hdmlnYXRpb25JbmZvID0ge1xuICAgICAgICBkaXJlY3Rpb246IHVuZGVmaW5lZCxcbiAgICAgICAgYWN0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgIGRlbHRhOiB1bmRlZmluZWQsXG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJb25pYyBWdWUgc2hvdWxkIG9ubHkgcmVhY3QgdG8gbmF2aWdhdGlvblxuICAgICAqIGNoYW5nZXMgb25jZSB0aGV5IGhhdmUgYmVlbiBjb25maXJtZWQgYW5kIHNob3VsZFxuICAgICAqIG5ldmVyIGFmZmVjdCB0aGUgb3V0Y29tZSBvZiBuYXZpZ2F0aW9uICh3aXRoIHRoZVxuICAgICAqIGV4Y2VwdGlvbiBvZiBnb2luZyBiYWNrIG9yIHNlbGVjdGluZyBhIHRhYikuXG4gICAgICogQXMgYSByZXN1bHQsIHdlIHNob3VsZCBkbyBvdXIgd29yayBpbiBhZnRlckVhY2hcbiAgICAgKiB3aGljaCBpcyBmaXJlZCBvbmNlIG5hdmlnYXRpb24gaXMgY29uZmlybWVkXG4gICAgICogYW5kIGFueSB1c2VyIGd1YXJkcyBoYXZlIHJ1bi5cbiAgICAgKi9cbiAgICByb3V0ZXIuYWZ0ZXJFYWNoKCh0bywgXywgZmFpbHVyZSkgPT4ge1xuICAgICAgICBpZiAoZmFpbHVyZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgeyBkaXJlY3Rpb24sIGFjdGlvbiwgZGVsdGEgfSA9IGN1cnJlbnROYXZpZ2F0aW9uSW5mbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gY2FsbGluZyByb3V0ZXIucmVwbGFjZSwgd2UgYXJlIG5vdCBpbmZvcm1lZFxuICAgICAgICAgKiBhYm91dCB0aGUgcmVwbGFjZSBhY3Rpb24gaW4gb3B0cy5oaXN0b3J5Lmxpc3RlblxuICAgICAgICAgKiBidXQgd2UgY2FuIGNoZWNrIHRvIHNlZSBpZiB0aGUgbGF0ZXN0IHJvdXRpbmcgYWN0aW9uXG4gICAgICAgICAqIHdhcyBhIHJlcGxhY2UgYWN0aW9uIGJ5IGxvb2tpbmcgYXQgdGhlIGhpc3Rvcnkgc3RhdGUuXG4gICAgICAgICAqIFdlIG5lZWQgdG8gdXNlIG9wdHMuaGlzdG9yeSByYXRoZXIgdGhhbiB3aW5kb3cuaGlzdG9yeVxuICAgICAgICAgKiBiZWNhdXNlIHdpbmRvdy5oaXN0b3J5IHdpbGwgYmUgdW5kZWZpbmVkIHdoZW4gdXNpbmcgU1NSLlxuICAgICAgICAgKi9cbiAgICAgICAgY3VycmVudEhpc3RvcnlQb3NpdGlvbiA9IG9wdHMuaGlzdG9yeS5zdGF0ZS5wb3NpdGlvbjtcbiAgICAgICAgY29uc3QgcmVwbGFjZUFjdGlvbiA9IG9wdHMuaGlzdG9yeS5zdGF0ZS5yZXBsYWNlZCA/IFwicmVwbGFjZVwiIDogdW5kZWZpbmVkO1xuICAgICAgICBoYW5kbGVIaXN0b3J5Q2hhbmdlKHRvLCBhY3Rpb24gfHwgcmVwbGFjZUFjdGlvbiwgZGlyZWN0aW9uLCBkZWx0YSk7XG4gICAgICAgIGN1cnJlbnROYXZpZ2F0aW9uSW5mbyA9IHtcbiAgICAgICAgICAgIGRpcmVjdGlvbjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgYWN0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBkZWx0YTogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH0pO1xuICAgIGNvbnN0IGxvY2F0aW9uSGlzdG9yeSA9IGNyZWF0ZUxvY2F0aW9uSGlzdG9yeSgpO1xuICAgIC8qKlxuICAgICAqIEtlZXBpbmcgdHJhY2sgb2YgdGhlIGhpc3RvcnkgcG9zaXRpb25cbiAgICAgKiBhbGxvd3MgdXMgdG8gZGV0ZXJtaW5lIGlmIGEgdXNlciBpcyBwdXNoaW5nXG4gICAgICogbmV3IHBhZ2VzIG9yIHVwZGF0aW5nIGhpc3RvcnkgdmlhIHRoZSBmb3J3YXJkXG4gICAgICogYW5kIGJhY2sgYnJvd3NlciBidXR0b25zLlxuICAgICAqL1xuICAgIGxldCBpbml0aWFsSGlzdG9yeVBvc2l0aW9uID0gb3B0cy5oaXN0b3J5LnN0YXRlLnBvc2l0aW9uO1xuICAgIGxldCBjdXJyZW50SGlzdG9yeVBvc2l0aW9uID0gb3B0cy5oaXN0b3J5LnN0YXRlLnBvc2l0aW9uO1xuICAgIGxldCBjdXJyZW50Um91dGVJbmZvO1xuICAgIGxldCBpbmNvbWluZ1JvdXRlUGFyYW1zO1xuICAgIGNvbnN0IGhpc3RvcnlDaGFuZ2VMaXN0ZW5lcnMgPSBbXTtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpb25CYWNrQnV0dG9uXCIsIChldikgPT4ge1xuICAgICAgICAgICAgZXYuZGV0YWlsLnJlZ2lzdGVyKDAsIChwcm9jZXNzTmV4dEhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgICAgICBvcHRzLmhpc3RvcnkuZ28oLTEpO1xuICAgICAgICAgICAgICAgIHByb2Nlc3NOZXh0SGFuZGxlcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvcHRzLmhpc3RvcnkubGlzdGVuKChfLCBfeCwgaW5mbykgPT4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogaGlzdG9yeS5saXN0ZW4gb25seSBmaXJlcyBvbiBjZXJ0YWluXG4gICAgICAgICAqIGV2ZW50IHN1Y2ggYXMgd2hlbiB0aGUgdXNlciBjbGlja3MgdGhlXG4gICAgICAgICAqIGJyb3dzZXIgYmFjayBidXR0b24uIEl0IGFsc28gZ2l2ZXMgdXNcbiAgICAgICAgICogYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhcyB0byB0aGUgdHlwZVxuICAgICAgICAgKiBvZiBuYXZpZ2F0aW9uIChmb3J3YXJkLCBiYWNrd2FyZCwgZXRjKS5cbiAgICAgICAgICpcbiAgICAgICAgICogV2UgY2FuIHVzZSB0aGlzIHRvIGJldHRlciBoYW5kbGUgdGhlXG4gICAgICAgICAqIGBoYW5kbGVIaXN0b3J5Q2hhbmdlYCBjYWxsIGluXG4gICAgICAgICAqIHJvdXRlci5iZWZvcmVFYWNoXG4gICAgICAgICAqL1xuICAgICAgICBjdXJyZW50TmF2aWdhdGlvbkluZm8gPSB7XG4gICAgICAgICAgICBkZWx0YTogaW5mby5kZWx0YSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQm90aCB0aGUgYnJvd3NlciBmb3J3YXJkIGFuZCBiYWNrd2FyZCBhY3Rpb25zXG4gICAgICAgICAgICAgKiBhcmUgY29uc2lkZXJlZCBcInBvcFwiIGFjdGlvbnMsIGJ1dCB3aGVuIGdvaW5nIGZvcndhcmRcbiAgICAgICAgICAgICAqIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHRoZSBmb3J3YXJkIGFuaW1hdGlvbiBpcyB1c2VkLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBhY3Rpb246IGluZm8udHlwZSA9PT0gXCJwb3BcIiAmJiBpbmZvLmRlbHRhID49IDEgPyBcInB1c2hcIiA6IGluZm8udHlwZSxcbiAgICAgICAgICAgIGRpcmVjdGlvbjogaW5mby5kaXJlY3Rpb24gPT09IFwiXCIgPyBcImZvcndhcmRcIiA6IGluZm8uZGlyZWN0aW9uLFxuICAgICAgICB9O1xuICAgIH0pO1xuICAgIGNvbnN0IGhhbmRsZU5hdmlnYXRlQmFjayA9IChkZWZhdWx0SHJlZiwgcm91dGVyQW5pbWF0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IHJvdXRlSW5mbyA9IGxvY2F0aW9uSGlzdG9yeS5jdXJyZW50KGluaXRpYWxIaXN0b3J5UG9zaXRpb24sIGN1cnJlbnRIaXN0b3J5UG9zaXRpb24pO1xuICAgICAgICBpZiAocm91dGVJbmZvICYmIHJvdXRlSW5mby5wdXNoZWRCeVJvdXRlKSB7XG4gICAgICAgICAgICBjb25zdCBwcmV2SW5mbyA9IGxvY2F0aW9uSGlzdG9yeS5maW5kTGFzdExvY2F0aW9uKHJvdXRlSW5mbyk7XG4gICAgICAgICAgICBpZiAocHJldkluZm8pIHtcbiAgICAgICAgICAgICAgICBpbmNvbWluZ1JvdXRlUGFyYW1zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwcmV2SW5mbyksIHsgcm91dGVyQWN0aW9uOiBcInBvcFwiLCByb3V0ZXJEaXJlY3Rpb246IFwiYmFja1wiLCByb3V0ZXJBbmltYXRpb246IHJvdXRlckFuaW1hdGlvbiB8fCByb3V0ZUluZm8ucm91dGVyQW5pbWF0aW9uIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyb3V0ZUluZm8ubGFzdFBhdGhuYW1lID09PSByb3V0ZUluZm8ucHVzaGVkQnlSb3V0ZSB8fFxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogV2UgbmVlZCB0byBleGNsdWRlIHRhYiBzd2l0Y2hlcy90YWJcbiAgICAgICAgICAgICAgICAgICAgICogY29udGV4dCBjaGFuZ2VzIGhlcmUgYmVjYXVzZSB0YWJiZWRcbiAgICAgICAgICAgICAgICAgICAgICogbmF2aWdhdGlvbiBpcyBub3QgbGluZWFyLCBidXQgcm91dGVyLmJhY2soKVxuICAgICAgICAgICAgICAgICAgICAgKiB3aWxsIGdvIGJhY2sgaW4gYSBsaW5lYXIgZmFzaGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIChwcmV2SW5mby5wYXRobmFtZSA9PT0gcm91dGVJbmZvLnB1c2hlZEJ5Um91dGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogVGFiIGluZm8gY2FuIGJlIHVuZGVmaW5lZCBvciAnJyAoZW1wdHkgc3RyaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICogYm90aCBhcmUgZmFsc2UteSB2YWx1ZXMsIHNvIHdlIGNhbiBqdXN0IHVzZSAhLlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAhcm91dGVJbmZvLnRhYiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIXByZXZJbmZvLnRhYikpIHtcbiAgICAgICAgICAgICAgICAgICAgcm91dGVyLmJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBXaGVuIGdvaW5nIGJhY2sgdG8gYSBjaGlsZCBwYWdlIG9mIGEgdGFiXG4gICAgICAgICAgICAgICAgICAgICAqIGFmdGVyIGJlaW5nIG9uIGFub3RoZXIgdGFiLCB3ZSBuZWVkIHRvIHVzZVxuICAgICAgICAgICAgICAgICAgICAgKiByb3V0ZXIuZ28oKSBoZXJlIGluc3RlYWQgb2YgcHVzaGluZyBvciByZXBsYWNpbmcuXG4gICAgICAgICAgICAgICAgICAgICAqIENvbnNpZGVyIHRoZSBmb2xsb3dpbmcgZXhhbXBsZTpcbiAgICAgICAgICAgICAgICAgICAgICogL3RhYnMvdGFiMSAtLT4gL3RhYnMvdGFiMS9jaGlsZDEgLS0+IC90YWJzL3RhYjEvY2hpbGQyXG4gICAgICAgICAgICAgICAgICAgICAqIC0tPiAvdGFicy90YWIyICh2aWEgVGFiIDIgYnV0dG9uKSAtLT4gL3RhYnMvdGFiMS9jaGlsZDIgKHZpYSBUYWIgMSBidXR0b24pXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIFByZXNzaW5nIHRoZSBpb24tYmFjay1idXR0b24gb24gL3RhYnMvdGFiMS9jaGlsZDIgc2hvdWxkIHRha2VcbiAgICAgICAgICAgICAgICAgICAgICogdXMgYmFjayB0byAvdGFicy90YWIxL2NoaWxkMSBub3QgL3RhYnMvdGFiMiBiZWNhdXNlIGVhY2ggdGFiXG4gICAgICAgICAgICAgICAgICAgICAqIGlzIGl0cyBvd24gc3RhY2suXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIElmIHdlIGNhbGxlZCBwcmVzc2VkIHRoZSBpb24tYmFjay1idXR0b24gYW5kIHRoaXMgY29kZSBjYWxsZWRcbiAgICAgICAgICAgICAgICAgICAgICogcm91dGVyLnJlcGxhY2UsIHRoZW4gdGhlIHN0YXRlIG9mIC90YWJzL3RhYjEvY2hpbGQyIHdvdWxkXG4gICAgICAgICAgICAgICAgICAgICAqIGJlIHJlcGxhY2VkIHdpdGggL3RhYnMvdGFiMS9jaGlsZDEuIEhvd2V2ZXIsIHRoaXMgbWVhbnMgdGhhdFxuICAgICAgICAgICAgICAgICAgICAgKiB0aGVyZSB3b3VsZCBiZSB0d28gL3RhYnMvdGFiMS9jaGlsZDEgZW50cmllcyBpbiB0aGUgbG9jYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICogaGlzdG9yeSBhcyB0aGUgb3JpZ2luYWwgL3RhYnMvdGFiMS9jaGlsZDEgZW50cnkgaXMgc3RpbGwgdGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAqIEFzIGEgcmVzdWx0LCBjbGlja2luZyB0aGUgaW9uLWJhY2stYnV0dG9uIG9uIC90YWJzL3RhYjEvY2hpbGQxIGRvZXNcbiAgICAgICAgICAgICAgICAgICAgICogbm90aGluZyBiZWNhdXNlIHRoaXMgY29kZSB3b3VsZCB0cnkgdG8gcm91dGUgdG8gdGhlIHNhbWUgcGFnZVxuICAgICAgICAgICAgICAgICAgICAgKiB3ZSBhcmUgY3VycmVudGx5IG9uLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBJZiB3ZSBjYWxsZWQgcm91dGVyLnB1c2ggaW5zdGVhZCB0aGVuIHdlIHdvdWxkIHB1c2ggYVxuICAgICAgICAgICAgICAgICAgICAgKiBuZXcgL3RhYnMvdGFiMS9jaGlsZDEgZW50cnkgdG8gdGhlIGxvY2F0aW9uIGhpc3RvcnkuIFRoaXNcbiAgICAgICAgICAgICAgICAgICAgICogaXMgbm90IGdvb2QgYmVjYXVzZSB3ZSB3b3VsZCBoYXZlIHR3byAvdGFicy90YWIxL2NoaWxkMSBlbnRyaWVzXG4gICAgICAgICAgICAgICAgICAgICAqIHNlcGFyYXRlZCBieSBhIC90YWJzL3RhYjEvY2hpbGQyIGVudHJ5LlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgcm91dGVyLmdvKHByZXZJbmZvLnBvc2l0aW9uIC0gcm91dGVJbmZvLnBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVOYXZpZ2F0ZShkZWZhdWx0SHJlZiwgXCJwb3BcIiwgXCJiYWNrXCIsIHJvdXRlckFuaW1hdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoYW5kbGVOYXZpZ2F0ZShkZWZhdWx0SHJlZiwgXCJwb3BcIiwgXCJiYWNrXCIsIHJvdXRlckFuaW1hdGlvbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZU5hdmlnYXRlID0gKHBhdGgsIHJvdXRlckFjdGlvbiwgcm91dGVyRGlyZWN0aW9uLCByb3V0ZXJBbmltYXRpb24sIHRhYikgPT4ge1xuICAgICAgICBzZXRJbmNvbWluZ1JvdXRlUGFyYW1zKHJvdXRlckFjdGlvbiwgcm91dGVyRGlyZWN0aW9uLCByb3V0ZXJBbmltYXRpb24sIHRhYik7XG4gICAgICAgIGlmIChyb3V0ZXJBY3Rpb24gPT09IFwicHVzaFwiKSB7XG4gICAgICAgICAgICByb3V0ZXIucHVzaChwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJvdXRlci5yZXBsYWNlKHBhdGgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBUT0RPIFJvdXRlTG9jYXRpb25Ob3JtYWxpemVkXG4gICAgY29uc3QgaGFuZGxlSGlzdG9yeUNoYW5nZSA9IChsb2NhdGlvbiwgYWN0aW9uLCBkaXJlY3Rpb24sIGRlbHRhKSA9PiB7XG4gICAgICAgIGxldCBsZWF2aW5nTG9jYXRpb25JbmZvO1xuICAgICAgICBpZiAoaW5jb21pbmdSb3V0ZVBhcmFtcykge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB3ZSBhcmUgcmVwbGFjaW5nIHRoZSBzdGF0ZSBvZiBhIHJvdXRlXG4gICAgICAgICAgICAgKiB3aXRoIGFub3RoZXIgcm91dGUsIHRoZSBcImxlYXZpbmdcIiByb3V0ZVxuICAgICAgICAgICAgICogaXMgYXQgdGhlIHNhbWUgcG9zaXRpb24gaW4gbG9jYXRpb24gaGlzdG9yeVxuICAgICAgICAgICAgICogYXMgd2hlcmUgdGhlIHJlcGxhY2VkIHJvdXRlIHdpbGwgZXhpc3QuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmIChpbmNvbWluZ1JvdXRlUGFyYW1zLnJvdXRlckFjdGlvbiA9PT0gXCJyZXBsYWNlXCIpIHtcbiAgICAgICAgICAgICAgICBsZWF2aW5nTG9jYXRpb25JbmZvID0gbG9jYXRpb25IaXN0b3J5LmN1cnJlbnQoaW5pdGlhbEhpc3RvcnlQb3NpdGlvbiwgY3VycmVudEhpc3RvcnlQb3NpdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbmNvbWluZ1JvdXRlUGFyYW1zLnJvdXRlckFjdGlvbiA9PT0gXCJwb3BcIikge1xuICAgICAgICAgICAgICAgIGxlYXZpbmdMb2NhdGlvbkluZm8gPSBsb2NhdGlvbkhpc3RvcnkuY3VycmVudChpbml0aWFsSGlzdG9yeVBvc2l0aW9uLCBjdXJyZW50SGlzdG9yeVBvc2l0aW9uICsgMSk7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogSWYgdGhlIElvbmljIFJvdXRlciBhY3Rpb24gd2FzIFwicG9wXCJcbiAgICAgICAgICAgICAgICAgKiBhbmQgdGhlIGJyb3dzZXIgaGlzdG9yeSBhY3Rpb24gd2FzIFwicmVwbGFjZVwiLCB0aGVuXG4gICAgICAgICAgICAgICAgICogaXQgaXMgdGhlIGNhc2UgdGhhdCB0aGUgdXNlciBjbGlja2VkIGFuIElvbkJhY2tCdXR0b25cbiAgICAgICAgICAgICAgICAgKiB0aGF0IGlzIHRyeWluZyB0byBnbyBiYWNrIHRvIHRoZSByb3V0ZSBzcGVjaWZpZWRcbiAgICAgICAgICAgICAgICAgKiBieSB0aGUgZGVmYXVsdEhyZWYgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBUaGUgcHJvYmxlbSBpcyB0aGF0IHRoaXMgcm91dGUgY3VycmVudGx5IGRvZXNcbiAgICAgICAgICAgICAgICAgKiBub3QgZXhpc3QgaW4gdGhlIGJyb3dzZXIgaGlzdG9yeSwgYW5kIHdlIGNhbm5vdFxuICAgICAgICAgICAgICAgICAqIHByZXBlbmQgYW4gaXRlbSBpbiB0aGUgYnJvd3NlcidzIGhpc3Rvcnkgc3RhY2suXG4gICAgICAgICAgICAgICAgICogVG8gd29yayBhcm91bmQgdGhpcywgd2UgcmVwbGFjZSB0aGUgc3RhdGUgb2ZcbiAgICAgICAgICAgICAgICAgKiB0aGUgY3VycmVudCBpdGVtIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgICogR2l2ZW4gdGhpcyBzY2VuYXJpbzpcbiAgICAgICAgICAgICAgICAgKiAvcGFnZTIgLS0+IC9wYWdlMyAtLT4gKGJhY2spIC9wYWdlMiAtLT4gKGRlZmF1bHRIcmVmKSAvcGFnZTFcbiAgICAgICAgICAgICAgICAgKiBXZSB3b3VsZCByZXBsYWNlIHRoZSBzdGF0ZSBvZiAvcGFnZTIgd2l0aCB0aGUgc3RhdGUgb2YgL3BhZ2UxLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogV2hlbiBkb2luZyB0aGlzLCB3ZSBhcmUgZXNzZW50aWFsbHkgcmUtd3JpdGluZyBwYXN0XG4gICAgICAgICAgICAgICAgICogaGlzdG9yeSB3aGljaCBtYWtlcyB0aGUgZnV0dXJlIGhpc3Rvcnkgbm8gbG9uZ2VyIHJlbGV2YW50LlxuICAgICAgICAgICAgICAgICAqIEFzIGEgcmVzdWx0LCB3ZSBjbGVhciBvdXQgdGhlIGxvY2F0aW9uIGhpc3Rvcnkgc28gdGhhdCB1c2Vyc1xuICAgICAgICAgICAgICAgICAqIGNhbiBiZWdpbiBwdXNoaW5nIG5ldyByb3V0ZXMgdG8gdGhlIHN0YWNrLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogVGhpcyBwYXR0ZXJuIGlzIGFsaWduZWQgd2l0aCBob3cgdGhlIGJyb3dzZXIgaGFuZGxlc1xuICAgICAgICAgICAgICAgICAqIHB1c2hpbmcgbmV3IHJvdXRlcyBhZnRlciBnb2luZyBiYWNrIGFzIHdlbGwgYXMgaG93XG4gICAgICAgICAgICAgICAgICogb3RoZXIgc3RhY2sgYmFzZWQgb3BlcmF0aW9ucyBzdWNoIGFzIHVuZG8vcmVkbyB3b3JrLlxuICAgICAgICAgICAgICAgICAqIEZvciBleGFtcGxlLCBpZiB5b3UgZG8gdGFza3MgQSwgQiwgQywgdW5kbyBCIGFuZCBDLCBhbmRcbiAgICAgICAgICAgICAgICAgKiB0aGVuIGRvIHRhc2sgRCwgeW91IGNhbm5vdCBcInJlZG9cIiBCIGFuZCBDIGJlY2F1c2UgeW91XG4gICAgICAgICAgICAgICAgICogcmV3cm90ZSB0aGUgc3RhY2sncyBwYXN0IGhpc3RvcnkuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBXaXRoIGJyb3dzZXIgaGlzdG9yeSwgaXQgaXMgYSBzaW1pbGFyIGNvbmNlcHQuXG4gICAgICAgICAgICAgICAgICogR29pbmcgL3BhZ2UxIC0tPiAvcGFnZTIgLS0+IC9wYWdlMyBhbmQgdGhlbiBkb2luZ1xuICAgICAgICAgICAgICAgICAqIHJvdXRlci5nbygtMikgd2lsbCBicmluZyB5b3UgYmFjayB0byAvcGFnZTEuXG4gICAgICAgICAgICAgICAgICogSWYgeW91IHRoZW4gcHVzaCAvcGFnZTQsIHlvdSBoYXZlIHJld3JpdHRlblxuICAgICAgICAgICAgICAgICAqIHRoZSBwYXN0IGhpc3RvcnkgYW5kIHlvdSBjYW4gbm8gbG9uZ2VyIGdvXG4gICAgICAgICAgICAgICAgICogZm9yd2FyZCB0byAvcGFnZTIgb3IgL3BhZ2UzLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGlmIChhY3Rpb24gPT09IFwicmVwbGFjZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSGlzdG9yeS5jbGVhckhpc3RvcnkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBJZiB0aGUgcm91dGVyRGlyZWN0aW9uIHdhcyBzcGVjaWZpZWQgYXMgXCJyb290XCIsIHRoZW5cbiAgICAgICAgICAgICAgICAgKiB3ZSBhcmUgcmVwbGFjaW5nIHRoZSBpbml0aWFsIHN0YXRlIG9mIGxvY2F0aW9uIGhpc3RvcnlcbiAgICAgICAgICAgICAgICAgKiB3aXRoIHRoaXMgaW5jb21pbmcgcm91dGUuIEFzIGEgcmVzdWx0LCB0aGUgbGVhdmluZ1xuICAgICAgICAgICAgICAgICAqIGhpc3RvcnkgaW5mbyBpcyBzdG9yZWQgYXQgdGhlIHNhbWUgbG9jYXRpb24gYXNcbiAgICAgICAgICAgICAgICAgKiB3aGVyZSB0aGUgaW5jb21pbmcgaGlzdG9yeSBsb2NhdGlvbiB3aWxsIGJlIHN0b3JlZC5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIE90aGVyd2lzZSwgd2UgY2FuIGFzc3VtZSB0aGlzIGlzIGp1c3QgYW5vdGhlciByb3V0ZVxuICAgICAgICAgICAgICAgICAqIHRoYXQgd2lsbCBiZSBwdXNoZWQgb250byB0aGUgZW5kIG9mIGxvY2F0aW9uIGhpc3RvcnksXG4gICAgICAgICAgICAgICAgICogc28gd2UgY2FuIGdyYWIgdGhlIHByZXZpb3VzIGl0ZW0gaW4gaGlzdG9yeSByZWxhdGl2ZVxuICAgICAgICAgICAgICAgICAqIHRvIHdoZXJlIHRoZSBoaXN0b3J5IHN0YXRlIGN1cnJlbnRseSBpcy5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGluY29taW5nUm91dGVQYXJhbXMucm91dGVyRGlyZWN0aW9uID09PSBcInJvb3RcIlxuICAgICAgICAgICAgICAgICAgICA/IGN1cnJlbnRIaXN0b3J5UG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgOiBjdXJyZW50SGlzdG9yeVBvc2l0aW9uIC0gMTtcbiAgICAgICAgICAgICAgICBsZWF2aW5nTG9jYXRpb25JbmZvID0gbG9jYXRpb25IaXN0b3J5LmN1cnJlbnQoaW5pdGlhbEhpc3RvcnlQb3NpdGlvbiwgcG9zaXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGVhdmluZ0xvY2F0aW9uSW5mbyA9IGN1cnJlbnRSb3V0ZUluZm87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsZWF2aW5nTG9jYXRpb25JbmZvKSB7XG4gICAgICAgICAgICBsZWF2aW5nTG9jYXRpb25JbmZvID0ge1xuICAgICAgICAgICAgICAgIHBhdGhuYW1lOiBcIlwiLFxuICAgICAgICAgICAgICAgIHNlYXJjaDogXCJcIixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGVhdmluZ1VybCA9IGxlYXZpbmdMb2NhdGlvbkluZm8ucGF0aG5hbWUgKyBsZWF2aW5nTG9jYXRpb25JbmZvLnNlYXJjaDtcbiAgICAgICAgaWYgKGxlYXZpbmdVcmwgIT09IGxvY2F0aW9uLmZ1bGxQYXRoKSB7XG4gICAgICAgICAgICBpZiAoIWluY29taW5nUm91dGVQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09PSBcInJlcGxhY2VcIikge1xuICAgICAgICAgICAgICAgICAgICBpbmNvbWluZ1JvdXRlUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyQWN0aW9uOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlckRpcmVjdGlvbjogXCJub25lXCIsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJwb3BcIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByb3V0ZUluZm8gPSBsb2NhdGlvbkhpc3RvcnkuY3VycmVudChpbml0aWFsSGlzdG9yeVBvc2l0aW9uLCBjdXJyZW50SGlzdG9yeVBvc2l0aW9uIC0gZGVsdGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm91dGVJbmZvICYmIHJvdXRlSW5mby5wdXNoZWRCeVJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2Um91dGVJbmZvID0gbG9jYXRpb25IaXN0b3J5LmZpbmRMYXN0TG9jYXRpb24ocm91dGVJbmZvLCBkZWx0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNvbWluZ1JvdXRlUGFyYW1zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwcmV2Um91dGVJbmZvKSwgeyByb3V0ZXJBY3Rpb246IFwicG9wXCIsIHJvdXRlckRpcmVjdGlvbjogXCJiYWNrXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNvbWluZ1JvdXRlUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlckFjdGlvbjogXCJwb3BcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJEaXJlY3Rpb246IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWluY29taW5nUm91dGVQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5jb21pbmdSb3V0ZVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlckFjdGlvbjogXCJwdXNoXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJEaXJlY3Rpb246IGRpcmVjdGlvbiB8fCBcImZvcndhcmRcIixcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcm91dGVJbmZvO1xuICAgICAgICAgICAgaWYgKGluY29taW5nUm91dGVQYXJhbXMgPT09IG51bGwgfHwgaW5jb21pbmdSb3V0ZVBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW5jb21pbmdSb3V0ZVBhcmFtcy5pZCkge1xuICAgICAgICAgICAgICAgIHJvdXRlSW5mbyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaW5jb21pbmdSb3V0ZVBhcmFtcyksIHsgbGFzdFBhdGhuYW1lOiBsZWF2aW5nTG9jYXRpb25JbmZvLnBhdGhuYW1lIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNQdXNoZWQgPSBpbmNvbWluZ1JvdXRlUGFyYW1zLnJvdXRlckFjdGlvbiA9PT0gXCJwdXNoXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgaW5jb21pbmdSb3V0ZVBhcmFtcy5yb3V0ZXJEaXJlY3Rpb24gPT09IFwiZm9yd2FyZFwiO1xuICAgICAgICAgICAgICAgIHJvdXRlSW5mbyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IGlkOiBnZW5lcmF0ZUlkKFwicm91dGVJbmZvXCIpIH0sIGluY29taW5nUm91dGVQYXJhbXMpLCB7IGxhc3RQYXRobmFtZTogbGVhdmluZ0xvY2F0aW9uSW5mby5wYXRobmFtZSwgcGF0aG5hbWU6IGxvY2F0aW9uLnBhdGgsIHNlYXJjaDogKGxvY2F0aW9uLmZ1bGxQYXRoICYmIGxvY2F0aW9uLmZ1bGxQYXRoLnNwbGl0KFwiP1wiKVsxXSkgfHwgXCJcIiwgcGFyYW1zOiBsb2NhdGlvbi5wYXJhbXMgJiYgbG9jYXRpb24ucGFyYW1zLCBwcmV2Um91dGVMYXN0UGF0aG5hbWU6IGxlYXZpbmdMb2NhdGlvbkluZm8ubGFzdFBhdGhuYW1lIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpc1B1c2hlZCkge1xuICAgICAgICAgICAgICAgICAgICByb3V0ZUluZm8ucHVzaGVkQnlSb3V0ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWF2aW5nTG9jYXRpb25JbmZvLnBhdGhuYW1lICE9PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBsZWF2aW5nTG9jYXRpb25JbmZvLnBhdGhuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdXRlSW5mby5yb3V0ZXJBY3Rpb24gPT09IFwicG9wXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSBsb2NhdGlvbkhpc3RvcnkuZmluZExhc3RMb2NhdGlvbihyb3V0ZUluZm8pO1xuICAgICAgICAgICAgICAgICAgICByb3V0ZUluZm8ucHVzaGVkQnlSb3V0ZSA9IHJvdXRlID09PSBudWxsIHx8IHJvdXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByb3V0ZS5wdXNoZWRCeVJvdXRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3V0ZUluZm8ucm91dGVyQWN0aW9uID09PSBcInB1c2hcIiAmJlxuICAgICAgICAgICAgICAgICAgICByb3V0ZUluZm8udGFiICE9PSBsZWF2aW5nTG9jYXRpb25JbmZvLnRhYikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0Um91dGUgPSBsb2NhdGlvbkhpc3RvcnkuZ2V0Q3VycmVudFJvdXRlSW5mb0ZvclRhYihyb3V0ZUluZm8udGFiKTtcbiAgICAgICAgICAgICAgICAgICAgcm91dGVJbmZvLnB1c2hlZEJ5Um91dGUgPSBsYXN0Um91dGUgPT09IG51bGwgfHwgbGFzdFJvdXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsYXN0Um91dGUucHVzaGVkQnlSb3V0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocm91dGVJbmZvLnJvdXRlckFjdGlvbiA9PT0gXCJyZXBsYWNlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFdoZW4gcmVwbGFjaW5nIGEgcm91dGUsIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIHNlbGVjdCB0aGUgY3VycmVudCByb3V0ZVxuICAgICAgICAgICAgICAgICAgICAgKiB0aGF0IHdlIGFyZSBvbiwgbm90IHRoZSBsYXN0IHJvdXRlIGluIHRoZSBzdGFjay4gVGhlIGxhc3Qgcm91dGUgaW4gdGhlIHN0YWNrXG4gICAgICAgICAgICAgICAgICAgICAqIGlzIG5vdCBhbHdheXMgdGhlIGN1cnJlbnQgcm91dGUuXG4gICAgICAgICAgICAgICAgICAgICAqIEV4YW1wbGU6XG4gICAgICAgICAgICAgICAgICAgICAqIEdpdmVuIHRoZSBmb2xsb3dpbmcgaGlzdG9yeTogL3BhZ2UxIC0tPiAvcGFnZTJcbiAgICAgICAgICAgICAgICAgICAgICogRG9pbmcgcm91dGVyLmdvKC0xKSB3b3VsZCBicmluZyB5b3UgdG8gL3BhZ2UxLlxuICAgICAgICAgICAgICAgICAgICAgKiBJZiB5b3UgdGhlbiBkaWQgcm91dGVyLnJlcGxhY2UoJy9wYWdlMycpLCAvcGFnZTEgc2hvdWxkXG4gICAgICAgICAgICAgICAgICAgICAqIGJlIHJlcGxhY2VkIHdpdGggL3BhZ2UzIGV2ZW4gdGhvdWdoIC9wYWdlMiBpcyB0aGUgbGFzdFxuICAgICAgICAgICAgICAgICAgICAgKiBpdGVtIGluIHRoZSBzdGFjay9cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRSb3V0ZUluZm8gPSBsb2NhdGlvbkhpc3RvcnkuY3VycmVudChpbml0aWFsSGlzdG9yeVBvc2l0aW9uLCBjdXJyZW50SGlzdG9yeVBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIElmIGdvaW5nIGZyb20gL2hvbWUgdG8gL2NoaWxkLCB0aGVuIHJlcGxhY2luZyBmcm9tXG4gICAgICAgICAgICAgICAgICAgICAqIC9jaGlsZCB0byAvaG9tZSwgd2UgZG9uJ3Qgd2FudCB0aGUgcm91dGUgaW5mbyB0b1xuICAgICAgICAgICAgICAgICAgICAgKiBzYXkgdGhhdCAvaG9tZSB3YXMgcHVzaGVkIGJ5IC9ob21lIHdoaWNoIGlzIG5vdCBjb3JyZWN0LlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFB1c2hlZEJ5ID0gY3VycmVudFJvdXRlSW5mbyA9PT0gbnVsbCB8fCBjdXJyZW50Um91dGVJbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50Um91dGVJbmZvLnB1c2hlZEJ5Um91dGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHB1c2hlZEJ5Um91dGUgPSBjdXJyZW50UHVzaGVkQnkgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFB1c2hlZEJ5ICE9PSByb3V0ZUluZm8ucGF0aG5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY3VycmVudFB1c2hlZEJ5XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJvdXRlSW5mby5wdXNoZWRCeVJvdXRlO1xuICAgICAgICAgICAgICAgICAgICByb3V0ZUluZm8ubGFzdFBhdGhuYW1lID1cbiAgICAgICAgICAgICAgICAgICAgICAgIChjdXJyZW50Um91dGVJbmZvID09PSBudWxsIHx8IGN1cnJlbnRSb3V0ZUluZm8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnRSb3V0ZUluZm8ucGF0aG5hbWUpIHx8IHJvdXRlSW5mby5sYXN0UGF0aG5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHJvdXRlSW5mby5wdXNoZWRCeVJvdXRlID0gcHVzaGVkQnlSb3V0ZTtcbiAgICAgICAgICAgICAgICAgICAgcm91dGVJbmZvLnJvdXRlckRpcmVjdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgICAgICAoY3VycmVudFJvdXRlSW5mbyA9PT0gbnVsbCB8fCBjdXJyZW50Um91dGVJbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50Um91dGVJbmZvLnJvdXRlckRpcmVjdGlvbikgfHwgcm91dGVJbmZvLnJvdXRlckRpcmVjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgcm91dGVJbmZvLnJvdXRlckFuaW1hdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgICAgICAoY3VycmVudFJvdXRlSW5mbyA9PT0gbnVsbCB8fCBjdXJyZW50Um91dGVJbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50Um91dGVJbmZvLnJvdXRlckFuaW1hdGlvbikgfHwgcm91dGVJbmZvLnJvdXRlckFuaW1hdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgcm91dGVJbmZvLnByZXZSb3V0ZUxhc3RQYXRobmFtZSA9IGN1cnJlbnRSb3V0ZUluZm8gPT09IG51bGwgfHwgY3VycmVudFJvdXRlSW5mbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudFJvdXRlSW5mby5sYXN0UGF0aG5hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm91dGVJbmZvLnBvc2l0aW9uID0gY3VycmVudEhpc3RvcnlQb3NpdGlvbjtcbiAgICAgICAgICAgIHJvdXRlSW5mby5kZWx0YSA9IGRlbHRhO1xuICAgICAgICAgICAgY29uc3QgaGlzdG9yeVNpemUgPSBsb2NhdGlvbkhpc3Rvcnkuc2l6ZSgpO1xuICAgICAgICAgICAgY29uc3QgaGlzdG9yeURpZmYgPSBjdXJyZW50SGlzdG9yeVBvc2l0aW9uIC0gaW5pdGlhbEhpc3RvcnlQb3NpdGlvbjtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSWYgdGhlIHNpemUgb2YgbG9jYXRpb24gaGlzdG9yeSBpcyBncmVhdGVyXG4gICAgICAgICAgICAgKiB0aGFuIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIGN1cnJlbnQgaGlzdG9yeVxuICAgICAgICAgICAgICogcG9zaXRpb24gYW5kIHRoZSBpbml0aWFsIGhpc3RvcnkgcG9zaXRpb25cbiAgICAgICAgICAgICAqIHRoZW4gd2UgYXJlIGd1YXJhbnRlZWQgdG8gYWxyZWFkeSBoYXZlIGEgaGlzdG9yeVxuICAgICAgICAgICAgICogaXRlbSBmb3IgdGhpcyByb3V0ZS4gSW4gb3RoZXIgd29yZHMsIGEgdXNlclxuICAgICAgICAgICAgICogaXMgbmF2aWdhdGluZyB3aXRoaW4gdGhlIGhpc3Rvcnkgd2l0aG91dCBwdXNoaW5nXG4gICAgICAgICAgICAgKiBuZXcgaXRlbXMgd2l0aGluIHRoZSBzdGFjay5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBJZiB0aGUgaGlzdG9yeVNpemUgPT09IGhpc3RvcnlEaWZmLFxuICAgICAgICAgICAgICogdGhlbiB3ZSBhcmUgc3RpbGwgcmUtd3JpdGluZyBoaXN0b3J5XG4gICAgICAgICAgICAgKiBieSByZXBsYWNpbmcgdGhlIGN1cnJlbnQgcm91dGUgc3RhdGVcbiAgICAgICAgICAgICAqIHdpdGggYSBuZXcgcm91dGUgc3RhdGUuIFRoZSBpbml0aWFsXG4gICAgICAgICAgICAgKiBhY3Rpb24gd2hlbiBsb2FkaW5nIGFuIGFwcCBpc1xuICAgICAgICAgICAgICogZ29pbmcgdG8gYmUgcmVwbGFjZSBvcGVyYXRpb24sIHNvXG4gICAgICAgICAgICAgKiB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB3ZSBleGNsdWRlIHRoYXRcbiAgICAgICAgICAgICAqIGFjdGlvbiBieSBlbnN1cmluZyBoaXN0b3J5U2l6ZSA+IDAuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbnN0IGlzUmVwbGFjaW5nID0gaGlzdG9yeVNpemUgPT09IGhpc3RvcnlEaWZmICYmIGhpc3RvcnlTaXplID4gMCAmJiBhY3Rpb24gPT09IFwicmVwbGFjZVwiO1xuICAgICAgICAgICAgaWYgKGhpc3RvcnlTaXplID4gaGlzdG9yeURpZmYgfHwgaXNSZXBsYWNpbmcpIHtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBXaGVuIG5hdmlnYXRpbmcgYmFjayB0aHJvdWdoIHRoZSBoaXN0b3J5LFxuICAgICAgICAgICAgICAgICAqIGlmIHVzZXJzIHRoZW4gcHVzaCBhIG5ldyByb3V0ZSB0aGUgZnV0dXJlXG4gICAgICAgICAgICAgICAgICogaGlzdG9yeSBzdGFjayBpcyBubyBsb25nZXIgcmVsZXZhbnQuIEFzXG4gICAgICAgICAgICAgICAgICogYSByZXN1bHQsIHdlIG5lZWQgdG8gY2xlYXIgb3V0IGFsbCBlbnRyaWVzXG4gICAgICAgICAgICAgICAgICogdGhhdCBhcHBlYXIgYWZ0ZXIgdGhlIGN1cnJlbnQgcm91dGVJbmZvXG4gICAgICAgICAgICAgICAgICogc28gdGhhdCB3ZSBjYW4gdGhlbiBhcHBlbmQgdGhlIG5ldyBoaXN0b3J5LlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogVGhpcyBkb2VzIG5vdCBhcHBseSB3aGVuIHVzaW5nIHJvdXRlci5nb1xuICAgICAgICAgICAgICAgICAqIGFzIHRoYXQgaXMgdHJhdmVyc2luZyB0aHJvdWdoIHRoZSBoaXN0b3J5LFxuICAgICAgICAgICAgICAgICAqIG5vdCBhbHRlcmluZyBpdC5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIFByZXZpb3VzbHkgd2UgaGFkIG9ubHkgdXBkYXRlZCB0aGUgZXhpc3Rpbmcgcm91dGVcbiAgICAgICAgICAgICAgICAgKiBhbmQgdGhlbiBsZWZ0IHRoZSBmdXR1cmUgaGlzdG9yeSBhbG9uZS4gVGhhdFxuICAgICAgICAgICAgICAgICAqIHdvcmtlZCBmb3Igc29tZSB1c2UgY2FzZXMgYnV0IHdhcyBub3Qgc3VmZmljaWVudFxuICAgICAgICAgICAgICAgICAqIGluIG90aGVyIHNjZW5hcmlvcy5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAoKHJvdXRlSW5mby5yb3V0ZXJBY3Rpb24gPT09IFwicHVzaFwiIHx8XG4gICAgICAgICAgICAgICAgICAgIHJvdXRlSW5mby5yb3V0ZXJBY3Rpb24gPT09IFwicmVwbGFjZVwiKSAmJlxuICAgICAgICAgICAgICAgICAgICBkZWx0YSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSGlzdG9yeS5jbGVhckhpc3Rvcnkocm91dGVJbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25IaXN0b3J5LmFkZChyb3V0ZUluZm8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uSGlzdG9yeS5hZGQocm91dGVJbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSWYgd2UgcmVjZW50bHkgcmVzZXQgdGhlIGxvY2F0aW9uIGhpc3RvcnlcbiAgICAgICAgICAgICAqIHRoZW4gd2UgYWxzbyBuZWVkIHRvIHVwZGF0ZSB0aGUgaW5pdGlhbFxuICAgICAgICAgICAgICogaGlzdG9yeSBwb3NpdGlvbi5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKGxvY2F0aW9uSGlzdG9yeS5zaXplKCkgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsSGlzdG9yeVBvc2l0aW9uID0gcm91dGVJbmZvLnBvc2l0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudFJvdXRlSW5mbyA9IHJvdXRlSW5mbztcbiAgICAgICAgfVxuICAgICAgICBpbmNvbWluZ1JvdXRlUGFyYW1zID0gdW5kZWZpbmVkO1xuICAgICAgICBoaXN0b3J5Q2hhbmdlTGlzdGVuZXJzLmZvckVhY2goKGNiKSA9PiBjYihjdXJyZW50Um91dGVJbmZvKSk7XG4gICAgfTtcbiAgICBjb25zdCBnZXRDdXJyZW50Um91dGVJbmZvID0gKCkgPT4gY3VycmVudFJvdXRlSW5mbztcbiAgICBjb25zdCBjYW5Hb0JhY2sgPSAoZGVlcCA9IDEpID0+IGxvY2F0aW9uSGlzdG9yeS5jYW5Hb0JhY2soZGVlcCwgaW5pdGlhbEhpc3RvcnlQb3NpdGlvbiwgY3VycmVudEhpc3RvcnlQb3NpdGlvbik7XG4gICAgY29uc3QgbmF2aWdhdGUgPSAobmF2aWdhdGlvbk9wdGlvbnMpID0+IHtcbiAgICAgICAgY29uc3QgeyByb3V0ZXJBbmltYXRpb24sIHJvdXRlckRpcmVjdGlvbiwgcm91dGVyTGluayB9ID0gbmF2aWdhdGlvbk9wdGlvbnM7XG4gICAgICAgIHNldEluY29taW5nUm91dGVQYXJhbXMoXCJwdXNoXCIsIHJvdXRlckRpcmVjdGlvbiwgcm91dGVyQW5pbWF0aW9uKTtcbiAgICAgICAgcm91dGVyLnB1c2gocm91dGVyTGluayk7XG4gICAgfTtcbiAgICBjb25zdCByZXNldFRhYiA9ICh0YWIpID0+IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlc2V0dGluZyB0aGUgdGFiIHNob3VsZCBnbyBiYWNrXG4gICAgICAgICAqIHRvIHRoZSBpbml0aWFsIHZpZXcgaW4gdGhlIHRhYiBzdGFjay5cbiAgICAgICAgICogSXQgc2hvdWxkIG5vdCBwdXNoIGEgbmV3IGluc3RhbmNlIG9mIHRoZVxuICAgICAgICAgKiByb290IHRhYiBwYWdlIG9udG8gdGhlIHN0YWNrLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUbyBkbyB0aGlzLCB3ZSBnZXQgdGhlIGluaXRpYWwgdmlldyBpbiB0aGVcbiAgICAgICAgICogdGFiIHN0YWNrIGFuZCBzdWJ0cmFjdCB0aGUgcG9zaXRpb24gb2YgdGhhdFxuICAgICAgICAgKiBlbnRyeSBmcm9tIG91ciBjdXJyZW50IHBvc2l0aW9uLiBGcm9tIHRoZXJlXG4gICAgICAgICAqIHdlIGNhbGwgcm91dGVyLmdvKCkgdG8gbW92ZSB1cyBiYWNrIHRoZVxuICAgICAgICAgKiBhcHByb3ByaWF0ZSBudW1iZXIgb2YgcG9zaXRpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3Qgcm91dGVJbmZvID0gbG9jYXRpb25IaXN0b3J5LmdldEZpcnN0Um91dGVJbmZvRm9yVGFiKHRhYik7XG4gICAgICAgIGlmIChyb3V0ZUluZm8pIHtcbiAgICAgICAgICAgIHJvdXRlci5nbyhyb3V0ZUluZm8ucG9zaXRpb24gLSBjdXJyZW50SGlzdG9yeVBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgY2hhbmdlVGFiID0gKHRhYiwgcGF0aCkgPT4ge1xuICAgICAgICBpZiAoIXBhdGgpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHJvdXRlSW5mbyA9IGxvY2F0aW9uSGlzdG9yeS5nZXRDdXJyZW50Um91dGVJbmZvRm9yVGFiKHRhYik7XG4gICAgICAgIGNvbnN0IFtwYXRobmFtZV0gPSBwYXRoLnNwbGl0KFwiP1wiKTtcbiAgICAgICAgaWYgKHJvdXRlSW5mbykge1xuICAgICAgICAgICAgaW5jb21pbmdSb3V0ZVBhcmFtcyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaW5jb21pbmdSb3V0ZVBhcmFtcyksIHsgcm91dGVyQWN0aW9uOiBcInB1c2hcIiwgcm91dGVyRGlyZWN0aW9uOiBcIm5vbmVcIiwgdGFiIH0pO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBXaGVuIGdvaW5nIGJhY2sgdG8gYSB0YWJcbiAgICAgICAgICAgICAqIHlvdSBqdXN0IGxlZnQsIGl0J3MgcG9zc2libGVcbiAgICAgICAgICAgICAqIGZvciB0aGUgcm91dGUgaW5mbyB0byBiZSBpbmNvcnJlY3RcbiAgICAgICAgICAgICAqIGFzIHRoZSB0YWIgeW91IHdhbnQgaXMgbm90IHRoZVxuICAgICAgICAgICAgICogdGFiIHlvdSBhcmUgb24uXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmIChyb3V0ZUluZm8ucGF0aG5hbWUgPT09IHBhdGhuYW1lKSB7XG4gICAgICAgICAgICAgICAgcm91dGVyLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBwYXRoOiByb3V0ZUluZm8ucGF0aG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBwYXJzZVF1ZXJ5KHJvdXRlSW5mby5zZWFyY2gpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcm91dGVyLnB1c2goeyBwYXRoOiBwYXRobmFtZSwgcXVlcnk6IHBhcnNlUXVlcnkocm91dGVJbmZvLnNlYXJjaCkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoYW5kbGVOYXZpZ2F0ZShwYXRobmFtZSwgXCJwdXNoXCIsIFwibm9uZVwiLCB1bmRlZmluZWQsIHRhYik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludm9rZWQgYnkgdGhlIElvblRhYnMgY29tcG9uZW50XG4gICAgICogZHVyaW5nIGEgaGlzdG9yeSBjaGFuZ2UgY2FsbGJhY2suIEl0IGlzIHJlc3BvbnNpYmxlXG4gICAgICogZm9yIGVuc3VyaW5nIHRoYXQgdGFiYmVkIHJvdXRlcyBoYXZlIHRoZSBjb3JyZWN0XG4gICAgICogXCJ0YWJcIiBmaWVsZCBpbiBpdHMgcm91dGVJbmZvIG9iamVjdC5cbiAgICAgKlxuICAgICAqIElvblRhYnMgd2lsbCBkZXRlcm1pbmUgaWYgdGhlIGN1cnJlbnQgcm91dGVcbiAgICAgKiBpcyBpbiB0YWJzIGFuZCBhc3NpZ24gaXQgdGhlIGNvcnJlY3QgdGFiLlxuICAgICAqIElmIHRoZSBjdXJyZW50IHJvdXRlIGlzIG5vdCBpbiB0YWJzLFxuICAgICAqIHRoZW4gSW9uVGFicyB3aWxsIG5vdCBpbnZva2UgdGhpcy5cbiAgICAgKi9cbiAgICBjb25zdCBoYW5kbGVTZXRDdXJyZW50VGFiID0gKHRhYikgPT4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogTm90ZSB0aGF0IHRoZSBjdXJyZW50IHBhZ2UgdGhhdCB3ZVxuICAgICAgICAgKiBhcmUgb24gaXMgbm90IG5lY2Vzc2FyaWx5IHRoZSBsYXN0IGl0ZW1cbiAgICAgICAgICogaW4gdGhlIGxvY2F0aW9uSGlzdG9yeSBzdGFjay4gQXMgYSByZXN1bHQsXG4gICAgICAgICAqIHdlIGNhbm5vdCB1c2UgbG9jYXRpb25IaXN0b3J5Lmxhc3QoKSBoZXJlLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgcmkgPSBPYmplY3QuYXNzaWduKHt9LCBsb2NhdGlvbkhpc3RvcnkuY3VycmVudChpbml0aWFsSGlzdG9yeVBvc2l0aW9uLCBjdXJyZW50SGlzdG9yeVBvc2l0aW9uKSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBoYW5kbGVIaXN0b3J5Q2hhbmdlIGlzIHRhYnMtYWdub3N0aWMgYnkgZGVzaWduLlxuICAgICAgICAgKiBPbmUgc2lkZSBlZmZlY3Qgb2YgdGhpcyBpcyB0aGF0IGNlcnRhaW4gdGFic1xuICAgICAgICAgKiByb3V0ZXMgaGF2ZSBleHRyYW5lb3VzL2luY29ycmVjdCBpbmZvcm1hdGlvblxuICAgICAgICAgKiB0aGF0IHdlIG5lZWQgdG8gcmVtb3ZlLiBUbyBub3QgdGlnaHRseSBjb3VwbGVcbiAgICAgICAgICogaGFuZGxlSGlzdG9yeUNoYW5nZSB3aXRoIHRhYnMsIHdlIGxldCB0aGVcbiAgICAgICAgICogaGFuZGxlU2V0Q3VycmVudFRhYiBmdW5jdGlvbi4gVGhpcyBmdW5jdGlvbiBpc1xuICAgICAgICAgKiBvbmx5IGNhbGxlZCBieSBJb25UYWJzLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHJpLnRhYiAhPT0gdGFiKSB7XG4gICAgICAgICAgICByaS50YWIgPSB0YWI7XG4gICAgICAgICAgICBsb2NhdGlvbkhpc3RvcnkudXBkYXRlKHJpKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogbGFzdFBhdGhuYW1lIHR5cGljYWxseSBlcXVhbHMgcHVzaGVkQnlSb3V0ZVxuICAgICAgICAgKiB3aGVuIG5hdmlnYXRpbmcgaW4gYSBsaW5lYXIgbWFubmVyLiBXaGVuIHN3aXRjaGluZyBiZXR3ZWVuXG4gICAgICAgICAqIHRhYnMsIHRoaXMgaXMgYWxtb3N0IG5ldmVyIHRoZSBjYXNlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBFeGFtcGxlOiAvdGFicy90YWJzMSAtLT4gL3RhYnMvdGFiMiAtLT4gL3RhYnMvdGFiMVxuICAgICAgICAgKiBUaGUgbGF0ZXN0IFRhYiAxIHJvdXRlIHdvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBpbmZvcm1hdGlvblxuICAgICAgICAgKiBsYXN0UGF0aG5hbWU6ICcvdGFicy90YWIyJ1xuICAgICAgICAgKiBwdXNoZWRCeVJvdXRlOiAnL3RhYnMvdGFiMidcbiAgICAgICAgICpcbiAgICAgICAgICogQSB0YWIgY2Fubm90IHB1c2ggYW5vdGhlciB0YWIsIHNvIHdlIG5lZWQgdG8gc2V0XG4gICAgICAgICAqIHB1c2hlZEJ5Um91dGUgdG8gYHVuZGVmaW5lZGAuIEFsdGVybmF0aXZlIHdheSBvZiB0aGlua2luZ1xuICAgICAgICAgKiBhYm91dCB0aGlzOiBZb3UgY2Fubm90IHN3aXBlIHRvIGdvIGJhY2sgZnJvbSBUYWIgMSB0byBUYWIgMi5cbiAgICAgICAgICpcbiAgICAgICAgICogSG93ZXZlciwgdGhlcmUgYXJlIHNvbWUgaW5zdGFuY2VzIHdoZXJlIHdlIGRvIHdhbnQgdG8ga2VlcFxuICAgICAgICAgKiB0aGUgcHVzaGVkQnlSb3V0ZS4gQXMgYSByZXN1bHQsIHdlIG5lZWQgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgICogd2Ugb25seSB3aXBlIHRoZSBwdXNoZWRCeVJvdXRlIHN0YXRlIHdoZW4gdGhlIGJvdGggb2YgdGhlXG4gICAgICAgICAqIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4gICAgICAgICAqIDEuIHB1c2hlZEJ5Um91dGUgaXMgZGlmZmVyZW50IGZyb20gbGFzdFBhdGhuYW1lXG4gICAgICAgICAqIDIuIFRoZSB0YWIgZm9yIHRoZSBwdXNoZWRCeVJvdXRlIGluZm8gaXMgZGlmZmVyZW50XG4gICAgICAgICAqIGZyb20gdGhlIGN1cnJlbnQgcm91dGUgdGFiLlxuICAgICAgICAgKlxuICAgICAgICAgKiBFeGFtcGxlIG9mIHdoZW4gd2Ugd291bGQgbm90IHdhbnQgdG8gY2xlYXIgcHVzaGVkQnlSb3V0ZTpcbiAgICAgICAgICogL3RhYnMvdGFiMSAtLT4gL3RhYnMvdGFiMS9jaGlsZCAtLT4gL3RhYnMvdGFiMiAtLT4gL3RhYnMvdGFiMS9jaGlsZFxuICAgICAgICAgKiBUaGUgbGF0ZXN0IFRhYiAxIENoaWxkIHJvdXRlIHdvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBpbmZvcm1hdGlvbjpcbiAgICAgICAgICogbGFzdFBhdGhuYW1lOiAnL3RhYnMvdGFiMidcbiAgICAgICAgICogcHVzaGVkQnlSb3V0ZTogJy90YWJzL3RhYjFcbiAgICAgICAgICpcbiAgICAgICAgICogSW4gdGhpcyBjYXNlLCAvdGFicy90YWIxL2NoaWxkIHNob3VsZCBiZSBhYmxlIHRvIHN3aXBlIHRvIGdvIGJhY2tcbiAgICAgICAgICogdG8gL3RhYnMvdGFiMSBzbyB3ZSB3YW50IHRvIGtlZXAgdGhlIHB1c2hlZEJ5Um91dGUuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBwdXNoZWRCeVJvdXRlID0gbG9jYXRpb25IaXN0b3J5LmZpbmRMYXN0TG9jYXRpb24ocmkpO1xuICAgICAgICBpZiAocmkucHVzaGVkQnlSb3V0ZSAhPT0gcmkubGFzdFBhdGhuYW1lICYmIChwdXNoZWRCeVJvdXRlID09PSBudWxsIHx8IHB1c2hlZEJ5Um91dGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHB1c2hlZEJ5Um91dGUudGFiKSAhPT0gdGFiKSB7XG4gICAgICAgICAgICByaS5wdXNoZWRCeVJvdXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgbG9jYXRpb25IaXN0b3J5LnVwZGF0ZShyaSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHJlZ2lzdGVySGlzdG9yeUNoYW5nZUxpc3RlbmVyID0gKGNiKSA9PiB7XG4gICAgICAgIGhpc3RvcnlDaGFuZ2VMaXN0ZW5lcnMucHVzaChjYik7XG4gICAgfTtcbiAgICBjb25zdCBzZXRJbmNvbWluZ1JvdXRlUGFyYW1zID0gKHJvdXRlckFjdGlvbiA9IFwicHVzaFwiLCByb3V0ZXJEaXJlY3Rpb24gPSBcImZvcndhcmRcIiwgcm91dGVyQW5pbWF0aW9uLCB0YWIpID0+IHtcbiAgICAgICAgaW5jb21pbmdSb3V0ZVBhcmFtcyA9IHtcbiAgICAgICAgICAgIHJvdXRlckFjdGlvbixcbiAgICAgICAgICAgIHJvdXRlckRpcmVjdGlvbixcbiAgICAgICAgICAgIHJvdXRlckFuaW1hdGlvbixcbiAgICAgICAgICAgIHRhYixcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGdvQmFjayA9IChyb3V0ZXJBbmltYXRpb24pID0+IHtcbiAgICAgICAgc2V0SW5jb21pbmdSb3V0ZVBhcmFtcyhcInBvcFwiLCBcImJhY2tcIiwgcm91dGVyQW5pbWF0aW9uKTtcbiAgICAgICAgcm91dGVyLmJhY2soKTtcbiAgICB9O1xuICAgIGNvbnN0IGdvRm9yd2FyZCA9IChyb3V0ZXJBbmltYXRpb24pID0+IHtcbiAgICAgICAgc2V0SW5jb21pbmdSb3V0ZVBhcmFtcyhcInB1c2hcIiwgXCJmb3J3YXJkXCIsIHJvdXRlckFuaW1hdGlvbik7XG4gICAgICAgIHJvdXRlci5mb3J3YXJkKCk7XG4gICAgfTtcbiAgICBjb25zdCBnZXRMZWF2aW5nUm91dGVJbmZvID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gbG9jYXRpb25IaXN0b3J5LmN1cnJlbnQoaW5pdGlhbEhpc3RvcnlQb3NpdGlvbiwgY3VycmVudEhpc3RvcnlQb3NpdGlvbik7XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBoYW5kbGVOYXZpZ2F0ZSxcbiAgICAgICAgZ2V0TGVhdmluZ1JvdXRlSW5mbyxcbiAgICAgICAgaGFuZGxlTmF2aWdhdGVCYWNrLFxuICAgICAgICBoYW5kbGVTZXRDdXJyZW50VGFiLFxuICAgICAgICBnZXRDdXJyZW50Um91dGVJbmZvLFxuICAgICAgICBjYW5Hb0JhY2ssXG4gICAgICAgIG5hdmlnYXRlLFxuICAgICAgICByZXNldFRhYixcbiAgICAgICAgY2hhbmdlVGFiLFxuICAgICAgICByZWdpc3Rlckhpc3RvcnlDaGFuZ2VMaXN0ZW5lcixcbiAgICAgICAgZ29CYWNrLFxuICAgICAgICBnb0ZvcndhcmQsXG4gICAgfTtcbn07XG5cbmNvbnN0IGNyZWF0ZVZpZXdTdGFja3MgPSAocm91dGVyKSA9PiB7XG4gICAgY29uc3Qgdmlld1N0YWNrcyA9IHt9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBhY3RpdmUgc3RhY2tzLlxuICAgICAqIFRoaXMgaXMgdXNlZnVsIGZvciBkZXRlcm1pbmluZyBpZiBhbiBhcHBcbiAgICAgKiBpcyB1c2luZyBsaW5lYXIgbmF2aWdhdGlvbiBvbmx5IG9yIG5vbi1saW5lYXJcbiAgICAgKiBuYXZpZ2F0aW9uLiBNdWx0aXBsZSBzdGFja3MgaW5kaWNpYXRlIGFuIGFwcFxuICAgICAqIGlzIHVzaW5nIG5vbi1saW5lYXIgbmF2aWdhdGlvbi5cbiAgICAgKi9cbiAgICBjb25zdCBzaXplID0gKCkgPT4gT2JqZWN0LmtleXModmlld1N0YWNrcykubGVuZ3RoO1xuICAgIGNvbnN0IGNsZWFyID0gKG91dGxldElkKSA9PiB7XG4gICAgICAgIGRlbGV0ZSB2aWV3U3RhY2tzW291dGxldElkXTtcbiAgICB9O1xuICAgIGNvbnN0IGdldFZpZXdTdGFjayA9IChvdXRsZXRJZCkgPT4ge1xuICAgICAgICByZXR1cm4gdmlld1N0YWNrc1tvdXRsZXRJZF07XG4gICAgfTtcbiAgICBjb25zdCByZWdpc3RlcklvblBhZ2UgPSAodmlld0l0ZW0sIGlvblBhZ2UpID0+IHtcbiAgICAgICAgdmlld0l0ZW0uaW9uUGFnZUVsZW1lbnQgPSBpb25QYWdlO1xuICAgICAgICB2aWV3SXRlbS5pb25Sb3V0ZSA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIGlzIG5lZWRlZCBvdGhlcndpc2UgVnVlIFJvdXRlclxuICAgICAgICAgKiB3aWxsIG5vdCBjb25zaWRlciB0aGlzIGNvbXBvbmVudCBtb3VudGVkXG4gICAgICAgICAqIGFuZCB3aWxsIG5vdCBydW4gcm91dGUgZ3VhcmRzIHRoYXRcbiAgICAgICAgICogYXJlIHdyaXR0ZW4gaW4gdGhlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHZpZXdJdGVtLm1hdGNoZWRSb3V0ZS5pbnN0YW5jZXMgPSB7XG4gICAgICAgICAgICBkZWZhdWx0OiB2aWV3SXRlbS52dWVDb21wb25lbnRSZWYudmFsdWUsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBmaW5kVmlld0l0ZW1CeVJvdXRlSW5mbyA9IChyb3V0ZUluZm8sIG91dGxldElkKSA9PiB7XG4gICAgICAgIHJldHVybiBmaW5kVmlld0l0ZW1CeVBhdGgocm91dGVJbmZvLnBhdGhuYW1lLCBvdXRsZXRJZCwgZmFsc2UpO1xuICAgIH07XG4gICAgY29uc3QgZmluZExlYXZpbmdWaWV3SXRlbUJ5Um91dGVJbmZvID0gKHJvdXRlSW5mbywgb3V0bGV0SWQsIG11c3RCZUlvblJvdXRlID0gdHJ1ZSkgPT4ge1xuICAgICAgICByZXR1cm4gZmluZFZpZXdJdGVtQnlQYXRoKHJvdXRlSW5mby5sYXN0UGF0aG5hbWUsIG91dGxldElkLCBtdXN0QmVJb25Sb3V0ZSk7XG4gICAgfTtcbiAgICBjb25zdCBmaW5kVmlld0l0ZW1CeVBhdGhuYW1lID0gKHBhdGhuYW1lLCBvdXRsZXRJZCkgPT4ge1xuICAgICAgICByZXR1cm4gZmluZFZpZXdJdGVtQnlQYXRoKHBhdGhuYW1lLCBvdXRsZXRJZCwgZmFsc2UpO1xuICAgIH07XG4gICAgY29uc3QgZmluZFZpZXdJdGVtSW5TdGFjayA9IChwYXRoLCBzdGFjaykgPT4ge1xuICAgICAgICByZXR1cm4gc3RhY2suZmluZCgodmlld0l0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmICh2aWV3SXRlbS5wYXRobmFtZSA9PT0gcGF0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2aWV3SXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgZmluZFZpZXdJdGVtQnlQYXRoID0gKHBhdGgsIG91dGxldElkLCBtdXN0QmVJb25Sb3V0ZSA9IGZhbHNlKSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoVmlldyA9ICh2aWV3SXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKChtdXN0QmVJb25Sb3V0ZSAmJiAhdmlld0l0ZW0uaW9uUm91dGUpIHx8IHBhdGggPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNvbHZlZFBhdGggPSByb3V0ZXIucmVzb2x2ZShwYXRoKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbmRNYXRjaGVkUm91dGUgPSByZXNvbHZlZFBhdGgubWF0Y2hlZC5maW5kKChtYXRjaGVkUm91dGUpID0+IG1hdGNoZWRSb3V0ZSA9PT0gdmlld0l0ZW0ubWF0Y2hlZFJvdXRlKTtcbiAgICAgICAgICAgIGlmIChmaW5kTWF0Y2hlZFJvdXRlKSB7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogL3BhZ2UvMSBhbmQgL3BhZ2UvMiBzaG91bGQgbm90IG1hdGNoXG4gICAgICAgICAgICAgICAgICogdG8gdGhlIHNhbWUgdmlldyBpdGVtIG90aGVyd2lzZSB0aGVyZSB3aWxsXG4gICAgICAgICAgICAgICAgICogYmUgbm90IHBhZ2UgdHJhbnNpdGlvbiBhbmQgd2Ugd2lsbCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgICogZXhwbGljaXRseSBjbGVhciBvdXQgcGFyYW1ldGVycyBmcm9tIHBhZ2UgMVxuICAgICAgICAgICAgICAgICAqIHNvIHRoZSBwYWdlIDIgcGFyYW1zIGFyZSBwcm9wZXJseSBwYXNzZWRcbiAgICAgICAgICAgICAgICAgKiB0byB0aGUgZGV2ZWxvcGVyJ3MgYXBwLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhc1BhcmFtZXRlciA9IGZpbmRNYXRjaGVkUm91dGUucGF0aC5pbmNsdWRlcyhcIjpcIik7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1BhcmFtZXRlciAmJiBwYXRoICE9PSB2aWV3SXRlbS5wYXRobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB2aWV3SXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChvdXRsZXRJZCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhY2sgPSB2aWV3U3RhY2tzW291dGxldElkXTtcbiAgICAgICAgICAgIGlmICghc3RhY2spXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gcm91dGVyXG4gICAgICAgICAgICAgICAgPyBzdGFjay5maW5kKG1hdGNoVmlldylcbiAgICAgICAgICAgICAgICA6IGZpbmRWaWV3SXRlbUluU3RhY2socGF0aCwgc3RhY2spO1xuICAgICAgICAgICAgaWYgKG1hdGNoKVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3V0bGV0SWQgaW4gdmlld1N0YWNrcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gdmlld1N0YWNrc1tvdXRsZXRJZF07XG4gICAgICAgICAgICAgICAgY29uc3Qgdmlld0l0ZW0gPSBmaW5kVmlld0l0ZW1JblN0YWNrKHBhdGgsIHN0YWNrKTtcbiAgICAgICAgICAgICAgICBpZiAodmlld0l0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpZXdJdGVtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLy8gVE9ETyhGVy0yOTY5KTogdHlwZVxuICAgIGNvbnN0IGNyZWF0ZVZpZXdJdGVtID0gKG91dGxldElkLCB2dWVDb21wb25lbnQsIG1hdGNoZWRSb3V0ZSwgcm91dGVJbmZvLCBpb25QYWdlKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogZ2VuZXJhdGVJZChcInZpZXdJdGVtXCIpLFxuICAgICAgICAgICAgcGF0aG5hbWU6IHJvdXRlSW5mby5wYXRobmFtZSxcbiAgICAgICAgICAgIG91dGxldElkLFxuICAgICAgICAgICAgbWF0Y2hlZFJvdXRlLFxuICAgICAgICAgICAgaW9uUGFnZUVsZW1lbnQ6IGlvblBhZ2UsXG4gICAgICAgICAgICB2dWVDb21wb25lbnQsXG4gICAgICAgICAgICB2dWVDb21wb25lbnRSZWY6IHNoYWxsb3dSZWYoKSxcbiAgICAgICAgICAgIGlvblJvdXRlOiBmYWxzZSxcbiAgICAgICAgICAgIG1vdW50OiBmYWxzZSxcbiAgICAgICAgICAgIGV4YWN0OiByb3V0ZUluZm8ucGF0aG5hbWUgPT09IG1hdGNoZWRSb3V0ZS5wYXRoLFxuICAgICAgICAgICAgcGFyYW1zOiByb3V0ZUluZm8ucGFyYW1zLFxuICAgICAgICAgICAgdnVlQ29tcG9uZW50RGF0YToge30sXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBhZGQgPSAodmlld0l0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgeyBvdXRsZXRJZCB9ID0gdmlld0l0ZW07XG4gICAgICAgIGlmICghdmlld1N0YWNrc1tvdXRsZXRJZF0pIHtcbiAgICAgICAgICAgIHZpZXdTdGFja3Nbb3V0bGV0SWRdID0gW3ZpZXdJdGVtXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZpZXdTdGFja3Nbb3V0bGV0SWRdLnB1c2godmlld0l0ZW0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmUgPSAodmlld0l0ZW0sIG91dGxldElkKSA9PiB7XG4gICAgICAgIGlmICghb3V0bGV0SWQpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwib3V0bGV0SWQgcmVxdWlyZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgdmlld1N0YWNrID0gdmlld1N0YWNrc1tvdXRsZXRJZF07XG4gICAgICAgIGlmICh2aWV3U3RhY2spIHtcbiAgICAgICAgICAgIHZpZXdTdGFja3Nbb3V0bGV0SWRdID0gdmlld1N0YWNrLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pZCAhPT0gdmlld0l0ZW0uaWQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBnZXRDaGlsZHJlblRvUmVuZGVyID0gKG91dGxldElkKSA9PiB7XG4gICAgICAgIGNvbnN0IHZpZXdTdGFjayA9IHZpZXdTdGFja3Nbb3V0bGV0SWRdO1xuICAgICAgICBpZiAodmlld1N0YWNrKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnRzID0gdmlld1N0YWNrc1tvdXRsZXRJZF0uZmlsdGVyKCh2KSA9PiB2Lm1vdW50KTtcbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnRzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdoZW4gbmF2aWdhdGluZyBiYWNrd2FyZHMsIHdlIG5lZWQgdG8gY2xlYW4gdXAgYW5kXG4gICAgICogbGVhdmluZyBwYWdlcyBzbyB0aGF0IHRoZXkgYXJlIHJlLWNyZWF0ZWQgaWZcbiAgICAgKiB3ZSBldmVyIG5hdmlnYXRlIGJhY2sgdG8gdGhlbS4gVGhpcyBpcyBlc3BlY2lhbGx5XG4gICAgICogaW1wb3J0YW50IHdoZW4gdXNpbmcgcm91dGVyLmdvIGFuZCBzdGVwcGluZyBiYWNrXG4gICAgICogbXVsdGlwbGUgcGFnZXMgYXQgYSB0aW1lLlxuICAgICAqL1xuICAgIGNvbnN0IHVubW91bnRMZWF2aW5nVmlld3MgPSAob3V0bGV0SWQsIHZpZXdJdGVtLCBkZWx0YSA9IDEpID0+IHtcbiAgICAgICAgY29uc3Qgdmlld1N0YWNrID0gdmlld1N0YWNrc1tvdXRsZXRJZF07XG4gICAgICAgIGlmICghdmlld1N0YWNrKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBzdGFydEluZGV4ID0gdmlld1N0YWNrLmZpbmRJbmRleCgodikgPT4gdiA9PT0gdmlld0l0ZW0pO1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleCArIDE7IGkgPCBzdGFydEluZGV4IC0gZGVsdGE7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgdmlld0l0ZW0gPSB2aWV3U3RhY2tbaV07XG4gICAgICAgICAgICB2aWV3SXRlbS5tb3VudCA9IGZhbHNlO1xuICAgICAgICAgICAgdmlld0l0ZW0uaW9uUGFnZUVsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB2aWV3SXRlbS5pb25Sb3V0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdmlld0l0ZW0ubWF0Y2hlZFJvdXRlLmluc3RhbmNlcyA9IHt9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBXaGVuIG5hdmlnYXRpbmcgZm9yd2FyZCBpdCBpcyBwb3NzaWJsZSBmb3JcbiAgICAgKiBkZXZlbG9wZXJzIHRvIHN0ZXAgZm9yd2FyZCBvdmVyIG11bHRpcGxlIHZpZXdzLlxuICAgICAqIFRoZSBpbnRlcm1lZGlhcnkgdmlld3MgbmVlZCB0byBiZSByZW1vdW50ZWQgc28gdGhhdFxuICAgICAqIHN3aXBlIHRvIGdvIGJhY2sgd29ya3MgcHJvcGVybHkuXG4gICAgICogV2UgbmVlZCB0byBhY2NvdW50IGZvciB0aGUgZGVsdGEgdmFsdWUgaGVyZSB0b28gYmVjYXVzZVxuICAgICAqIHdlIGRvIG5vdCB3YW50IHRvIHJlbW91bnQgYW4gdW5yZWxhdGVkIHZpZXcuXG4gICAgICogRXhhbXBsZTpcbiAgICAgKiAvaG9tZSAtLT4gL3BhZ2UyIC0tPiByb3V0ZXIuYmFjaygpIC0tPiAvcGFnZTNcbiAgICAgKiBHb2luZyB0byAvcGFnZTMgd291bGQgcmVtb3VudCAvcGFnZTIgc2luY2Ugd2UgZG9cbiAgICAgKiBub3QgcHJ1bmUgL3BhZ2UyIGZyb20gdGhlIHN0YWNrLiBIb3dldmVyLCAvcGFnZTJcbiAgICAgKiBuZWVkcyB0byByZW1haW4gaW4gdGhlIHN0YWNrLlxuICAgICAqIEV4YW1wbGU6XG4gICAgICogL2hvbWUgLS0+IC9wYWdlMiAtLT4gL3BhZ2UzIC0tPiByb3V0ZXIuZ28oLTIpIC0tPiByb3V0ZXIuZ28oMilcbiAgICAgKiBXZSB3b3VsZCBlbmQgdXAgb24gL3BhZ2UzLCBidXQgdXNlcnMgbmVlZCB0byBiZSBhYmxlIHRvIHN3aXBlXG4gICAgICogdG8gZ28gYmFjayB0byAvcGFnZTIgYW5kIC9ob21lLCBzbyB3ZSBuZWVkIGJvdGggcGFnZXMgbW91bnRlZFxuICAgICAqIGluIHRoZSBET00uXG4gICAgICovXG4gICAgY29uc3QgbW91bnRJbnRlcm1lZGlhcnlWaWV3cyA9IChvdXRsZXRJZCwgdmlld0l0ZW0sIGRlbHRhID0gMSkgPT4ge1xuICAgICAgICBjb25zdCB2aWV3U3RhY2sgPSB2aWV3U3RhY2tzW291dGxldElkXTtcbiAgICAgICAgaWYgKCF2aWV3U3RhY2spXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHN0YXJ0SW5kZXggPSB2aWV3U3RhY2suZmluZEluZGV4KCh2KSA9PiB2ID09PSB2aWV3SXRlbSk7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4ICsgMTsgaSA8IHN0YXJ0SW5kZXggKyBkZWx0YTsgaSsrKSB7XG4gICAgICAgICAgICB2aWV3U3RhY2tbaV0ubW91bnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICB1bm1vdW50TGVhdmluZ1ZpZXdzLFxuICAgICAgICBtb3VudEludGVybWVkaWFyeVZpZXdzLFxuICAgICAgICBjbGVhcixcbiAgICAgICAgZmluZFZpZXdJdGVtQnlSb3V0ZUluZm8sXG4gICAgICAgIGZpbmRMZWF2aW5nVmlld0l0ZW1CeVJvdXRlSW5mbyxcbiAgICAgICAgZmluZFZpZXdJdGVtQnlQYXRobmFtZSxcbiAgICAgICAgY3JlYXRlVmlld0l0ZW0sXG4gICAgICAgIGdldENoaWxkcmVuVG9SZW5kZXIsXG4gICAgICAgIGFkZCxcbiAgICAgICAgcmVtb3ZlLFxuICAgICAgICByZWdpc3RlcklvblBhZ2UsXG4gICAgICAgIGdldFZpZXdTdGFjayxcbiAgICAgICAgc2l6ZSxcbiAgICB9O1xufTtcblxuY29uc3QgY3JlYXRlUm91dGVyID0gKG9wdHMpID0+IHtcbiAgICBjb25zdCByb3V0ZXJPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0cyk7XG4gICAgZGVsZXRlIHJvdXRlck9wdGlvbnMudGFic1ByZWZpeDtcbiAgICBjb25zdCByb3V0ZXIgPSBjcmVhdGVSb3V0ZXIkMShyb3V0ZXJPcHRpb25zKTtcbiAgICBjb25zdCBpb25Sb3V0ZXIgPSBjcmVhdGVJb25Sb3V0ZXIob3B0cywgcm91dGVyKTtcbiAgICBjb25zdCB2aWV3U3RhY2tzID0gY3JlYXRlVmlld1N0YWNrcyhyb3V0ZXIpO1xuICAgIGNvbnN0IG9sZEluc3RhbGwgPSByb3V0ZXIuaW5zdGFsbC5iaW5kKHJvdXRlcik7XG4gICAgcm91dGVyLmluc3RhbGwgPSAoYXBwKSA9PiB7XG4gICAgICAgIGFwcC5wcm92aWRlKFwibmF2TWFuYWdlclwiLCBpb25Sb3V0ZXIpO1xuICAgICAgICBhcHAucHJvdmlkZShcInZpZXdTdGFja3NcIiwgdmlld1N0YWNrcyk7XG4gICAgICAgIG9sZEluc3RhbGwoYXBwKTtcbiAgICB9O1xuICAgIGNvbnN0IG9sZElzUmVhZHkgPSByb3V0ZXIuaXNSZWFkeS5iaW5kKHJvdXRlcik7XG4gICAgcm91dGVyLmlzUmVhZHkgPSAoKSA9PiBvbGRJc1JlYWR5KCk7XG4gICAgcmV0dXJuIHJvdXRlcjtcbn07XG5jb25zdCBjcmVhdGVXZWJIaXN0b3J5ID0gKGJhc2UpID0+IGNyZWF0ZVdlYkhpc3RvcnkkMShiYXNlKTtcbmNvbnN0IGNyZWF0ZVdlYkhhc2hIaXN0b3J5ID0gKGJhc2UpID0+IGNyZWF0ZVdlYkhhc2hIaXN0b3J5JDEoYmFzZSk7XG5jb25zdCBjcmVhdGVNZW1vcnlIaXN0b3J5ID0gKGJhc2UpID0+IGNyZWF0ZU1lbW9yeUhpc3RvcnkkMShiYXNlKTtcblxuZXhwb3J0IHsgY3JlYXRlTWVtb3J5SGlzdG9yeSwgY3JlYXRlUm91dGVyLCBjcmVhdGVXZWJIYXNoSGlzdG9yeSwgY3JlYXRlV2ViSGlzdG9yeSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iLCI8dGVtcGxhdGU+XG4gIDxpb24tcGFnZT5cbiAgICA8aW9uLWhlYWRlciA6dHJhbnNsdWNlbnQ9XCJ0cnVlXCI+XG4gICAgICA8aW9uLXRvb2xiYXI+XG4gICAgICAgIDxpb24tdGl0bGU+Qmxhbms8L2lvbi10aXRsZT5cbiAgICAgIDwvaW9uLXRvb2xiYXI+XG4gICAgPC9pb24taGVhZGVyPlxuXG4gICAgPGlvbi1jb250ZW50IDpmdWxsc2NyZWVuPVwidHJ1ZVwiPlxuICAgICAgPGlvbi1oZWFkZXIgY29sbGFwc2U9XCJjb25kZW5zZVwiPlxuICAgICAgICA8aW9uLXRvb2xiYXI+XG4gICAgICAgICAgPGlvbi10aXRsZSBzaXplPVwibGFyZ2VcIj5CbGFuazwvaW9uLXRpdGxlPlxuICAgICAgICA8L2lvbi10b29sYmFyPlxuICAgICAgPC9pb24taGVhZGVyPlxuXG4gICAgICA8ZGl2IGlkPVwiY29udGFpbmVyXCI+XG4gICAgICAgIDxzdHJvbmc+UmVhZHkgdG8gY3JlYXRlIGFuIGFwcD88L3N0cm9uZz5cbiAgICAgICAgPHA+U3RhcnQgd2l0aCBJb25pYyA8YSB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCIgaHJlZj1cImh0dHBzOi8vaW9uaWNmcmFtZXdvcmsuY29tL2RvY3MvY29tcG9uZW50c1wiPlVJIENvbXBvbmVudHM8L2E+PC9wPlxuICAgICAgPC9kaXY+XG4gICAgPC9pb24tY29udGVudD5cbiAgPC9pb24tcGFnZT5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgc2V0dXAgbGFuZz1cInRzXCI+XG5pbXBvcnQgeyBJb25Db250ZW50LCBJb25IZWFkZXIsIElvblBhZ2UsIElvblRpdGxlLCBJb25Ub29sYmFyIH0gZnJvbSAnQGlvbmljL3Z1ZSc7XG48L3NjcmlwdD5cblxuPHN0eWxlIHNjb3BlZD5cbiNjb250YWluZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICB0b3A6IDUwJTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xufVxuXG4jY29udGFpbmVyIHN0cm9uZyB7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgbGluZS1oZWlnaHQ6IDI2cHg7XG59XG5cbiNjb250YWluZXIgcCB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgbGluZS1oZWlnaHQ6IDIycHg7XG4gIFxuICBjb2xvcjogIzhjOGM4YztcbiAgXG4gIG1hcmdpbjogMDtcbn1cblxuI2NvbnRhaW5lciBhIHtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xufVxuPC9zdHlsZT5cbiIsImltcG9ydCB7IGNyZWF0ZVJvdXRlciwgY3JlYXRlV2ViSGlzdG9yeSB9IGZyb20gJ0Bpb25pYy92dWUtcm91dGVyJztcbmltcG9ydCB7IFJvdXRlUmVjb3JkUmF3IH0gZnJvbSAndnVlLXJvdXRlcic7XG5pbXBvcnQgSG9tZVBhZ2UgZnJvbSAnLi4vdmlld3MvSG9tZVBhZ2UudnVlJ1xuXG5jb25zdCByb3V0ZXM6IEFycmF5PFJvdXRlUmVjb3JkUmF3PiA9IFtcbiAge1xuICAgIHBhdGg6ICcvJyxcbiAgICByZWRpcmVjdDogJy9ob21lJ1xuICB9LFxuICB7XG4gICAgcGF0aDogJy9ob21lJyxcbiAgICBuYW1lOiAnSG9tZScsXG4gICAgY29tcG9uZW50OiBIb21lUGFnZVxuICB9XG5dXG5cbmNvbnN0IHJvdXRlciA9IGNyZWF0ZVJvdXRlcih7XG4gIGhpc3Rvcnk6IGNyZWF0ZVdlYkhpc3RvcnkoaW1wb3J0Lm1ldGEuZW52LkJBU0VfVVJMKSxcbiAgcm91dGVzXG59KVxuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXJcbiIsImltcG9ydCB7IGNyZWF0ZUFwcCB9IGZyb20gJ3Z1ZSdcbmltcG9ydCBBcHAgZnJvbSAnLi9BcHAudnVlJ1xuaW1wb3J0IHJvdXRlciBmcm9tICcuL3JvdXRlcic7XG5cbmltcG9ydCB7IElvbmljVnVlIH0gZnJvbSAnQGlvbmljL3Z1ZSc7XG5cbi8qIENvcmUgQ1NTIHJlcXVpcmVkIGZvciBJb25pYyBjb21wb25lbnRzIHRvIHdvcmsgcHJvcGVybHkgKi9cbmltcG9ydCAnQGlvbmljL3Z1ZS9jc3MvY29yZS5jc3MnO1xuXG4vKiBCYXNpYyBDU1MgZm9yIGFwcHMgYnVpbHQgd2l0aCBJb25pYyAqL1xuaW1wb3J0ICdAaW9uaWMvdnVlL2Nzcy9ub3JtYWxpemUuY3NzJztcbmltcG9ydCAnQGlvbmljL3Z1ZS9jc3Mvc3RydWN0dXJlLmNzcyc7XG5pbXBvcnQgJ0Bpb25pYy92dWUvY3NzL3R5cG9ncmFwaHkuY3NzJztcblxuLyogT3B0aW9uYWwgQ1NTIHV0aWxzIHRoYXQgY2FuIGJlIGNvbW1lbnRlZCBvdXQgKi9cbmltcG9ydCAnQGlvbmljL3Z1ZS9jc3MvcGFkZGluZy5jc3MnO1xuaW1wb3J0ICdAaW9uaWMvdnVlL2Nzcy9mbG9hdC1lbGVtZW50cy5jc3MnO1xuaW1wb3J0ICdAaW9uaWMvdnVlL2Nzcy90ZXh0LWFsaWdubWVudC5jc3MnO1xuaW1wb3J0ICdAaW9uaWMvdnVlL2Nzcy90ZXh0LXRyYW5zZm9ybWF0aW9uLmNzcyc7XG5pbXBvcnQgJ0Bpb25pYy92dWUvY3NzL2ZsZXgtdXRpbHMuY3NzJztcbmltcG9ydCAnQGlvbmljL3Z1ZS9jc3MvZGlzcGxheS5jc3MnO1xuXG4vKipcbiAqIElvbmljIERhcmsgTW9kZVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEZvciBtb3JlIGluZm8sIHBsZWFzZSBzZWU6XG4gKiBodHRwczovL2lvbmljZnJhbWV3b3JrLmNvbS9kb2NzL3RoZW1pbmcvZGFyay1tb2RlXG4gKi9cblxuLyogQGltcG9ydCAnQGlvbmljL3Z1ZS9jc3MvcGFsZXR0ZXMvZGFyay5hbHdheXMuY3NzJzsgKi9cbi8qIEBpbXBvcnQgJ0Bpb25pYy92dWUvY3NzL3BhbGV0dGVzL2RhcmsuY2xhc3MuY3NzJzsgKi9cbmltcG9ydCAnQGlvbmljL3Z1ZS9jc3MvcGFsZXR0ZXMvZGFyay5zeXN0ZW0uY3NzJztcblxuLyogVGhlbWUgdmFyaWFibGVzICovXG5pbXBvcnQgJy4vdGhlbWUvdmFyaWFibGVzLmNzcyc7XG5cbmNvbnN0IGFwcCA9IGNyZWF0ZUFwcChBcHApXG4gIC51c2UoSW9uaWNWdWUpXG4gIC51c2Uocm91dGVyKTtcblxucm91dGVyLmlzUmVhZHkoKS50aGVuKCgpID0+IHtcbiAgYXBwLm1vdW50KCcjYXBwJyk7XG59KTtcbiJdLCJmaWxlIjoiYXNzZXRzL2luZGV4LUNVMEgydUs5LmpzIn0=